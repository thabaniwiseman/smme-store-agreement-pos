var kye=Object.defineProperty;var Xge=o=>{throw TypeError(o)};var Tye=(o,i,s)=>i in o?kye(o,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[i]=s;var vy=(o,i,s)=>Tye(o,typeof i!="symbol"?i+"":i,s),Ame=(o,i,s)=>i.has(o)||Xge("Cannot "+s);var to=(o,i,s)=>(Ame(o,i,"read from private field"),s?s.call(o):i.get(o)),Ku=(o,i,s)=>i.has(o)?Xge("Cannot add the same private member more than once"):i instanceof WeakSet?i.add(o):i.set(o,s),ku=(o,i,s,_)=>(Ame(o,i,"write to private field"),_?_.call(o,s):i.set(o,s),s),Nu=(o,i,s)=>(Ame(o,i,"access private method"),s);var B0=(o,i,s,_)=>({set _(_e){ku(o,i,_e,s)},get _(){return to(o,i,_)}});function _mergeNamespaces(o,i){for(var s=0;s<i.length;s++){const _=i[s];if(typeof _!="string"&&!Array.isArray(_)){for(const _e in _)if(_e!=="default"&&!(_e in o)){const ct=Object.getOwnPropertyDescriptor(_,_e);ct&&Object.defineProperty(o,_e,ct.get?ct:{enumerable:!0,get:()=>_[_e]})}}}return Object.freeze(Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}))}(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const _e of document.querySelectorAll('link[rel="modulepreload"]'))_(_e);new MutationObserver(_e=>{for(const ct of _e)if(ct.type==="childList")for(const Mt of ct.addedNodes)Mt.tagName==="LINK"&&Mt.rel==="modulepreload"&&_(Mt)}).observe(document,{childList:!0,subtree:!0});function s(_e){const ct={};return _e.integrity&&(ct.integrity=_e.integrity),_e.referrerPolicy&&(ct.referrerPolicy=_e.referrerPolicy),_e.crossOrigin==="use-credentials"?ct.credentials="include":_e.crossOrigin==="anonymous"?ct.credentials="omit":ct.credentials="same-origin",ct}function _(_e){if(_e.ep)return;_e.ep=!0;const ct=s(_e);fetch(_e.href,ct)}})();function getDefaultExportFromCjs$1(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$2=Symbol.for("react.element"),n$2=Symbol.for("react.portal"),p$4=Symbol.for("react.fragment"),q$3=Symbol.for("react.strict_mode"),r$3=Symbol.for("react.profiler"),t$2=Symbol.for("react.provider"),u$1=Symbol.for("react.context"),v$3=Symbol.for("react.forward_ref"),w$2=Symbol.for("react.suspense"),x$1=Symbol.for("react.memo"),y$2=Symbol.for("react.lazy"),z$2=Symbol.iterator;function A$3(o){return o===null||typeof o!="object"?null:(o=z$2&&o[z$2]||o["@@iterator"],typeof o=="function"?o:null)}var B$3={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$1=Object.assign,D$4={};function E$2(o,i,s){this.props=o,this.context=i,this.refs=D$4,this.updater=s||B$3}E$2.prototype.isReactComponent={};E$2.prototype.setState=function(o,i){if(typeof o!="object"&&typeof o!="function"&&o!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,o,i,"setState")};E$2.prototype.forceUpdate=function(o){this.updater.enqueueForceUpdate(this,o,"forceUpdate")};function F$1(){}F$1.prototype=E$2.prototype;function G$5(o,i,s){this.props=o,this.context=i,this.refs=D$4,this.updater=s||B$3}var H$4=G$5.prototype=new F$1;H$4.constructor=G$5;C$1(H$4,E$2.prototype);H$4.isPureReactComponent=!0;var I$2=Array.isArray,J$2=Object.prototype.hasOwnProperty,K$2={current:null},L$1={key:!0,ref:!0,__self:!0,__source:!0};function M$2(o,i,s){var _,_e={},ct=null,Mt=null;if(i!=null)for(_ in i.ref!==void 0&&(Mt=i.ref),i.key!==void 0&&(ct=""+i.key),i)J$2.call(i,_)&&!L$1.hasOwnProperty(_)&&(_e[_]=i[_]);var Ft=arguments.length-2;if(Ft===1)_e.children=s;else if(1<Ft){for(var Ut=Array(Ft),Xt=0;Xt<Ft;Xt++)Ut[Xt]=arguments[Xt+2];_e.children=Ut}if(o&&o.defaultProps)for(_ in Ft=o.defaultProps,Ft)_e[_]===void 0&&(_e[_]=Ft[_]);return{$$typeof:l$2,type:o,key:ct,ref:Mt,props:_e,_owner:K$2.current}}function N$3(o,i){return{$$typeof:l$2,type:o.type,key:i,ref:o.ref,props:o.props,_owner:o._owner}}function O$1(o){return typeof o=="object"&&o!==null&&o.$$typeof===l$2}function escape$1(o){var i={"=":"=0",":":"=2"};return"$"+o.replace(/[=:]/g,function(s){return i[s]})}var P$1=/\/+/g;function Q$3(o,i){return typeof o=="object"&&o!==null&&o.key!=null?escape$1(""+o.key):i.toString(36)}function R$1(o,i,s,_,_e){var ct=typeof o;(ct==="undefined"||ct==="boolean")&&(o=null);var Mt=!1;if(o===null)Mt=!0;else switch(ct){case"string":case"number":Mt=!0;break;case"object":switch(o.$$typeof){case l$2:case n$2:Mt=!0}}if(Mt)return Mt=o,_e=_e(Mt),o=_===""?"."+Q$3(Mt,0):_,I$2(_e)?(s="",o!=null&&(s=o.replace(P$1,"$&/")+"/"),R$1(_e,i,s,"",function(Xt){return Xt})):_e!=null&&(O$1(_e)&&(_e=N$3(_e,s+(!_e.key||Mt&&Mt.key===_e.key?"":(""+_e.key).replace(P$1,"$&/")+"/")+o)),i.push(_e)),1;if(Mt=0,_=_===""?".":_+":",I$2(o))for(var Ft=0;Ft<o.length;Ft++){ct=o[Ft];var Ut=_+Q$3(ct,Ft);Mt+=R$1(ct,i,s,Ut,_e)}else if(Ut=A$3(o),typeof Ut=="function")for(o=Ut.call(o),Ft=0;!(ct=o.next()).done;)ct=ct.value,Ut=_+Q$3(ct,Ft++),Mt+=R$1(ct,i,s,Ut,_e);else if(ct==="object")throw i=String(o),Error("Objects are not valid as a React child (found: "+(i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i)+"). If you meant to render a collection of children, use an array instead.");return Mt}function S$1(o,i,s){if(o==null)return o;var _=[],_e=0;return R$1(o,_,"","",function(ct){return i.call(s,ct,_e++)}),_}function T$3(o){if(o._status===-1){var i=o._result;i=i(),i.then(function(s){(o._status===0||o._status===-1)&&(o._status=1,o._result=s)},function(s){(o._status===0||o._status===-1)&&(o._status=2,o._result=s)}),o._status===-1&&(o._status=0,o._result=i)}if(o._status===1)return o._result.default;throw o._result}var U$3={current:null},V$2={transition:null},W$3={ReactCurrentDispatcher:U$3,ReactCurrentBatchConfig:V$2,ReactCurrentOwner:K$2};function X$5(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$1,forEach:function(o,i,s){S$1(o,function(){i.apply(this,arguments)},s)},count:function(o){var i=0;return S$1(o,function(){i++}),i},toArray:function(o){return S$1(o,function(i){return i})||[]},only:function(o){if(!O$1(o))throw Error("React.Children.only expected to receive a single React element child.");return o}};react_production_min.Component=E$2;react_production_min.Fragment=p$4;react_production_min.Profiler=r$3;react_production_min.PureComponent=G$5;react_production_min.StrictMode=q$3;react_production_min.Suspense=w$2;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$3;react_production_min.act=X$5;react_production_min.cloneElement=function(o,i,s){if(o==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+o+".");var _=C$1({},o.props),_e=o.key,ct=o.ref,Mt=o._owner;if(i!=null){if(i.ref!==void 0&&(ct=i.ref,Mt=K$2.current),i.key!==void 0&&(_e=""+i.key),o.type&&o.type.defaultProps)var Ft=o.type.defaultProps;for(Ut in i)J$2.call(i,Ut)&&!L$1.hasOwnProperty(Ut)&&(_[Ut]=i[Ut]===void 0&&Ft!==void 0?Ft[Ut]:i[Ut])}var Ut=arguments.length-2;if(Ut===1)_.children=s;else if(1<Ut){Ft=Array(Ut);for(var Xt=0;Xt<Ut;Xt++)Ft[Xt]=arguments[Xt+2];_.children=Ft}return{$$typeof:l$2,type:o.type,key:_e,ref:ct,props:_,_owner:Mt}};react_production_min.createContext=function(o){return o={$$typeof:u$1,_currentValue:o,_currentValue2:o,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},o.Provider={$$typeof:t$2,_context:o},o.Consumer=o};react_production_min.createElement=M$2;react_production_min.createFactory=function(o){var i=M$2.bind(null,o);return i.type=o,i};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(o){return{$$typeof:v$3,render:o}};react_production_min.isValidElement=O$1;react_production_min.lazy=function(o){return{$$typeof:y$2,_payload:{_status:-1,_result:o},_init:T$3}};react_production_min.memo=function(o,i){return{$$typeof:x$1,type:o,compare:i===void 0?null:i}};react_production_min.startTransition=function(o){var i=V$2.transition;V$2.transition={};try{o()}finally{V$2.transition=i}};react_production_min.unstable_act=X$5;react_production_min.useCallback=function(o,i){return U$3.current.useCallback(o,i)};react_production_min.useContext=function(o){return U$3.current.useContext(o)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(o){return U$3.current.useDeferredValue(o)};react_production_min.useEffect=function(o,i){return U$3.current.useEffect(o,i)};react_production_min.useId=function(){return U$3.current.useId()};react_production_min.useImperativeHandle=function(o,i,s){return U$3.current.useImperativeHandle(o,i,s)};react_production_min.useInsertionEffect=function(o,i){return U$3.current.useInsertionEffect(o,i)};react_production_min.useLayoutEffect=function(o,i){return U$3.current.useLayoutEffect(o,i)};react_production_min.useMemo=function(o,i){return U$3.current.useMemo(o,i)};react_production_min.useReducer=function(o,i,s){return U$3.current.useReducer(o,i,s)};react_production_min.useRef=function(o){return U$3.current.useRef(o)};react_production_min.useState=function(o){return U$3.current.useState(o)};react_production_min.useSyncExternalStore=function(o,i,s){return U$3.current.useSyncExternalStore(o,i,s)};react_production_min.useTransition=function(){return U$3.current.useTransition()};react_production_min.version="18.3.1";react.exports=react_production_min;var reactExports=react.exports;const React__default=getDefaultExportFromCjs$1(reactExports),React=_mergeNamespaces({__proto__:null,default:React__default},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$1=reactExports,k$3=Symbol.for("react.element"),l$1=Symbol.for("react.fragment"),m$3=Object.prototype.hasOwnProperty,n$1=f$1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$3={key:!0,ref:!0,__self:!0,__source:!0};function q$2(o,i,s){var _,_e={},ct=null,Mt=null;s!==void 0&&(ct=""+s),i.key!==void 0&&(ct=""+i.key),i.ref!==void 0&&(Mt=i.ref);for(_ in i)m$3.call(i,_)&&!p$3.hasOwnProperty(_)&&(_e[_]=i[_]);if(o&&o.defaultProps)for(_ in i=o.defaultProps,i)_e[_]===void 0&&(_e[_]=i[_]);return{$$typeof:k$3,type:o,key:ct,ref:Mt,props:_e,_owner:n$1.current}}reactJsxRuntime_production_min.Fragment=l$1;reactJsxRuntime_production_min.jsx=q$2;reactJsxRuntime_production_min.jsxs=q$2;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(o){function i(Lo,Au){var Mp=Lo.length;Lo.push(Au);e:for(;0<Mp;){var Lp=Mp-1>>>1,Op=Lo[Lp];if(0<_e(Op,Au))Lo[Lp]=Au,Lo[Mp]=Op,Mp=Lp;else break e}}function s(Lo){return Lo.length===0?null:Lo[0]}function _(Lo){if(Lo.length===0)return null;var Au=Lo[0],Mp=Lo.pop();if(Mp!==Au){Lo[0]=Mp;e:for(var Lp=0,Op=Lo.length,Fp=Op>>>1;Lp<Fp;){var wm=2*(Lp+1)-1,Bp=Lo[wm],Em=wm+1,Yp=Lo[Em];if(0>_e(Bp,Mp))Em<Op&&0>_e(Yp,Bp)?(Lo[Lp]=Yp,Lo[Em]=Mp,Lp=Em):(Lo[Lp]=Bp,Lo[wm]=Mp,Lp=wm);else if(Em<Op&&0>_e(Yp,Mp))Lo[Lp]=Yp,Lo[Em]=Mp,Lp=Em;else break e}}return Au}function _e(Lo,Au){var Mp=Lo.sortIndex-Au.sortIndex;return Mp!==0?Mp:Lo.id-Au.id}if(typeof performance=="object"&&typeof performance.now=="function"){var ct=performance;o.unstable_now=function(){return ct.now()}}else{var Mt=Date,Ft=Mt.now();o.unstable_now=function(){return Mt.now()-Ft}}var Ut=[],Xt=[],Kt=1,nr=null,rr=3,or=!1,hr=!1,fr=!1,yr=typeof setTimeout=="function"?setTimeout:null,Lr=typeof clearTimeout=="function"?clearTimeout:null,Br=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Vr(Lo){for(var Au=s(Xt);Au!==null;){if(Au.callback===null)_(Xt);else if(Au.startTime<=Lo)_(Xt),Au.sortIndex=Au.expirationTime,i(Ut,Au);else break;Au=s(Xt)}}function Wr(Lo){if(fr=!1,Vr(Lo),!hr)if(s(Ut)!==null)hr=!0,Ap(ro);else{var Au=s(Xt);Au!==null&&Pp(Wr,Au.startTime-Lo)}}function ro(Lo,Au){hr=!1,fr&&(fr=!1,Lr(ko),ko=-1),or=!0;var Mp=rr;try{for(Vr(Au),nr=s(Ut);nr!==null&&(!(nr.expirationTime>Au)||Lo&&!No());){var Lp=nr.callback;if(typeof Lp=="function"){nr.callback=null,rr=nr.priorityLevel;var Op=Lp(nr.expirationTime<=Au);Au=o.unstable_now(),typeof Op=="function"?nr.callback=Op:nr===s(Ut)&&_(Ut),Vr(Au)}else _(Ut);nr=s(Ut)}if(nr!==null)var Fp=!0;else{var wm=s(Xt);wm!==null&&Pp(Wr,wm.startTime-Au),Fp=!1}return Fp}finally{nr=null,rr=Mp,or=!1}}var no=!1,so=null,ko=-1,To=5,oo=-1;function No(){return!(o.unstable_now()-oo<To)}function As(){if(so!==null){var Lo=o.unstable_now();oo=Lo;var Au=!0;try{Au=so(!0,Lo)}finally{Au?Ks():(no=!1,so=null)}}else no=!1}var Ks;if(typeof Br=="function")Ks=function(){Br(As)};else if(typeof MessageChannel<"u"){var vu=new MessageChannel,Fu=vu.port2;vu.port1.onmessage=As,Ks=function(){Fu.postMessage(null)}}else Ks=function(){yr(As,0)};function Ap(Lo){so=Lo,no||(no=!0,Ks())}function Pp(Lo,Au){ko=yr(function(){Lo(o.unstable_now())},Au)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(Lo){Lo.callback=null},o.unstable_continueExecution=function(){hr||or||(hr=!0,Ap(ro))},o.unstable_forceFrameRate=function(Lo){0>Lo||125<Lo?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):To=0<Lo?Math.floor(1e3/Lo):5},o.unstable_getCurrentPriorityLevel=function(){return rr},o.unstable_getFirstCallbackNode=function(){return s(Ut)},o.unstable_next=function(Lo){switch(rr){case 1:case 2:case 3:var Au=3;break;default:Au=rr}var Mp=rr;rr=Au;try{return Lo()}finally{rr=Mp}},o.unstable_pauseExecution=function(){},o.unstable_requestPaint=function(){},o.unstable_runWithPriority=function(Lo,Au){switch(Lo){case 1:case 2:case 3:case 4:case 5:break;default:Lo=3}var Mp=rr;rr=Lo;try{return Au()}finally{rr=Mp}},o.unstable_scheduleCallback=function(Lo,Au,Mp){var Lp=o.unstable_now();switch(typeof Mp=="object"&&Mp!==null?(Mp=Mp.delay,Mp=typeof Mp=="number"&&0<Mp?Lp+Mp:Lp):Mp=Lp,Lo){case 1:var Op=-1;break;case 2:Op=250;break;case 5:Op=1073741823;break;case 4:Op=1e4;break;default:Op=5e3}return Op=Mp+Op,Lo={id:Kt++,callback:Au,priorityLevel:Lo,startTime:Mp,expirationTime:Op,sortIndex:-1},Mp>Lp?(Lo.sortIndex=Mp,i(Xt,Lo),s(Ut)===null&&Lo===s(Xt)&&(fr?(Lr(ko),ko=-1):fr=!0,Pp(Wr,Mp-Lp))):(Lo.sortIndex=Op,i(Ut,Lo),hr||or||(hr=!0,Ap(ro))),Lo},o.unstable_shouldYield=No,o.unstable_wrapCallback=function(Lo){var Au=rr;return function(){var Mp=rr;rr=Au;try{return Lo.apply(this,arguments)}finally{rr=Mp}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa$1=reactExports,ca$1=schedulerExports;function p$2(o){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+o,s=1;s<arguments.length;s++)i+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+o+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da$1=new Set,ea$1={};function fa$1(o,i){ha$1(o,i),ha$1(o+"Capture",i)}function ha$1(o,i){for(ea$1[o]=i,o=0;o<i.length;o++)da$1.add(i[o])}var ia$1=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja$1=Object.prototype.hasOwnProperty,ka$1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la$1={},ma$1={};function oa$1(o){return ja$1.call(ma$1,o)?!0:ja$1.call(la$1,o)?!1:ka$1.test(o)?ma$1[o]=!0:(la$1[o]=!0,!1)}function pa$1(o,i,s,_){if(s!==null&&s.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return _?!1:s!==null?!s.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function qa$1(o,i,s,_){if(i===null||typeof i>"u"||pa$1(o,i,s,_))return!0;if(_)return!1;if(s!==null)switch(s.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function v$2(o,i,s,_,_e,ct,Mt){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=_,this.attributeNamespace=_e,this.mustUseProperty=s,this.propertyName=o,this.type=i,this.sanitizeURL=ct,this.removeEmptyString=Mt}var z$1={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){z$1[o]=new v$2(o,0,!1,o,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var i=o[0];z$1[i]=new v$2(i,1,!1,o[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(o){z$1[o]=new v$2(o,2,!1,o.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){z$1[o]=new v$2(o,2,!1,o,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){z$1[o]=new v$2(o,3,!1,o.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(o){z$1[o]=new v$2(o,3,!0,o,null,!1,!1)});["capture","download"].forEach(function(o){z$1[o]=new v$2(o,4,!1,o,null,!1,!1)});["cols","rows","size","span"].forEach(function(o){z$1[o]=new v$2(o,6,!1,o,null,!1,!1)});["rowSpan","start"].forEach(function(o){z$1[o]=new v$2(o,5,!1,o.toLowerCase(),null,!1,!1)});var ra$1=/[\-:]([a-z])/g;function sa$1(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var i=o.replace(ra$1,sa$1);z$1[i]=new v$2(i,1,!1,o,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var i=o.replace(ra$1,sa$1);z$1[i]=new v$2(i,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(o){var i=o.replace(ra$1,sa$1);z$1[i]=new v$2(i,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(o){z$1[o]=new v$2(o,1,!1,o.toLowerCase(),null,!1,!1)});z$1.xlinkHref=new v$2("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(o){z$1[o]=new v$2(o,1,!1,o.toLowerCase(),null,!0,!0)});function ta$1(o,i,s,_){var _e=z$1.hasOwnProperty(i)?z$1[i]:null;(_e!==null?_e.type!==0:_||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(qa$1(i,s,_e,_)&&(s=null),_||_e===null?oa$1(i)&&(s===null?o.removeAttribute(i):o.setAttribute(i,""+s)):_e.mustUseProperty?o[_e.propertyName]=s===null?_e.type===3?!1:"":s:(i=_e.attributeName,_=_e.attributeNamespace,s===null?o.removeAttribute(i):(_e=_e.type,s=_e===3||_e===4&&s===!0?"":""+s,_?o.setAttributeNS(_,i,s):o.setAttribute(i,s))))}var ua$1=aa$1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va$1=Symbol.for("react.element"),wa$1=Symbol.for("react.portal"),ya$1=Symbol.for("react.fragment"),za$1=Symbol.for("react.strict_mode"),Aa$1=Symbol.for("react.profiler"),Ba$1=Symbol.for("react.provider"),Ca$1=Symbol.for("react.context"),Da$1=Symbol.for("react.forward_ref"),Ea$1=Symbol.for("react.suspense"),Fa$1=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia$1=Symbol.for("react.offscreen"),Ja$1=Symbol.iterator;function Ka$1(o){return o===null||typeof o!="object"?null:(o=Ja$1&&o[Ja$1]||o["@@iterator"],typeof o=="function"?o:null)}var A$2=Object.assign,La$1;function Ma$1(o){if(La$1===void 0)try{throw Error()}catch(s){var i=s.stack.trim().match(/\n( *(at )?)/);La$1=i&&i[1]||""}return`
`+La$1+o}var Na$1=!1;function Oa$1(o,i){if(!o||Na$1)return"";Na$1=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(Xt){var _=Xt}Reflect.construct(o,[],i)}else{try{i.call()}catch(Xt){_=Xt}o.call(i.prototype)}else{try{throw Error()}catch(Xt){_=Xt}o()}}catch(Xt){if(Xt&&_&&typeof Xt.stack=="string"){for(var _e=Xt.stack.split(`
`),ct=_.stack.split(`
`),Mt=_e.length-1,Ft=ct.length-1;1<=Mt&&0<=Ft&&_e[Mt]!==ct[Ft];)Ft--;for(;1<=Mt&&0<=Ft;Mt--,Ft--)if(_e[Mt]!==ct[Ft]){if(Mt!==1||Ft!==1)do if(Mt--,Ft--,0>Ft||_e[Mt]!==ct[Ft]){var Ut=`
`+_e[Mt].replace(" at new "," at ");return o.displayName&&Ut.includes("<anonymous>")&&(Ut=Ut.replace("<anonymous>",o.displayName)),Ut}while(1<=Mt&&0<=Ft);break}}}finally{Na$1=!1,Error.prepareStackTrace=s}return(o=o?o.displayName||o.name:"")?Ma$1(o):""}function Pa$1(o){switch(o.tag){case 5:return Ma$1(o.type);case 16:return Ma$1("Lazy");case 13:return Ma$1("Suspense");case 19:return Ma$1("SuspenseList");case 0:case 2:case 15:return o=Oa$1(o.type,!1),o;case 11:return o=Oa$1(o.type.render,!1),o;case 1:return o=Oa$1(o.type,!0),o;default:return""}}function Qa$1(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case ya$1:return"Fragment";case wa$1:return"Portal";case Aa$1:return"Profiler";case za$1:return"StrictMode";case Ea$1:return"Suspense";case Fa$1:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case Ca$1:return(o.displayName||"Context")+".Consumer";case Ba$1:return(o._context.displayName||"Context")+".Provider";case Da$1:var i=o.render;return o=o.displayName,o||(o=i.displayName||i.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case Ga:return i=o.displayName||null,i!==null?i:Qa$1(o.type)||"Memo";case Ha:i=o._payload,o=o._init;try{return Qa$1(o(i))}catch{}}return null}function Ra$1(o){var i=o.type;switch(o.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=i.render,o=o.displayName||o.name||"",i.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa$1(i);case 8:return i===za$1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Sa$1(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Ta$1(o){var i=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Ua(o){var i=Ta$1(o)?"checked":"value",s=Object.getOwnPropertyDescriptor(o.constructor.prototype,i),_=""+o[i];if(!o.hasOwnProperty(i)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var _e=s.get,ct=s.set;return Object.defineProperty(o,i,{configurable:!0,get:function(){return _e.call(this)},set:function(Mt){_=""+Mt,ct.call(this,Mt)}}),Object.defineProperty(o,i,{enumerable:s.enumerable}),{getValue:function(){return _},setValue:function(Mt){_=""+Mt},stopTracking:function(){o._valueTracker=null,delete o[i]}}}}function Va(o){o._valueTracker||(o._valueTracker=Ua(o))}function Wa(o){if(!o)return!1;var i=o._valueTracker;if(!i)return!0;var s=i.getValue(),_="";return o&&(_=Ta$1(o)?o.checked?"true":"false":o.value),o=_,o!==s?(i.setValue(o),!0):!1}function Xa$1(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function Ya$1(o,i){var s=i.checked;return A$2({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??o._wrapperState.initialChecked})}function Za$1(o,i){var s=i.defaultValue==null?"":i.defaultValue,_=i.checked!=null?i.checked:i.defaultChecked;s=Sa$1(i.value!=null?i.value:s),o._wrapperState={initialChecked:_,initialValue:s,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function ab(o,i){i=i.checked,i!=null&&ta$1(o,"checked",i,!1)}function bb(o,i){ab(o,i);var s=Sa$1(i.value),_=i.type;if(s!=null)_==="number"?(s===0&&o.value===""||o.value!=s)&&(o.value=""+s):o.value!==""+s&&(o.value=""+s);else if(_==="submit"||_==="reset"){o.removeAttribute("value");return}i.hasOwnProperty("value")?cb(o,i.type,s):i.hasOwnProperty("defaultValue")&&cb(o,i.type,Sa$1(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(o.defaultChecked=!!i.defaultChecked)}function db(o,i,s){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var _=i.type;if(!(_!=="submit"&&_!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+o._wrapperState.initialValue,s||i===o.value||(o.value=i),o.defaultValue=i}s=o.name,s!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,s!==""&&(o.name=s)}function cb(o,i,s){(i!=="number"||Xa$1(o.ownerDocument)!==o)&&(s==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+s&&(o.defaultValue=""+s))}var eb=Array.isArray;function fb(o,i,s,_){if(o=o.options,i){i={};for(var _e=0;_e<s.length;_e++)i["$"+s[_e]]=!0;for(s=0;s<o.length;s++)_e=i.hasOwnProperty("$"+o[s].value),o[s].selected!==_e&&(o[s].selected=_e),_e&&_&&(o[s].defaultSelected=!0)}else{for(s=""+Sa$1(s),i=null,_e=0;_e<o.length;_e++){if(o[_e].value===s){o[_e].selected=!0,_&&(o[_e].defaultSelected=!0);return}i!==null||o[_e].disabled||(i=o[_e])}i!==null&&(i.selected=!0)}}function gb(o,i){if(i.dangerouslySetInnerHTML!=null)throw Error(p$2(91));return A$2({},i,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function hb(o,i){var s=i.value;if(s==null){if(s=i.children,i=i.defaultValue,s!=null){if(i!=null)throw Error(p$2(92));if(eb(s)){if(1<s.length)throw Error(p$2(93));s=s[0]}i=s}i==null&&(i=""),s=i}o._wrapperState={initialValue:Sa$1(s)}}function ib(o,i){var s=Sa$1(i.value),_=Sa$1(i.defaultValue);s!=null&&(s=""+s,s!==o.value&&(o.value=s),i.defaultValue==null&&o.defaultValue!==s&&(o.defaultValue=s)),_!=null&&(o.defaultValue=""+_)}function jb(o){var i=o.textContent;i===o._wrapperState.initialValue&&i!==""&&i!==null&&(o.value=i)}function kb(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(o,i){return o==null||o==="http://www.w3.org/1999/xhtml"?kb(i):o==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var mb,nb=function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,s,_,_e){MSApp.execUnsafeLocalFunction(function(){return o(i,s,_,_e)})}:o}(function(o,i){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=i;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=mb.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;i.firstChild;)o.appendChild(i.firstChild)}});function ob(o,i){if(i){var s=o.firstChild;if(s&&s===o.lastChild&&s.nodeType===3){s.nodeValue=i;return}}o.textContent=i}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(o){qb.forEach(function(i){i=i+o.charAt(0).toUpperCase()+o.substring(1),pb[i]=pb[o]})});function rb(o,i,s){return i==null||typeof i=="boolean"||i===""?"":s||typeof i!="number"||i===0||pb.hasOwnProperty(o)&&pb[o]?(""+i).trim():i+"px"}function sb(o,i){o=o.style;for(var s in i)if(i.hasOwnProperty(s)){var _=s.indexOf("--")===0,_e=rb(s,i[s],_);s==="float"&&(s="cssFloat"),_?o.setProperty(s,_e):o[s]=_e}}var tb=A$2({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(o,i){if(i){if(tb[o]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(p$2(137,o));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(p$2(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(p$2(61))}if(i.style!=null&&typeof i.style!="object")throw Error(p$2(62))}}function vb(o,i){if(o.indexOf("-")===-1)return typeof i.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var yb=null,zb=null,Ab=null;function Bb(o){if(o=Cb(o)){if(typeof yb!="function")throw Error(p$2(280));var i=o.stateNode;i&&(i=Db(i),yb(o.stateNode,o.type,i))}}function Eb(o){zb?Ab?Ab.push(o):Ab=[o]:zb=o}function Fb(){if(zb){var o=zb,i=Ab;if(Ab=zb=null,Bb(o),i)for(o=0;o<i.length;o++)Bb(i[o])}}function Gb(o,i){return o(i)}function Hb(){}var Ib=!1;function Jb(o,i,s){if(Ib)return o(i,s);Ib=!0;try{return Gb(o,i,s)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(o,i){var s=o.stateNode;if(s===null)return null;var _=Db(s);if(_===null)return null;s=_[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(_=!_.disabled)||(o=o.type,_=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!_;break e;default:o=!1}if(o)return null;if(s&&typeof s!="function")throw Error(p$2(231,i,typeof s));return s}var Lb=!1;if(ia$1)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(o,i,s,_,_e,ct,Mt,Ft,Ut){var Xt=Array.prototype.slice.call(arguments,3);try{i.apply(s,Xt)}catch(Kt){this.onError(Kt)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(o){Ob=!0,Pb=o}};function Tb(o,i,s,_,_e,ct,Mt,Ft,Ut){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(o,i,s,_,_e,ct,Mt,Ft,Ut){if(Tb.apply(this,arguments),Ob){if(Ob){var Xt=Pb;Ob=!1,Pb=null}else throw Error(p$2(198));Qb||(Qb=!0,Rb=Xt)}}function Vb(o){var i=o,s=o;if(o.alternate)for(;i.return;)i=i.return;else{o=i;do i=o,i.flags&4098&&(s=i.return),o=i.return;while(o)}return i.tag===3?s:null}function Wb(o){if(o.tag===13){var i=o.memoizedState;if(i===null&&(o=o.alternate,o!==null&&(i=o.memoizedState)),i!==null)return i.dehydrated}return null}function Xb(o){if(Vb(o)!==o)throw Error(p$2(188))}function Yb(o){var i=o.alternate;if(!i){if(i=Vb(o),i===null)throw Error(p$2(188));return i!==o?null:o}for(var s=o,_=i;;){var _e=s.return;if(_e===null)break;var ct=_e.alternate;if(ct===null){if(_=_e.return,_!==null){s=_;continue}break}if(_e.child===ct.child){for(ct=_e.child;ct;){if(ct===s)return Xb(_e),o;if(ct===_)return Xb(_e),i;ct=ct.sibling}throw Error(p$2(188))}if(s.return!==_.return)s=_e,_=ct;else{for(var Mt=!1,Ft=_e.child;Ft;){if(Ft===s){Mt=!0,s=_e,_=ct;break}if(Ft===_){Mt=!0,_=_e,s=ct;break}Ft=Ft.sibling}if(!Mt){for(Ft=ct.child;Ft;){if(Ft===s){Mt=!0,s=ct,_=_e;break}if(Ft===_){Mt=!0,_=ct,s=_e;break}Ft=Ft.sibling}if(!Mt)throw Error(p$2(189))}}if(s.alternate!==_)throw Error(p$2(190))}if(s.tag!==3)throw Error(p$2(188));return s.stateNode.current===s?o:i}function Zb(o){return o=Yb(o),o!==null?$b(o):null}function $b(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var i=$b(o);if(i!==null)return i;o=o.sibling}return null}var ac$1=ca$1.unstable_scheduleCallback,bc$1=ca$1.unstable_cancelCallback,cc$1=ca$1.unstable_shouldYield,dc$1=ca$1.unstable_requestPaint,B$2=ca$1.unstable_now,ec$1=ca$1.unstable_getCurrentPriorityLevel,fc$1=ca$1.unstable_ImmediatePriority,gc$1=ca$1.unstable_UserBlockingPriority,hc$1=ca$1.unstable_NormalPriority,ic$1=ca$1.unstable_LowPriority,jc$1=ca$1.unstable_IdlePriority,kc$1=null,lc$1=null;function mc$1(o){if(lc$1&&typeof lc$1.onCommitFiberRoot=="function")try{lc$1.onCommitFiberRoot(kc$1,o,void 0,(o.current.flags&128)===128)}catch{}}var oc$1=Math.clz32?Math.clz32:nc$1,pc$1=Math.log,qc$1=Math.LN2;function nc$1(o){return o>>>=0,o===0?32:31-(pc$1(o)/qc$1|0)|0}var rc$1=64,sc$1=4194304;function tc$1(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function uc$1(o,i){var s=o.pendingLanes;if(s===0)return 0;var _=0,_e=o.suspendedLanes,ct=o.pingedLanes,Mt=s&268435455;if(Mt!==0){var Ft=Mt&~_e;Ft!==0?_=tc$1(Ft):(ct&=Mt,ct!==0&&(_=tc$1(ct)))}else Mt=s&~_e,Mt!==0?_=tc$1(Mt):ct!==0&&(_=tc$1(ct));if(_===0)return 0;if(i!==0&&i!==_&&!(i&_e)&&(_e=_&-_,ct=i&-i,_e>=ct||_e===16&&(ct&4194240)!==0))return i;if(_&4&&(_|=s&16),i=o.entangledLanes,i!==0)for(o=o.entanglements,i&=_;0<i;)s=31-oc$1(i),_e=1<<s,_|=o[s],i&=~_e;return _}function vc$1(o,i){switch(o){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc$1(o,i){for(var s=o.suspendedLanes,_=o.pingedLanes,_e=o.expirationTimes,ct=o.pendingLanes;0<ct;){var Mt=31-oc$1(ct),Ft=1<<Mt,Ut=_e[Mt];Ut===-1?(!(Ft&s)||Ft&_)&&(_e[Mt]=vc$1(Ft,i)):Ut<=i&&(o.expiredLanes|=Ft),ct&=~Ft}}function xc$1(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function yc$1(){var o=rc$1;return rc$1<<=1,!(rc$1&4194240)&&(rc$1=64),o}function zc$1(o){for(var i=[],s=0;31>s;s++)i.push(o);return i}function Ac$1(o,i,s){o.pendingLanes|=i,i!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,i=31-oc$1(i),o[i]=s}function Bc$1(o,i){var s=o.pendingLanes&~i;o.pendingLanes=i,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=i,o.mutableReadLanes&=i,o.entangledLanes&=i,i=o.entanglements;var _=o.eventTimes;for(o=o.expirationTimes;0<s;){var _e=31-oc$1(s),ct=1<<_e;i[_e]=0,_[_e]=-1,o[_e]=-1,s&=~ct}}function Cc$1(o,i){var s=o.entangledLanes|=i;for(o=o.entanglements;s;){var _=31-oc$1(s),_e=1<<_;_e&i|o[_]&i&&(o[_]|=i),s&=~_e}}var C=0;function Dc(o){return o&=-o,1<o?4<o?o&268435455?16:536870912:4:1}var Ec$1,Fc$1,Gc$1,Hc$1,Ic$1,Jc$1=!1,Kc$1=[],Lc$1=null,Mc$1=null,Nc$1=null,Oc$1=new Map,Pc$1=new Map,Qc$1=[],Rc$1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc$1(o,i){switch(o){case"focusin":case"focusout":Lc$1=null;break;case"dragenter":case"dragleave":Mc$1=null;break;case"mouseover":case"mouseout":Nc$1=null;break;case"pointerover":case"pointerout":Oc$1.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc$1.delete(i.pointerId)}}function Tc$1(o,i,s,_,_e,ct){return o===null||o.nativeEvent!==ct?(o={blockedOn:i,domEventName:s,eventSystemFlags:_,nativeEvent:ct,targetContainers:[_e]},i!==null&&(i=Cb(i),i!==null&&Fc$1(i)),o):(o.eventSystemFlags|=_,i=o.targetContainers,_e!==null&&i.indexOf(_e)===-1&&i.push(_e),o)}function Uc$1(o,i,s,_,_e){switch(i){case"focusin":return Lc$1=Tc$1(Lc$1,o,i,s,_,_e),!0;case"dragenter":return Mc$1=Tc$1(Mc$1,o,i,s,_,_e),!0;case"mouseover":return Nc$1=Tc$1(Nc$1,o,i,s,_,_e),!0;case"pointerover":var ct=_e.pointerId;return Oc$1.set(ct,Tc$1(Oc$1.get(ct)||null,o,i,s,_,_e)),!0;case"gotpointercapture":return ct=_e.pointerId,Pc$1.set(ct,Tc$1(Pc$1.get(ct)||null,o,i,s,_,_e)),!0}return!1}function Vc$1(o){var i=Wc$1(o.target);if(i!==null){var s=Vb(i);if(s!==null){if(i=s.tag,i===13){if(i=Wb(s),i!==null){o.blockedOn=i,Ic$1(o.priority,function(){Gc$1(s)});return}}else if(i===3&&s.stateNode.current.memoizedState.isDehydrated){o.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Xc$1(o){if(o.blockedOn!==null)return!1;for(var i=o.targetContainers;0<i.length;){var s=Yc$1(o.domEventName,o.eventSystemFlags,i[0],o.nativeEvent);if(s===null){s=o.nativeEvent;var _=new s.constructor(s.type,s);wb=_,s.target.dispatchEvent(_),wb=null}else return i=Cb(s),i!==null&&Fc$1(i),o.blockedOn=s,!1;i.shift()}return!0}function Zc$1(o,i,s){Xc$1(o)&&s.delete(i)}function $c$1(){Jc$1=!1,Lc$1!==null&&Xc$1(Lc$1)&&(Lc$1=null),Mc$1!==null&&Xc$1(Mc$1)&&(Mc$1=null),Nc$1!==null&&Xc$1(Nc$1)&&(Nc$1=null),Oc$1.forEach(Zc$1),Pc$1.forEach(Zc$1)}function ad$1(o,i){o.blockedOn===i&&(o.blockedOn=null,Jc$1||(Jc$1=!0,ca$1.unstable_scheduleCallback(ca$1.unstable_NormalPriority,$c$1)))}function bd$1(o){function i(_e){return ad$1(_e,o)}if(0<Kc$1.length){ad$1(Kc$1[0],o);for(var s=1;s<Kc$1.length;s++){var _=Kc$1[s];_.blockedOn===o&&(_.blockedOn=null)}}for(Lc$1!==null&&ad$1(Lc$1,o),Mc$1!==null&&ad$1(Mc$1,o),Nc$1!==null&&ad$1(Nc$1,o),Oc$1.forEach(i),Pc$1.forEach(i),s=0;s<Qc$1.length;s++)_=Qc$1[s],_.blockedOn===o&&(_.blockedOn=null);for(;0<Qc$1.length&&(s=Qc$1[0],s.blockedOn===null);)Vc$1(s),s.blockedOn===null&&Qc$1.shift()}var cd$1=ua$1.ReactCurrentBatchConfig,dd$1=!0;function ed$1(o,i,s,_){var _e=C,ct=cd$1.transition;cd$1.transition=null;try{C=1,fd$1(o,i,s,_)}finally{C=_e,cd$1.transition=ct}}function gd$1(o,i,s,_){var _e=C,ct=cd$1.transition;cd$1.transition=null;try{C=4,fd$1(o,i,s,_)}finally{C=_e,cd$1.transition=ct}}function fd$1(o,i,s,_){if(dd$1){var _e=Yc$1(o,i,s,_);if(_e===null)hd$1(o,i,_,id$1,s),Sc$1(o,_);else if(Uc$1(_e,o,i,s,_))_.stopPropagation();else if(Sc$1(o,_),i&4&&-1<Rc$1.indexOf(o)){for(;_e!==null;){var ct=Cb(_e);if(ct!==null&&Ec$1(ct),ct=Yc$1(o,i,s,_),ct===null&&hd$1(o,i,_,id$1,s),ct===_e)break;_e=ct}_e!==null&&_.stopPropagation()}else hd$1(o,i,_,null,s)}}var id$1=null;function Yc$1(o,i,s,_){if(id$1=null,o=xb(_),o=Wc$1(o),o!==null)if(i=Vb(o),i===null)o=null;else if(s=i.tag,s===13){if(o=Wb(i),o!==null)return o;o=null}else if(s===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;o=null}else i!==o&&(o=null);return id$1=o,null}function jd$1(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec$1()){case fc$1:return 1;case gc$1:return 4;case hc$1:case ic$1:return 16;case jc$1:return 536870912;default:return 16}default:return 16}}var kd$1=null,ld$1=null,md$1=null;function nd$1(){if(md$1)return md$1;var o,i=ld$1,s=i.length,_,_e="value"in kd$1?kd$1.value:kd$1.textContent,ct=_e.length;for(o=0;o<s&&i[o]===_e[o];o++);var Mt=s-o;for(_=1;_<=Mt&&i[s-_]===_e[ct-_];_++);return md$1=_e.slice(o,1<_?1-_:void 0)}function od$1(o){var i=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&i===13&&(o=13)):o=i,o===10&&(o=13),32<=o||o===13?o:0}function pd$1(){return!0}function qd$1(){return!1}function rd$1(o){function i(s,_,_e,ct,Mt){this._reactName=s,this._targetInst=_e,this.type=_,this.nativeEvent=ct,this.target=Mt,this.currentTarget=null;for(var Ft in o)o.hasOwnProperty(Ft)&&(s=o[Ft],this[Ft]=s?s(ct):ct[Ft]);return this.isDefaultPrevented=(ct.defaultPrevented!=null?ct.defaultPrevented:ct.returnValue===!1)?pd$1:qd$1,this.isPropagationStopped=qd$1,this}return A$2(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=pd$1)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=pd$1)},persist:function(){},isPersistent:pd$1}),i}var sd$1={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td$1=rd$1(sd$1),ud$1=A$2({},sd$1,{view:0,detail:0}),vd$1=rd$1(ud$1),wd$1,xd$1,yd$1,Ad$1=A$2({},ud$1,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd$1,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==yd$1&&(yd$1&&o.type==="mousemove"?(wd$1=o.screenX-yd$1.screenX,xd$1=o.screenY-yd$1.screenY):xd$1=wd$1=0,yd$1=o),wd$1)},movementY:function(o){return"movementY"in o?o.movementY:xd$1}}),Bd$1=rd$1(Ad$1),Cd$1=A$2({},Ad$1,{dataTransfer:0}),Dd$1=rd$1(Cd$1),Ed$1=A$2({},ud$1,{relatedTarget:0}),Fd$1=rd$1(Ed$1),Gd$1=A$2({},sd$1,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd$1=rd$1(Gd$1),Id$1=A$2({},sd$1,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Jd$1=rd$1(Id$1),Kd$1=A$2({},sd$1,{data:0}),Ld$1=rd$1(Kd$1),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd$1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od$1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd$1(o){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(o):(o=Od$1[o])?!!i[o]:!1}function zd$1(){return Pd$1}var Qd$1=A$2({},ud$1,{key:function(o){if(o.key){var i=Md[o.key]||o.key;if(i!=="Unidentified")return i}return o.type==="keypress"?(o=od$1(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Nd$1[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd$1,charCode:function(o){return o.type==="keypress"?od$1(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?od$1(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Rd$1=rd$1(Qd$1),Sd$1=A$2({},Ad$1,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td$1=rd$1(Sd$1),Ud$1=A$2({},ud$1,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd$1}),Vd$1=rd$1(Ud$1),Wd$1=A$2({},sd$1,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd$1=rd$1(Wd$1),Yd$1=A$2({},Ad$1,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd$1=rd$1(Yd$1),$d$1=[9,13,27,32],ae=ia$1&&"CompositionEvent"in window,be$1=null;ia$1&&"documentMode"in document&&(be$1=document.documentMode);var ce$1=ia$1&&"TextEvent"in window&&!be$1,de$1=ia$1&&(!ae||be$1&&8<be$1&&11>=be$1),ee=" ",fe$2=!1;function ge$1(o,i){switch(o){case"keyup":return $d$1.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he$2(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var ie=!1;function je$1(o,i){switch(o){case"compositionend":return he$2(i);case"keypress":return i.which!==32?null:(fe$2=!0,ee);case"textInput":return o=i.data,o===ee&&fe$2?null:o;default:return null}}function ke$1(o,i){if(ie)return o==="compositionend"||!ae&&ge$1(o,i)?(o=nd$1(),md$1=ld$1=kd$1=null,ie=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return de$1&&i.locale!=="ko"?null:i.data;default:return null}}var le$1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me$2(o){var i=o&&o.nodeName&&o.nodeName.toLowerCase();return i==="input"?!!le$1[o.type]:i==="textarea"}function ne(o,i,s,_){Eb(_),i=oe(i,"onChange"),0<i.length&&(s=new td$1("onChange","change",null,s,_),o.push({event:s,listeners:i}))}var pe$2=null,qe$1=null;function re(o){se$1(o,0)}function te$1(o){var i=ue$1(o);if(Wa(i))return o}function ve$1(o,i){if(o==="change")return i}var we$2=!1;if(ia$1){var xe$2;if(ia$1){var ye$2="oninput"in document;if(!ye$2){var ze$1=document.createElement("div");ze$1.setAttribute("oninput","return;"),ye$2=typeof ze$1.oninput=="function"}xe$2=ye$2}else xe$2=!1;we$2=xe$2&&(!document.documentMode||9<document.documentMode)}function Ae$1(){pe$2&&(pe$2.detachEvent("onpropertychange",Be),qe$1=pe$2=null)}function Be(o){if(o.propertyName==="value"&&te$1(qe$1)){var i=[];ne(i,qe$1,o,xb(o)),Jb(re,i)}}function Ce$2(o,i,s){o==="focusin"?(Ae$1(),pe$2=i,qe$1=s,pe$2.attachEvent("onpropertychange",Be)):o==="focusout"&&Ae$1()}function De$2(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return te$1(qe$1)}function Ee$1(o,i){if(o==="click")return te$1(i)}function Fe(o,i){if(o==="input"||o==="change")return te$1(i)}function Ge$1(o,i){return o===i&&(o!==0||1/o===1/i)||o!==o&&i!==i}var He$1=typeof Object.is=="function"?Object.is:Ge$1;function Ie$2(o,i){if(He$1(o,i))return!0;if(typeof o!="object"||o===null||typeof i!="object"||i===null)return!1;var s=Object.keys(o),_=Object.keys(i);if(s.length!==_.length)return!1;for(_=0;_<s.length;_++){var _e=s[_];if(!ja$1.call(i,_e)||!He$1(o[_e],i[_e]))return!1}return!0}function Je$1(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Ke(o,i){var s=Je$1(o);o=0;for(var _;s;){if(s.nodeType===3){if(_=o+s.textContent.length,o<=i&&_>=i)return{node:s,offset:i-o};o=_}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Je$1(s)}}function Le(o,i){return o&&i?o===i?!0:o&&o.nodeType===3?!1:i&&i.nodeType===3?Le(o,i.parentNode):"contains"in o?o.contains(i):o.compareDocumentPosition?!!(o.compareDocumentPosition(i)&16):!1:!1}function Me$1(){for(var o=window,i=Xa$1();i instanceof o.HTMLIFrameElement;){try{var s=typeof i.contentWindow.location.href=="string"}catch{s=!1}if(s)o=i.contentWindow;else break;i=Xa$1(o.document)}return i}function Ne(o){var i=o&&o.nodeName&&o.nodeName.toLowerCase();return i&&(i==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||i==="textarea"||o.contentEditable==="true")}function Oe$1(o){var i=Me$1(),s=o.focusedElem,_=o.selectionRange;if(i!==s&&s&&s.ownerDocument&&Le(s.ownerDocument.documentElement,s)){if(_!==null&&Ne(s)){if(i=_.start,o=_.end,o===void 0&&(o=i),"selectionStart"in s)s.selectionStart=i,s.selectionEnd=Math.min(o,s.value.length);else if(o=(i=s.ownerDocument||document)&&i.defaultView||window,o.getSelection){o=o.getSelection();var _e=s.textContent.length,ct=Math.min(_.start,_e);_=_.end===void 0?ct:Math.min(_.end,_e),!o.extend&&ct>_&&(_e=_,_=ct,ct=_e),_e=Ke(s,ct);var Mt=Ke(s,_);_e&&Mt&&(o.rangeCount!==1||o.anchorNode!==_e.node||o.anchorOffset!==_e.offset||o.focusNode!==Mt.node||o.focusOffset!==Mt.offset)&&(i=i.createRange(),i.setStart(_e.node,_e.offset),o.removeAllRanges(),ct>_?(o.addRange(i),o.extend(Mt.node,Mt.offset)):(i.setEnd(Mt.node,Mt.offset),o.addRange(i)))}}for(i=[],o=s;o=o.parentNode;)o.nodeType===1&&i.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<i.length;s++)o=i[s],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var Pe$1=ia$1&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re$2=null,Se$2=null,Te$2=!1;function Ue$1(o,i,s){var _=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Te$2||Qe==null||Qe!==Xa$1(_)||(_=Qe,"selectionStart"in _&&Ne(_)?_={start:_.selectionStart,end:_.selectionEnd}:(_=(_.ownerDocument&&_.ownerDocument.defaultView||window).getSelection(),_={anchorNode:_.anchorNode,anchorOffset:_.anchorOffset,focusNode:_.focusNode,focusOffset:_.focusOffset}),Se$2&&Ie$2(Se$2,_)||(Se$2=_,_=oe(Re$2,"onSelect"),0<_.length&&(i=new td$1("onSelect","select",null,i,s),o.push({event:i,listeners:_}),i.target=Qe)))}function Ve$1(o,i){var s={};return s[o.toLowerCase()]=i.toLowerCase(),s["Webkit"+o]="webkit"+i,s["Moz"+o]="moz"+i,s}var We$1={animationend:Ve$1("Animation","AnimationEnd"),animationiteration:Ve$1("Animation","AnimationIteration"),animationstart:Ve$1("Animation","AnimationStart"),transitionend:Ve$1("Transition","TransitionEnd")},Xe$1={},Ye$1={};ia$1&&(Ye$1=document.createElement("div").style,"AnimationEvent"in window||(delete We$1.animationend.animation,delete We$1.animationiteration.animation,delete We$1.animationstart.animation),"TransitionEvent"in window||delete We$1.transitionend.transition);function Ze$1(o){if(Xe$1[o])return Xe$1[o];if(!We$1[o])return o;var i=We$1[o],s;for(s in i)if(i.hasOwnProperty(s)&&s in Ye$1)return Xe$1[o]=i[s];return o}var $e=Ze$1("animationend"),af$1=Ze$1("animationiteration"),bf$1=Ze$1("animationstart"),cf$1=Ze$1("transitionend"),df$1=new Map,ef$1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff$1(o,i){df$1.set(o,i),fa$1(i,[o])}for(var gf$1=0;gf$1<ef$1.length;gf$1++){var hf$1=ef$1[gf$1],jf$1=hf$1.toLowerCase(),kf$1=hf$1[0].toUpperCase()+hf$1.slice(1);ff$1(jf$1,"on"+kf$1)}ff$1($e,"onAnimationEnd");ff$1(af$1,"onAnimationIteration");ff$1(bf$1,"onAnimationStart");ff$1("dblclick","onDoubleClick");ff$1("focusin","onFocus");ff$1("focusout","onBlur");ff$1(cf$1,"onTransitionEnd");ha$1("onMouseEnter",["mouseout","mouseover"]);ha$1("onMouseLeave",["mouseout","mouseover"]);ha$1("onPointerEnter",["pointerout","pointerover"]);ha$1("onPointerLeave",["pointerout","pointerover"]);fa$1("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa$1("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa$1("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa$1("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa$1("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa$1("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf$1="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf$1=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf$1));function nf$1(o,i,s){var _=o.type||"unknown-event";o.currentTarget=s,Ub(_,i,void 0,o),o.currentTarget=null}function se$1(o,i){i=(i&4)!==0;for(var s=0;s<o.length;s++){var _=o[s],_e=_.event;_=_.listeners;e:{var ct=void 0;if(i)for(var Mt=_.length-1;0<=Mt;Mt--){var Ft=_[Mt],Ut=Ft.instance,Xt=Ft.currentTarget;if(Ft=Ft.listener,Ut!==ct&&_e.isPropagationStopped())break e;nf$1(_e,Ft,Xt),ct=Ut}else for(Mt=0;Mt<_.length;Mt++){if(Ft=_[Mt],Ut=Ft.instance,Xt=Ft.currentTarget,Ft=Ft.listener,Ut!==ct&&_e.isPropagationStopped())break e;nf$1(_e,Ft,Xt),ct=Ut}}}if(Qb)throw o=Rb,Qb=!1,Rb=null,o}function D$3(o,i){var s=i[of$1];s===void 0&&(s=i[of$1]=new Set);var _=o+"__bubble";s.has(_)||(pf$1(i,o,2,!1),s.add(_))}function qf$1(o,i,s){var _=0;i&&(_|=4),pf$1(s,o,_,i)}var rf$1="_reactListening"+Math.random().toString(36).slice(2);function sf$1(o){if(!o[rf$1]){o[rf$1]=!0,da$1.forEach(function(s){s!=="selectionchange"&&(mf$1.has(s)||qf$1(s,!1,o),qf$1(s,!0,o))});var i=o.nodeType===9?o:o.ownerDocument;i===null||i[rf$1]||(i[rf$1]=!0,qf$1("selectionchange",!1,i))}}function pf$1(o,i,s,_){switch(jd$1(i)){case 1:var _e=ed$1;break;case 4:_e=gd$1;break;default:_e=fd$1}s=_e.bind(null,i,s,o),_e=void 0,!Lb||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(_e=!0),_?_e!==void 0?o.addEventListener(i,s,{capture:!0,passive:_e}):o.addEventListener(i,s,!0):_e!==void 0?o.addEventListener(i,s,{passive:_e}):o.addEventListener(i,s,!1)}function hd$1(o,i,s,_,_e){var ct=_;if(!(i&1)&&!(i&2)&&_!==null)e:for(;;){if(_===null)return;var Mt=_.tag;if(Mt===3||Mt===4){var Ft=_.stateNode.containerInfo;if(Ft===_e||Ft.nodeType===8&&Ft.parentNode===_e)break;if(Mt===4)for(Mt=_.return;Mt!==null;){var Ut=Mt.tag;if((Ut===3||Ut===4)&&(Ut=Mt.stateNode.containerInfo,Ut===_e||Ut.nodeType===8&&Ut.parentNode===_e))return;Mt=Mt.return}for(;Ft!==null;){if(Mt=Wc$1(Ft),Mt===null)return;if(Ut=Mt.tag,Ut===5||Ut===6){_=ct=Mt;continue e}Ft=Ft.parentNode}}_=_.return}Jb(function(){var Xt=ct,Kt=xb(s),nr=[];e:{var rr=df$1.get(o);if(rr!==void 0){var or=td$1,hr=o;switch(o){case"keypress":if(od$1(s)===0)break e;case"keydown":case"keyup":or=Rd$1;break;case"focusin":hr="focus",or=Fd$1;break;case"focusout":hr="blur",or=Fd$1;break;case"beforeblur":case"afterblur":or=Fd$1;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":or=Bd$1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":or=Dd$1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":or=Vd$1;break;case $e:case af$1:case bf$1:or=Hd$1;break;case cf$1:or=Xd$1;break;case"scroll":or=vd$1;break;case"wheel":or=Zd$1;break;case"copy":case"cut":case"paste":or=Jd$1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":or=Td$1}var fr=(i&4)!==0,yr=!fr&&o==="scroll",Lr=fr?rr!==null?rr+"Capture":null:rr;fr=[];for(var Br=Xt,Vr;Br!==null;){Vr=Br;var Wr=Vr.stateNode;if(Vr.tag===5&&Wr!==null&&(Vr=Wr,Lr!==null&&(Wr=Kb(Br,Lr),Wr!=null&&fr.push(tf$1(Br,Wr,Vr)))),yr)break;Br=Br.return}0<fr.length&&(rr=new or(rr,hr,null,s,Kt),nr.push({event:rr,listeners:fr}))}}if(!(i&7)){e:{if(rr=o==="mouseover"||o==="pointerover",or=o==="mouseout"||o==="pointerout",rr&&s!==wb&&(hr=s.relatedTarget||s.fromElement)&&(Wc$1(hr)||hr[uf$1]))break e;if((or||rr)&&(rr=Kt.window===Kt?Kt:(rr=Kt.ownerDocument)?rr.defaultView||rr.parentWindow:window,or?(hr=s.relatedTarget||s.toElement,or=Xt,hr=hr?Wc$1(hr):null,hr!==null&&(yr=Vb(hr),hr!==yr||hr.tag!==5&&hr.tag!==6)&&(hr=null)):(or=null,hr=Xt),or!==hr)){if(fr=Bd$1,Wr="onMouseLeave",Lr="onMouseEnter",Br="mouse",(o==="pointerout"||o==="pointerover")&&(fr=Td$1,Wr="onPointerLeave",Lr="onPointerEnter",Br="pointer"),yr=or==null?rr:ue$1(or),Vr=hr==null?rr:ue$1(hr),rr=new fr(Wr,Br+"leave",or,s,Kt),rr.target=yr,rr.relatedTarget=Vr,Wr=null,Wc$1(Kt)===Xt&&(fr=new fr(Lr,Br+"enter",hr,s,Kt),fr.target=Vr,fr.relatedTarget=yr,Wr=fr),yr=Wr,or&&hr)t:{for(fr=or,Lr=hr,Br=0,Vr=fr;Vr;Vr=vf$1(Vr))Br++;for(Vr=0,Wr=Lr;Wr;Wr=vf$1(Wr))Vr++;for(;0<Br-Vr;)fr=vf$1(fr),Br--;for(;0<Vr-Br;)Lr=vf$1(Lr),Vr--;for(;Br--;){if(fr===Lr||Lr!==null&&fr===Lr.alternate)break t;fr=vf$1(fr),Lr=vf$1(Lr)}fr=null}else fr=null;or!==null&&wf$1(nr,rr,or,fr,!1),hr!==null&&yr!==null&&wf$1(nr,yr,hr,fr,!0)}}e:{if(rr=Xt?ue$1(Xt):window,or=rr.nodeName&&rr.nodeName.toLowerCase(),or==="select"||or==="input"&&rr.type==="file")var ro=ve$1;else if(me$2(rr))if(we$2)ro=Fe;else{ro=De$2;var no=Ce$2}else(or=rr.nodeName)&&or.toLowerCase()==="input"&&(rr.type==="checkbox"||rr.type==="radio")&&(ro=Ee$1);if(ro&&(ro=ro(o,Xt))){ne(nr,ro,s,Kt);break e}no&&no(o,rr,Xt),o==="focusout"&&(no=rr._wrapperState)&&no.controlled&&rr.type==="number"&&cb(rr,"number",rr.value)}switch(no=Xt?ue$1(Xt):window,o){case"focusin":(me$2(no)||no.contentEditable==="true")&&(Qe=no,Re$2=Xt,Se$2=null);break;case"focusout":Se$2=Re$2=Qe=null;break;case"mousedown":Te$2=!0;break;case"contextmenu":case"mouseup":case"dragend":Te$2=!1,Ue$1(nr,s,Kt);break;case"selectionchange":if(Pe$1)break;case"keydown":case"keyup":Ue$1(nr,s,Kt)}var so;if(ae)e:{switch(o){case"compositionstart":var ko="onCompositionStart";break e;case"compositionend":ko="onCompositionEnd";break e;case"compositionupdate":ko="onCompositionUpdate";break e}ko=void 0}else ie?ge$1(o,s)&&(ko="onCompositionEnd"):o==="keydown"&&s.keyCode===229&&(ko="onCompositionStart");ko&&(de$1&&s.locale!=="ko"&&(ie||ko!=="onCompositionStart"?ko==="onCompositionEnd"&&ie&&(so=nd$1()):(kd$1=Kt,ld$1="value"in kd$1?kd$1.value:kd$1.textContent,ie=!0)),no=oe(Xt,ko),0<no.length&&(ko=new Ld$1(ko,o,null,s,Kt),nr.push({event:ko,listeners:no}),so?ko.data=so:(so=he$2(s),so!==null&&(ko.data=so)))),(so=ce$1?je$1(o,s):ke$1(o,s))&&(Xt=oe(Xt,"onBeforeInput"),0<Xt.length&&(Kt=new Ld$1("onBeforeInput","beforeinput",null,s,Kt),nr.push({event:Kt,listeners:Xt}),Kt.data=so))}se$1(nr,i)})}function tf$1(o,i,s){return{instance:o,listener:i,currentTarget:s}}function oe(o,i){for(var s=i+"Capture",_=[];o!==null;){var _e=o,ct=_e.stateNode;_e.tag===5&&ct!==null&&(_e=ct,ct=Kb(o,s),ct!=null&&_.unshift(tf$1(o,ct,_e)),ct=Kb(o,i),ct!=null&&_.push(tf$1(o,ct,_e))),o=o.return}return _}function vf$1(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function wf$1(o,i,s,_,_e){for(var ct=i._reactName,Mt=[];s!==null&&s!==_;){var Ft=s,Ut=Ft.alternate,Xt=Ft.stateNode;if(Ut!==null&&Ut===_)break;Ft.tag===5&&Xt!==null&&(Ft=Xt,_e?(Ut=Kb(s,ct),Ut!=null&&Mt.unshift(tf$1(s,Ut,Ft))):_e||(Ut=Kb(s,ct),Ut!=null&&Mt.push(tf$1(s,Ut,Ft)))),s=s.return}Mt.length!==0&&o.push({event:i,listeners:Mt})}var xf$1=/\r\n?/g,yf$1=/\u0000|\uFFFD/g;function zf$1(o){return(typeof o=="string"?o:""+o).replace(xf$1,`
`).replace(yf$1,"")}function Af$1(o,i,s){if(i=zf$1(i),zf$1(o)!==i&&s)throw Error(p$2(425))}function Bf$1(){}var Cf$1=null,Df$1=null;function Ef$1(o,i){return o==="textarea"||o==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Ff$1=typeof setTimeout=="function"?setTimeout:void 0,Gf$1=typeof clearTimeout=="function"?clearTimeout:void 0,Hf$1=typeof Promise=="function"?Promise:void 0,Jf$1=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf$1<"u"?function(o){return Hf$1.resolve(null).then(o).catch(If$1)}:Ff$1;function If$1(o){setTimeout(function(){throw o})}function Kf$1(o,i){var s=i,_=0;do{var _e=s.nextSibling;if(o.removeChild(s),_e&&_e.nodeType===8)if(s=_e.data,s==="/$"){if(_===0){o.removeChild(_e),bd$1(i);return}_--}else s!=="$"&&s!=="$?"&&s!=="$!"||_++;s=_e}while(s);bd$1(i)}function Lf$1(o){for(;o!=null;o=o.nextSibling){var i=o.nodeType;if(i===1||i===3)break;if(i===8){if(i=o.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return o}function Mf$1(o){o=o.previousSibling;for(var i=0;o;){if(o.nodeType===8){var s=o.data;if(s==="$"||s==="$!"||s==="$?"){if(i===0)return o;i--}else s==="/$"&&i++}o=o.previousSibling}return null}var Nf$1=Math.random().toString(36).slice(2),Of$1="__reactFiber$"+Nf$1,Pf$1="__reactProps$"+Nf$1,uf$1="__reactContainer$"+Nf$1,of$1="__reactEvents$"+Nf$1,Qf$1="__reactListeners$"+Nf$1,Rf$1="__reactHandles$"+Nf$1;function Wc$1(o){var i=o[Of$1];if(i)return i;for(var s=o.parentNode;s;){if(i=s[uf$1]||s[Of$1]){if(s=i.alternate,i.child!==null||s!==null&&s.child!==null)for(o=Mf$1(o);o!==null;){if(s=o[Of$1])return s;o=Mf$1(o)}return i}o=s,s=o.parentNode}return null}function Cb(o){return o=o[Of$1]||o[uf$1],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function ue$1(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(p$2(33))}function Db(o){return o[Pf$1]||null}var Sf$1=[],Tf$1=-1;function Uf$1(o){return{current:o}}function E$1(o){0>Tf$1||(o.current=Sf$1[Tf$1],Sf$1[Tf$1]=null,Tf$1--)}function G$4(o,i){Tf$1++,Sf$1[Tf$1]=o.current,o.current=i}var Vf$1={},H$3=Uf$1(Vf$1),Wf$1=Uf$1(!1),Xf$1=Vf$1;function Yf$1(o,i){var s=o.type.contextTypes;if(!s)return Vf$1;var _=o.stateNode;if(_&&_.__reactInternalMemoizedUnmaskedChildContext===i)return _.__reactInternalMemoizedMaskedChildContext;var _e={},ct;for(ct in s)_e[ct]=i[ct];return _&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=i,o.__reactInternalMemoizedMaskedChildContext=_e),_e}function Zf$1(o){return o=o.childContextTypes,o!=null}function $f$1(){E$1(Wf$1),E$1(H$3)}function ag$1(o,i,s){if(H$3.current!==Vf$1)throw Error(p$2(168));G$4(H$3,i),G$4(Wf$1,s)}function bg$1(o,i,s){var _=o.stateNode;if(i=i.childContextTypes,typeof _.getChildContext!="function")return s;_=_.getChildContext();for(var _e in _)if(!(_e in i))throw Error(p$2(108,Ra$1(o)||"Unknown",_e));return A$2({},s,_)}function cg$1(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||Vf$1,Xf$1=H$3.current,G$4(H$3,o),G$4(Wf$1,Wf$1.current),!0}function dg$1(o,i,s){var _=o.stateNode;if(!_)throw Error(p$2(169));s?(o=bg$1(o,i,Xf$1),_.__reactInternalMemoizedMergedChildContext=o,E$1(Wf$1),E$1(H$3),G$4(H$3,o)):E$1(Wf$1),G$4(Wf$1,s)}var eg$1=null,fg$1=!1,gg$1=!1;function hg$1(o){eg$1===null?eg$1=[o]:eg$1.push(o)}function ig$1(o){fg$1=!0,hg$1(o)}function jg$1(){if(!gg$1&&eg$1!==null){gg$1=!0;var o=0,i=C;try{var s=eg$1;for(C=1;o<s.length;o++){var _=s[o];do _=_(!0);while(_!==null)}eg$1=null,fg$1=!1}catch(_e){throw eg$1!==null&&(eg$1=eg$1.slice(o+1)),ac$1(fc$1,jg$1),_e}finally{C=i,gg$1=!1}}return null}var kg$1=[],lg$1=0,mg$1=null,ng$1=0,og$1=[],pg$1=0,qg$1=null,rg$1=1,sg$1="";function tg$1(o,i){kg$1[lg$1++]=ng$1,kg$1[lg$1++]=mg$1,mg$1=o,ng$1=i}function ug$1(o,i,s){og$1[pg$1++]=rg$1,og$1[pg$1++]=sg$1,og$1[pg$1++]=qg$1,qg$1=o;var _=rg$1;o=sg$1;var _e=32-oc$1(_)-1;_&=~(1<<_e),s+=1;var ct=32-oc$1(i)+_e;if(30<ct){var Mt=_e-_e%5;ct=(_&(1<<Mt)-1).toString(32),_>>=Mt,_e-=Mt,rg$1=1<<32-oc$1(i)+_e|s<<_e|_,sg$1=ct+o}else rg$1=1<<ct|s<<_e|_,sg$1=o}function vg$1(o){o.return!==null&&(tg$1(o,1),ug$1(o,1,0))}function wg$1(o){for(;o===mg$1;)mg$1=kg$1[--lg$1],kg$1[lg$1]=null,ng$1=kg$1[--lg$1],kg$1[lg$1]=null;for(;o===qg$1;)qg$1=og$1[--pg$1],og$1[pg$1]=null,sg$1=og$1[--pg$1],og$1[pg$1]=null,rg$1=og$1[--pg$1],og$1[pg$1]=null}var xg$1=null,yg$1=null,I$1=!1,zg$1=null;function Ag$1(o,i){var s=Bg$1(5,null,null,0);s.elementType="DELETED",s.stateNode=i,s.return=o,i=o.deletions,i===null?(o.deletions=[s],o.flags|=16):i.push(s)}function Cg$1(o,i){switch(o.tag){case 5:var s=o.type;return i=i.nodeType!==1||s.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(o.stateNode=i,xg$1=o,yg$1=Lf$1(i.firstChild),!0):!1;case 6:return i=o.pendingProps===""||i.nodeType!==3?null:i,i!==null?(o.stateNode=i,xg$1=o,yg$1=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(s=qg$1!==null?{id:rg$1,overflow:sg$1}:null,o.memoizedState={dehydrated:i,treeContext:s,retryLane:1073741824},s=Bg$1(18,null,null,0),s.stateNode=i,s.return=o,o.child=s,xg$1=o,yg$1=null,!0):!1;default:return!1}}function Dg$1(o){return(o.mode&1)!==0&&(o.flags&128)===0}function Eg$1(o){if(I$1){var i=yg$1;if(i){var s=i;if(!Cg$1(o,i)){if(Dg$1(o))throw Error(p$2(418));i=Lf$1(s.nextSibling);var _=xg$1;i&&Cg$1(o,i)?Ag$1(_,s):(o.flags=o.flags&-4097|2,I$1=!1,xg$1=o)}}else{if(Dg$1(o))throw Error(p$2(418));o.flags=o.flags&-4097|2,I$1=!1,xg$1=o}}}function Fg$1(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;xg$1=o}function Gg$1(o){if(o!==xg$1)return!1;if(!I$1)return Fg$1(o),I$1=!0,!1;var i;if((i=o.tag!==3)&&!(i=o.tag!==5)&&(i=o.type,i=i!=="head"&&i!=="body"&&!Ef$1(o.type,o.memoizedProps)),i&&(i=yg$1)){if(Dg$1(o))throw Hg$1(),Error(p$2(418));for(;i;)Ag$1(o,i),i=Lf$1(i.nextSibling)}if(Fg$1(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(p$2(317));e:{for(o=o.nextSibling,i=0;o;){if(o.nodeType===8){var s=o.data;if(s==="/$"){if(i===0){yg$1=Lf$1(o.nextSibling);break e}i--}else s!=="$"&&s!=="$!"&&s!=="$?"||i++}o=o.nextSibling}yg$1=null}}else yg$1=xg$1?Lf$1(o.stateNode.nextSibling):null;return!0}function Hg$1(){for(var o=yg$1;o;)o=Lf$1(o.nextSibling)}function Ig$1(){yg$1=xg$1=null,I$1=!1}function Jg$1(o){zg$1===null?zg$1=[o]:zg$1.push(o)}var Kg$1=ua$1.ReactCurrentBatchConfig;function Lg$1(o,i,s){if(o=s.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(p$2(309));var _=s.stateNode}if(!_)throw Error(p$2(147,o));var _e=_,ct=""+o;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===ct?i.ref:(i=function(Mt){var Ft=_e.refs;Mt===null?delete Ft[ct]:Ft[ct]=Mt},i._stringRef=ct,i)}if(typeof o!="string")throw Error(p$2(284));if(!s._owner)throw Error(p$2(290,o))}return o}function Mg$1(o,i){throw o=Object.prototype.toString.call(i),Error(p$2(31,o==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":o))}function Ng$1(o){var i=o._init;return i(o._payload)}function Og$1(o){function i(Lr,Br){if(o){var Vr=Lr.deletions;Vr===null?(Lr.deletions=[Br],Lr.flags|=16):Vr.push(Br)}}function s(Lr,Br){if(!o)return null;for(;Br!==null;)i(Lr,Br),Br=Br.sibling;return null}function _(Lr,Br){for(Lr=new Map;Br!==null;)Br.key!==null?Lr.set(Br.key,Br):Lr.set(Br.index,Br),Br=Br.sibling;return Lr}function _e(Lr,Br){return Lr=Pg$1(Lr,Br),Lr.index=0,Lr.sibling=null,Lr}function ct(Lr,Br,Vr){return Lr.index=Vr,o?(Vr=Lr.alternate,Vr!==null?(Vr=Vr.index,Vr<Br?(Lr.flags|=2,Br):Vr):(Lr.flags|=2,Br)):(Lr.flags|=1048576,Br)}function Mt(Lr){return o&&Lr.alternate===null&&(Lr.flags|=2),Lr}function Ft(Lr,Br,Vr,Wr){return Br===null||Br.tag!==6?(Br=Qg$1(Vr,Lr.mode,Wr),Br.return=Lr,Br):(Br=_e(Br,Vr),Br.return=Lr,Br)}function Ut(Lr,Br,Vr,Wr){var ro=Vr.type;return ro===ya$1?Kt(Lr,Br,Vr.props.children,Wr,Vr.key):Br!==null&&(Br.elementType===ro||typeof ro=="object"&&ro!==null&&ro.$$typeof===Ha&&Ng$1(ro)===Br.type)?(Wr=_e(Br,Vr.props),Wr.ref=Lg$1(Lr,Br,Vr),Wr.return=Lr,Wr):(Wr=Rg$1(Vr.type,Vr.key,Vr.props,null,Lr.mode,Wr),Wr.ref=Lg$1(Lr,Br,Vr),Wr.return=Lr,Wr)}function Xt(Lr,Br,Vr,Wr){return Br===null||Br.tag!==4||Br.stateNode.containerInfo!==Vr.containerInfo||Br.stateNode.implementation!==Vr.implementation?(Br=Sg$1(Vr,Lr.mode,Wr),Br.return=Lr,Br):(Br=_e(Br,Vr.children||[]),Br.return=Lr,Br)}function Kt(Lr,Br,Vr,Wr,ro){return Br===null||Br.tag!==7?(Br=Tg$1(Vr,Lr.mode,Wr,ro),Br.return=Lr,Br):(Br=_e(Br,Vr),Br.return=Lr,Br)}function nr(Lr,Br,Vr){if(typeof Br=="string"&&Br!==""||typeof Br=="number")return Br=Qg$1(""+Br,Lr.mode,Vr),Br.return=Lr,Br;if(typeof Br=="object"&&Br!==null){switch(Br.$$typeof){case va$1:return Vr=Rg$1(Br.type,Br.key,Br.props,null,Lr.mode,Vr),Vr.ref=Lg$1(Lr,null,Br),Vr.return=Lr,Vr;case wa$1:return Br=Sg$1(Br,Lr.mode,Vr),Br.return=Lr,Br;case Ha:var Wr=Br._init;return nr(Lr,Wr(Br._payload),Vr)}if(eb(Br)||Ka$1(Br))return Br=Tg$1(Br,Lr.mode,Vr,null),Br.return=Lr,Br;Mg$1(Lr,Br)}return null}function rr(Lr,Br,Vr,Wr){var ro=Br!==null?Br.key:null;if(typeof Vr=="string"&&Vr!==""||typeof Vr=="number")return ro!==null?null:Ft(Lr,Br,""+Vr,Wr);if(typeof Vr=="object"&&Vr!==null){switch(Vr.$$typeof){case va$1:return Vr.key===ro?Ut(Lr,Br,Vr,Wr):null;case wa$1:return Vr.key===ro?Xt(Lr,Br,Vr,Wr):null;case Ha:return ro=Vr._init,rr(Lr,Br,ro(Vr._payload),Wr)}if(eb(Vr)||Ka$1(Vr))return ro!==null?null:Kt(Lr,Br,Vr,Wr,null);Mg$1(Lr,Vr)}return null}function or(Lr,Br,Vr,Wr,ro){if(typeof Wr=="string"&&Wr!==""||typeof Wr=="number")return Lr=Lr.get(Vr)||null,Ft(Br,Lr,""+Wr,ro);if(typeof Wr=="object"&&Wr!==null){switch(Wr.$$typeof){case va$1:return Lr=Lr.get(Wr.key===null?Vr:Wr.key)||null,Ut(Br,Lr,Wr,ro);case wa$1:return Lr=Lr.get(Wr.key===null?Vr:Wr.key)||null,Xt(Br,Lr,Wr,ro);case Ha:var no=Wr._init;return or(Lr,Br,Vr,no(Wr._payload),ro)}if(eb(Wr)||Ka$1(Wr))return Lr=Lr.get(Vr)||null,Kt(Br,Lr,Wr,ro,null);Mg$1(Br,Wr)}return null}function hr(Lr,Br,Vr,Wr){for(var ro=null,no=null,so=Br,ko=Br=0,To=null;so!==null&&ko<Vr.length;ko++){so.index>ko?(To=so,so=null):To=so.sibling;var oo=rr(Lr,so,Vr[ko],Wr);if(oo===null){so===null&&(so=To);break}o&&so&&oo.alternate===null&&i(Lr,so),Br=ct(oo,Br,ko),no===null?ro=oo:no.sibling=oo,no=oo,so=To}if(ko===Vr.length)return s(Lr,so),I$1&&tg$1(Lr,ko),ro;if(so===null){for(;ko<Vr.length;ko++)so=nr(Lr,Vr[ko],Wr),so!==null&&(Br=ct(so,Br,ko),no===null?ro=so:no.sibling=so,no=so);return I$1&&tg$1(Lr,ko),ro}for(so=_(Lr,so);ko<Vr.length;ko++)To=or(so,Lr,ko,Vr[ko],Wr),To!==null&&(o&&To.alternate!==null&&so.delete(To.key===null?ko:To.key),Br=ct(To,Br,ko),no===null?ro=To:no.sibling=To,no=To);return o&&so.forEach(function(No){return i(Lr,No)}),I$1&&tg$1(Lr,ko),ro}function fr(Lr,Br,Vr,Wr){var ro=Ka$1(Vr);if(typeof ro!="function")throw Error(p$2(150));if(Vr=ro.call(Vr),Vr==null)throw Error(p$2(151));for(var no=ro=null,so=Br,ko=Br=0,To=null,oo=Vr.next();so!==null&&!oo.done;ko++,oo=Vr.next()){so.index>ko?(To=so,so=null):To=so.sibling;var No=rr(Lr,so,oo.value,Wr);if(No===null){so===null&&(so=To);break}o&&so&&No.alternate===null&&i(Lr,so),Br=ct(No,Br,ko),no===null?ro=No:no.sibling=No,no=No,so=To}if(oo.done)return s(Lr,so),I$1&&tg$1(Lr,ko),ro;if(so===null){for(;!oo.done;ko++,oo=Vr.next())oo=nr(Lr,oo.value,Wr),oo!==null&&(Br=ct(oo,Br,ko),no===null?ro=oo:no.sibling=oo,no=oo);return I$1&&tg$1(Lr,ko),ro}for(so=_(Lr,so);!oo.done;ko++,oo=Vr.next())oo=or(so,Lr,ko,oo.value,Wr),oo!==null&&(o&&oo.alternate!==null&&so.delete(oo.key===null?ko:oo.key),Br=ct(oo,Br,ko),no===null?ro=oo:no.sibling=oo,no=oo);return o&&so.forEach(function(As){return i(Lr,As)}),I$1&&tg$1(Lr,ko),ro}function yr(Lr,Br,Vr,Wr){if(typeof Vr=="object"&&Vr!==null&&Vr.type===ya$1&&Vr.key===null&&(Vr=Vr.props.children),typeof Vr=="object"&&Vr!==null){switch(Vr.$$typeof){case va$1:e:{for(var ro=Vr.key,no=Br;no!==null;){if(no.key===ro){if(ro=Vr.type,ro===ya$1){if(no.tag===7){s(Lr,no.sibling),Br=_e(no,Vr.props.children),Br.return=Lr,Lr=Br;break e}}else if(no.elementType===ro||typeof ro=="object"&&ro!==null&&ro.$$typeof===Ha&&Ng$1(ro)===no.type){s(Lr,no.sibling),Br=_e(no,Vr.props),Br.ref=Lg$1(Lr,no,Vr),Br.return=Lr,Lr=Br;break e}s(Lr,no);break}else i(Lr,no);no=no.sibling}Vr.type===ya$1?(Br=Tg$1(Vr.props.children,Lr.mode,Wr,Vr.key),Br.return=Lr,Lr=Br):(Wr=Rg$1(Vr.type,Vr.key,Vr.props,null,Lr.mode,Wr),Wr.ref=Lg$1(Lr,Br,Vr),Wr.return=Lr,Lr=Wr)}return Mt(Lr);case wa$1:e:{for(no=Vr.key;Br!==null;){if(Br.key===no)if(Br.tag===4&&Br.stateNode.containerInfo===Vr.containerInfo&&Br.stateNode.implementation===Vr.implementation){s(Lr,Br.sibling),Br=_e(Br,Vr.children||[]),Br.return=Lr,Lr=Br;break e}else{s(Lr,Br);break}else i(Lr,Br);Br=Br.sibling}Br=Sg$1(Vr,Lr.mode,Wr),Br.return=Lr,Lr=Br}return Mt(Lr);case Ha:return no=Vr._init,yr(Lr,Br,no(Vr._payload),Wr)}if(eb(Vr))return hr(Lr,Br,Vr,Wr);if(Ka$1(Vr))return fr(Lr,Br,Vr,Wr);Mg$1(Lr,Vr)}return typeof Vr=="string"&&Vr!==""||typeof Vr=="number"?(Vr=""+Vr,Br!==null&&Br.tag===6?(s(Lr,Br.sibling),Br=_e(Br,Vr),Br.return=Lr,Lr=Br):(s(Lr,Br),Br=Qg$1(Vr,Lr.mode,Wr),Br.return=Lr,Lr=Br),Mt(Lr)):s(Lr,Br)}return yr}var Ug=Og$1(!0),Vg$1=Og$1(!1),Wg=Uf$1(null),Xg$1=null,Yg$1=null,Zg$1=null;function $g$1(){Zg$1=Yg$1=Xg$1=null}function ah$1(o){var i=Wg.current;E$1(Wg),o._currentValue=i}function bh$1(o,i,s){for(;o!==null;){var _=o.alternate;if((o.childLanes&i)!==i?(o.childLanes|=i,_!==null&&(_.childLanes|=i)):_!==null&&(_.childLanes&i)!==i&&(_.childLanes|=i),o===s)break;o=o.return}}function ch$1(o,i){Xg$1=o,Zg$1=Yg$1=null,o=o.dependencies,o!==null&&o.firstContext!==null&&(o.lanes&i&&(dh$1=!0),o.firstContext=null)}function eh$1(o){var i=o._currentValue;if(Zg$1!==o)if(o={context:o,memoizedValue:i,next:null},Yg$1===null){if(Xg$1===null)throw Error(p$2(308));Yg$1=o,Xg$1.dependencies={lanes:0,firstContext:o}}else Yg$1=Yg$1.next=o;return i}var fh$1=null;function gh$1(o){fh$1===null?fh$1=[o]:fh$1.push(o)}function hh$1(o,i,s,_){var _e=i.interleaved;return _e===null?(s.next=s,gh$1(i)):(s.next=_e.next,_e.next=s),i.interleaved=s,ih$1(o,_)}function ih$1(o,i){o.lanes|=i;var s=o.alternate;for(s!==null&&(s.lanes|=i),s=o,o=o.return;o!==null;)o.childLanes|=i,s=o.alternate,s!==null&&(s.childLanes|=i),s=o,o=o.return;return s.tag===3?s.stateNode:null}var jh$1=!1;function kh$1(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh$1(o,i){o=o.updateQueue,i.updateQueue===o&&(i.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function mh$1(o,i){return{eventTime:o,lane:i,tag:0,payload:null,callback:null,next:null}}function nh$1(o,i,s){var _=o.updateQueue;if(_===null)return null;if(_=_.shared,K$1&2){var _e=_.pending;return _e===null?i.next=i:(i.next=_e.next,_e.next=i),_.pending=i,ih$1(o,s)}return _e=_.interleaved,_e===null?(i.next=i,gh$1(_)):(i.next=_e.next,_e.next=i),_.interleaved=i,ih$1(o,s)}function oh$1(o,i,s){if(i=i.updateQueue,i!==null&&(i=i.shared,(s&4194240)!==0)){var _=i.lanes;_&=o.pendingLanes,s|=_,i.lanes=s,Cc$1(o,s)}}function ph$1(o,i){var s=o.updateQueue,_=o.alternate;if(_!==null&&(_=_.updateQueue,s===_)){var _e=null,ct=null;if(s=s.firstBaseUpdate,s!==null){do{var Mt={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};ct===null?_e=ct=Mt:ct=ct.next=Mt,s=s.next}while(s!==null);ct===null?_e=ct=i:ct=ct.next=i}else _e=ct=i;s={baseState:_.baseState,firstBaseUpdate:_e,lastBaseUpdate:ct,shared:_.shared,effects:_.effects},o.updateQueue=s;return}o=s.lastBaseUpdate,o===null?s.firstBaseUpdate=i:o.next=i,s.lastBaseUpdate=i}function qh$1(o,i,s,_){var _e=o.updateQueue;jh$1=!1;var ct=_e.firstBaseUpdate,Mt=_e.lastBaseUpdate,Ft=_e.shared.pending;if(Ft!==null){_e.shared.pending=null;var Ut=Ft,Xt=Ut.next;Ut.next=null,Mt===null?ct=Xt:Mt.next=Xt,Mt=Ut;var Kt=o.alternate;Kt!==null&&(Kt=Kt.updateQueue,Ft=Kt.lastBaseUpdate,Ft!==Mt&&(Ft===null?Kt.firstBaseUpdate=Xt:Ft.next=Xt,Kt.lastBaseUpdate=Ut))}if(ct!==null){var nr=_e.baseState;Mt=0,Kt=Xt=Ut=null,Ft=ct;do{var rr=Ft.lane,or=Ft.eventTime;if((_&rr)===rr){Kt!==null&&(Kt=Kt.next={eventTime:or,lane:0,tag:Ft.tag,payload:Ft.payload,callback:Ft.callback,next:null});e:{var hr=o,fr=Ft;switch(rr=i,or=s,fr.tag){case 1:if(hr=fr.payload,typeof hr=="function"){nr=hr.call(or,nr,rr);break e}nr=hr;break e;case 3:hr.flags=hr.flags&-65537|128;case 0:if(hr=fr.payload,rr=typeof hr=="function"?hr.call(or,nr,rr):hr,rr==null)break e;nr=A$2({},nr,rr);break e;case 2:jh$1=!0}}Ft.callback!==null&&Ft.lane!==0&&(o.flags|=64,rr=_e.effects,rr===null?_e.effects=[Ft]:rr.push(Ft))}else or={eventTime:or,lane:rr,tag:Ft.tag,payload:Ft.payload,callback:Ft.callback,next:null},Kt===null?(Xt=Kt=or,Ut=nr):Kt=Kt.next=or,Mt|=rr;if(Ft=Ft.next,Ft===null){if(Ft=_e.shared.pending,Ft===null)break;rr=Ft,Ft=rr.next,rr.next=null,_e.lastBaseUpdate=rr,_e.shared.pending=null}}while(!0);if(Kt===null&&(Ut=nr),_e.baseState=Ut,_e.firstBaseUpdate=Xt,_e.lastBaseUpdate=Kt,i=_e.shared.interleaved,i!==null){_e=i;do Mt|=_e.lane,_e=_e.next;while(_e!==i)}else ct===null&&(_e.shared.lanes=0);rh$1|=Mt,o.lanes=Mt,o.memoizedState=nr}}function sh$1(o,i,s){if(o=i.effects,i.effects=null,o!==null)for(i=0;i<o.length;i++){var _=o[i],_e=_.callback;if(_e!==null){if(_.callback=null,_=s,typeof _e!="function")throw Error(p$2(191,_e));_e.call(_)}}}var th$1={},uh$1=Uf$1(th$1),vh$1=Uf$1(th$1),wh$1=Uf$1(th$1);function xh$1(o){if(o===th$1)throw Error(p$2(174));return o}function yh$1(o,i){switch(G$4(wh$1,i),G$4(vh$1,o),G$4(uh$1,th$1),o=i.nodeType,o){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:lb(null,"");break;default:o=o===8?i.parentNode:i,i=o.namespaceURI||null,o=o.tagName,i=lb(i,o)}E$1(uh$1),G$4(uh$1,i)}function zh$1(){E$1(uh$1),E$1(vh$1),E$1(wh$1)}function Ah$1(o){xh$1(wh$1.current);var i=xh$1(uh$1.current),s=lb(i,o.type);i!==s&&(G$4(vh$1,o),G$4(uh$1,s))}function Bh$1(o){vh$1.current===o&&(E$1(uh$1),E$1(vh$1))}var L=Uf$1(0);function Ch$1(o){for(var i=o;i!==null;){if(i.tag===13){var s=i.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if(i.flags&128)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break;for(;i.sibling===null;){if(i.return===null||i.return===o)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Dh$1=[];function Eh$1(){for(var o=0;o<Dh$1.length;o++)Dh$1[o]._workInProgressVersionPrimary=null;Dh$1.length=0}var Fh$1=ua$1.ReactCurrentDispatcher,Gh$1=ua$1.ReactCurrentBatchConfig,Hh$1=0,M$1=null,N$2=null,O=null,Ih$1=!1,Jh$1=!1,Kh$1=0,Lh$1=0;function P(){throw Error(p$2(321))}function Mh$1(o,i){if(i===null)return!1;for(var s=0;s<i.length&&s<o.length;s++)if(!He$1(o[s],i[s]))return!1;return!0}function Nh$1(o,i,s,_,_e,ct){if(Hh$1=ct,M$1=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Fh$1.current=o===null||o.memoizedState===null?Oh$1:Ph$1,o=s(_,_e),Jh$1){ct=0;do{if(Jh$1=!1,Kh$1=0,25<=ct)throw Error(p$2(301));ct+=1,O=N$2=null,i.updateQueue=null,Fh$1.current=Qh$1,o=s(_,_e)}while(Jh$1)}if(Fh$1.current=Rh$1,i=N$2!==null&&N$2.next!==null,Hh$1=0,O=N$2=M$1=null,Ih$1=!1,i)throw Error(p$2(300));return o}function Sh$1(){var o=Kh$1!==0;return Kh$1=0,o}function Th$1(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O===null?M$1.memoizedState=O=o:O=O.next=o,O}function Uh$1(){if(N$2===null){var o=M$1.alternate;o=o!==null?o.memoizedState:null}else o=N$2.next;var i=O===null?M$1.memoizedState:O.next;if(i!==null)O=i,N$2=o;else{if(o===null)throw Error(p$2(310));N$2=o,o={memoizedState:N$2.memoizedState,baseState:N$2.baseState,baseQueue:N$2.baseQueue,queue:N$2.queue,next:null},O===null?M$1.memoizedState=O=o:O=O.next=o}return O}function Vh$1(o,i){return typeof i=="function"?i(o):i}function Wh$1(o){var i=Uh$1(),s=i.queue;if(s===null)throw Error(p$2(311));s.lastRenderedReducer=o;var _=N$2,_e=_.baseQueue,ct=s.pending;if(ct!==null){if(_e!==null){var Mt=_e.next;_e.next=ct.next,ct.next=Mt}_.baseQueue=_e=ct,s.pending=null}if(_e!==null){ct=_e.next,_=_.baseState;var Ft=Mt=null,Ut=null,Xt=ct;do{var Kt=Xt.lane;if((Hh$1&Kt)===Kt)Ut!==null&&(Ut=Ut.next={lane:0,action:Xt.action,hasEagerState:Xt.hasEagerState,eagerState:Xt.eagerState,next:null}),_=Xt.hasEagerState?Xt.eagerState:o(_,Xt.action);else{var nr={lane:Kt,action:Xt.action,hasEagerState:Xt.hasEagerState,eagerState:Xt.eagerState,next:null};Ut===null?(Ft=Ut=nr,Mt=_):Ut=Ut.next=nr,M$1.lanes|=Kt,rh$1|=Kt}Xt=Xt.next}while(Xt!==null&&Xt!==ct);Ut===null?Mt=_:Ut.next=Ft,He$1(_,i.memoizedState)||(dh$1=!0),i.memoizedState=_,i.baseState=Mt,i.baseQueue=Ut,s.lastRenderedState=_}if(o=s.interleaved,o!==null){_e=o;do ct=_e.lane,M$1.lanes|=ct,rh$1|=ct,_e=_e.next;while(_e!==o)}else _e===null&&(s.lanes=0);return[i.memoizedState,s.dispatch]}function Xh$1(o){var i=Uh$1(),s=i.queue;if(s===null)throw Error(p$2(311));s.lastRenderedReducer=o;var _=s.dispatch,_e=s.pending,ct=i.memoizedState;if(_e!==null){s.pending=null;var Mt=_e=_e.next;do ct=o(ct,Mt.action),Mt=Mt.next;while(Mt!==_e);He$1(ct,i.memoizedState)||(dh$1=!0),i.memoizedState=ct,i.baseQueue===null&&(i.baseState=ct),s.lastRenderedState=ct}return[ct,_]}function Yh$1(){}function Zh$1(o,i){var s=M$1,_=Uh$1(),_e=i(),ct=!He$1(_.memoizedState,_e);if(ct&&(_.memoizedState=_e,dh$1=!0),_=_.queue,$h$1(ai$1.bind(null,s,_,o),[o]),_.getSnapshot!==i||ct||O!==null&&O.memoizedState.tag&1){if(s.flags|=2048,bi$1(9,ci$1.bind(null,s,_,_e,i),void 0,null),Q$2===null)throw Error(p$2(349));Hh$1&30||di$1(s,i,_e)}return _e}function di$1(o,i,s){o.flags|=16384,o={getSnapshot:i,value:s},i=M$1.updateQueue,i===null?(i={lastEffect:null,stores:null},M$1.updateQueue=i,i.stores=[o]):(s=i.stores,s===null?i.stores=[o]:s.push(o))}function ci$1(o,i,s,_){i.value=s,i.getSnapshot=_,ei$1(i)&&fi$1(o)}function ai$1(o,i,s){return s(function(){ei$1(i)&&fi$1(o)})}function ei$1(o){var i=o.getSnapshot;o=o.value;try{var s=i();return!He$1(o,s)}catch{return!0}}function fi$1(o){var i=ih$1(o,1);i!==null&&gi$1(i,o,1,-1)}function hi$1(o){var i=Th$1();return typeof o=="function"&&(o=o()),i.memoizedState=i.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh$1,lastRenderedState:o},i.queue=o,o=o.dispatch=ii$1.bind(null,M$1,o),[i.memoizedState,o]}function bi$1(o,i,s,_){return o={tag:o,create:i,destroy:s,deps:_,next:null},i=M$1.updateQueue,i===null?(i={lastEffect:null,stores:null},M$1.updateQueue=i,i.lastEffect=o.next=o):(s=i.lastEffect,s===null?i.lastEffect=o.next=o:(_=s.next,s.next=o,o.next=_,i.lastEffect=o)),o}function ji$1(){return Uh$1().memoizedState}function ki(o,i,s,_){var _e=Th$1();M$1.flags|=o,_e.memoizedState=bi$1(1|i,s,void 0,_===void 0?null:_)}function li$1(o,i,s,_){var _e=Uh$1();_=_===void 0?null:_;var ct=void 0;if(N$2!==null){var Mt=N$2.memoizedState;if(ct=Mt.destroy,_!==null&&Mh$1(_,Mt.deps)){_e.memoizedState=bi$1(i,s,ct,_);return}}M$1.flags|=o,_e.memoizedState=bi$1(1|i,s,ct,_)}function mi$1(o,i){return ki(8390656,8,o,i)}function $h$1(o,i){return li$1(2048,8,o,i)}function ni$1(o,i){return li$1(4,2,o,i)}function oi$1(o,i){return li$1(4,4,o,i)}function pi$1(o,i){if(typeof i=="function")return o=o(),i(o),function(){i(null)};if(i!=null)return o=o(),i.current=o,function(){i.current=null}}function qi$1(o,i,s){return s=s!=null?s.concat([o]):null,li$1(4,4,pi$1.bind(null,i,o),s)}function ri$1(){}function si$1(o,i){var s=Uh$1();i=i===void 0?null:i;var _=s.memoizedState;return _!==null&&i!==null&&Mh$1(i,_[1])?_[0]:(s.memoizedState=[o,i],o)}function ti$1(o,i){var s=Uh$1();i=i===void 0?null:i;var _=s.memoizedState;return _!==null&&i!==null&&Mh$1(i,_[1])?_[0]:(o=o(),s.memoizedState=[o,i],o)}function ui$1(o,i,s){return Hh$1&21?(He$1(s,i)||(s=yc$1(),M$1.lanes|=s,rh$1|=s,o.baseState=!0),i):(o.baseState&&(o.baseState=!1,dh$1=!0),o.memoizedState=s)}function vi$1(o,i){var s=C;C=s!==0&&4>s?s:4,o(!0);var _=Gh$1.transition;Gh$1.transition={};try{o(!1),i()}finally{C=s,Gh$1.transition=_}}function wi$1(){return Uh$1().memoizedState}function xi$1(o,i,s){var _=yi$1(o);if(s={lane:_,action:s,hasEagerState:!1,eagerState:null,next:null},zi$1(o))Ai$1(i,s);else if(s=hh$1(o,i,s,_),s!==null){var _e=R();gi$1(s,o,_,_e),Bi$1(s,i,_)}}function ii$1(o,i,s){var _=yi$1(o),_e={lane:_,action:s,hasEagerState:!1,eagerState:null,next:null};if(zi$1(o))Ai$1(i,_e);else{var ct=o.alternate;if(o.lanes===0&&(ct===null||ct.lanes===0)&&(ct=i.lastRenderedReducer,ct!==null))try{var Mt=i.lastRenderedState,Ft=ct(Mt,s);if(_e.hasEagerState=!0,_e.eagerState=Ft,He$1(Ft,Mt)){var Ut=i.interleaved;Ut===null?(_e.next=_e,gh$1(i)):(_e.next=Ut.next,Ut.next=_e),i.interleaved=_e;return}}catch{}finally{}s=hh$1(o,i,_e,_),s!==null&&(_e=R(),gi$1(s,o,_,_e),Bi$1(s,i,_))}}function zi$1(o){var i=o.alternate;return o===M$1||i!==null&&i===M$1}function Ai$1(o,i){Jh$1=Ih$1=!0;var s=o.pending;s===null?i.next=i:(i.next=s.next,s.next=i),o.pending=i}function Bi$1(o,i,s){if(s&4194240){var _=i.lanes;_&=o.pendingLanes,s|=_,i.lanes=s,Cc$1(o,s)}}var Rh$1={readContext:eh$1,useCallback:P,useContext:P,useEffect:P,useImperativeHandle:P,useInsertionEffect:P,useLayoutEffect:P,useMemo:P,useReducer:P,useRef:P,useState:P,useDebugValue:P,useDeferredValue:P,useTransition:P,useMutableSource:P,useSyncExternalStore:P,useId:P,unstable_isNewReconciler:!1},Oh$1={readContext:eh$1,useCallback:function(o,i){return Th$1().memoizedState=[o,i===void 0?null:i],o},useContext:eh$1,useEffect:mi$1,useImperativeHandle:function(o,i,s){return s=s!=null?s.concat([o]):null,ki(4194308,4,pi$1.bind(null,i,o),s)},useLayoutEffect:function(o,i){return ki(4194308,4,o,i)},useInsertionEffect:function(o,i){return ki(4,2,o,i)},useMemo:function(o,i){var s=Th$1();return i=i===void 0?null:i,o=o(),s.memoizedState=[o,i],o},useReducer:function(o,i,s){var _=Th$1();return i=s!==void 0?s(i):i,_.memoizedState=_.baseState=i,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:i},_.queue=o,o=o.dispatch=xi$1.bind(null,M$1,o),[_.memoizedState,o]},useRef:function(o){var i=Th$1();return o={current:o},i.memoizedState=o},useState:hi$1,useDebugValue:ri$1,useDeferredValue:function(o){return Th$1().memoizedState=o},useTransition:function(){var o=hi$1(!1),i=o[0];return o=vi$1.bind(null,o[1]),Th$1().memoizedState=o,[i,o]},useMutableSource:function(){},useSyncExternalStore:function(o,i,s){var _=M$1,_e=Th$1();if(I$1){if(s===void 0)throw Error(p$2(407));s=s()}else{if(s=i(),Q$2===null)throw Error(p$2(349));Hh$1&30||di$1(_,i,s)}_e.memoizedState=s;var ct={value:s,getSnapshot:i};return _e.queue=ct,mi$1(ai$1.bind(null,_,ct,o),[o]),_.flags|=2048,bi$1(9,ci$1.bind(null,_,ct,s,i),void 0,null),s},useId:function(){var o=Th$1(),i=Q$2.identifierPrefix;if(I$1){var s=sg$1,_=rg$1;s=(_&~(1<<32-oc$1(_)-1)).toString(32)+s,i=":"+i+"R"+s,s=Kh$1++,0<s&&(i+="H"+s.toString(32)),i+=":"}else s=Lh$1++,i=":"+i+"r"+s.toString(32)+":";return o.memoizedState=i},unstable_isNewReconciler:!1},Ph$1={readContext:eh$1,useCallback:si$1,useContext:eh$1,useEffect:$h$1,useImperativeHandle:qi$1,useInsertionEffect:ni$1,useLayoutEffect:oi$1,useMemo:ti$1,useReducer:Wh$1,useRef:ji$1,useState:function(){return Wh$1(Vh$1)},useDebugValue:ri$1,useDeferredValue:function(o){var i=Uh$1();return ui$1(i,N$2.memoizedState,o)},useTransition:function(){var o=Wh$1(Vh$1)[0],i=Uh$1().memoizedState;return[o,i]},useMutableSource:Yh$1,useSyncExternalStore:Zh$1,useId:wi$1,unstable_isNewReconciler:!1},Qh$1={readContext:eh$1,useCallback:si$1,useContext:eh$1,useEffect:$h$1,useImperativeHandle:qi$1,useInsertionEffect:ni$1,useLayoutEffect:oi$1,useMemo:ti$1,useReducer:Xh$1,useRef:ji$1,useState:function(){return Xh$1(Vh$1)},useDebugValue:ri$1,useDeferredValue:function(o){var i=Uh$1();return N$2===null?i.memoizedState=o:ui$1(i,N$2.memoizedState,o)},useTransition:function(){var o=Xh$1(Vh$1)[0],i=Uh$1().memoizedState;return[o,i]},useMutableSource:Yh$1,useSyncExternalStore:Zh$1,useId:wi$1,unstable_isNewReconciler:!1};function Ci$1(o,i){if(o&&o.defaultProps){i=A$2({},i),o=o.defaultProps;for(var s in o)i[s]===void 0&&(i[s]=o[s]);return i}return i}function Di$1(o,i,s,_){i=o.memoizedState,s=s(_,i),s=s==null?i:A$2({},i,s),o.memoizedState=s,o.lanes===0&&(o.updateQueue.baseState=s)}var Ei$1={isMounted:function(o){return(o=o._reactInternals)?Vb(o)===o:!1},enqueueSetState:function(o,i,s){o=o._reactInternals;var _=R(),_e=yi$1(o),ct=mh$1(_,_e);ct.payload=i,s!=null&&(ct.callback=s),i=nh$1(o,ct,_e),i!==null&&(gi$1(i,o,_e,_),oh$1(i,o,_e))},enqueueReplaceState:function(o,i,s){o=o._reactInternals;var _=R(),_e=yi$1(o),ct=mh$1(_,_e);ct.tag=1,ct.payload=i,s!=null&&(ct.callback=s),i=nh$1(o,ct,_e),i!==null&&(gi$1(i,o,_e,_),oh$1(i,o,_e))},enqueueForceUpdate:function(o,i){o=o._reactInternals;var s=R(),_=yi$1(o),_e=mh$1(s,_);_e.tag=2,i!=null&&(_e.callback=i),i=nh$1(o,_e,_),i!==null&&(gi$1(i,o,_,s),oh$1(i,o,_))}};function Fi$1(o,i,s,_,_e,ct,Mt){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(_,ct,Mt):i.prototype&&i.prototype.isPureReactComponent?!Ie$2(s,_)||!Ie$2(_e,ct):!0}function Gi$1(o,i,s){var _=!1,_e=Vf$1,ct=i.contextType;return typeof ct=="object"&&ct!==null?ct=eh$1(ct):(_e=Zf$1(i)?Xf$1:H$3.current,_=i.contextTypes,ct=(_=_!=null)?Yf$1(o,_e):Vf$1),i=new i(s,ct),o.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Ei$1,o.stateNode=i,i._reactInternals=o,_&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=_e,o.__reactInternalMemoizedMaskedChildContext=ct),i}function Hi$1(o,i,s,_){o=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(s,_),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(s,_),i.state!==o&&Ei$1.enqueueReplaceState(i,i.state,null)}function Ii$1(o,i,s,_){var _e=o.stateNode;_e.props=s,_e.state=o.memoizedState,_e.refs={},kh$1(o);var ct=i.contextType;typeof ct=="object"&&ct!==null?_e.context=eh$1(ct):(ct=Zf$1(i)?Xf$1:H$3.current,_e.context=Yf$1(o,ct)),_e.state=o.memoizedState,ct=i.getDerivedStateFromProps,typeof ct=="function"&&(Di$1(o,i,ct,s),_e.state=o.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof _e.getSnapshotBeforeUpdate=="function"||typeof _e.UNSAFE_componentWillMount!="function"&&typeof _e.componentWillMount!="function"||(i=_e.state,typeof _e.componentWillMount=="function"&&_e.componentWillMount(),typeof _e.UNSAFE_componentWillMount=="function"&&_e.UNSAFE_componentWillMount(),i!==_e.state&&Ei$1.enqueueReplaceState(_e,_e.state,null),qh$1(o,s,_e,_),_e.state=o.memoizedState),typeof _e.componentDidMount=="function"&&(o.flags|=4194308)}function Ji$1(o,i){try{var s="",_=i;do s+=Pa$1(_),_=_.return;while(_);var _e=s}catch(ct){_e=`
Error generating stack: `+ct.message+`
`+ct.stack}return{value:o,source:i,stack:_e,digest:null}}function Ki$1(o,i,s){return{value:o,source:null,stack:s??null,digest:i??null}}function Li$1(o,i){try{console.error(i.value)}catch(s){setTimeout(function(){throw s})}}var Mi$1=typeof WeakMap=="function"?WeakMap:Map;function Ni(o,i,s){s=mh$1(-1,s),s.tag=3,s.payload={element:null};var _=i.value;return s.callback=function(){Oi$1||(Oi$1=!0,Pi$1=_),Li$1(o,i)},s}function Qi$1(o,i,s){s=mh$1(-1,s),s.tag=3;var _=o.type.getDerivedStateFromError;if(typeof _=="function"){var _e=i.value;s.payload=function(){return _(_e)},s.callback=function(){Li$1(o,i)}}var ct=o.stateNode;return ct!==null&&typeof ct.componentDidCatch=="function"&&(s.callback=function(){Li$1(o,i),typeof _!="function"&&(Ri$1===null?Ri$1=new Set([this]):Ri$1.add(this));var Mt=i.stack;this.componentDidCatch(i.value,{componentStack:Mt!==null?Mt:""})}),s}function Si$1(o,i,s){var _=o.pingCache;if(_===null){_=o.pingCache=new Mi$1;var _e=new Set;_.set(i,_e)}else _e=_.get(i),_e===void 0&&(_e=new Set,_.set(i,_e));_e.has(s)||(_e.add(s),o=Ti.bind(null,o,i,s),i.then(o,o))}function Ui$1(o){do{var i;if((i=o.tag===13)&&(i=o.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return o;o=o.return}while(o!==null);return null}function Vi$1(o,i,s,_,_e){return o.mode&1?(o.flags|=65536,o.lanes=_e,o):(o===i?o.flags|=65536:(o.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(i=mh$1(-1,1),i.tag=2,nh$1(s,i,1))),s.lanes|=1),o)}var Wi$1=ua$1.ReactCurrentOwner,dh$1=!1;function Xi$1(o,i,s,_){i.child=o===null?Vg$1(i,null,s,_):Ug(i,o.child,s,_)}function Yi$1(o,i,s,_,_e){s=s.render;var ct=i.ref;return ch$1(i,_e),_=Nh$1(o,i,s,_,ct,_e),s=Sh$1(),o!==null&&!dh$1?(i.updateQueue=o.updateQueue,i.flags&=-2053,o.lanes&=~_e,Zi$1(o,i,_e)):(I$1&&s&&vg$1(i),i.flags|=1,Xi$1(o,i,_,_e),i.child)}function $i$1(o,i,s,_,_e){if(o===null){var ct=s.type;return typeof ct=="function"&&!aj$1(ct)&&ct.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(i.tag=15,i.type=ct,bj$1(o,i,ct,_,_e)):(o=Rg$1(s.type,null,_,i,i.mode,_e),o.ref=i.ref,o.return=i,i.child=o)}if(ct=o.child,!(o.lanes&_e)){var Mt=ct.memoizedProps;if(s=s.compare,s=s!==null?s:Ie$2,s(Mt,_)&&o.ref===i.ref)return Zi$1(o,i,_e)}return i.flags|=1,o=Pg$1(ct,_),o.ref=i.ref,o.return=i,i.child=o}function bj$1(o,i,s,_,_e){if(o!==null){var ct=o.memoizedProps;if(Ie$2(ct,_)&&o.ref===i.ref)if(dh$1=!1,i.pendingProps=_=ct,(o.lanes&_e)!==0)o.flags&131072&&(dh$1=!0);else return i.lanes=o.lanes,Zi$1(o,i,_e)}return cj$1(o,i,s,_,_e)}function dj$1(o,i,s){var _=i.pendingProps,_e=_.children,ct=o!==null?o.memoizedState:null;if(_.mode==="hidden")if(!(i.mode&1))i.memoizedState={baseLanes:0,cachePool:null,transitions:null},G$4(ej$1,fj$1),fj$1|=s;else{if(!(s&1073741824))return o=ct!==null?ct.baseLanes|s:s,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:o,cachePool:null,transitions:null},i.updateQueue=null,G$4(ej$1,fj$1),fj$1|=o,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},_=ct!==null?ct.baseLanes:s,G$4(ej$1,fj$1),fj$1|=_}else ct!==null?(_=ct.baseLanes|s,i.memoizedState=null):_=s,G$4(ej$1,fj$1),fj$1|=_;return Xi$1(o,i,_e,s),i.child}function gj$1(o,i){var s=i.ref;(o===null&&s!==null||o!==null&&o.ref!==s)&&(i.flags|=512,i.flags|=2097152)}function cj$1(o,i,s,_,_e){var ct=Zf$1(s)?Xf$1:H$3.current;return ct=Yf$1(i,ct),ch$1(i,_e),s=Nh$1(o,i,s,_,ct,_e),_=Sh$1(),o!==null&&!dh$1?(i.updateQueue=o.updateQueue,i.flags&=-2053,o.lanes&=~_e,Zi$1(o,i,_e)):(I$1&&_&&vg$1(i),i.flags|=1,Xi$1(o,i,s,_e),i.child)}function hj$1(o,i,s,_,_e){if(Zf$1(s)){var ct=!0;cg$1(i)}else ct=!1;if(ch$1(i,_e),i.stateNode===null)ij$1(o,i),Gi$1(i,s,_),Ii$1(i,s,_,_e),_=!0;else if(o===null){var Mt=i.stateNode,Ft=i.memoizedProps;Mt.props=Ft;var Ut=Mt.context,Xt=s.contextType;typeof Xt=="object"&&Xt!==null?Xt=eh$1(Xt):(Xt=Zf$1(s)?Xf$1:H$3.current,Xt=Yf$1(i,Xt));var Kt=s.getDerivedStateFromProps,nr=typeof Kt=="function"||typeof Mt.getSnapshotBeforeUpdate=="function";nr||typeof Mt.UNSAFE_componentWillReceiveProps!="function"&&typeof Mt.componentWillReceiveProps!="function"||(Ft!==_||Ut!==Xt)&&Hi$1(i,Mt,_,Xt),jh$1=!1;var rr=i.memoizedState;Mt.state=rr,qh$1(i,_,Mt,_e),Ut=i.memoizedState,Ft!==_||rr!==Ut||Wf$1.current||jh$1?(typeof Kt=="function"&&(Di$1(i,s,Kt,_),Ut=i.memoizedState),(Ft=jh$1||Fi$1(i,s,Ft,_,rr,Ut,Xt))?(nr||typeof Mt.UNSAFE_componentWillMount!="function"&&typeof Mt.componentWillMount!="function"||(typeof Mt.componentWillMount=="function"&&Mt.componentWillMount(),typeof Mt.UNSAFE_componentWillMount=="function"&&Mt.UNSAFE_componentWillMount()),typeof Mt.componentDidMount=="function"&&(i.flags|=4194308)):(typeof Mt.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=_,i.memoizedState=Ut),Mt.props=_,Mt.state=Ut,Mt.context=Xt,_=Ft):(typeof Mt.componentDidMount=="function"&&(i.flags|=4194308),_=!1)}else{Mt=i.stateNode,lh$1(o,i),Ft=i.memoizedProps,Xt=i.type===i.elementType?Ft:Ci$1(i.type,Ft),Mt.props=Xt,nr=i.pendingProps,rr=Mt.context,Ut=s.contextType,typeof Ut=="object"&&Ut!==null?Ut=eh$1(Ut):(Ut=Zf$1(s)?Xf$1:H$3.current,Ut=Yf$1(i,Ut));var or=s.getDerivedStateFromProps;(Kt=typeof or=="function"||typeof Mt.getSnapshotBeforeUpdate=="function")||typeof Mt.UNSAFE_componentWillReceiveProps!="function"&&typeof Mt.componentWillReceiveProps!="function"||(Ft!==nr||rr!==Ut)&&Hi$1(i,Mt,_,Ut),jh$1=!1,rr=i.memoizedState,Mt.state=rr,qh$1(i,_,Mt,_e);var hr=i.memoizedState;Ft!==nr||rr!==hr||Wf$1.current||jh$1?(typeof or=="function"&&(Di$1(i,s,or,_),hr=i.memoizedState),(Xt=jh$1||Fi$1(i,s,Xt,_,rr,hr,Ut)||!1)?(Kt||typeof Mt.UNSAFE_componentWillUpdate!="function"&&typeof Mt.componentWillUpdate!="function"||(typeof Mt.componentWillUpdate=="function"&&Mt.componentWillUpdate(_,hr,Ut),typeof Mt.UNSAFE_componentWillUpdate=="function"&&Mt.UNSAFE_componentWillUpdate(_,hr,Ut)),typeof Mt.componentDidUpdate=="function"&&(i.flags|=4),typeof Mt.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof Mt.componentDidUpdate!="function"||Ft===o.memoizedProps&&rr===o.memoizedState||(i.flags|=4),typeof Mt.getSnapshotBeforeUpdate!="function"||Ft===o.memoizedProps&&rr===o.memoizedState||(i.flags|=1024),i.memoizedProps=_,i.memoizedState=hr),Mt.props=_,Mt.state=hr,Mt.context=Ut,_=Xt):(typeof Mt.componentDidUpdate!="function"||Ft===o.memoizedProps&&rr===o.memoizedState||(i.flags|=4),typeof Mt.getSnapshotBeforeUpdate!="function"||Ft===o.memoizedProps&&rr===o.memoizedState||(i.flags|=1024),_=!1)}return jj$1(o,i,s,_,ct,_e)}function jj$1(o,i,s,_,_e,ct){gj$1(o,i);var Mt=(i.flags&128)!==0;if(!_&&!Mt)return _e&&dg$1(i,s,!1),Zi$1(o,i,ct);_=i.stateNode,Wi$1.current=i;var Ft=Mt&&typeof s.getDerivedStateFromError!="function"?null:_.render();return i.flags|=1,o!==null&&Mt?(i.child=Ug(i,o.child,null,ct),i.child=Ug(i,null,Ft,ct)):Xi$1(o,i,Ft,ct),i.memoizedState=_.state,_e&&dg$1(i,s,!0),i.child}function kj$1(o){var i=o.stateNode;i.pendingContext?ag$1(o,i.pendingContext,i.pendingContext!==i.context):i.context&&ag$1(o,i.context,!1),yh$1(o,i.containerInfo)}function lj$1(o,i,s,_,_e){return Ig$1(),Jg$1(_e),i.flags|=256,Xi$1(o,i,s,_),i.child}var mj$1={dehydrated:null,treeContext:null,retryLane:0};function nj$1(o){return{baseLanes:o,cachePool:null,transitions:null}}function oj$1(o,i,s){var _=i.pendingProps,_e=L.current,ct=!1,Mt=(i.flags&128)!==0,Ft;if((Ft=Mt)||(Ft=o!==null&&o.memoizedState===null?!1:(_e&2)!==0),Ft?(ct=!0,i.flags&=-129):(o===null||o.memoizedState!==null)&&(_e|=1),G$4(L,_e&1),o===null)return Eg$1(i),o=i.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?(i.mode&1?o.data==="$!"?i.lanes=8:i.lanes=1073741824:i.lanes=1,null):(Mt=_.children,o=_.fallback,ct?(_=i.mode,ct=i.child,Mt={mode:"hidden",children:Mt},!(_&1)&&ct!==null?(ct.childLanes=0,ct.pendingProps=Mt):ct=pj$1(Mt,_,0,null),o=Tg$1(o,_,s,null),ct.return=i,o.return=i,ct.sibling=o,i.child=ct,i.child.memoizedState=nj$1(s),i.memoizedState=mj$1,o):qj$1(i,Mt));if(_e=o.memoizedState,_e!==null&&(Ft=_e.dehydrated,Ft!==null))return rj$1(o,i,Mt,_,Ft,_e,s);if(ct){ct=_.fallback,Mt=i.mode,_e=o.child,Ft=_e.sibling;var Ut={mode:"hidden",children:_.children};return!(Mt&1)&&i.child!==_e?(_=i.child,_.childLanes=0,_.pendingProps=Ut,i.deletions=null):(_=Pg$1(_e,Ut),_.subtreeFlags=_e.subtreeFlags&14680064),Ft!==null?ct=Pg$1(Ft,ct):(ct=Tg$1(ct,Mt,s,null),ct.flags|=2),ct.return=i,_.return=i,_.sibling=ct,i.child=_,_=ct,ct=i.child,Mt=o.child.memoizedState,Mt=Mt===null?nj$1(s):{baseLanes:Mt.baseLanes|s,cachePool:null,transitions:Mt.transitions},ct.memoizedState=Mt,ct.childLanes=o.childLanes&~s,i.memoizedState=mj$1,_}return ct=o.child,o=ct.sibling,_=Pg$1(ct,{mode:"visible",children:_.children}),!(i.mode&1)&&(_.lanes=s),_.return=i,_.sibling=null,o!==null&&(s=i.deletions,s===null?(i.deletions=[o],i.flags|=16):s.push(o)),i.child=_,i.memoizedState=null,_}function qj$1(o,i){return i=pj$1({mode:"visible",children:i},o.mode,0,null),i.return=o,o.child=i}function sj$1(o,i,s,_){return _!==null&&Jg$1(_),Ug(i,o.child,null,s),o=qj$1(i,i.pendingProps.children),o.flags|=2,i.memoizedState=null,o}function rj$1(o,i,s,_,_e,ct,Mt){if(s)return i.flags&256?(i.flags&=-257,_=Ki$1(Error(p$2(422))),sj$1(o,i,Mt,_)):i.memoizedState!==null?(i.child=o.child,i.flags|=128,null):(ct=_.fallback,_e=i.mode,_=pj$1({mode:"visible",children:_.children},_e,0,null),ct=Tg$1(ct,_e,Mt,null),ct.flags|=2,_.return=i,ct.return=i,_.sibling=ct,i.child=_,i.mode&1&&Ug(i,o.child,null,Mt),i.child.memoizedState=nj$1(Mt),i.memoizedState=mj$1,ct);if(!(i.mode&1))return sj$1(o,i,Mt,null);if(_e.data==="$!"){if(_=_e.nextSibling&&_e.nextSibling.dataset,_)var Ft=_.dgst;return _=Ft,ct=Error(p$2(419)),_=Ki$1(ct,_,void 0),sj$1(o,i,Mt,_)}if(Ft=(Mt&o.childLanes)!==0,dh$1||Ft){if(_=Q$2,_!==null){switch(Mt&-Mt){case 4:_e=2;break;case 16:_e=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:_e=32;break;case 536870912:_e=268435456;break;default:_e=0}_e=_e&(_.suspendedLanes|Mt)?0:_e,_e!==0&&_e!==ct.retryLane&&(ct.retryLane=_e,ih$1(o,_e),gi$1(_,o,_e,-1))}return tj$1(),_=Ki$1(Error(p$2(421))),sj$1(o,i,Mt,_)}return _e.data==="$?"?(i.flags|=128,i.child=o.child,i=uj$1.bind(null,o),_e._reactRetry=i,null):(o=ct.treeContext,yg$1=Lf$1(_e.nextSibling),xg$1=i,I$1=!0,zg$1=null,o!==null&&(og$1[pg$1++]=rg$1,og$1[pg$1++]=sg$1,og$1[pg$1++]=qg$1,rg$1=o.id,sg$1=o.overflow,qg$1=i),i=qj$1(i,_.children),i.flags|=4096,i)}function vj$1(o,i,s){o.lanes|=i;var _=o.alternate;_!==null&&(_.lanes|=i),bh$1(o.return,i,s)}function wj$1(o,i,s,_,_e){var ct=o.memoizedState;ct===null?o.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:_,tail:s,tailMode:_e}:(ct.isBackwards=i,ct.rendering=null,ct.renderingStartTime=0,ct.last=_,ct.tail=s,ct.tailMode=_e)}function xj$1(o,i,s){var _=i.pendingProps,_e=_.revealOrder,ct=_.tail;if(Xi$1(o,i,_.children,s),_=L.current,_&2)_=_&1|2,i.flags|=128;else{if(o!==null&&o.flags&128)e:for(o=i.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&vj$1(o,s,i);else if(o.tag===19)vj$1(o,s,i);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break e;for(;o.sibling===null;){if(o.return===null||o.return===i)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}_&=1}if(G$4(L,_),!(i.mode&1))i.memoizedState=null;else switch(_e){case"forwards":for(s=i.child,_e=null;s!==null;)o=s.alternate,o!==null&&Ch$1(o)===null&&(_e=s),s=s.sibling;s=_e,s===null?(_e=i.child,i.child=null):(_e=s.sibling,s.sibling=null),wj$1(i,!1,_e,s,ct);break;case"backwards":for(s=null,_e=i.child,i.child=null;_e!==null;){if(o=_e.alternate,o!==null&&Ch$1(o)===null){i.child=_e;break}o=_e.sibling,_e.sibling=s,s=_e,_e=o}wj$1(i,!0,s,null,ct);break;case"together":wj$1(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function ij$1(o,i){!(i.mode&1)&&o!==null&&(o.alternate=null,i.alternate=null,i.flags|=2)}function Zi$1(o,i,s){if(o!==null&&(i.dependencies=o.dependencies),rh$1|=i.lanes,!(s&i.childLanes))return null;if(o!==null&&i.child!==o.child)throw Error(p$2(153));if(i.child!==null){for(o=i.child,s=Pg$1(o,o.pendingProps),i.child=s,s.return=i;o.sibling!==null;)o=o.sibling,s=s.sibling=Pg$1(o,o.pendingProps),s.return=i;s.sibling=null}return i.child}function yj$1(o,i,s){switch(i.tag){case 3:kj$1(i),Ig$1();break;case 5:Ah$1(i);break;case 1:Zf$1(i.type)&&cg$1(i);break;case 4:yh$1(i,i.stateNode.containerInfo);break;case 10:var _=i.type._context,_e=i.memoizedProps.value;G$4(Wg,_._currentValue),_._currentValue=_e;break;case 13:if(_=i.memoizedState,_!==null)return _.dehydrated!==null?(G$4(L,L.current&1),i.flags|=128,null):s&i.child.childLanes?oj$1(o,i,s):(G$4(L,L.current&1),o=Zi$1(o,i,s),o!==null?o.sibling:null);G$4(L,L.current&1);break;case 19:if(_=(s&i.childLanes)!==0,o.flags&128){if(_)return xj$1(o,i,s);i.flags|=128}if(_e=i.memoizedState,_e!==null&&(_e.rendering=null,_e.tail=null,_e.lastEffect=null),G$4(L,L.current),_)break;return null;case 22:case 23:return i.lanes=0,dj$1(o,i,s)}return Zi$1(o,i,s)}var zj$1,Aj$1,Bj$1,Cj$1;zj$1=function(o,i){for(var s=i.child;s!==null;){if(s.tag===5||s.tag===6)o.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};Aj$1=function(){};Bj$1=function(o,i,s,_){var _e=o.memoizedProps;if(_e!==_){o=i.stateNode,xh$1(uh$1.current);var ct=null;switch(s){case"input":_e=Ya$1(o,_e),_=Ya$1(o,_),ct=[];break;case"select":_e=A$2({},_e,{value:void 0}),_=A$2({},_,{value:void 0}),ct=[];break;case"textarea":_e=gb(o,_e),_=gb(o,_),ct=[];break;default:typeof _e.onClick!="function"&&typeof _.onClick=="function"&&(o.onclick=Bf$1)}ub(s,_);var Mt;s=null;for(Xt in _e)if(!_.hasOwnProperty(Xt)&&_e.hasOwnProperty(Xt)&&_e[Xt]!=null)if(Xt==="style"){var Ft=_e[Xt];for(Mt in Ft)Ft.hasOwnProperty(Mt)&&(s||(s={}),s[Mt]="")}else Xt!=="dangerouslySetInnerHTML"&&Xt!=="children"&&Xt!=="suppressContentEditableWarning"&&Xt!=="suppressHydrationWarning"&&Xt!=="autoFocus"&&(ea$1.hasOwnProperty(Xt)?ct||(ct=[]):(ct=ct||[]).push(Xt,null));for(Xt in _){var Ut=_[Xt];if(Ft=_e!=null?_e[Xt]:void 0,_.hasOwnProperty(Xt)&&Ut!==Ft&&(Ut!=null||Ft!=null))if(Xt==="style")if(Ft){for(Mt in Ft)!Ft.hasOwnProperty(Mt)||Ut&&Ut.hasOwnProperty(Mt)||(s||(s={}),s[Mt]="");for(Mt in Ut)Ut.hasOwnProperty(Mt)&&Ft[Mt]!==Ut[Mt]&&(s||(s={}),s[Mt]=Ut[Mt])}else s||(ct||(ct=[]),ct.push(Xt,s)),s=Ut;else Xt==="dangerouslySetInnerHTML"?(Ut=Ut?Ut.__html:void 0,Ft=Ft?Ft.__html:void 0,Ut!=null&&Ft!==Ut&&(ct=ct||[]).push(Xt,Ut)):Xt==="children"?typeof Ut!="string"&&typeof Ut!="number"||(ct=ct||[]).push(Xt,""+Ut):Xt!=="suppressContentEditableWarning"&&Xt!=="suppressHydrationWarning"&&(ea$1.hasOwnProperty(Xt)?(Ut!=null&&Xt==="onScroll"&&D$3("scroll",o),ct||Ft===Ut||(ct=[])):(ct=ct||[]).push(Xt,Ut))}s&&(ct=ct||[]).push("style",s);var Xt=ct;(i.updateQueue=Xt)&&(i.flags|=4)}};Cj$1=function(o,i,s,_){s!==_&&(i.flags|=4)};function Dj$1(o,i){if(!I$1)switch(o.tailMode){case"hidden":i=o.tail;for(var s=null;i!==null;)i.alternate!==null&&(s=i),i=i.sibling;s===null?o.tail=null:s.sibling=null;break;case"collapsed":s=o.tail;for(var _=null;s!==null;)s.alternate!==null&&(_=s),s=s.sibling;_===null?i||o.tail===null?o.tail=null:o.tail.sibling=null:_.sibling=null}}function S(o){var i=o.alternate!==null&&o.alternate.child===o.child,s=0,_=0;if(i)for(var _e=o.child;_e!==null;)s|=_e.lanes|_e.childLanes,_|=_e.subtreeFlags&14680064,_|=_e.flags&14680064,_e.return=o,_e=_e.sibling;else for(_e=o.child;_e!==null;)s|=_e.lanes|_e.childLanes,_|=_e.subtreeFlags,_|=_e.flags,_e.return=o,_e=_e.sibling;return o.subtreeFlags|=_,o.childLanes=s,i}function Ej$1(o,i,s){var _=i.pendingProps;switch(wg$1(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S(i),null;case 1:return Zf$1(i.type)&&$f$1(),S(i),null;case 3:return _=i.stateNode,zh$1(),E$1(Wf$1),E$1(H$3),Eh$1(),_.pendingContext&&(_.context=_.pendingContext,_.pendingContext=null),(o===null||o.child===null)&&(Gg$1(i)?i.flags|=4:o===null||o.memoizedState.isDehydrated&&!(i.flags&256)||(i.flags|=1024,zg$1!==null&&(Fj$1(zg$1),zg$1=null))),Aj$1(o,i),S(i),null;case 5:Bh$1(i);var _e=xh$1(wh$1.current);if(s=i.type,o!==null&&i.stateNode!=null)Bj$1(o,i,s,_,_e),o.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!_){if(i.stateNode===null)throw Error(p$2(166));return S(i),null}if(o=xh$1(uh$1.current),Gg$1(i)){_=i.stateNode,s=i.type;var ct=i.memoizedProps;switch(_[Of$1]=i,_[Pf$1]=ct,o=(i.mode&1)!==0,s){case"dialog":D$3("cancel",_),D$3("close",_);break;case"iframe":case"object":case"embed":D$3("load",_);break;case"video":case"audio":for(_e=0;_e<lf$1.length;_e++)D$3(lf$1[_e],_);break;case"source":D$3("error",_);break;case"img":case"image":case"link":D$3("error",_),D$3("load",_);break;case"details":D$3("toggle",_);break;case"input":Za$1(_,ct),D$3("invalid",_);break;case"select":_._wrapperState={wasMultiple:!!ct.multiple},D$3("invalid",_);break;case"textarea":hb(_,ct),D$3("invalid",_)}ub(s,ct),_e=null;for(var Mt in ct)if(ct.hasOwnProperty(Mt)){var Ft=ct[Mt];Mt==="children"?typeof Ft=="string"?_.textContent!==Ft&&(ct.suppressHydrationWarning!==!0&&Af$1(_.textContent,Ft,o),_e=["children",Ft]):typeof Ft=="number"&&_.textContent!==""+Ft&&(ct.suppressHydrationWarning!==!0&&Af$1(_.textContent,Ft,o),_e=["children",""+Ft]):ea$1.hasOwnProperty(Mt)&&Ft!=null&&Mt==="onScroll"&&D$3("scroll",_)}switch(s){case"input":Va(_),db(_,ct,!0);break;case"textarea":Va(_),jb(_);break;case"select":case"option":break;default:typeof ct.onClick=="function"&&(_.onclick=Bf$1)}_=_e,i.updateQueue=_,_!==null&&(i.flags|=4)}else{Mt=_e.nodeType===9?_e:_e.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=kb(s)),o==="http://www.w3.org/1999/xhtml"?s==="script"?(o=Mt.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof _.is=="string"?o=Mt.createElement(s,{is:_.is}):(o=Mt.createElement(s),s==="select"&&(Mt=o,_.multiple?Mt.multiple=!0:_.size&&(Mt.size=_.size))):o=Mt.createElementNS(o,s),o[Of$1]=i,o[Pf$1]=_,zj$1(o,i,!1,!1),i.stateNode=o;e:{switch(Mt=vb(s,_),s){case"dialog":D$3("cancel",o),D$3("close",o),_e=_;break;case"iframe":case"object":case"embed":D$3("load",o),_e=_;break;case"video":case"audio":for(_e=0;_e<lf$1.length;_e++)D$3(lf$1[_e],o);_e=_;break;case"source":D$3("error",o),_e=_;break;case"img":case"image":case"link":D$3("error",o),D$3("load",o),_e=_;break;case"details":D$3("toggle",o),_e=_;break;case"input":Za$1(o,_),_e=Ya$1(o,_),D$3("invalid",o);break;case"option":_e=_;break;case"select":o._wrapperState={wasMultiple:!!_.multiple},_e=A$2({},_,{value:void 0}),D$3("invalid",o);break;case"textarea":hb(o,_),_e=gb(o,_),D$3("invalid",o);break;default:_e=_}ub(s,_e),Ft=_e;for(ct in Ft)if(Ft.hasOwnProperty(ct)){var Ut=Ft[ct];ct==="style"?sb(o,Ut):ct==="dangerouslySetInnerHTML"?(Ut=Ut?Ut.__html:void 0,Ut!=null&&nb(o,Ut)):ct==="children"?typeof Ut=="string"?(s!=="textarea"||Ut!=="")&&ob(o,Ut):typeof Ut=="number"&&ob(o,""+Ut):ct!=="suppressContentEditableWarning"&&ct!=="suppressHydrationWarning"&&ct!=="autoFocus"&&(ea$1.hasOwnProperty(ct)?Ut!=null&&ct==="onScroll"&&D$3("scroll",o):Ut!=null&&ta$1(o,ct,Ut,Mt))}switch(s){case"input":Va(o),db(o,_,!1);break;case"textarea":Va(o),jb(o);break;case"option":_.value!=null&&o.setAttribute("value",""+Sa$1(_.value));break;case"select":o.multiple=!!_.multiple,ct=_.value,ct!=null?fb(o,!!_.multiple,ct,!1):_.defaultValue!=null&&fb(o,!!_.multiple,_.defaultValue,!0);break;default:typeof _e.onClick=="function"&&(o.onclick=Bf$1)}switch(s){case"button":case"input":case"select":case"textarea":_=!!_.autoFocus;break e;case"img":_=!0;break e;default:_=!1}}_&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return S(i),null;case 6:if(o&&i.stateNode!=null)Cj$1(o,i,o.memoizedProps,_);else{if(typeof _!="string"&&i.stateNode===null)throw Error(p$2(166));if(s=xh$1(wh$1.current),xh$1(uh$1.current),Gg$1(i)){if(_=i.stateNode,s=i.memoizedProps,_[Of$1]=i,(ct=_.nodeValue!==s)&&(o=xg$1,o!==null))switch(o.tag){case 3:Af$1(_.nodeValue,s,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&Af$1(_.nodeValue,s,(o.mode&1)!==0)}ct&&(i.flags|=4)}else _=(s.nodeType===9?s:s.ownerDocument).createTextNode(_),_[Of$1]=i,i.stateNode=_}return S(i),null;case 13:if(E$1(L),_=i.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(I$1&&yg$1!==null&&i.mode&1&&!(i.flags&128))Hg$1(),Ig$1(),i.flags|=98560,ct=!1;else if(ct=Gg$1(i),_!==null&&_.dehydrated!==null){if(o===null){if(!ct)throw Error(p$2(318));if(ct=i.memoizedState,ct=ct!==null?ct.dehydrated:null,!ct)throw Error(p$2(317));ct[Of$1]=i}else Ig$1(),!(i.flags&128)&&(i.memoizedState=null),i.flags|=4;S(i),ct=!1}else zg$1!==null&&(Fj$1(zg$1),zg$1=null),ct=!0;if(!ct)return i.flags&65536?i:null}return i.flags&128?(i.lanes=s,i):(_=_!==null,_!==(o!==null&&o.memoizedState!==null)&&_&&(i.child.flags|=8192,i.mode&1&&(o===null||L.current&1?T$2===0&&(T$2=3):tj$1())),i.updateQueue!==null&&(i.flags|=4),S(i),null);case 4:return zh$1(),Aj$1(o,i),o===null&&sf$1(i.stateNode.containerInfo),S(i),null;case 10:return ah$1(i.type._context),S(i),null;case 17:return Zf$1(i.type)&&$f$1(),S(i),null;case 19:if(E$1(L),ct=i.memoizedState,ct===null)return S(i),null;if(_=(i.flags&128)!==0,Mt=ct.rendering,Mt===null)if(_)Dj$1(ct,!1);else{if(T$2!==0||o!==null&&o.flags&128)for(o=i.child;o!==null;){if(Mt=Ch$1(o),Mt!==null){for(i.flags|=128,Dj$1(ct,!1),_=Mt.updateQueue,_!==null&&(i.updateQueue=_,i.flags|=4),i.subtreeFlags=0,_=s,s=i.child;s!==null;)ct=s,o=_,ct.flags&=14680066,Mt=ct.alternate,Mt===null?(ct.childLanes=0,ct.lanes=o,ct.child=null,ct.subtreeFlags=0,ct.memoizedProps=null,ct.memoizedState=null,ct.updateQueue=null,ct.dependencies=null,ct.stateNode=null):(ct.childLanes=Mt.childLanes,ct.lanes=Mt.lanes,ct.child=Mt.child,ct.subtreeFlags=0,ct.deletions=null,ct.memoizedProps=Mt.memoizedProps,ct.memoizedState=Mt.memoizedState,ct.updateQueue=Mt.updateQueue,ct.type=Mt.type,o=Mt.dependencies,ct.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),s=s.sibling;return G$4(L,L.current&1|2),i.child}o=o.sibling}ct.tail!==null&&B$2()>Gj$1&&(i.flags|=128,_=!0,Dj$1(ct,!1),i.lanes=4194304)}else{if(!_)if(o=Ch$1(Mt),o!==null){if(i.flags|=128,_=!0,s=o.updateQueue,s!==null&&(i.updateQueue=s,i.flags|=4),Dj$1(ct,!0),ct.tail===null&&ct.tailMode==="hidden"&&!Mt.alternate&&!I$1)return S(i),null}else 2*B$2()-ct.renderingStartTime>Gj$1&&s!==1073741824&&(i.flags|=128,_=!0,Dj$1(ct,!1),i.lanes=4194304);ct.isBackwards?(Mt.sibling=i.child,i.child=Mt):(s=ct.last,s!==null?s.sibling=Mt:i.child=Mt,ct.last=Mt)}return ct.tail!==null?(i=ct.tail,ct.rendering=i,ct.tail=i.sibling,ct.renderingStartTime=B$2(),i.sibling=null,s=L.current,G$4(L,_?s&1|2:s&1),i):(S(i),null);case 22:case 23:return Hj$1(),_=i.memoizedState!==null,o!==null&&o.memoizedState!==null!==_&&(i.flags|=8192),_&&i.mode&1?fj$1&1073741824&&(S(i),i.subtreeFlags&6&&(i.flags|=8192)):S(i),null;case 24:return null;case 25:return null}throw Error(p$2(156,i.tag))}function Ij$1(o,i){switch(wg$1(i),i.tag){case 1:return Zf$1(i.type)&&$f$1(),o=i.flags,o&65536?(i.flags=o&-65537|128,i):null;case 3:return zh$1(),E$1(Wf$1),E$1(H$3),Eh$1(),o=i.flags,o&65536&&!(o&128)?(i.flags=o&-65537|128,i):null;case 5:return Bh$1(i),null;case 13:if(E$1(L),o=i.memoizedState,o!==null&&o.dehydrated!==null){if(i.alternate===null)throw Error(p$2(340));Ig$1()}return o=i.flags,o&65536?(i.flags=o&-65537|128,i):null;case 19:return E$1(L),null;case 4:return zh$1(),null;case 10:return ah$1(i.type._context),null;case 22:case 23:return Hj$1(),null;case 24:return null;default:return null}}var Jj$1=!1,U$2=!1,Kj$1=typeof WeakSet=="function"?WeakSet:Set,V$1=null;function Lj$1(o,i){var s=o.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(_){W$2(o,i,_)}else s.current=null}function Mj$1(o,i,s){try{s()}catch(_){W$2(o,i,_)}}var Nj$1=!1;function Oj$1(o,i){if(Cf$1=dd$1,o=Me$1(),Ne(o)){if("selectionStart"in o)var s={start:o.selectionStart,end:o.selectionEnd};else e:{s=(s=o.ownerDocument)&&s.defaultView||window;var _=s.getSelection&&s.getSelection();if(_&&_.rangeCount!==0){s=_.anchorNode;var _e=_.anchorOffset,ct=_.focusNode;_=_.focusOffset;try{s.nodeType,ct.nodeType}catch{s=null;break e}var Mt=0,Ft=-1,Ut=-1,Xt=0,Kt=0,nr=o,rr=null;t:for(;;){for(var or;nr!==s||_e!==0&&nr.nodeType!==3||(Ft=Mt+_e),nr!==ct||_!==0&&nr.nodeType!==3||(Ut=Mt+_),nr.nodeType===3&&(Mt+=nr.nodeValue.length),(or=nr.firstChild)!==null;)rr=nr,nr=or;for(;;){if(nr===o)break t;if(rr===s&&++Xt===_e&&(Ft=Mt),rr===ct&&++Kt===_&&(Ut=Mt),(or=nr.nextSibling)!==null)break;nr=rr,rr=nr.parentNode}nr=or}s=Ft===-1||Ut===-1?null:{start:Ft,end:Ut}}else s=null}s=s||{start:0,end:0}}else s=null;for(Df$1={focusedElem:o,selectionRange:s},dd$1=!1,V$1=i;V$1!==null;)if(i=V$1,o=i.child,(i.subtreeFlags&1028)!==0&&o!==null)o.return=i,V$1=o;else for(;V$1!==null;){i=V$1;try{var hr=i.alternate;if(i.flags&1024)switch(i.tag){case 0:case 11:case 15:break;case 1:if(hr!==null){var fr=hr.memoizedProps,yr=hr.memoizedState,Lr=i.stateNode,Br=Lr.getSnapshotBeforeUpdate(i.elementType===i.type?fr:Ci$1(i.type,fr),yr);Lr.__reactInternalSnapshotBeforeUpdate=Br}break;case 3:var Vr=i.stateNode.containerInfo;Vr.nodeType===1?Vr.textContent="":Vr.nodeType===9&&Vr.documentElement&&Vr.removeChild(Vr.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$2(163))}}catch(Wr){W$2(i,i.return,Wr)}if(o=i.sibling,o!==null){o.return=i.return,V$1=o;break}V$1=i.return}return hr=Nj$1,Nj$1=!1,hr}function Pj$1(o,i,s){var _=i.updateQueue;if(_=_!==null?_.lastEffect:null,_!==null){var _e=_=_.next;do{if((_e.tag&o)===o){var ct=_e.destroy;_e.destroy=void 0,ct!==void 0&&Mj$1(i,s,ct)}_e=_e.next}while(_e!==_)}}function Qj$1(o,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&o)===o){var _=s.create;s.destroy=_()}s=s.next}while(s!==i)}}function Rj$1(o){var i=o.ref;if(i!==null){var s=o.stateNode;switch(o.tag){case 5:o=s;break;default:o=s}typeof i=="function"?i(o):i.current=o}}function Sj$1(o){var i=o.alternate;i!==null&&(o.alternate=null,Sj$1(i)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(i=o.stateNode,i!==null&&(delete i[Of$1],delete i[Pf$1],delete i[of$1],delete i[Qf$1],delete i[Rf$1])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function Tj$1(o){return o.tag===5||o.tag===3||o.tag===4}function Uj$1(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||Tj$1(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Vj$1(o,i,s){var _=o.tag;if(_===5||_===6)o=o.stateNode,i?s.nodeType===8?s.parentNode.insertBefore(o,i):s.insertBefore(o,i):(s.nodeType===8?(i=s.parentNode,i.insertBefore(o,s)):(i=s,i.appendChild(o)),s=s._reactRootContainer,s!=null||i.onclick!==null||(i.onclick=Bf$1));else if(_!==4&&(o=o.child,o!==null))for(Vj$1(o,i,s),o=o.sibling;o!==null;)Vj$1(o,i,s),o=o.sibling}function Wj$1(o,i,s){var _=o.tag;if(_===5||_===6)o=o.stateNode,i?s.insertBefore(o,i):s.appendChild(o);else if(_!==4&&(o=o.child,o!==null))for(Wj$1(o,i,s),o=o.sibling;o!==null;)Wj$1(o,i,s),o=o.sibling}var X$4=null,Xj$1=!1;function Yj$1(o,i,s){for(s=s.child;s!==null;)Zj$1(o,i,s),s=s.sibling}function Zj$1(o,i,s){if(lc$1&&typeof lc$1.onCommitFiberUnmount=="function")try{lc$1.onCommitFiberUnmount(kc$1,s)}catch{}switch(s.tag){case 5:U$2||Lj$1(s,i);case 6:var _=X$4,_e=Xj$1;X$4=null,Yj$1(o,i,s),X$4=_,Xj$1=_e,X$4!==null&&(Xj$1?(o=X$4,s=s.stateNode,o.nodeType===8?o.parentNode.removeChild(s):o.removeChild(s)):X$4.removeChild(s.stateNode));break;case 18:X$4!==null&&(Xj$1?(o=X$4,s=s.stateNode,o.nodeType===8?Kf$1(o.parentNode,s):o.nodeType===1&&Kf$1(o,s),bd$1(o)):Kf$1(X$4,s.stateNode));break;case 4:_=X$4,_e=Xj$1,X$4=s.stateNode.containerInfo,Xj$1=!0,Yj$1(o,i,s),X$4=_,Xj$1=_e;break;case 0:case 11:case 14:case 15:if(!U$2&&(_=s.updateQueue,_!==null&&(_=_.lastEffect,_!==null))){_e=_=_.next;do{var ct=_e,Mt=ct.destroy;ct=ct.tag,Mt!==void 0&&(ct&2||ct&4)&&Mj$1(s,i,Mt),_e=_e.next}while(_e!==_)}Yj$1(o,i,s);break;case 1:if(!U$2&&(Lj$1(s,i),_=s.stateNode,typeof _.componentWillUnmount=="function"))try{_.props=s.memoizedProps,_.state=s.memoizedState,_.componentWillUnmount()}catch(Ft){W$2(s,i,Ft)}Yj$1(o,i,s);break;case 21:Yj$1(o,i,s);break;case 22:s.mode&1?(U$2=(_=U$2)||s.memoizedState!==null,Yj$1(o,i,s),U$2=_):Yj$1(o,i,s);break;default:Yj$1(o,i,s)}}function ak$1(o){var i=o.updateQueue;if(i!==null){o.updateQueue=null;var s=o.stateNode;s===null&&(s=o.stateNode=new Kj$1),i.forEach(function(_){var _e=bk$1.bind(null,o,_);s.has(_)||(s.add(_),_.then(_e,_e))})}}function ck$1(o,i){var s=i.deletions;if(s!==null)for(var _=0;_<s.length;_++){var _e=s[_];try{var ct=o,Mt=i,Ft=Mt;e:for(;Ft!==null;){switch(Ft.tag){case 5:X$4=Ft.stateNode,Xj$1=!1;break e;case 3:X$4=Ft.stateNode.containerInfo,Xj$1=!0;break e;case 4:X$4=Ft.stateNode.containerInfo,Xj$1=!0;break e}Ft=Ft.return}if(X$4===null)throw Error(p$2(160));Zj$1(ct,Mt,_e),X$4=null,Xj$1=!1;var Ut=_e.alternate;Ut!==null&&(Ut.return=null),_e.return=null}catch(Xt){W$2(_e,i,Xt)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)dk$1(i,o),i=i.sibling}function dk$1(o,i){var s=o.alternate,_=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(ck$1(i,o),ek(o),_&4){try{Pj$1(3,o,o.return),Qj$1(3,o)}catch(fr){W$2(o,o.return,fr)}try{Pj$1(5,o,o.return)}catch(fr){W$2(o,o.return,fr)}}break;case 1:ck$1(i,o),ek(o),_&512&&s!==null&&Lj$1(s,s.return);break;case 5:if(ck$1(i,o),ek(o),_&512&&s!==null&&Lj$1(s,s.return),o.flags&32){var _e=o.stateNode;try{ob(_e,"")}catch(fr){W$2(o,o.return,fr)}}if(_&4&&(_e=o.stateNode,_e!=null)){var ct=o.memoizedProps,Mt=s!==null?s.memoizedProps:ct,Ft=o.type,Ut=o.updateQueue;if(o.updateQueue=null,Ut!==null)try{Ft==="input"&&ct.type==="radio"&&ct.name!=null&&ab(_e,ct),vb(Ft,Mt);var Xt=vb(Ft,ct);for(Mt=0;Mt<Ut.length;Mt+=2){var Kt=Ut[Mt],nr=Ut[Mt+1];Kt==="style"?sb(_e,nr):Kt==="dangerouslySetInnerHTML"?nb(_e,nr):Kt==="children"?ob(_e,nr):ta$1(_e,Kt,nr,Xt)}switch(Ft){case"input":bb(_e,ct);break;case"textarea":ib(_e,ct);break;case"select":var rr=_e._wrapperState.wasMultiple;_e._wrapperState.wasMultiple=!!ct.multiple;var or=ct.value;or!=null?fb(_e,!!ct.multiple,or,!1):rr!==!!ct.multiple&&(ct.defaultValue!=null?fb(_e,!!ct.multiple,ct.defaultValue,!0):fb(_e,!!ct.multiple,ct.multiple?[]:"",!1))}_e[Pf$1]=ct}catch(fr){W$2(o,o.return,fr)}}break;case 6:if(ck$1(i,o),ek(o),_&4){if(o.stateNode===null)throw Error(p$2(162));_e=o.stateNode,ct=o.memoizedProps;try{_e.nodeValue=ct}catch(fr){W$2(o,o.return,fr)}}break;case 3:if(ck$1(i,o),ek(o),_&4&&s!==null&&s.memoizedState.isDehydrated)try{bd$1(i.containerInfo)}catch(fr){W$2(o,o.return,fr)}break;case 4:ck$1(i,o),ek(o);break;case 13:ck$1(i,o),ek(o),_e=o.child,_e.flags&8192&&(ct=_e.memoizedState!==null,_e.stateNode.isHidden=ct,!ct||_e.alternate!==null&&_e.alternate.memoizedState!==null||(fk$1=B$2())),_&4&&ak$1(o);break;case 22:if(Kt=s!==null&&s.memoizedState!==null,o.mode&1?(U$2=(Xt=U$2)||Kt,ck$1(i,o),U$2=Xt):ck$1(i,o),ek(o),_&8192){if(Xt=o.memoizedState!==null,(o.stateNode.isHidden=Xt)&&!Kt&&o.mode&1)for(V$1=o,Kt=o.child;Kt!==null;){for(nr=V$1=Kt;V$1!==null;){switch(rr=V$1,or=rr.child,rr.tag){case 0:case 11:case 14:case 15:Pj$1(4,rr,rr.return);break;case 1:Lj$1(rr,rr.return);var hr=rr.stateNode;if(typeof hr.componentWillUnmount=="function"){_=rr,s=rr.return;try{i=_,hr.props=i.memoizedProps,hr.state=i.memoizedState,hr.componentWillUnmount()}catch(fr){W$2(_,s,fr)}}break;case 5:Lj$1(rr,rr.return);break;case 22:if(rr.memoizedState!==null){gk$1(nr);continue}}or!==null?(or.return=rr,V$1=or):gk$1(nr)}Kt=Kt.sibling}e:for(Kt=null,nr=o;;){if(nr.tag===5){if(Kt===null){Kt=nr;try{_e=nr.stateNode,Xt?(ct=_e.style,typeof ct.setProperty=="function"?ct.setProperty("display","none","important"):ct.display="none"):(Ft=nr.stateNode,Ut=nr.memoizedProps.style,Mt=Ut!=null&&Ut.hasOwnProperty("display")?Ut.display:null,Ft.style.display=rb("display",Mt))}catch(fr){W$2(o,o.return,fr)}}}else if(nr.tag===6){if(Kt===null)try{nr.stateNode.nodeValue=Xt?"":nr.memoizedProps}catch(fr){W$2(o,o.return,fr)}}else if((nr.tag!==22&&nr.tag!==23||nr.memoizedState===null||nr===o)&&nr.child!==null){nr.child.return=nr,nr=nr.child;continue}if(nr===o)break e;for(;nr.sibling===null;){if(nr.return===null||nr.return===o)break e;Kt===nr&&(Kt=null),nr=nr.return}Kt===nr&&(Kt=null),nr.sibling.return=nr.return,nr=nr.sibling}}break;case 19:ck$1(i,o),ek(o),_&4&&ak$1(o);break;case 21:break;default:ck$1(i,o),ek(o)}}function ek(o){var i=o.flags;if(i&2){try{e:{for(var s=o.return;s!==null;){if(Tj$1(s)){var _=s;break e}s=s.return}throw Error(p$2(160))}switch(_.tag){case 5:var _e=_.stateNode;_.flags&32&&(ob(_e,""),_.flags&=-33);var ct=Uj$1(o);Wj$1(o,ct,_e);break;case 3:case 4:var Mt=_.stateNode.containerInfo,Ft=Uj$1(o);Vj$1(o,Ft,Mt);break;default:throw Error(p$2(161))}}catch(Ut){W$2(o,o.return,Ut)}o.flags&=-3}i&4096&&(o.flags&=-4097)}function hk$1(o,i,s){V$1=o,ik$1(o)}function ik$1(o,i,s){for(var _=(o.mode&1)!==0;V$1!==null;){var _e=V$1,ct=_e.child;if(_e.tag===22&&_){var Mt=_e.memoizedState!==null||Jj$1;if(!Mt){var Ft=_e.alternate,Ut=Ft!==null&&Ft.memoizedState!==null||U$2;Ft=Jj$1;var Xt=U$2;if(Jj$1=Mt,(U$2=Ut)&&!Xt)for(V$1=_e;V$1!==null;)Mt=V$1,Ut=Mt.child,Mt.tag===22&&Mt.memoizedState!==null?jk$1(_e):Ut!==null?(Ut.return=Mt,V$1=Ut):jk$1(_e);for(;ct!==null;)V$1=ct,ik$1(ct),ct=ct.sibling;V$1=_e,Jj$1=Ft,U$2=Xt}kk$1(o)}else _e.subtreeFlags&8772&&ct!==null?(ct.return=_e,V$1=ct):kk$1(o)}}function kk$1(o){for(;V$1!==null;){var i=V$1;if(i.flags&8772){var s=i.alternate;try{if(i.flags&8772)switch(i.tag){case 0:case 11:case 15:U$2||Qj$1(5,i);break;case 1:var _=i.stateNode;if(i.flags&4&&!U$2)if(s===null)_.componentDidMount();else{var _e=i.elementType===i.type?s.memoizedProps:Ci$1(i.type,s.memoizedProps);_.componentDidUpdate(_e,s.memoizedState,_.__reactInternalSnapshotBeforeUpdate)}var ct=i.updateQueue;ct!==null&&sh$1(i,ct,_);break;case 3:var Mt=i.updateQueue;if(Mt!==null){if(s=null,i.child!==null)switch(i.child.tag){case 5:s=i.child.stateNode;break;case 1:s=i.child.stateNode}sh$1(i,Mt,s)}break;case 5:var Ft=i.stateNode;if(s===null&&i.flags&4){s=Ft;var Ut=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":Ut.autoFocus&&s.focus();break;case"img":Ut.src&&(s.src=Ut.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var Xt=i.alternate;if(Xt!==null){var Kt=Xt.memoizedState;if(Kt!==null){var nr=Kt.dehydrated;nr!==null&&bd$1(nr)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$2(163))}U$2||i.flags&512&&Rj$1(i)}catch(rr){W$2(i,i.return,rr)}}if(i===o){V$1=null;break}if(s=i.sibling,s!==null){s.return=i.return,V$1=s;break}V$1=i.return}}function gk$1(o){for(;V$1!==null;){var i=V$1;if(i===o){V$1=null;break}var s=i.sibling;if(s!==null){s.return=i.return,V$1=s;break}V$1=i.return}}function jk$1(o){for(;V$1!==null;){var i=V$1;try{switch(i.tag){case 0:case 11:case 15:var s=i.return;try{Qj$1(4,i)}catch(Ut){W$2(i,s,Ut)}break;case 1:var _=i.stateNode;if(typeof _.componentDidMount=="function"){var _e=i.return;try{_.componentDidMount()}catch(Ut){W$2(i,_e,Ut)}}var ct=i.return;try{Rj$1(i)}catch(Ut){W$2(i,ct,Ut)}break;case 5:var Mt=i.return;try{Rj$1(i)}catch(Ut){W$2(i,Mt,Ut)}}}catch(Ut){W$2(i,i.return,Ut)}if(i===o){V$1=null;break}var Ft=i.sibling;if(Ft!==null){Ft.return=i.return,V$1=Ft;break}V$1=i.return}}var lk$1=Math.ceil,mk$1=ua$1.ReactCurrentDispatcher,nk$1=ua$1.ReactCurrentOwner,ok$1=ua$1.ReactCurrentBatchConfig,K$1=0,Q$2=null,Y$3=null,Z$2=0,fj$1=0,ej$1=Uf$1(0),T$2=0,pk$1=null,rh$1=0,qk$1=0,rk$1=0,sk$1=null,tk$1=null,fk$1=0,Gj$1=1/0,uk$1=null,Oi$1=!1,Pi$1=null,Ri$1=null,vk$1=!1,wk$1=null,xk$1=0,yk$1=0,zk$1=null,Ak$1=-1,Bk$1=0;function R(){return K$1&6?B$2():Ak$1!==-1?Ak$1:Ak$1=B$2()}function yi$1(o){return o.mode&1?K$1&2&&Z$2!==0?Z$2&-Z$2:Kg$1.transition!==null?(Bk$1===0&&(Bk$1=yc$1()),Bk$1):(o=C,o!==0||(o=window.event,o=o===void 0?16:jd$1(o.type)),o):1}function gi$1(o,i,s,_){if(50<yk$1)throw yk$1=0,zk$1=null,Error(p$2(185));Ac$1(o,s,_),(!(K$1&2)||o!==Q$2)&&(o===Q$2&&(!(K$1&2)&&(qk$1|=s),T$2===4&&Ck$1(o,Z$2)),Dk$1(o,_),s===1&&K$1===0&&!(i.mode&1)&&(Gj$1=B$2()+500,fg$1&&jg$1()))}function Dk$1(o,i){var s=o.callbackNode;wc$1(o,i);var _=uc$1(o,o===Q$2?Z$2:0);if(_===0)s!==null&&bc$1(s),o.callbackNode=null,o.callbackPriority=0;else if(i=_&-_,o.callbackPriority!==i){if(s!=null&&bc$1(s),i===1)o.tag===0?ig$1(Ek$1.bind(null,o)):hg$1(Ek$1.bind(null,o)),Jf$1(function(){!(K$1&6)&&jg$1()}),s=null;else{switch(Dc(_)){case 1:s=fc$1;break;case 4:s=gc$1;break;case 16:s=hc$1;break;case 536870912:s=jc$1;break;default:s=hc$1}s=Fk$1(s,Gk$1.bind(null,o))}o.callbackPriority=i,o.callbackNode=s}}function Gk$1(o,i){if(Ak$1=-1,Bk$1=0,K$1&6)throw Error(p$2(327));var s=o.callbackNode;if(Hk$1()&&o.callbackNode!==s)return null;var _=uc$1(o,o===Q$2?Z$2:0);if(_===0)return null;if(_&30||_&o.expiredLanes||i)i=Ik$1(o,_);else{i=_;var _e=K$1;K$1|=2;var ct=Jk$1();(Q$2!==o||Z$2!==i)&&(uk$1=null,Gj$1=B$2()+500,Kk$1(o,i));do try{Lk$1();break}catch(Ft){Mk$1(o,Ft)}while(!0);$g$1(),mk$1.current=ct,K$1=_e,Y$3!==null?i=0:(Q$2=null,Z$2=0,i=T$2)}if(i!==0){if(i===2&&(_e=xc$1(o),_e!==0&&(_=_e,i=Nk$1(o,_e))),i===1)throw s=pk$1,Kk$1(o,0),Ck$1(o,_),Dk$1(o,B$2()),s;if(i===6)Ck$1(o,_);else{if(_e=o.current.alternate,!(_&30)&&!Ok$1(_e)&&(i=Ik$1(o,_),i===2&&(ct=xc$1(o),ct!==0&&(_=ct,i=Nk$1(o,ct))),i===1))throw s=pk$1,Kk$1(o,0),Ck$1(o,_),Dk$1(o,B$2()),s;switch(o.finishedWork=_e,o.finishedLanes=_,i){case 0:case 1:throw Error(p$2(345));case 2:Pk$1(o,tk$1,uk$1);break;case 3:if(Ck$1(o,_),(_&130023424)===_&&(i=fk$1+500-B$2(),10<i)){if(uc$1(o,0)!==0)break;if(_e=o.suspendedLanes,(_e&_)!==_){R(),o.pingedLanes|=o.suspendedLanes&_e;break}o.timeoutHandle=Ff$1(Pk$1.bind(null,o,tk$1,uk$1),i);break}Pk$1(o,tk$1,uk$1);break;case 4:if(Ck$1(o,_),(_&4194240)===_)break;for(i=o.eventTimes,_e=-1;0<_;){var Mt=31-oc$1(_);ct=1<<Mt,Mt=i[Mt],Mt>_e&&(_e=Mt),_&=~ct}if(_=_e,_=B$2()-_,_=(120>_?120:480>_?480:1080>_?1080:1920>_?1920:3e3>_?3e3:4320>_?4320:1960*lk$1(_/1960))-_,10<_){o.timeoutHandle=Ff$1(Pk$1.bind(null,o,tk$1,uk$1),_);break}Pk$1(o,tk$1,uk$1);break;case 5:Pk$1(o,tk$1,uk$1);break;default:throw Error(p$2(329))}}}return Dk$1(o,B$2()),o.callbackNode===s?Gk$1.bind(null,o):null}function Nk$1(o,i){var s=sk$1;return o.current.memoizedState.isDehydrated&&(Kk$1(o,i).flags|=256),o=Ik$1(o,i),o!==2&&(i=tk$1,tk$1=s,i!==null&&Fj$1(i)),o}function Fj$1(o){tk$1===null?tk$1=o:tk$1.push.apply(tk$1,o)}function Ok$1(o){for(var i=o;;){if(i.flags&16384){var s=i.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var _=0;_<s.length;_++){var _e=s[_],ct=_e.getSnapshot;_e=_e.value;try{if(!He$1(ct(),_e))return!1}catch{return!1}}}if(s=i.child,i.subtreeFlags&16384&&s!==null)s.return=i,i=s;else{if(i===o)break;for(;i.sibling===null;){if(i.return===null||i.return===o)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ck$1(o,i){for(i&=~rk$1,i&=~qk$1,o.suspendedLanes|=i,o.pingedLanes&=~i,o=o.expirationTimes;0<i;){var s=31-oc$1(i),_=1<<s;o[s]=-1,i&=~_}}function Ek$1(o){if(K$1&6)throw Error(p$2(327));Hk$1();var i=uc$1(o,0);if(!(i&1))return Dk$1(o,B$2()),null;var s=Ik$1(o,i);if(o.tag!==0&&s===2){var _=xc$1(o);_!==0&&(i=_,s=Nk$1(o,_))}if(s===1)throw s=pk$1,Kk$1(o,0),Ck$1(o,i),Dk$1(o,B$2()),s;if(s===6)throw Error(p$2(345));return o.finishedWork=o.current.alternate,o.finishedLanes=i,Pk$1(o,tk$1,uk$1),Dk$1(o,B$2()),null}function Qk$1(o,i){var s=K$1;K$1|=1;try{return o(i)}finally{K$1=s,K$1===0&&(Gj$1=B$2()+500,fg$1&&jg$1())}}function Rk$1(o){wk$1!==null&&wk$1.tag===0&&!(K$1&6)&&Hk$1();var i=K$1;K$1|=1;var s=ok$1.transition,_=C;try{if(ok$1.transition=null,C=1,o)return o()}finally{C=_,ok$1.transition=s,K$1=i,!(K$1&6)&&jg$1()}}function Hj$1(){fj$1=ej$1.current,E$1(ej$1)}function Kk$1(o,i){o.finishedWork=null,o.finishedLanes=0;var s=o.timeoutHandle;if(s!==-1&&(o.timeoutHandle=-1,Gf$1(s)),Y$3!==null)for(s=Y$3.return;s!==null;){var _=s;switch(wg$1(_),_.tag){case 1:_=_.type.childContextTypes,_!=null&&$f$1();break;case 3:zh$1(),E$1(Wf$1),E$1(H$3),Eh$1();break;case 5:Bh$1(_);break;case 4:zh$1();break;case 13:E$1(L);break;case 19:E$1(L);break;case 10:ah$1(_.type._context);break;case 22:case 23:Hj$1()}s=s.return}if(Q$2=o,Y$3=o=Pg$1(o.current,null),Z$2=fj$1=i,T$2=0,pk$1=null,rk$1=qk$1=rh$1=0,tk$1=sk$1=null,fh$1!==null){for(i=0;i<fh$1.length;i++)if(s=fh$1[i],_=s.interleaved,_!==null){s.interleaved=null;var _e=_.next,ct=s.pending;if(ct!==null){var Mt=ct.next;ct.next=_e,_.next=Mt}s.pending=_}fh$1=null}return o}function Mk$1(o,i){do{var s=Y$3;try{if($g$1(),Fh$1.current=Rh$1,Ih$1){for(var _=M$1.memoizedState;_!==null;){var _e=_.queue;_e!==null&&(_e.pending=null),_=_.next}Ih$1=!1}if(Hh$1=0,O=N$2=M$1=null,Jh$1=!1,Kh$1=0,nk$1.current=null,s===null||s.return===null){T$2=1,pk$1=i,Y$3=null;break}e:{var ct=o,Mt=s.return,Ft=s,Ut=i;if(i=Z$2,Ft.flags|=32768,Ut!==null&&typeof Ut=="object"&&typeof Ut.then=="function"){var Xt=Ut,Kt=Ft,nr=Kt.tag;if(!(Kt.mode&1)&&(nr===0||nr===11||nr===15)){var rr=Kt.alternate;rr?(Kt.updateQueue=rr.updateQueue,Kt.memoizedState=rr.memoizedState,Kt.lanes=rr.lanes):(Kt.updateQueue=null,Kt.memoizedState=null)}var or=Ui$1(Mt);if(or!==null){or.flags&=-257,Vi$1(or,Mt,Ft,ct,i),or.mode&1&&Si$1(ct,Xt,i),i=or,Ut=Xt;var hr=i.updateQueue;if(hr===null){var fr=new Set;fr.add(Ut),i.updateQueue=fr}else hr.add(Ut);break e}else{if(!(i&1)){Si$1(ct,Xt,i),tj$1();break e}Ut=Error(p$2(426))}}else if(I$1&&Ft.mode&1){var yr=Ui$1(Mt);if(yr!==null){!(yr.flags&65536)&&(yr.flags|=256),Vi$1(yr,Mt,Ft,ct,i),Jg$1(Ji$1(Ut,Ft));break e}}ct=Ut=Ji$1(Ut,Ft),T$2!==4&&(T$2=2),sk$1===null?sk$1=[ct]:sk$1.push(ct),ct=Mt;do{switch(ct.tag){case 3:ct.flags|=65536,i&=-i,ct.lanes|=i;var Lr=Ni(ct,Ut,i);ph$1(ct,Lr);break e;case 1:Ft=Ut;var Br=ct.type,Vr=ct.stateNode;if(!(ct.flags&128)&&(typeof Br.getDerivedStateFromError=="function"||Vr!==null&&typeof Vr.componentDidCatch=="function"&&(Ri$1===null||!Ri$1.has(Vr)))){ct.flags|=65536,i&=-i,ct.lanes|=i;var Wr=Qi$1(ct,Ft,i);ph$1(ct,Wr);break e}}ct=ct.return}while(ct!==null)}Sk$1(s)}catch(ro){i=ro,Y$3===s&&s!==null&&(Y$3=s=s.return);continue}break}while(!0)}function Jk$1(){var o=mk$1.current;return mk$1.current=Rh$1,o===null?Rh$1:o}function tj$1(){(T$2===0||T$2===3||T$2===2)&&(T$2=4),Q$2===null||!(rh$1&268435455)&&!(qk$1&268435455)||Ck$1(Q$2,Z$2)}function Ik$1(o,i){var s=K$1;K$1|=2;var _=Jk$1();(Q$2!==o||Z$2!==i)&&(uk$1=null,Kk$1(o,i));do try{Tk$1();break}catch(_e){Mk$1(o,_e)}while(!0);if($g$1(),K$1=s,mk$1.current=_,Y$3!==null)throw Error(p$2(261));return Q$2=null,Z$2=0,T$2}function Tk$1(){for(;Y$3!==null;)Uk$1(Y$3)}function Lk$1(){for(;Y$3!==null&&!cc$1();)Uk$1(Y$3)}function Uk$1(o){var i=Vk$1(o.alternate,o,fj$1);o.memoizedProps=o.pendingProps,i===null?Sk$1(o):Y$3=i,nk$1.current=null}function Sk$1(o){var i=o;do{var s=i.alternate;if(o=i.return,i.flags&32768){if(s=Ij$1(s,i),s!==null){s.flags&=32767,Y$3=s;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{T$2=6,Y$3=null;return}}else if(s=Ej$1(s,i,fj$1),s!==null){Y$3=s;return}if(i=i.sibling,i!==null){Y$3=i;return}Y$3=i=o}while(i!==null);T$2===0&&(T$2=5)}function Pk$1(o,i,s){var _=C,_e=ok$1.transition;try{ok$1.transition=null,C=1,Wk$1(o,i,s,_)}finally{ok$1.transition=_e,C=_}return null}function Wk$1(o,i,s,_){do Hk$1();while(wk$1!==null);if(K$1&6)throw Error(p$2(327));s=o.finishedWork;var _e=o.finishedLanes;if(s===null)return null;if(o.finishedWork=null,o.finishedLanes=0,s===o.current)throw Error(p$2(177));o.callbackNode=null,o.callbackPriority=0;var ct=s.lanes|s.childLanes;if(Bc$1(o,ct),o===Q$2&&(Y$3=Q$2=null,Z$2=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||vk$1||(vk$1=!0,Fk$1(hc$1,function(){return Hk$1(),null})),ct=(s.flags&15990)!==0,s.subtreeFlags&15990||ct){ct=ok$1.transition,ok$1.transition=null;var Mt=C;C=1;var Ft=K$1;K$1|=4,nk$1.current=null,Oj$1(o,s),dk$1(s,o),Oe$1(Df$1),dd$1=!!Cf$1,Df$1=Cf$1=null,o.current=s,hk$1(s),dc$1(),K$1=Ft,C=Mt,ok$1.transition=ct}else o.current=s;if(vk$1&&(vk$1=!1,wk$1=o,xk$1=_e),ct=o.pendingLanes,ct===0&&(Ri$1=null),mc$1(s.stateNode),Dk$1(o,B$2()),i!==null)for(_=o.onRecoverableError,s=0;s<i.length;s++)_e=i[s],_(_e.value,{componentStack:_e.stack,digest:_e.digest});if(Oi$1)throw Oi$1=!1,o=Pi$1,Pi$1=null,o;return xk$1&1&&o.tag!==0&&Hk$1(),ct=o.pendingLanes,ct&1?o===zk$1?yk$1++:(yk$1=0,zk$1=o):yk$1=0,jg$1(),null}function Hk$1(){if(wk$1!==null){var o=Dc(xk$1),i=ok$1.transition,s=C;try{if(ok$1.transition=null,C=16>o?16:o,wk$1===null)var _=!1;else{if(o=wk$1,wk$1=null,xk$1=0,K$1&6)throw Error(p$2(331));var _e=K$1;for(K$1|=4,V$1=o.current;V$1!==null;){var ct=V$1,Mt=ct.child;if(V$1.flags&16){var Ft=ct.deletions;if(Ft!==null){for(var Ut=0;Ut<Ft.length;Ut++){var Xt=Ft[Ut];for(V$1=Xt;V$1!==null;){var Kt=V$1;switch(Kt.tag){case 0:case 11:case 15:Pj$1(8,Kt,ct)}var nr=Kt.child;if(nr!==null)nr.return=Kt,V$1=nr;else for(;V$1!==null;){Kt=V$1;var rr=Kt.sibling,or=Kt.return;if(Sj$1(Kt),Kt===Xt){V$1=null;break}if(rr!==null){rr.return=or,V$1=rr;break}V$1=or}}}var hr=ct.alternate;if(hr!==null){var fr=hr.child;if(fr!==null){hr.child=null;do{var yr=fr.sibling;fr.sibling=null,fr=yr}while(fr!==null)}}V$1=ct}}if(ct.subtreeFlags&2064&&Mt!==null)Mt.return=ct,V$1=Mt;else e:for(;V$1!==null;){if(ct=V$1,ct.flags&2048)switch(ct.tag){case 0:case 11:case 15:Pj$1(9,ct,ct.return)}var Lr=ct.sibling;if(Lr!==null){Lr.return=ct.return,V$1=Lr;break e}V$1=ct.return}}var Br=o.current;for(V$1=Br;V$1!==null;){Mt=V$1;var Vr=Mt.child;if(Mt.subtreeFlags&2064&&Vr!==null)Vr.return=Mt,V$1=Vr;else e:for(Mt=Br;V$1!==null;){if(Ft=V$1,Ft.flags&2048)try{switch(Ft.tag){case 0:case 11:case 15:Qj$1(9,Ft)}}catch(ro){W$2(Ft,Ft.return,ro)}if(Ft===Mt){V$1=null;break e}var Wr=Ft.sibling;if(Wr!==null){Wr.return=Ft.return,V$1=Wr;break e}V$1=Ft.return}}if(K$1=_e,jg$1(),lc$1&&typeof lc$1.onPostCommitFiberRoot=="function")try{lc$1.onPostCommitFiberRoot(kc$1,o)}catch{}_=!0}return _}finally{C=s,ok$1.transition=i}}return!1}function Xk$1(o,i,s){i=Ji$1(s,i),i=Ni(o,i,1),o=nh$1(o,i,1),i=R(),o!==null&&(Ac$1(o,1,i),Dk$1(o,i))}function W$2(o,i,s){if(o.tag===3)Xk$1(o,o,s);else for(;i!==null;){if(i.tag===3){Xk$1(i,o,s);break}else if(i.tag===1){var _=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof _.componentDidCatch=="function"&&(Ri$1===null||!Ri$1.has(_))){o=Ji$1(s,o),o=Qi$1(i,o,1),i=nh$1(i,o,1),o=R(),i!==null&&(Ac$1(i,1,o),Dk$1(i,o));break}}i=i.return}}function Ti(o,i,s){var _=o.pingCache;_!==null&&_.delete(i),i=R(),o.pingedLanes|=o.suspendedLanes&s,Q$2===o&&(Z$2&s)===s&&(T$2===4||T$2===3&&(Z$2&130023424)===Z$2&&500>B$2()-fk$1?Kk$1(o,0):rk$1|=s),Dk$1(o,i)}function Yk$1(o,i){i===0&&(o.mode&1?(i=sc$1,sc$1<<=1,!(sc$1&130023424)&&(sc$1=4194304)):i=1);var s=R();o=ih$1(o,i),o!==null&&(Ac$1(o,i,s),Dk$1(o,s))}function uj$1(o){var i=o.memoizedState,s=0;i!==null&&(s=i.retryLane),Yk$1(o,s)}function bk$1(o,i){var s=0;switch(o.tag){case 13:var _=o.stateNode,_e=o.memoizedState;_e!==null&&(s=_e.retryLane);break;case 19:_=o.stateNode;break;default:throw Error(p$2(314))}_!==null&&_.delete(i),Yk$1(o,s)}var Vk$1;Vk$1=function(o,i,s){if(o!==null)if(o.memoizedProps!==i.pendingProps||Wf$1.current)dh$1=!0;else{if(!(o.lanes&s)&&!(i.flags&128))return dh$1=!1,yj$1(o,i,s);dh$1=!!(o.flags&131072)}else dh$1=!1,I$1&&i.flags&1048576&&ug$1(i,ng$1,i.index);switch(i.lanes=0,i.tag){case 2:var _=i.type;ij$1(o,i),o=i.pendingProps;var _e=Yf$1(i,H$3.current);ch$1(i,s),_e=Nh$1(null,i,_,o,_e,s);var ct=Sh$1();return i.flags|=1,typeof _e=="object"&&_e!==null&&typeof _e.render=="function"&&_e.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Zf$1(_)?(ct=!0,cg$1(i)):ct=!1,i.memoizedState=_e.state!==null&&_e.state!==void 0?_e.state:null,kh$1(i),_e.updater=Ei$1,i.stateNode=_e,_e._reactInternals=i,Ii$1(i,_,o,s),i=jj$1(null,i,_,!0,ct,s)):(i.tag=0,I$1&&ct&&vg$1(i),Xi$1(null,i,_e,s),i=i.child),i;case 16:_=i.elementType;e:{switch(ij$1(o,i),o=i.pendingProps,_e=_._init,_=_e(_._payload),i.type=_,_e=i.tag=Zk$1(_),o=Ci$1(_,o),_e){case 0:i=cj$1(null,i,_,o,s);break e;case 1:i=hj$1(null,i,_,o,s);break e;case 11:i=Yi$1(null,i,_,o,s);break e;case 14:i=$i$1(null,i,_,Ci$1(_.type,o),s);break e}throw Error(p$2(306,_,""))}return i;case 0:return _=i.type,_e=i.pendingProps,_e=i.elementType===_?_e:Ci$1(_,_e),cj$1(o,i,_,_e,s);case 1:return _=i.type,_e=i.pendingProps,_e=i.elementType===_?_e:Ci$1(_,_e),hj$1(o,i,_,_e,s);case 3:e:{if(kj$1(i),o===null)throw Error(p$2(387));_=i.pendingProps,ct=i.memoizedState,_e=ct.element,lh$1(o,i),qh$1(i,_,null,s);var Mt=i.memoizedState;if(_=Mt.element,ct.isDehydrated)if(ct={element:_,isDehydrated:!1,cache:Mt.cache,pendingSuspenseBoundaries:Mt.pendingSuspenseBoundaries,transitions:Mt.transitions},i.updateQueue.baseState=ct,i.memoizedState=ct,i.flags&256){_e=Ji$1(Error(p$2(423)),i),i=lj$1(o,i,_,s,_e);break e}else if(_!==_e){_e=Ji$1(Error(p$2(424)),i),i=lj$1(o,i,_,s,_e);break e}else for(yg$1=Lf$1(i.stateNode.containerInfo.firstChild),xg$1=i,I$1=!0,zg$1=null,s=Vg$1(i,null,_,s),i.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Ig$1(),_===_e){i=Zi$1(o,i,s);break e}Xi$1(o,i,_,s)}i=i.child}return i;case 5:return Ah$1(i),o===null&&Eg$1(i),_=i.type,_e=i.pendingProps,ct=o!==null?o.memoizedProps:null,Mt=_e.children,Ef$1(_,_e)?Mt=null:ct!==null&&Ef$1(_,ct)&&(i.flags|=32),gj$1(o,i),Xi$1(o,i,Mt,s),i.child;case 6:return o===null&&Eg$1(i),null;case 13:return oj$1(o,i,s);case 4:return yh$1(i,i.stateNode.containerInfo),_=i.pendingProps,o===null?i.child=Ug(i,null,_,s):Xi$1(o,i,_,s),i.child;case 11:return _=i.type,_e=i.pendingProps,_e=i.elementType===_?_e:Ci$1(_,_e),Yi$1(o,i,_,_e,s);case 7:return Xi$1(o,i,i.pendingProps,s),i.child;case 8:return Xi$1(o,i,i.pendingProps.children,s),i.child;case 12:return Xi$1(o,i,i.pendingProps.children,s),i.child;case 10:e:{if(_=i.type._context,_e=i.pendingProps,ct=i.memoizedProps,Mt=_e.value,G$4(Wg,_._currentValue),_._currentValue=Mt,ct!==null)if(He$1(ct.value,Mt)){if(ct.children===_e.children&&!Wf$1.current){i=Zi$1(o,i,s);break e}}else for(ct=i.child,ct!==null&&(ct.return=i);ct!==null;){var Ft=ct.dependencies;if(Ft!==null){Mt=ct.child;for(var Ut=Ft.firstContext;Ut!==null;){if(Ut.context===_){if(ct.tag===1){Ut=mh$1(-1,s&-s),Ut.tag=2;var Xt=ct.updateQueue;if(Xt!==null){Xt=Xt.shared;var Kt=Xt.pending;Kt===null?Ut.next=Ut:(Ut.next=Kt.next,Kt.next=Ut),Xt.pending=Ut}}ct.lanes|=s,Ut=ct.alternate,Ut!==null&&(Ut.lanes|=s),bh$1(ct.return,s,i),Ft.lanes|=s;break}Ut=Ut.next}}else if(ct.tag===10)Mt=ct.type===i.type?null:ct.child;else if(ct.tag===18){if(Mt=ct.return,Mt===null)throw Error(p$2(341));Mt.lanes|=s,Ft=Mt.alternate,Ft!==null&&(Ft.lanes|=s),bh$1(Mt,s,i),Mt=ct.sibling}else Mt=ct.child;if(Mt!==null)Mt.return=ct;else for(Mt=ct;Mt!==null;){if(Mt===i){Mt=null;break}if(ct=Mt.sibling,ct!==null){ct.return=Mt.return,Mt=ct;break}Mt=Mt.return}ct=Mt}Xi$1(o,i,_e.children,s),i=i.child}return i;case 9:return _e=i.type,_=i.pendingProps.children,ch$1(i,s),_e=eh$1(_e),_=_(_e),i.flags|=1,Xi$1(o,i,_,s),i.child;case 14:return _=i.type,_e=Ci$1(_,i.pendingProps),_e=Ci$1(_.type,_e),$i$1(o,i,_,_e,s);case 15:return bj$1(o,i,i.type,i.pendingProps,s);case 17:return _=i.type,_e=i.pendingProps,_e=i.elementType===_?_e:Ci$1(_,_e),ij$1(o,i),i.tag=1,Zf$1(_)?(o=!0,cg$1(i)):o=!1,ch$1(i,s),Gi$1(i,_,_e),Ii$1(i,_,_e,s),jj$1(null,i,_,!0,o,s);case 19:return xj$1(o,i,s);case 22:return dj$1(o,i,s)}throw Error(p$2(156,i.tag))};function Fk$1(o,i){return ac$1(o,i)}function $k$1(o,i,s,_){this.tag=o,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=_,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg$1(o,i,s,_){return new $k$1(o,i,s,_)}function aj$1(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Zk$1(o){if(typeof o=="function")return aj$1(o)?1:0;if(o!=null){if(o=o.$$typeof,o===Da$1)return 11;if(o===Ga)return 14}return 2}function Pg$1(o,i){var s=o.alternate;return s===null?(s=Bg$1(o.tag,i,o.key,o.mode),s.elementType=o.elementType,s.type=o.type,s.stateNode=o.stateNode,s.alternate=o,o.alternate=s):(s.pendingProps=i,s.type=o.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=o.flags&14680064,s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,i=o.dependencies,s.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},s.sibling=o.sibling,s.index=o.index,s.ref=o.ref,s}function Rg$1(o,i,s,_,_e,ct){var Mt=2;if(_=o,typeof o=="function")aj$1(o)&&(Mt=1);else if(typeof o=="string")Mt=5;else e:switch(o){case ya$1:return Tg$1(s.children,_e,ct,i);case za$1:Mt=8,_e|=8;break;case Aa$1:return o=Bg$1(12,s,i,_e|2),o.elementType=Aa$1,o.lanes=ct,o;case Ea$1:return o=Bg$1(13,s,i,_e),o.elementType=Ea$1,o.lanes=ct,o;case Fa$1:return o=Bg$1(19,s,i,_e),o.elementType=Fa$1,o.lanes=ct,o;case Ia$1:return pj$1(s,_e,ct,i);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case Ba$1:Mt=10;break e;case Ca$1:Mt=9;break e;case Da$1:Mt=11;break e;case Ga:Mt=14;break e;case Ha:Mt=16,_=null;break e}throw Error(p$2(130,o==null?o:typeof o,""))}return i=Bg$1(Mt,s,i,_e),i.elementType=o,i.type=_,i.lanes=ct,i}function Tg$1(o,i,s,_){return o=Bg$1(7,o,_,i),o.lanes=s,o}function pj$1(o,i,s,_){return o=Bg$1(22,o,_,i),o.elementType=Ia$1,o.lanes=s,o.stateNode={isHidden:!1},o}function Qg$1(o,i,s){return o=Bg$1(6,o,null,i),o.lanes=s,o}function Sg$1(o,i,s){return i=Bg$1(4,o.children!==null?o.children:[],o.key,i),i.lanes=s,i.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},i}function al(o,i,s,_,_e){this.tag=i,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc$1(0),this.expirationTimes=zc$1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc$1(0),this.identifierPrefix=_,this.onRecoverableError=_e,this.mutableSourceEagerHydrationData=null}function bl$1(o,i,s,_,_e,ct,Mt,Ft,Ut){return o=new al(o,i,s,Ft,Ut),i===1?(i=1,ct===!0&&(i|=8)):i=0,ct=Bg$1(3,null,null,i),o.current=ct,ct.stateNode=o,ct.memoizedState={element:_,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh$1(ct),o}function cl(o,i,s){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa$1,key:_==null?null:""+_,children:o,containerInfo:i,implementation:s}}function dl$1(o){if(!o)return Vf$1;o=o._reactInternals;e:{if(Vb(o)!==o||o.tag!==1)throw Error(p$2(170));var i=o;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Zf$1(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(p$2(171))}if(o.tag===1){var s=o.type;if(Zf$1(s))return bg$1(o,s,i)}return i}function el$1(o,i,s,_,_e,ct,Mt,Ft,Ut){return o=bl$1(s,_,!0,o,_e,ct,Mt,Ft,Ut),o.context=dl$1(null),s=o.current,_=R(),_e=yi$1(s),ct=mh$1(_,_e),ct.callback=i??null,nh$1(s,ct,_e),o.current.lanes=_e,Ac$1(o,_e,_),Dk$1(o,_),o}function fl$1(o,i,s,_){var _e=i.current,ct=R(),Mt=yi$1(_e);return s=dl$1(s),i.context===null?i.context=s:i.pendingContext=s,i=mh$1(ct,Mt),i.payload={element:o},_=_===void 0?null:_,_!==null&&(i.callback=_),o=nh$1(_e,i,Mt),o!==null&&(gi$1(o,_e,Mt,ct),oh$1(o,_e,Mt)),Mt}function gl$1(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function hl$1(o,i){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var s=o.retryLane;o.retryLane=s!==0&&s<i?s:i}}function il(o,i){hl$1(o,i),(o=o.alternate)&&hl$1(o,i)}function jl$1(){return null}var kl$1=typeof reportError=="function"?reportError:function(o){console.error(o)};function ll(o){this._internalRoot=o}ml$1.prototype.render=ll.prototype.render=function(o){var i=this._internalRoot;if(i===null)throw Error(p$2(409));fl$1(o,i,null,null)};ml$1.prototype.unmount=ll.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var i=o.containerInfo;Rk$1(function(){fl$1(null,o,null,null)}),i[uf$1]=null}};function ml$1(o){this._internalRoot=o}ml$1.prototype.unstable_scheduleHydration=function(o){if(o){var i=Hc$1();o={blockedOn:null,target:o,priority:i};for(var s=0;s<Qc$1.length&&i!==0&&i<Qc$1[s].priority;s++);Qc$1.splice(s,0,o),s===0&&Vc$1(o)}};function nl(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function ol(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function pl(){}function ql$1(o,i,s,_,_e){if(_e){if(typeof _=="function"){var ct=_;_=function(){var Xt=gl$1(Mt);ct.call(Xt)}}var Mt=el$1(i,_,o,0,null,!1,!1,"",pl);return o._reactRootContainer=Mt,o[uf$1]=Mt.current,sf$1(o.nodeType===8?o.parentNode:o),Rk$1(),Mt}for(;_e=o.lastChild;)o.removeChild(_e);if(typeof _=="function"){var Ft=_;_=function(){var Xt=gl$1(Ut);Ft.call(Xt)}}var Ut=bl$1(o,0,!1,null,null,!1,!1,"",pl);return o._reactRootContainer=Ut,o[uf$1]=Ut.current,sf$1(o.nodeType===8?o.parentNode:o),Rk$1(function(){fl$1(i,Ut,s,_)}),Ut}function rl$1(o,i,s,_,_e){var ct=s._reactRootContainer;if(ct){var Mt=ct;if(typeof _e=="function"){var Ft=_e;_e=function(){var Ut=gl$1(Mt);Ft.call(Ut)}}fl$1(i,Mt,o,_e)}else Mt=ql$1(s,i,o,_e,_);return gl$1(Mt)}Ec$1=function(o){switch(o.tag){case 3:var i=o.stateNode;if(i.current.memoizedState.isDehydrated){var s=tc$1(i.pendingLanes);s!==0&&(Cc$1(i,s|1),Dk$1(i,B$2()),!(K$1&6)&&(Gj$1=B$2()+500,jg$1()))}break;case 13:Rk$1(function(){var _=ih$1(o,1);if(_!==null){var _e=R();gi$1(_,o,1,_e)}}),il(o,1)}};Fc$1=function(o){if(o.tag===13){var i=ih$1(o,134217728);if(i!==null){var s=R();gi$1(i,o,134217728,s)}il(o,134217728)}};Gc$1=function(o){if(o.tag===13){var i=yi$1(o),s=ih$1(o,i);if(s!==null){var _=R();gi$1(s,o,i,_)}il(o,i)}};Hc$1=function(){return C};Ic$1=function(o,i){var s=C;try{return C=o,i()}finally{C=s}};yb=function(o,i,s){switch(i){case"input":if(bb(o,s),i=s.name,s.type==="radio"&&i!=null){for(s=o;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<s.length;i++){var _=s[i];if(_!==o&&_.form===o.form){var _e=Db(_);if(!_e)throw Error(p$2(90));Wa(_),bb(_,_e)}}}break;case"textarea":ib(o,s);break;case"select":i=s.value,i!=null&&fb(o,!!s.multiple,i,!1)}};Gb=Qk$1;Hb=Rk$1;var sl={usingClientEntryPoint:!1,Events:[Cb,ue$1,Db,Eb,Fb,Qk$1]},tl$1={findFiberByHostInstance:Wc$1,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul={bundleType:tl$1.bundleType,version:tl$1.version,rendererPackageName:tl$1.rendererPackageName,rendererConfig:tl$1.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua$1.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=Zb(o),o===null?null:o.stateNode},findFiberByHostInstance:tl$1.findFiberByHostInstance||jl$1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl$1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl$1.isDisabled&&vl$1.supportsFiber)try{kc$1=vl$1.inject(ul),lc$1=vl$1}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;reactDom_production_min.createPortal=function(o,i){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl(i))throw Error(p$2(200));return cl(o,i,null,s)};reactDom_production_min.createRoot=function(o,i){if(!nl(o))throw Error(p$2(299));var s=!1,_="",_e=kl$1;return i!=null&&(i.unstable_strictMode===!0&&(s=!0),i.identifierPrefix!==void 0&&(_=i.identifierPrefix),i.onRecoverableError!==void 0&&(_e=i.onRecoverableError)),i=bl$1(o,1,!1,null,null,s,!1,_,_e),o[uf$1]=i.current,sf$1(o.nodeType===8?o.parentNode:o),new ll(i)};reactDom_production_min.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var i=o._reactInternals;if(i===void 0)throw typeof o.render=="function"?Error(p$2(188)):(o=Object.keys(o).join(","),Error(p$2(268,o)));return o=Zb(i),o=o===null?null:o.stateNode,o};reactDom_production_min.flushSync=function(o){return Rk$1(o)};reactDom_production_min.hydrate=function(o,i,s){if(!ol(i))throw Error(p$2(200));return rl$1(null,o,i,!0,s)};reactDom_production_min.hydrateRoot=function(o,i,s){if(!nl(o))throw Error(p$2(405));var _=s!=null&&s.hydratedSources||null,_e=!1,ct="",Mt=kl$1;if(s!=null&&(s.unstable_strictMode===!0&&(_e=!0),s.identifierPrefix!==void 0&&(ct=s.identifierPrefix),s.onRecoverableError!==void 0&&(Mt=s.onRecoverableError)),i=el$1(i,null,o,1,s??null,_e,!1,ct,Mt),o[uf$1]=i.current,sf$1(o),_)for(o=0;o<_.length;o++)s=_[o],_e=s._getVersion,_e=_e(s._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[s,_e]:i.mutableSourceEagerHydrationData.push(s,_e);return new ml$1(i)};reactDom_production_min.render=function(o,i,s){if(!ol(i))throw Error(p$2(200));return rl$1(null,o,i,!1,s)};reactDom_production_min.unmountComponentAtNode=function(o){if(!ol(o))throw Error(p$2(40));return o._reactRootContainer?(Rk$1(function(){rl$1(null,null,o,!1,function(){o._reactRootContainer=null,o[uf$1]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk$1;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(o,i,s,_){if(!ol(s))throw Error(p$2(200));if(o==null||o._reactInternals===void 0)throw Error(p$2(38));return rl$1(o,i,s,!1,_)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(o){console.error(o)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports;const ReactDOM__default=getDefaultExportFromCjs$1(reactDomExports);var createRoot,m$2=reactDomExports;createRoot=m$2.createRoot,m$2.hydrateRoot;var isMergeableObject=function(i){return isNonNullObject(i)&&!isSpecial(i)};function isNonNullObject(o){return!!o&&typeof o=="object"}function isSpecial(o){var i=Object.prototype.toString.call(o);return i==="[object RegExp]"||i==="[object Date]"||isReactElement(o)}var canUseSymbol=typeof Symbol=="function"&&Symbol.for,REACT_ELEMENT_TYPE=canUseSymbol?Symbol.for("react.element"):60103;function isReactElement(o){return o.$$typeof===REACT_ELEMENT_TYPE}function emptyTarget(o){return Array.isArray(o)?[]:{}}function cloneUnlessOtherwiseSpecified(o,i){return i.clone!==!1&&i.isMergeableObject(o)?deepmerge(emptyTarget(o),o,i):o}function defaultArrayMerge(o,i,s){return o.concat(i).map(function(_){return cloneUnlessOtherwiseSpecified(_,s)})}function mergeObject(o,i,s){var _={};return s.isMergeableObject(o)&&Object.keys(o).forEach(function(_e){_[_e]=cloneUnlessOtherwiseSpecified(o[_e],s)}),Object.keys(i).forEach(function(_e){!s.isMergeableObject(i[_e])||!o[_e]?_[_e]=cloneUnlessOtherwiseSpecified(i[_e],s):_[_e]=deepmerge(o[_e],i[_e],s)}),_}function deepmerge(o,i,s){s=s||{},s.arrayMerge=s.arrayMerge||defaultArrayMerge,s.isMergeableObject=s.isMergeableObject||isMergeableObject;var _=Array.isArray(i),_e=Array.isArray(o),ct=_===_e;return ct?_?s.arrayMerge(o,i,s):mergeObject(o,i,s):cloneUnlessOtherwiseSpecified(i,s)}deepmerge.all=function(i,s){if(!Array.isArray(i))throw new Error("first argument should be an array");return i.reduce(function(_,_e){return deepmerge(_,_e,s)},{})};var deepmerge_1=deepmerge,freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),Symbol$1=root.Symbol,objectProto$d=Object.prototype,hasOwnProperty$a=objectProto$d.hasOwnProperty,nativeObjectToString$1=objectProto$d.toString,symToStringTag$1=Symbol$1?Symbol$1.toStringTag:void 0;function getRawTag(o){var i=hasOwnProperty$a.call(o,symToStringTag$1),s=o[symToStringTag$1];try{o[symToStringTag$1]=void 0;var _=!0}catch{}var _e=nativeObjectToString$1.call(o);return _&&(i?o[symToStringTag$1]=s:delete o[symToStringTag$1]),_e}var objectProto$c=Object.prototype,nativeObjectToString=objectProto$c.toString;function objectToString(o){return nativeObjectToString.call(o)}var nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$1?Symbol$1.toStringTag:void 0;function baseGetTag(o){return o==null?o===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(o)?getRawTag(o):objectToString(o)}function overArg(o,i){return function(s){return o(i(s))}}var getPrototype=overArg(Object.getPrototypeOf,Object);function isObjectLike(o){return o!=null&&typeof o=="object"}var objectTag$3="[object Object]",funcProto$2=Function.prototype,objectProto$b=Object.prototype,funcToString$2=funcProto$2.toString,hasOwnProperty$9=objectProto$b.hasOwnProperty,objectCtorString=funcToString$2.call(Object);function isPlainObject(o){if(!isObjectLike(o)||baseGetTag(o)!=objectTag$3)return!1;var i=getPrototype(o);if(i===null)return!0;var s=hasOwnProperty$9.call(i,"constructor")&&i.constructor;return typeof s=="function"&&s instanceof s&&funcToString$2.call(s)==objectCtorString}function listCacheClear(){this.__data__=[],this.size=0}function eq$1(o,i){return o===i||o!==o&&i!==i}function assocIndexOf(o,i){for(var s=o.length;s--;)if(eq$1(o[s][0],i))return s;return-1}var arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete(o){var i=this.__data__,s=assocIndexOf(i,o);if(s<0)return!1;var _=i.length-1;return s==_?i.pop():splice.call(i,s,1),--this.size,!0}function listCacheGet(o){var i=this.__data__,s=assocIndexOf(i,o);return s<0?void 0:i[s][1]}function listCacheHas(o){return assocIndexOf(this.__data__,o)>-1}function listCacheSet(o,i){var s=this.__data__,_=assocIndexOf(s,o);return _<0?(++this.size,s.push([o,i])):s[_][1]=i,this}function ListCache(o){var i=-1,s=o==null?0:o.length;for(this.clear();++i<s;){var _=o[i];this.set(_[0],_[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype.delete=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;function stackClear(){this.__data__=new ListCache,this.size=0}function stackDelete(o){var i=this.__data__,s=i.delete(o);return this.size=i.size,s}function stackGet(o){return this.__data__.get(o)}function stackHas(o){return this.__data__.has(o)}function isObject$3(o){var i=typeof o;return o!=null&&(i=="object"||i=="function")}var asyncTag="[object AsyncFunction]",funcTag$2="[object Function]",genTag$1="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction$1(o){if(!isObject$3(o))return!1;var i=baseGetTag(o);return i==funcTag$2||i==genTag$1||i==asyncTag||i==proxyTag}var coreJsData=root["__core-js_shared__"],maskSrcKey=function(){var o=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""}();function isMasked(o){return!!maskSrcKey&&maskSrcKey in o}var funcProto$1=Function.prototype,funcToString$1=funcProto$1.toString;function toSource(o){if(o!=null){try{return funcToString$1.call(o)}catch{}try{return o+""}catch{}}return""}var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto=Function.prototype,objectProto$a=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$8=objectProto$a.hasOwnProperty,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty$8).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(o){if(!isObject$3(o)||isMasked(o))return!1;var i=isFunction$1(o)?reIsNative:reIsHostCtor;return i.test(toSource(o))}function getValue(o,i){return o==null?void 0:o[i]}function getNative(o,i){var s=getValue(o,i);return baseIsNative(s)?s:void 0}var Map$1=getNative(root,"Map"),nativeCreate=getNative(Object,"create");function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0}function hashDelete(o){var i=this.has(o)&&delete this.__data__[o];return this.size-=i?1:0,i}var HASH_UNDEFINED$1="__lodash_hash_undefined__",objectProto$9=Object.prototype,hasOwnProperty$7=objectProto$9.hasOwnProperty;function hashGet(o){var i=this.__data__;if(nativeCreate){var s=i[o];return s===HASH_UNDEFINED$1?void 0:s}return hasOwnProperty$7.call(i,o)?i[o]:void 0}var objectProto$8=Object.prototype,hasOwnProperty$6=objectProto$8.hasOwnProperty;function hashHas(o){var i=this.__data__;return nativeCreate?i[o]!==void 0:hasOwnProperty$6.call(i,o)}var HASH_UNDEFINED="__lodash_hash_undefined__";function hashSet(o,i){var s=this.__data__;return this.size+=this.has(o)?0:1,s[o]=nativeCreate&&i===void 0?HASH_UNDEFINED:i,this}function Hash(o){var i=-1,s=o==null?0:o.length;for(this.clear();++i<s;){var _=o[i];this.set(_[0],_[1])}}Hash.prototype.clear=hashClear;Hash.prototype.delete=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map$1||ListCache),string:new Hash}}function isKeyable(o){var i=typeof o;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?o!=="__proto__":o===null}function getMapData(o,i){var s=o.__data__;return isKeyable(i)?s[typeof i=="string"?"string":"hash"]:s.map}function mapCacheDelete(o){var i=getMapData(this,o).delete(o);return this.size-=i?1:0,i}function mapCacheGet(o){return getMapData(this,o).get(o)}function mapCacheHas(o){return getMapData(this,o).has(o)}function mapCacheSet(o,i){var s=getMapData(this,o),_=s.size;return s.set(o,i),this.size+=s.size==_?0:1,this}function MapCache(o){var i=-1,s=o==null?0:o.length;for(this.clear();++i<s;){var _=o[i];this.set(_[0],_[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype.delete=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;var LARGE_ARRAY_SIZE=200;function stackSet(o,i){var s=this.__data__;if(s instanceof ListCache){var _=s.__data__;if(!Map$1||_.length<LARGE_ARRAY_SIZE-1)return _.push([o,i]),this.size=++s.size,this;s=this.__data__=new MapCache(_)}return s.set(o,i),this.size=s.size,this}function Stack(o){var i=this.__data__=new ListCache(o);this.size=i.size}Stack.prototype.clear=stackClear;Stack.prototype.delete=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;function arrayEach(o,i){for(var s=-1,_=o==null?0:o.length;++s<_&&i(o[s],s,o)!==!1;);return o}var defineProperty$1=function(){try{var o=getNative(Object,"defineProperty");return o({},"",{}),o}catch{}}();function baseAssignValue(o,i,s){i=="__proto__"&&defineProperty$1?defineProperty$1(o,i,{configurable:!0,enumerable:!0,value:s,writable:!0}):o[i]=s}var objectProto$7=Object.prototype,hasOwnProperty$5=objectProto$7.hasOwnProperty;function assignValue(o,i,s){var _=o[i];(!(hasOwnProperty$5.call(o,i)&&eq$1(_,s))||s===void 0&&!(i in o))&&baseAssignValue(o,i,s)}function copyObject(o,i,s,_){var _e=!s;s||(s={});for(var ct=-1,Mt=i.length;++ct<Mt;){var Ft=i[ct],Ut=void 0;Ut===void 0&&(Ut=o[Ft]),_e?baseAssignValue(s,Ft,Ut):assignValue(s,Ft,Ut)}return s}function baseTimes(o,i){for(var s=-1,_=Array(o);++s<o;)_[s]=i(s);return _}var argsTag$2="[object Arguments]";function baseIsArguments(o){return isObjectLike(o)&&baseGetTag(o)==argsTag$2}var objectProto$6=Object.prototype,hasOwnProperty$4=objectProto$6.hasOwnProperty,propertyIsEnumerable$1=objectProto$6.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(o){return isObjectLike(o)&&hasOwnProperty$4.call(o,"callee")&&!propertyIsEnumerable$1.call(o,"callee")},isArray$1=Array.isArray;function stubFalse(){return!1}var freeExports$2=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$2=freeExports$2&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$2=freeModule$2&&freeModule$2.exports===freeExports$2,Buffer$2=moduleExports$2?root.Buffer:void 0,nativeIsBuffer=Buffer$2?Buffer$2.isBuffer:void 0,isBuffer=nativeIsBuffer||stubFalse,MAX_SAFE_INTEGER$1=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(o,i){var s=typeof o;return i=i??MAX_SAFE_INTEGER$1,!!i&&(s=="number"||s!="symbol"&&reIsUint.test(o))&&o>-1&&o%1==0&&o<i}var MAX_SAFE_INTEGER=9007199254740991;function isLength$1(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=MAX_SAFE_INTEGER}var argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag$2="[object Boolean]",dateTag$2="[object Date]",errorTag$1="[object Error]",funcTag$1="[object Function]",mapTag$4="[object Map]",numberTag$2="[object Number]",objectTag$2="[object Object]",regexpTag$2="[object RegExp]",setTag$4="[object Set]",stringTag$2="[object String]",weakMapTag$2="[object WeakMap]",arrayBufferTag$2="[object ArrayBuffer]",dataViewTag$3="[object DataView]",float32Tag$2="[object Float32Array]",float64Tag$2="[object Float64Array]",int8Tag$2="[object Int8Array]",int16Tag$2="[object Int16Array]",int32Tag$2="[object Int32Array]",uint8Tag$2="[object Uint8Array]",uint8ClampedTag$2="[object Uint8ClampedArray]",uint16Tag$2="[object Uint16Array]",uint32Tag$2="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag$2]=typedArrayTags[float64Tag$2]=typedArrayTags[int8Tag$2]=typedArrayTags[int16Tag$2]=typedArrayTags[int32Tag$2]=typedArrayTags[uint8Tag$2]=typedArrayTags[uint8ClampedTag$2]=typedArrayTags[uint16Tag$2]=typedArrayTags[uint32Tag$2]=!0;typedArrayTags[argsTag$1]=typedArrayTags[arrayTag$1]=typedArrayTags[arrayBufferTag$2]=typedArrayTags[boolTag$2]=typedArrayTags[dataViewTag$3]=typedArrayTags[dateTag$2]=typedArrayTags[errorTag$1]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag$4]=typedArrayTags[numberTag$2]=typedArrayTags[objectTag$2]=typedArrayTags[regexpTag$2]=typedArrayTags[setTag$4]=typedArrayTags[stringTag$2]=typedArrayTags[weakMapTag$2]=!1;function baseIsTypedArray(o){return isObjectLike(o)&&isLength$1(o.length)&&!!typedArrayTags[baseGetTag(o)]}function baseUnary(o){return function(i){return o(i)}}var freeExports$1=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1,freeProcess=moduleExports$1&&freeGlobal.process,nodeUtil=function(){try{var o=freeModule$1&&freeModule$1.require&&freeModule$1.require("util").types;return o||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch{}}(),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray,objectProto$5=Object.prototype,hasOwnProperty$3=objectProto$5.hasOwnProperty;function arrayLikeKeys(o,i){var s=isArray$1(o),_=!s&&isArguments(o),_e=!s&&!_&&isBuffer(o),ct=!s&&!_&&!_e&&isTypedArray(o),Mt=s||_||_e||ct,Ft=Mt?baseTimes(o.length,String):[],Ut=Ft.length;for(var Xt in o)(i||hasOwnProperty$3.call(o,Xt))&&!(Mt&&(Xt=="length"||_e&&(Xt=="offset"||Xt=="parent")||ct&&(Xt=="buffer"||Xt=="byteLength"||Xt=="byteOffset")||isIndex(Xt,Ut)))&&Ft.push(Xt);return Ft}var objectProto$4=Object.prototype;function isPrototype(o){var i=o&&o.constructor,s=typeof i=="function"&&i.prototype||objectProto$4;return o===s}var nativeKeys=overArg(Object.keys,Object),objectProto$3=Object.prototype,hasOwnProperty$2=objectProto$3.hasOwnProperty;function baseKeys(o){if(!isPrototype(o))return nativeKeys(o);var i=[];for(var s in Object(o))hasOwnProperty$2.call(o,s)&&s!="constructor"&&i.push(s);return i}function isArrayLike(o){return o!=null&&isLength$1(o.length)&&!isFunction$1(o)}function keys(o){return isArrayLike(o)?arrayLikeKeys(o):baseKeys(o)}function baseAssign(o,i){return o&&copyObject(i,keys(i),o)}function nativeKeysIn(o){var i=[];if(o!=null)for(var s in Object(o))i.push(s);return i}var objectProto$2=Object.prototype,hasOwnProperty$1=objectProto$2.hasOwnProperty;function baseKeysIn(o){if(!isObject$3(o))return nativeKeysIn(o);var i=isPrototype(o),s=[];for(var _ in o)_=="constructor"&&(i||!hasOwnProperty$1.call(o,_))||s.push(_);return s}function keysIn(o){return isArrayLike(o)?arrayLikeKeys(o,!0):baseKeysIn(o)}function baseAssignIn(o,i){return o&&copyObject(i,keysIn(i),o)}var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,Buffer$1=moduleExports?root.Buffer:void 0,allocUnsafe=Buffer$1?Buffer$1.allocUnsafe:void 0;function cloneBuffer(o,i){if(i)return o.slice();var s=o.length,_=allocUnsafe?allocUnsafe(s):new o.constructor(s);return o.copy(_),_}function copyArray(o,i){var s=-1,_=o.length;for(i||(i=Array(_));++s<_;)i[s]=o[s];return i}function arrayFilter(o,i){for(var s=-1,_=o==null?0:o.length,_e=0,ct=[];++s<_;){var Mt=o[s];i(Mt,s,o)&&(ct[_e++]=Mt)}return ct}function stubArray(){return[]}var objectProto$1=Object.prototype,propertyIsEnumerable=objectProto$1.propertyIsEnumerable,nativeGetSymbols$1=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols$1?function(o){return o==null?[]:(o=Object(o),arrayFilter(nativeGetSymbols$1(o),function(i){return propertyIsEnumerable.call(o,i)}))}:stubArray;function copySymbols(o,i){return copyObject(o,getSymbols(o),i)}function arrayPush(o,i){for(var s=-1,_=i.length,_e=o.length;++s<_;)o[_e+s]=i[s];return o}var nativeGetSymbols=Object.getOwnPropertySymbols,getSymbolsIn=nativeGetSymbols?function(o){for(var i=[];o;)arrayPush(i,getSymbols(o)),o=getPrototype(o);return i}:stubArray;function copySymbolsIn(o,i){return copyObject(o,getSymbolsIn(o),i)}function baseGetAllKeys(o,i,s){var _=i(o);return isArray$1(o)?_:arrayPush(_,s(o))}function getAllKeys(o){return baseGetAllKeys(o,keys,getSymbols)}function getAllKeysIn(o){return baseGetAllKeys(o,keysIn,getSymbolsIn)}var DataView$1=getNative(root,"DataView"),Promise$1=getNative(root,"Promise"),Set$1=getNative(root,"Set"),WeakMap$1=getNative(root,"WeakMap"),mapTag$3="[object Map]",objectTag$1="[object Object]",promiseTag="[object Promise]",setTag$3="[object Set]",weakMapTag$1="[object WeakMap]",dataViewTag$2="[object DataView]",dataViewCtorString=toSource(DataView$1),mapCtorString=toSource(Map$1),promiseCtorString=toSource(Promise$1),setCtorString=toSource(Set$1),weakMapCtorString=toSource(WeakMap$1),getTag=baseGetTag;(DataView$1&&getTag(new DataView$1(new ArrayBuffer(1)))!=dataViewTag$2||Map$1&&getTag(new Map$1)!=mapTag$3||Promise$1&&getTag(Promise$1.resolve())!=promiseTag||Set$1&&getTag(new Set$1)!=setTag$3||WeakMap$1&&getTag(new WeakMap$1)!=weakMapTag$1)&&(getTag=function(o){var i=baseGetTag(o),s=i==objectTag$1?o.constructor:void 0,_=s?toSource(s):"";if(_)switch(_){case dataViewCtorString:return dataViewTag$2;case mapCtorString:return mapTag$3;case promiseCtorString:return promiseTag;case setCtorString:return setTag$3;case weakMapCtorString:return weakMapTag$1}return i});var objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;function initCloneArray(o){var i=o.length,s=new o.constructor(i);return i&&typeof o[0]=="string"&&hasOwnProperty.call(o,"index")&&(s.index=o.index,s.input=o.input),s}var Uint8Array$1=root.Uint8Array;function cloneArrayBuffer(o){var i=new o.constructor(o.byteLength);return new Uint8Array$1(i).set(new Uint8Array$1(o)),i}function cloneDataView(o,i){var s=i?cloneArrayBuffer(o.buffer):o.buffer;return new o.constructor(s,o.byteOffset,o.byteLength)}var reFlags=/\w*$/;function cloneRegExp(o){var i=new o.constructor(o.source,reFlags.exec(o));return i.lastIndex=o.lastIndex,i}var symbolProto$1=Symbol$1?Symbol$1.prototype:void 0,symbolValueOf=symbolProto$1?symbolProto$1.valueOf:void 0;function cloneSymbol(o){return symbolValueOf?Object(symbolValueOf.call(o)):{}}function cloneTypedArray(o,i){var s=i?cloneArrayBuffer(o.buffer):o.buffer;return new o.constructor(s,o.byteOffset,o.length)}var boolTag$1="[object Boolean]",dateTag$1="[object Date]",mapTag$2="[object Map]",numberTag$1="[object Number]",regexpTag$1="[object RegExp]",setTag$2="[object Set]",stringTag$1="[object String]",symbolTag$2="[object Symbol]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$1="[object DataView]",float32Tag$1="[object Float32Array]",float64Tag$1="[object Float64Array]",int8Tag$1="[object Int8Array]",int16Tag$1="[object Int16Array]",int32Tag$1="[object Int32Array]",uint8Tag$1="[object Uint8Array]",uint8ClampedTag$1="[object Uint8ClampedArray]",uint16Tag$1="[object Uint16Array]",uint32Tag$1="[object Uint32Array]";function initCloneByTag(o,i,s){var _=o.constructor;switch(i){case arrayBufferTag$1:return cloneArrayBuffer(o);case boolTag$1:case dateTag$1:return new _(+o);case dataViewTag$1:return cloneDataView(o,s);case float32Tag$1:case float64Tag$1:case int8Tag$1:case int16Tag$1:case int32Tag$1:case uint8Tag$1:case uint8ClampedTag$1:case uint16Tag$1:case uint32Tag$1:return cloneTypedArray(o,s);case mapTag$2:return new _;case numberTag$1:case stringTag$1:return new _(o);case regexpTag$1:return cloneRegExp(o);case setTag$2:return new _;case symbolTag$2:return cloneSymbol(o)}}var objectCreate=Object.create,baseCreate=function(){function o(){}return function(i){if(!isObject$3(i))return{};if(objectCreate)return objectCreate(i);o.prototype=i;var s=new o;return o.prototype=void 0,s}}();function initCloneObject(o){return typeof o.constructor=="function"&&!isPrototype(o)?baseCreate(getPrototype(o)):{}}var mapTag$1="[object Map]";function baseIsMap(o){return isObjectLike(o)&&getTag(o)==mapTag$1}var nodeIsMap=nodeUtil&&nodeUtil.isMap,isMap=nodeIsMap?baseUnary(nodeIsMap):baseIsMap,setTag$1="[object Set]";function baseIsSet(o){return isObjectLike(o)&&getTag(o)==setTag$1}var nodeIsSet=nodeUtil&&nodeUtil.isSet,isSet=nodeIsSet?baseUnary(nodeIsSet):baseIsSet,CLONE_DEEP_FLAG$1=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG$2=4,argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag$1="[object Symbol]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",cloneableTags={};cloneableTags[argsTag]=cloneableTags[arrayTag]=cloneableTags[arrayBufferTag]=cloneableTags[dataViewTag]=cloneableTags[boolTag]=cloneableTags[dateTag]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag]=cloneableTags[numberTag]=cloneableTags[objectTag]=cloneableTags[regexpTag]=cloneableTags[setTag]=cloneableTags[stringTag]=cloneableTags[symbolTag$1]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0;cloneableTags[errorTag]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=!1;function baseClone(o,i,s,_,_e,ct){var Mt,Ft=i&CLONE_DEEP_FLAG$1,Ut=i&CLONE_FLAT_FLAG,Xt=i&CLONE_SYMBOLS_FLAG$2;if(Mt!==void 0)return Mt;if(!isObject$3(o))return o;var Kt=isArray$1(o);if(Kt){if(Mt=initCloneArray(o),!Ft)return copyArray(o,Mt)}else{var nr=getTag(o),rr=nr==funcTag||nr==genTag;if(isBuffer(o))return cloneBuffer(o,Ft);if(nr==objectTag||nr==argsTag||rr&&!_e){if(Mt=Ut||rr?{}:initCloneObject(o),!Ft)return Ut?copySymbolsIn(o,baseAssignIn(Mt,o)):copySymbols(o,baseAssign(Mt,o))}else{if(!cloneableTags[nr])return _e?o:{};Mt=initCloneByTag(o,nr,Ft)}}ct||(ct=new Stack);var or=ct.get(o);if(or)return or;ct.set(o,Mt),isSet(o)?o.forEach(function(yr){Mt.add(baseClone(yr,i,s,yr,o,ct))}):isMap(o)&&o.forEach(function(yr,Lr){Mt.set(Lr,baseClone(yr,i,s,Lr,o,ct))});var hr=Xt?Ut?getAllKeysIn:getAllKeys:Ut?keysIn:keys,fr=Kt?void 0:hr(o);return arrayEach(fr||o,function(yr,Lr){fr&&(Lr=yr,yr=o[Lr]),assignValue(Mt,Lr,baseClone(yr,i,s,Lr,o,ct))}),Mt}var CLONE_DEEP_FLAG=1,CLONE_SYMBOLS_FLAG$1=4;function cloneDeep(o){return baseClone(o,CLONE_DEEP_FLAG|CLONE_SYMBOLS_FLAG$1)}var isArray=Array.isArray,keyList=Object.keys,hasProp=Object.prototype.hasOwnProperty,hasElementType=typeof Element<"u";function equal(o,i){if(o===i)return!0;if(o&&i&&typeof o=="object"&&typeof i=="object"){var s=isArray(o),_=isArray(i),_e,ct,Mt;if(s&&_){if(ct=o.length,ct!=i.length)return!1;for(_e=ct;_e--!==0;)if(!equal(o[_e],i[_e]))return!1;return!0}if(s!=_)return!1;var Ft=o instanceof Date,Ut=i instanceof Date;if(Ft!=Ut)return!1;if(Ft&&Ut)return o.getTime()==i.getTime();var Xt=o instanceof RegExp,Kt=i instanceof RegExp;if(Xt!=Kt)return!1;if(Xt&&Kt)return o.toString()==i.toString();var nr=keyList(o);if(ct=nr.length,ct!==keyList(i).length)return!1;for(_e=ct;_e--!==0;)if(!hasProp.call(i,nr[_e]))return!1;if(hasElementType&&o instanceof Element&&i instanceof Element)return o===i;for(_e=ct;_e--!==0;)if(Mt=nr[_e],!(Mt==="_owner"&&o.$$typeof)&&!equal(o[Mt],i[Mt]))return!1;return!0}return o!==o&&i!==i}var reactFastCompare=function(i,s){try{return equal(i,s)}catch(_){if(_.message&&_.message.match(/stack|recursion/i)||_.number===-2146828260)return console.warn("Warning: react-fast-compare does not handle circular references.",_.name,_.message),!1;throw _}};const isEqual=getDefaultExportFromCjs$1(reactFastCompare);var CLONE_SYMBOLS_FLAG=4;function clone(o){return baseClone(o,CLONE_SYMBOLS_FLAG)}function arrayMap(o,i){for(var s=-1,_=o==null?0:o.length,_e=Array(_);++s<_;)_e[s]=i(o[s],s,o);return _e}var symbolTag="[object Symbol]";function isSymbol(o){return typeof o=="symbol"||isObjectLike(o)&&baseGetTag(o)==symbolTag}var FUNC_ERROR_TEXT="Expected a function";function memoize(o,i){if(typeof o!="function"||i!=null&&typeof i!="function")throw new TypeError(FUNC_ERROR_TEXT);var s=function(){var _=arguments,_e=i?i.apply(this,_):_[0],ct=s.cache;if(ct.has(_e))return ct.get(_e);var Mt=o.apply(this,_);return s.cache=ct.set(_e,Mt)||ct,Mt};return s.cache=new(memoize.Cache||MapCache),s}memoize.Cache=MapCache;var MAX_MEMOIZE_SIZE=500;function memoizeCapped(o){var i=memoize(o,function(_){return s.size===MAX_MEMOIZE_SIZE&&s.clear(),_}),s=i.cache;return i}var rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=memoizeCapped(function(o){var i=[];return o.charCodeAt(0)===46&&i.push(""),o.replace(rePropName,function(s,_,_e,ct){i.push(_e?ct.replace(reEscapeChar,"$1"):_||s)}),i}),INFINITY$1=1/0;function toKey(o){if(typeof o=="string"||isSymbol(o))return o;var i=o+"";return i=="0"&&1/o==-INFINITY$1?"-0":i}var INFINITY=1/0,symbolProto=Symbol$1?Symbol$1.prototype:void 0,symbolToString=symbolProto?symbolProto.toString:void 0;function baseToString(o){if(typeof o=="string")return o;if(isArray$1(o))return arrayMap(o,baseToString)+"";if(isSymbol(o))return symbolToString?symbolToString.call(o):"";var i=o+"";return i=="0"&&1/o==-INFINITY?"-0":i}function toString(o){return o==null?"":baseToString(o)}function toPath(o){return isArray$1(o)?arrayMap(o,toKey):isSymbol(o)?[o]:copyArray(stringToPath(toString(o)))}var reactIs$1={exports:{}},reactIs_production_min={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b=typeof Symbol=="function"&&Symbol.for,c=b?Symbol.for("react.element"):60103,d=b?Symbol.for("react.portal"):60106,e=b?Symbol.for("react.fragment"):60107,f=b?Symbol.for("react.strict_mode"):60108,g=b?Symbol.for("react.profiler"):60114,h=b?Symbol.for("react.provider"):60109,k$2=b?Symbol.for("react.context"):60110,l=b?Symbol.for("react.async_mode"):60111,m$1=b?Symbol.for("react.concurrent_mode"):60111,n=b?Symbol.for("react.forward_ref"):60112,p$1=b?Symbol.for("react.suspense"):60113,q$1=b?Symbol.for("react.suspense_list"):60120,r$2=b?Symbol.for("react.memo"):60115,t$1=b?Symbol.for("react.lazy"):60116,v$1=b?Symbol.for("react.block"):60121,w$1=b?Symbol.for("react.fundamental"):60117,x=b?Symbol.for("react.responder"):60118,y$1=b?Symbol.for("react.scope"):60119;function z(o){if(typeof o=="object"&&o!==null){var i=o.$$typeof;switch(i){case c:switch(o=o.type,o){case l:case m$1:case e:case g:case f:case p$1:return o;default:switch(o=o&&o.$$typeof,o){case k$2:case n:case t$1:case r$2:case h:return o;default:return i}}case d:return i}}}function A$1(o){return z(o)===m$1}reactIs_production_min.AsyncMode=l;reactIs_production_min.ConcurrentMode=m$1;reactIs_production_min.ContextConsumer=k$2;reactIs_production_min.ContextProvider=h;reactIs_production_min.Element=c;reactIs_production_min.ForwardRef=n;reactIs_production_min.Fragment=e;reactIs_production_min.Lazy=t$1;reactIs_production_min.Memo=r$2;reactIs_production_min.Portal=d;reactIs_production_min.Profiler=g;reactIs_production_min.StrictMode=f;reactIs_production_min.Suspense=p$1;reactIs_production_min.isAsyncMode=function(o){return A$1(o)||z(o)===l};reactIs_production_min.isConcurrentMode=A$1;reactIs_production_min.isContextConsumer=function(o){return z(o)===k$2};reactIs_production_min.isContextProvider=function(o){return z(o)===h};reactIs_production_min.isElement=function(o){return typeof o=="object"&&o!==null&&o.$$typeof===c};reactIs_production_min.isForwardRef=function(o){return z(o)===n};reactIs_production_min.isFragment=function(o){return z(o)===e};reactIs_production_min.isLazy=function(o){return z(o)===t$1};reactIs_production_min.isMemo=function(o){return z(o)===r$2};reactIs_production_min.isPortal=function(o){return z(o)===d};reactIs_production_min.isProfiler=function(o){return z(o)===g};reactIs_production_min.isStrictMode=function(o){return z(o)===f};reactIs_production_min.isSuspense=function(o){return z(o)===p$1};reactIs_production_min.isValidElementType=function(o){return typeof o=="string"||typeof o=="function"||o===e||o===m$1||o===g||o===f||o===p$1||o===q$1||typeof o=="object"&&o!==null&&(o.$$typeof===t$1||o.$$typeof===r$2||o.$$typeof===h||o.$$typeof===k$2||o.$$typeof===n||o.$$typeof===w$1||o.$$typeof===x||o.$$typeof===y$1||o.$$typeof===v$1)};reactIs_production_min.typeOf=z;reactIs$1.exports=reactIs_production_min;var reactIsExports=reactIs$1.exports,reactIs=reactIsExports,REACT_STATICS={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},KNOWN_STATICS={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},FORWARD_REF_STATICS={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},MEMO_STATICS={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},TYPE_STATICS={};TYPE_STATICS[reactIs.ForwardRef]=FORWARD_REF_STATICS;TYPE_STATICS[reactIs.Memo]=MEMO_STATICS;function getStatics(o){return reactIs.isMemo(o)?MEMO_STATICS:TYPE_STATICS[o.$$typeof]||REACT_STATICS}var defineProperty=Object.defineProperty,getOwnPropertyNames=Object.getOwnPropertyNames,getOwnPropertySymbols=Object.getOwnPropertySymbols,getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,getPrototypeOf=Object.getPrototypeOf,objectPrototype=Object.prototype;function hoistNonReactStatics(o,i,s){if(typeof i!="string"){if(objectPrototype){var _=getPrototypeOf(i);_&&_!==objectPrototype&&hoistNonReactStatics(o,_,s)}var _e=getOwnPropertyNames(i);getOwnPropertySymbols&&(_e=_e.concat(getOwnPropertySymbols(i)));for(var ct=getStatics(o),Mt=getStatics(i),Ft=0;Ft<_e.length;++Ft){var Ut=_e[Ft];if(!KNOWN_STATICS[Ut]&&!(s&&s[Ut])&&!(Mt&&Mt[Ut])&&!(ct&&ct[Ut])){var Xt=getOwnPropertyDescriptor(i,Ut);try{defineProperty(o,Ut,Xt)}catch{}}}}return o}var hoistNonReactStatics_cjs=hoistNonReactStatics;const hoistNonReactStatics$1=getDefaultExportFromCjs$1(hoistNonReactStatics_cjs);function _extends$1(){return _extends$1=Object.assign||function(o){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var _ in s)Object.prototype.hasOwnProperty.call(s,_)&&(o[_]=s[_])}return o},_extends$1.apply(this,arguments)}function _inheritsLoose(o,i){o.prototype=Object.create(i.prototype),o.prototype.constructor=o,o.__proto__=i}function _objectWithoutPropertiesLoose(o,i){if(o==null)return{};var s={},_=Object.keys(o),_e,ct;for(ct=0;ct<_.length;ct++)_e=_[ct],!(i.indexOf(_e)>=0)&&(s[_e]=o[_e]);return s}function _assertThisInitialized(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}var FormikContext=reactExports.createContext(void 0);FormikContext.displayName="FormikContext";var FormikProvider=FormikContext.Provider,FormikConsumer=FormikContext.Consumer;function useFormikContext(){var o=reactExports.useContext(FormikContext);return o}var isEmptyArray=function(i){return Array.isArray(i)&&i.length===0},isFunction=function(i){return typeof i=="function"},isObject$2=function(i){return i!==null&&typeof i=="object"},isInteger$1=function(i){return String(Math.floor(Number(i)))===i},isString$2=function(i){return Object.prototype.toString.call(i)==="[object String]"},isEmptyChildren=function(i){return reactExports.Children.count(i)===0},isPromise=function(i){return isObject$2(i)&&isFunction(i.then)};function getIn(o,i,s,_){_===void 0&&(_=0);for(var _e=toPath(i);o&&_<_e.length;)o=o[_e[_++]];return _!==_e.length&&!o||o===void 0?s:o}function setIn(o,i,s){for(var _=clone(o),_e=_,ct=0,Mt=toPath(i);ct<Mt.length-1;ct++){var Ft=Mt[ct],Ut=getIn(o,Mt.slice(0,ct+1));if(Ut&&(isObject$2(Ut)||Array.isArray(Ut)))_e=_e[Ft]=clone(Ut);else{var Xt=Mt[ct+1];_e=_e[Ft]=isInteger$1(Xt)&&Number(Xt)>=0?[]:{}}}return(ct===0?o:_e)[Mt[ct]]===s?o:(s===void 0?delete _e[Mt[ct]]:_e[Mt[ct]]=s,ct===0&&s===void 0&&delete _[Mt[ct]],_)}function setNestedObjectValues(o,i,s,_){s===void 0&&(s=new WeakMap),_===void 0&&(_={});for(var _e=0,ct=Object.keys(o);_e<ct.length;_e++){var Mt=ct[_e],Ft=o[Mt];isObject$2(Ft)?s.get(Ft)||(s.set(Ft,!0),_[Mt]=Array.isArray(Ft)?[]:{},setNestedObjectValues(Ft,i,s,_[Mt])):_[Mt]=i}return _}function formikReducer(o,i){switch(i.type){case"SET_VALUES":return _extends$1({},o,{values:i.payload});case"SET_TOUCHED":return _extends$1({},o,{touched:i.payload});case"SET_ERRORS":return isEqual(o.errors,i.payload)?o:_extends$1({},o,{errors:i.payload});case"SET_STATUS":return _extends$1({},o,{status:i.payload});case"SET_ISSUBMITTING":return _extends$1({},o,{isSubmitting:i.payload});case"SET_ISVALIDATING":return _extends$1({},o,{isValidating:i.payload});case"SET_FIELD_VALUE":return _extends$1({},o,{values:setIn(o.values,i.payload.field,i.payload.value)});case"SET_FIELD_TOUCHED":return _extends$1({},o,{touched:setIn(o.touched,i.payload.field,i.payload.value)});case"SET_FIELD_ERROR":return _extends$1({},o,{errors:setIn(o.errors,i.payload.field,i.payload.value)});case"RESET_FORM":return _extends$1({},o,i.payload);case"SET_FORMIK_STATE":return i.payload(o);case"SUBMIT_ATTEMPT":return _extends$1({},o,{touched:setNestedObjectValues(o.values,!0),isSubmitting:!0,submitCount:o.submitCount+1});case"SUBMIT_FAILURE":return _extends$1({},o,{isSubmitting:!1});case"SUBMIT_SUCCESS":return _extends$1({},o,{isSubmitting:!1});default:return o}}var emptyErrors={},emptyTouched={};function useFormik(o){var i=o.validateOnChange,s=i===void 0?!0:i,_=o.validateOnBlur,_e=_===void 0?!0:_,ct=o.validateOnMount,Mt=ct===void 0?!1:ct,Ft=o.isInitialValid,Ut=o.enableReinitialize,Xt=Ut===void 0?!1:Ut,Kt=o.onSubmit,nr=_objectWithoutPropertiesLoose(o,["validateOnChange","validateOnBlur","validateOnMount","isInitialValid","enableReinitialize","onSubmit"]),rr=_extends$1({validateOnChange:s,validateOnBlur:_e,validateOnMount:Mt,onSubmit:Kt},nr),or=reactExports.useRef(rr.initialValues),hr=reactExports.useRef(rr.initialErrors||emptyErrors),fr=reactExports.useRef(rr.initialTouched||emptyTouched),yr=reactExports.useRef(rr.initialStatus),Lr=reactExports.useRef(!1),Br=reactExports.useRef({});reactExports.useEffect(function(){return Lr.current=!0,function(){Lr.current=!1}},[]);var Vr=reactExports.useState(0),Wr=Vr[1],ro=reactExports.useRef({values:cloneDeep(rr.initialValues),errors:cloneDeep(rr.initialErrors)||emptyErrors,touched:cloneDeep(rr.initialTouched)||emptyTouched,status:cloneDeep(rr.initialStatus),isSubmitting:!1,isValidating:!1,submitCount:0}),no=ro.current,so=reactExports.useCallback(function(Sm){var Nm=ro.current;ro.current=formikReducer(Nm,Sm),Nm!==ro.current&&Wr(function(Qp){return Qp+1})},[]),ko=reactExports.useCallback(function(Sm,Nm){return new Promise(function(Qp,$m){var Pm=rr.validate(Sm,Nm);Pm==null?Qp(emptyErrors):isPromise(Pm)?Pm.then(function(Fm){Qp(Fm||emptyErrors)},function(Fm){$m(Fm)}):Qp(Pm)})},[rr.validate]),To=reactExports.useCallback(function(Sm,Nm){var Qp=rr.validationSchema,$m=isFunction(Qp)?Qp(Nm):Qp,Pm=Nm&&$m.validateAt?$m.validateAt(Nm,Sm):validateYupSchema(Sm,$m);return new Promise(function(Fm,Rm){Pm.then(function(){Fm(emptyErrors)},function(Dm){Dm.name==="ValidationError"?Fm(yupToFormErrors(Dm)):Rm(Dm)})})},[rr.validationSchema]),oo=reactExports.useCallback(function(Sm,Nm){return new Promise(function(Qp){return Qp(Br.current[Sm].validate(Nm))})},[]),No=reactExports.useCallback(function(Sm){var Nm=Object.keys(Br.current).filter(function($m){return isFunction(Br.current[$m].validate)}),Qp=Nm.length>0?Nm.map(function($m){return oo($m,getIn(Sm,$m))}):[Promise.resolve("DO_NOT_DELETE_YOU_WILL_BE_FIRED")];return Promise.all(Qp).then(function($m){return $m.reduce(function(Pm,Fm,Rm){return Fm==="DO_NOT_DELETE_YOU_WILL_BE_FIRED"||Fm&&(Pm=setIn(Pm,Nm[Rm],Fm)),Pm},{})})},[oo]),As=reactExports.useCallback(function(Sm){return Promise.all([No(Sm),rr.validationSchema?To(Sm):{},rr.validate?ko(Sm):{}]).then(function(Nm){var Qp=Nm[0],$m=Nm[1],Pm=Nm[2],Fm=deepmerge_1.all([Qp,$m,Pm],{arrayMerge});return Fm})},[rr.validate,rr.validationSchema,No,ko,To]),Ks=useEventCallback(function(Sm){return Sm===void 0&&(Sm=no.values),so({type:"SET_ISVALIDATING",payload:!0}),As(Sm).then(function(Nm){return Lr.current&&(so({type:"SET_ISVALIDATING",payload:!1}),so({type:"SET_ERRORS",payload:Nm})),Nm})});reactExports.useEffect(function(){Mt&&Lr.current===!0&&isEqual(or.current,rr.initialValues)&&Ks(or.current)},[Mt,Ks]);var vu=reactExports.useCallback(function(Sm){var Nm=Sm&&Sm.values?Sm.values:or.current,Qp=Sm&&Sm.errors?Sm.errors:hr.current?hr.current:rr.initialErrors||{},$m=Sm&&Sm.touched?Sm.touched:fr.current?fr.current:rr.initialTouched||{},Pm=Sm&&Sm.status?Sm.status:yr.current?yr.current:rr.initialStatus;or.current=Nm,hr.current=Qp,fr.current=$m,yr.current=Pm;var Fm=function(){so({type:"RESET_FORM",payload:{isSubmitting:!!Sm&&!!Sm.isSubmitting,errors:Qp,touched:$m,status:Pm,values:Nm,isValidating:!!Sm&&!!Sm.isValidating,submitCount:Sm&&Sm.submitCount&&typeof Sm.submitCount=="number"?Sm.submitCount:0}})};if(rr.onReset){var Rm=rr.onReset(no.values,zm);isPromise(Rm)?Rm.then(Fm):Fm()}else Fm()},[rr.initialErrors,rr.initialStatus,rr.initialTouched,rr.onReset]);reactExports.useEffect(function(){Lr.current===!0&&!isEqual(or.current,rr.initialValues)&&Xt&&(or.current=rr.initialValues,vu(),Mt&&Ks(or.current))},[Xt,rr.initialValues,vu,Mt,Ks]),reactExports.useEffect(function(){Xt&&Lr.current===!0&&!isEqual(hr.current,rr.initialErrors)&&(hr.current=rr.initialErrors||emptyErrors,so({type:"SET_ERRORS",payload:rr.initialErrors||emptyErrors}))},[Xt,rr.initialErrors]),reactExports.useEffect(function(){Xt&&Lr.current===!0&&!isEqual(fr.current,rr.initialTouched)&&(fr.current=rr.initialTouched||emptyTouched,so({type:"SET_TOUCHED",payload:rr.initialTouched||emptyTouched}))},[Xt,rr.initialTouched]),reactExports.useEffect(function(){Xt&&Lr.current===!0&&!isEqual(yr.current,rr.initialStatus)&&(yr.current=rr.initialStatus,so({type:"SET_STATUS",payload:rr.initialStatus}))},[Xt,rr.initialStatus,rr.initialTouched]);var Fu=useEventCallback(function(Sm){if(Br.current[Sm]&&isFunction(Br.current[Sm].validate)){var Nm=getIn(no.values,Sm),Qp=Br.current[Sm].validate(Nm);return isPromise(Qp)?(so({type:"SET_ISVALIDATING",payload:!0}),Qp.then(function($m){return $m}).then(function($m){so({type:"SET_FIELD_ERROR",payload:{field:Sm,value:$m}}),so({type:"SET_ISVALIDATING",payload:!1})})):(so({type:"SET_FIELD_ERROR",payload:{field:Sm,value:Qp}}),Promise.resolve(Qp))}else if(rr.validationSchema)return so({type:"SET_ISVALIDATING",payload:!0}),To(no.values,Sm).then(function($m){return $m}).then(function($m){so({type:"SET_FIELD_ERROR",payload:{field:Sm,value:getIn($m,Sm)}}),so({type:"SET_ISVALIDATING",payload:!1})});return Promise.resolve()}),Ap=reactExports.useCallback(function(Sm,Nm){var Qp=Nm.validate;Br.current[Sm]={validate:Qp}},[]),Pp=reactExports.useCallback(function(Sm){delete Br.current[Sm]},[]),Lo=useEventCallback(function(Sm,Nm){so({type:"SET_TOUCHED",payload:Sm});var Qp=Nm===void 0?_e:Nm;return Qp?Ks(no.values):Promise.resolve()}),Au=reactExports.useCallback(function(Sm){so({type:"SET_ERRORS",payload:Sm})},[]),Mp=useEventCallback(function(Sm,Nm){var Qp=isFunction(Sm)?Sm(no.values):Sm;so({type:"SET_VALUES",payload:Qp});var $m=Nm===void 0?s:Nm;return $m?Ks(Qp):Promise.resolve()}),Lp=reactExports.useCallback(function(Sm,Nm){so({type:"SET_FIELD_ERROR",payload:{field:Sm,value:Nm}})},[]),Op=useEventCallback(function(Sm,Nm,Qp){so({type:"SET_FIELD_VALUE",payload:{field:Sm,value:Nm}});var $m=Qp===void 0?s:Qp;return $m?Ks(setIn(no.values,Sm,Nm)):Promise.resolve()}),Fp=reactExports.useCallback(function(Sm,Nm){var Qp=Nm,$m=Sm,Pm;if(!isString$2(Sm)){Sm.persist&&Sm.persist();var Fm=Sm.target?Sm.target:Sm.currentTarget,Rm=Fm.type,Dm=Fm.name,Zm=Fm.id,qm=Fm.value,Lm=Fm.checked,wy=Fm.outerHTML,Ay=Fm.options,Oy=Fm.multiple;Qp=Nm||Dm||Zm,$m=/number|range/.test(Rm)?(Pm=parseFloat(qm),isNaN(Pm)?"":Pm):/checkbox/.test(Rm)?getValueForCheckbox(getIn(no.values,Qp),Lm,qm):Ay&&Oy?getSelectedValues(Ay):qm}Qp&&Op(Qp,$m)},[Op,no.values]),wm=useEventCallback(function(Sm){if(isString$2(Sm))return function(Nm){return Fp(Nm,Sm)};Fp(Sm)}),Bp=useEventCallback(function(Sm,Nm,Qp){Nm===void 0&&(Nm=!0),so({type:"SET_FIELD_TOUCHED",payload:{field:Sm,value:Nm}});var $m=Qp===void 0?_e:Qp;return $m?Ks(no.values):Promise.resolve()}),Em=reactExports.useCallback(function(Sm,Nm){Sm.persist&&Sm.persist();var Qp=Sm.target,$m=Qp.name,Pm=Qp.id,Fm=Qp.outerHTML,Rm=Nm||$m||Pm;Bp(Rm,!0)},[Bp]),Yp=useEventCallback(function(Sm){if(isString$2(Sm))return function(Nm){return Em(Nm,Sm)};Em(Sm)}),_m=reactExports.useCallback(function(Sm){isFunction(Sm)?so({type:"SET_FORMIK_STATE",payload:Sm}):so({type:"SET_FORMIK_STATE",payload:function(){return Sm}})},[]),Tm=reactExports.useCallback(function(Sm){so({type:"SET_STATUS",payload:Sm})},[]),Im=reactExports.useCallback(function(Sm){so({type:"SET_ISSUBMITTING",payload:Sm})},[]),Mm=useEventCallback(function(){return so({type:"SUBMIT_ATTEMPT"}),Ks().then(function(Sm){var Nm=Sm instanceof Error,Qp=!Nm&&Object.keys(Sm).length===0;if(Qp){var $m;try{if($m=Am(),$m===void 0)return}catch(Pm){throw Pm}return Promise.resolve($m).then(function(Pm){return Lr.current&&so({type:"SUBMIT_SUCCESS"}),Pm}).catch(function(Pm){if(Lr.current)throw so({type:"SUBMIT_FAILURE"}),Pm})}else if(Lr.current&&(so({type:"SUBMIT_FAILURE"}),Nm))throw Sm})}),Bm=useEventCallback(function(Sm){Sm&&Sm.preventDefault&&isFunction(Sm.preventDefault)&&Sm.preventDefault(),Sm&&Sm.stopPropagation&&isFunction(Sm.stopPropagation)&&Sm.stopPropagation(),Mm().catch(function(Nm){console.warn("Warning: An unhandled error was caught from submitForm()",Nm)})}),zm={resetForm:vu,validateForm:Ks,validateField:Fu,setErrors:Au,setFieldError:Lp,setFieldTouched:Bp,setFieldValue:Op,setStatus:Tm,setSubmitting:Im,setTouched:Lo,setValues:Mp,setFormikState:_m,submitForm:Mm},Am=useEventCallback(function(){return Kt(no.values,zm)}),Om=useEventCallback(function(Sm){Sm&&Sm.preventDefault&&isFunction(Sm.preventDefault)&&Sm.preventDefault(),Sm&&Sm.stopPropagation&&isFunction(Sm.stopPropagation)&&Sm.stopPropagation(),vu()}),Hm=reactExports.useCallback(function(Sm){return{value:getIn(no.values,Sm),error:getIn(no.errors,Sm),touched:!!getIn(no.touched,Sm),initialValue:getIn(or.current,Sm),initialTouched:!!getIn(fr.current,Sm),initialError:getIn(hr.current,Sm)}},[no.errors,no.touched,no.values]),u1=reactExports.useCallback(function(Sm){return{setValue:function(Qp,$m){return Op(Sm,Qp,$m)},setTouched:function(Qp,$m){return Bp(Sm,Qp,$m)},setError:function(Qp){return Lp(Sm,Qp)}}},[Op,Bp,Lp]),a1=reactExports.useCallback(function(Sm){var Nm=isObject$2(Sm),Qp=Nm?Sm.name:Sm,$m=getIn(no.values,Qp),Pm={name:Qp,value:$m,onChange:wm,onBlur:Yp};if(Nm){var Fm=Sm.type,Rm=Sm.value,Dm=Sm.as,Zm=Sm.multiple;Fm==="checkbox"?Rm===void 0?Pm.checked=!!$m:(Pm.checked=!!(Array.isArray($m)&&~$m.indexOf(Rm)),Pm.value=Rm):Fm==="radio"?(Pm.checked=$m===Rm,Pm.value=Rm):Dm==="select"&&Zm&&(Pm.value=Pm.value||[],Pm.multiple=!0)}return Pm},[Yp,wm,no.values]),Gm=reactExports.useMemo(function(){return!isEqual(or.current,no.values)},[or.current,no.values]),c1=reactExports.useMemo(function(){return typeof Ft<"u"?Gm?no.errors&&Object.keys(no.errors).length===0:Ft!==!1&&isFunction(Ft)?Ft(rr):Ft:no.errors&&Object.keys(no.errors).length===0},[Ft,Gm,no.errors,rr]),m1=_extends$1({},no,{initialValues:or.current,initialErrors:hr.current,initialTouched:fr.current,initialStatus:yr.current,handleBlur:Yp,handleChange:wm,handleReset:Om,handleSubmit:Bm,resetForm:vu,setErrors:Au,setFormikState:_m,setFieldTouched:Bp,setFieldValue:Op,setFieldError:Lp,setStatus:Tm,setSubmitting:Im,setTouched:Lo,setValues:Mp,submitForm:Mm,validateForm:Ks,validateField:Fu,isValid:c1,dirty:Gm,unregisterField:Pp,registerField:Ap,getFieldProps:a1,getFieldMeta:Hm,getFieldHelpers:u1,validateOnBlur:_e,validateOnChange:s,validateOnMount:Mt});return m1}function Formik(o){var i=useFormik(o),s=o.component,_=o.children,_e=o.render,ct=o.innerRef;return reactExports.useImperativeHandle(ct,function(){return i}),reactExports.createElement(FormikProvider,{value:i},s?reactExports.createElement(s,i):_e?_e(i):_?isFunction(_)?_(i):isEmptyChildren(_)?null:reactExports.Children.only(_):null)}function warnAboutMissingIdentifier(o){var i=o.htmlContent,s=o.documentationAnchorLink,_=o.handlerName;console.warn("Warning: Formik called `"+_+"`, but you forgot to pass an `id` or `name` attribute to your input:\n    "+i+`
    Formik cannot determine which value to update. For more info see https://formik.org/docs/api/formik#`+s+`
  `)}function yupToFormErrors(o){var i={};if(o.inner){if(o.inner.length===0)return setIn(i,o.path,o.message);for(var _e=o.inner,s=Array.isArray(_e),_=0,_e=s?_e:_e[Symbol.iterator]();;){var ct;if(s){if(_>=_e.length)break;ct=_e[_++]}else{if(_=_e.next(),_.done)break;ct=_.value}var Mt=ct;getIn(i,Mt.path)||(i=setIn(i,Mt.path,Mt.message))}}return i}function validateYupSchema(o,i,s,_){s===void 0&&(s=!1);var _e=prepareDataForValidation(o);return i[s?"validateSync":"validate"](_e,{abortEarly:!1,context:_e})}function prepareDataForValidation(o){var i=Array.isArray(o)?[]:{};for(var s in o)if(Object.prototype.hasOwnProperty.call(o,s)){var _=String(s);Array.isArray(o[_])===!0?i[_]=o[_].map(function(_e){return Array.isArray(_e)===!0||isPlainObject(_e)?prepareDataForValidation(_e):_e!==""?_e:void 0}):isPlainObject(o[_])?i[_]=prepareDataForValidation(o[_]):i[_]=o[_]!==""?o[_]:void 0}return i}function arrayMerge(o,i,s){var _=o.slice();return i.forEach(function(ct,Mt){if(typeof _[Mt]>"u"){var Ft=s.clone!==!1,Ut=Ft&&s.isMergeableObject(ct);_[Mt]=Ut?deepmerge_1(Array.isArray(ct)?[]:{},ct,s):ct}else s.isMergeableObject(ct)?_[Mt]=deepmerge_1(o[Mt],ct,s):o.indexOf(ct)===-1&&_.push(ct)}),_}function getSelectedValues(o){return Array.from(o).filter(function(i){return i.selected}).map(function(i){return i.value})}function getValueForCheckbox(o,i,s){if(typeof o=="boolean")return!!i;var _=[],_e=!1,ct=-1;if(Array.isArray(o))_=o,ct=o.indexOf(s),_e=ct>=0;else if(!s||s=="true"||s=="false")return!!i;return i&&s&&!_e?_.concat(s):_e?_.slice(0,ct).concat(_.slice(ct+1)):_}var useIsomorphicLayoutEffect$2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?reactExports.useLayoutEffect:reactExports.useEffect;function useEventCallback(o){var i=reactExports.useRef(o);return useIsomorphicLayoutEffect$2(function(){i.current=o}),reactExports.useCallback(function(){for(var s=arguments.length,_=new Array(s),_e=0;_e<s;_e++)_[_e]=arguments[_e];return i.current.apply(void 0,_)},[])}function Field(o){var i=o.validate,s=o.name,_=o.render,_e=o.children,ct=o.as,Mt=o.component,Ft=o.className,Ut=_objectWithoutPropertiesLoose(o,["validate","name","render","children","as","component","className"]),Xt=useFormikContext(),Kt=_objectWithoutPropertiesLoose(Xt,["validate","validationSchema"]),nr=Kt.registerField,rr=Kt.unregisterField;reactExports.useEffect(function(){return nr(s,{validate:i}),function(){rr(s)}},[nr,rr,s,i]);var or=Kt.getFieldProps(_extends$1({name:s},Ut)),hr=Kt.getFieldMeta(s),fr={field:or,form:Kt};if(_)return _(_extends$1({},fr,{meta:hr}));if(isFunction(_e))return _e(_extends$1({},fr,{meta:hr}));if(Mt){if(typeof Mt=="string"){var yr=Ut.innerRef,Lr=_objectWithoutPropertiesLoose(Ut,["innerRef"]);return reactExports.createElement(Mt,_extends$1({ref:yr},or,Lr,{className:Ft}),_e)}return reactExports.createElement(Mt,_extends$1({field:or,form:Kt},Ut,{className:Ft}),_e)}var Br=ct||"input";if(typeof Br=="string"){var Vr=Ut.innerRef,Wr=_objectWithoutPropertiesLoose(Ut,["innerRef"]);return reactExports.createElement(Br,_extends$1({ref:Vr},or,Wr,{className:Ft}),_e)}return reactExports.createElement(Br,_extends$1({},or,Ut,{className:Ft}),_e)}var Form=reactExports.forwardRef(function(o,i){var s=o.action,_=_objectWithoutPropertiesLoose(o,["action"]),_e=s??"#",ct=useFormikContext(),Mt=ct.handleReset,Ft=ct.handleSubmit;return reactExports.createElement("form",_extends$1({onSubmit:Ft,ref:i,onReset:Mt,action:_e},_))});Form.displayName="Form";function connect(o){var i=function(_e){return reactExports.createElement(FormikConsumer,null,function(ct){return reactExports.createElement(o,_extends$1({},_e,{formik:ct}))})},s=o.displayName||o.name||o.constructor&&o.constructor.name||"Component";return i.WrappedComponent=o,i.displayName="FormikConnect("+s+")",hoistNonReactStatics$1(i,o)}var move=function(i,s,_){var _e=copyArrayLike(i),ct=_e[s];return _e.splice(s,1),_e.splice(_,0,ct),_e},swap=function(i,s,_){var _e=copyArrayLike(i),ct=_e[s];return _e[s]=_e[_],_e[_]=ct,_e},insert=function(i,s,_){var _e=copyArrayLike(i);return _e.splice(s,0,_),_e},replace$1=function(i,s,_){var _e=copyArrayLike(i);return _e[s]=_,_e},copyArrayLike=function(i){if(i){if(Array.isArray(i))return[].concat(i);var s=Object.keys(i).map(function(_){return parseInt(_)}).reduce(function(_,_e){return _e>_?_e:_},0);return Array.from(_extends$1({},i,{length:s+1}))}else return[]},createAlterationHandler=function(i,s){var _=typeof i=="function"?i:s;return function(_e){if(Array.isArray(_e)||isObject$2(_e)){var ct=copyArrayLike(_e);return _(ct)}return _e}},FieldArrayInner=function(o){_inheritsLoose(i,o);function i(_){var _e;return _e=o.call(this,_)||this,_e.updateArrayField=function(ct,Mt,Ft){var Ut=_e.props,Xt=Ut.name,Kt=Ut.formik.setFormikState;Kt(function(nr){var rr=createAlterationHandler(Ft,ct),or=createAlterationHandler(Mt,ct),hr=setIn(nr.values,Xt,ct(getIn(nr.values,Xt))),fr=Ft?rr(getIn(nr.errors,Xt)):void 0,yr=Mt?or(getIn(nr.touched,Xt)):void 0;return isEmptyArray(fr)&&(fr=void 0),isEmptyArray(yr)&&(yr=void 0),_extends$1({},nr,{values:hr,errors:Ft?setIn(nr.errors,Xt,fr):nr.errors,touched:Mt?setIn(nr.touched,Xt,yr):nr.touched})})},_e.push=function(ct){return _e.updateArrayField(function(Mt){return[].concat(copyArrayLike(Mt),[cloneDeep(ct)])},!1,!1)},_e.handlePush=function(ct){return function(){return _e.push(ct)}},_e.swap=function(ct,Mt){return _e.updateArrayField(function(Ft){return swap(Ft,ct,Mt)},!0,!0)},_e.handleSwap=function(ct,Mt){return function(){return _e.swap(ct,Mt)}},_e.move=function(ct,Mt){return _e.updateArrayField(function(Ft){return move(Ft,ct,Mt)},!0,!0)},_e.handleMove=function(ct,Mt){return function(){return _e.move(ct,Mt)}},_e.insert=function(ct,Mt){return _e.updateArrayField(function(Ft){return insert(Ft,ct,Mt)},function(Ft){return insert(Ft,ct,null)},function(Ft){return insert(Ft,ct,null)})},_e.handleInsert=function(ct,Mt){return function(){return _e.insert(ct,Mt)}},_e.replace=function(ct,Mt){return _e.updateArrayField(function(Ft){return replace$1(Ft,ct,Mt)},!1,!1)},_e.handleReplace=function(ct,Mt){return function(){return _e.replace(ct,Mt)}},_e.unshift=function(ct){var Mt=-1;return _e.updateArrayField(function(Ft){var Ut=Ft?[ct].concat(Ft):[ct];return Mt=Ut.length,Ut},function(Ft){return Ft?[null].concat(Ft):[null]},function(Ft){return Ft?[null].concat(Ft):[null]}),Mt},_e.handleUnshift=function(ct){return function(){return _e.unshift(ct)}},_e.handleRemove=function(ct){return function(){return _e.remove(ct)}},_e.handlePop=function(){return function(){return _e.pop()}},_e.remove=_e.remove.bind(_assertThisInitialized(_e)),_e.pop=_e.pop.bind(_assertThisInitialized(_e)),_e}var s=i.prototype;return s.componentDidUpdate=function(_e){this.props.validateOnChange&&this.props.formik.validateOnChange&&!isEqual(getIn(_e.formik.values,_e.name),getIn(this.props.formik.values,this.props.name))&&this.props.formik.validateForm(this.props.formik.values)},s.remove=function(_e){var ct;return this.updateArrayField(function(Mt){var Ft=Mt?copyArrayLike(Mt):[];return ct||(ct=Ft[_e]),isFunction(Ft.splice)&&Ft.splice(_e,1),isFunction(Ft.every)&&Ft.every(function(Ut){return Ut===void 0})?[]:Ft},!0,!0),ct},s.pop=function(){var _e;return this.updateArrayField(function(ct){var Mt=ct.slice();return _e||(_e=Mt&&Mt.pop&&Mt.pop()),Mt},!0,!0),_e},s.render=function(){var _e={push:this.push,pop:this.pop,swap:this.swap,move:this.move,insert:this.insert,replace:this.replace,unshift:this.unshift,remove:this.remove,handlePush:this.handlePush,handlePop:this.handlePop,handleSwap:this.handleSwap,handleMove:this.handleMove,handleInsert:this.handleInsert,handleReplace:this.handleReplace,handleUnshift:this.handleUnshift,handleRemove:this.handleRemove},ct=this.props,Mt=ct.component,Ft=ct.render,Ut=ct.children,Xt=ct.name,Kt=ct.formik,nr=_objectWithoutPropertiesLoose(Kt,["validate","validationSchema"]),rr=_extends$1({},_e,{form:nr,name:Xt});return Mt?reactExports.createElement(Mt,rr):Ft?Ft(rr):Ut?typeof Ut=="function"?Ut(rr):isEmptyChildren(Ut)?null:reactExports.Children.only(Ut):null},i}(reactExports.Component);FieldArrayInner.defaultProps={validateOnChange:!0};var ErrorMessageImpl=function(o){_inheritsLoose(i,o);function i(){return o.apply(this,arguments)||this}var s=i.prototype;return s.shouldComponentUpdate=function(_e){return getIn(this.props.formik.errors,this.props.name)!==getIn(_e.formik.errors,this.props.name)||getIn(this.props.formik.touched,this.props.name)!==getIn(_e.formik.touched,this.props.name)||Object.keys(this.props).length!==Object.keys(_e).length},s.render=function(){var _e=this.props,ct=_e.component,Mt=_e.formik,Ft=_e.render,Ut=_e.children,Xt=_e.name,Kt=_objectWithoutPropertiesLoose(_e,["component","formik","render","children","name"]),nr=getIn(Mt.touched,Xt),rr=getIn(Mt.errors,Xt);return nr&&rr?Ft?isFunction(Ft)?Ft(rr):null:Ut?isFunction(Ut)?Ut(rr):null:ct?reactExports.createElement(ct,Kt,rr):rr:null},i}(reactExports.Component),ErrorMessage=connect(ErrorMessageImpl);const scriptRel="modulepreload",assetsURL=function(o){return"/"+o},seen={},__vitePreload=function(i,s,_){let _e=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const Mt=document.querySelector("meta[property=csp-nonce]"),Ft=(Mt==null?void 0:Mt.nonce)||(Mt==null?void 0:Mt.getAttribute("nonce"));_e=Promise.allSettled(s.map(Ut=>{if(Ut=assetsURL(Ut),Ut in seen)return;seen[Ut]=!0;const Xt=Ut.endsWith(".css"),Kt=Xt?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${Ut}"]${Kt}`))return;const nr=document.createElement("link");if(nr.rel=Xt?"stylesheet":scriptRel,Xt||(nr.as="script"),nr.crossOrigin="",nr.href=Ut,Ft&&nr.setAttribute("nonce",Ft),document.head.appendChild(nr),Xt)return new Promise((rr,or)=>{nr.addEventListener("load",rr),nr.addEventListener("error",()=>or(new Error(`Unable to preload CSS for ${Ut}`)))})}))}function ct(Mt){const Ft=new Event("vite:preloadError",{cancelable:!0});if(Ft.payload=Mt,window.dispatchEvent(Ft),!Ft.defaultPrevented)throw Mt}return _e.then(Mt=>{for(const Ft of Mt||[])Ft.status==="rejected"&&ct(Ft.reason);return i().catch(ct)})};function styleInject(o,i){i===void 0&&(i={});var s=i.insertAt;if(o&&typeof document<"u"){var _=document.head||document.getElementsByTagName("head")[0],_e=document.createElement("style");_e.type="text/css",s==="top"&&_.firstChild?_.insertBefore(_e,_.firstChild):_.appendChild(_e),_e.styleSheet?_e.styleSheet.cssText=o:_e.appendChild(document.createTextNode(o))}}var css_248z$2='*,:after,:before{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }/*! tailwindcss v3.4.14 | MIT License | https://tailwindcss.com*/*,:after,:before{border:0 solid #e5e7eb;box-sizing:border-box}:after,:before{--tw-content:""}:host,html{-webkit-text-size-adjust:100%;font-feature-settings:normal;-webkit-tap-highlight-color:transparent;font-family:ui-sans-serif,system-ui,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;font-variation-settings:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4}body{line-height:inherit;margin:0}hr{border-top-width:1px;color:inherit;height:0}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-feature-settings:normal;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:1em;font-variation-settings:normal}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{border-collapse:collapse;border-color:inherit;text-indent:0}button,input,optgroup,select,textarea{font-feature-settings:inherit;color:inherit;font-family:inherit;font-size:100%;font-variation-settings:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0}fieldset,legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{color:#9ca3af;opacity:1}input::placeholder,textarea::placeholder{color:#9ca3af;opacity:1}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{height:auto;max-width:100%}[hidden]:where(:not([hidden=until-found])){display:none}.hide-spinner::-webkit-inner-spin-button,.hide-spinner::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.hide-spinner[type=number]{-moz-appearance:textfield}.loader-icon{animation:loading 1s linear infinite alternate;box-shadow:10px 0 hsla(234,8%,47%,.13),-10px 0 #6d6f81}@keyframes loading{0%{background:#6d6f81;box-shadow:10px 0 #6d6f81,-10px 0 hsla(234,8%,47%,.13)}33%{background:hsla(234,8%,47%,.13);box-shadow:10px 0 #6d6f81,-10px 0 hsla(234,8%,47%,.13)}66%{background:hsla(234,8%,47%,.13);box-shadow:10px 0 hsla(234,8%,47%,.13),-10px 0 #6d6f81}}.ns-sr-only{clip:rect(0,0,0,0);border-width:0;height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px}.ns-pointer-events-none{pointer-events:none}.ns-invisible{visibility:hidden}.\\!ns-static{position:static!important}.ns-fixed{position:fixed}.ns-absolute{position:absolute}.ns-relative{position:relative}.ns-inset-0{inset:0}.ns-inset-x-0{left:0;right:0}.ns-inset-y-0{bottom:0;top:0}.-ns-bottom-10{bottom:-2.5rem}.-ns-bottom-6{bottom:-1.5rem}.-ns-left-\\[40px\\]{left:-40px}.-ns-right-10{right:-2.5rem}.-ns-top-8{top:-2rem}.-ns-top-\\[9px\\]{top:-9px}.ns--bottom-12{bottom:-3rem}.ns--left-12{left:-3rem}.ns--right-12{right:-3rem}.ns--top-12{top:-3rem}.ns-bottom-0{bottom:0}.ns-bottom-10{bottom:2.5rem}.ns-bottom-14{bottom:3.5rem}.ns-left-0{left:0}.ns-left-0\\.5{left:.125rem}.ns-left-1\\/2{left:50%}.ns-left-5{left:1.25rem}.ns-left-\\[10px\\]{left:10px}.ns-left-\\[24px\\]{left:24px}.ns-left-\\[50\\%\\]{left:50%}.ns-right-0{right:0}.ns-right-10{right:2.5rem}.ns-right-14{right:3.5rem}.ns-right-3{right:.75rem}.ns-right-4{right:1rem}.ns-right-5{right:1.25rem}.ns-right-6{right:1.5rem}.ns-right-8{right:2rem}.ns-right-\\[25\\%\\]{right:25%}.ns-top-0{top:0}.ns-top-1{top:.25rem}.ns-top-1\\.5{top:.375rem}.ns-top-1\\/2{top:50%}.ns-top-14{top:3.5rem}.ns-top-24{top:6rem}.ns-top-3{top:.75rem}.ns-top-4{top:1rem}.ns-top-5{top:1.25rem}.ns-top-7{top:1.75rem}.ns-top-8{top:2rem}.ns-top-\\[200px\\]{top:200px}.ns-top-\\[20px\\]{top:20px}.ns-top-\\[45\\%\\]{top:45%}.ns-top-\\[50\\%\\]{top:50%}.ns-top-\\[8px\\]{top:8px}.ns-z-10{z-index:10}.ns-z-20{z-index:20}.ns-z-50{z-index:50}.ns-z-998{z-index:998}.ns-z-999{z-index:999}.ns-z-\\[3\\]{z-index:3}.\\!ns-m-0{margin:0!important}.\\!ns-mx-0{margin-left:0!important;margin-right:0!important}.\\!ns-my-0{margin-bottom:0!important;margin-top:0!important}.ns-mx-0{margin-left:0;margin-right:0}.ns-mx-4{margin-left:1rem;margin-right:1rem}.ns-mx-auto{margin-left:auto;margin-right:auto}.ns-my-5{margin-bottom:1.25rem;margin-top:1.25rem}.ns-my-auto{margin-bottom:auto;margin-top:auto}.\\!ns-mb-0{margin-bottom:0!important}.-ns-mb-5{margin-bottom:-1.25rem}.-ns-ml-7{margin-left:-1.75rem}.ns--ml-4{margin-left:-1rem}.ns--mt-4{margin-top:-1rem}.ns-mb-1{margin-bottom:.25rem}.ns-mb-5{margin-bottom:1.25rem}.ns-mb-6{margin-bottom:1.5rem}.ns-mb-7{margin-bottom:1.75rem}.ns-ml-1{margin-left:.25rem}.ns-ml-2{margin-left:.5rem}.ns-ml-4{margin-left:1rem}.ns-ml-5{margin-left:1.25rem}.ns-mr-2{margin-right:.5rem}.ns-mr-5{margin-right:1.25rem}.ns-mt-1{margin-top:.25rem}.ns-mt-2{margin-top:.5rem}.ns-mt-24{margin-top:6rem}.ns-mt-3{margin-top:.75rem}.ns-mt-4{margin-top:1rem}.ns-mt-5{margin-top:1.25rem}.ns-mt-auto{margin-top:auto}.ns-box-border{box-sizing:border-box}.ns-line-clamp-1{-webkit-line-clamp:1}.ns-line-clamp-1,.ns-line-clamp-2{-webkit-box-orient:vertical;display:-webkit-box;overflow:hidden}.ns-line-clamp-2{-webkit-line-clamp:2}.ns-line-clamp-4{-webkit-box-orient:vertical;-webkit-line-clamp:4;display:-webkit-box;overflow:hidden}.\\!ns-block{display:block!important}.ns-block{display:block}.ns-inline-block{display:inline-block}.ns-flex{display:flex}.ns-inline-flex{display:inline-flex}.ns-grid{display:grid}.ns-hidden{display:none}.ns-aspect-square{aspect-ratio:1/1}.ns-h-0\\.5{height:.125rem}.ns-h-10{height:2.5rem}.ns-h-100{height:25rem}.ns-h-11{height:2.75rem}.ns-h-12{height:3rem}.ns-h-14{height:3.5rem}.ns-h-16{height:4rem}.ns-h-2{height:.5rem}.ns-h-20{height:5rem}.ns-h-22\\.5{height:5.625rem}.ns-h-24{height:6rem}.ns-h-25{height:6.25rem}.ns-h-3{height:.75rem}.ns-h-4{height:1rem}.ns-h-4\\/5{height:80%}.ns-h-5{height:1.25rem}.ns-h-52{height:13rem}.ns-h-6{height:1.5rem}.ns-h-69{height:17.25rem}.ns-h-7{height:1.75rem}.ns-h-8{height:2rem}.ns-h-87\\.5{height:21.875rem}.ns-h-9{height:2.25rem}.ns-h-\\[100px\\]{height:100px}.ns-h-\\[100vh\\]{height:100vh}.ns-h-\\[2px\\]{height:2px}.ns-h-\\[70vh\\]{height:70vh}.ns-h-\\[var\\(--radix-select-trigger-height\\)\\]{height:var(--radix-select-trigger-height)}.ns-h-auto{height:auto}.ns-h-fit{height:-moz-fit-content;height:fit-content}.ns-h-full{height:100%}.ns-h-px{height:1px}.ns-max-h-75{max-height:18.75rem}.ns-max-h-96{max-height:24rem}.ns-min-h-26\\.25{min-height:6.5625rem}.ns-min-h-screen{min-height:100vh}.\\!ns-w-12{width:3rem!important}.ns-w-1\\/2{width:50%}.ns-w-10{width:2.5rem}.ns-w-14{width:3.5rem}.ns-w-16{width:4rem}.ns-w-2{width:.5rem}.ns-w-22\\.5{width:5.625rem}.ns-w-25{width:6.25rem}.ns-w-28{width:7rem}.ns-w-3{width:.75rem}.ns-w-3\\/4{width:75%}.ns-w-36{width:9rem}.ns-w-4{width:1rem}.ns-w-5{width:1.25rem}.ns-w-52{width:13rem}.ns-w-56{width:14rem}.ns-w-6{width:1.5rem}.ns-w-60{width:15rem}.ns-w-62\\.5{width:15.632rem}.ns-w-7{width:1.75rem}.ns-w-75{width:18.75rem}.ns-w-8{width:2rem}.ns-w-9\\/10{width:90%}.ns-w-9\\/12{width:75%}.ns-w-\\[100px\\]{width:100px}.ns-w-\\[100vh\\]{width:100vh}.ns-w-\\[150px\\]{width:150px}.ns-w-\\[360px\\]{width:360px}.ns-w-\\[70px\\]{width:70px}.ns-w-\\[70vh\\]{width:70vh}.ns-w-\\[80\\%\\]{width:80%}.ns-w-fit{width:-moz-fit-content;width:fit-content}.ns-w-full{width:100%}.ns-w-px{width:1px}.\\!ns-min-w-48{min-width:12rem!important}.ns-min-w-0{min-width:0}.ns-min-w-20{min-width:5rem}.ns-min-w-36{min-width:9rem}.ns-min-w-4{min-width:1rem}.ns-min-w-5{min-width:1.25rem}.ns-min-w-6{min-width:1.5rem}.ns-min-w-80{min-width:20rem}.ns-min-w-96{min-width:24rem}.ns-min-w-\\[260px\\]{min-width:260px}.ns-min-w-\\[8rem\\]{min-width:8rem}.ns-min-w-\\[var\\(--radix-select-trigger-width\\)\\]{min-width:var(--radix-select-trigger-width)}.\\!ns-max-w-2xl{max-width:42rem!important}.\\!ns-max-w-3xl{max-width:48rem!important}.\\!ns-max-w-xs{max-width:20rem!important}.ns-max-w-100{max-width:25rem}.ns-max-w-108{max-width:27rem}.ns-max-w-72{max-width:18rem}.ns-max-w-\\[190px\\]{max-width:190px}.ns-max-w-\\[450px\\]{max-width:450px}.ns-max-w-\\[520px\\]{max-width:520px}.ns-max-w-\\[796px\\]{max-width:796px}.ns-max-w-lg{max-width:32rem}.ns-max-w-screen{max-width:100vw}.ns-max-w-xs{max-width:20rem}.ns-flex-1{flex:1 1 0%}.ns-flex-shrink{flex-shrink:1}.ns-shrink-0{flex-shrink:0}.ns-flex-grow{flex-grow:1}.ns-grow-0{flex-grow:0}.\\!ns-basis-72{flex-basis:18rem!important}.ns-basis-full{flex-basis:100%}.-ns-translate-x-1\\/2{--tw-translate-x:-50%}.-ns-translate-x-1\\/2,.-ns-translate-x-full{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.-ns-translate-x-full{--tw-translate-x:-100%}.-ns-translate-y-1\\/2{--tw-translate-y:-50%}.-ns-translate-y-1\\/2,.ns--translate-x-1\\/2{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.ns--translate-x-1\\/2{--tw-translate-x:-50%}.ns--translate-y-1\\/2{--tw-translate-y:-50%}.ns--translate-y-1\\/2,.ns-translate-x-0{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.ns-translate-x-0{--tw-translate-x:0px}.ns-translate-x-\\[-50\\%\\]{--tw-translate-x:-50%}.ns-translate-x-\\[-50\\%\\],.ns-translate-x-full{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.ns-translate-x-full{--tw-translate-x:100%}.ns-translate-y-0{--tw-translate-y:0px}.ns-translate-y-0,.ns-translate-y-\\[-50\\%\\]{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.ns-translate-y-\\[-50\\%\\]{--tw-translate-y:-50%}.-ns-rotate-45{--tw-rotate:-45deg}.-ns-rotate-45,.ns-rotate-90{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.ns-rotate-90{--tw-rotate:90deg}.ns-scale-0{--tw-scale-x:0;--tw-scale-y:0}.ns-scale-0,.ns-scale-x-\\[-1\\]{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.ns-scale-x-\\[-1\\]{--tw-scale-x:-1}.ns-transform{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@keyframes ns-caret-blink{0%,70%,to{opacity:1}20%,50%{opacity:0}}.ns-animate-caret-blink{animation:ns-caret-blink 1.25s ease-out infinite}.\\!ns-cursor-not-allowed{cursor:not-allowed!important}.ns-cursor-auto{cursor:auto}.ns-cursor-default{cursor:default}.ns-cursor-not-allowed{cursor:not-allowed}.ns-cursor-pointer{cursor:pointer}.ns-select-none{-webkit-user-select:none;-moz-user-select:none;user-select:none}.ns-list-outside{list-style-position:outside}.ns-list-disc{list-style-type:disc}.ns-appearance-none{-webkit-appearance:none;-moz-appearance:none;appearance:none}.ns-grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.ns-flex-row{flex-direction:row}.ns-flex-col{flex-direction:column}.ns-flex-col-reverse{flex-direction:column-reverse}.ns-flex-wrap{flex-wrap:wrap}.ns-flex-nowrap{flex-wrap:nowrap}.ns-content-center{align-content:center}.ns-items-end{align-items:flex-end}.ns-items-center{align-items:center}.ns-justify-start{justify-content:flex-start}.ns-justify-end{justify-content:flex-end}.\\!ns-justify-center{justify-content:center!important}.ns-justify-center{justify-content:center}.ns-justify-between{justify-content:space-between}.ns-gap-1{gap:.25rem}.ns-gap-1\\.5{gap:.375rem}.ns-gap-10{gap:2.5rem}.ns-gap-2{gap:.5rem}.ns-gap-3{gap:.75rem}.ns-gap-4{gap:1rem}.ns-gap-5{gap:1.25rem}.ns-gap-6{gap:1.5rem}.ns-gap-7{gap:1.75rem}.ns-gap-9{gap:2.25rem}.ns-gap-\\[10px\\]{gap:10px}.ns-gap-\\[6px\\]{gap:6px}.ns-gap-x-2{-moz-column-gap:.5rem;column-gap:.5rem}.ns-gap-x-8{-moz-column-gap:2rem;column-gap:2rem}.ns-gap-y-2{row-gap:.5rem}.ns-gap-y-8{row-gap:2rem}.ns-space-x-2>:not([hidden])~:not([hidden]){--tw-space-x-reverse:0;margin-left:calc(.5rem*(1 - var(--tw-space-x-reverse)));margin-right:calc(.5rem*var(--tw-space-x-reverse))}.ns-space-x-3>:not([hidden])~:not([hidden]){--tw-space-x-reverse:0;margin-left:calc(.75rem*(1 - var(--tw-space-x-reverse)));margin-right:calc(.75rem*var(--tw-space-x-reverse))}.ns-space-y-1>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-bottom:calc(.25rem*var(--tw-space-y-reverse));margin-top:calc(.25rem*(1 - var(--tw-space-y-reverse)))}.ns-space-y-1\\.5>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-bottom:calc(.375rem*var(--tw-space-y-reverse));margin-top:calc(.375rem*(1 - var(--tw-space-y-reverse)))}.ns-space-y-2>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-bottom:calc(.5rem*var(--tw-space-y-reverse));margin-top:calc(.5rem*(1 - var(--tw-space-y-reverse)))}.ns-space-y-4>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-bottom:calc(1rem*var(--tw-space-y-reverse));margin-top:calc(1rem*(1 - var(--tw-space-y-reverse)))}.ns-space-y-5>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-bottom:calc(1.25rem*var(--tw-space-y-reverse));margin-top:calc(1.25rem*(1 - var(--tw-space-y-reverse)))}.ns-space-y-6>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-bottom:calc(1.5rem*var(--tw-space-y-reverse));margin-top:calc(1.5rem*(1 - var(--tw-space-y-reverse)))}.ns-space-y-\\[13px\\]>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-bottom:calc(13px*var(--tw-space-y-reverse));margin-top:calc(13px*(1 - var(--tw-space-y-reverse)))}.ns-place-self-center{place-self:center}.ns-self-end{align-self:flex-end}.ns-self-center{align-self:center}.ns-overflow-auto{overflow:auto}.ns-overflow-hidden{overflow:hidden}.ns-overflow-y-auto{overflow-y:auto}.ns-overflow-x-hidden{overflow-x:hidden}.ns-truncate{overflow:hidden;white-space:nowrap}.ns-text-ellipsis,.ns-truncate{text-overflow:ellipsis}.ns-whitespace-nowrap{white-space:nowrap}.ns-rounded{border-radius:.25rem}.ns-rounded-1\\/2{border-radius:50%}.ns-rounded-10{border-radius:.625rem}.ns-rounded-16{border-radius:1rem}.ns-rounded-2{border-radius:.125rem}.ns-rounded-20{border-radius:1.25rem}.ns-rounded-24,.ns-rounded-3xl{border-radius:1.5rem}.ns-rounded-4{border-radius:.25rem}.ns-rounded-40{border-radius:2.5rem}.ns-rounded-5{border-radius:5px}.ns-rounded-68{border-radius:4.25rem}.ns-rounded-8{border-radius:.5rem}.ns-rounded-full{border-radius:9999px}.ns-rounded-lg{border-radius:.5rem}.ns-rounded-md{border-radius:.375rem}.ns-rounded-sm{border-radius:.125rem}.ns-rounded-xl{border-radius:.75rem}.ns-rounded-b-lg{border-bottom-left-radius:.5rem;border-bottom-right-radius:.5rem}.ns-rounded-t-\\[10px\\]{border-top-left-radius:10px;border-top-right-radius:10px}.ns-rounded-bl-10{border-bottom-left-radius:.625rem}.ns-rounded-tl-10{border-top-left-radius:.625rem}.\\!ns-border-0{border-width:0!important}.ns-border{border-width:1px}.ns-border-0{border-width:0}.ns-border-1{border-width:.094rem}.ns-border-1\\.5{border-width:1.5px}.ns-border-2{border-width:2px}.ns-border-4{border-width:4px}.ns-border-8{border-width:8px}.ns-border-\\[1px\\]{border-width:1px}.ns-border-b{border-bottom-width:1px}.ns-border-b-0{border-bottom-width:0}.ns-border-b-2{border-bottom-width:2px}.ns-border-l{border-left-width:1px}.ns-border-r{border-right-width:1px}.ns-border-t{border-top-width:1px}.ns-border-solid{border-style:solid}.ns-border-none{border-style:none}.\\!ns-border-blue-600{--tw-border-opacity:1!important;border-color:rgb(0 176 202/var(--tw-border-opacity))!important}.\\!ns-border-green-850{--tw-border-opacity:1!important;border-color:rgb(144 180 0/var(--tw-border-opacity))!important}.\\!ns-border-yellow-900{--tw-border-opacity:1!important;border-color:rgb(235 151 0/var(--tw-border-opacity))!important}.ns-border-black{--tw-border-opacity:1;border-color:rgb(8 8 27/var(--tw-border-opacity))}.ns-border-black-pure-opacity-10{border-color:rgba(0,0,0,.1)}.ns-border-blue-700{--tw-border-opacity:1;border-color:rgb(0 124 146/var(--tw-border-opacity))}.ns-border-grey-100{--tw-border-opacity:1;border-color:rgb(216 219 224/var(--tw-border-opacity))}.ns-border-grey-200{--tw-border-opacity:1;border-color:rgb(201 204 212/var(--tw-border-opacity))}.ns-border-grey-300{--tw-border-opacity:1;border-color:rgb(168 172 184/var(--tw-border-opacity))}.ns-border-grey-400{--tw-border-opacity:1;border-color:rgb(138 141 156/var(--tw-border-opacity))}.ns-border-grey-600{--tw-border-opacity:1;border-color:rgb(82 83 101/var(--tw-border-opacity))}.ns-border-lime-500{--tw-border-opacity:1;border-color:rgb(52 182 36/var(--tw-border-opacity))}.ns-border-lime-600{--tw-border-opacity:1;border-color:rgb(41 167 26/var(--tw-border-opacity))}.ns-border-neutral-200{--tw-border-opacity:1;border-color:rgb(229 229 229/var(--tw-border-opacity))}.ns-border-red-500{--tw-border-opacity:1;border-color:rgb(255 0 0/var(--tw-border-opacity))}.ns-border-red-600{--tw-border-opacity:1;border-color:rgb(230 0 0/var(--tw-border-opacity))}.ns-border-transparent{border-color:transparent}.ns-border-white{--tw-border-opacity:1;border-color:rgb(255 255 255/var(--tw-border-opacity))}.ns-border-white-100{--tw-border-opacity:1;border-color:rgb(235 237 239/var(--tw-border-opacity))}.ns-border-yellow-900{--tw-border-opacity:1;border-color:rgb(235 151 0/var(--tw-border-opacity))}.ns-border-opacity-20{--tw-border-opacity:0.2}.\\!ns-bg-black{--tw-bg-opacity:1!important;background-color:rgb(8 8 27/var(--tw-bg-opacity))!important}.\\!ns-bg-blue-700{--tw-bg-opacity:1!important;background-color:rgb(0 124 146/var(--tw-bg-opacity))!important}.\\!ns-bg-grey-100{--tw-bg-opacity:1!important;background-color:rgb(216 219 224/var(--tw-bg-opacity))!important}.\\!ns-bg-grey-700{--tw-bg-opacity:1!important;background-color:rgb(57 57 73/var(--tw-bg-opacity))!important}.\\!ns-bg-transparent{background-color:transparent!important}.ns-bg-black{--tw-bg-opacity:1;background-color:rgb(8 8 27/var(--tw-bg-opacity))}.ns-bg-black-pure-opacity-80{background-color:rgba(0,0,0,.8)}.ns-bg-black\\/80{background-color:rgba(8,8,27,.8)}.ns-bg-blue-600{--tw-bg-opacity:1;background-color:rgb(0 176 202/var(--tw-bg-opacity))}.ns-bg-blue-700{--tw-bg-opacity:1;background-color:rgb(0 124 146/var(--tw-bg-opacity))}.ns-bg-gray-600{--tw-bg-opacity:1;background-color:rgb(75 85 99/var(--tw-bg-opacity))}.ns-bg-green-900{--tw-bg-opacity:1;background-color:rgb(66 134 0/var(--tw-bg-opacity))}.ns-bg-grey-100{--tw-bg-opacity:1;background-color:rgb(216 219 224/var(--tw-bg-opacity))}.ns-bg-grey-300{--tw-bg-opacity:1;background-color:rgb(168 172 184/var(--tw-bg-opacity))}.ns-bg-grey-50{--tw-bg-opacity:1;background-color:rgb(225 228 233/var(--tw-bg-opacity))}.ns-bg-grey-500{--tw-bg-opacity:1;background-color:rgb(109 111 129/var(--tw-bg-opacity))}.ns-bg-grey-600{--tw-bg-opacity:1;background-color:rgb(82 83 101/var(--tw-bg-opacity))}.ns-bg-grey-700{--tw-bg-opacity:1;background-color:rgb(57 57 73/var(--tw-bg-opacity))}.ns-bg-grey-75{--tw-bg-opacity:1;background-color:rgb(217 217 217/var(--tw-bg-opacity))}.ns-bg-grey-900{--tw-bg-opacity:1;background-color:rgb(20 24 39/var(--tw-bg-opacity))}.ns-bg-lime-600{--tw-bg-opacity:1;background-color:rgb(41 167 26/var(--tw-bg-opacity))}.ns-bg-neutral-100{--tw-bg-opacity:1;background-color:rgb(245 245 245/var(--tw-bg-opacity))}.ns-bg-neutral-950{--tw-bg-opacity:1;background-color:rgb(10 10 10/var(--tw-bg-opacity))}.ns-bg-red-600{--tw-bg-opacity:1;background-color:rgb(230 0 0/var(--tw-bg-opacity))}.ns-bg-transparent{background-color:transparent}.ns-bg-white{--tw-bg-opacity:1;background-color:rgb(255 255 255/var(--tw-bg-opacity))}.ns-bg-white-25{--tw-bg-opacity:1;background-color:rgb(245 246 247/var(--tw-bg-opacity))}.ns-bg-white-50{--tw-bg-opacity:1;background-color:rgb(242 244 247/var(--tw-bg-opacity))}.ns-bg-opacity-40{--tw-bg-opacity:0.4}.ns-bg-gradient-radial{background-image:radial-gradient(var(--tw-gradient-stops))}.ns-bg-lets-get-started{background-image:url(src/images/lets-get-started-background.svg)}.ns-from-purple-800{--tw-gradient-from:#9c2aa0 var(--tw-gradient-from-position);--tw-gradient-to:rgba(156,42,160,0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from),var(--tw-gradient-to)}.ns-to-red-600{--tw-gradient-to:#e60000 var(--tw-gradient-to-position)}.ns-bg-cover{background-size:cover}.ns-bg-\\[70px_1px\\]{background-position:70px 1px}.ns-bg-center{background-position:50%}.ns-fill-current{fill:currentColor}.ns-object-cover{-o-object-fit:cover;object-fit:cover}.\\!ns-p-0{padding:0!important}.ns-p-0{padding:0}.ns-p-1{padding:.25rem}.ns-p-10{padding:2.5rem}.ns-p-2{padding:.5rem}.ns-p-3{padding:.75rem}.ns-p-4{padding:1rem}.ns-p-5{padding:1.25rem}.ns-p-6{padding:1.5rem}.\\!ns-px-0{padding-left:0!important;padding-right:0!important}.\\!ns-py-0{padding-bottom:0!important;padding-top:0!important}.\\!ns-py-7{padding-bottom:1.75rem!important;padding-top:1.75rem!important}.ns-px-10{padding-left:2.5rem;padding-right:2.5rem}.ns-px-2{padding-left:.5rem;padding-right:.5rem}.ns-px-3{padding-left:.75rem;padding-right:.75rem}.ns-px-4{padding-left:1rem;padding-right:1rem}.ns-px-5{padding-left:1.25rem;padding-right:1.25rem}.ns-px-7{padding-left:1.75rem;padding-right:1.75rem}.ns-px-8{padding-left:2rem;padding-right:2rem}.ns-py-1{padding-bottom:.25rem;padding-top:.25rem}.ns-py-1\\.5{padding-bottom:.375rem;padding-top:.375rem}.ns-py-2{padding-bottom:.5rem;padding-top:.5rem}.ns-py-3{padding-bottom:.75rem;padding-top:.75rem}.ns-py-4{padding-bottom:1rem;padding-top:1rem}.ns-py-5{padding-bottom:1.25rem;padding-top:1.25rem}.ns-py-6{padding-bottom:1.5rem;padding-top:1.5rem}.ns-py-\\[10px\\]{padding-bottom:10px;padding-top:10px}.ns-py-\\[6px\\]{padding-bottom:6px;padding-top:6px}.ns-pb-0{padding-bottom:0}.ns-pb-11{padding-bottom:2.75rem}.ns-pb-4{padding-bottom:1rem}.ns-pb-5{padding-bottom:1.25rem}.ns-pb-6{padding-bottom:1.5rem}.ns-pl-4{padding-left:1rem}.ns-pl-5{padding-left:1.25rem}.ns-pr-4{padding-right:1rem}.ns-pr-5{padding-right:1.25rem}.ns-pr-9{padding-right:2.25rem}.ns-pt-0{padding-top:0}.ns-pt-1{padding-top:.25rem}.ns-pt-10{padding-top:2.5rem}.ns-pt-14{padding-top:3.5rem}.ns-pt-2{padding-top:.5rem}.ns-pt-20{padding-top:5rem}.ns-pt-3{padding-top:.75rem}.ns-pt-3\\.5{padding-top:.875rem}.ns-pt-4{padding-top:1rem}.ns-pt-6{padding-top:1.5rem}.ns-pt-8{padding-top:2rem}.ns-text-left{text-align:left}.ns-text-center{text-align:center}.\\!ns-text-2xl{font-size:22px!important;font-weight:500!important;line-height:140%!important}.ns-text-2xl{font-size:22px;font-weight:500;line-height:140%}.ns-text-3xl{font-size:24px}.ns-text-3xl,.ns-text-4xl{font-weight:500;letter-spacing:-.03em;line-height:120%}.ns-text-4xl{font-size:30px}.ns-text-\\[25px\\]{font-size:25px}.ns-text-\\[45px\\]{font-size:45px}.ns-text-base{font-size:16px;font-weight:400;line-height:140%}.ns-text-lg{font-size:18px;font-weight:500;letter-spacing:-.01em;line-height:120%}.ns-text-sm{font-size:14px}.ns-text-sm,.ns-text-xl{font-weight:400;line-height:140%}.ns-text-xl{font-size:18px}.ns-text-xs{font-size:12px;font-weight:400;line-height:130%}.\\!ns-font-medium{font-weight:500!important}.ns-font-bold{font-weight:700}.ns-font-extrabold{font-weight:800}.ns-font-medium{font-weight:500}.ns-font-normal{font-weight:400}.ns-font-semibold{font-weight:600}.ns-uppercase{text-transform:uppercase}.ns-lowercase{text-transform:lowercase}.ns-capitalize{text-transform:capitalize}.ns-leading-9{line-height:2.25rem}.ns-leading-\\[120\\%\\]{line-height:120%}.ns-leading-\\[18px\\]{line-height:18px}.ns-leading-none{line-height:1}.ns-tracking-tight{letter-spacing:-.025em}.\\!ns-text-black{--tw-text-opacity:1!important;color:rgb(8 8 27/var(--tw-text-opacity))!important}.\\!ns-text-green-850{--tw-text-opacity:1!important;color:rgb(144 180 0/var(--tw-text-opacity))!important}.\\!ns-text-grey-300{--tw-text-opacity:1!important;color:rgb(168 172 184/var(--tw-text-opacity))!important}.\\!ns-text-grey-400{--tw-text-opacity:1!important;color:rgb(138 141 156/var(--tw-text-opacity))!important}.\\!ns-text-red-400{--tw-text-opacity:1!important;color:rgb(248 113 113/var(--tw-text-opacity))!important}.\\!ns-text-white{--tw-text-opacity:1!important;color:rgb(255 255 255/var(--tw-text-opacity))!important}.ns-text-black{--tw-text-opacity:1;color:rgb(8 8 27/var(--tw-text-opacity))}.ns-text-black-pure{--tw-text-opacity:1;color:rgb(0 0 0/var(--tw-text-opacity))}.ns-text-blue-500{--tw-text-opacity:1;color:rgb(102 208 223/var(--tw-text-opacity))}.ns-text-blue-700{--tw-text-opacity:1;color:rgb(0 124 146/var(--tw-text-opacity))}.ns-text-current{color:currentColor}.ns-text-grey-300{--tw-text-opacity:1;color:rgb(168 172 184/var(--tw-text-opacity))}.ns-text-grey-400{--tw-text-opacity:1;color:rgb(138 141 156/var(--tw-text-opacity))}.ns-text-grey-500{--tw-text-opacity:1;color:rgb(109 111 129/var(--tw-text-opacity))}.ns-text-grey-600{--tw-text-opacity:1;color:rgb(82 83 101/var(--tw-text-opacity))}.ns-text-grey-750{--tw-text-opacity:1;color:rgb(51 51 51/var(--tw-text-opacity))}.ns-text-neutral-500{--tw-text-opacity:1;color:rgb(115 115 115/var(--tw-text-opacity))}.ns-text-neutral-900{--tw-text-opacity:1;color:rgb(23 23 23/var(--tw-text-opacity))}.ns-text-neutral-950{--tw-text-opacity:1;color:rgb(10 10 10/var(--tw-text-opacity))}.ns-text-red-500{--tw-text-opacity:1;color:rgb(255 0 0/var(--tw-text-opacity))}.ns-text-red-600{--tw-text-opacity:1;color:rgb(230 0 0/var(--tw-text-opacity))}.ns-text-slate-950{--tw-text-opacity:1;color:rgb(2 6 23/var(--tw-text-opacity))}.ns-text-white{--tw-text-opacity:1;color:rgb(255 255 255/var(--tw-text-opacity))}.ns-underline{text-decoration-line:underline}.ns-line-through{text-decoration-line:line-through}.ns-placeholder-transparent::-moz-placeholder{color:transparent}.ns-placeholder-transparent::placeholder{color:transparent}.ns-opacity-100{opacity:1}.ns-opacity-35{opacity:.35}.ns-opacity-50{opacity:.5}.ns-opacity-70{opacity:.7}.ns-shadow-card{--tw-shadow:0px 5px 20px 0px rgba(12,12,26,.15);--tw-shadow-colored:0px 5px 20px 0px var(--tw-shadow-color)}.ns-shadow-card,.ns-shadow-lg{box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.ns-shadow-lg{--tw-shadow:0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -4px rgba(0,0,0,.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color),0 4px 6px -4px var(--tw-shadow-color)}.ns-shadow-md{--tw-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -2px rgba(0,0,0,.1);--tw-shadow-colored:0 4px 6px -1px var(--tw-shadow-color),0 2px 4px -2px var(--tw-shadow-color)}.ns-shadow-md,.ns-shadow-mobile-footer{box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.ns-shadow-mobile-footer{--tw-shadow:0px -3px 10px rgba(0,0,0,.15);--tw-shadow-colored:0px -3px 10px var(--tw-shadow-color)}.ns-shadow-none{--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000}.ns-shadow-none,.ns-shadow-sm{box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.ns-shadow-sm{--tw-shadow:0 1px 2px 0 rgba(0,0,0,.05);--tw-shadow-colored:0 1px 2px 0 var(--tw-shadow-color)}.ns-shadow-third-party-active-button{--tw-shadow:-1px 0 2px rgba(0,0,0,.2);--tw-shadow-colored:-1px 0 2px var(--tw-shadow-color)}.ns-shadow-third-party-active-button,.ns-shadow-third-party-card{box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.ns-shadow-third-party-card{--tw-shadow:inset 0px 0px 3px 0px rgba(0,0,0,.25);--tw-shadow-colored:inset 0px 0px 3px 0px var(--tw-shadow-color)}.ns-outline-none{outline:2px solid transparent;outline-offset:2px}.ns-ring-0{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(var(--tw-ring-offset-width)) var(--tw-ring-color)}.ns-ring-0,.ns-ring-1{box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.ns-ring-1{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color)}.ns-ring-black{--tw-ring-opacity:1;--tw-ring-color:rgb(8 8 27/var(--tw-ring-opacity))}.ns-ring-gray-300{--tw-ring-opacity:1;--tw-ring-color:rgb(209 213 219/var(--tw-ring-opacity))}.ns-ring-offset-white{--tw-ring-offset-color:#fff}.ns-backdrop-filter{-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.ns-transition{transition-duration:.15s;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1)}.ns-transition-all{transition-duration:.15s;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1)}.ns-transition-opacity{transition-duration:.15s;transition-property:opacity;transition-timing-function:cubic-bezier(.4,0,.2,1)}.ns-transition-transform{transition-duration:.15s;transition-property:transform;transition-timing-function:cubic-bezier(.4,0,.2,1)}.ns-duration-1000{transition-duration:1s}.ns-duration-200{transition-duration:.2s}.ns-duration-500{transition-duration:.5s}.ns-ease-in-out{transition-timing-function:cubic-bezier(.4,0,.2,1)}.ns-ease-out{transition-timing-function:cubic-bezier(0,0,.2,1)}@keyframes enter{0%{opacity:var(--tw-enter-opacity,1);transform:translate3d(var(--tw-enter-translate-x,0),var(--tw-enter-translate-y,0),0) scale3d(var(--tw-enter-scale,1),var(--tw-enter-scale,1),var(--tw-enter-scale,1)) rotate(var(--tw-enter-rotate,0))}}@keyframes exit{to{opacity:var(--tw-exit-opacity,1);transform:translate3d(var(--tw-exit-translate-x,0),var(--tw-exit-translate-y,0),0) scale3d(var(--tw-exit-scale,1),var(--tw-exit-scale,1),var(--tw-exit-scale,1)) rotate(var(--tw-exit-rotate,0))}}.ns-animate-in{--tw-enter-opacity:initial;--tw-enter-scale:initial;--tw-enter-rotate:initial;--tw-enter-translate-x:initial;--tw-enter-translate-y:initial;animation-duration:.15s;animation-name:enter}.ns-fade-in-0{--tw-enter-opacity:0}.ns-zoom-in-95{--tw-enter-scale:.95}.ns-duration-1000{animation-duration:1s}.ns-duration-200{animation-duration:.2s}.ns-duration-500{animation-duration:.5s}.ns-ease-in-out{animation-timing-function:cubic-bezier(.4,0,.2,1)}.ns-ease-out{animation-timing-function:cubic-bezier(0,0,.2,1)}.scrollbar-secondary::-webkit-scrollbar{background:#d8dbe0;border-radius:0 0 8px 0;width:8px}.scrollbar-secondary::-webkit-scrollbar-thumb{background:#999;border-radius:8px}.scrollbar-secondary::-webkit-scrollbar-track{background-clip:padding-box;background-color:#d8dbe0;border-radius:5px}.scrollbar-secondary{scrollbar-color:#999 #d8dbe0;scrollbar-width:thin}.clip-checkbox{clip-path:polygon(36% 70%,36% 70%,83% 24%,83% 24%,88% 23%,88% 23%,91% 26%,91% 26%,90% 31%,90% 31%,43% 80%,43% 80%,38% 82%,38% 82%,33% 83%,33% 83%,30% 80%,30% 80%,11% 54%,11% 54%,12% 49%,12% 49%,15% 47%,15% 47%,20% 48%,20% 48%)}input[type=password]{-webkit-text-stroke-width:.2rem;letter-spacing:.2rem}.checked\\:ns-bg-black:checked{--tw-bg-opacity:1;background-color:rgb(8 8 27/var(--tw-bg-opacity))}.checked\\:ns-bg-blue-500:checked{--tw-bg-opacity:1;background-color:rgb(102 208 223/var(--tw-bg-opacity))}.hover\\:\\!ns-bg-black:hover{--tw-bg-opacity:1!important;background-color:rgb(8 8 27/var(--tw-bg-opacity))!important}.hover\\:\\!ns-bg-blue-800:hover{--tw-bg-opacity:1!important;background-color:rgb(0 87 101/var(--tw-bg-opacity))!important}.hover\\:\\!ns-bg-grey-400:hover{--tw-bg-opacity:1!important;background-color:rgb(138 141 156/var(--tw-bg-opacity))!important}.hover\\:\\!ns-bg-grey-700:hover{--tw-bg-opacity:1!important;background-color:rgb(57 57 73/var(--tw-bg-opacity))!important}.hover\\:ns-bg-grey-300:hover{--tw-bg-opacity:1;background-color:rgb(168 172 184/var(--tw-bg-opacity))}.hover\\:ns-bg-grey-700:hover{--tw-bg-opacity:1;background-color:rgb(57 57 73/var(--tw-bg-opacity))}.hover\\:ns-bg-red-800:hover{--tw-bg-opacity:1;background-color:rgb(189 0 0/var(--tw-bg-opacity))}.hover\\:ns-bg-transparent:hover{background-color:transparent}.hover\\:ns-text-blue-800:hover{--tw-text-opacity:1;color:rgb(0 87 101/var(--tw-text-opacity))}.hover\\:ns-text-grey-750:hover{--tw-text-opacity:1;color:rgb(51 51 51/var(--tw-text-opacity))}.hover\\:ns-text-white:hover{--tw-text-opacity:1;color:rgb(255 255 255/var(--tw-text-opacity))}.hover\\:ns-underline:hover{text-decoration-line:underline}.hover\\:ns-opacity-100:hover{opacity:1}.focus\\:ns-bg-highlighted:focus{--tw-bg-opacity:1;background-color:rgb(153 153 153/var(--tw-bg-opacity))}.focus\\:ns-outline-none:focus{outline:2px solid transparent;outline-offset:2px}.focus\\:ns-ring-2:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.focus\\:ns-ring-neutral-950:focus{--tw-ring-opacity:1;--tw-ring-color:rgb(10 10 10/var(--tw-ring-opacity))}.focus\\:ns-ring-offset-2:focus{--tw-ring-offset-width:2px}.focus-visible\\:ns-outline-none:focus-visible{outline:2px solid transparent;outline-offset:2px}.focus-visible\\:ns-ring-2:focus-visible{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.focus-visible\\:ns-ring-black:focus-visible{--tw-ring-opacity:1;--tw-ring-color:rgb(8 8 27/var(--tw-ring-opacity))}.focus-visible\\:ns-ring-neutral-950:focus-visible{--tw-ring-opacity:1;--tw-ring-color:rgb(10 10 10/var(--tw-ring-opacity))}.focus-visible\\:ns-ring-offset-2:focus-visible{--tw-ring-offset-width:2px}.active\\:\\!ns-bg-blue-900:active{--tw-bg-opacity:1!important;background-color:rgb(0 61 71/var(--tw-bg-opacity))!important}.active\\:\\!ns-bg-grey-600:active{--tw-bg-opacity:1!important;background-color:rgb(82 83 101/var(--tw-bg-opacity))!important}.active\\:\\!ns-bg-grey-800:active{--tw-bg-opacity:1!important;background-color:rgb(34 39 57/var(--tw-bg-opacity))!important}.active\\:ns-bg-grey-400:active{--tw-bg-opacity:1;background-color:rgb(138 141 156/var(--tw-bg-opacity))}.active\\:ns-bg-grey-700:active{--tw-bg-opacity:1;background-color:rgb(57 57 73/var(--tw-bg-opacity))}.active\\:ns-bg-grey-800:active{--tw-bg-opacity:1;background-color:rgb(34 39 57/var(--tw-bg-opacity))}.active\\:ns-bg-lime-800:active{--tw-bg-opacity:1;background-color:rgb(0 132 0/var(--tw-bg-opacity))}.active\\:ns-bg-red-900:active{--tw-bg-opacity:1;background-color:rgb(153 0 0/var(--tw-bg-opacity))}.active\\:ns-bg-transparent:active{background-color:transparent}.active\\:ns-text-blue-900:active{--tw-text-opacity:1;color:rgb(0 61 71/var(--tw-text-opacity))}.active\\:ns-text-white:active{--tw-text-opacity:1;color:rgb(255 255 255/var(--tw-text-opacity))}.hover\\:enabled\\:ns-border-grey-500:enabled:hover{--tw-border-opacity:1;border-color:rgb(109 111 129/var(--tw-border-opacity))}.hover\\:enabled\\:ns-border-grey-700:enabled:hover{--tw-border-opacity:1;border-color:rgb(57 57 73/var(--tw-border-opacity))}.hover\\:enabled\\:ns-bg-grey-500:enabled:hover{--tw-bg-opacity:1;background-color:rgb(109 111 129/var(--tw-bg-opacity))}.disabled\\:ns-pointer-events-none:disabled{pointer-events:none}.disabled\\:ns-cursor-auto:disabled{cursor:auto}.disabled\\:ns-cursor-not-allowed:disabled{cursor:not-allowed}.disabled\\:ns-cursor-pointer:disabled{cursor:pointer}.disabled\\:ns-border-grey-700:disabled{--tw-border-opacity:1;border-color:rgb(57 57 73/var(--tw-border-opacity))}.disabled\\:\\!ns-bg-green-900:disabled{--tw-bg-opacity:1!important;background-color:rgb(66 134 0/var(--tw-bg-opacity))!important}.disabled\\:\\!ns-bg-grey-100:disabled{--tw-bg-opacity:1!important;background-color:rgb(216 219 224/var(--tw-bg-opacity))!important}.disabled\\:ns-bg-grey-100:disabled{--tw-bg-opacity:1;background-color:rgb(216 219 224/var(--tw-bg-opacity))}.disabled\\:\\!ns-text-grey-300:disabled{--tw-text-opacity:1!important;color:rgb(168 172 184/var(--tw-text-opacity))!important}.disabled\\:ns-text-grey-300:disabled{--tw-text-opacity:1;color:rgb(168 172 184/var(--tw-text-opacity))}.disabled\\:ns-text-grey-400:disabled{--tw-text-opacity:1;color:rgb(138 141 156/var(--tw-text-opacity))}.disabled\\:ns-opacity-50:disabled{opacity:.5}.ns-peer:checked~.peer-checked\\:ns-scale-100{--tw-scale-x:1;--tw-scale-y:1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.ns-peer:-moz-placeholder-shown~.peer-placeholder-shown\\:ns-top-\\[45\\%\\]{top:45%}.ns-peer:placeholder-shown~.peer-placeholder-shown\\:ns-top-\\[45\\%\\]{top:45%}.ns-peer:-moz-placeholder-shown~.peer-placeholder-shown\\:ns-text-base{font-size:16px;font-weight:400;line-height:140%}.ns-peer:placeholder-shown~.peer-placeholder-shown\\:ns-text-base{font-size:16px;font-weight:400;line-height:140%}.ns-peer:-moz-placeholder-shown~.peer-placeholder-shown\\:ns-text-black{--tw-text-opacity:1;color:rgb(8 8 27/var(--tw-text-opacity))}.ns-peer:placeholder-shown~.peer-placeholder-shown\\:ns-text-black{--tw-text-opacity:1;color:rgb(8 8 27/var(--tw-text-opacity))}.ns-peer:focus~.peer-focus\\:ns-top-1{top:.25rem}.ns-peer:focus~.peer-focus\\:ns-text-xs{font-size:12px;font-weight:400;line-height:130%}.ns-peer:focus~.peer-focus\\:ns-text-black{--tw-text-opacity:1;color:rgb(8 8 27/var(--tw-text-opacity))}.ns-peer:disabled~.peer-disabled\\:ns-cursor-not-allowed{cursor:not-allowed}.ns-peer:disabled~.peer-disabled\\:ns-opacity-50{opacity:.5}.ns-peer:disabled~.peer-disabled\\:ns-opacity-70{opacity:.7}.has-\\[\\:aria-checked\\]\\:ns-bg-red-600:has(:aria-checked){--tw-bg-opacity:1;background-color:rgb(230 0 0/var(--tw-bg-opacity))}.has-\\[\\:disabled\\]\\:ns-opacity-50:has(:disabled){opacity:.5}.aria-selected\\:ns-bg-highlighted[aria-selected=true]{--tw-bg-opacity:1;background-color:rgb(153 153 153/var(--tw-bg-opacity))}.aria-selected\\:ns-text-black[aria-selected=true]{--tw-text-opacity:1;color:rgb(8 8 27/var(--tw-text-opacity))}.data-\\[disabled\\=true\\]\\:ns-pointer-events-none[data-disabled=true],.data-\\[disabled\\]\\:ns-pointer-events-none[data-disabled]{pointer-events:none}.data-\\[side\\=bottom\\]\\:ns-translate-y-1[data-side=bottom]{--tw-translate-y:0.25rem}.data-\\[side\\=bottom\\]\\:ns-translate-y-1[data-side=bottom],.data-\\[side\\=left\\]\\:-ns-translate-x-1[data-side=left]{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-\\[side\\=left\\]\\:-ns-translate-x-1[data-side=left]{--tw-translate-x:-0.25rem}.data-\\[side\\=right\\]\\:ns-translate-x-1[data-side=right]{--tw-translate-x:0.25rem}.data-\\[side\\=right\\]\\:ns-translate-x-1[data-side=right],.data-\\[side\\=top\\]\\:-ns-translate-y-1[data-side=top]{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-\\[side\\=top\\]\\:-ns-translate-y-1[data-side=top]{--tw-translate-y:-0.25rem}@keyframes ns-accordion-up{0%{height:var(--radix-accordion-content-height)}to{height:0}}.data-\\[state\\=closed\\]\\:ns-animate-accordion-up[data-state=closed]{animation:ns-accordion-up .2s ease-out}@keyframes ns-accordion-down{0%{height:0}to{height:var(--radix-accordion-content-height)}}.data-\\[state\\=open\\]\\:ns-animate-accordion-down[data-state=open]{animation:ns-accordion-down .2s ease-out}.data-\\[state\\=active\\]\\:ns-bg-white[data-state=active]{--tw-bg-opacity:1;background-color:rgb(255 255 255/var(--tw-bg-opacity))}.data-\\[state\\=open\\]\\:ns-bg-neutral-100[data-state=open]{--tw-bg-opacity:1;background-color:rgb(245 245 245/var(--tw-bg-opacity))}.data-\\[state\\=active\\]\\:ns-text-neutral-950[data-state=active]{--tw-text-opacity:1;color:rgb(10 10 10/var(--tw-text-opacity))}.data-\\[state\\=open\\]\\:ns-text-neutral-500[data-state=open]{--tw-text-opacity:1;color:rgb(115 115 115/var(--tw-text-opacity))}.data-\\[disabled\\=true\\]\\:ns-opacity-50[data-disabled=true],.data-\\[disabled\\]\\:ns-opacity-50[data-disabled]{opacity:.5}.data-\\[state\\=active\\]\\:ns-shadow-sm[data-state=active]{--tw-shadow:0 1px 2px 0 rgba(0,0,0,.05);--tw-shadow-colored:0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.data-\\[state\\=closed\\]\\:ns-duration-300[data-state=closed]{transition-duration:.3s}.data-\\[state\\=open\\]\\:ns-duration-500[data-state=open]{transition-duration:.5s}.data-\\[state\\=open\\]\\:ns-animate-in[data-state=open]{--tw-enter-opacity:initial;--tw-enter-scale:initial;--tw-enter-rotate:initial;--tw-enter-translate-x:initial;--tw-enter-translate-y:initial;animation-duration:.15s;animation-name:enter}.data-\\[state\\=closed\\]\\:ns-animate-out[data-state=closed]{--tw-exit-opacity:initial;--tw-exit-scale:initial;--tw-exit-rotate:initial;--tw-exit-translate-x:initial;--tw-exit-translate-y:initial;animation-duration:.15s;animation-name:exit}.data-\\[state\\=closed\\]\\:ns-fade-out-0[data-state=closed]{--tw-exit-opacity:0}.data-\\[state\\=open\\]\\:ns-fade-in-0[data-state=open]{--tw-enter-opacity:0}.data-\\[state\\=closed\\]\\:ns-zoom-out-95[data-state=closed]{--tw-exit-scale:.95}.data-\\[state\\=open\\]\\:ns-zoom-in-95[data-state=open]{--tw-enter-scale:.95}.data-\\[side\\=bottom\\]\\:ns-slide-in-from-top-2[data-side=bottom]{--tw-enter-translate-y:-0.5rem}.data-\\[side\\=left\\]\\:ns-slide-in-from-right-2[data-side=left]{--tw-enter-translate-x:0.5rem}.data-\\[side\\=right\\]\\:ns-slide-in-from-left-2[data-side=right]{--tw-enter-translate-x:-0.5rem}.data-\\[side\\=top\\]\\:ns-slide-in-from-bottom-2[data-side=top]{--tw-enter-translate-y:0.5rem}.data-\\[state\\=closed\\]\\:ns-slide-out-to-bottom[data-state=closed]{--tw-exit-translate-y:100%}.data-\\[state\\=closed\\]\\:ns-slide-out-to-left[data-state=closed]{--tw-exit-translate-x:-100%}.data-\\[state\\=closed\\]\\:ns-slide-out-to-left-1\\/2[data-state=closed]{--tw-exit-translate-x:-50%}.data-\\[state\\=closed\\]\\:ns-slide-out-to-right[data-state=closed]{--tw-exit-translate-x:100%}.data-\\[state\\=closed\\]\\:ns-slide-out-to-top[data-state=closed]{--tw-exit-translate-y:-100%}.data-\\[state\\=closed\\]\\:ns-slide-out-to-top-\\[48\\%\\][data-state=closed]{--tw-exit-translate-y:-48%}.data-\\[state\\=open\\]\\:ns-slide-in-from-bottom[data-state=open]{--tw-enter-translate-y:100%}.data-\\[state\\=open\\]\\:ns-slide-in-from-left[data-state=open]{--tw-enter-translate-x:-100%}.data-\\[state\\=open\\]\\:ns-slide-in-from-left-1\\/2[data-state=open]{--tw-enter-translate-x:-50%}.data-\\[state\\=open\\]\\:ns-slide-in-from-right[data-state=open]{--tw-enter-translate-x:100%}.data-\\[state\\=open\\]\\:ns-slide-in-from-top[data-state=open]{--tw-enter-translate-y:-100%}.data-\\[state\\=open\\]\\:ns-slide-in-from-top-\\[48\\%\\][data-state=open]{--tw-enter-translate-y:-48%}.data-\\[state\\=closed\\]\\:ns-duration-300[data-state=closed]{animation-duration:.3s}.data-\\[state\\=open\\]\\:ns-duration-500[data-state=open]{animation-duration:.5s}.ns-group[data-state=closed] .group-data-\\[state\\=closed\\]\\:ns-hidden,.ns-group[data-state=open] .group-data-\\[state\\=open\\]\\:ns-hidden{display:none}.dark\\:ns-border-neutral-50:is(.ns-dark *){--tw-border-opacity:1;border-color:rgb(250 250 250/var(--tw-border-opacity))}.dark\\:ns-border-neutral-800:is(.ns-dark *){--tw-border-opacity:1;border-color:rgb(38 38 38/var(--tw-border-opacity))}.dark\\:ns-bg-neutral-50:is(.ns-dark *){--tw-bg-opacity:1;background-color:rgb(250 250 250/var(--tw-bg-opacity))}.dark\\:ns-bg-neutral-800:is(.ns-dark *){--tw-bg-opacity:1;background-color:rgb(38 38 38/var(--tw-bg-opacity))}.dark\\:ns-bg-neutral-950:is(.ns-dark *){--tw-bg-opacity:1;background-color:rgb(10 10 10/var(--tw-bg-opacity))}.dark\\:ns-text-neutral-400:is(.ns-dark *){--tw-text-opacity:1;color:rgb(163 163 163/var(--tw-text-opacity))}.dark\\:ns-text-neutral-50:is(.ns-dark *){--tw-text-opacity:1;color:rgb(250 250 250/var(--tw-text-opacity))}.dark\\:ns-text-white:is(.ns-dark *){--tw-text-opacity:1;color:rgb(255 255 255/var(--tw-text-opacity))}.dark\\:ns-ring-neutral-200:is(.ns-dark *){--tw-ring-opacity:1;--tw-ring-color:rgb(229 229 229/var(--tw-ring-opacity))}.dark\\:ns-ring-offset-neutral-950:is(.ns-dark *){--tw-ring-offset-color:#0a0a0a}.dark\\:focus\\:ns-ring-neutral-300:focus:is(.ns-dark *){--tw-ring-opacity:1;--tw-ring-color:rgb(212 212 212/var(--tw-ring-opacity))}.dark\\:focus-visible\\:ns-ring-neutral-300:focus-visible:is(.ns-dark *){--tw-ring-opacity:1;--tw-ring-color:rgb(212 212 212/var(--tw-ring-opacity))}.dark\\:data-\\[state\\=active\\]\\:ns-bg-neutral-950[data-state=active]:is(.ns-dark *){--tw-bg-opacity:1;background-color:rgb(10 10 10/var(--tw-bg-opacity))}.dark\\:data-\\[state\\=open\\]\\:ns-bg-neutral-800[data-state=open]:is(.ns-dark *){--tw-bg-opacity:1;background-color:rgb(38 38 38/var(--tw-bg-opacity))}.dark\\:data-\\[state\\=active\\]\\:ns-text-neutral-50[data-state=active]:is(.ns-dark *){--tw-text-opacity:1;color:rgb(250 250 250/var(--tw-text-opacity))}.dark\\:data-\\[state\\=open\\]\\:ns-text-neutral-400[data-state=open]:is(.ns-dark *){--tw-text-opacity:1;color:rgb(163 163 163/var(--tw-text-opacity))}@media not all and (min-width:640px){.max-sm\\:ns-text-right{text-align:right}.max-sm\\:ns-text-xl{font-size:18px;font-weight:400;line-height:140%}.max-sm\\:ns-font-bold{font-weight:700}}@media (min-width:320px){.xxs\\:\\!ns-max-w-xs{max-width:20rem!important}.xxs\\:ns-justify-between{justify-content:space-between}.xxs\\:ns-space-y-2>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-bottom:calc(.5rem*var(--tw-space-y-reverse));margin-top:calc(.5rem*(1 - var(--tw-space-y-reverse)))}.xxs\\:ns-text-sm{font-size:14px;font-weight:400;line-height:140%}}@media (min-width:640px){.sm\\:ns-mt-4{margin-top:1rem}.sm\\:ns-block{display:block}.sm\\:ns-h-10{height:2.5rem}.sm\\:ns-w-10{width:2.5rem}.sm\\:ns-max-w-150{max-width:37.5rem}.sm\\:ns-basis-1\\/2{flex-basis:50%}.sm\\:ns-grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.sm\\:ns-flex-row{flex-direction:row}.sm\\:ns-justify-end{justify-content:flex-end}.sm\\:ns-space-x-2>:not([hidden])~:not([hidden]){--tw-space-x-reverse:0;margin-left:calc(.5rem*(1 - var(--tw-space-x-reverse)));margin-right:calc(.5rem*var(--tw-space-x-reverse))}.sm\\:ns-rounded-lg{border-radius:.5rem}.sm\\:ns-p-6{padding:1.5rem}.sm\\:ns-text-left{text-align:left}.sm\\:ns-text-2xl{font-size:22px;font-weight:500;line-height:140%}.sm\\:ns-text-sm{font-size:14px}.sm\\:ns-text-sm,.sm\\:ns-text-xl{font-weight:400;line-height:140%}.sm\\:ns-text-xl{font-size:18px}.sm\\:ns-shadow-none{--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}}@media (min-width:768px){.md\\:ns-static{position:static}.md\\:-ns-top-\\[9px\\]{top:-9px}.md\\:ns-bottom-28{bottom:7rem}.md\\:ns-left-\\[14\\]{left:14}.md\\:ns-right-10{right:2.5rem}.md\\:ns-right-5{right:1.25rem}.md\\:ns-top-5{top:1.25rem}.md\\:ns-mt-10{margin-top:2.5rem}.md\\:ns-line-clamp-none{-webkit-box-orient:horizontal;-webkit-line-clamp:none;display:block;overflow:visible}.md\\:ns-block{display:block}.md\\:ns-flex{display:flex}.md\\:ns-hidden{display:none}.md\\:ns-h-100{height:25rem}.md\\:ns-h-20{height:5rem}.md\\:ns-h-\\[100px\\]{height:100px}.md\\:ns-h-fit{height:-moz-fit-content;height:fit-content}.md\\:ns-h-full{height:100%}.md\\:ns-w-194{width:48.5rem}.md\\:ns-w-75{width:18.75rem}.md\\:ns-w-\\[120px\\]{width:120px}.md\\:ns-w-fit{width:-moz-fit-content;width:fit-content}.md\\:ns-w-full{width:100%}.md\\:ns-min-w-180{min-width:45rem}.md\\:\\!ns-max-w-lg{max-width:32rem!important}.md\\:ns-max-w-none{max-width:none}.md\\:ns-basis-1\\/2{flex-basis:50%}.md\\:ns-basis-1\\/3{flex-basis:33.333333%}.md\\:ns-grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.md\\:ns-flex-row{flex-direction:row}.md\\:ns-justify-center{justify-content:center}.md\\:ns-gap-4{gap:1rem}.md\\:ns-place-self-auto{place-self:auto}.md\\:ns-overflow-auto{overflow:auto}.md\\:ns-rounded-40{border-radius:2.5rem}.md\\:ns-rounded-tl-30{border-top-left-radius:1.875rem}.md\\:ns-rounded-tr-30{border-top-right-radius:1.875rem}.md\\:ns-bg-grey-800{--tw-bg-opacity:1;background-color:rgb(34 39 57/var(--tw-bg-opacity))}.md\\:ns-p-20{padding:5rem}.md\\:ns-p-\\[40px\\]{padding:40px}.md\\:ns-px-6{padding-left:1.5rem;padding-right:1.5rem}.md\\:ns-py-3{padding-bottom:.75rem;padding-top:.75rem}.md\\:ns-pb-7{padding-bottom:1.75rem}.md\\:\\!ns-text-4xl{font-size:30px!important;font-weight:500!important;letter-spacing:-.03em!important;line-height:120%!important}.md\\:ns-text-2xl{font-size:22px;font-weight:500;line-height:140%}.md\\:ns-text-7xl{font-size:32px;font-weight:500;letter-spacing:-.03em;line-height:120%}}@media (min-width:1024px){.lg\\:ns-h-\\[280px\\]{height:280px}.lg\\:ns-h-\\[340px\\]{height:340px}.lg\\:ns-min-h-\\[300px\\]{min-height:300px}.lg\\:ns-w-\\[442px\\]{width:442px}.lg\\:ns-basis-1\\/3{flex-basis:33.333333%}.lg\\:ns-basis-1\\/4{flex-basis:25%}.lg\\:ns-justify-center{justify-content:center}.lg\\:ns-p-\\[200px\\]{padding:200px}}@media (min-width:1536px){.\\32xl\\:ns-right-40{right:10rem}}.\\[\\&\\[data-state\\=open\\]\\>svg\\]\\:ns-rotate-180[data-state=open]>svg{--tw-rotate:180deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.\\[\\&_\\.ac\\\\-content\\]\\:ns-flex .ac\\-content{display:flex}.\\[\\&_\\.ac\\\\-content\\]\\:ns-flex-col .ac\\-content{flex-direction:column}.\\[\\&_\\.ac\\\\-content\\]\\:ns-gap-2 .ac\\-content{gap:.5rem}.\\[\\&_\\.active-dot\\]\\:\\!ns-bg-grey-600 .active-dot{--tw-bg-opacity:1!important;background-color:rgb(82 83 101/var(--tw-bg-opacity))!important}.\\[\\&_\\.inactive-dot\\]\\:\\!ns-bg-grey-100 .inactive-dot{--tw-bg-opacity:1!important;background-color:rgb(216 219 224/var(--tw-bg-opacity))!important}.\\[\\&_\\.ns-arrow-right\\]\\:ns-block .ns-arrow-right{display:block}.\\[\\&_\\.ns-arrow-right\\]\\:ns-hidden .ns-arrow-right{display:none}.\\[\\&_\\.ns-cart-quantity\\]\\:ns-static .ns-cart-quantity{position:static}.\\[\\&_\\.ns-cart-quantity\\]\\:ns-bg-white .ns-cart-quantity{--tw-bg-opacity:1;background-color:rgb(255 255 255/var(--tw-bg-opacity))}.\\[\\&_\\.ns-cart-quantity\\]\\:ns-text-blue-700 .ns-cart-quantity{--tw-text-opacity:1;color:rgb(0 124 146/var(--tw-text-opacity))}.\\[\\&_\\.ns-divider\\]\\:ns-border-red-400 .ns-divider{--tw-border-opacity:1;border-color:rgb(248 113 113/var(--tw-border-opacity))}.\\[\\&_\\.ns\\\\-\\\\-ml\\\\-4\\]\\:ns-ml-0 .ns\\-\\-ml\\-4{margin-left:0}.\\[\\&_\\.tablist\\>\\[data-state\\=active\\]\\]\\:ns-rounded-5 .tablist>[data-state=active]{border-radius:5px}.\\[\\&_\\.tablist\\>\\[data-state\\=active\\]\\]\\:ns-border-b-black .tablist>[data-state=active]{--tw-border-opacity:1;border-bottom-color:rgb(8 8 27/var(--tw-border-opacity))}.\\[\\&_\\.tablist\\>\\[data-state\\=active\\]\\]\\:ns-bg-red-600 .tablist>[data-state=active]{--tw-bg-opacity:1;background-color:rgb(230 0 0/var(--tw-bg-opacity))}.\\[\\&_\\.tablist\\>\\[data-state\\=active\\]\\]\\:ns-bg-transparent .tablist>[data-state=active]{background-color:transparent}.\\[\\&_\\.tablist\\>\\[data-state\\=active\\]\\]\\:ns-font-bold .tablist>[data-state=active]{font-weight:700}.\\[\\&_\\.tablist\\>\\[data-state\\=active\\]\\]\\:ns-text-black .tablist>[data-state=active]{--tw-text-opacity:1;color:rgb(8 8 27/var(--tw-text-opacity))}.\\[\\&_\\.tablist\\>\\[data-state\\=active\\]\\]\\:ns-text-white .tablist>[data-state=active]{--tw-text-opacity:1;color:rgb(255 255 255/var(--tw-text-opacity))}.\\[\\&_\\.tablist\\>\\[data-state\\=active\\]\\]\\:ns-shadow-none .tablist>[data-state=active]{--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.\\[\\&_\\.tablist\\>button\\]\\:ns-rounded-0 .tablist>button{border-radius:0}.\\[\\&_\\.tablist\\>button\\]\\:ns-border-b-1 .tablist>button{border-bottom-width:.094rem}.\\[\\&_\\.tablist\\>button\\]\\:ns-border-b-grey-500 .tablist>button{--tw-border-opacity:1;border-bottom-color:rgb(109 111 129/var(--tw-border-opacity))}.\\[\\&_\\.tablist\\>button\\]\\:ns-px-0 .tablist>button{padding-left:0;padding-right:0}.\\[\\&_\\.tablist\\]\\:ns-gap-2 .tablist{gap:.5rem}.\\[\\&_\\.tablist\\]\\:ns-bg-transparent .tablist{background-color:transparent}.\\[\\&_\\.tablist\\]\\:ns-text-base .tablist{font-size:16px;font-weight:400;line-height:140%}.\\[\\&_\\.tablist\\]\\:ns-text-grey-500 .tablist{--tw-text-opacity:1;color:rgb(109 111 129/var(--tw-text-opacity))}.\\[\\&_\\.trigger\\]\\:ns-flex-none .trigger{flex:none}.\\[\\&_\\.trigger\\]\\:ns-justify-start .trigger{justify-content:flex-start}.\\[\\&_\\.trigger\\]\\:ns-space-x-1 .trigger>:not([hidden])~:not([hidden]){--tw-space-x-reverse:0;margin-left:calc(.25rem*(1 - var(--tw-space-x-reverse)));margin-right:calc(.25rem*var(--tw-space-x-reverse))}.\\[\\&_\\.trigger\\]\\:ns-text-base .trigger{font-size:16px;font-weight:400;line-height:140%}.\\[\\&_\\.trigger\\]\\:ns-font-medium .trigger{font-weight:500}.\\[\\&_\\.trigger\\]\\:ns-text-blue-700 .trigger{--tw-text-opacity:1;color:rgb(0 124 146/var(--tw-text-opacity))}.\\[\\&_\\.trigger\\]\\:ns-text-grey-750 .trigger{--tw-text-opacity:1;color:rgb(51 51 51/var(--tw-text-opacity))}.\\[\\&_\\[cmdk-group-heading\\]\\]\\:ns-px-2 [cmdk-group-heading]{padding-left:.5rem;padding-right:.5rem}.\\[\\&_\\[cmdk-group-heading\\]\\]\\:ns-py-1\\.5 [cmdk-group-heading]{padding-bottom:.375rem;padding-top:.375rem}.\\[\\&_\\[cmdk-group-heading\\]\\]\\:ns-text-xs [cmdk-group-heading]{font-size:12px;font-weight:400;line-height:130%}.\\[\\&_\\[cmdk-group-heading\\]\\]\\:ns-font-medium [cmdk-group-heading]{font-weight:500}.\\[\\&_\\[cmdk-group-heading\\]\\]\\:ns-text-slate-500 [cmdk-group-heading]{--tw-text-opacity:1;color:rgb(100 116 139/var(--tw-text-opacity))}.\\[\\&_button\\]\\:ns-rounded-20 button{border-radius:1.25rem}.\\[\\&_button\\]\\:ns-px-3 button{padding-left:.75rem;padding-right:.75rem}.\\[\\&_button\\]\\:ns-py-1 button{padding-bottom:.25rem;padding-top:.25rem}.\\[\\&_button\\]\\:ns-text-sm button{font-size:14px;font-weight:400;line-height:140%}.\\[\\&_button\\]\\:ns-text-grey-300 button{--tw-text-opacity:1;color:rgb(168 172 184/var(--tw-text-opacity))}';function _extends(){return _extends=Object.assign?Object.assign.bind():function(o){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var _ in s)Object.prototype.hasOwnProperty.call(s,_)&&(o[_]=s[_])}return o},_extends.apply(this,arguments)}function $6ed0406888f73fc4$var$setRef(o,i){typeof o=="function"?o(i):o!=null&&(o.current=i)}function $6ed0406888f73fc4$export$43e446d32b3d21af(...o){return i=>o.forEach(s=>$6ed0406888f73fc4$var$setRef(s,i))}function $6ed0406888f73fc4$export$c7b2cbe3552a0d05(...o){return reactExports.useCallback($6ed0406888f73fc4$export$43e446d32b3d21af(...o),o)}styleInject(css_248z$2,{insertAt:"top"});const $5e63c961fc1ce211$export$8c6ed5c666ac1360=reactExports.forwardRef((o,i)=>{const{children:s,..._}=o,_e=reactExports.Children.toArray(s),ct=_e.find($5e63c961fc1ce211$var$isSlottable);if(ct){const Mt=ct.props.children,Ft=_e.map(Ut=>Ut===ct?reactExports.Children.count(Mt)>1?reactExports.Children.only(null):reactExports.isValidElement(Mt)?Mt.props.children:null:Ut);return reactExports.createElement($5e63c961fc1ce211$var$SlotClone,_extends({},_,{ref:i}),reactExports.isValidElement(Mt)?reactExports.cloneElement(Mt,void 0,Ft):null)}return reactExports.createElement($5e63c961fc1ce211$var$SlotClone,_extends({},_,{ref:i}),s)});$5e63c961fc1ce211$export$8c6ed5c666ac1360.displayName="Slot";const $5e63c961fc1ce211$var$SlotClone=reactExports.forwardRef((o,i)=>{const{children:s,..._}=o;return reactExports.isValidElement(s)?reactExports.cloneElement(s,{...$5e63c961fc1ce211$var$mergeProps(_,s.props),ref:i?$6ed0406888f73fc4$export$43e446d32b3d21af(i,s.ref):s.ref}):reactExports.Children.count(s)>1?reactExports.Children.only(null):null});$5e63c961fc1ce211$var$SlotClone.displayName="SlotClone";const $5e63c961fc1ce211$export$d9f1ccf0bdb05d45=({children:o})=>reactExports.createElement(reactExports.Fragment,null,o);function $5e63c961fc1ce211$var$isSlottable(o){return reactExports.isValidElement(o)&&o.type===$5e63c961fc1ce211$export$d9f1ccf0bdb05d45}function $5e63c961fc1ce211$var$mergeProps(o,i){const s={...i};for(const _ in i){const _e=o[_],ct=i[_];/^on[A-Z]/.test(_)?_e&&ct?s[_]=(...Mt)=>{ct(...Mt),_e(...Mt)}:_e&&(s[_]=_e):_==="style"?s[_]={..._e,...ct}:_==="className"&&(s[_]=[_e,ct].filter(Boolean).join(" "))}return{...o,...s}}function r$1(o){var i,s,_="";if(typeof o=="string"||typeof o=="number")_+=o;else if(typeof o=="object")if(Array.isArray(o))for(i=0;i<o.length;i++)o[i]&&(s=r$1(o[i]))&&(_&&(_+=" "),_+=s);else for(i in o)o[i]&&(_&&(_+=" "),_+=i);return _}function clsx$1(){for(var o,i,s=0,_="";s<arguments.length;)(o=arguments[s++])&&(i=r$1(o))&&(_&&(_+=" "),_+=i);return _}const falsyToString=o=>typeof o=="boolean"?"".concat(o):o===0?"0":o,cx$1=clsx$1,cva=(o,i)=>s=>{var _;if((i==null?void 0:i.variants)==null)return cx$1(o,s==null?void 0:s.class,s==null?void 0:s.className);const{variants:_e,defaultVariants:ct}=i,Mt=Object.keys(_e).map(Xt=>{const Kt=s==null?void 0:s[Xt],nr=ct==null?void 0:ct[Xt];if(Kt===null)return null;const rr=falsyToString(Kt)||falsyToString(nr);return _e[Xt][rr]}),Ft=s&&Object.entries(s).reduce((Xt,Kt)=>{let[nr,rr]=Kt;return rr===void 0||(Xt[nr]=rr),Xt},{}),Ut=i==null||(_=i.compoundVariants)===null||_===void 0?void 0:_.reduce((Xt,Kt)=>{let{class:nr,className:rr,...or}=Kt;return Object.entries(or).every(hr=>{let[fr,yr]=hr;return Array.isArray(yr)?yr.includes({...ct,...Ft}[fr]):{...ct,...Ft}[fr]===yr})?[...Xt,nr,rr]:Xt},[]);return cx$1(o,Mt,Ut,s==null?void 0:s.class,s==null?void 0:s.className)};function r(o){var i,s,_="";if(typeof o=="string"||typeof o=="number")_+=o;else if(typeof o=="object")if(Array.isArray(o)){var _e=o.length;for(i=0;i<_e;i++)o[i]&&(s=r(o[i]))&&(_&&(_+=" "),_+=s)}else for(s in o)o[s]&&(_&&(_+=" "),_+=s);return _}function clsx(){for(var o,i,s=0,_="",_e=arguments.length;s<_e;s++)(o=arguments[s])&&(i=r(o))&&(_&&(_+=" "),_+=i);return _}const CLASS_PART_SEPARATOR="-";function createClassUtils(o){const i=createClassMap(o),{conflictingClassGroups:s,conflictingClassGroupModifiers:_}=o;return{getClassGroupId:function(_e){const ct=_e.split(CLASS_PART_SEPARATOR);return ct[0]===""&&ct.length!==1&&ct.shift(),getGroupRecursive(ct,i)||getGroupIdForArbitraryProperty(_e)},getConflictingClassGroupIds:function(_e,ct){const Mt=s[_e]||[];return ct&&_[_e]?[...Mt,..._[_e]]:Mt}}}function getGroupRecursive(o,i){var Mt;if(o.length===0)return i.classGroupId;const s=o[0],_=i.nextPart.get(s),_e=_?getGroupRecursive(o.slice(1),_):void 0;if(_e)return _e;if(i.validators.length===0)return;const ct=o.join(CLASS_PART_SEPARATOR);return(Mt=i.validators.find(({validator:Ft})=>Ft(ct)))==null?void 0:Mt.classGroupId}const arbitraryPropertyRegex=/^\[(.+)\]$/;function getGroupIdForArbitraryProperty(o){if(arbitraryPropertyRegex.test(o)){const i=arbitraryPropertyRegex.exec(o)[1],s=i==null?void 0:i.substring(0,i.indexOf(":"));if(s)return"arbitrary.."+s}}function createClassMap(o){const{theme:i,prefix:s}=o,_={nextPart:new Map,validators:[]};return getPrefixedClassGroupEntries(Object.entries(o.classGroups),s).forEach(([_e,ct])=>{processClassesRecursively(ct,_,_e,i)}),_}function processClassesRecursively(o,i,s,_){o.forEach(_e=>{if(typeof _e!="string"){if(typeof _e=="function")return isThemeGetter(_e)?void processClassesRecursively(_e(_),i,s,_):void i.validators.push({validator:_e,classGroupId:s});Object.entries(_e).forEach(([ct,Mt])=>{processClassesRecursively(Mt,getPart(i,ct),s,_)})}else(_e===""?i:getPart(i,_e)).classGroupId=s})}function getPart(o,i){let s=o;return i.split(CLASS_PART_SEPARATOR).forEach(_=>{s.nextPart.has(_)||s.nextPart.set(_,{nextPart:new Map,validators:[]}),s=s.nextPart.get(_)}),s}function isThemeGetter(o){return o.isThemeGetter}function getPrefixedClassGroupEntries(o,i){return i?o.map(([s,_])=>[s,_.map(_e=>typeof _e=="string"?i+_e:typeof _e=="object"?Object.fromEntries(Object.entries(_e).map(([ct,Mt])=>[i+ct,Mt])):_e)]):o}function createLruCache(o){if(o<1)return{get:()=>{},set:()=>{}};let i=0,s=new Map,_=new Map;function _e(ct,Mt){s.set(ct,Mt),i++,i>o&&(i=0,_=s,s=new Map)}return{get(ct){let Mt=s.get(ct);return Mt!==void 0?Mt:(Mt=_.get(ct))!==void 0?(_e(ct,Mt),Mt):void 0},set(ct,Mt){s.has(ct)?s.set(ct,Mt):_e(ct,Mt)}}}const IMPORTANT_MODIFIER="!";function createSplitModifiers(o){const i=o.separator,s=i.length===1,_=i[0],_e=i.length;return function(ct){const Mt=[];let Ft,Ut=0,Xt=0;for(let rr=0;rr<ct.length;rr++){let or=ct[rr];if(Ut===0){if(or===_&&(s||ct.slice(rr,rr+_e)===i)){Mt.push(ct.slice(Xt,rr)),Xt=rr+_e;continue}if(or==="/"){Ft=rr;continue}}or==="["?Ut++:or==="]"&&Ut--}const Kt=Mt.length===0?ct:ct.substring(Xt),nr=Kt.startsWith(IMPORTANT_MODIFIER);return{modifiers:Mt,hasImportantModifier:nr,baseClassName:nr?Kt.substring(1):Kt,maybePostfixModifierPosition:Ft&&Ft>Xt?Ft-Xt:void 0}}}function sortModifiers(o){if(o.length<=1)return o;const i=[];let s=[];return o.forEach(_=>{_[0]==="["?(i.push(...s.sort(),_),s=[]):s.push(_)}),i.push(...s.sort()),i}function createConfigUtils(o){return{cache:createLruCache(o.cacheSize),splitModifiers:createSplitModifiers(o),...createClassUtils(o)}}const SPLIT_CLASSES_REGEX=/\s+/;function mergeClassList(o,i){const{splitModifiers:s,getClassGroupId:_,getConflictingClassGroupIds:_e}=i,ct=new Set;return o.trim().split(SPLIT_CLASSES_REGEX).map(Mt=>{const{modifiers:Ft,hasImportantModifier:Ut,baseClassName:Xt,maybePostfixModifierPosition:Kt}=s(Mt);let nr=_(Kt?Xt.substring(0,Kt):Xt),rr=!!Kt;if(!nr){if(!Kt)return{isTailwindClass:!1,originalClassName:Mt};if(nr=_(Xt),!nr)return{isTailwindClass:!1,originalClassName:Mt};rr=!1}const or=sortModifiers(Ft).join(":");return{isTailwindClass:!0,modifierId:Ut?or+IMPORTANT_MODIFIER:or,classGroupId:nr,originalClassName:Mt,hasPostfixModifier:rr}}).reverse().filter(Mt=>{if(!Mt.isTailwindClass)return!0;const{modifierId:Ft,classGroupId:Ut,hasPostfixModifier:Xt}=Mt,Kt=Ft+Ut;return!ct.has(Kt)&&(ct.add(Kt),_e(Ut,Xt).forEach(nr=>ct.add(Ft+nr)),!0)}).reverse().map(Mt=>Mt.originalClassName).join(" ")}function twJoin(){let o,i,s=0,_="";for(;s<arguments.length;)(o=arguments[s++])&&(i=toValue(o))&&(_&&(_+=" "),_+=i);return _}function toValue(o){if(typeof o=="string")return o;let i,s="";for(let _=0;_<o.length;_++)o[_]&&(i=toValue(o[_]))&&(s&&(s+=" "),s+=i);return s}function createTailwindMerge(o,...i){let s,_,_e,ct=function(Ft){const Ut=i.reduce((Xt,Kt)=>Kt(Xt),o());return s=createConfigUtils(Ut),_=s.cache.get,_e=s.cache.set,ct=Mt,Mt(Ft)};function Mt(Ft){const Ut=_(Ft);if(Ut)return Ut;const Xt=mergeClassList(Ft,s);return _e(Ft,Xt),Xt}return function(){return ct(twJoin.apply(null,arguments))}}function fromTheme(o){const i=s=>s[o]||[];return i.isThemeGetter=!0,i}const arbitraryValueRegex=/^\[(?:([a-z-]+):)?(.+)\]$/i,fractionRegex=/^\d+\/\d+$/,stringLengths=new Set(["px","full","screen"]),tshirtUnitRegex=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,lengthUnitRegex=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,colorFunctionRegex=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,shadowRegex=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,imageRegex=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/;function isLength(o){return isNumber$2(o)||stringLengths.has(o)||fractionRegex.test(o)}function isArbitraryLength(o){return getIsArbitraryValue(o,"length",isLengthOnly)}function isNumber$2(o){return!!o&&!Number.isNaN(Number(o))}function isArbitraryNumber(o){return getIsArbitraryValue(o,"number",isNumber$2)}function isInteger(o){return!!o&&Number.isInteger(Number(o))}function isPercent(o){return o.endsWith("%")&&isNumber$2(o.slice(0,-1))}function isArbitraryValue(o){return arbitraryValueRegex.test(o)}function isTshirtSize(o){return tshirtUnitRegex.test(o)}const sizeLabels=new Set(["length","size","percentage"]);function isArbitrarySize(o){return getIsArbitraryValue(o,sizeLabels,isNever)}function isArbitraryPosition(o){return getIsArbitraryValue(o,"position",isNever)}const imageLabels=new Set(["image","url"]);function isArbitraryImage(o){return getIsArbitraryValue(o,imageLabels,isImage)}function isArbitraryShadow(o){return getIsArbitraryValue(o,"",isShadow)}function isAny(){return!0}function getIsArbitraryValue(o,i,s){const _=arbitraryValueRegex.exec(o);return!!_&&(_[1]?typeof i=="string"?_[1]===i:i.has(_[1]):s(_[2]))}function isLengthOnly(o){return lengthUnitRegex.test(o)&&!colorFunctionRegex.test(o)}function isNever(){return!1}function isShadow(o){return shadowRegex.test(o)}function isImage(o){return imageRegex.test(o)}function getDefaultConfig(){const o=fromTheme("colors"),i=fromTheme("spacing"),s=fromTheme("blur"),_=fromTheme("brightness"),_e=fromTheme("borderColor"),ct=fromTheme("borderRadius"),Mt=fromTheme("borderSpacing"),Ft=fromTheme("borderWidth"),Ut=fromTheme("contrast"),Xt=fromTheme("grayscale"),Kt=fromTheme("hueRotate"),nr=fromTheme("invert"),rr=fromTheme("gap"),or=fromTheme("gradientColorStops"),hr=fromTheme("gradientColorStopPositions"),fr=fromTheme("inset"),yr=fromTheme("margin"),Lr=fromTheme("opacity"),Br=fromTheme("padding"),Vr=fromTheme("saturate"),Wr=fromTheme("scale"),ro=fromTheme("sepia"),no=fromTheme("skew"),so=fromTheme("space"),ko=fromTheme("translate"),To=()=>["auto",isArbitraryValue,i],oo=()=>[isArbitraryValue,i],No=()=>["",isLength,isArbitraryLength],As=()=>["auto",isNumber$2,isArbitraryValue],Ks=()=>["","0",isArbitraryValue],vu=()=>[isNumber$2,isArbitraryNumber],Fu=()=>[isNumber$2,isArbitraryValue];return{cacheSize:500,separator:":",theme:{colors:[isAny],spacing:[isLength,isArbitraryLength],blur:["none","",isTshirtSize,isArbitraryValue],brightness:vu(),borderColor:[o],borderRadius:["none","","full",isTshirtSize,isArbitraryValue],borderSpacing:oo(),borderWidth:No(),contrast:vu(),grayscale:Ks(),hueRotate:Fu(),invert:Ks(),gap:oo(),gradientColorStops:[o],gradientColorStopPositions:[isPercent,isArbitraryLength],inset:To(),margin:To(),opacity:vu(),padding:oo(),saturate:vu(),scale:vu(),sepia:Ks(),skew:Fu(),space:oo(),translate:oo()},classGroups:{aspect:[{aspect:["auto","square","video",isArbitraryValue]}],container:["container"],columns:[{columns:[isTshirtSize]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",isArbitraryValue]}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[fr]}],"inset-x":[{"inset-x":[fr]}],"inset-y":[{"inset-y":[fr]}],start:[{start:[fr]}],end:[{end:[fr]}],top:[{top:[fr]}],right:[{right:[fr]}],bottom:[{bottom:[fr]}],left:[{left:[fr]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",isInteger,isArbitraryValue]}],basis:[{basis:To()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",isArbitraryValue]}],grow:[{grow:Ks()}],shrink:[{shrink:Ks()}],order:[{order:["first","last","none",isInteger,isArbitraryValue]}],"grid-cols":[{"grid-cols":[isAny]}],"col-start-end":[{col:["auto",{span:["full",isInteger,isArbitraryValue]},isArbitraryValue]}],"col-start":[{"col-start":As()}],"col-end":[{"col-end":As()}],"grid-rows":[{"grid-rows":[isAny]}],"row-start-end":[{row:["auto",{span:[isInteger,isArbitraryValue]},isArbitraryValue]}],"row-start":[{"row-start":As()}],"row-end":[{"row-end":As()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",isArbitraryValue]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",isArbitraryValue]}],gap:[{gap:[rr]}],"gap-x":[{"gap-x":[rr]}],"gap-y":[{"gap-y":[rr]}],"justify-content":[{justify:["normal","start","end","center","between","around","evenly","stretch"]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[Br]}],px:[{px:[Br]}],py:[{py:[Br]}],ps:[{ps:[Br]}],pe:[{pe:[Br]}],pt:[{pt:[Br]}],pr:[{pr:[Br]}],pb:[{pb:[Br]}],pl:[{pl:[Br]}],m:[{m:[yr]}],mx:[{mx:[yr]}],my:[{my:[yr]}],ms:[{ms:[yr]}],me:[{me:[yr]}],mt:[{mt:[yr]}],mr:[{mr:[yr]}],mb:[{mb:[yr]}],ml:[{ml:[yr]}],"space-x":[{"space-x":[so]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[so]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",isArbitraryValue,i]}],"min-w":[{"min-w":[isArbitraryValue,i,"min","max","fit"]}],"max-w":[{"max-w":[isArbitraryValue,i,"none","full","min","max","fit","prose",{screen:[isTshirtSize]},isTshirtSize]}],h:[{h:[isArbitraryValue,i,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[isArbitraryValue,i,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[isArbitraryValue,i,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[isArbitraryValue,i,"auto","min","max","fit"]}],"font-size":[{text:["base",isTshirtSize,isArbitraryLength]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",isArbitraryNumber]}],"font-family":[{font:[isAny]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",isArbitraryValue]}],"line-clamp":[{"line-clamp":["none",isNumber$2,isArbitraryNumber]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",isLength,isArbitraryValue]}],"list-image":[{"list-image":["none",isArbitraryValue]}],"list-style-type":[{list:["none","disc","decimal",isArbitraryValue]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[o]}],"placeholder-opacity":[{"placeholder-opacity":[Lr]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[o]}],"text-opacity":[{"text-opacity":[Lr]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","none","wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",isLength,isArbitraryLength]}],"underline-offset":[{"underline-offset":["auto",isLength,isArbitraryValue]}],"text-decoration-color":[{decoration:[o]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:oo()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",isArbitraryValue]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",isArbitraryValue]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[Lr]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",isArbitraryPosition]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",isArbitrarySize]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},isArbitraryImage]}],"bg-color":[{bg:[o]}],"gradient-from-pos":[{from:[hr]}],"gradient-via-pos":[{via:[hr]}],"gradient-to-pos":[{to:[hr]}],"gradient-from":[{from:[or]}],"gradient-via":[{via:[or]}],"gradient-to":[{to:[or]}],rounded:[{rounded:[ct]}],"rounded-s":[{"rounded-s":[ct]}],"rounded-e":[{"rounded-e":[ct]}],"rounded-t":[{"rounded-t":[ct]}],"rounded-r":[{"rounded-r":[ct]}],"rounded-b":[{"rounded-b":[ct]}],"rounded-l":[{"rounded-l":[ct]}],"rounded-ss":[{"rounded-ss":[ct]}],"rounded-se":[{"rounded-se":[ct]}],"rounded-ee":[{"rounded-ee":[ct]}],"rounded-es":[{"rounded-es":[ct]}],"rounded-tl":[{"rounded-tl":[ct]}],"rounded-tr":[{"rounded-tr":[ct]}],"rounded-br":[{"rounded-br":[ct]}],"rounded-bl":[{"rounded-bl":[ct]}],"border-w":[{border:[Ft]}],"border-w-x":[{"border-x":[Ft]}],"border-w-y":[{"border-y":[Ft]}],"border-w-s":[{"border-s":[Ft]}],"border-w-e":[{"border-e":[Ft]}],"border-w-t":[{"border-t":[Ft]}],"border-w-r":[{"border-r":[Ft]}],"border-w-b":[{"border-b":[Ft]}],"border-w-l":[{"border-l":[Ft]}],"border-opacity":[{"border-opacity":[Lr]}],"border-style":[{border:["solid","dashed","dotted","double","none","hidden"]}],"divide-x":[{"divide-x":[Ft]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[Ft]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[Lr]}],"divide-style":[{divide:["solid","dashed","dotted","double","none"]}],"border-color":[{border:[_e]}],"border-color-x":[{"border-x":[_e]}],"border-color-y":[{"border-y":[_e]}],"border-color-t":[{"border-t":[_e]}],"border-color-r":[{"border-r":[_e]}],"border-color-b":[{"border-b":[_e]}],"border-color-l":[{"border-l":[_e]}],"divide-color":[{divide:[_e]}],"outline-style":[{outline:["","solid","dashed","dotted","double","none"]}],"outline-offset":[{"outline-offset":[isLength,isArbitraryValue]}],"outline-w":[{outline:[isLength,isArbitraryLength]}],"outline-color":[{outline:[o]}],"ring-w":[{ring:No()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[o]}],"ring-opacity":[{"ring-opacity":[Lr]}],"ring-offset-w":[{"ring-offset":[isLength,isArbitraryLength]}],"ring-offset-color":[{"ring-offset":[o]}],shadow:[{shadow:["","inner","none",isTshirtSize,isArbitraryShadow]}],"shadow-color":[{shadow:[isAny]}],opacity:[{opacity:[Lr]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],filter:[{filter:["","none"]}],blur:[{blur:[s]}],brightness:[{brightness:[_]}],contrast:[{contrast:[Ut]}],"drop-shadow":[{"drop-shadow":["","none",isTshirtSize,isArbitraryValue]}],grayscale:[{grayscale:[Xt]}],"hue-rotate":[{"hue-rotate":[Kt]}],invert:[{invert:[nr]}],saturate:[{saturate:[Vr]}],sepia:[{sepia:[ro]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[s]}],"backdrop-brightness":[{"backdrop-brightness":[_]}],"backdrop-contrast":[{"backdrop-contrast":[Ut]}],"backdrop-grayscale":[{"backdrop-grayscale":[Xt]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Kt]}],"backdrop-invert":[{"backdrop-invert":[nr]}],"backdrop-opacity":[{"backdrop-opacity":[Lr]}],"backdrop-saturate":[{"backdrop-saturate":[Vr]}],"backdrop-sepia":[{"backdrop-sepia":[ro]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[Mt]}],"border-spacing-x":[{"border-spacing-x":[Mt]}],"border-spacing-y":[{"border-spacing-y":[Mt]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",isArbitraryValue]}],duration:[{duration:Fu()}],ease:[{ease:["linear","in","out","in-out",isArbitraryValue]}],delay:[{delay:Fu()}],animate:[{animate:["none","spin","ping","pulse","bounce",isArbitraryValue]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[Wr]}],"scale-x":[{"scale-x":[Wr]}],"scale-y":[{"scale-y":[Wr]}],rotate:[{rotate:[isInteger,isArbitraryValue]}],"translate-x":[{"translate-x":[ko]}],"translate-y":[{"translate-y":[ko]}],"skew-x":[{"skew-x":[no]}],"skew-y":[{"skew-y":[no]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",isArbitraryValue]}],accent:[{accent:["auto",o]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",isArbitraryValue]}],"caret-color":[{caret:[o]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":oo()}],"scroll-mx":[{"scroll-mx":oo()}],"scroll-my":[{"scroll-my":oo()}],"scroll-ms":[{"scroll-ms":oo()}],"scroll-me":[{"scroll-me":oo()}],"scroll-mt":[{"scroll-mt":oo()}],"scroll-mr":[{"scroll-mr":oo()}],"scroll-mb":[{"scroll-mb":oo()}],"scroll-ml":[{"scroll-ml":oo()}],"scroll-p":[{"scroll-p":oo()}],"scroll-px":[{"scroll-px":oo()}],"scroll-py":[{"scroll-py":oo()}],"scroll-ps":[{"scroll-ps":oo()}],"scroll-pe":[{"scroll-pe":oo()}],"scroll-pt":[{"scroll-pt":oo()}],"scroll-pr":[{"scroll-pr":oo()}],"scroll-pb":[{"scroll-pb":oo()}],"scroll-pl":[{"scroll-pl":oo()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",isArbitraryValue]}],fill:[{fill:[o,"none"]}],"stroke-w":[{stroke:[isLength,isArbitraryLength,isArbitraryNumber]}],stroke:[{stroke:[o,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}const twMerge=createTailwindMerge(getDefaultConfig);function cn$1(...o){return twMerge(clsx(o))}var THEME;(function(o){o.dark="dark",o.light="light",o.revamp="revamp"})(THEME||(THEME={}));const defaultValues={theme:THEME.light,setTheme:()=>{}},ThemeContext=reactExports.createContext(defaultValues),buttonVariants=cva("ns-py-2 ns-px-8 ns-text-center ns-font-medium ns-flex ns-items-center ns-justify-center disabled:ns-cursor-not-allowed",{variants:{theme:{light:"",dark:"",revamp:""},variant:{soft:"!ns-bg-grey-700 ns-text-grey-600 hover:!ns-bg-grey-700 active:!ns-bg-grey-800 active:ns-text-white disabled:!ns-bg-grey-100 disabled:ns-text-grey-300 disabled:ns-cursor-auto",primary:"ns-bg-red-600 ns-text-white hover:ns-bg-red-800 active:ns-bg-red-900 disabled:ns-bg-grey-100 disabled:ns-text-grey-300",secondary:"ns-text-white ns-border-solid ns-border-2 ns-border-grey-400 ns-bg-grey-900 hover:ns-bg-grey-700 active:ns-bg-grey-800 disabled:ns-border-grey-700 disabled:ns-text-grey-400",tertiary:"ns-bg-white ns-text-blue-700 hover:ns-text-blue-800 active:ns-text-blue-900",icon:"ns-bg-transparent ns-border-1 ns-w-8 ns-h-8 ns-rounded-full !ns-py-0 !ns-px-0 ns-text-black disabled:ns-bg-grey-100 hover:ns-bg-grey-300 active:ns-bg-grey-400",outline:"ns-bg-transparent ns-border-2 ns-border-grey-300 ns-text-black hover:ns-bg-transparent hover:ns-text-grey-750 active:ns-bg-grey-700 active:ns-text-white disabled:ns-bg-grey-100 disabled:ns-text-grey-300"},size:{sm:"ns-w-36 ns-h-10 ns-text-sm",md:"ns-w-38 ns-h-11 ns-text-sm",lg:"ns-w-52 ns-h-16 ns-text-lg"},buttonType:{round:"ns-rounded-68",square:"ns-rounded-10"},variantMode:{soft:"disabled:ns-cursor-pointer"}},compoundVariants:[{theme:"light",variant:"primary",buttonType:"round",class:""},{theme:"light",variant:"primary",variantMode:"soft",buttonType:"round",class:"hover:!ns-bg-grey-400 active:!ns-bg-grey-600 !ns-bg-grey-100 !ns-text-grey-300"},{theme:"light",variant:"secondary",buttonType:"round",class:" "},{theme:"light",variant:"secondary",variantMode:"soft",buttonType:"round",class:" "},{theme:"light",variant:"icon",buttonType:"round",class:" "},{theme:"light",variant:"soft",buttonType:"round",class:" "},{theme:"light",variant:"outline",buttonType:"round",class:" "},{theme:"light",variant:"tertiary",buttonType:"round",class:" "},{theme:"dark",variant:"primary",buttonType:"round",className:"ns-text-black hover:ns-bg-grey-300 active:ns-bg-grey-400"},{theme:"dark",variant:"primary",buttonType:"round",variantMode:"soft",class:"hover:!ns-bg-grey-400 active:!ns-bg-grey-600 !ns-bg-grey-100 !ns-text-grey-300"},{theme:"dark",variant:"secondary",buttonType:"round",className:""},{theme:"dark",variant:"icon",buttonType:"round",class:" "},{theme:"dark",variant:"soft",buttonType:"round",class:" "},{theme:"dark",variant:"outline",buttonType:"round",class:"ns-text-white hover:ns-text-white active:ns-text-white"},{theme:"light",variant:"tertiary",buttonType:"round",class:" "},{theme:"dark",variant:"tertiary",buttonType:"round",class:"!ns-bg-transparent"},{theme:"revamp",variant:"primary",buttonType:"round",class:"!ns-bg-blue-700 !ns-text-white hover:!ns-bg-blue-800 active:!ns-bg-blue-900 disabled:!ns-bg-grey-100 disabled:!ns-text-grey-300"},{theme:"revamp",variant:"secondary",buttonType:"round",class:" "},{theme:"revamp",variant:"secondary",variantMode:"soft",buttonType:"round",class:" "},{theme:"revamp",variant:"icon",buttonType:"round",class:" "},{theme:"light",variant:"soft",buttonType:"round",class:" "},{theme:"light",variant:"outline",buttonType:"round",class:" "},{theme:"revamp",variant:"tertiary",buttonType:"round",class:" "}],defaultVariants:{theme:"light",variant:"primary",buttonType:"round",size:"sm"}}),Button=reactExports.forwardRef(({className:o,variant:i,buttonType:s,size:_,asChild:_e=!1,disabled:ct,variantMode:Mt,...Ft},Ut)=>{const{theme:Xt}=reactExports.useContext(ThemeContext),Kt=_e?$5e63c961fc1ce211$export$8c6ed5c666ac1360:"button";return reactExports.createElement(Kt,{className:cn$1(buttonVariants({theme:Xt,variant:i,size:_,buttonType:s,className:o,variantMode:Mt})),ref:Ut,disabled:ct&&Mt!=="soft",...Ft})});function $c512c27ab02ef895$export$50c7b4e9d9f19c1(o,i=[]){let s=[];const _=()=>{const _e=s.map(ct=>reactExports.createContext(ct));return function(ct){const Mt=(ct==null?void 0:ct[o])||_e;return reactExports.useMemo(()=>({[`__scope${o}`]:{...ct,[o]:Mt}}),[ct,Mt])}};return _.scopeName=o,[function(_e,ct){const Mt=reactExports.createContext(ct),Ft=s.length;function Ut(Xt){const{scope:Kt,children:nr,...rr}=Xt,or=(Kt==null?void 0:Kt[o][Ft])||Mt,hr=reactExports.useMemo(()=>rr,Object.values(rr));return reactExports.createElement(or.Provider,{value:hr},nr)}return s=[...s,ct],Ut.displayName=_e+"Provider",[Ut,function(Xt,Kt){const nr=(Kt==null?void 0:Kt[o][Ft])||Mt,rr=reactExports.useContext(nr);if(rr)return rr;if(ct!==void 0)return ct;throw new Error(`\`${Xt}\` must be used within \`${_e}\``)}]},$c512c27ab02ef895$var$composeContextScopes(_,...i)]}function $c512c27ab02ef895$var$composeContextScopes(...o){const i=o[0];if(o.length===1)return i;const s=()=>{const _=o.map(_e=>({useScope:_e(),scopeName:_e.scopeName}));return function(_e){const ct=_.reduce((Mt,{useScope:Ft,scopeName:Ut})=>({...Mt,...Ft(_e)[`__scope${Ut}`]}),{});return reactExports.useMemo(()=>({[`__scope${i.scopeName}`]:ct}),[ct])}};return s.scopeName=i.scopeName,s}function $e02a7d9cb1dc128c$export$c74125a8e3af6bb2(o){const i=o+"CollectionProvider",[s,_]=$c512c27ab02ef895$export$50c7b4e9d9f19c1(i),[_e,ct]=s(i,{collectionRef:{current:null},itemMap:new Map}),Mt=o+"CollectionSlot",Ft=o+"CollectionItemSlot",Ut="data-radix-collection-item";return[{Provider:Xt=>{const{scope:Kt,children:nr}=Xt,rr=React__default.useRef(null),or=React__default.useRef(new Map).current;return React__default.createElement(_e,{scope:Kt,itemMap:or,collectionRef:rr},nr)},Slot:React__default.forwardRef((Xt,Kt)=>{const{scope:nr,children:rr}=Xt,or=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(Kt,ct(Mt,nr).collectionRef);return React__default.createElement($5e63c961fc1ce211$export$8c6ed5c666ac1360,{ref:or},rr)}),ItemSlot:React__default.forwardRef((Xt,Kt)=>{const{scope:nr,children:rr,...or}=Xt,hr=React__default.useRef(null),fr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(Kt,hr),yr=ct(Ft,nr);return React__default.useEffect(()=>(yr.itemMap.set(hr,{ref:hr,...or}),()=>{yr.itemMap.delete(hr)})),React__default.createElement($5e63c961fc1ce211$export$8c6ed5c666ac1360,{[Ut]:"",ref:fr},rr)})},function(Xt){const Kt=ct(o+"CollectionConsumer",Xt);return React__default.useCallback(()=>{const rr=Kt.collectionRef.current;if(!rr)return[];const or=Array.from(rr.querySelectorAll(`[${Ut}]`));return Array.from(Kt.itemMap.values()).sort((fr,yr)=>or.indexOf(fr.ref.current)-or.indexOf(yr.ref.current))},[Kt.collectionRef,Kt.itemMap])},_]}function $e42e1063c40fb3ef$export$b9ecd428b558ff10(o,i,{checkForDefaultPrevented:s=!0}={}){return function(_){if(o==null||o(_),s===!1||!_.defaultPrevented)return i==null?void 0:i(_)}}function $b1b2314f5f9a1d84$export$25bec8c6f54ee79a(o){const i=reactExports.useRef(o);return reactExports.useEffect(()=>{i.current=o}),reactExports.useMemo(()=>(...s)=>{var _;return(_=i.current)===null||_===void 0?void 0:_.call(i,...s)},[])}function $71cd76cc60e0454e$export$6f32135080cb4c3({prop:o,defaultProp:i,onChange:s=()=>{}}){const[_,_e]=$71cd76cc60e0454e$var$useUncontrolledState({defaultProp:i,onChange:s}),ct=o!==void 0,Mt=ct?o:_,Ft=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(s);return[Mt,reactExports.useCallback(Ut=>{if(ct){const Xt=typeof Ut=="function"?Ut(o):Ut;Xt!==o&&Ft(Xt)}else _e(Ut)},[ct,o,_e,Ft])]}function $71cd76cc60e0454e$var$useUncontrolledState({defaultProp:o,onChange:i}){const s=reactExports.useState(o),[_]=s,_e=reactExports.useRef(_),ct=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(i);return reactExports.useEffect(()=>{_e.current!==_&&(ct(_),_e.current=_)},[_,_e,ct]),s}Button.displayName="Button";const $8927f6f2acc4f386$var$NODES=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],$8927f6f2acc4f386$export$250ffa63cdc0d034=$8927f6f2acc4f386$var$NODES.reduce((o,i)=>{const s=reactExports.forwardRef((_,_e)=>{const{asChild:ct,...Mt}=_,Ft=ct?$5e63c961fc1ce211$export$8c6ed5c666ac1360:i;return reactExports.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),reactExports.createElement(Ft,_extends({},Mt,{ref:_e}))});return s.displayName=`Primitive.${i}`,{...o,[i]:s}},{});function $8927f6f2acc4f386$export$6d1a0317bde7de7f(o,i){o&&reactDomExports.flushSync(()=>o.dispatchEvent(i))}const $9f79659886946c16$export$e5c5a5f917a5871c=globalThis!=null&&globalThis.document?reactExports.useLayoutEffect:()=>{};function $fe963b355347cc68$export$3e6543de14f8614f(o,i){return reactExports.useReducer((s,_)=>{const _e=i[s][_];return _e??s},o)}const $921a889cee6df7e8$export$99c2b779aa4e8b8b=o=>{const{present:i,children:s}=o,_=$921a889cee6df7e8$var$usePresence(i),_e=typeof s=="function"?s({present:_.isPresent}):reactExports.Children.only(s),ct=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(_.ref,_e.ref);return typeof s=="function"||_.isPresent?reactExports.cloneElement(_e,{ref:ct}):null};function $921a889cee6df7e8$var$usePresence(o){const[i,s]=reactExports.useState(),_=reactExports.useRef({}),_e=reactExports.useRef(o),ct=reactExports.useRef("none"),Mt=o?"mounted":"unmounted",[Ft,Ut]=$fe963b355347cc68$export$3e6543de14f8614f(Mt,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return reactExports.useEffect(()=>{const Xt=$921a889cee6df7e8$var$getAnimationName(_.current);ct.current=Ft==="mounted"?Xt:"none"},[Ft]),$9f79659886946c16$export$e5c5a5f917a5871c(()=>{const Xt=_.current,Kt=_e.current;if(Kt!==o){const nr=ct.current,rr=$921a889cee6df7e8$var$getAnimationName(Xt);o?Ut("MOUNT"):rr==="none"||(Xt==null?void 0:Xt.display)==="none"?Ut("UNMOUNT"):Ut(Kt&&nr!==rr?"ANIMATION_OUT":"UNMOUNT"),_e.current=o}},[o,Ut]),$9f79659886946c16$export$e5c5a5f917a5871c(()=>{if(i){const Xt=nr=>{const rr=$921a889cee6df7e8$var$getAnimationName(_.current).includes(nr.animationName);nr.target===i&&rr&&reactDomExports.flushSync(()=>Ut("ANIMATION_END"))},Kt=nr=>{nr.target===i&&(ct.current=$921a889cee6df7e8$var$getAnimationName(_.current))};return i.addEventListener("animationstart",Kt),i.addEventListener("animationcancel",Xt),i.addEventListener("animationend",Xt),()=>{i.removeEventListener("animationstart",Kt),i.removeEventListener("animationcancel",Xt),i.removeEventListener("animationend",Xt)}}Ut("ANIMATION_END")},[i,Ut]),{isPresent:["mounted","unmountSuspended"].includes(Ft),ref:reactExports.useCallback(Xt=>{Xt&&(_.current=getComputedStyle(Xt)),s(Xt)},[])}}function $921a889cee6df7e8$var$getAnimationName(o){return(o==null?void 0:o.animationName)||"none"}$921a889cee6df7e8$export$99c2b779aa4e8b8b.displayName="Presence";const $1746a345f3d73bb7$var$useReactId=React.useId||(()=>{});let $1746a345f3d73bb7$var$count=0;function $1746a345f3d73bb7$export$f680877a34711e37(o){const[i,s]=reactExports.useState($1746a345f3d73bb7$var$useReactId());return $9f79659886946c16$export$e5c5a5f917a5871c(()=>{s(_=>_??String($1746a345f3d73bb7$var$count++))},[o]),i?`radix-${i}`:""}const $409067139f391064$var$COLLAPSIBLE_NAME="Collapsible",[$409067139f391064$var$createCollapsibleContext,$409067139f391064$export$952b32dcbe73087a]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($409067139f391064$var$COLLAPSIBLE_NAME),[$409067139f391064$var$CollapsibleProvider,$409067139f391064$var$useCollapsibleContext]=$409067139f391064$var$createCollapsibleContext($409067139f391064$var$COLLAPSIBLE_NAME),$409067139f391064$export$6eb0f7ddcda6131f=reactExports.forwardRef((o,i)=>{const{__scopeCollapsible:s,open:_,defaultOpen:_e,disabled:ct,onOpenChange:Mt,...Ft}=o,[Ut=!1,Xt]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:_,defaultProp:_e,onChange:Mt});return reactExports.createElement($409067139f391064$var$CollapsibleProvider,{scope:s,disabled:ct,contentId:$1746a345f3d73bb7$export$f680877a34711e37(),open:Ut,onOpenToggle:reactExports.useCallback(()=>Xt(Kt=>!Kt),[Xt])},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends({"data-state":$409067139f391064$var$getState(Ut),"data-disabled":ct?"":void 0},Ft,{ref:i})))}),$409067139f391064$var$TRIGGER_NAME="CollapsibleTrigger",$409067139f391064$export$c135dce7b15bbbdc=reactExports.forwardRef((o,i)=>{const{__scopeCollapsible:s,..._}=o,_e=$409067139f391064$var$useCollapsibleContext($409067139f391064$var$TRIGGER_NAME,s);return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.button,_extends({type:"button","aria-controls":_e.contentId,"aria-expanded":_e.open||!1,"data-state":$409067139f391064$var$getState(_e.open),"data-disabled":_e.disabled?"":void 0,disabled:_e.disabled},_,{ref:i,onClick:$e42e1063c40fb3ef$export$b9ecd428b558ff10(o.onClick,_e.onOpenToggle)}))}),$409067139f391064$var$CONTENT_NAME="CollapsibleContent",$409067139f391064$export$aadde00976f34151=reactExports.forwardRef((o,i)=>{const{forceMount:s,..._}=o,_e=$409067139f391064$var$useCollapsibleContext($409067139f391064$var$CONTENT_NAME,o.__scopeCollapsible);return reactExports.createElement($921a889cee6df7e8$export$99c2b779aa4e8b8b,{present:s||_e.open},({present:ct})=>reactExports.createElement($409067139f391064$var$CollapsibleContentImpl,_extends({},_,{ref:i,present:ct})))}),$409067139f391064$var$CollapsibleContentImpl=reactExports.forwardRef((o,i)=>{const{__scopeCollapsible:s,present:_,children:_e,...ct}=o,Mt=$409067139f391064$var$useCollapsibleContext($409067139f391064$var$CONTENT_NAME,s),[Ft,Ut]=reactExports.useState(_),Xt=reactExports.useRef(null),Kt=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(i,Xt),nr=reactExports.useRef(0),rr=nr.current,or=reactExports.useRef(0),hr=or.current,fr=Mt.open||Ft,yr=reactExports.useRef(fr),Lr=reactExports.useRef();return reactExports.useEffect(()=>{const Br=requestAnimationFrame(()=>yr.current=!1);return()=>cancelAnimationFrame(Br)},[]),$9f79659886946c16$export$e5c5a5f917a5871c(()=>{const Br=Xt.current;if(Br){Lr.current=Lr.current||{transitionDuration:Br.style.transitionDuration,animationName:Br.style.animationName},Br.style.transitionDuration="0s",Br.style.animationName="none";const Vr=Br.getBoundingClientRect();nr.current=Vr.height,or.current=Vr.width,yr.current||(Br.style.transitionDuration=Lr.current.transitionDuration,Br.style.animationName=Lr.current.animationName),Ut(_)}},[Mt.open,_]),reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends({"data-state":$409067139f391064$var$getState(Mt.open),"data-disabled":Mt.disabled?"":void 0,id:Mt.contentId,hidden:!fr},ct,{ref:Kt,style:{"--radix-collapsible-content-height":rr?`${rr}px`:void 0,"--radix-collapsible-content-width":hr?`${hr}px`:void 0,...o.style}}),fr&&_e)});function $409067139f391064$var$getState(o){return o?"open":"closed"}const $409067139f391064$export$be92b6f5f03c0fe9=$409067139f391064$export$6eb0f7ddcda6131f,$409067139f391064$export$41fb9f06171c75f4=$409067139f391064$export$c135dce7b15bbbdc,$409067139f391064$export$7c6e2c02157bb7d2=$409067139f391064$export$aadde00976f34151,$f631663db3294ace$var$DirectionContext=reactExports.createContext(void 0);function $f631663db3294ace$export$b39126d51d94e6f3(o){const i=reactExports.useContext($f631663db3294ace$var$DirectionContext);return o||i||"ltr"}const $1bf158f521e1b1b4$var$ACCORDION_NAME="Accordion",$1bf158f521e1b1b4$var$ACCORDION_KEYS=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[$1bf158f521e1b1b4$var$Collection,$1bf158f521e1b1b4$var$useCollection,$1bf158f521e1b1b4$var$createCollectionScope]=$e02a7d9cb1dc128c$export$c74125a8e3af6bb2($1bf158f521e1b1b4$var$ACCORDION_NAME),[$1bf158f521e1b1b4$var$createAccordionContext,$1bf158f521e1b1b4$export$9748edc328a73be1]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($1bf158f521e1b1b4$var$ACCORDION_NAME,[$1bf158f521e1b1b4$var$createCollectionScope,$409067139f391064$export$952b32dcbe73087a]),$1bf158f521e1b1b4$var$useCollapsibleScope=$409067139f391064$export$952b32dcbe73087a(),$1bf158f521e1b1b4$export$a766cd26d0d69044=React__default.forwardRef((o,i)=>{const{type:s,..._}=o,_e=_,ct=_;return React__default.createElement($1bf158f521e1b1b4$var$Collection.Provider,{scope:o.__scopeAccordion},s==="multiple"?React__default.createElement($1bf158f521e1b1b4$var$AccordionImplMultiple,_extends({},ct,{ref:i})):React__default.createElement($1bf158f521e1b1b4$var$AccordionImplSingle,_extends({},_e,{ref:i})))});$1bf158f521e1b1b4$export$a766cd26d0d69044.propTypes={type(o){const i=o.value||o.defaultValue;return o.type&&!["single","multiple"].includes(o.type)?new Error("Invalid prop `type` supplied to `Accordion`. Expected one of `single | multiple`."):o.type==="multiple"&&typeof i=="string"?new Error("Invalid prop `type` supplied to `Accordion`. Expected `single` when `defaultValue` or `value` is type `string`."):o.type==="single"&&Array.isArray(i)?new Error("Invalid prop `type` supplied to `Accordion`. Expected `multiple` when `defaultValue` or `value` is type `string[]`."):null}};const[$1bf158f521e1b1b4$var$AccordionValueProvider,$1bf158f521e1b1b4$var$useAccordionValueContext]=$1bf158f521e1b1b4$var$createAccordionContext($1bf158f521e1b1b4$var$ACCORDION_NAME),[$1bf158f521e1b1b4$var$AccordionCollapsibleProvider,$1bf158f521e1b1b4$var$useAccordionCollapsibleContext]=$1bf158f521e1b1b4$var$createAccordionContext($1bf158f521e1b1b4$var$ACCORDION_NAME,{collapsible:!1}),$1bf158f521e1b1b4$var$AccordionImplSingle=React__default.forwardRef((o,i)=>{const{value:s,defaultValue:_,onValueChange:_e=()=>{},collapsible:ct=!1,...Mt}=o,[Ft,Ut]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:s,defaultProp:_,onChange:_e});return React__default.createElement($1bf158f521e1b1b4$var$AccordionValueProvider,{scope:o.__scopeAccordion,value:Ft?[Ft]:[],onItemOpen:Ut,onItemClose:React__default.useCallback(()=>ct&&Ut(""),[ct,Ut])},React__default.createElement($1bf158f521e1b1b4$var$AccordionCollapsibleProvider,{scope:o.__scopeAccordion,collapsible:ct},React__default.createElement($1bf158f521e1b1b4$var$AccordionImpl,_extends({},Mt,{ref:i}))))}),$1bf158f521e1b1b4$var$AccordionImplMultiple=React__default.forwardRef((o,i)=>{const{value:s,defaultValue:_,onValueChange:_e=()=>{},...ct}=o,[Mt=[],Ft]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:s,defaultProp:_,onChange:_e}),Ut=React__default.useCallback(Kt=>Ft((nr=[])=>[...nr,Kt]),[Ft]),Xt=React__default.useCallback(Kt=>Ft((nr=[])=>nr.filter(rr=>rr!==Kt)),[Ft]);return React__default.createElement($1bf158f521e1b1b4$var$AccordionValueProvider,{scope:o.__scopeAccordion,value:Mt,onItemOpen:Ut,onItemClose:Xt},React__default.createElement($1bf158f521e1b1b4$var$AccordionCollapsibleProvider,{scope:o.__scopeAccordion,collapsible:!0},React__default.createElement($1bf158f521e1b1b4$var$AccordionImpl,_extends({},ct,{ref:i}))))}),[$1bf158f521e1b1b4$var$AccordionImplProvider,$1bf158f521e1b1b4$var$useAccordionContext]=$1bf158f521e1b1b4$var$createAccordionContext($1bf158f521e1b1b4$var$ACCORDION_NAME),$1bf158f521e1b1b4$var$AccordionImpl=React__default.forwardRef((o,i)=>{const{__scopeAccordion:s,disabled:_,dir:_e,orientation:ct="vertical",...Mt}=o,Ft=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(React__default.useRef(null),i),Ut=$1bf158f521e1b1b4$var$useCollection(s),Xt=$f631663db3294ace$export$b39126d51d94e6f3(_e)==="ltr",Kt=$e42e1063c40fb3ef$export$b9ecd428b558ff10(o.onKeyDown,nr=>{var rr;if(!$1bf158f521e1b1b4$var$ACCORDION_KEYS.includes(nr.key))return;const or=nr.target,hr=Ut().filter(ro=>{var no;return!((no=ro.ref.current)!==null&&no!==void 0&&no.disabled)}),fr=hr.findIndex(ro=>ro.ref.current===or),yr=hr.length;if(fr===-1)return;nr.preventDefault();let Lr=fr;const Br=yr-1,Vr=()=>{Lr=fr+1,Lr>Br&&(Lr=0)},Wr=()=>{Lr=fr-1,Lr<0&&(Lr=Br)};switch(nr.key){case"Home":Lr=0;break;case"End":Lr=Br;break;case"ArrowRight":ct==="horizontal"&&(Xt?Vr():Wr());break;case"ArrowDown":ct==="vertical"&&Vr();break;case"ArrowLeft":ct==="horizontal"&&(Xt?Wr():Vr());break;case"ArrowUp":ct==="vertical"&&Wr()}(rr=hr[Lr%yr].ref.current)===null||rr===void 0||rr.focus()});return React__default.createElement($1bf158f521e1b1b4$var$AccordionImplProvider,{scope:s,disabled:_,direction:_e,orientation:ct},React__default.createElement($1bf158f521e1b1b4$var$Collection.Slot,{scope:s},React__default.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends({},Mt,{"data-orientation":ct,ref:Ft,onKeyDown:_?void 0:Kt}))))}),$1bf158f521e1b1b4$var$ITEM_NAME="AccordionItem",[$1bf158f521e1b1b4$var$AccordionItemProvider,$1bf158f521e1b1b4$var$useAccordionItemContext]=$1bf158f521e1b1b4$var$createAccordionContext($1bf158f521e1b1b4$var$ITEM_NAME),$1bf158f521e1b1b4$export$d99097c13d4dac9f=React__default.forwardRef((o,i)=>{const{__scopeAccordion:s,value:_,..._e}=o,ct=$1bf158f521e1b1b4$var$useAccordionContext($1bf158f521e1b1b4$var$ITEM_NAME,s),Mt=$1bf158f521e1b1b4$var$useAccordionValueContext($1bf158f521e1b1b4$var$ITEM_NAME,s),Ft=$1bf158f521e1b1b4$var$useCollapsibleScope(s),Ut=$1746a345f3d73bb7$export$f680877a34711e37(),Xt=_&&Mt.value.includes(_)||!1,Kt=ct.disabled||o.disabled;return React__default.createElement($1bf158f521e1b1b4$var$AccordionItemProvider,{scope:s,open:Xt,disabled:Kt,triggerId:Ut},React__default.createElement($409067139f391064$export$be92b6f5f03c0fe9,_extends({"data-orientation":ct.orientation,"data-state":$1bf158f521e1b1b4$var$getState(Xt)},Ft,_e,{ref:i,disabled:Kt,open:Xt,onOpenChange:nr=>{nr?Mt.onItemOpen(_):Mt.onItemClose(_)}})))}),$1bf158f521e1b1b4$var$HEADER_NAME="AccordionHeader",$1bf158f521e1b1b4$export$5e3e5deaaf81ee41=React__default.forwardRef((o,i)=>{const{__scopeAccordion:s,..._}=o,_e=$1bf158f521e1b1b4$var$useAccordionContext($1bf158f521e1b1b4$var$ACCORDION_NAME,s),ct=$1bf158f521e1b1b4$var$useAccordionItemContext($1bf158f521e1b1b4$var$HEADER_NAME,s);return React__default.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.h3,_extends({"data-orientation":_e.orientation,"data-state":$1bf158f521e1b1b4$var$getState(ct.open),"data-disabled":ct.disabled?"":void 0},_,{ref:i}))}),$1bf158f521e1b1b4$var$TRIGGER_NAME="AccordionTrigger",$1bf158f521e1b1b4$export$94e939b1f85bdd73=React__default.forwardRef((o,i)=>{const{__scopeAccordion:s,..._}=o,_e=$1bf158f521e1b1b4$var$useAccordionContext($1bf158f521e1b1b4$var$ACCORDION_NAME,s),ct=$1bf158f521e1b1b4$var$useAccordionItemContext($1bf158f521e1b1b4$var$TRIGGER_NAME,s),Mt=$1bf158f521e1b1b4$var$useAccordionCollapsibleContext($1bf158f521e1b1b4$var$TRIGGER_NAME,s),Ft=$1bf158f521e1b1b4$var$useCollapsibleScope(s);return React__default.createElement($1bf158f521e1b1b4$var$Collection.ItemSlot,{scope:s},React__default.createElement($409067139f391064$export$41fb9f06171c75f4,_extends({"aria-disabled":ct.open&&!Mt.collapsible||void 0,"data-orientation":_e.orientation,id:ct.triggerId},Ft,_,{ref:i})))}),$1bf158f521e1b1b4$var$CONTENT_NAME="AccordionContent",$1bf158f521e1b1b4$export$985b9a77379b54a0=React__default.forwardRef((o,i)=>{const{__scopeAccordion:s,..._}=o,_e=$1bf158f521e1b1b4$var$useAccordionContext($1bf158f521e1b1b4$var$ACCORDION_NAME,s),ct=$1bf158f521e1b1b4$var$useAccordionItemContext($1bf158f521e1b1b4$var$CONTENT_NAME,s),Mt=$1bf158f521e1b1b4$var$useCollapsibleScope(s);return React__default.createElement($409067139f391064$export$7c6e2c02157bb7d2,_extends({role:"region","aria-labelledby":ct.triggerId,"data-orientation":_e.orientation},Mt,_,{ref:i,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...o.style}}))});function $1bf158f521e1b1b4$var$getState(o){return o?"open":"closed"}const $1bf158f521e1b1b4$export$6d08773d2e66f8f2=$1bf158f521e1b1b4$export$d99097c13d4dac9f,$1bf158f521e1b1b4$export$8b251419efc915eb=$1bf158f521e1b1b4$export$5e3e5deaaf81ee41,$1bf158f521e1b1b4$export$41fb9f06171c75f4=$1bf158f521e1b1b4$export$94e939b1f85bdd73,$1bf158f521e1b1b4$export$7c6e2c02157bb7d2=$1bf158f521e1b1b4$export$985b9a77379b54a0,SCAccordionItem=reactExports.forwardRef(({className:o,...i},s)=>reactExports.createElement($1bf158f521e1b1b4$export$6d08773d2e66f8f2,{ref:s,className:cn$1("ns-border-b ns-border-grey-200",o),...i}));SCAccordionItem.displayName="AccordionItem";const SCAccordionTrigger=reactExports.forwardRef(({className:o,children:i,triggerIcon:s,icons:_,..._e},ct)=>reactExports.createElement($1bf158f521e1b1b4$export$8b251419efc915eb,{className:"ns-flex"},!_&&reactExports.createElement($1bf158f521e1b1b4$export$41fb9f06171c75f4,{ref:ct,className:cn$1("ns-flex ns-flex-1 ns-items-center ns-justify-between ns-py-4 ns-font-medium ns-text-black ns-transition-all [&[data-state=open]>svg]:ns-rotate-180",o),..._e},i,s||reactExports.createElement("svg",{className:"ns-h-4 ns-w-4 ns-shrink-0 ns-transition-transform ns-duration-200",width:"25",height:"24",viewBox:"0 0 25 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},reactExports.createElement("path",{d:"M19.9883 8.28711L12.5129 15.7625L5.03746 8.28711",stroke:"#08081B",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}))),_&&reactExports.createElement(reactExports.Fragment,null,reactExports.createElement($1bf158f521e1b1b4$export$41fb9f06171c75f4,{ref:ct,className:cn$1("ns-flex ns-flex-1 ns-items-center ns-justify-between ns-py-4 ns-font-medium ns-transition-all [&[data-state=open]>svg]:ns-rotate-180",o),..._e},i),_)));SCAccordionTrigger.displayName=$1bf158f521e1b1b4$export$41fb9f06171c75f4.displayName;const SCAccordionContent=reactExports.forwardRef(({className:o,children:i,...s},_)=>reactExports.createElement($1bf158f521e1b1b4$export$7c6e2c02157bb7d2,{ref:_,className:"ns-overflow-hidden ns-text-sm ns-transition-all data-[state=closed]:ns-animate-accordion-up data-[state=open]:ns-animate-accordion-down",...s},reactExports.createElement("div",{className:cn$1("ns-pb-4 ns-pt-0",o)},i)));SCAccordionContent.displayName=$1bf158f521e1b1b4$export$7c6e2c02157bb7d2.displayName;function isObject$1(o){return Object.prototype.toString.call(o)==="[object Object]"}function isRecord(o){return isObject$1(o)||Array.isArray(o)}function canUseDOM(){return!(typeof window>"u"||!window.document||!window.document.createElement)}function areOptionsEqual(o,i){const s=Object.keys(o),_=Object.keys(i);return s.length!==_.length?!1:JSON.stringify(Object.keys(o.breakpoints||{}))===JSON.stringify(Object.keys(i.breakpoints||{}))&&s.every(_e=>{const ct=o[_e],Mt=i[_e];return typeof ct=="function"?`${ct}`==`${Mt}`:isRecord(ct)&&isRecord(Mt)?areOptionsEqual(ct,Mt):ct===Mt})}function sortAndMapPluginToOptions(o){return o.concat().sort((i,s)=>i.name>s.name?1:-1).map(i=>i.options)}function arePluginsEqual(o,i){if(o.length!==i.length)return!1;const s=sortAndMapPluginToOptions(o),_=sortAndMapPluginToOptions(i);return s.every((_e,ct)=>areOptionsEqual(_e,_[ct]))}function isNumber$1(o){return typeof o=="number"}function isString$1(o){return typeof o=="string"}function isBoolean(o){return typeof o=="boolean"}function isObject(o){return Object.prototype.toString.call(o)==="[object Object]"}function mathAbs(o){return Math.abs(o)}function mathSign(o){return Math.sign(o)}function deltaAbs(o,i){return mathAbs(o-i)}function factorAbs(o,i){if(o===0||i===0||mathAbs(o)<=mathAbs(i))return 0;const s=deltaAbs(mathAbs(o),mathAbs(i));return mathAbs(s/o)}function arrayKeys(o){return objectKeys(o).map(Number)}function arrayLast(o){return o[arrayLastIndex(o)]}function arrayLastIndex(o){return Math.max(0,o.length-1)}function arrayIsLastIndex(o,i){return i===arrayLastIndex(o)}function arrayFromNumber(o,i=0){return Array.from(Array(o),(s,_)=>i+_)}function objectKeys(o){return Object.keys(o)}function objectsMergeDeep(o,i){return[o,i].reduce((s,_)=>(objectKeys(_).forEach(_e=>{const ct=s[_e],Mt=_[_e],Ft=isObject(ct)&&isObject(Mt);s[_e]=Ft?objectsMergeDeep(ct,Mt):Mt}),s),{})}function isMouseEvent(o,i){return i.MouseEvent!==void 0&&o instanceof i.MouseEvent}function Alignment(o,i){const s={start:function(){return 0},center:function(ct){return _(ct)/2},end:_};function _(ct){return i-ct}return{measure:function(ct,Mt){return isString$1(o)?s[o](ct):o(i,ct,Mt)}}}function EventStore(){let o=[];const i={add:function(s,_,_e,ct={passive:!0}){let Mt;if("addEventListener"in s)s.addEventListener(_,_e,ct),Mt=()=>s.removeEventListener(_,_e,ct);else{const Ft=s;Ft.addListener(_e),Mt=()=>Ft.removeListener(_e)}return o.push(Mt),i},clear:function(){o=o.filter(s=>s())}};return i}function Animations(o,i,s,_){const _e=EventStore(),ct=1e3/60;let Mt=null,Ft=0,Ut=0;function Xt(nr){if(!Ut)return;Mt||(Mt=nr);const rr=nr-Mt;for(Mt=nr,Ft+=rr;Ft>=ct;)s(),Ft-=ct;const or=mathAbs(Ft/ct);_(or),Ut&&i.requestAnimationFrame(Xt)}function Kt(){i.cancelAnimationFrame(Ut),Mt=null,Ft=0,Ut=0}return{init:function(){_e.add(o,"visibilitychange",()=>{o.hidden&&(Mt=null,Ft=0)})},destroy:function(){Kt(),_e.clear()},start:function(){Ut||(Ut=i.requestAnimationFrame(Xt))},stop:Kt,update:s,render:_}}function Axis(o,i){const s=i==="rtl",_=o==="y",_e=!_&&s?-1:1;return{scroll:_?"y":"x",cross:_?"x":"y",startEdge:_?"top":s?"right":"left",endEdge:_?"bottom":s?"left":"right",measureSize:function(ct){const{height:Mt,width:Ft}=ct;return _?Mt:Ft},direction:function(ct){return ct*_e}}}function Limit(o=0,i=0){const s=mathAbs(o-i);function _(Mt){return Mt<o}function _e(Mt){return Mt>i}function ct(Mt){return _(Mt)||_e(Mt)}return{length:s,max:i,min:o,constrain:function(Mt){return ct(Mt)?_(Mt)?o:i:Mt},reachedAny:ct,reachedMax:_e,reachedMin:_,removeOffset:function(Mt){return s?Mt-s*Math.ceil((Mt-i)/s):Mt}}}function Counter(o,i,s){const{constrain:_}=Limit(0,o),_e=o+1;let ct=Mt(i);function Mt(Kt){return s?mathAbs((_e+Kt)%_e):_(Kt)}function Ft(){return ct}function Ut(){return Counter(o,Ft(),s)}const Xt={get:Ft,set:function(Kt){return ct=Mt(Kt),Xt},add:function(Kt){return Ut().set(Ft()+Kt)},clone:Ut};return Xt}function DragHandler(o,i,s,_,_e,ct,Mt,Ft,Ut,Xt,Kt,nr,rr,or,hr,fr,yr,Lr,Br){const{cross:Vr,direction:Wr}=o,ro=["INPUT","SELECT","TEXTAREA"],no={passive:!1},so=EventStore(),ko=EventStore(),To=Limit(50,225).constrain(or.measure(20)),oo={mouse:300,touch:400},No={mouse:500,touch:600},As=hr?43:25;let Ks=!1,vu=0,Fu=0,Ap=!1,Pp=!1,Lo=!1,Au=!1;function Mp(Fp){if(!isMouseEvent(Fp,_)&&Fp.touches.length>=2)return Lp(Fp);const wm=ct.readPoint(Fp),Bp=ct.readPoint(Fp,Vr),Em=deltaAbs(wm,vu),Yp=deltaAbs(Bp,Fu);if(!Pp&&!Au&&(!Fp.cancelable||(Pp=Em>Yp,!Pp)))return Lp(Fp);const _m=ct.pointerMove(Fp);Em>fr&&(Lo=!0),Xt.useFriction(.3).useDuration(1),Ft.start(),_e.add(Wr(_m)),Fp.preventDefault()}function Lp(Fp){const wm=Kt.byDistance(0,!1).index!==nr.get(),Bp=ct.pointerUp(Fp)*(hr?No:oo)[Au?"mouse":"touch"],Em=function(Im,Mm){const Bm=nr.add(-1*mathSign(Im)),zm=Kt.byDistance(Im,!hr).distance;return hr||mathAbs(Im)<To?zm:yr&&Mm?.5*zm:Kt.byIndex(Bm.get(),0).distance}(Wr(Bp),wm),Yp=factorAbs(Bp,Em),_m=As-10*Yp,Tm=Lr+Yp/50;Pp=!1,Ap=!1,ko.clear(),Xt.useDuration(_m).useFriction(Tm),Ut.distance(Em,!hr),Au=!1,rr.emit("pointerUp")}function Op(Fp){Lo&&(Fp.stopPropagation(),Fp.preventDefault(),Lo=!1)}return{init:function(Fp){if(!Br)return;function wm(Em){(isBoolean(Br)||Br(Fp,Em))&&function(Yp){const _m=isMouseEvent(Yp,_);Au=_m,Lo=hr&&_m&&!Yp.buttons&&Ks,Ks=deltaAbs(_e.get(),Mt.get())>=2,!(_m&&Yp.button!==0)&&(function(Tm){const Im=Tm.nodeName||"";return ro.includes(Im)}(Yp.target)||(Ap=!0,ct.pointerDown(Yp),Xt.useFriction(0).useDuration(0),_e.set(Mt),function(){const Tm=Au?s:i;ko.add(Tm,"touchmove",Mp,no).add(Tm,"touchend",Lp).add(Tm,"mousemove",Mp,no).add(Tm,"mouseup",Lp)}(),vu=ct.readPoint(Yp),Fu=ct.readPoint(Yp,Vr),rr.emit("pointerDown")))}(Em)}const Bp=i;so.add(Bp,"dragstart",Em=>Em.preventDefault(),no).add(Bp,"touchmove",()=>{},no).add(Bp,"touchend",()=>{}).add(Bp,"touchstart",wm).add(Bp,"mousedown",wm).add(Bp,"touchcancel",Lp).add(Bp,"contextmenu",Lp).add(Bp,"click",Op,!0)},pointerDown:function(){return Ap},destroy:function(){so.clear(),ko.clear()}}}function DragTracker(o,i){let s,_;function _e(Mt){return Mt.timeStamp}function ct(Mt,Ft){const Ut="client"+((Ft||o.scroll)==="x"?"X":"Y");return(isMouseEvent(Mt,i)?Mt:Mt.touches[0])[Ut]}return{pointerDown:function(Mt){return s=Mt,_=Mt,ct(Mt)},pointerMove:function(Mt){const Ft=ct(Mt)-ct(_),Ut=_e(Mt)-_e(s)>170;return _=Mt,Ut&&(s=Mt),Ft},pointerUp:function(Mt){if(!s||!_)return 0;const Ft=ct(_)-ct(s),Ut=_e(Mt)-_e(s),Xt=_e(Mt)-_e(_)>170,Kt=Ft/Ut;return Ut&&!Xt&&mathAbs(Kt)>.1?Kt:0},readPoint:ct}}function NodeRects(){return{measure:function(o){const{offsetTop:i,offsetLeft:s,offsetWidth:_,offsetHeight:_e}=o;return{top:i,right:s+_,bottom:i+_e,left:s,width:_,height:_e}}}}function PercentOfView(o){return{measure:function(i){return o*(i/100)}}}function ResizeHandler(o,i,s,_,_e,ct,Mt){let Ft,Ut,Xt=[],Kt=!1;function nr(rr){return _e.measureSize(Mt.measure(rr))}return{init:function(rr){ct&&(Ut=nr(o),Xt=_.map(nr),Ft=new ResizeObserver(or=>{Kt||(isBoolean(ct)||ct(rr,or))&&function(hr){for(const fr of hr){const yr=fr.target===o,Lr=_.indexOf(fr.target),Br=yr?Ut:Xt[Lr];if(mathAbs(nr(yr?o:_[Lr])-Br)>=.5){s.requestAnimationFrame(()=>{rr.reInit(),i.emit("resize")});break}}}(or)}),[o].concat(_).forEach(or=>Ft.observe(or)))},destroy:function(){Ft&&Ft.disconnect(),Kt=!0}}}function ScrollBody(o,i,s,_,_e){let ct=0,Mt=0,Ft=_,Ut=_e,Xt=o.get(),Kt=0;function nr(hr){return Ft=hr,or}function rr(hr){return Ut=hr,or}const or={direction:function(){return Mt},duration:function(){return Ft},velocity:function(){return ct},seek:function(){const hr=s.get()-o.get();let fr=0;return Ft?(ct+=hr/Ft,ct*=Ut,Xt+=ct,o.add(ct),fr=Xt-Kt):(ct=0,o.set(s),fr=hr),Mt=mathSign(fr),Kt=Xt,or},settled:function(){return mathAbs(s.get()-i.get())<.001},useBaseFriction:function(){return rr(_e)},useBaseDuration:function(){return nr(_)},useFriction:rr,useDuration:nr};return or}function ScrollBounds(o,i,s,_,_e){const ct=_e.measure(10),Mt=_e.measure(50),Ft=Limit(.1,.99);let Ut=!1;return{constrain:function(Xt){if(Ut||!o.reachedAny(s.get())||!o.reachedAny(i.get()))return;const Kt=o.reachedMin(i.get())?"min":"max",nr=mathAbs(o[Kt]-i.get()),rr=s.get()-i.get(),or=Ft.constrain(nr/Mt);s.subtract(rr*or),!Xt&&mathAbs(rr)<ct&&(s.set(o.constrain(s.get())),_.useDuration(25).useBaseFriction())},toggleActive:function(Xt){Ut=!Xt}}}function ScrollContain(o,i,s,_,_e){const ct=Limit(-i+o,0),Mt=s.map((Kt,nr)=>{const{min:rr,max:or}=ct,hr=ct.constrain(Kt),fr=!nr,yr=arrayIsLastIndex(s,nr);return fr?or:yr||Xt(rr,hr)?rr:Xt(or,hr)?or:hr}).map(Kt=>parseFloat(Kt.toFixed(3))),Ft=function(){const Kt=Mt[0],nr=arrayLast(Mt),rr=Mt.lastIndexOf(Kt),or=Mt.indexOf(nr)+1;return Limit(rr,or)}(),Ut=function(){if(i<=o+_e)return[ct.max];if(_==="keepSnaps")return Mt;const{min:Kt,max:nr}=Ft;return Mt.slice(Kt,nr)}();function Xt(Kt,nr){return deltaAbs(Kt,nr)<1}return{snapsContained:Ut,scrollContainLimit:Ft}}function ScrollLimit(o,i,s){const _=i[0];return{limit:Limit(s?_-o:arrayLast(i),_)}}function ScrollLooper(o,i,s,_){const _e=i.min+.1,ct=i.max+.1,{reachedMin:Mt,reachedMax:Ft}=Limit(_e,ct);return{loop:function(Xt){if(!function(nr){return nr===1?Ft(s.get()):nr===-1&&Mt(s.get())}(Xt))return;const Kt=o*(-1*Xt);_.forEach(nr=>nr.add(Kt))}}}function ScrollProgress(o){const{max:i,length:s}=o;return{get:function(_){return s?(_-i)/-s:0}}}function ScrollSnaps(o,i,s,_,_e){const{startEdge:ct,endEdge:Mt}=o,{groupSlides:Ft}=_e,Ut=Ft(_).map(nr=>arrayLast(nr)[Mt]-nr[0][ct]).map(mathAbs).map(i.measure),Xt=_.map(nr=>s[ct]-nr[ct]).map(nr=>-mathAbs(nr)),Kt=Ft(Xt).map(nr=>nr[0]).map((nr,rr)=>nr+Ut[rr]);return{snaps:Xt,snapsAligned:Kt}}function SlideRegistry(o,i,s,_,_e,ct){const{groupSlides:Mt}=_e,{min:Ft,max:Ut}=_;return{slideRegistry:function(){const Kt=Mt(ct),nr=!o||i==="keepSnaps";return s.length===1?[ct]:nr?Kt:Kt.slice(Ft,Ut).map((rr,or,hr)=>{const fr=!or,yr=arrayIsLastIndex(hr,or);return fr?arrayFromNumber(arrayLast(hr[0])+1):yr?arrayFromNumber(arrayLastIndex(ct)-arrayLast(hr)[0]+1,arrayLast(hr)[0]):rr})}()}}function ScrollTarget(o,i,s,_,_e){const{reachedAny:ct,removeOffset:Mt,constrain:Ft}=_;function Ut(nr){return nr.concat().sort((rr,or)=>mathAbs(rr)-mathAbs(or))[0]}function Xt(nr,rr){const or=[nr,nr+s,nr-s];if(!o)return or[0];if(!rr)return Ut(or);const hr=or.filter(fr=>mathSign(fr)===rr);return hr.length?Ut(hr):arrayLast(or)-s}return{byDistance:function(nr,rr){const or=_e.get()+nr,{index:hr,distance:fr}=function(Lr){const Br=o?Mt(Lr):Ft(Lr),Vr=i.map((ro,no)=>({diff:Xt(ro-Br,0),index:no})).sort((ro,no)=>mathAbs(ro.diff)-mathAbs(no.diff)),{index:Wr}=Vr[0];return{index:Wr,distance:Br}}(or),yr=!o&&ct(or);return!rr||yr?{index:hr,distance:nr}:{index:hr,distance:nr+Xt(i[hr]-fr,0)}},byIndex:function(nr,rr){return{index:nr,distance:Xt(i[nr]-_e.get(),rr)}},shortcut:Xt}}function ScrollTo(o,i,s,_,_e,ct,Mt){function Ft(Ut){const Xt=Ut.distance,Kt=Ut.index!==i.get();ct.add(Xt),Xt&&(_.duration()?o.start():(o.update(),o.render(1),o.update())),Kt&&(s.set(i.get()),i.set(Ut.index),Mt.emit("select"))}return{distance:function(Ut,Xt){Ft(_e.byDistance(Ut,Xt))},index:function(Ut,Xt){const Kt=i.clone().set(Ut);Ft(_e.byIndex(Kt.get(),Xt))}}}function SlideFocus(o,i,s,_,_e,ct){let Mt=0;function Ft(Xt){Xt.code==="Tab"&&(Mt=new Date().getTime())}function Ut(Xt){ct.add(Xt,"focus",()=>{if(new Date().getTime()-Mt>10)return;o.scrollLeft=0;const Kt=i.indexOf(Xt),nr=s.findIndex(rr=>rr.includes(Kt));isNumber$1(nr)&&(_e.useDuration(0),_.index(nr,0))},{passive:!0,capture:!0})}return{init:function(){ct.add(document,"keydown",Ft,!1),i.forEach(Ut)}}}function Vector1D(o){let i=o;function s(_){return isNumber$1(_)?_:_.get()}return{get:function(){return i},set:function(_){i=s(_)},add:function(_){i+=s(_)},subtract:function(_){i-=s(_)}}}function Translate(o,i){const s=o.scroll==="x"?function(ct){return`translate3d(${ct}px,0px,0px)`}:function(ct){return`translate3d(0px,${ct}px,0px)`},_=i.style;let _e=!1;return{clear:function(){_e||(_.transform="",i.getAttribute("style")||i.removeAttribute("style"))},to:function(ct){_e||(_.transform=s(o.direction(ct)))},toggleActive:function(ct){_e=!ct}}}function SlideLooper(o,i,s,_,_e,ct,Mt,Ft,Ut){const Kt=arrayKeys(_e),nr=arrayKeys(_e).reverse(),rr=function(){const Lr=Mt[0];return fr(hr(nr,Lr),s,!1)}().concat(function(){const Lr=i-Mt[0]-1;return fr(hr(Kt,Lr),-s,!0)}());function or(Lr,Br){return Lr.reduce((Vr,Wr)=>Vr-_e[Wr],Br)}function hr(Lr,Br){return Lr.reduce((Vr,Wr)=>or(Vr,Br)>0?Vr.concat([Wr]):Vr,[])}function fr(Lr,Br,Vr){const Wr=function(ro){return ct.map((no,so)=>({start:no-_[so]+.5+ro,end:no+i-.5+ro}))}(Br);return Lr.map(ro=>{const no=Vr?0:-s,so=Vr?s:0,ko=Vr?"end":"start",To=Wr[ro][ko];return{index:ro,loopPoint:To,slideLocation:Vector1D(-1),translate:Translate(o,Ut[ro]),target:()=>Ft.get()>To?no:so}})}return{canLoop:function(){return rr.every(({index:Lr})=>or(Kt.filter(Br=>Br!==Lr),i)<=.1)},clear:function(){rr.forEach(Lr=>Lr.translate.clear())},loop:function(){rr.forEach(Lr=>{const{target:Br,translate:Vr,slideLocation:Wr}=Lr,ro=Br();ro!==Wr.get()&&(Vr.to(ro),Wr.set(ro))})},loopPoints:rr}}function SlidesHandler(o,i,s){let _,_e=!1;return{init:function(ct){s&&(_=new MutationObserver(Mt=>{_e||(isBoolean(s)||s(ct,Mt))&&function(Ft){for(const Ut of Ft)if(Ut.type==="childList"){ct.reInit(),i.emit("slidesChanged");break}}(Mt)}),_.observe(o,{childList:!0}))},destroy:function(){_&&_.disconnect(),_e=!0}}}function SlidesInView(o,i,s,_){const _e={};let ct,Mt=null,Ft=null,Ut=!1;return{init:function(){ct=new IntersectionObserver(Kt=>{Ut||(Kt.forEach(nr=>{const rr=i.indexOf(nr.target);_e[rr]=nr}),Mt=null,Ft=null,s.emit("slidesInView"))},{root:o.parentElement,threshold:_}),i.forEach(Kt=>ct.observe(Kt))},destroy:function(){ct&&ct.disconnect(),Ut=!0},get:function(Kt=!0){if(Kt&&Mt)return Mt;if(!Kt&&Ft)return Ft;const nr=function(rr){return objectKeys(_e).reduce((or,hr)=>{const fr=parseInt(hr),{isIntersecting:yr}=_e[fr];return(rr&&yr||!rr&&!yr)&&or.push(fr),or},[])}(Kt);return Kt&&(Mt=nr),Kt||(Ft=nr),nr}}}function SlideSizes(o,i,s,_,_e,ct){const{measureSize:Mt,startEdge:Ft,endEdge:Ut}=o,Xt=s[0]&&_e,Kt=function(){if(!Xt)return 0;const hr=s[0];return mathAbs(i[Ft]-hr[Ft])}(),nr=function(){if(!Xt)return 0;const hr=ct.getComputedStyle(arrayLast(_));return parseFloat(hr.getPropertyValue(`margin-${Ut}`))}(),rr=s.map(Mt),or=s.map((hr,fr,yr)=>{const Lr=!fr,Br=arrayIsLastIndex(yr,fr);return Lr?rr[fr]+Kt:Br?rr[fr]+nr:yr[fr+1][Ft]-hr[Ft]}).map(mathAbs);return{slideSizes:rr,slideSizesWithGaps:or,startGap:Kt,endGap:nr}}function SlidesToScroll(o,i,s,_,_e,ct,Mt,Ft,Ut){const{startEdge:Xt,endEdge:Kt,direction:nr}=o,rr=isNumber$1(s);return{groupSlides:function(hr){return rr?function(fr,yr){return arrayKeys(fr).filter(Lr=>Lr%yr==0).map(Lr=>fr.slice(Lr,Lr+yr))}(hr,s):function(fr){return fr.length?arrayKeys(fr).reduce((yr,Lr,Br)=>{const Vr=arrayLast(yr)||0,Wr=Vr===0,ro=Lr===arrayLastIndex(fr),no=_e[Xt]-ct[Vr][Xt],so=_e[Xt]-ct[Lr][Kt],ko=!_&&Wr?nr(Mt):0,To=mathAbs(so-(!_&&ro?nr(Ft):0)-(no+ko));return Br&&To>i+Ut&&yr.push(Lr),ro&&yr.push(fr.length),yr},[]).map((yr,Lr,Br)=>{const Vr=Math.max(Br[Lr-1]||0);return fr.slice(Vr,yr)}):[]}(hr)}}}function Engine(o,i,s,_,_e,ct,Mt){const{align:Ft,axis:Ut,direction:Xt,startIndex:Kt,loop:nr,duration:rr,dragFree:or,dragThreshold:hr,inViewThreshold:fr,slidesToScroll:yr,skipSnaps:Lr,containScroll:Br,watchResize:Vr,watchSlides:Wr,watchDrag:ro}=ct,no=NodeRects(),so=no.measure(i),ko=s.map(no.measure),To=Axis(Ut,Xt),oo=To.measureSize(so),No=PercentOfView(oo),As=Alignment(Ft,oo),Ks=!nr&&!!Br,vu=nr||!!Br,{slideSizes:Fu,slideSizesWithGaps:Ap,startGap:Pp,endGap:Lo}=SlideSizes(To,so,ko,s,vu,_e),Au=SlidesToScroll(To,oo,yr,nr,so,ko,Pp,Lo,2),{snaps:Mp,snapsAligned:Lp}=ScrollSnaps(To,As,so,ko,Au),Op=-arrayLast(Mp)+arrayLast(Ap),{snapsContained:Fp,scrollContainLimit:wm}=ScrollContain(oo,Op,Lp,Br,2),Bp=Ks?Fp:Lp,{limit:Em}=ScrollLimit(Op,Bp,nr),Yp=Counter(arrayLastIndex(Bp),Kt,nr),_m=Yp.clone(),Tm=arrayKeys(s),Im=Animations(_,_e,()=>(({dragHandler:Qp,scrollBody:$m,scrollBounds:Pm,options:{loop:Fm}})=>{Fm||Pm.constrain(Qp.pointerDown()),$m.seek()})(Nm),Qp=>(({scrollBody:$m,translate:Pm,location:Fm,offsetLocation:Rm,scrollLooper:Dm,slideLooper:Zm,dragHandler:qm,animation:Lm,eventHandler:wy,options:{loop:Ay}},Oy)=>{const v0=$m.velocity(),wC=$m.settled();wC&&!qm.pointerDown()&&(Lm.stop(),wy.emit("settle")),wC||wy.emit("scroll"),Rm.set(Fm.get()-v0+v0*Oy),Ay&&(Dm.loop($m.direction()),Zm.loop()),Pm.to(Rm.get())})(Nm,Qp)),Mm=Bp[Yp.get()],Bm=Vector1D(Mm),zm=Vector1D(Mm),Am=Vector1D(Mm),Om=ScrollBody(Bm,zm,Am,rr,.68),Hm=ScrollTarget(nr,Bp,Op,Em,Am),u1=ScrollTo(Im,Yp,_m,Om,Hm,Am,Mt),a1=ScrollProgress(Em),Gm=EventStore(),c1=SlidesInView(i,s,Mt,fr),{slideRegistry:m1}=SlideRegistry(Ks,Br,Bp,wm,Au,Tm),Sm=SlideFocus(o,s,m1,u1,Om,Gm),Nm={ownerDocument:_,ownerWindow:_e,eventHandler:Mt,containerRect:so,slideRects:ko,animation:Im,axis:To,dragHandler:DragHandler(To,o,_,_e,Am,DragTracker(To,_e),Bm,Im,u1,Om,Hm,Yp,Mt,No,or,hr,Lr,.68,ro),eventStore:Gm,percentOfView:No,index:Yp,indexPrevious:_m,limit:Em,location:Bm,offsetLocation:zm,options:ct,resizeHandler:ResizeHandler(i,Mt,_e,s,To,Vr,no),scrollBody:Om,scrollBounds:ScrollBounds(Em,zm,Am,Om,No),scrollLooper:ScrollLooper(Op,Em,zm,[Bm,zm,Am]),scrollProgress:a1,scrollSnapList:Bp.map(a1.get),scrollSnaps:Bp,scrollTarget:Hm,scrollTo:u1,slideLooper:SlideLooper(To,oo,Op,Fu,Ap,Mp,Bp,zm,s),slideFocus:Sm,slidesHandler:SlidesHandler(i,Mt,Wr),slidesInView:c1,slideIndexes:Tm,slideRegistry:m1,slidesToScroll:Au,target:Am,translate:Translate(To,i)};return Nm}function EventHandler(){const o={};let i;function s(_e){return o[_e]||[]}const _={init:function(_e){i=_e},emit:function(_e){return s(_e).forEach(ct=>ct(i,_e)),_},off:function(_e,ct){return o[_e]=s(_e).filter(Mt=>Mt!==ct),_},on:function(_e,ct){return o[_e]=s(_e).concat([ct]),_}};return _}const defaultOptions={align:"center",axis:"x",container:null,slides:null,containScroll:"trimSnaps",direction:"ltr",slidesToScroll:1,inViewThreshold:0,breakpoints:{},dragFree:!1,dragThreshold:10,loop:!1,skipSnaps:!1,duration:25,startIndex:0,active:!0,watchDrag:!0,watchResize:!0,watchSlides:!0};function OptionsHandler(o){function i(_,_e){return objectsMergeDeep(_,_e||{})}return{mergeOptions:i,optionsAtMedia:function(_){const _e=_.breakpoints||{},ct=objectKeys(_e).filter(Mt=>o.matchMedia(Mt).matches).map(Mt=>_e[Mt]).reduce((Mt,Ft)=>i(Mt,Ft),{});return i(_,ct)},optionsMediaQueries:function(_){return _.map(_e=>objectKeys(_e.breakpoints||{})).reduce((_e,ct)=>_e.concat(ct),[]).map(o.matchMedia)}}}function PluginsHandler(o){let i=[];return{init:function(_,_e){return i=_e.filter(({options:ct})=>o.optionsAtMedia(ct).active!==!1),i.forEach(ct=>ct.init(_,o)),_e.reduce((ct,Mt)=>Object.assign(ct,{[Mt.name]:Mt}),{})},destroy:function(){i=i.filter(_=>_.destroy())}}}function EmblaCarousel(o,i,s){const _=o.ownerDocument,_e=_.defaultView,ct=OptionsHandler(_e),Mt=PluginsHandler(ct),Ft=EventStore(),Ut=EventHandler(),{mergeOptions:Xt,optionsAtMedia:Kt,optionsMediaQueries:nr}=ct,{on:rr,off:or,emit:hr}=Ut,fr=oo;let yr,Lr,Br,Vr,Wr=!1,ro=Xt(defaultOptions,EmblaCarousel.globalOptions),no=Xt(ro),so=[];function ko(Fu){const Ap=Engine(o,Br,Vr,_,_e,Fu,Ut);return Fu.loop&&!Ap.slideLooper.canLoop()?ko(Object.assign({},Fu,{loop:!1})):Ap}function To(Fu,Ap){Wr||(ro=Xt(ro,Fu),no=Kt(ro),so=Ap||so,function(){const{container:Pp,slides:Lo}=no;Br=(isString$1(Pp)?o.querySelector(Pp):Pp)||o.children[0];const Mp=isString$1(Lo)?Br.querySelectorAll(Lo):Lo;Vr=[].slice.call(Mp||Br.children)}(),yr=ko(no),nr([ro,...so.map(({options:Pp})=>Pp)]).forEach(Pp=>Ft.add(Pp,"change",oo)),no.active&&(yr.translate.to(yr.location.get()),yr.animation.init(),yr.slidesInView.init(),yr.slideFocus.init(),yr.eventHandler.init(vu),yr.resizeHandler.init(vu),yr.slidesHandler.init(vu),yr.options.loop&&yr.slideLooper.loop(),Br.offsetParent&&Vr.length&&yr.dragHandler.init(vu),Lr=Mt.init(vu,so)))}function oo(Fu,Ap){const Pp=Ks();No(),To(Xt({startIndex:Pp},Fu),Ap),Ut.emit("reInit")}function No(){yr.dragHandler.destroy(),yr.eventStore.clear(),yr.translate.clear(),yr.slideLooper.clear(),yr.resizeHandler.destroy(),yr.slidesHandler.destroy(),yr.slidesInView.destroy(),yr.animation.destroy(),Mt.destroy(),Ft.clear()}function As(Fu,Ap,Pp){no.active&&!Wr&&(yr.scrollBody.useBaseFriction().useDuration(Ap===!0?0:no.duration),yr.scrollTo.index(Fu,Pp||0))}function Ks(){return yr.index.get()}const vu={canScrollNext:function(){return yr.index.add(1).get()!==Ks()},canScrollPrev:function(){return yr.index.add(-1).get()!==Ks()},containerNode:function(){return Br},internalEngine:function(){return yr},destroy:function(){Wr||(Wr=!0,Ft.clear(),No(),Ut.emit("destroy"))},off:or,on:rr,emit:hr,plugins:function(){return Lr},previousScrollSnap:function(){return yr.indexPrevious.get()},reInit:fr,rootNode:function(){return o},scrollNext:function(Fu){As(yr.index.add(1).get(),Fu,-1)},scrollPrev:function(Fu){As(yr.index.add(-1).get(),Fu,1)},scrollProgress:function(){return yr.scrollProgress.get(yr.location.get())},scrollSnapList:function(){return yr.scrollSnapList},scrollTo:As,selectedScrollSnap:Ks,slideNodes:function(){return Vr},slidesInView:function(){return yr.slidesInView.get()},slidesNotInView:function(){return yr.slidesInView.get(!1)}};return To(i,s),setTimeout(()=>Ut.emit("init"),0),vu}function useEmblaCarousel(o={},i=[]){const s=reactExports.useRef(o),_=reactExports.useRef(i),[_e,ct]=reactExports.useState(),[Mt,Ft]=reactExports.useState(),Ut=reactExports.useCallback(()=>{_e&&_e.reInit(s.current,_.current)},[_e]);return reactExports.useEffect(()=>{if(canUseDOM()&&Mt){EmblaCarousel.globalOptions=useEmblaCarousel.globalOptions;const Xt=EmblaCarousel(Mt,s.current,_.current);return ct(Xt),()=>Xt.destroy()}ct(void 0)},[Mt,ct]),reactExports.useEffect(()=>{areOptionsEqual(s.current,o)||(s.current=o,Ut())},[o,Ut]),reactExports.useEffect(()=>{arePluginsEqual(_.current,i)||(_.current=i,Ut())},[i,Ut]),[Ft,_e]}EmblaCarousel.globalOptions=void 0,useEmblaCarousel.globalOptions=void 0;/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const toKebabCase=o=>o.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),mergeClasses=(...o)=>o.filter((i,s,_)=>!!i&&_.indexOf(i)===s).join(" ");var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Icon=reactExports.forwardRef(({color:o="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:_,className:_e="",children:ct,iconNode:Mt,...Ft},Ut)=>reactExports.createElement("svg",{ref:Ut,...defaultAttributes,width:i,height:i,stroke:o,strokeWidth:_?24*Number(s)/Number(i):s,className:mergeClasses("lucide",_e),...Ft},[...Mt.map(([Xt,Kt])=>reactExports.createElement(Xt,Kt)),...Array.isArray(ct)?ct:[ct]])),createLucideIcon=(o,i)=>{const s=reactExports.forwardRef(({className:_,..._e},ct)=>reactExports.createElement(Icon,{ref:ct,iconNode:i,className:mergeClasses(`lucide-${toKebabCase(o)}`,_),..._e}));return s.displayName=`${o}`,s},ArrowLeft=createLucideIcon("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),ArrowRight=createLucideIcon("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),ChevronDown=createLucideIcon("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);createLucideIcon("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const ChevronUp=createLucideIcon("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),Circle=createLucideIcon("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);createLucideIcon("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);createLucideIcon("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);const CarouselContext=reactExports.createContext(null);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */function useCarousel(){const o=reactExports.useContext(CarouselContext);if(!o)throw new Error("useCarousel must be used within a <Carousel />");return o}const SCCarousel=reactExports.forwardRef(({orientation:o="horizontal",opts:i,setApi:s,plugins:_,className:_e,children:ct,...Mt},Ft)=>{const[Ut,Xt]=useEmblaCarousel({...i,axis:o==="horizontal"?"x":"y"},_),[Kt,nr]=reactExports.useState(!1),[rr,or]=reactExports.useState(!1),hr=reactExports.useCallback(Br=>{Br&&(nr(Br.canScrollPrev()),or(Br.canScrollNext()))},[]),fr=reactExports.useCallback(()=>{Xt==null||Xt.scrollPrev()},[Xt]),yr=reactExports.useCallback(()=>{Xt==null||Xt.scrollNext()},[Xt]),Lr=reactExports.useCallback(Br=>{Br.key==="ArrowLeft"?(Br.preventDefault(),fr()):Br.key==="ArrowRight"&&(Br.preventDefault(),yr())},[fr,yr]);return reactExports.useEffect(()=>{Xt&&s&&s(Xt)},[Xt,s]),reactExports.useEffect(()=>{if(Xt)return hr(Xt),Xt.on("reInit",hr),Xt.on("select",hr),()=>{Xt==null||Xt.off("select",hr)}},[Xt,hr]),reactExports.createElement(CarouselContext.Provider,{value:{carouselRef:Ut,api:Xt,opts:i,orientation:o||((i==null?void 0:i.axis)==="y"?"vertical":"horizontal"),scrollPrev:fr,scrollNext:yr,canScrollPrev:Kt,canScrollNext:rr}},reactExports.createElement("div",{ref:Ft,onKeyDownCapture:Lr,className:cn$1("ns-relative",_e),role:"region","aria-roledescription":"carousel",...Mt},ct))});SCCarousel.displayName="SCCarousel";const SCCarouselContent=reactExports.forwardRef(({className:o,...i},s)=>{const{carouselRef:_,orientation:_e}=useCarousel();return reactExports.createElement("div",{ref:_,className:"ns-overflow-hidden"},reactExports.createElement("div",{ref:s,className:cn$1("ns-flex",_e==="horizontal"?"ns--ml-4":"ns--mt-4 ns-flex-col",o),...i}))});SCCarouselContent.displayName="SCCarouselContent";const SCCarouselItem=reactExports.forwardRef(({className:o,...i},s)=>{const{orientation:_}=useCarousel();return reactExports.createElement("div",{ref:s,role:"group","aria-roledescription":"slide",className:cn$1("ns-min-w-0 ns-shrink-0 ns-grow-0 ns-basis-full",_==="horizontal"?"ns-pl-4":"ns-pt-4",o),...i})});SCCarouselItem.displayName="SCCarouselItem";const SCCarouselPrevious=reactExports.forwardRef(({className:o,variant:i="icon",size:s="sm",..._},_e)=>{const{orientation:ct,scrollPrev:Mt,canScrollPrev:Ft}=useCarousel();return reactExports.createElement(Button,{ref:_e,variant:i,size:s,className:cn$1("ns-absolute ns- ns-h-8 ns-w-8 ns-rounded-full",ct==="horizontal"?"ns--left-12 ns-top-1/2 ns--translate-y-1/2":"ns--top-12 ns-left-1/2 ns--translate-x-1/2 ns-rotate-90",o),disabled:!Ft,onClick:Mt,..._},reactExports.createElement(ArrowLeft,{className:"ns-h-4 ns-w-4"}),reactExports.createElement("span",{className:"ns-sr-only"},"Previous slide"))});SCCarouselPrevious.displayName="SCCarouselPrevious";const SCCarouselNext=reactExports.forwardRef(({className:o,variant:i="icon",size:s="sm",..._},_e)=>{const{orientation:ct,scrollNext:Mt,canScrollNext:Ft}=useCarousel();return reactExports.createElement(Button,{ref:_e,variant:i,size:s,className:cn$1("ns-absolute ns-h-8 ns-w-8 ns-rounded-full",ct==="horizontal"?"ns--right-12 ns-top-1/2 ns--translate-y-1/2":"ns--bottom-12 ns-left-1/2 ns--translate-x-1/2 ns-rotate-90",o),disabled:!Ft,onClick:Mt,..._},reactExports.createElement(ArrowRight,{className:"ns-h-4 ns-w-4"}),reactExports.createElement("span",{className:"ns-sr-only"},"Next slide"))});SCCarouselNext.displayName="SCCarouselNext";var __defProp=Object.defineProperty,__defNormalProp=(o,i,s)=>i in o?__defProp(o,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[i]=s,__export=(o,i)=>{for(var s in i)__defProp(o,s,{get:i[s],enumerable:!0})},__publicField=(o,i,s)=>(__defNormalProp(o,typeof i!="symbol"?i+"":i,s),s),__accessCheck=(o,i,s)=>{if(!i.has(o))throw TypeError("Cannot "+s)},__privateGet=(o,i,s)=>(__accessCheck(o,i,"read from private field"),s?s.call(o):i.get(o)),__privateAdd=(o,i,s)=>{if(i.has(o))throw TypeError("Cannot add the same private member more than once");i instanceof WeakSet?i.add(o):i.set(o,s)},__privateSet=(o,i,s,_)=>(__accessCheck(o,i,"write to private field"),i.set(o,s),s),tfjs_esm_exports={};__export(tfjs_esm_exports,{Abs:()=>Xs,Acos:()=>Vo,Acosh:()=>Wo,AdadeltaOptimizer:()=>Ju,AdagradOptimizer:()=>ep,AdamOptimizer:()=>tp,AdamaxOptimizer:()=>rp,Add:()=>uo,AddN:()=>Uo,All:()=>Go,Any:()=>Ho,ArgMax:()=>Ys,ArgMin:()=>Qs,Asin:()=>Ko,Asinh:()=>qo,Atan:()=>jo,Atan2:()=>Yo,Atanh:()=>Xo,AvgPool:()=>Qo,AvgPool3D:()=>Zs,AvgPool3DGrad:()=>Ri,AvgPoolGrad:()=>$i,BackendWasm:()=>pm,BatchMatMul:()=>Zo,BatchToSpaceND:()=>Js,Bincount:()=>Jo,BitwiseAnd:()=>qa,BroadcastArgs:()=>ea,BroadcastTo:()=>qce,Cast:()=>yo,Ceil:()=>en,ClipByValue:()=>bo,Complex:()=>Di,ComplexAbs:()=>Ai,Concat:()=>ta,Conv2D:()=>tn,Conv2DBackpropFilter:()=>Fi,Conv2DBackpropInput:()=>rn,Conv3D:()=>on,Conv3DBackpropFilterV2:()=>ja,Conv3DBackpropInputV2:()=>nn,Cos:()=>sn,Cosh:()=>an,CropAndResize:()=>cn,Cumprod:()=>un,Cumsum:()=>pn,DataStorage:()=>Bo,DenseBincount:()=>ra,DepthToSpace:()=>ln,DepthwiseConv2dNative:()=>mn,DepthwiseConv2dNativeBackpropFilter:()=>Pi,DepthwiseConv2dNativeBackpropInput:()=>Oi,Diag:()=>oa,Dilation2D:()=>dn,Dilation2DBackpropFilter:()=>Li,Dilation2DBackpropInput:()=>Mi,Draw:()=>$u,ENV:()=>nw,Einsum:()=>Bi,Elu:()=>hn,EluGrad:()=>Xa,Environment:()=>dl,Equal:()=>xn,Erf:()=>gn,Exp:()=>yn,ExpandDims:()=>na,Expm1:()=>bn,FFT:()=>zi,Fill:()=>sa,FlipLeftRight:()=>Cn,Floor:()=>wn,FloorDiv:()=>Sn,FromPixels:()=>Du,FusedBatchNorm:()=>In,FusedConv2D:()=>Io,FusedDepthwiseConv2D:()=>vo,GPGPUContext:()=>bp,GatherNd:()=>vn,GatherV2:()=>aa,GraphModel:()=>Bl,Greater:()=>kn,GreaterEqual:()=>Nn,IFFT:()=>Vi,Identity:()=>Co,Imag:()=>Wi,IsFinite:()=>Tn,IsInf:()=>_n,IsNan:()=>En,KernelBackend:()=>ao,LRN:()=>Bn,LRNGrad:()=>Ya,LeakyRelu:()=>$n,Less:()=>Rn,LessEqual:()=>Dn,LinSpace:()=>An,Log:()=>Fn,Log1p:()=>Pn,LogSoftmax:()=>jce,LogicalAnd:()=>On,LogicalNot:()=>Mn,LogicalOr:()=>Ln,LogicalXor:()=>R0,LowerBound:()=>Xce,MathBackendCPU:()=>xc,MathBackendWebGL:()=>Lc,MatrixBandPart:()=>Yce,Max:()=>zn,MaxPool:()=>Wn,MaxPool3D:()=>ia,MaxPool3DGrad:()=>Gi,MaxPoolGrad:()=>Ui,MaxPoolWithArgmax:()=>ua,Maximum:()=>Vn,Mean:()=>Un,Min:()=>Gn,Minimum:()=>Hn,MirrorPad:()=>Kn,Mod:()=>qn,MomentumOptimizer:()=>op,Multinomial:()=>jn,Multiply:()=>Xn,Neg:()=>pa,NonMaxSuppressionV3:()=>Qn,NonMaxSuppressionV4:()=>Qa,NonMaxSuppressionV5:()=>Zn,NotEqual:()=>Yn,OP_SCOPE_SUFFIX:()=>Nw,OneHot:()=>Jn,OnesLike:()=>ca,Optimizer:()=>kr,OptimizerConstructors:()=>Fl,Pack:()=>la,PadV2:()=>es,Pool:()=>Qce,Pow:()=>ts,Prelu:()=>rs,Prod:()=>os,RMSPropOptimizer:()=>np,RaggedGather:()=>Hp,RaggedRange:()=>Kp,RaggedTensorToTensor:()=>qp,Range:()=>ma,Rank:()=>gw,Real:()=>Hi,RealDiv:()=>fn,Reciprocal:()=>ns,Reduction:()=>$t,Relu:()=>ss,Relu6:()=>us,Reshape:()=>da,ResizeBilinear:()=>is,ResizeBilinearGrad:()=>Ja,ResizeNearestNeighbor:()=>as,ResizeNearestNeighborGrad:()=>Za,Reverse:()=>ps,RotateWithOffset:()=>Ds,Round:()=>cs,Rsqrt:()=>ls,SGDOptimizer:()=>mi,ScatterNd:()=>ms,SearchSorted:()=>fs,Select:()=>fa,Selu:()=>hs,Sigmoid:()=>bs,Sign:()=>ys,Sin:()=>gs,Sinh:()=>xs,Slice:()=>ha,Softmax:()=>Is,Softplus:()=>Cs,SpaceToBatchND:()=>ga,SparseFillEmptyRows:()=>Ki,SparseReshape:()=>ei,SparseSegmentMean:()=>ya,SparseSegmentSum:()=>ba,SparseToDense:()=>vs,SplitV:()=>xa,Sqrt:()=>ws,Square:()=>qi,SquaredDifference:()=>ks,StaticRegexReplace:()=>Ru,Step:()=>wo,StridedSlice:()=>Ns,StringNGrams:()=>Ca,StringSplit:()=>ji,StringToHashBucketFast:()=>Xi,Sub:()=>Ts,Sum:()=>Ss,Tan:()=>_s,Tanh:()=>Es,Tensor:()=>mt,TensorBuffer:()=>tt,TensorScatterUpdate:()=>ds,Tile:()=>po,TopK:()=>$s,Transform:()=>Rs,Transpose:()=>co,Unique:()=>Yi,Unpack:()=>wa,UnsortedSegmentSum:()=>Qi,UpperBound:()=>Zce,Variable:()=>ri,WebGPUBackend:()=>jc,ZerosLike:()=>Sa,_FusedMatMul:()=>So,abs:()=>Qt,acos:()=>Rk,acosh:()=>Dk,add:()=>Ce$1,addN:()=>Ak,all:()=>Fk,any:()=>Pk,argMax:()=>Ok,argMin:()=>Mk,asin:()=>Lk,asinh:()=>Bk,atan:()=>zk,atan2:()=>Vk,atanh:()=>Wk,avgPool:()=>dd,avgPool3d:()=>Hk,backend:()=>ak,backend_util:()=>w,basicLSTMCell:()=>Kk,batchNorm:()=>nu,batchNorm2d:()=>jk,batchNorm3d:()=>Xk,batchNorm4d:()=>Yk,batchToSpaceND:()=>fd,bincount:()=>hd,bitwiseAnd:()=>Qk,booleanMaskAsync:()=>L6,broadcastArgs:()=>Zk,broadcastTo:()=>su,broadcast_util:()=>Sr,browser:()=>cT,buffer:()=>me$1,cast:()=>Ue,ceil:()=>Jk,clipByValue:()=>e2,clone:()=>Ur,complex:()=>Er,concat:()=>yt,concat1d:()=>t2,concat2d:()=>r22,concat3d:()=>o2,concat4d:()=>n2,conv1d:()=>s2,conv2d:()=>au,conv2dTranspose:()=>a2,conv3d:()=>i2,conv3dTranspose:()=>p2,copyRegisteredKernels:()=>ale,cos:()=>c2,cosh:()=>l2,cosineWindow:()=>$l,cumprod:()=>m2,cumsum:()=>d2,customGrad:()=>Ir,denseBincount:()=>f2,deprecationWarn:()=>Tw,depthToSpace:()=>h2,depthwiseConv2d:()=>sc,deregisterOp:()=>V5,device_util:()=>eu,diag:()=>g2,dilation2d:()=>x2,disableDeprecationWarnings:()=>xme,dispose:()=>Ot$1,disposeVariables:()=>yme,div:()=>je,divNoNan:()=>b2,dot:()=>C2,dropout:()=>Y6,einsum:()=>iu,elu:()=>bd,enableDebugMode:()=>gme,enableProdMode:()=>hme,enclosingPowerOfTwo:()=>Zw,engine:()=>ur,ensureShape:()=>w2,env:()=>A,equal:()=>yd,erf:()=>S2,euclideanNorm:()=>k2,exp:()=>_o,expandDims:()=>Ms,expm1:()=>N2,eye:()=>Cd,fft:()=>uc,fill:()=>$a,findBackend:()=>kme,findBackendFactory:()=>Nme,floor:()=>wd,floorDiv:()=>md,forceHalfFloat:()=>GD,fused:()=>Jw,gather:()=>Sd,gatherND:()=>j6,gather_util:()=>af,getBackend:()=>sk,getGradient:()=>iw,getKernel:()=>Xp,getKernelsForBackend:()=>Ym,getThreadsCount:()=>aae,gpgpu_util:()=>mv,grad:()=>VK,grads:()=>WK,greater:()=>Wu,greaterEqual:()=>Id,ifft:()=>ju,imag:()=>pu,image:()=>eX,inTopKAsync:()=>Z6,io:()=>di,irfft:()=>Hd,isFinite:()=>T2,isInf:()=>_2,isNaN:()=>E2,keep:()=>$r,kernel_impls:()=>Vt,leakyRelu:()=>vd,less:()=>Tl,lessEqual:()=>ac,linalg:()=>tX,linspace:()=>$2,loadGraphModel:()=>M8,loadGraphModelSync:()=>L8,localResponseNormalization:()=>R2,log:()=>pi,log1p:()=>kd,logSigmoid:()=>D2,logSoftmax:()=>A2,logSumExp:()=>_d,logicalAnd:()=>Uu,logicalNot:()=>Ed,logicalOr:()=>$d,logicalXor:()=>F2,losses:()=>rX,lowerBound:()=>P2,matMul:()=>Ze,math:()=>aT,max:()=>Ra,maxPool:()=>Dd,maxPool3d:()=>O2,maxPoolWithArgmax:()=>M2,maximum:()=>Ad,mean:()=>Gu,memory:()=>bme,meshgrid:()=>L2,min:()=>Nl,minimum:()=>Hu,mirrorPad:()=>B2,mod:()=>z2,moments:()=>V2,movingAverage:()=>V6,mul:()=>se,multiRNNCell:()=>W2,multinomial:()=>U2,neg:()=>pr,nextFrame:()=>cS,node:()=>E7t,norm:()=>Vu,notEqual:()=>Fd,oneHot:()=>El,ones:()=>Da,onesLike:()=>G2,op:()=>N$1,outerProduct:()=>H2,pad:()=>Aa,pad1d:()=>K2,pad2d:()=>q2,pad3d:()=>j2,pad4d:()=>X2,pool:()=>Y2,pow:()=>ui,prelu:()=>Od,print:()=>ld,prod:()=>Q2,profile:()=>Cme,raggedGather:()=>Z2,raggedRange:()=>J2,raggedTensorToTensor:()=>e1,rand:()=>t1,randomGamma:()=>S1,randomNormal:()=>Wd,randomStandardNormal:()=>I1,randomUniform:()=>ic,randomUniformInt:()=>v1,range:()=>cu,ready:()=>Ime,real:()=>ci,reciprocal:()=>k1,registerBackend:()=>tu,registerGradient:()=>ole,registerKernel:()=>ti,registerOp:()=>z5,relu:()=>lu,relu6:()=>Ud,removeBackend:()=>vme,reshape:()=>W$1,reverse:()=>mo,reverse1d:()=>N1,reverse2d:()=>T1,reverse3d:()=>_1,reverse4d:()=>E1,rfft:()=>pc,round:()=>Gd,rsqrt:()=>$1,scalar:()=>ke,scatterND:()=>U6,scatter_util:()=>du,searchSorted:()=>_l,selu:()=>R1,separableConv2d:()=>D1,serialization:()=>jN,setBackend:()=>Sme,setPlatform:()=>Tme,setThreadsCount:()=>sae,setWasmPath:()=>oae,setWasmPaths:()=>nae,setWebGLContext:()=>NI,setdiff1dAsync:()=>A1,shared:()=>Ic,sigmoid:()=>Ea,sign:()=>F1,signal:()=>Jj,sin:()=>P1,sinh:()=>O1,slice:()=>Xe,slice1d:()=>M1,slice2d:()=>L1,slice3d:()=>B1,slice4d:()=>z1,slice_util:()=>pt,softmax:()=>V1,softplus:()=>Td,spaceToBatchND:()=>Pd,sparse:()=>oX,sparseToDense:()=>K6,spectral:()=>Zj,split:()=>li,sqrt:()=>Rr,square:()=>Zt,squaredDifference:()=>Kd,squeeze:()=>cc,stack:()=>vr,step:()=>qd,stridedSlice:()=>W1,string:()=>nX,sub:()=>Te$1,sum:()=>ot,sumOutType:()=>oi,tan:()=>U1,tanh:()=>kl,tensor:()=>ar,tensor1d:()=>Jt,tensor2d:()=>mu,tensor3d:()=>jd,tensor4d:()=>G1,tensor5d:()=>H1,tensor6d:()=>K1,tensorScatterUpdate:()=>j1,tensor_util:()=>rk,test_util:()=>w1,tidy:()=>De$1,tile:()=>uu,time:()=>wme,topk:()=>X1,train:()=>OGe,transpose:()=>mc,truncatedNormal:()=>Y1,unique:()=>Q1,unregisterGradient:()=>sle,unregisterKernel:()=>nle,unsortedSegmentSum:()=>Z1,unstack:()=>fo,upcastType:()=>dt,upperBound:()=>J1,util:()=>y,valueAndGrad:()=>UK,valueAndGrads:()=>GK,variable:()=>eN,variableGrads:()=>Vw,version:()=>Vce,version_converter:()=>z8,version_core:()=>OX,version_cpu:()=>yY,version_wasm:()=>iae,version_webgl:()=>d9,webgl:()=>$at,webgl_util:()=>Ec,webgpu_util:()=>Zv,where:()=>lo,whereAsync:()=>Yd,zeros:()=>Gr,zerosLike:()=>Gt$1});var _G=Object.create,QC=Object.defineProperty,EG=Object.getOwnPropertyDescriptor,$G=Object.getOwnPropertyNames,RG=Object.getPrototypeOf,DG=Object.prototype.hasOwnProperty,Kt$1=(o,i)=>()=>(i||o((i={exports:{}}).exports,i),i.exports),qe=(o,i)=>{for(var s in i)QC(o,s,{get:i[s],enumerable:!0})},AG=(o,i,s,_)=>{if(i&&typeof i=="object"||typeof i=="function")for(let _e of $G(i))!DG.call(o,_e)&&_e!==s&&QC(o,_e,{get:()=>i[_e],enumerable:!(_=EG(i,_e))||_.enumerable});return o},zp=(o,i,s)=>(s=o!=null?_G(RG(o)):{},AG(o&&o.__esModule?s:QC(s,"default",{value:o,enumerable:!0}),o)),U0=Kt$1((o,i)=>{i.exports=_;var s=null;try{s=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function _(oo,No,As){this.low=0|oo,this.high=0|No,this.unsigned=!!As}function _e(oo){return(oo&&oo.__isLong__)===!0}_.prototype.__isLong__,Object.defineProperty(_.prototype,"__isLong__",{value:!0}),_.isLong=_e;var ct={},Mt={};function Ft(oo,No){var As,Ks,vu;return No?(vu=0<=(oo>>>=0)&&oo<256)&&(Ks=Mt[oo])?Ks:(As=Xt(oo,(0|oo)<0?-1:0,!0),vu&&(Mt[oo]=As),As):(vu=-128<=(oo|=0)&&oo<128)&&(Ks=ct[oo])?Ks:(As=Xt(oo,oo<0?-1:0,!1),vu&&(ct[oo]=As),As)}function Ut(oo,No){if(isNaN(oo))return No?Br:Lr;if(No){if(oo<0)return Br;if(oo>=hr)return so}else{if(oo<=-fr)return ko;if(oo+1>=fr)return no}return oo<0?Ut(-oo,No).neg():Xt(oo%or|0,oo/or|0,No)}function Xt(oo,No,As){return new _(oo,No,As)}_.fromInt=Ft,_.fromNumber=Ut,_.fromBits=Xt;var Kt=Math.pow;function nr(oo,No,As){if(oo.length===0)throw Error("empty string");if(oo==="NaN"||oo==="Infinity"||oo==="+Infinity"||oo==="-Infinity")return Lr;if(typeof No=="number"?(As=No,No=!1):No=!!No,(As=As||10)<2||36<As)throw RangeError("radix");var Ks;if((Ks=oo.indexOf("-"))>0)throw Error("interior hyphen");if(Ks===0)return nr(oo.substring(1),No,As).neg();for(var vu=Ut(Kt(As,8)),Fu=Lr,Ap=0;Ap<oo.length;Ap+=8){var Pp=Math.min(8,oo.length-Ap),Lo=parseInt(oo.substring(Ap,Ap+Pp),As);if(Pp<8){var Au=Ut(Kt(As,Pp));Fu=Fu.mul(Au).add(Ut(Lo))}else Fu=(Fu=Fu.mul(vu)).add(Ut(Lo))}return Fu.unsigned=No,Fu}function rr(oo,No){return typeof oo=="number"?Ut(oo,No):typeof oo=="string"?nr(oo,No):Xt(oo.low,oo.high,typeof No=="boolean"?No:oo.unsigned)}_.fromString=nr,_.fromValue=rr;var or=4294967296,hr=or*or,fr=hr/2,yr=Ft(1<<24),Lr=Ft(0);_.ZERO=Lr;var Br=Ft(0,!0);_.UZERO=Br;var Vr=Ft(1);_.ONE=Vr;var Wr=Ft(1,!0);_.UONE=Wr;var ro=Ft(-1);_.NEG_ONE=ro;var no=Xt(-1,2147483647,!1);_.MAX_VALUE=no;var so=Xt(-1,-1,!0);_.MAX_UNSIGNED_VALUE=so;var ko=Xt(0,-2147483648,!1);_.MIN_VALUE=ko;var To=_.prototype;To.toInt=function(){return this.unsigned?this.low>>>0:this.low},To.toNumber=function(){return this.unsigned?(this.high>>>0)*or+(this.low>>>0):this.high*or+(this.low>>>0)},To.toString=function(oo){if((oo=oo||10)<2||36<oo)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(ko)){var No=Ut(oo),As=this.div(No),Ks=As.mul(No).sub(this);return As.toString(oo)+Ks.toInt().toString(oo)}return"-"+this.neg().toString(oo)}for(var vu=Ut(Kt(oo,6),this.unsigned),Fu=this,Ap="";;){var Pp=Fu.div(vu),Lo=(Fu.sub(Pp.mul(vu)).toInt()>>>0).toString(oo);if((Fu=Pp).isZero())return Lo+Ap;for(;Lo.length<6;)Lo="0"+Lo;Ap=""+Lo+Ap}},To.getHighBits=function(){return this.high},To.getHighBitsUnsigned=function(){return this.high>>>0},To.getLowBits=function(){return this.low},To.getLowBitsUnsigned=function(){return this.low>>>0},To.getNumBitsAbs=function(){if(this.isNegative())return this.eq(ko)?64:this.neg().getNumBitsAbs();for(var oo=this.high!=0?this.high:this.low,No=31;No>0&&!(oo&1<<No);No--);return this.high!=0?No+33:No+1},To.isZero=function(){return this.high===0&&this.low===0},To.eqz=To.isZero,To.isNegative=function(){return!this.unsigned&&this.high<0},To.isPositive=function(){return this.unsigned||this.high>=0},To.isOdd=function(){return!(1&~this.low)},To.isEven=function(){return!(1&this.low)},To.equals=function(oo){return _e(oo)||(oo=rr(oo)),(this.unsigned===oo.unsigned||this.high>>>31!=1||oo.high>>>31!=1)&&this.high===oo.high&&this.low===oo.low},To.eq=To.equals,To.notEquals=function(oo){return!this.eq(oo)},To.neq=To.notEquals,To.ne=To.notEquals,To.lessThan=function(oo){return this.comp(oo)<0},To.lt=To.lessThan,To.lessThanOrEqual=function(oo){return this.comp(oo)<=0},To.lte=To.lessThanOrEqual,To.le=To.lessThanOrEqual,To.greaterThan=function(oo){return this.comp(oo)>0},To.gt=To.greaterThan,To.greaterThanOrEqual=function(oo){return this.comp(oo)>=0},To.gte=To.greaterThanOrEqual,To.ge=To.greaterThanOrEqual,To.compare=function(oo){if(_e(oo)||(oo=rr(oo)),this.eq(oo))return 0;var No=this.isNegative(),As=oo.isNegative();return No&&!As?-1:!No&&As?1:this.unsigned?oo.high>>>0>this.high>>>0||oo.high===this.high&&oo.low>>>0>this.low>>>0?-1:1:this.sub(oo).isNegative()?-1:1},To.comp=To.compare,To.negate=function(){return!this.unsigned&&this.eq(ko)?ko:this.not().add(Vr)},To.neg=To.negate,To.add=function(oo){_e(oo)||(oo=rr(oo));var No=this.high>>>16,As=65535&this.high,Ks=this.low>>>16,vu=65535&this.low,Fu=oo.high>>>16,Ap=65535&oo.high,Pp=oo.low>>>16,Lo=0,Au=0,Mp=0,Lp=0;return Mp+=(Lp+=vu+(65535&oo.low))>>>16,Au+=(Mp+=Ks+Pp)>>>16,Lo+=(Au+=As+Ap)>>>16,Lo+=No+Fu,Xt((Mp&=65535)<<16|(Lp&=65535),(Lo&=65535)<<16|(Au&=65535),this.unsigned)},To.subtract=function(oo){return _e(oo)||(oo=rr(oo)),this.add(oo.neg())},To.sub=To.subtract,To.multiply=function(oo){if(this.isZero())return Lr;if(_e(oo)||(oo=rr(oo)),s)return Xt(s.mul(this.low,this.high,oo.low,oo.high),s.get_high(),this.unsigned);if(oo.isZero())return Lr;if(this.eq(ko))return oo.isOdd()?ko:Lr;if(oo.eq(ko))return this.isOdd()?ko:Lr;if(this.isNegative())return oo.isNegative()?this.neg().mul(oo.neg()):this.neg().mul(oo).neg();if(oo.isNegative())return this.mul(oo.neg()).neg();if(this.lt(yr)&&oo.lt(yr))return Ut(this.toNumber()*oo.toNumber(),this.unsigned);var No=this.high>>>16,As=65535&this.high,Ks=this.low>>>16,vu=65535&this.low,Fu=oo.high>>>16,Ap=65535&oo.high,Pp=oo.low>>>16,Lo=65535&oo.low,Au=0,Mp=0,Lp=0,Op=0;return Lp+=(Op+=vu*Lo)>>>16,Mp+=(Lp+=Ks*Lo)>>>16,Lp&=65535,Mp+=(Lp+=vu*Pp)>>>16,Au+=(Mp+=As*Lo)>>>16,Mp&=65535,Au+=(Mp+=Ks*Pp)>>>16,Mp&=65535,Au+=(Mp+=vu*Ap)>>>16,Au+=No*Lo+As*Pp+Ks*Ap+vu*Fu,Xt((Lp&=65535)<<16|(Op&=65535),(Au&=65535)<<16|(Mp&=65535),this.unsigned)},To.mul=To.multiply,To.divide=function(oo){if(_e(oo)||(oo=rr(oo)),oo.isZero())throw Error("division by zero");var No,As,Ks;if(s)return this.unsigned||this.high!==-2147483648||oo.low!==-1||oo.high!==-1?Xt((this.unsigned?s.div_u:s.div_s)(this.low,this.high,oo.low,oo.high),s.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?Br:Lr;if(this.unsigned){if(oo.unsigned||(oo=oo.toUnsigned()),oo.gt(this))return Br;if(oo.gt(this.shru(1)))return Wr;Ks=Br}else{if(this.eq(ko))return oo.eq(Vr)||oo.eq(ro)?ko:oo.eq(ko)?Vr:(No=this.shr(1).div(oo).shl(1)).eq(Lr)?oo.isNegative()?Vr:ro:(As=this.sub(oo.mul(No)),Ks=No.add(As.div(oo)));if(oo.eq(ko))return this.unsigned?Br:Lr;if(this.isNegative())return oo.isNegative()?this.neg().div(oo.neg()):this.neg().div(oo).neg();if(oo.isNegative())return this.div(oo.neg()).neg();Ks=Lr}for(As=this;As.gte(oo);){No=Math.max(1,Math.floor(As.toNumber()/oo.toNumber()));for(var vu=Math.ceil(Math.log(No)/Math.LN2),Fu=vu<=48?1:Kt(2,vu-48),Ap=Ut(No),Pp=Ap.mul(oo);Pp.isNegative()||Pp.gt(As);)Pp=(Ap=Ut(No-=Fu,this.unsigned)).mul(oo);Ap.isZero()&&(Ap=Vr),Ks=Ks.add(Ap),As=As.sub(Pp)}return Ks},To.div=To.divide,To.modulo=function(oo){return _e(oo)||(oo=rr(oo)),s?Xt((this.unsigned?s.rem_u:s.rem_s)(this.low,this.high,oo.low,oo.high),s.get_high(),this.unsigned):this.sub(this.div(oo).mul(oo))},To.mod=To.modulo,To.rem=To.modulo,To.not=function(){return Xt(~this.low,~this.high,this.unsigned)},To.and=function(oo){return _e(oo)||(oo=rr(oo)),Xt(this.low&oo.low,this.high&oo.high,this.unsigned)},To.or=function(oo){return _e(oo)||(oo=rr(oo)),Xt(this.low|oo.low,this.high|oo.high,this.unsigned)},To.xor=function(oo){return _e(oo)||(oo=rr(oo)),Xt(this.low^oo.low,this.high^oo.high,this.unsigned)},To.shiftLeft=function(oo){return _e(oo)&&(oo=oo.toInt()),(oo&=63)==0?this:oo<32?Xt(this.low<<oo,this.high<<oo|this.low>>>32-oo,this.unsigned):Xt(0,this.low<<oo-32,this.unsigned)},To.shl=To.shiftLeft,To.shiftRight=function(oo){return _e(oo)&&(oo=oo.toInt()),(oo&=63)==0?this:oo<32?Xt(this.low>>>oo|this.high<<32-oo,this.high>>oo,this.unsigned):Xt(this.high>>oo-32,this.high>=0?0:-1,this.unsigned)},To.shr=To.shiftRight,To.shiftRightUnsigned=function(oo){if(_e(oo)&&(oo=oo.toInt()),(oo&=63)===0)return this;var No=this.high;return oo<32?Xt(this.low>>>oo|No<<32-oo,No>>>oo,this.unsigned):Xt(oo===32?No:No>>>oo-32,0,this.unsigned)},To.shru=To.shiftRightUnsigned,To.shr_u=To.shiftRightUnsigned,To.toSigned=function(){return this.unsigned?Xt(this.low,this.high,!1):this},To.toUnsigned=function(){return this.unsigned?this:Xt(this.low,this.high,!0)},To.toBytes=function(oo){return oo?this.toBytesLE():this.toBytesBE()},To.toBytesLE=function(){var oo=this.high,No=this.low;return[255&No,No>>>8&255,No>>>16&255,No>>>24,255&oo,oo>>>8&255,oo>>>16&255,oo>>>24]},To.toBytesBE=function(){var oo=this.high,No=this.low;return[oo>>>24,oo>>>16&255,oo>>>8&255,255&oo,No>>>24,No>>>16&255,No>>>8&255,255&No]},_.fromBytes=function(oo,No,As){return As?_.fromBytesLE(oo,No):_.fromBytesBE(oo,No)},_.fromBytesLE=function(oo,No){return new _(oo[0]|oo[1]<<8|oo[2]<<16|oo[3]<<24,oo[4]|oo[5]<<8|oo[6]<<16|oo[7]<<24,No)},_.fromBytesBE=function(oo,No){return new _(oo[4]<<24|oo[5]<<16|oo[6]<<8|oo[7],oo[0]<<24|oo[1]<<16|oo[2]<<8|oo[3],No)}}),Ek=Kt$1(()=>{}),$k=Kt$1(()=>{}),o1=Kt$1((o,i)=>{(function(s,_,_e){function ct(Ut){var Xt=this,Kt=function(){var nr=4022871197,rr=function(or){or=String(or);for(var hr=0;hr<or.length;hr++){var fr=.02519603282416938*(nr+=or.charCodeAt(hr));fr-=nr=fr>>>0,nr=(fr*=nr)>>>0,nr+=4294967296*(fr-=nr)}return 23283064365386963e-26*(nr>>>0)};return rr}();Xt.next=function(){var nr=2091639*Xt.s0+23283064365386963e-26*Xt.c;return Xt.s0=Xt.s1,Xt.s1=Xt.s2,Xt.s2=nr-(Xt.c=0|nr)},Xt.c=1,Xt.s0=Kt(" "),Xt.s1=Kt(" "),Xt.s2=Kt(" "),Xt.s0-=Kt(Ut),Xt.s0<0&&(Xt.s0+=1),Xt.s1-=Kt(Ut),Xt.s1<0&&(Xt.s1+=1),Xt.s2-=Kt(Ut),Xt.s2<0&&(Xt.s2+=1),Kt=null}function Mt(Ut,Xt){return Xt.c=Ut.c,Xt.s0=Ut.s0,Xt.s1=Ut.s1,Xt.s2=Ut.s2,Xt}function Ft(Ut,Xt){var Kt=new ct(Ut),nr=Xt&&Xt.state,rr=Kt.next;return rr.int32=function(){return 4294967296*Kt.next()|0},rr.double=function(){return rr()+11102230246251565e-32*(2097152*rr()|0)},rr.quick=rr,nr&&(typeof nr=="object"&&Mt(nr,Kt),rr.state=function(){return Mt(Kt,{})}),rr}_&&_.exports?_.exports=Ft:_e&&_e.amd?_e(function(){return Ft}):this.alea=Ft})(0,typeof i=="object"&&i,typeof define=="function"&&define)}),s1=Kt$1((o,i)=>{(function(s,_,_e){function ct(Ut){var Xt=this,Kt="";Xt.x=0,Xt.y=0,Xt.z=0,Xt.w=0,Xt.next=function(){var rr=Xt.x^Xt.x<<11;return Xt.x=Xt.y,Xt.y=Xt.z,Xt.z=Xt.w,Xt.w^=Xt.w>>>19^rr^rr>>>8},Ut===(0|Ut)?Xt.x=Ut:Kt+=Ut;for(var nr=0;nr<Kt.length+64;nr++)Xt.x^=0|Kt.charCodeAt(nr),Xt.next()}function Mt(Ut,Xt){return Xt.x=Ut.x,Xt.y=Ut.y,Xt.z=Ut.z,Xt.w=Ut.w,Xt}function Ft(Ut,Xt){var Kt=new ct(Ut),nr=Xt&&Xt.state,rr=function(){return(Kt.next()>>>0)/4294967296};return rr.double=function(){do var or=((Kt.next()>>>11)+(Kt.next()>>>0)/4294967296)/2097152;while(or===0);return or},rr.int32=Kt.next,rr.quick=rr,nr&&(typeof nr=="object"&&Mt(nr,Kt),rr.state=function(){return Mt(Kt,{})}),rr}_&&_.exports?_.exports=Ft:_e&&_e.amd?_e(function(){return Ft}):this.xor128=Ft})(0,typeof i=="object"&&i,typeof define=="function"&&define)}),i1=Kt$1((o,i)=>{(function(s,_,_e){function ct(Ut){var Xt=this,Kt="";Xt.next=function(){var rr=Xt.x^Xt.x>>>2;return Xt.x=Xt.y,Xt.y=Xt.z,Xt.z=Xt.w,Xt.w=Xt.v,(Xt.d=Xt.d+362437|0)+(Xt.v=Xt.v^Xt.v<<4^rr^rr<<1)|0},Xt.x=0,Xt.y=0,Xt.z=0,Xt.w=0,Xt.v=0,Ut===(0|Ut)?Xt.x=Ut:Kt+=Ut;for(var nr=0;nr<Kt.length+64;nr++)Xt.x^=0|Kt.charCodeAt(nr),nr==Kt.length&&(Xt.d=Xt.x<<10^Xt.x>>>4),Xt.next()}function Mt(Ut,Xt){return Xt.x=Ut.x,Xt.y=Ut.y,Xt.z=Ut.z,Xt.w=Ut.w,Xt.v=Ut.v,Xt.d=Ut.d,Xt}function Ft(Ut,Xt){var Kt=new ct(Ut),nr=Xt&&Xt.state,rr=function(){return(Kt.next()>>>0)/4294967296};return rr.double=function(){do var or=((Kt.next()>>>11)+(Kt.next()>>>0)/4294967296)/2097152;while(or===0);return or},rr.int32=Kt.next,rr.quick=rr,nr&&(typeof nr=="object"&&Mt(nr,Kt),rr.state=function(){return Mt(Kt,{})}),rr}_&&_.exports?_.exports=Ft:_e&&_e.amd?_e(function(){return Ft}):this.xorwow=Ft})(0,typeof i=="object"&&i,typeof define=="function"&&define)}),p1=Kt$1((o,i)=>{(function(s,_,_e){function ct(Ut){var Xt=this;Xt.next=function(){var Kt,nr,rr=Xt.x,or=Xt.i;return Kt=rr[or],nr=(Kt^=Kt>>>7)^Kt<<24,nr^=(Kt=rr[or+1&7])^Kt>>>10,nr^=(Kt=rr[or+3&7])^Kt>>>3,nr^=(Kt=rr[or+4&7])^Kt<<7,Kt=rr[or+7&7],nr^=(Kt^=Kt<<13)^Kt<<9,rr[or]=nr,Xt.i=or+1&7,nr},function(Kt,nr){var rr,or=[];if(nr===(0|nr))or[0]=nr;else for(nr=""+nr,rr=0;rr<nr.length;++rr)or[7&rr]=or[7&rr]<<15^nr.charCodeAt(rr)+or[rr+1&7]<<13;for(;or.length<8;)or.push(0);for(rr=0;rr<8&&or[rr]===0;++rr);for(rr==8?or[7]=-1:or[rr],Kt.x=or,Kt.i=0,rr=256;rr>0;--rr)Kt.next()}(Xt,Ut)}function Mt(Ut,Xt){return Xt.x=Ut.x.slice(),Xt.i=Ut.i,Xt}function Ft(Ut,Xt){Ut==null&&(Ut=+new Date);var Kt=new ct(Ut),nr=Xt&&Xt.state,rr=function(){return(Kt.next()>>>0)/4294967296};return rr.double=function(){do var or=((Kt.next()>>>11)+(Kt.next()>>>0)/4294967296)/2097152;while(or===0);return or},rr.int32=Kt.next,rr.quick=rr,nr&&(nr.x&&Mt(nr,Kt),rr.state=function(){return Mt(Kt,{})}),rr}_&&_.exports?_.exports=Ft:_e&&_e.amd?_e(function(){return Ft}):this.xorshift7=Ft})(0,typeof i=="object"&&i,typeof define=="function"&&define)}),l1=Kt$1((o,i)=>{(function(s,_,_e){function ct(Ut){var Xt=this;Xt.next=function(){var Kt,nr,rr=Xt.w,or=Xt.X,hr=Xt.i;return Xt.w=rr=rr+1640531527|0,nr=or[hr+34&127],Kt=or[hr=hr+1&127],nr^=nr<<13,Kt^=Kt<<17,nr^=nr>>>15,Kt^=Kt>>>12,nr=or[hr]=nr^Kt,Xt.i=hr,nr+(rr^rr>>>16)|0},function(Kt,nr){var rr,or,hr,fr,yr,Lr=[],Br=128;for(nr===(0|nr)?(or=nr,nr=null):(nr+="\0",or=0,Br=Math.max(Br,nr.length)),hr=0,fr=-32;fr<Br;++fr)nr&&(or^=nr.charCodeAt((fr+32)%nr.length)),fr===0&&(yr=or),or^=or<<10,or^=or>>>15,or^=or<<4,or^=or>>>13,fr>=0&&(yr=yr+1640531527|0,hr=(rr=Lr[127&fr]^=or+yr)==0?hr+1:0);for(hr>=128&&(Lr[127&(nr&&nr.length||0)]=-1),hr=127,fr=512;fr>0;--fr)or=Lr[hr+34&127],rr=Lr[hr=hr+1&127],or^=or<<13,rr^=rr<<17,or^=or>>>15,rr^=rr>>>12,Lr[hr]=or^rr;Kt.w=yr,Kt.X=Lr,Kt.i=hr}(Xt,Ut)}function Mt(Ut,Xt){return Xt.i=Ut.i,Xt.w=Ut.w,Xt.X=Ut.X.slice(),Xt}function Ft(Ut,Xt){Ut==null&&(Ut=+new Date);var Kt=new ct(Ut),nr=Xt&&Xt.state,rr=function(){return(Kt.next()>>>0)/4294967296};return rr.double=function(){do var or=((Kt.next()>>>11)+(Kt.next()>>>0)/4294967296)/2097152;while(or===0);return or},rr.int32=Kt.next,rr.quick=rr,nr&&(nr.X&&Mt(nr,Kt),rr.state=function(){return Mt(Kt,{})}),rr}_&&_.exports?_.exports=Ft:_e&&_e.amd?_e(function(){return Ft}):this.xor4096=Ft})(0,typeof i=="object"&&i,typeof define=="function"&&define)}),d1=Kt$1((o,i)=>{(function(s,_,_e){function ct(Ut){var Xt=this,Kt="";Xt.next=function(){var rr=Xt.b,or=Xt.c,hr=Xt.d,fr=Xt.a;return rr=rr<<25^rr>>>7^or,or=or-hr|0,hr=hr<<24^hr>>>8^fr,fr=fr-rr|0,Xt.b=rr=rr<<20^rr>>>12^or,Xt.c=or=or-hr|0,Xt.d=hr<<16^or>>>16^fr,Xt.a=fr-rr|0},Xt.a=0,Xt.b=0,Xt.c=-1640531527,Xt.d=1367130551,Ut===Math.floor(Ut)?(Xt.a=Ut/4294967296|0,Xt.b=0|Ut):Kt+=Ut;for(var nr=0;nr<Kt.length+20;nr++)Xt.b^=0|Kt.charCodeAt(nr),Xt.next()}function Mt(Ut,Xt){return Xt.a=Ut.a,Xt.b=Ut.b,Xt.c=Ut.c,Xt.d=Ut.d,Xt}function Ft(Ut,Xt){var Kt=new ct(Ut),nr=Xt&&Xt.state,rr=function(){return(Kt.next()>>>0)/4294967296};return rr.double=function(){do var or=((Kt.next()>>>11)+(Kt.next()>>>0)/4294967296)/2097152;while(or===0);return or},rr.int32=Kt.next,rr.quick=rr,nr&&(typeof nr=="object"&&Mt(nr,Kt),rr.state=function(){return Mt(Kt,{})}),rr}_&&_.exports?_.exports=Ft:_e&&_e.amd?_e(function(){return Ft}):this.tychei=Ft})(0,typeof i=="object"&&i,typeof define=="function"&&define)}),f1=Kt$1(()=>{}),g1=Kt$1((o,i)=>{(function(s,_,_e){var ct,Mt=256,Ft="random",Ut=_e.pow(Mt,6),Xt=_e.pow(2,52),Kt=2*Xt,nr=Mt-1;function rr(Br,Vr,Wr){var ro=[],no=yr(fr((Vr=Vr==1?{entropy:!0}:Vr||{}).entropy?[Br,Lr(_)]:Br??function(){try{var To;return ct&&(To=ct.randomBytes)?To=To(Mt):(To=new Uint8Array(Mt),(s.crypto||s.msCrypto).getRandomValues(To)),Lr(To)}catch{var oo=s.navigator,No=oo&&oo.plugins;return[+new Date,s,No,s.screen,Lr(_)]}}(),3),ro),so=new or(ro),ko=function(){for(var To=so.g(6),oo=Ut,No=0;To<Xt;)To=(To+No)*Mt,oo*=Mt,No=so.g(1);for(;To>=Kt;)To/=2,oo/=2,No>>>=1;return(To+No)/oo};return ko.int32=function(){return 0|so.g(4)},ko.quick=function(){return so.g(4)/4294967296},ko.double=ko,yr(Lr(so.S),_),(Vr.pass||Wr||function(To,oo,No,As){return As&&(As.S&&hr(As,so),To.state=function(){return hr(so,{})}),No?(_e[Ft]=To,oo):To})(ko,no,"global"in Vr?Vr.global:this==_e,Vr.state)}function or(Br){var Vr,Wr=Br.length,ro=this,no=0,so=ro.i=ro.j=0,ko=ro.S=[];for(Wr||(Br=[Wr++]);no<Mt;)ko[no]=no++;for(no=0;no<Mt;no++)ko[no]=ko[so=nr&so+Br[no%Wr]+(Vr=ko[no])],ko[so]=Vr;(ro.g=function(To){for(var oo,No=0,As=ro.i,Ks=ro.j,vu=ro.S;To--;)oo=vu[As=nr&As+1],No=No*Mt+vu[nr&(vu[As]=vu[Ks=nr&Ks+oo])+(vu[Ks]=oo)];return ro.i=As,ro.j=Ks,No})(Mt)}function hr(Br,Vr){return Vr.i=Br.i,Vr.j=Br.j,Vr.S=Br.S.slice(),Vr}function fr(Br,Vr){var Wr,ro=[],no=typeof Br;if(Vr&&no=="object")for(Wr in Br)try{ro.push(fr(Br[Wr],Vr-1))}catch{}return ro.length?ro:no=="string"?Br:Br+"\0"}function yr(Br,Vr){for(var Wr,ro=Br+"",no=0;no<ro.length;)Vr[nr&no]=nr&(Wr^=19*Vr[nr&no])+ro.charCodeAt(no++);return Lr(Vr)}function Lr(Br){return String.fromCharCode.apply(0,Br)}if(yr(_e.random(),_),typeof i=="object"&&i.exports){i.exports=rr;try{ct=f1()}catch{}}else typeof define=="function"&&define.amd?define(function(){return rr}):_e["seed"+Ft]=rr})(typeof self<"u"?self:o,[],Math)}),jw=Kt$1((o,i)=>{var s=o1(),_=s1(),_e=i1(),ct=p1(),Mt=l1(),Ft=d1(),Ut=g1();Ut.alea=s,Ut.xor128=_,Ut.xorwow=_e,Ut.xorshift7=ct,Ut.xor4096=Mt,Ut.tychei=Ft,i.exports=Ut}),Vv=Kt$1(()=>{}),Wv=Kt$1(()=>{}),LB=Kt$1(()=>{}),BB=Kt$1(()=>{}),zB=Kt$1(()=>{}),VB=Kt$1((o,i)=>{var s,_=(s=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0,typeof __filename<"u"&&(s=s||__filename),function(_e){function ct(){return Ap.buffer!=Au&&_m(Ap.buffer),Lp}function Mt(){return Ap.buffer!=Au&&_m(Ap.buffer),Op}function Ft(){return Ap.buffer!=Au&&_m(Ap.buffer),Fp}function Ut(){return Ap.buffer!=Au&&_m(Ap.buffer),wm}var Xt,Kt,nr,rr=(_e=_e||{})!==void 0?_e:{};rr.ready=new Promise(function(vm,km){Xt=vm,Kt=km}),typeof process<"u"&&process.listeners&&(nr={uncaughtException:process.listeners("uncaughtException"),unhandledRejection:process.listeners("unhandledRejection")});var or,hr,fr,yr=Object.assign({},rr),Lr=(vm,km)=>{throw km},Br=typeof window=="object",Vr=typeof importScripts=="function",Wr=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",ro=rr.ENVIRONMENT_IS_PTHREAD||!1,no="";function so(vm){return rr.locateFile?rr.locateFile(vm,no):no+vm}if(Wr){var ko=Vv(),To=Wv();let vm;no=Vr?To.dirname(no)+"/":__dirname+"/",or=(km,Wm)=>(km=Qp(km)?new URL(km):To.normalize(km),ko.readFileSync(km,Wm?void 0:"utf8")),fr=km=>{var Wm=or(km,!0);return Wm.buffer||(Wm=new Uint8Array(Wm)),Wm},hr=(km,Wm,h1)=>{km=Qp(km)?new URL(km):To.normalize(km),ko.readFile(km,function(r1,Km){r1?h1(r1):Wm(Km.buffer)})},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",function(km){if(!(km instanceof Fm))throw km}),process.on("unhandledRejection",function(km){throw km}),Lr=(km,Wm)=>{if(Am())throw process.exitCode=km,Wm;(function(h1){h1 instanceof Fm||vu("exiting due to exception: "+h1)})(Wm),process.exit(km)},rr.inspect=function(){return"[Emscripten Module object]"};try{vm=LB()}catch(km){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),km}global.Worker=vm.Worker}else(Br||Vr)&&(Vr?no=self.location.href:typeof document<"u"&&document.currentScript&&(no=document.currentScript.src),s!==void 0&&s&&(no=s),no=no.indexOf("blob:")!==0?no.substr(0,no.replace(/[?#].*/,"").lastIndexOf("/")+1):"",Wr||(or=vm=>{var km=new XMLHttpRequest;return km.open("GET",vm,!1),km.send(null),km.responseText},Vr&&(fr=vm=>{var km=new XMLHttpRequest;return km.open("GET",vm,!1),km.responseType="arraybuffer",km.send(null),new Uint8Array(km.response)}),hr=(vm,km,Wm)=>{var h1=new XMLHttpRequest;h1.open("GET",vm,!0),h1.responseType="arraybuffer",h1.onload=()=>{h1.status==200||h1.status==0&&h1.response?km(h1.response):Wm()},h1.onerror=Wm,h1.send(null)}));Wr&&typeof performance>"u"&&(global.performance=BB().performance);var oo=console.log.bind(console),No=console.warn.bind(console);Wr&&(oo=vm=>ko.writeSync(1,vm+`
`),No=vm=>ko.writeSync(2,vm+`
`));var As,Ks=rr.print||oo,vu=rr.printErr||No;Object.assign(rr,yr),yr=null,rr.arguments&&rr.arguments,rr.thisProgram&&rr.thisProgram,rr.quit&&(Lr=rr.quit),rr.wasmBinary&&(As=rr.wasmBinary);var Fu=rr.noExitRuntime||!0;typeof WebAssembly!="object"&&c1("no native wasm support detected");var Ap,Pp,Lo,Au,Mp,Lp,Op,Fp,wm,Bp=!1,Em=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Yp(vm,km,Wm){for(var h1=(km>>>=0)+Wm,r1=km;vm[r1]&&!(r1>=h1);)++r1;if(r1-km>16&&vm.buffer&&Em)return Em.decode(vm.buffer instanceof SharedArrayBuffer?vm.slice(km,r1):vm.subarray(km,r1));for(var Km="";km<r1;){var Ey=vm[km++];if(128&Ey){var Vy=63&vm[km++];if((224&Ey)!=192){var My=63&vm[km++];if((Ey=(240&Ey)==224?(15&Ey)<<12|Vy<<6|My:(7&Ey)<<18|Vy<<12|My<<6|63&vm[km++])<65536)Km+=String.fromCharCode(Ey);else{var qw=Ey-65536;Km+=String.fromCharCode(55296|qw>>10,56320|1023&qw)}}else Km+=String.fromCharCode((31&Ey)<<6|Vy)}else Km+=String.fromCharCode(Ey)}return Km}function _m(vm){Au=vm,rr.HEAP8=Mp=new Int8Array(vm),rr.HEAP16=new Int16Array(vm),rr.HEAP32=Op=new Int32Array(vm),rr.HEAPU8=Lp=new Uint8Array(vm),rr.HEAPU16=new Uint16Array(vm),rr.HEAPU32=Fp=new Uint32Array(vm),rr.HEAPF32=new Float32Array(vm),rr.HEAPF64=wm=new Float64Array(vm)}ro&&(Au=rr.buffer);var Tm=rr.INITIAL_MEMORY||16777216;if(ro)Ap=rr.wasmMemory,Au=rr.buffer;else if(rr.wasmMemory)Ap=rr.wasmMemory;else if(!((Ap=new WebAssembly.Memory({initial:Tm/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw vu("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),Wr&&vu("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");Ap&&(Au=Ap.buffer),Tm=Au.byteLength,_m(Au);var Im,Mm=[],Bm=[],zm=[];function Am(){return Fu}function Om(){!ro&&wy(Bm)}function Hm(vm){Mm.unshift(vm)}function u1(vm){zm.unshift(vm)}var a1=0,Gm=null;function c1(vm){rr.onAbort&&rr.onAbort(vm),vu(vm="Aborted("+vm+")"),Bp=!0,Lo=1,vm+=". Build with -sASSERTIONS for more info.";var km=new WebAssembly.RuntimeError(vm);throw Kt(km),km}var m1,Sm="data:application/octet-stream;base64,";function Nm(vm){return vm.startsWith(Sm)}function Qp(vm){return vm.startsWith("file://")}function $m(vm){try{if(vm==m1&&As)return new Uint8Array(As);if(fr)return fr(vm);throw"both async and sync fetching of the wasm failed"}catch(km){c1(km)}}Nm(m1="tfjs-backend-wasm-threaded-simd.wasm")||(m1=so(m1));var Pm={};function Fm(vm){this.name="ExitStatus",this.message="Program terminated with exit("+vm+")",this.status=vm}function Rm(vm){var km=Lm.pthreads[vm];(function(Wm,h1){Wm||c1(h1)})(km),Lm.returnWorkerToPool(km)}function Dm(vm){var km=Lm.getNewWorker();if(!km)return 6;Lm.runningWorkers.push(km),Lm.pthreads[vm.pthread_ptr]=km,km.pthread_ptr=vm.pthread_ptr;var Wm={cmd:"run",start_routine:vm.startRoutine,arg:vm.arg,pthread_ptr:vm.pthread_ptr};return km.runPthread=()=>{Wr&&km.ref(),km.postMessage(Wm,vm.transferList),delete km.runPthread},km.loaded&&km.runPthread(),0}function Zm(vm){if(ro)return EC(1,1,vm);Lo=vm,Am()||(Lm.terminateAllThreads(),rr.onExit&&rr.onExit(vm),Bp=!0),Lr(vm,new Fm(vm))}var qm=function(vm,km){if(Lo=vm,!km&&ro)throw Ay(vm),"unwind";Zm(vm)},Lm={unusedWorkers:[],runningWorkers:[],tlsInitFunctions:[],pthreads:{},init:function(){ro?Lm.initWorker():Lm.initMainThread()},initMainThread:function(){for(var vm=8;vm--;)Lm.allocateUnusedWorker()},initWorker:function(){Fu=!1},setExitStatus:function(vm){Lo=vm},terminateAllThreads:function(){for(var vm of Object.values(Lm.pthreads))Lm.returnWorkerToPool(vm);for(var vm of Lm.unusedWorkers)vm.terminate();Lm.unusedWorkers=[]},returnWorkerToPool:function(vm){var km=vm.pthread_ptr;delete Lm.pthreads[km],Lm.unusedWorkers.push(vm),Lm.runningWorkers.splice(Lm.runningWorkers.indexOf(vm),1),vm.pthread_ptr=0,Wr&&vm.unref(),Eme(km)},receiveObjectTransfer:function(vm){},threadInitTLS:function(){Lm.tlsInitFunctions.forEach(vm=>vm())},loadWasmModuleToWorker:function(vm,km){vm.onmessage=r1=>{var Km=r1.data,Ey=Km.cmd;if(vm.pthread_ptr&&(Lm.currentProxiedOperationCallerThread=vm.pthread_ptr),Km.targetThread&&Km.targetThread!=mfe()){var Vy=Lm.pthreads[Km.targetThread];return Vy?Vy.postMessage(Km,Km.transferList):vu('Internal error! Worker sent a message "'+Ey+'" to target pthread '+Km.targetThread+", but that thread no longer exists!"),void(Lm.currentProxiedOperationCallerThread=void 0)}Ey==="processProxyingQueue"?Qy(Km.queue):Ey==="spawnThread"?Dm(Km):Ey==="cleanupThread"?Rm(Km.thread):Ey==="killThread"?function(My){var qw=Lm.pthreads[My];delete Lm.pthreads[My],qw.terminate(),Eme(My),Lm.runningWorkers.splice(Lm.runningWorkers.indexOf(qw),1),qw.pthread_ptr=0}(Km.thread):Ey==="cancelThread"?function(My){Lm.pthreads[My].postMessage({cmd:"cancel"})}(Km.thread):Ey==="loaded"?(vm.loaded=!0,Wr&&vm.unref(),km&&km(vm),vm.runPthread&&vm.runPthread()):Ey==="print"?Ks("Thread "+Km.threadId+": "+Km.text):Ey==="printErr"?vu("Thread "+Km.threadId+": "+Km.text):Ey==="alert"?alert("Thread "+Km.threadId+": "+Km.text):Km.target==="setimmediate"?vm.postMessage(Km):Ey==="callHandler"?rr[Km.handler](...Km.args):Ey&&vu("worker sent an unknown command "+Ey),Lm.currentProxiedOperationCallerThread=void 0},vm.onerror=r1=>{throw vu("worker sent an error! "+r1.filename+":"+r1.lineno+": "+r1.message),r1},Wr&&(vm.on("message",function(r1){vm.onmessage({data:r1})}),vm.on("error",function(r1){vm.onerror(r1)}),vm.on("detachedExit",function(){}));var Wm=[];for(var h1 of["onExit","onAbort","print","printErr"])rr.hasOwnProperty(h1)&&Wm.push(h1);vm.postMessage({cmd:"load",handlers:Wm,urlOrBlob:rr.mainScriptUrlOrBlob||s,wasmMemory:Ap,wasmModule:Pp})},allocateUnusedWorker:function(){var vm,km=so("tfjs-backend-wasm-threaded-simd.worker.js");vm=new Worker(km),Lm.unusedWorkers.push(vm)},getNewWorker:function(){return Lm.unusedWorkers.length==0&&(Lm.allocateUnusedWorker(),Lm.loadWasmModuleToWorker(Lm.unusedWorkers[0])),Lm.unusedWorkers.pop()}};function wy(vm){for(;vm.length>0;)vm.shift()(rr)}function Ay(vm){if(ro)return EC(2,0,vm);try{qm(vm)}catch(km){(function(Wm){if(Wm instanceof Fm||Wm=="unwind")return Lo;Lr(1,Wm)})(km)}}rr.PThread=Lm,rr.establishStackSpace=function(){var vm=mfe(),km=Mt()[vm+52>>>2],Wm=Mt()[vm+56>>>2];Vge(km,km-Wm),bfe(km)};var Oy,v0=[];function wC(vm,km,Wm,h1){return ro?EC(3,1,vm,km,Wm,h1):Ly(vm,km,Wm,h1)}function Ly(vm,km,Wm,h1){if(typeof SharedArrayBuffer>"u")return vu("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var r1=[];if(ro&&r1.length===0)return wC(vm,km,Wm,h1);var Km={startRoutine:Wm,pthread_ptr:vm,arg:h1,transferList:r1};return ro?(Km.cmd="spawnThread",postMessage(Km,r1),0):Dm(Km)}function Qy(vm){Atomics.store(Mt(),vm>>2,1),mfe()&&Bge(vm),Atomics.compareExchange(Mt(),vm>>2,1,0)}function w0(vm){w0.shown||(w0.shown={}),w0.shown[vm]||(w0.shown[vm]=1,Wr&&(vm="warning: "+vm),vu(vm))}function EC(vm,km){var Wm=arguments.length-2,h1=arguments;return function(r1){var Km=$me(),Ey=r1();return bfe(Km),Ey}(()=>{for(var r1=Wm,Km=xfe(8*r1),Ey=Km>>3,Vy=0;Vy<Wm;Vy++){var My=h1[2+Vy];Ut()[Ey+Vy>>>0]=My}return Lge(vm,r1,Km,km)})}rr.invokeEntryPoint=function(vm,km){var Wm=function(h1){var r1=v0[h1];return r1||(h1>=v0.length&&(v0.length=h1+1),v0[h1]=r1=Im.get(h1)),r1}(vm)(km);Am()?Lm.setExitStatus(Wm):zge(Wm)},rr.executeNotifiedProxyingQueue=Qy,Oy=Wr?()=>{var vm=process.hrtime();return 1e3*vm[0]+vm[1]/1e6}:()=>performance.timeOrigin+performance.now();var wde=[];function mme(vm){try{return Ap.grow(vm-Au.byteLength+65535>>>16),_m(Ap.buffer),1}catch{}}function Sle(vm){return ro?EC(4,1,vm):52}function M0(vm,km,Wm,h1,r1){return ro?EC(5,1,vm,km,Wm,h1,r1):70}var Wy=[null,[],[]];function ffe(vm,km){var Wm=Wy[vm];km===0||km===10?((vm===1?Ks:vu)(Yp(Wm,0)),Wm.length=0):Wm.push(km)}function dG(vm,km,Wm,h1){if(ro)return EC(6,1,vm,km,Wm,h1);for(var r1=0,Km=0;Km<Wm;Km++){var Ey=Ft()[km>>>2],Vy=Ft()[km+4>>>2];km+=8;for(var My=0;My<Vy;My++)ffe(vm,ct()[Ey+My>>>0]);r1+=Vy}return Ft()[h1>>>2]=r1,0}function pG(vm){return rr["_"+vm]}function Hy(vm,km){(Ap.buffer!=Au&&_m(Ap.buffer),Mp).set(vm,km>>>0)}function Sye(vm,km,Wm,h1,r1){var Km={string:aC=>{var k8=0;if(aC!=null&&aC!==0){var wfe=1+(aC.length<<2);(function(_ye,Iye,Aye){(function(_me,iC,Jy,jge){if(!(jge>0))return 0;Jy>>>=0;for(var Efe=Jy+jge-1,Sfe=0;Sfe<_me.length;++Sfe){var Uv=_me.charCodeAt(Sfe);if(Uv>=55296&&Uv<=57343&&(Uv=65536+((1023&Uv)<<10)|1023&_me.charCodeAt(++Sfe)),Uv<=127){if(Jy>=Efe)break;iC[Jy++>>>0]=Uv}else if(Uv<=2047){if(Jy+1>=Efe)break;iC[Jy++>>>0]=192|Uv>>6,iC[Jy++>>>0]=128|63&Uv}else if(Uv<=65535){if(Jy+2>=Efe)break;iC[Jy++>>>0]=224|Uv>>12,iC[Jy++>>>0]=128|Uv>>6&63,iC[Jy++>>>0]=128|63&Uv}else{if(Jy+3>=Efe)break;iC[Jy++>>>0]=240|Uv>>18,iC[Jy++>>>0]=128|Uv>>12&63,iC[Jy++>>>0]=128|Uv>>6&63,iC[Jy++>>>0]=128|63&Uv}}iC[Jy>>>0]=0})(_ye,ct(),Iye,Aye)})(aC,k8=xfe(wfe),wfe)}return k8},array:aC=>{var k8=xfe(aC.length);return Hy(aC,k8),k8}};function Ey(aC){return km==="string"?function(k8,wfe){return(k8>>>=0)?Yp(ct(),k8,wfe):""}(aC):km==="boolean"?!!aC:aC}var Vy=pG(vm),My=[],qw=0;if(h1)for(var VC=0;VC<h1.length;VC++){var Wge=Km[Wm[VC]];Wge?(qw===0&&(qw=$me()),My[VC]=Wge(h1[VC])):My[VC]=h1[VC]}var Hge,Gge=Vy.apply(null,My);return Hge=Gge,qw!==0&&bfe(qw),Gge=Ey(Hge)}Lm.init();var $ye=[null,Zm,Ay,wC,Sle,M0,dG],Oge={__emscripten_init_main_thread_js:function(vm){Fge(vm,!Vr,1,!Br),Lm.threadInitTLS()},__emscripten_thread_cleanup:function(vm){ro?postMessage({cmd:"cleanupThread",thread:vm}):Rm(vm)},__pthread_create_js:Ly,_emscripten_default_pthread_stack_size:function(){return 65536},_emscripten_get_now_is_monotonic:function(){return!0},_emscripten_notify_task_queue:function(vm,km,Wm,h1){if(vm==km)setTimeout(()=>Qy(h1));else if(ro)postMessage({targetThread:vm,cmd:"processProxyingQueue",queue:h1});else{var r1=Lm.pthreads[vm];if(!r1)return;r1.postMessage({cmd:"processProxyingQueue",queue:h1})}return 1},_emscripten_set_offscreencanvas_size:function(vm,km,Wm){return-1},abort:function(){c1("")},emscripten_check_blocking_allowed:function(){Wr||Vr||w0("Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread")},emscripten_date_now:function(){return Date.now()},emscripten_get_heap_max:function(){return 4294901760},emscripten_get_now:Oy,emscripten_memcpy_big:function(vm,km,Wm){ct().copyWithin(vm>>>0,km>>>0,km+Wm>>>0)},emscripten_num_logical_cores:function(){return Wr?zB().cpus().length:navigator.hardwareConcurrency},emscripten_receive_on_main_thread_js:function(vm,km,Wm){wde.length=km;for(var h1=Wm>>3,r1=0;r1<km;r1++)wde[r1]=Ut()[h1+r1>>>0];return(vm<0?Pm[-vm-1]:$ye[vm]).apply(null,wde)},emscripten_resize_heap:function(vm){var km=ct().length;if((vm>>>=0)<=km)return!1;var Wm,h1,r1=4294901760;if(vm>r1)return!1;for(var Km=1;Km<=4;Km*=2){var Ey=km*(1+.2/Km);if(Ey=Math.min(Ey,vm+100663296),mme(Math.min(r1,(Wm=Math.max(vm,Ey))+((h1=65536)-Wm%h1)%h1)))return!0}return!1},emscripten_unwind_to_js_event_loop:function(){throw"unwind"},exit:qm,fd_close:Sle,fd_seek:M0,fd_write:dG,memory:Ap||rr.wasmMemory};(function(){var vm={env:Oge,wasi_snapshot_preview1:Oge};function km(r1,Km){var Ey=r1.exports;if(rr.asm=Ey,function(My){Lm.tlsInitFunctions.push(My)}(rr.asm._emscripten_tls_init),Im=rr.asm.__indirect_function_table,function(My){Bm.unshift(My)}(rr.asm.__wasm_call_ctors),Pp=Km,!ro){var Vy=Lm.unusedWorkers.length;Lm.unusedWorkers.forEach(function(My){Lm.loadWasmModuleToWorker(My,function(){--Vy||function(qw){if(a1--,rr.monitorRunDependencies&&rr.monitorRunDependencies(a1),a1==0&&Gm){var VC=Gm;Gm=null,VC()}}()})})}}function Wm(r1){km(r1.instance,r1.module)}function h1(r1){return function(){if(!As&&(Br||Vr)){if(typeof fetch=="function"&&!Qp(m1))return fetch(m1,{credentials:"same-origin"}).then(function(Km){if(!Km.ok)throw"failed to load wasm binary file at '"+m1+"'";return Km.arrayBuffer()}).catch(function(){return $m(m1)});if(hr)return new Promise(function(Km,Ey){hr(m1,function(Vy){Km(new Uint8Array(Vy))},Ey)})}return Promise.resolve().then(function(){return $m(m1)})}().then(function(Km){return WebAssembly.instantiate(Km,vm)}).then(function(Km){return Km}).then(r1,function(Km){vu("failed to asynchronously prepare wasm: "+Km),c1(Km)})}if(ro||(a1++,rr.monitorRunDependencies&&rr.monitorRunDependencies(a1)),rr.instantiateWasm)try{return rr.instantiateWasm(vm,km)}catch(r1){vu("Module.instantiateWasm callback failed with error: "+r1),Kt(r1)}(As||typeof WebAssembly.instantiateStreaming!="function"||Nm(m1)||Qp(m1)||Wr||typeof fetch!="function"?h1(Wm):fetch(m1,{credentials:"same-origin"}).then(function(r1){return WebAssembly.instantiateStreaming(r1,vm).then(Wm,function(Km){return vu("wasm streaming compile failed: "+Km),vu("falling back to ArrayBuffer instantiation"),h1(Wm)})})).catch(Kt)})(),rr.___wasm_call_ctors=function(){return(rr.___wasm_call_ctors=rr.asm.__wasm_call_ctors).apply(null,arguments)},rr._init=function(){return(rr._init=rr.asm.init).apply(null,arguments)},rr._init_with_threads_count=function(){return(rr._init_with_threads_count=rr.asm.init_with_threads_count).apply(null,arguments)},rr._get_threads_count=function(){return(rr._get_threads_count=rr.asm.get_threads_count).apply(null,arguments)},rr._register_tensor=function(){return(rr._register_tensor=rr.asm.register_tensor).apply(null,arguments)},rr._dispose_data=function(){return(rr._dispose_data=rr.asm.dispose_data).apply(null,arguments)},rr._dispose=function(){return(rr._dispose=rr.asm.dispose).apply(null,arguments)},rr._Abs=function(){return(rr._Abs=rr.asm.Abs).apply(null,arguments)},rr._Acos=function(){return(rr._Acos=rr.asm.Acos).apply(null,arguments)},rr._Acosh=function(){return(rr._Acosh=rr.asm.Acosh).apply(null,arguments)},rr._Add=function(){return(rr._Add=rr.asm.Add).apply(null,arguments)},rr._AddN=function(){return(rr._AddN=rr.asm.AddN).apply(null,arguments)},rr._All=function(){return(rr._All=rr.asm.All).apply(null,arguments)},rr._Any=function(){return(rr._Any=rr.asm.Any).apply(null,arguments)},rr._ArgMax=function(){return(rr._ArgMax=rr.asm.ArgMax).apply(null,arguments)},rr._ArgMin=function(){return(rr._ArgMin=rr.asm.ArgMin).apply(null,arguments)},rr._Asin=function(){return(rr._Asin=rr.asm.Asin).apply(null,arguments)},rr._Asinh=function(){return(rr._Asinh=rr.asm.Asinh).apply(null,arguments)},rr._Atan=function(){return(rr._Atan=rr.asm.Atan).apply(null,arguments)},rr._Atan2=function(){return(rr._Atan2=rr.asm.Atan2).apply(null,arguments)},rr._Atanh=function(){return(rr._Atanh=rr.asm.Atanh).apply(null,arguments)},rr._AvgPool=function(){return(rr._AvgPool=rr.asm.AvgPool).apply(null,arguments)},rr._AvgPool3D=function(){return(rr._AvgPool3D=rr.asm.AvgPool3D).apply(null,arguments)},rr._AvgPool3DGrad=function(){return(rr._AvgPool3DGrad=rr.asm.AvgPool3DGrad).apply(null,arguments)},rr._AvgPoolGrad=function(){return(rr._AvgPoolGrad=rr.asm.AvgPoolGrad).apply(null,arguments)},rr._BatchMatMul=function(){return(rr._BatchMatMul=rr.asm.BatchMatMul).apply(null,arguments)},rr._Bincount=function(){return(rr._Bincount=rr.asm.Bincount).apply(null,arguments)},rr._BitwiseAnd=function(){return(rr._BitwiseAnd=rr.asm.BitwiseAnd).apply(null,arguments)},rr._Ceil=function(){return(rr._Ceil=rr.asm.Ceil).apply(null,arguments)},rr._ClipByValue=function(){return(rr._ClipByValue=rr.asm.ClipByValue).apply(null,arguments)},rr._Conv2D=function(){return(rr._Conv2D=rr.asm.Conv2D).apply(null,arguments)},rr._Conv2DBackpropInput=function(){return(rr._Conv2DBackpropInput=rr.asm.Conv2DBackpropInput).apply(null,arguments)},rr._Conv3D=function(){return(rr._Conv3D=rr.asm.Conv3D).apply(null,arguments)},rr._Conv3DBackpropFilterV2=function(){return(rr._Conv3DBackpropFilterV2=rr.asm.Conv3DBackpropFilterV2).apply(null,arguments)},rr._Conv3DBackpropInputV2=function(){return(rr._Conv3DBackpropInputV2=rr.asm.Conv3DBackpropInputV2).apply(null,arguments)},rr._Cos=function(){return(rr._Cos=rr.asm.Cos).apply(null,arguments)},rr._Cosh=function(){return(rr._Cosh=rr.asm.Cosh).apply(null,arguments)},rr._CropAndResize=function(){return(rr._CropAndResize=rr.asm.CropAndResize).apply(null,arguments)},rr._Cumprod=function(){return(rr._Cumprod=rr.asm.Cumprod).apply(null,arguments)},rr._Cumsum=function(){return(rr._Cumsum=rr.asm.Cumsum).apply(null,arguments)},rr._DenseBincount=function(){return(rr._DenseBincount=rr.asm.DenseBincount).apply(null,arguments)},rr._DepthToSpace=function(){return(rr._DepthToSpace=rr.asm.DepthToSpace).apply(null,arguments)},rr._DepthwiseConv2dNative=function(){return(rr._DepthwiseConv2dNative=rr.asm.DepthwiseConv2dNative).apply(null,arguments)},rr._Diag=function(){return(rr._Diag=rr.asm.Diag).apply(null,arguments)},rr._Dilation2D=function(){return(rr._Dilation2D=rr.asm.Dilation2D).apply(null,arguments)},rr._Dilation2DBackpropFilter=function(){return(rr._Dilation2DBackpropFilter=rr.asm.Dilation2DBackpropFilter).apply(null,arguments)},rr._Dilation2DBackpropInput=function(){return(rr._Dilation2DBackpropInput=rr.asm.Dilation2DBackpropInput).apply(null,arguments)},rr._Elu=function(){return(rr._Elu=rr.asm.Elu).apply(null,arguments)},rr._EluGrad=function(){return(rr._EluGrad=rr.asm.EluGrad).apply(null,arguments)},rr._Equal=function(){return(rr._Equal=rr.asm.Equal).apply(null,arguments)},rr._Erf=function(){return(rr._Erf=rr.asm.Erf).apply(null,arguments)},rr._Exp=function(){return(rr._Exp=rr.asm.Exp).apply(null,arguments)},rr._Expm1=function(){return(rr._Expm1=rr.asm.Expm1).apply(null,arguments)},rr._FlipLeftRight=function(){return(rr._FlipLeftRight=rr.asm.FlipLeftRight).apply(null,arguments)},rr._Floor=function(){return(rr._Floor=rr.asm.Floor).apply(null,arguments)},rr._FloorDiv=function(){return(rr._FloorDiv=rr.asm.FloorDiv).apply(null,arguments)},rr._FusedBatchNorm=function(){return(rr._FusedBatchNorm=rr.asm.FusedBatchNorm).apply(null,arguments)},rr._FusedConv2D=function(){return(rr._FusedConv2D=rr.asm.FusedConv2D).apply(null,arguments)},rr._FusedDepthwiseConv2D=function(){return(rr._FusedDepthwiseConv2D=rr.asm.FusedDepthwiseConv2D).apply(null,arguments)},rr._Gather=function(){return(rr._Gather=rr.asm.Gather).apply(null,arguments)},rr._GatherNd=function(){return(rr._GatherNd=rr.asm.GatherNd).apply(null,arguments)},rr._Greater=function(){return(rr._Greater=rr.asm.Greater).apply(null,arguments)},rr._GreaterEqual=function(){return(rr._GreaterEqual=rr.asm.GreaterEqual).apply(null,arguments)},rr._IsFinite=function(){return(rr._IsFinite=rr.asm.IsFinite).apply(null,arguments)},rr._IsInf=function(){return(rr._IsInf=rr.asm.IsInf).apply(null,arguments)},rr._IsNan=function(){return(rr._IsNan=rr.asm.IsNan).apply(null,arguments)},rr._LRN=function(){return(rr._LRN=rr.asm.LRN).apply(null,arguments)},rr._LRNGrad=function(){return(rr._LRNGrad=rr.asm.LRNGrad).apply(null,arguments)},rr._LeakyRelu=function(){return(rr._LeakyRelu=rr.asm.LeakyRelu).apply(null,arguments)},rr._Less=function(){return(rr._Less=rr.asm.Less).apply(null,arguments)},rr._LessEqual=function(){return(rr._LessEqual=rr.asm.LessEqual).apply(null,arguments)},rr._LinSpace=function(){return(rr._LinSpace=rr.asm.LinSpace).apply(null,arguments)},rr._Log=function(){return(rr._Log=rr.asm.Log).apply(null,arguments)},rr._Log1p=function(){return(rr._Log1p=rr.asm.Log1p).apply(null,arguments)},rr._LogicalAnd=function(){return(rr._LogicalAnd=rr.asm.LogicalAnd).apply(null,arguments)},rr._LogicalNot=function(){return(rr._LogicalNot=rr.asm.LogicalNot).apply(null,arguments)},rr._LogicalOr=function(){return(rr._LogicalOr=rr.asm.LogicalOr).apply(null,arguments)},rr._LogicalXor=function(){return(rr._LogicalXor=rr.asm.LogicalXor).apply(null,arguments)},rr._Max=function(){return(rr._Max=rr.asm.Max).apply(null,arguments)},rr._MaxPool=function(){return(rr._MaxPool=rr.asm.MaxPool).apply(null,arguments)},rr._MaxPool3D=function(){return(rr._MaxPool3D=rr.asm.MaxPool3D).apply(null,arguments)},rr._MaxPool3DGrad=function(){return(rr._MaxPool3DGrad=rr.asm.MaxPool3DGrad).apply(null,arguments)},rr._MaxPoolGrad=function(){return(rr._MaxPoolGrad=rr.asm.MaxPoolGrad).apply(null,arguments)},rr._MaxPoolWithArgmax=function(){return(rr._MaxPoolWithArgmax=rr.asm.MaxPoolWithArgmax).apply(null,arguments)},rr._Maximum=function(){return(rr._Maximum=rr.asm.Maximum).apply(null,arguments)},rr._Mean=function(){return(rr._Mean=rr.asm.Mean).apply(null,arguments)},rr._Min=function(){return(rr._Min=rr.asm.Min).apply(null,arguments)},rr._Minimum=function(){return(rr._Minimum=rr.asm.Minimum).apply(null,arguments)},rr._MirrorPad=function(){return(rr._MirrorPad=rr.asm.MirrorPad).apply(null,arguments)},rr._Mod=function(){return(rr._Mod=rr.asm.Mod).apply(null,arguments)},rr._Multinomial=function(){return(rr._Multinomial=rr.asm.Multinomial).apply(null,arguments)},rr._Multiply=function(){return(rr._Multiply=rr.asm.Multiply).apply(null,arguments)},rr._Neg=function(){return(rr._Neg=rr.asm.Neg).apply(null,arguments)},rr._NonMaxSuppressionV3=function(){return(rr._NonMaxSuppressionV3=rr.asm.NonMaxSuppressionV3).apply(null,arguments)},rr._NonMaxSuppressionV4=function(){return(rr._NonMaxSuppressionV4=rr.asm.NonMaxSuppressionV4).apply(null,arguments)},rr._NonMaxSuppressionV5=function(){return(rr._NonMaxSuppressionV5=rr.asm.NonMaxSuppressionV5).apply(null,arguments)},rr._NotEqual=function(){return(rr._NotEqual=rr.asm.NotEqual).apply(null,arguments)},rr._OneHot=function(){return(rr._OneHot=rr.asm.OneHot).apply(null,arguments)},rr._PadV2=function(){return(rr._PadV2=rr.asm.PadV2).apply(null,arguments)},rr._Pow=function(){return(rr._Pow=rr.asm.Pow).apply(null,arguments)},rr._Prelu=function(){return(rr._Prelu=rr.asm.Prelu).apply(null,arguments)},rr._Prod=function(){return(rr._Prod=rr.asm.Prod).apply(null,arguments)},rr._RealDiv=function(){return(rr._RealDiv=rr.asm.RealDiv).apply(null,arguments)},rr._Reciprocal=function(){return(rr._Reciprocal=rr.asm.Reciprocal).apply(null,arguments)},rr._Relu=function(){return(rr._Relu=rr.asm.Relu).apply(null,arguments)},rr._Relu6=function(){return(rr._Relu6=rr.asm.Relu6).apply(null,arguments)},rr._ResizeBilinear=function(){return(rr._ResizeBilinear=rr.asm.ResizeBilinear).apply(null,arguments)},rr._ResizeBilinearGrad=function(){return(rr._ResizeBilinearGrad=rr.asm.ResizeBilinearGrad).apply(null,arguments)},rr._ResizeNearestNeighbor=function(){return(rr._ResizeNearestNeighbor=rr.asm.ResizeNearestNeighbor).apply(null,arguments)},rr._ResizeNearestNeighborGrad=function(){return(rr._ResizeNearestNeighborGrad=rr.asm.ResizeNearestNeighborGrad).apply(null,arguments)},rr._Reverse=function(){return(rr._Reverse=rr.asm.Reverse).apply(null,arguments)},rr._RotateWithOffset=function(){return(rr._RotateWithOffset=rr.asm.RotateWithOffset).apply(null,arguments)},rr._Round=function(){return(rr._Round=rr.asm.Round).apply(null,arguments)},rr._Rsqrt=function(){return(rr._Rsqrt=rr.asm.Rsqrt).apply(null,arguments)},rr._ScatterNd=function(){return(rr._ScatterNd=rr.asm.ScatterNd).apply(null,arguments)},rr._SearchSorted=function(){return(rr._SearchSorted=rr.asm.SearchSorted).apply(null,arguments)},rr._SelectV2=function(){return(rr._SelectV2=rr.asm.SelectV2).apply(null,arguments)},rr._Selu=function(){return(rr._Selu=rr.asm.Selu).apply(null,arguments)},rr._Sigmoid=function(){return(rr._Sigmoid=rr.asm.Sigmoid).apply(null,arguments)},rr._Sign=function(){return(rr._Sign=rr.asm.Sign).apply(null,arguments)},rr._Sin=function(){return(rr._Sin=rr.asm.Sin).apply(null,arguments)},rr._Sinh=function(){return(rr._Sinh=rr.asm.Sinh).apply(null,arguments)},rr._Softmax=function(){return(rr._Softmax=rr.asm.Softmax).apply(null,arguments)},rr._Softplus=function(){return(rr._Softplus=rr.asm.Softplus).apply(null,arguments)},rr._SparseFillEmptyRows=function(){return(rr._SparseFillEmptyRows=rr.asm.SparseFillEmptyRows).apply(null,arguments)},rr._SparseReshape=function(){return(rr._SparseReshape=rr.asm.SparseReshape).apply(null,arguments)},rr._SparseSegmentReduction=function(){return(rr._SparseSegmentReduction=rr.asm.SparseSegmentReduction).apply(null,arguments)},rr._SparseToDense=function(){return(rr._SparseToDense=rr.asm.SparseToDense).apply(null,arguments)},rr._Sqrt=function(){return(rr._Sqrt=rr.asm.Sqrt).apply(null,arguments)},rr._Square=function(){return(rr._Square=rr.asm.Square).apply(null,arguments)},rr._SquaredDifference=function(){return(rr._SquaredDifference=rr.asm.SquaredDifference).apply(null,arguments)},rr._Step=function(){return(rr._Step=rr.asm.Step).apply(null,arguments)},rr._StridedSlice=function(){return(rr._StridedSlice=rr.asm.StridedSlice).apply(null,arguments)},rr._Sub=function(){return(rr._Sub=rr.asm.Sub).apply(null,arguments)},rr._Sum=function(){return(rr._Sum=rr.asm.Sum).apply(null,arguments)},rr._Tan=function(){return(rr._Tan=rr.asm.Tan).apply(null,arguments)},rr._Tanh=function(){return(rr._Tanh=rr.asm.Tanh).apply(null,arguments)},rr._TensorScatterUpdate=function(){return(rr._TensorScatterUpdate=rr.asm.TensorScatterUpdate).apply(null,arguments)},rr._Tile=function(){return(rr._Tile=rr.asm.Tile).apply(null,arguments)},rr._TopK=function(){return(rr._TopK=rr.asm.TopK).apply(null,arguments)},rr._Transform=function(){return(rr._Transform=rr.asm.Transform).apply(null,arguments)},rr._Transpose=function(){return(rr._Transpose=rr.asm.Transpose).apply(null,arguments)},rr.__FusedMatMul=function(){return(rr.__FusedMatMul=rr.asm._FusedMatMul).apply(null,arguments)},rr._malloc=function(){return(rr._malloc=rr.asm.malloc).apply(null,arguments)},rr._free=function(){return(rr._free=rr.asm.free).apply(null,arguments)},rr.__emscripten_tls_init=function(){return(rr.__emscripten_tls_init=rr.asm._emscripten_tls_init).apply(null,arguments)};var mfe=rr._pthread_self=function(){return(mfe=rr._pthread_self=rr.asm.pthread_self).apply(null,arguments)};rr.___errno_location=function(){return(rr.___errno_location=rr.asm.__errno_location).apply(null,arguments)};var Fge=rr.__emscripten_thread_init=function(){return(Fge=rr.__emscripten_thread_init=rr.asm._emscripten_thread_init).apply(null,arguments)};rr.__emscripten_thread_crashed=function(){return(rr.__emscripten_thread_crashed=rr.asm._emscripten_thread_crashed).apply(null,arguments)},rr._emscripten_main_thread_process_queued_calls=function(){return(rr._emscripten_main_thread_process_queued_calls=rr.asm.emscripten_main_thread_process_queued_calls).apply(null,arguments)},rr._emscripten_main_browser_thread_id=function(){return(rr._emscripten_main_browser_thread_id=rr.asm.emscripten_main_browser_thread_id).apply(null,arguments)};var Lge=rr._emscripten_run_in_main_runtime_thread_js=function(){return(Lge=rr._emscripten_run_in_main_runtime_thread_js=rr.asm.emscripten_run_in_main_runtime_thread_js).apply(null,arguments)};rr._emscripten_dispatch_to_thread_=function(){return(rr._emscripten_dispatch_to_thread_=rr.asm.emscripten_dispatch_to_thread_).apply(null,arguments)};var gfe,yfe,vfe,Bge=rr.__emscripten_proxy_execute_task_queue=function(){return(Bge=rr.__emscripten_proxy_execute_task_queue=rr.asm._emscripten_proxy_execute_task_queue).apply(null,arguments)},Eme=rr.__emscripten_thread_free_data=function(){return(Eme=rr.__emscripten_thread_free_data=rr.asm._emscripten_thread_free_data).apply(null,arguments)},zge=rr.__emscripten_thread_exit=function(){return(zge=rr.__emscripten_thread_exit=rr.asm._emscripten_thread_exit).apply(null,arguments)},Vge=rr._emscripten_stack_set_limits=function(){return(Vge=rr._emscripten_stack_set_limits=rr.asm.emscripten_stack_set_limits).apply(null,arguments)},$me=rr.stackSave=function(){return($me=rr.stackSave=rr.asm.stackSave).apply(null,arguments)},bfe=rr.stackRestore=function(){return(bfe=rr.stackRestore=rr.asm.stackRestore).apply(null,arguments)},xfe=rr.stackAlloc=function(){return(xfe=rr.stackAlloc=rr.asm.stackAlloc).apply(null,arguments)};function Uge(vm){if(!(a1>0)){if(ro)return Xt(rr),Om(),void startWorker(rr);(function(){if(rr.preRun)for(typeof rr.preRun=="function"&&(rr.preRun=[rr.preRun]);rr.preRun.length;)Hm(rr.preRun.shift());wy(Mm)})(),a1>0||(rr.setStatus?(rr.setStatus("Running..."),setTimeout(function(){setTimeout(function(){rr.setStatus("")},1),km()},1)):km())}function km(){gfe||(gfe=!0,rr.calledRun=!0,!Bp&&(Om(),Xt(rr),rr.onRuntimeInitialized&&rr.onRuntimeInitialized(),function(){if(!ro){if(rr.postRun)for(typeof rr.postRun=="function"&&(rr.postRun=[rr.postRun]);rr.postRun.length;)u1(rr.postRun.shift());wy(zm)}}()))}}if(rr.dynCall_iijjiiii=function(){return(rr.dynCall_iijjiiii=rr.asm.dynCall_iijjiiii).apply(null,arguments)},rr.dynCall_jiji=function(){return(rr.dynCall_jiji=rr.asm.dynCall_jiji).apply(null,arguments)},rr.keepRuntimeAlive=Am,rr.wasmMemory=Ap,rr.cwrap=function(vm,km,Wm,h1){var r1=(Wm=Wm||[]).every(Km=>Km==="number"||Km==="boolean");return km!=="string"&&r1&&!h1?pG(vm):function(){return Sye(vm,km,Wm,arguments)}},rr.ExitStatus=Fm,rr.PThread=Lm,Gm=function vm(){gfe||Uge(),gfe||(Gm=vm)},rr.preInit)for(typeof rr.preInit=="function"&&(rr.preInit=[rr.preInit]);rr.preInit.length>0;)rr.preInit.pop()();if(Uge(),nr&&(yfe={uncaughtException:process.listeners("uncaughtException").filter(function(vm){return!nr.uncaughtException.indexOf(vm)>-1}),unhandledRejection:process.listeners("unhandledRejection").filter(function(vm){return!nr.unhandledRejection.indexOf(vm)>-1})}),typeof WasmBackendModule<"u")vfe=WasmBackendModule;else{if(_e===void 0)throw new Error("Could not find wasm module in post.js");vfe=_e}if(yfe){var Cye=vfe._dispose;vfe._dispose=function(){Cye(),yfe.uncaughtException.forEach(function(vm){process.removeListener("uncaughtException",vm)}),yfe.unhandledRejection.forEach(function(vm){process.removeListener("unhandledRejection",vm)})}}return _e.ready});typeof o=="object"&&typeof i=="object"?i.exports=_:typeof define=="function"&&define.amd?define([],function(){return _}):typeof o=="object"&&(o.WasmBackendModuleThreadedSimd=_)}),UB=Kt$1((o,i)=>{i.exports.wasmWorkerContents=`"use strict";var Module={};var ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads");var parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",data=>onmessage({data:data}));var fs=require("fs");Object.assign(global,{self:global,require:require,Module:Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:function(f){(0,eval)(fs.readFileSync(f,"utf8")+"//# sourceURL="+f)},postMessage:function(msg){parentPort.postMessage(msg)},performance:global.performance||{now:function(){return Date.now()}}})}var initializedJS=false;var pendingNotifiedProxyingQueues=[];function threadPrintErr(){var text=Array.prototype.slice.call(arguments).join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,text+"
");return}console.error(text)}function threadAlert(){var text=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:text,threadId:Module["_pthread_self"]()})}var err=threadPrintErr;self.alert=threadAlert;Module["instantiateWasm"]=(info,receiveInstance)=>{var instance=new WebAssembly.Instance(Module["wasmModule"],info);receiveInstance(instance);Module["wasmModule"]=null;return instance.exports};self.onunhandledrejection=e=>{throw e.reason??e};self.startWorker=instance=>{Module=instance;postMessage({"cmd":"loaded"})};self.onmessage=e=>{try{if(e.data.cmd==="load"){Module["wasmModule"]=e.data.wasmModule;for(const handler of e.data.handlers){Module[handler]=function(){postMessage({cmd:"callHandler",handler:handler,args:[...arguments]})}}Module["wasmMemory"]=e.data.wasmMemory;Module["buffer"]=Module["wasmMemory"].buffer;Module["ENVIRONMENT_IS_PTHREAD"]=true;if(typeof e.data.urlOrBlob=="string"){importScripts(e.data.urlOrBlob)}else{var objectUrl=URL.createObjectURL(e.data.urlOrBlob);importScripts(objectUrl);URL.revokeObjectURL(objectUrl)}WasmBackendModuleThreadedSimd(Module)}else if(e.data.cmd==="run"){Module["__emscripten_thread_init"](e.data.pthread_ptr,0,0,1);Module["establishStackSpace"]();Module["PThread"].receiveObjectTransfer(e.data);Module["PThread"].threadInitTLS();if(!initializedJS){pendingNotifiedProxyingQueues.forEach(queue=>{Module["executeNotifiedProxyingQueue"](queue)});pendingNotifiedProxyingQueues=[];initializedJS=true}try{Module["invokeEntryPoint"](e.data.start_routine,e.data.arg)}catch(ex){if(ex!="unwind"){if(ex instanceof Module["ExitStatus"]){if(Module["keepRuntimeAlive"]()){}else{Module["__emscripten_thread_exit"](ex.status)}}else{throw ex}}}}else if(e.data.cmd==="cancel"){if(Module["_pthread_self"]()){Module["__emscripten_thread_exit"](-1)}}else if(e.data.target==="setimmediate"){}else if(e.data.cmd==="processProxyingQueue"){if(initializedJS){Module["executeNotifiedProxyingQueue"](e.data.queue)}else{pendingNotifiedProxyingQueues.push(e.data.queue)}}else if(e.data.cmd){err("worker.js received unknown command "+e.data.cmd);err(e.data)}}catch(ex){if(Module["__emscripten_thread_crashed"]){Module["__emscripten_thread_crashed"]()}throw ex}};`}),GB=Kt$1((o,i)=>{var s,_=(s=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0,typeof __filename<"u"&&(s=s||__filename),function(_e){var ct,Mt,Ft,Ut=(_e=_e||{})!==void 0?_e:{};Ut.ready=new Promise(function(Qp,$m){ct=Qp,Mt=$m}),typeof process<"u"&&process.listeners&&(Ft={uncaughtException:process.listeners("uncaughtException"),unhandledRejection:process.listeners("unhandledRejection")});var Xt,Kt,nr,rr=Object.assign({},Ut),or=typeof window=="object",hr=typeof importScripts=="function",fr=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",yr="";if(fr){var Lr=Vv(),Br=Wv();yr=hr?Br.dirname(yr)+"/":__dirname+"/",Xt=(Qp,$m)=>(Qp=Em(Qp)?new URL(Qp):Br.normalize(Qp),Lr.readFileSync(Qp,$m?void 0:"utf8")),nr=Qp=>{var $m=Xt(Qp,!0);return $m.buffer||($m=new Uint8Array($m)),$m},Kt=(Qp,$m,Pm)=>{Qp=Em(Qp)?new URL(Qp):Br.normalize(Qp),Lr.readFile(Qp,function(Fm,Rm){Fm?Pm(Fm):$m(Rm.buffer)})},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",function(Qp){if(!(Qp instanceof _m))throw Qp}),process.on("unhandledRejection",function(Qp){throw Qp}),Ut.inspect=function(){return"[Emscripten Module object]"}}else(or||hr)&&(hr?yr=self.location.href:typeof document<"u"&&document.currentScript&&(yr=document.currentScript.src),s&&(yr=s),yr=yr.indexOf("blob:")!==0?yr.substr(0,yr.replace(/[?#].*/,"").lastIndexOf("/")+1):"",Xt=Qp=>{var $m=new XMLHttpRequest;return $m.open("GET",Qp,!1),$m.send(null),$m.responseText},hr&&(nr=Qp=>{var $m=new XMLHttpRequest;return $m.open("GET",Qp,!1),$m.responseType="arraybuffer",$m.send(null),new Uint8Array($m.response)}),Kt=(Qp,$m,Pm)=>{var Fm=new XMLHttpRequest;Fm.open("GET",Qp,!0),Fm.responseType="arraybuffer",Fm.onload=()=>{Fm.status==200||Fm.status==0&&Fm.response?$m(Fm.response):Pm()},Fm.onerror=Pm,Fm.send(null)});var Vr,Wr=Ut.print||console.log.bind(console),ro=Ut.printErr||console.warn.bind(console);Object.assign(Ut,rr),rr=null,Ut.arguments&&Ut.arguments,Ut.thisProgram&&Ut.thisProgram,Ut.quit&&Ut.quit,Ut.wasmBinary&&(Vr=Ut.wasmBinary),Ut.noExitRuntime,typeof WebAssembly!="object"&&Op("no native wasm support detected");var no,so,ko,To,oo,No=!1,As=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Ks(Qp,$m,Pm){for(var Fm=($m>>>=0)+Pm,Rm=$m;Qp[Rm]&&!(Rm>=Fm);)++Rm;if(Rm-$m>16&&Qp.buffer&&As)return As.decode(Qp.subarray($m,Rm));for(var Dm="";$m<Rm;){var Zm=Qp[$m++];if(128&Zm){var qm=63&Qp[$m++];if((224&Zm)!=192){var Lm=63&Qp[$m++];if((Zm=(240&Zm)==224?(15&Zm)<<12|qm<<6|Lm:(7&Zm)<<18|qm<<12|Lm<<6|63&Qp[$m++])<65536)Dm+=String.fromCharCode(Zm);else{var wy=Zm-65536;Dm+=String.fromCharCode(55296|wy>>10,56320|1023&wy)}}else Dm+=String.fromCharCode((31&Zm)<<6|qm)}else Dm+=String.fromCharCode(Zm)}return Dm}function vu(Qp){so=Qp,Ut.HEAP8=ko=new Int8Array(Qp),Ut.HEAP16=new Int16Array(Qp),Ut.HEAP32=new Int32Array(Qp),Ut.HEAPU8=To=new Uint8Array(Qp),Ut.HEAPU16=new Uint16Array(Qp),Ut.HEAPU32=oo=new Uint32Array(Qp),Ut.HEAPF32=new Float32Array(Qp),Ut.HEAPF64=new Float64Array(Qp)}Ut.INITIAL_MEMORY;var Fu=[],Ap=[],Pp=[];function Lo(Qp){Fu.unshift(Qp)}function Au(Qp){Pp.unshift(Qp)}var Mp=0,Lp=null;function Op(Qp){Ut.onAbort&&Ut.onAbort(Qp),ro(Qp="Aborted("+Qp+")"),No=!0,Qp+=". Build with -sASSERTIONS for more info.";var $m=new WebAssembly.RuntimeError(Qp);throw Mt($m),$m}var Fp,wm="data:application/octet-stream;base64,";function Bp(Qp){return Qp.startsWith(wm)}function Em(Qp){return Qp.startsWith("file://")}function Yp(Qp){try{if(Qp==Fp&&Vr)return new Uint8Array(Vr);if(nr)return nr(Qp);throw"both async and sync fetching of the wasm failed"}catch($m){Op($m)}}function _m(Qp){this.name="ExitStatus",this.message="Program terminated with exit("+Qp+")",this.status=Qp}function Tm(Qp){for(;Qp.length>0;)Qp.shift()(Ut)}function Im(Qp){try{return no.grow(Qp-so.byteLength+65535>>>16),vu(no.buffer),1}catch{}}Bp(Fp="tfjs-backend-wasm.wasm")||(Fp=function(Qp){return Ut.locateFile?Ut.locateFile(Qp,yr):yr+Qp}(Fp));var Mm=[null,[],[]];function Bm(Qp,$m){var Pm=Mm[Qp];$m===0||$m===10?((Qp===1?Wr:ro)(Ks(Pm,0)),Pm.length=0):Pm.push($m)}function zm(Qp){return Ut["_"+Qp]}function Am(Qp,$m,Pm,Fm,Rm){var Dm={string:Ly=>{var Qy=0;if(Ly!=null&&Ly!==0){var w0=1+(Ly.length<<2);(function(EC,wde,mme){(function(Sle,M0,Wy,ffe){if(!(ffe>0))return 0;Wy>>>=0;for(var dG=Wy+ffe-1,pG=0;pG<Sle.length;++pG){var Hy=Sle.charCodeAt(pG);if(Hy>=55296&&Hy<=57343&&(Hy=65536+((1023&Hy)<<10)|1023&Sle.charCodeAt(++pG)),Hy<=127){if(Wy>=dG)break;M0[Wy++>>>0]=Hy}else if(Hy<=2047){if(Wy+1>=dG)break;M0[Wy++>>>0]=192|Hy>>6,M0[Wy++>>>0]=128|63&Hy}else if(Hy<=65535){if(Wy+2>=dG)break;M0[Wy++>>>0]=224|Hy>>12,M0[Wy++>>>0]=128|Hy>>6&63,M0[Wy++>>>0]=128|63&Hy}else{if(Wy+3>=dG)break;M0[Wy++>>>0]=240|Hy>>18,M0[Wy++>>>0]=128|Hy>>12&63,M0[Wy++>>>0]=128|Hy>>6&63,M0[Wy++>>>0]=128|63&Hy}}M0[Wy>>>0]=0})(EC,To,wde,mme)})(Ly,Qy=m1(w0),w0)}return Qy},array:Ly=>{var Qy=m1(Ly.length);return function(w0,EC){ko.set(w0,EC>>>0)}(Ly,Qy),Qy}};function Zm(Ly){return $m==="string"?function(Qy,w0){return(Qy>>>=0)?Ks(To,Qy,w0):""}(Ly):$m==="boolean"?!!Ly:Ly}var qm=zm(Qp),Lm=[],wy=0;if(Fm)for(var Ay=0;Ay<Fm.length;Ay++){var Oy=Dm[Pm[Ay]];Oy?(wy===0&&(wy=Gm()),Lm[Ay]=Oy(Fm[Ay])):Lm[Ay]=Fm[Ay]}var v0,wC=qm.apply(null,Lm);return v0=wC,wy!==0&&c1(wy),wC=Zm(v0)}var Om={abort:function(){Op("")},emscripten_get_heap_max:function(){return 4294901760},emscripten_memcpy_big:function(Qp,$m,Pm){To.copyWithin(Qp>>>0,$m>>>0,$m+Pm>>>0)},emscripten_resize_heap:function(Qp){var $m,Pm,Fm=To.length,Rm=4294901760;if((Qp>>>=0)>Rm)return!1;for(var Dm=1;Dm<=4;Dm*=2){var Zm=Fm*(1+.2/Dm);if(Zm=Math.min(Zm,Qp+100663296),Im(Math.min(Rm,($m=Math.max(Qp,Zm))+((Pm=65536)-$m%Pm)%Pm)))return!0}return!1},fd_close:function(Qp){return 52},fd_seek:function(Qp,$m,Pm,Fm,Rm){return 70},fd_write:function(Qp,$m,Pm,Fm){for(var Rm=0,Dm=0;Dm<Pm;Dm++){var Zm=oo[$m>>>2],qm=oo[$m+4>>>2];$m+=8;for(var Lm=0;Lm<qm;Lm++)Bm(Qp,To[Zm+Lm>>>0]);Rm+=qm}return oo[Fm>>>2]=Rm,0}};(function(){var Qp={env:Om,wasi_snapshot_preview1:Om};function $m(Rm,Dm){var Zm=Rm.exports;Ut.asm=Zm,vu((no=Ut.asm.memory).buffer),Ut.asm.__indirect_function_table,function(qm){Ap.unshift(qm)}(Ut.asm.__wasm_call_ctors),function(qm){if(Mp--,Ut.monitorRunDependencies&&Ut.monitorRunDependencies(Mp),Mp==0&&Lp){var Lm=Lp;Lp=null,Lm()}}()}function Pm(Rm){$m(Rm.instance)}function Fm(Rm){return function(){if(!Vr&&(or||hr)){if(typeof fetch=="function"&&!Em(Fp))return fetch(Fp,{credentials:"same-origin"}).then(function(Dm){if(!Dm.ok)throw"failed to load wasm binary file at '"+Fp+"'";return Dm.arrayBuffer()}).catch(function(){return Yp(Fp)});if(Kt)return new Promise(function(Dm,Zm){Kt(Fp,function(qm){Dm(new Uint8Array(qm))},Zm)})}return Promise.resolve().then(function(){return Yp(Fp)})}().then(function(Dm){return WebAssembly.instantiate(Dm,Qp)}).then(function(Dm){return Dm}).then(Rm,function(Dm){ro("failed to asynchronously prepare wasm: "+Dm),Op(Dm)})}if(Mp++,Ut.monitorRunDependencies&&Ut.monitorRunDependencies(Mp),Ut.instantiateWasm)try{return Ut.instantiateWasm(Qp,$m)}catch(Rm){ro("Module.instantiateWasm callback failed with error: "+Rm),Mt(Rm)}(Vr||typeof WebAssembly.instantiateStreaming!="function"||Bp(Fp)||Em(Fp)||fr||typeof fetch!="function"?Fm(Pm):fetch(Fp,{credentials:"same-origin"}).then(function(Rm){return WebAssembly.instantiateStreaming(Rm,Qp).then(Pm,function(Dm){return ro("wasm streaming compile failed: "+Dm),ro("falling back to ArrayBuffer instantiation"),Fm(Pm)})})).catch(Mt)})(),Ut.___wasm_call_ctors=function(){return(Ut.___wasm_call_ctors=Ut.asm.__wasm_call_ctors).apply(null,arguments)},Ut._init=function(){return(Ut._init=Ut.asm.init).apply(null,arguments)},Ut._init_with_threads_count=function(){return(Ut._init_with_threads_count=Ut.asm.init_with_threads_count).apply(null,arguments)},Ut._get_threads_count=function(){return(Ut._get_threads_count=Ut.asm.get_threads_count).apply(null,arguments)},Ut._register_tensor=function(){return(Ut._register_tensor=Ut.asm.register_tensor).apply(null,arguments)},Ut._dispose_data=function(){return(Ut._dispose_data=Ut.asm.dispose_data).apply(null,arguments)},Ut._dispose=function(){return(Ut._dispose=Ut.asm.dispose).apply(null,arguments)},Ut._Abs=function(){return(Ut._Abs=Ut.asm.Abs).apply(null,arguments)},Ut._Acos=function(){return(Ut._Acos=Ut.asm.Acos).apply(null,arguments)},Ut._Acosh=function(){return(Ut._Acosh=Ut.asm.Acosh).apply(null,arguments)},Ut._Add=function(){return(Ut._Add=Ut.asm.Add).apply(null,arguments)},Ut._AddN=function(){return(Ut._AddN=Ut.asm.AddN).apply(null,arguments)},Ut._All=function(){return(Ut._All=Ut.asm.All).apply(null,arguments)},Ut._Any=function(){return(Ut._Any=Ut.asm.Any).apply(null,arguments)},Ut._ArgMax=function(){return(Ut._ArgMax=Ut.asm.ArgMax).apply(null,arguments)},Ut._ArgMin=function(){return(Ut._ArgMin=Ut.asm.ArgMin).apply(null,arguments)},Ut._Asin=function(){return(Ut._Asin=Ut.asm.Asin).apply(null,arguments)},Ut._Asinh=function(){return(Ut._Asinh=Ut.asm.Asinh).apply(null,arguments)},Ut._Atan=function(){return(Ut._Atan=Ut.asm.Atan).apply(null,arguments)},Ut._Atan2=function(){return(Ut._Atan2=Ut.asm.Atan2).apply(null,arguments)},Ut._Atanh=function(){return(Ut._Atanh=Ut.asm.Atanh).apply(null,arguments)},Ut._AvgPool=function(){return(Ut._AvgPool=Ut.asm.AvgPool).apply(null,arguments)},Ut._AvgPool3D=function(){return(Ut._AvgPool3D=Ut.asm.AvgPool3D).apply(null,arguments)},Ut._AvgPool3DGrad=function(){return(Ut._AvgPool3DGrad=Ut.asm.AvgPool3DGrad).apply(null,arguments)},Ut._AvgPoolGrad=function(){return(Ut._AvgPoolGrad=Ut.asm.AvgPoolGrad).apply(null,arguments)},Ut._BatchMatMul=function(){return(Ut._BatchMatMul=Ut.asm.BatchMatMul).apply(null,arguments)},Ut._Bincount=function(){return(Ut._Bincount=Ut.asm.Bincount).apply(null,arguments)},Ut._BitwiseAnd=function(){return(Ut._BitwiseAnd=Ut.asm.BitwiseAnd).apply(null,arguments)},Ut._Ceil=function(){return(Ut._Ceil=Ut.asm.Ceil).apply(null,arguments)},Ut._ClipByValue=function(){return(Ut._ClipByValue=Ut.asm.ClipByValue).apply(null,arguments)},Ut._Conv2D=function(){return(Ut._Conv2D=Ut.asm.Conv2D).apply(null,arguments)},Ut._Conv2DBackpropInput=function(){return(Ut._Conv2DBackpropInput=Ut.asm.Conv2DBackpropInput).apply(null,arguments)},Ut._Conv3D=function(){return(Ut._Conv3D=Ut.asm.Conv3D).apply(null,arguments)},Ut._Conv3DBackpropFilterV2=function(){return(Ut._Conv3DBackpropFilterV2=Ut.asm.Conv3DBackpropFilterV2).apply(null,arguments)},Ut._Conv3DBackpropInputV2=function(){return(Ut._Conv3DBackpropInputV2=Ut.asm.Conv3DBackpropInputV2).apply(null,arguments)},Ut._Cos=function(){return(Ut._Cos=Ut.asm.Cos).apply(null,arguments)},Ut._Cosh=function(){return(Ut._Cosh=Ut.asm.Cosh).apply(null,arguments)},Ut._CropAndResize=function(){return(Ut._CropAndResize=Ut.asm.CropAndResize).apply(null,arguments)},Ut._Cumprod=function(){return(Ut._Cumprod=Ut.asm.Cumprod).apply(null,arguments)},Ut._Cumsum=function(){return(Ut._Cumsum=Ut.asm.Cumsum).apply(null,arguments)},Ut._DenseBincount=function(){return(Ut._DenseBincount=Ut.asm.DenseBincount).apply(null,arguments)},Ut._DepthToSpace=function(){return(Ut._DepthToSpace=Ut.asm.DepthToSpace).apply(null,arguments)},Ut._DepthwiseConv2dNative=function(){return(Ut._DepthwiseConv2dNative=Ut.asm.DepthwiseConv2dNative).apply(null,arguments)},Ut._Diag=function(){return(Ut._Diag=Ut.asm.Diag).apply(null,arguments)},Ut._Dilation2D=function(){return(Ut._Dilation2D=Ut.asm.Dilation2D).apply(null,arguments)},Ut._Dilation2DBackpropFilter=function(){return(Ut._Dilation2DBackpropFilter=Ut.asm.Dilation2DBackpropFilter).apply(null,arguments)},Ut._Dilation2DBackpropInput=function(){return(Ut._Dilation2DBackpropInput=Ut.asm.Dilation2DBackpropInput).apply(null,arguments)},Ut._Elu=function(){return(Ut._Elu=Ut.asm.Elu).apply(null,arguments)},Ut._EluGrad=function(){return(Ut._EluGrad=Ut.asm.EluGrad).apply(null,arguments)},Ut._Equal=function(){return(Ut._Equal=Ut.asm.Equal).apply(null,arguments)},Ut._Erf=function(){return(Ut._Erf=Ut.asm.Erf).apply(null,arguments)},Ut._Exp=function(){return(Ut._Exp=Ut.asm.Exp).apply(null,arguments)},Ut._Expm1=function(){return(Ut._Expm1=Ut.asm.Expm1).apply(null,arguments)},Ut._FlipLeftRight=function(){return(Ut._FlipLeftRight=Ut.asm.FlipLeftRight).apply(null,arguments)},Ut._Floor=function(){return(Ut._Floor=Ut.asm.Floor).apply(null,arguments)},Ut._FloorDiv=function(){return(Ut._FloorDiv=Ut.asm.FloorDiv).apply(null,arguments)},Ut._FusedBatchNorm=function(){return(Ut._FusedBatchNorm=Ut.asm.FusedBatchNorm).apply(null,arguments)},Ut._FusedConv2D=function(){return(Ut._FusedConv2D=Ut.asm.FusedConv2D).apply(null,arguments)},Ut._FusedDepthwiseConv2D=function(){return(Ut._FusedDepthwiseConv2D=Ut.asm.FusedDepthwiseConv2D).apply(null,arguments)},Ut._Gather=function(){return(Ut._Gather=Ut.asm.Gather).apply(null,arguments)},Ut._GatherNd=function(){return(Ut._GatherNd=Ut.asm.GatherNd).apply(null,arguments)},Ut._Greater=function(){return(Ut._Greater=Ut.asm.Greater).apply(null,arguments)},Ut._GreaterEqual=function(){return(Ut._GreaterEqual=Ut.asm.GreaterEqual).apply(null,arguments)},Ut._IsFinite=function(){return(Ut._IsFinite=Ut.asm.IsFinite).apply(null,arguments)},Ut._IsInf=function(){return(Ut._IsInf=Ut.asm.IsInf).apply(null,arguments)},Ut._IsNan=function(){return(Ut._IsNan=Ut.asm.IsNan).apply(null,arguments)},Ut._LRN=function(){return(Ut._LRN=Ut.asm.LRN).apply(null,arguments)},Ut._LRNGrad=function(){return(Ut._LRNGrad=Ut.asm.LRNGrad).apply(null,arguments)},Ut._LeakyRelu=function(){return(Ut._LeakyRelu=Ut.asm.LeakyRelu).apply(null,arguments)},Ut._Less=function(){return(Ut._Less=Ut.asm.Less).apply(null,arguments)},Ut._LessEqual=function(){return(Ut._LessEqual=Ut.asm.LessEqual).apply(null,arguments)},Ut._LinSpace=function(){return(Ut._LinSpace=Ut.asm.LinSpace).apply(null,arguments)},Ut._Log=function(){return(Ut._Log=Ut.asm.Log).apply(null,arguments)},Ut._Log1p=function(){return(Ut._Log1p=Ut.asm.Log1p).apply(null,arguments)},Ut._LogicalAnd=function(){return(Ut._LogicalAnd=Ut.asm.LogicalAnd).apply(null,arguments)},Ut._LogicalNot=function(){return(Ut._LogicalNot=Ut.asm.LogicalNot).apply(null,arguments)},Ut._LogicalOr=function(){return(Ut._LogicalOr=Ut.asm.LogicalOr).apply(null,arguments)},Ut._LogicalXor=function(){return(Ut._LogicalXor=Ut.asm.LogicalXor).apply(null,arguments)},Ut._Max=function(){return(Ut._Max=Ut.asm.Max).apply(null,arguments)},Ut._MaxPool=function(){return(Ut._MaxPool=Ut.asm.MaxPool).apply(null,arguments)},Ut._MaxPool3D=function(){return(Ut._MaxPool3D=Ut.asm.MaxPool3D).apply(null,arguments)},Ut._MaxPool3DGrad=function(){return(Ut._MaxPool3DGrad=Ut.asm.MaxPool3DGrad).apply(null,arguments)},Ut._MaxPoolGrad=function(){return(Ut._MaxPoolGrad=Ut.asm.MaxPoolGrad).apply(null,arguments)},Ut._MaxPoolWithArgmax=function(){return(Ut._MaxPoolWithArgmax=Ut.asm.MaxPoolWithArgmax).apply(null,arguments)},Ut._Maximum=function(){return(Ut._Maximum=Ut.asm.Maximum).apply(null,arguments)},Ut._Mean=function(){return(Ut._Mean=Ut.asm.Mean).apply(null,arguments)},Ut._Min=function(){return(Ut._Min=Ut.asm.Min).apply(null,arguments)},Ut._Minimum=function(){return(Ut._Minimum=Ut.asm.Minimum).apply(null,arguments)},Ut._MirrorPad=function(){return(Ut._MirrorPad=Ut.asm.MirrorPad).apply(null,arguments)},Ut._Mod=function(){return(Ut._Mod=Ut.asm.Mod).apply(null,arguments)},Ut._Multinomial=function(){return(Ut._Multinomial=Ut.asm.Multinomial).apply(null,arguments)},Ut._Multiply=function(){return(Ut._Multiply=Ut.asm.Multiply).apply(null,arguments)},Ut._Neg=function(){return(Ut._Neg=Ut.asm.Neg).apply(null,arguments)},Ut._NonMaxSuppressionV3=function(){return(Ut._NonMaxSuppressionV3=Ut.asm.NonMaxSuppressionV3).apply(null,arguments)},Ut._NonMaxSuppressionV4=function(){return(Ut._NonMaxSuppressionV4=Ut.asm.NonMaxSuppressionV4).apply(null,arguments)},Ut._NonMaxSuppressionV5=function(){return(Ut._NonMaxSuppressionV5=Ut.asm.NonMaxSuppressionV5).apply(null,arguments)},Ut._NotEqual=function(){return(Ut._NotEqual=Ut.asm.NotEqual).apply(null,arguments)},Ut._OneHot=function(){return(Ut._OneHot=Ut.asm.OneHot).apply(null,arguments)},Ut._PadV2=function(){return(Ut._PadV2=Ut.asm.PadV2).apply(null,arguments)},Ut._Pow=function(){return(Ut._Pow=Ut.asm.Pow).apply(null,arguments)},Ut._Prelu=function(){return(Ut._Prelu=Ut.asm.Prelu).apply(null,arguments)},Ut._Prod=function(){return(Ut._Prod=Ut.asm.Prod).apply(null,arguments)},Ut._RealDiv=function(){return(Ut._RealDiv=Ut.asm.RealDiv).apply(null,arguments)},Ut._Reciprocal=function(){return(Ut._Reciprocal=Ut.asm.Reciprocal).apply(null,arguments)},Ut._Relu=function(){return(Ut._Relu=Ut.asm.Relu).apply(null,arguments)},Ut._Relu6=function(){return(Ut._Relu6=Ut.asm.Relu6).apply(null,arguments)},Ut._ResizeBilinear=function(){return(Ut._ResizeBilinear=Ut.asm.ResizeBilinear).apply(null,arguments)},Ut._ResizeBilinearGrad=function(){return(Ut._ResizeBilinearGrad=Ut.asm.ResizeBilinearGrad).apply(null,arguments)},Ut._ResizeNearestNeighbor=function(){return(Ut._ResizeNearestNeighbor=Ut.asm.ResizeNearestNeighbor).apply(null,arguments)},Ut._ResizeNearestNeighborGrad=function(){return(Ut._ResizeNearestNeighborGrad=Ut.asm.ResizeNearestNeighborGrad).apply(null,arguments)},Ut._Reverse=function(){return(Ut._Reverse=Ut.asm.Reverse).apply(null,arguments)},Ut._RotateWithOffset=function(){return(Ut._RotateWithOffset=Ut.asm.RotateWithOffset).apply(null,arguments)},Ut._Round=function(){return(Ut._Round=Ut.asm.Round).apply(null,arguments)},Ut._Rsqrt=function(){return(Ut._Rsqrt=Ut.asm.Rsqrt).apply(null,arguments)},Ut._ScatterNd=function(){return(Ut._ScatterNd=Ut.asm.ScatterNd).apply(null,arguments)},Ut._SearchSorted=function(){return(Ut._SearchSorted=Ut.asm.SearchSorted).apply(null,arguments)},Ut._SelectV2=function(){return(Ut._SelectV2=Ut.asm.SelectV2).apply(null,arguments)},Ut._Selu=function(){return(Ut._Selu=Ut.asm.Selu).apply(null,arguments)},Ut._Sigmoid=function(){return(Ut._Sigmoid=Ut.asm.Sigmoid).apply(null,arguments)},Ut._Sign=function(){return(Ut._Sign=Ut.asm.Sign).apply(null,arguments)},Ut._Sin=function(){return(Ut._Sin=Ut.asm.Sin).apply(null,arguments)},Ut._Sinh=function(){return(Ut._Sinh=Ut.asm.Sinh).apply(null,arguments)},Ut._Softmax=function(){return(Ut._Softmax=Ut.asm.Softmax).apply(null,arguments)},Ut._Softplus=function(){return(Ut._Softplus=Ut.asm.Softplus).apply(null,arguments)},Ut._SparseFillEmptyRows=function(){return(Ut._SparseFillEmptyRows=Ut.asm.SparseFillEmptyRows).apply(null,arguments)},Ut._SparseReshape=function(){return(Ut._SparseReshape=Ut.asm.SparseReshape).apply(null,arguments)},Ut._SparseSegmentReduction=function(){return(Ut._SparseSegmentReduction=Ut.asm.SparseSegmentReduction).apply(null,arguments)},Ut._SparseToDense=function(){return(Ut._SparseToDense=Ut.asm.SparseToDense).apply(null,arguments)},Ut._Sqrt=function(){return(Ut._Sqrt=Ut.asm.Sqrt).apply(null,arguments)},Ut._Square=function(){return(Ut._Square=Ut.asm.Square).apply(null,arguments)},Ut._SquaredDifference=function(){return(Ut._SquaredDifference=Ut.asm.SquaredDifference).apply(null,arguments)},Ut._Step=function(){return(Ut._Step=Ut.asm.Step).apply(null,arguments)},Ut._StridedSlice=function(){return(Ut._StridedSlice=Ut.asm.StridedSlice).apply(null,arguments)},Ut._Sub=function(){return(Ut._Sub=Ut.asm.Sub).apply(null,arguments)},Ut._Sum=function(){return(Ut._Sum=Ut.asm.Sum).apply(null,arguments)},Ut._Tan=function(){return(Ut._Tan=Ut.asm.Tan).apply(null,arguments)},Ut._Tanh=function(){return(Ut._Tanh=Ut.asm.Tanh).apply(null,arguments)},Ut._TensorScatterUpdate=function(){return(Ut._TensorScatterUpdate=Ut.asm.TensorScatterUpdate).apply(null,arguments)},Ut._Tile=function(){return(Ut._Tile=Ut.asm.Tile).apply(null,arguments)},Ut._TopK=function(){return(Ut._TopK=Ut.asm.TopK).apply(null,arguments)},Ut._Transform=function(){return(Ut._Transform=Ut.asm.Transform).apply(null,arguments)},Ut._Transpose=function(){return(Ut._Transpose=Ut.asm.Transpose).apply(null,arguments)},Ut.__FusedMatMul=function(){return(Ut.__FusedMatMul=Ut.asm._FusedMatMul).apply(null,arguments)},Ut._malloc=function(){return(Ut._malloc=Ut.asm.malloc).apply(null,arguments)},Ut._free=function(){return(Ut._free=Ut.asm.free).apply(null,arguments)},Ut.___errno_location=function(){return(Ut.___errno_location=Ut.asm.__errno_location).apply(null,arguments)};var Hm,u1,a1,Gm=Ut.stackSave=function(){return(Gm=Ut.stackSave=Ut.asm.stackSave).apply(null,arguments)},c1=Ut.stackRestore=function(){return(c1=Ut.stackRestore=Ut.asm.stackRestore).apply(null,arguments)},m1=Ut.stackAlloc=function(){return(m1=Ut.stackAlloc=Ut.asm.stackAlloc).apply(null,arguments)};function Sm(Qp){function $m(){Hm||(Hm=!0,Ut.calledRun=!0,!No&&(Tm(Ap),ct(Ut),Ut.onRuntimeInitialized&&Ut.onRuntimeInitialized(),function(){if(Ut.postRun)for(typeof Ut.postRun=="function"&&(Ut.postRun=[Ut.postRun]);Ut.postRun.length;)Au(Ut.postRun.shift());Tm(Pp)}()))}Mp>0||(function(){if(Ut.preRun)for(typeof Ut.preRun=="function"&&(Ut.preRun=[Ut.preRun]);Ut.preRun.length;)Lo(Ut.preRun.shift());Tm(Fu)}(),Mp>0)||(Ut.setStatus?(Ut.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Ut.setStatus("")},1),$m()},1)):$m())}if(Ut.dynCall_iijjiiii=function(){return(Ut.dynCall_iijjiiii=Ut.asm.dynCall_iijjiiii).apply(null,arguments)},Ut.dynCall_jiji=function(){return(Ut.dynCall_jiji=Ut.asm.dynCall_jiji).apply(null,arguments)},Ut.cwrap=function(Qp,$m,Pm,Fm){var Rm=(Pm=Pm||[]).every(Dm=>Dm==="number"||Dm==="boolean");return $m!=="string"&&Rm&&!Fm?zm(Qp):function(){return Am(Qp,$m,Pm,arguments)}},Lp=function Qp(){Hm||Sm(),Hm||(Lp=Qp)},Ut.preInit)for(typeof Ut.preInit=="function"&&(Ut.preInit=[Ut.preInit]);Ut.preInit.length>0;)Ut.preInit.pop()();if(Sm(),Ft&&(u1={uncaughtException:process.listeners("uncaughtException").filter(function(Qp){return!Ft.uncaughtException.indexOf(Qp)>-1}),unhandledRejection:process.listeners("unhandledRejection").filter(function(Qp){return!Ft.unhandledRejection.indexOf(Qp)>-1})}),_e!==void 0)a1=_e;else{if(typeof WasmBackendModuleThreadedSimd>"u")throw new Error("Could not find wasm module in post.js");a1=WasmBackendModuleThreadedSimd}if(u1){var Nm=a1._dispose;a1._dispose=function(){Nm(),u1.uncaughtException.forEach(function(Qp){process.removeListener("uncaughtException",Qp)}),u1.unhandledRejection.forEach(function(Qp){process.removeListener("unhandledRejection",Qp)})}}return _e.ready});typeof o=="object"&&typeof i=="object"?i.exports=_:typeof define=="function"&&define.amd?define([],function(){return _}):typeof o=="object"&&(o.WasmBackendModule=_)}),Bo=class{constructor(o,i){this.backend=o,this.dataMover=i,this.data=new WeakMap,this.dataIdsCount=0}get(o){return this.data.has(o)||this.dataMover.moveData(this.backend,o),this.data.get(o)}set(o,i){this.dataIdsCount++,this.data.set(o,i)}has(o){return this.data.has(o)}delete(o){return this.dataIdsCount--,this.data.delete(o)}numDataIds(){return this.dataIdsCount}},ao=class{refCount(o){return zr("refCount")}incRef(o){return zr("incRef")}timerAvailable(){return!0}time(o){return zr("time")}read(o){return zr("read")}readSync(o){return zr("readSync")}readToGPU(o,i){return zr("readToGPU")}numDataIds(){return zr("numDataIds")}disposeData(o,i){return zr("disposeData")}write(o,i,s){return zr("write")}move(o,i,s,_,_e){return zr("move")}createTensorFromGPUData(o,i,s){return zr("createTensorFromGPUData")}memory(){return zr("memory")}floatPrecision(){return zr("floatPrecision")}epsilon(){return this.floatPrecision()===32?1e-7:1e-4}dispose(){return zr("dispose")}};function zr(o){throw new Error(`'${o}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}function k0(o){let i=o.length,s=0;for(;i>0;)s=Math.random()*i|0,i--,jm(o,i,s)}function FG(o,i){if(o.length!==i.length)throw new Error(`Array sizes must match to be shuffled together First array length was ${o.length}Second array length was ${i.length}`);let s=o.length,_=0;for(;s>0;)_=Math.random()*s|0,s--,jm(o,s,_),jm(i,s,_)}function Vp(o,i,s){return Math.max(o,Math.min(i,s))}function PG(o){return o%2==0?o:o+1}function jm(o,i,s){let _=o[i];o[i]=o[s],o[s]=_}function OG(o){let i=0;for(let s=0;s<o.length;s++)i+=o[s];return i}function MG(o,i){let s=Math.random();return i*s+(1-s)*o}function LG(o,i){let s=0;for(let _=0;_<o.length;_++){let _e=Number(o[_])-Number(i[_]);s+=_e*_e}return s}function E(o,i){if(!o)throw new Error(typeof i=="string"?i:i())}function xt$1(o,i,s=""){E(br(o,i),()=>s+` Shapes ${o} and ${i} must match`)}function io(o){E(o!=null,()=>"The input to the tensor constructor must be a non-null value.")}function ze(o){if(o.length===0)return 1;let i=o[0];for(let s=1;s<o.length;s++)i*=o[s];return i}function BG(o){return o.length===0}function ZC(o,i){if(o===i)return!0;if(o==null||i==null||o.length!==i.length)return!1;for(let s=0;s<o.length;s++)if(o[s]!==null&&i[s]!==null&&o[s]!==i[s])return!1;return!0}function br(o,i){if(o===i)return!0;if(o==null||i==null||o.length!==i.length)return!1;for(let s=0;s<o.length;s++)if(o[s]!==i[s])return!1;return!0}function Ka(o){return o%1==0}function zG(o){if(Math.tanh!=null)return Math.tanh(o);if(o===1/0)return 1;if(o===-1/0)return-1;{let i=Math.exp(2*o);return(i-1)/(i+1)}}function VG(o){let i=Math.ceil(Math.sqrt(o));return[i,Math.ceil(o/i)]}function WG(o){let i=new Uint32Array(o);for(let s=0;s<o;++s)i[s]=s;return k0(i),i}function _u(o,i){return i<=o.length?o:o+" ".repeat(i-o.length)}function UG(o,i=_e=>0,s,_){return new Promise((_e,ct)=>{let Mt=0,Ft=()=>{if(o())return void _e();Mt++;let Ut=i(Mt);s!=null&&Mt>=s?ct():_!=null?_(Ft,Ut):setTimeout(Ft,Ut)};Ft()})}function GG(o,i){let s=1,_=-1;for(let ct=0;ct<o.length;++ct)if(o[ct]>=0)s*=o[ct];else if(o[ct]===-1){if(_!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${_} and dim ${ct}`);_=ct}else if(o[ct]<0)throw Error(`Shapes can not be < 0. Found ${o[ct]} at dim ${ct}`);if(_===-1){if(i>0&&i!==s)throw Error(`Size(${i}) must match the product of shape ${o}`);return o}if(s===0)throw Error(`Cannot infer the missing size in [${o}] when there are 0 elements`);if(i%s!=0)throw Error(`The implicit shape can't be a fractional number. Got ${i} / ${s}`);let _e=o.slice();return _e[_]=i/s,_e}function _i(o,i){let s=i.length;return E((o=o==null?i.map((_,_e)=>_e):[].concat(o)).every(_=>_>=-s&&_<s),()=>`All values in axis param must be in range [-${s}, ${s}) but got axis ${o}`),E(o.every(_=>Ka(_)),()=>`All values in axis param must be integers but got axis ${o}`),o.map(_=>_<0?s+_:_)}function JC(o,i){let s=[],_=[],_e=i!=null&&Array.isArray(i)&&i.length===0,ct=i==null||_e?null:_i(i,o).sort(),Mt=0;for(let Ft=0;Ft<o.length;++Ft){if(ct!=null){if(ct[Mt]===Ft&&o[Ft]!==1)throw new Error(`Can't squeeze axis ${Ft} since its dim '${o[Ft]}' is not 1`);(ct[Mt]==null||ct[Mt]>Ft)&&o[Ft]===1&&(s.push(o[Ft]),_.push(Ft)),ct[Mt]<=Ft&&Mt++}o[Ft]!==1&&(s.push(o[Ft]),_.push(Ft))}return{newShape:s,keptDims:_}}function ew(o,i){return Xm(o,i)}function Xm(o,i){let s=null;if(o==null||o==="float32")s=new Float32Array(i);else if(o==="int32")s=new Int32Array(i);else if(o==="bool")s=new Uint8Array(i);else{if(o!=="string")throw new Error(`Unknown data type ${o}`);s=new Array(i)}return s}function tw(o,i){for(let s=0;s<o.length;s++){let _=o[s];if(isNaN(_)||!isFinite(_))throw Error(`A tensor of type ${i} being uploaded contains ${_}.`)}}function rw(o){return o==="bool"||o==="complex64"||o==="float32"||o==="int32"||o==="string"}function HG(o,i){return!(i==="complex64"||i==="float32"&&o!=="complex64"||i==="int32"&&o!=="float32"&&o!=="complex64"||i==="bool"&&o==="bool")}function Wp(o){if(o==="float32"||o==="int32")return 4;if(o==="complex64")return 8;if(o==="bool")return 1;throw new Error(`Unknown dtype ${o}`)}function ow(o){if(o==null)return 0;let i=0;return o.forEach(s=>i+=s.length),i}function zo(o){return typeof o=="string"||o instanceof String}function N0(o){return typeof o=="boolean"}function T0(o){return typeof o=="number"}function Ei(o){return Array.isArray(o)?Ei(o[0]):o instanceof Float32Array?"float32":o instanceof Int32Array||o instanceof Uint8Array||o instanceof Uint8ClampedArray?"int32":T0(o)?"float32":zo(o)?"string":N0(o)?"bool":"float32"}function qs(o){return!!(o&&o.constructor&&o.call&&o.apply)}function Up(o,i){for(let s=i;s<o;++s)if(o%s==0)return s;return o}function js(o){let i=o.length;if(i<2)return[];let s=new Array(i-1);s[i-2]=o[i-1];for(let _=i-3;_>=0;--_)s[_]=s[_+1]*o[_+1];return s}function _0(o,i,s,_=!1){let _e=new Array;if(i.length===1){let ct=i[0]*(_?2:1);for(let Mt=0;Mt<ct;Mt++)_e[Mt]=s[o+Mt]}else{let ct=i[0],Mt=i.slice(1),Ft=Mt.reduce((Ut,Xt)=>Ut*Xt)*(_?2:1);for(let Ut=0;Ut<ct;Ut++)_e[Ut]=_0(o+Ut*Ft,Mt,s,_)}return _e}function Tu(o,i,s=!1){if(o.length===0)return i[0];let _=o.reduce((_e,ct)=>_e*ct)*(s?2:1);if(_===0)return[];if(_!==i.length)throw new Error(`[${o}] does not match the input size ${i.length}${s?" for a complex tensor":""}.`);return _0(0,o,i,s)}function KG(o,i){if(Array.isArray(o))return o;if(i==="float32")return o instanceof Float32Array?o:new Float32Array(o);if(i==="int32")return o instanceof Int32Array?o:new Int32Array(o);if(i==="bool"||i==="string")return Uint8Array.from(new Int32Array(o));throw new Error(`Unknown dtype ${i}`)}function ml(o,i){let s=Gp(o,i);for(let _=0;_<s.length;_++)s[_]=1;return s}function Gp(o,i){if(i==null||i==="float32"||i==="complex64")return new Float32Array(o);if(i==="int32")return new Int32Array(o);if(i==="bool")return new Uint8Array(o);throw new Error(`Unknown data type ${i}`)}function qG(o,i){let s=o.reduce((_,_e)=>_*_e,1);if(i==null||i==="float32")return Tu(o,new Float32Array(s));if(i==="int32")return Tu(o,new Int32Array(s));if(i==="bool")return Tu(o,new Uint8Array(s));throw new Error(`Unknown data type ${i}`)}function Ct(o){o.forEach(i=>{E(Number.isInteger(i)&&i>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${o}].`)})}function jG(o,i,s){if(i===0)return 0;if(i===1)return o[0];let _=o[o.length-1];for(let _e=0;_e<o.length-1;++_e)_+=s[_e]*o[_e];return _}function XG(o,i,s){if(i===0)return[];if(i===1)return[o];let _=new Array(i);for(let _e=0;_e<_.length-1;++_e)_[_e]=Math.floor(o/s[_e]),o-=_[_e]*s[_e];return _[_.length-1]=o,_}function Eu(o){return o&&o.then&&typeof o.then=="function"}var E0="tfjsflags",dl=class{constructor(o){this.global=o,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=QG,this.populateURLFlags()}setPlatform(o,i){this.platform!=null&&(A().getBool("IS_TEST")||A().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${o}.`)),this.platformName=o,this.platform=i}registerFlag(o,i,s){if(this.flagRegistry[o]={evaluationFn:i,setHook:s},this.urlFlags[o]!=null){let _=this.urlFlags[o];A().getBool("IS_TEST")||A().getBool("PROD")||console.warn(`Setting feature override from URL ${o}: ${_}.`),this.set(o,_)}}async getAsync(o){return o in this.flags||(this.flags[o]=await this.evaluateFlag(o)),this.flags[o]}get(o){if(o in this.flags)return this.flags[o];let i=this.evaluateFlag(o);if(Eu(i))throw new Error(`Flag ${o} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[o]=i,this.flags[o]}getNumber(o){return this.get(o)}getBool(o){return this.get(o)}getString(o){return this.get(o)}getFlags(){return this.flags}get features(){return this.flags}set(o,i){if(this.flagRegistry[o]==null)throw new Error(`Cannot set flag ${o} as it has not been registered.`);this.flags[o]=i,this.flagRegistry[o].setHook!=null&&this.flagRegistry[o].setHook(i)}evaluateFlag(o){if(this.flagRegistry[o]==null)throw new Error(`Cannot evaluate flag '${o}': no evaluation function found.`);return this.flagRegistry[o].evaluationFn()}setFlags(o){this.flags=Object.assign({},o)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(this.global===void 0||this.global.location===void 0||this.global.location.search===void 0)return;let o=this.getQueryParams(this.global.location.search);E0 in o&&o[E0].split(",").forEach(i=>{let[s,_]=i.split(":");this.urlFlags[s]=JG(s,_)})}};function QG(o){let i={};return o.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(s,..._)=>(ZG(i,_[0],_[1]),_.join("="))),i}function ZG(o,i,s){o[decodeURIComponent(i)]=decodeURIComponent(s||"")}function JG(o,i){let s=i.toLowerCase();return s==="true"||s==="false"?s==="true":""+ +s===s?+s:i}function A(){return nw}var nw=null,sw;function $0(o){nw=o}function aw(){if(sw==null){let o;if(typeof window<"u")o=window;else if(typeof global<"u")o=global;else if(typeof process<"u")o=process;else{if(typeof self>"u")throw new Error("Could not find a global object");o=self}sw=o}return sw}function e4(){let o=aw();return o._tfGlobals==null&&(o._tfGlobals=new Map),o._tfGlobals}function fl(o,i){let s=e4();if(s.has(o))return s.get(o);{let _=i();return s.set(o,_),s.get(o)}}var Xs="Abs",Vo="Acos",Wo="Acosh",uo="Add",Uo="AddN",Go="All",Ho="Any",Ys="ArgMax",Qs="ArgMin",Ko="Asin",qo="Asinh",jo="Atan",Xo="Atanh",Yo="Atan2",Qo="AvgPool",$i="AvgPoolGrad",Zs="AvgPool3D",Ri="AvgPool3DGrad",Zo="BatchMatMul",Js="BatchToSpaceND",Jo="Bincount",qa="BitwiseAnd",qce="BroadcastTo",ea="BroadcastArgs",yo="Cast",en="Ceil",bo="ClipByValue",Di="Complex",Ai="ComplexAbs",ta="Concat",tn="Conv2D",Fi="Conv2DBackpropFilter",rn="Conv2DBackpropInput",on="Conv3D",ja="Conv3DBackpropFilterV2",nn="Conv3DBackpropInputV2",sn="Cos",an="Cosh",un="Cumprod",pn="Cumsum",cn="CropAndResize",ra="DenseBincount",ln="DepthToSpace",mn="DepthwiseConv2dNative",Pi="DepthwiseConv2dNativeBackpropFilter",Oi="DepthwiseConv2dNativeBackpropInput",oa="Diag",dn="Dilation2D",Mi="Dilation2DBackpropInput",Li="Dilation2DBackpropFilter",$u="Draw",fn="RealDiv",Bi="Einsum",hn="Elu",Xa="EluGrad",gn="Erf",xn="Equal",yn="Exp",na="ExpandDims",bn="Expm1",zi="FFT",sa="Fill",Cn="FlipLeftRight",wn="Floor",Sn="FloorDiv",In="FusedBatchNorm",aa="GatherV2",vn="GatherNd",kn="Greater",Nn="GreaterEqual",Co="Identity",Vi="IFFT",Wi="Imag",Tn="IsFinite",_n="IsInf",En="IsNan",$n="LeakyRelu",Rn="Less",Dn="LessEqual",An="LinSpace",Fn="Log",Pn="Log1p",On="LogicalAnd",Mn="LogicalNot",Ln="LogicalOr",R0="LogicalXor",jce="LogSoftmax",Xce="LowerBound",Bn="LRN",Ya="LRNGrad",Yce="MatrixBandPart",zn="Max",Vn="Maximum",Wn="MaxPool",Ui="MaxPoolGrad",ia="MaxPool3D",Gi="MaxPool3DGrad",ua="MaxPoolWithArgmax",Un="Mean",Gn="Min",Hn="Minimum",Kn="MirrorPad",qn="Mod",jn="Multinomial",Xn="Multiply",pa="Neg",Yn="NotEqual",Qn="NonMaxSuppressionV3",Qa="NonMaxSuppressionV4",Zn="NonMaxSuppressionV5",ca="OnesLike",Jn="OneHot",la="Pack",es="PadV2",Qce="Pool",ts="Pow",rs="Prelu",os="Prod",Hp="RaggedGather",Kp="RaggedRange",qp="RaggedTensorToTensor",ma="Range",Hi="Real",ns="Reciprocal",ss="Relu",da="Reshape",as="ResizeNearestNeighbor",Za="ResizeNearestNeighborGrad",is="ResizeBilinear",Ja="ResizeBilinearGrad",us="Relu6",ps="Reverse",cs="Round",ls="Rsqrt",ms="ScatterNd",ds="TensorScatterUpdate",fs="SearchSorted",fa="Select",hs="Selu",ha="Slice",gs="Sin",xs="Sinh",ys="Sign",bs="Sigmoid",Cs="Softplus",ws="Sqrt",Ss="Sum",ga="SpaceToBatchND",xa="SplitV",Is="Softmax",Ki="SparseFillEmptyRows",ei="SparseReshape",ya="SparseSegmentMean",ba="SparseSegmentSum",vs="SparseToDense",ks="SquaredDifference",qi="Square",Ru="StaticRegexReplace",Ns="StridedSlice",Ca="StringNGrams",ji="StringSplit",Xi="StringToHashBucketFast",Ts="Sub",_s="Tan",Es="Tanh",po="Tile",$s="TopK",Rs="Transform",co="Transpose",Yi="Unique",wa="Unpack",Qi="UnsortedSegmentSum",Zce="UpperBound",Sa="ZerosLike",wo="Step",Du="FromPixels",Ds="RotateWithOffset",So="_FusedMatMul",Io="FusedConv2D",vo="FusedDepthwiseConv2D";function Ia(...o){A().getBool("IS_TEST")||A().getBool("PROD")||console.warn(...o)}function t4(...o){A().getBool("IS_TEST")||A().getBool("PROD")||console.log(...o)}var jp=fl("kernelRegistry",()=>new Map),hl=fl("gradRegistry",()=>new Map);function Xp(o,i){let s=uw(o,i);return jp.get(s)}function iw(o){return hl.get(o)}function Ym(o){let i=jp.entries(),s=[];for(;;){let{done:_,value:_e}=i.next();if(_)break;let[ct,Mt]=_e,[Ft]=ct.split("_");Ft===o&&s.push(Mt)}return s}function ti(o){let{kernelName:i,backendName:s}=o,_=uw(i,s);jp.has(_)&&Ia(`The kernel '${i}' for backend '${s}' is already registered`),jp.set(_,o)}function ole(o){let{kernelName:i}=o;hl.has(i)&&A().getBool("DEBUG")&&Ia(`Overriding the gradient for '${i}'`),hl.set(i,o)}function nle(o,i){let s=uw(o,i);if(!jp.has(s))throw new Error(`The kernel '${o}' for backend '${i}' is not registered`);jp.delete(s)}function sle(o){if(!hl.has(o))throw new Error(`The gradient '${o}' for backend is not registered`);hl.delete(o)}function ale(o,i){Ym(o).forEach(s=>{ti(Object.assign({},s,{backendName:i}))})}function uw(o,i){return`${i}_${o}`}var y={};function Qm(o){return o instanceof Float32Array||o instanceof Int32Array||o instanceof Uint8Array||o instanceof Uint8ClampedArray}qe(y,{arraysEqual:()=>br,arraysEqualWithNull:()=>ZC,assert:()=>E,assertNonNegativeIntegerDimensions:()=>Ct,assertNonNull:()=>io,assertShapesMatch:()=>xt$1,bytesFromStringArray:()=>ow,bytesPerElement:()=>Wp,checkConversionForErrors:()=>tw,clamp:()=>Vp,computeStrides:()=>js,convertBackendValuesAndArrayBuffer:()=>KG,createScalarValue:()=>u4,createShuffledIndices:()=>WG,decodeString:()=>Jp,distSquared:()=>LG,encodeString:()=>Ji,fetch:()=>c4,fingerPrint64:()=>i4,flatten:()=>Fs,getArrayFromDType:()=>Xm,getTypedArrayFromDType:()=>ew,hasEncodingLoss:()=>HG,hexToLong:()=>gl,indexToLoc:()=>XG,inferDtype:()=>Ei,inferFromImplicitShape:()=>GG,isBoolean:()=>N0,isFunction:()=>qs,isInt:()=>Ka,isNumber:()=>T0,isPromise:()=>Eu,isScalarShape:()=>BG,isString:()=>zo,isTypedArray:()=>Pt$2,isValidDtype:()=>rw,locToIndex:()=>jG,makeOnesTypedArray:()=>ml,makeZerosNestedTypedArray:()=>qG,makeZerosTypedArray:()=>Gp,nearestDivisor:()=>Up,nearestLargerEven:()=>PG,now:()=>Mu,parseAxisParam:()=>_i,randUniform:()=>MG,repeatedTry:()=>UG,rightPad:()=>_u,shuffle:()=>k0,shuffleCombo:()=>FG,sizeFromShape:()=>ze,sizeToSquarishShape:()=>VG,squeezeShape:()=>JC,sum:()=>OG,swap:()=>jm,tanh:()=>zG,toNestedArray:()=>Tu,toTypedArray:()=>Zp});var mw=zp(U0()),Ou=mw.default||mw;function gl(o){return Ou.fromString(o,!0,16)}var H0=gl("c3a5c85c97cb3127"),Pu=gl("b492b66fbe98f273"),Cr=gl("9ae16a3b2f90404f");function lw(o){return o.xor(o.shru(47))}function K0(o,i,s){let _=o.slice(i,i+s);return Ou.fromBytes(Array.from(_),!0,!0)}function wt$1(o,i){return K0(o,i,8)}function G0(o,i){return K0(o,i,4)}function Yt(o,i){return i===0?o:o.shru(i).or(o.shl(64-i))}function Zi(o,i,s=gl("9ddfea08eb382d69")){let _=o.xor(i).mul(s);_=_.xor(_.shru(47));let _e=i.xor(_).mul(s);return _e=_e.xor(_e.shru(47)),_e=_e.mul(s),_e}function o4(o,i,s,_,_e,ct){_e=_e.add(o),ct=Yt(ct.add(_e).add(_),21);let Mt=_e;return _e=(_e=_e.add(i)).add(s),ct=ct.add(Yt(_e,44)),[_e.add(_),ct.add(Mt)]}function Jm(o,i,s,_){return o4(wt$1(o,i),wt$1(o,i+8),wt$1(o,i+16),wt$1(o,i+24),s,_)}function n4(o,i=o.length){if(i>=8){let s=Cr.add(2*i),_=wt$1(o,0).add(Cr),_e=wt$1(o,i-8);return Zi(Yt(_e,37).mul(s).add(_),Yt(_,25).add(_e).mul(s),s)}if(i>=4){let s=Cr.add(2*i);return Zi(G0(o,0).shl(3).add(i),G0(o,i-4),s)}if(i>0){let s=o[0]+(o[i>>1]<<8),_=i+(o[i-1]<<2);return lw(Cr.mul(s).xor(H0.mul(_))).mul(Cr)}return Cr}function s4(o,i=o.length){let s=Cr.add(2*i),_=wt$1(o,0).mul(Pu),_e=wt$1(o,8),ct=wt$1(o,i-8).mul(s),Mt=wt$1(o,i-16).mul(Cr);return Zi(Yt(_.add(_e),43).add(Yt(ct,30)).add(Mt),_.add(Yt(_e.add(Cr),18)).add(ct),s)}function a4(o,i=o.length){let s=Cr.add(2*i),_=wt$1(o,0).mul(Cr),_e=wt$1(o,8),ct=wt$1(o,i-8).mul(s),Mt=wt$1(o,i-16).mul(Cr),Ft=Yt(_.add(_e),43).add(Yt(ct,30)).add(Mt),Ut=Zi(Ft,_.add(Yt(_e.add(Cr),18)).add(ct),s),Xt=wt$1(o,16).mul(s),Kt=wt$1(o,24),nr=Ft.add(wt$1(o,i-32)).mul(s),rr=Ut.add(wt$1(o,i-24)).mul(s);return Zi(Yt(Xt.add(Kt),43).add(Yt(nr,30)).add(rr),Xt.add(Yt(Kt.add(_),18)).add(nr),s)}function i4(o,i=o.length){let s=Ou.fromNumber(81,!0);if(i<=32)return i<=16?n4(o,i):s4(o,i);if(i<=64)return a4(o,i);let _=s,_e=s.mul(Pu).add(113),ct=lw(_e.mul(Cr).add(113)).mul(Cr),Mt=[Ou.UZERO,Ou.UZERO],Ft=[Ou.UZERO,Ou.UZERO];_=_.mul(Cr).add(wt$1(o,0));let Ut=0,Xt=64*(i-1>>6),Kt=Xt+(i-1&63)-63;do _=Yt(_.add(_e).add(Mt[0]).add(wt$1(o,Ut+8)),37).mul(Pu),_e=Yt(_e.add(Mt[1]).add(wt$1(o,Ut+48)),42).mul(Pu),_=_.xor(Ft[1]),_e=_e.add(Mt[0]).add(wt$1(o,Ut+40)),ct=Yt(ct.add(Ft[0]),33).mul(Pu),Mt=Jm(o,Ut,Mt[1].mul(Pu),_.add(Ft[0])),Ft=Jm(o,Ut+32,ct.add(Ft[1]),_e.add(wt$1(o,Ut+16))),[ct,_]=[_,ct],Ut+=64;while(Ut!==Xt);let nr=Pu.add(ct.and(255).shl(1));return Ut=Kt,Ft[0]=Ft[0].add(i-1&63),Mt[0]=Mt[0].add(Ft[0]),Ft[0]=Ft[0].add(Mt[0]),_=Yt(_.add(_e).add(Mt[0]).add(wt$1(o,Ut+8)),37).mul(nr),_e=Yt(_e.add(Mt[1]).add(wt$1(o,Ut+48)),42).mul(nr),_=_.xor(Ft[1].mul(9)),_e=_e.add(Mt[0].mul(9).add(wt$1(o,Ut+40))),ct=Yt(ct.add(Ft[0]),33).mul(nr),Mt=Jm(o,Ut,Mt[1].mul(nr),_.add(Ft[0])),Ft=Jm(o,Ut+32,ct.add(Ft[1]),_e.add(wt$1(o,Ut+16))),[ct,_]=[_,ct],Zi(Zi(Mt[0],Ft[0],nr).add(lw(_e).mul(H0)).add(ct),Zi(Mt[1],Ft[1],nr).add(_),nr)}function u4(o,i){return i==="string"?Ji(o):Zp([o],i)}function p4(o,i){return o instanceof Float32Array&&i==="float32"||o instanceof Int32Array&&i==="int32"||o instanceof Uint8Array&&i==="bool"}function Zp(o,i){if(i==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(o)&&(o=Fs(o)),A().getBool("DEBUG")&&tw(o,i),p4(o,i))return o;if(i==null||i==="float32"||i==="complex64")return new Float32Array(o);if(i==="int32")return new Int32Array(o);if(i==="bool"){let s=new Uint8Array(o.length);for(let _=0;_<s.length;++_)Math.round(o[_])!==0&&(s[_]=1);return s}throw new Error(`Unknown data type ${i}`)}function Mu(){return A().platform.now()}function c4(o,i){return A().platform.fetch(o,i)}function Ji(o,i="utf-8"){return i=i||"utf-8",A().platform.encode(o,i)}function Jp(o,i="utf-8"){return i=i||"utf-8",A().platform.decode(o,i)}function Pt$2(o){return A().platform.isTypedArray!=null?A().platform.isTypedArray(o):Qm(o)}function Fs(o,i=[],s=!1){if(i==null&&(i=[]),typeof o=="boolean"||typeof o=="number"||typeof o=="string"||Eu(o)||o==null||Pt$2(o)&&s)i.push(o);else if(Array.isArray(o)||Pt$2(o))for(let _=0;_<o.length;++_)Fs(o[_],i,s);else{let _=-1;for(let _e of Object.keys(o))/^([1-9]+[0-9]*|0)$/.test(_e)&&(_=Math.max(_,Number(_e)));for(let _e=0;_e<=_;_e++)Fs(o[_e],i,s)}return i}var ed=class{constructor(o,i){this.backendTimer=o,this.logger=i,i==null&&(this.logger=new dw)}profileKernel(o,i,s){let _,_e,ct=()=>{_=s()},Mt=Mu();if(this.backendTimer.timerAvailable())_e=this.backendTimer.time(ct);else{ct();for(let Ft of _)Ft.dataSync();_e=Promise.resolve({kernelMs:Mu()-Mt})}if(A().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let Ft=0;Ft<_.length;Ft++){let Ut=_[Ft];Ut.data().then(Xt=>{l4(Xt,Ut.dtype,o)})}return{kernelName:o,outputs:_,inputs:i,timeMs:_e.then(Ft=>Ft.kernelMs),extraInfo:_e.then(Ft=>Ft.getExtraProfileInfo!=null?Ft.getExtraProfileInfo():"")}}logKernelProfile(o){let{kernelName:i,outputs:s,timeMs:_,inputs:_e,extraInfo:ct}=o;s.forEach(Mt=>{Promise.all([Mt.data(),_,ct]).then(Ft=>{this.logger.logKernelProfile(i,Mt,Ft[0],Ft[1],_e,Ft[2])})})}};function l4(o,i,s){if(i!=="float32")return!1;for(let _=0;_<o.length;_++){let _e=o[_];if(isNaN(_e)||!isFinite(_e))return console.warn(`Found ${_e} in the result of '${s}'`),!0}return!1}var dw=class{logKernelProfile(o,i,s,_,_e,ct){let Mt=typeof _=="number"?_u(`${_}ms`,9):_.error,Ft=_u(o,25),Ut=i.rank,Xt=i.size,Kt=_u(i.shape.toString(),14),nr="";for(let rr in _e){let or=_e[rr];if(or!=null){let hr=or.shape||i.shape,fr=hr.length;nr+=`${rr}: ${fr}D ${fr>0?hr:""} `}}console.log(`%c${Ft}	%c${Mt}	%c${Ut}D ${Kt}	%c${Xt}	%c${nr}	%c${ct}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}};function q0(o,i,s){let _={},_e={};for(let Ut=0;Ut<i.length;Ut++)_[i[Ut].id]=!0;for(let Ut=0;Ut<o.length;Ut++){let Xt=o[Ut],Kt=Xt.inputs;for(let nr in Kt){let rr=Kt[nr],or=!1;for(let hr=0;hr<i.length;hr++)if(_[rr.id]){Xt.outputs.forEach(fr=>_[fr.id]=!0),or=!0,_e[Xt.id]=!0;break}if(or)break}}let ct={};ct[s.id]=!0;let Mt={};for(let Ut=o.length-1;Ut>=0;Ut--){let Xt=o[Ut],Kt=Xt.inputs;for(let nr=0;nr<Xt.outputs.length;nr++)if(ct[Xt.outputs[nr].id]){for(let rr in Kt)ct[Kt[rr].id]=!0,Mt[Xt.id]=!0;break}}let Ft=[];for(let Ut=0;Ut<o.length;Ut++){let Xt=o[Ut];if(_e[Xt.id]&&Mt[Xt.id]){let Kt={};for(let rr in Xt.inputs){let or=Xt.inputs[rr];_[or.id]&&(Kt[rr]=or)}let nr=Object.assign({},Xt);nr.inputs=Kt,nr.outputs=Xt.outputs,Ft.push(nr)}}return Ft}function j0(o,i,s,_){for(let _e=i.length-1;_e>=0;_e--){let ct=i[_e],Mt=[];if(ct.outputs.forEach(Ut=>{let Xt=o[Ut.id];Xt!=null?Mt.push(Xt):Mt.push(null)}),ct.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${ct.kernelName}.`);let Ft=ct.gradient(Mt);for(let Ut in ct.inputs){if(!(Ut in Ft))throw new Error(`Cannot backprop through input ${Ut}. Available gradients found: ${Object.keys(Ft)}.`);let Xt=s(()=>Ft[Ut]());if(Xt.dtype!=="float32")throw new Error(`Error in gradient for op ${ct.kernelName}. The gradient of input ${Ut} must have 'float32' dtype, but has '${Xt.dtype}'`);let Kt=ct.inputs[Ut];if(!br(Xt.shape,Kt.shape))throw new Error(`Error in gradient for op ${ct.kernelName}. The gradient of input '${Ut}' has shape '${Xt.shape}', which does not match the shape of the input '${Kt.shape}'`);if(o[Kt.id]==null)o[Kt.id]=Xt;else{let nr=o[Kt.id];o[Kt.id]=_(nr,Xt),nr.dispose()}}}}var X0=20,xl=3,fw=7;function Y0(o,i,s,_){let _e=js(i),ct=m4(o,i,s,_e),Mt=i.length,Ft=td(o,i,s,_e,ct),Ut=["Tensor"];return _&&(Ut.push(`  dtype: ${s}`),Ut.push(`  rank: ${Mt}`),Ut.push(`  shape: [${i}]`),Ut.push("  values:")),Ut.push(Ft.map(Xt=>"    "+Xt).join(`
`)),Ut.join(`
`)}function m4(o,i,s,_){let _e=ze(i),ct=_[_.length-1],Mt=new Array(ct).fill(0),Ft=i.length,Ut=s==="complex64"?bl(o):o;if(Ft>1)for(let Xt=0;Xt<_e/ct;Xt++){let Kt=Xt*ct;for(let nr=0;nr<ct;nr++)Mt[nr]=Math.max(Mt[nr],yl(Ut[Kt+nr],0,s).length)}return Mt}function yl(o,i,s){let _;return _=Array.isArray(o)?`${parseFloat(o[0].toFixed(fw))} + ${parseFloat(o[1].toFixed(fw))}j`:zo(o)?`'${o}'`:s==="bool"?Q0(o):parseFloat(o.toFixed(fw)).toString(),_u(_,i)}function Q0(o){return o===0?"false":"true"}function td(o,i,s,_,_e,ct=!0){let Mt=s==="complex64"?2:1,Ft=i[0],Ut=i.length;if(Ut===0)return s==="complex64"?[yl(bl(o)[0],0,s)]:s==="bool"?[Q0(o[0])]:[o[0].toString()];if(Ut===1){if(Ft>X0){let fr=xl*Mt,yr=Array.from(o.slice(0,fr)),Lr=Array.from(o.slice((Ft-xl)*Mt,Ft*Mt));return s==="complex64"&&(yr=bl(yr),Lr=bl(Lr)),["["+yr.map((Br,Vr)=>yl(Br,_e[Vr],s)).join(", ")+", ..., "+Lr.map((Br,Vr)=>yl(Br,_e[Ft-xl+Vr],s)).join(", ")+"]"]}return["["+(s==="complex64"?bl(o):Array.from(o)).map((fr,yr)=>yl(fr,_e[yr],s)).join(", ")+"]"]}let Xt=i.slice(1),Kt=_.slice(1),nr=_[0]*Mt,rr=[];if(Ft>X0){for(let fr=0;fr<xl;fr++){let yr=fr*nr,Lr=yr+nr;rr.push(...td(o.slice(yr,Lr),Xt,s,Kt,_e,!1))}rr.push("...");for(let fr=Ft-xl;fr<Ft;fr++){let yr=fr*nr,Lr=yr+nr;rr.push(...td(o.slice(yr,Lr),Xt,s,Kt,_e,fr===Ft-1))}}else for(let fr=0;fr<Ft;fr++){let yr=fr*nr,Lr=yr+nr;rr.push(...td(o.slice(yr,Lr),Xt,s,Kt,_e,fr===Ft-1))}let or=Ut===2?",":"";rr[0]="["+(Ft>0?rr[0]+or:"");for(let fr=1;fr<rr.length-1;fr++)rr[fr]=" "+rr[fr]+or;let hr=`,
`;for(let fr=2;fr<Ut;fr++)hr+=`
`;return rr[rr.length-1]=" "+rr[rr.length-1]+"]"+(ct?"":hr),rr}function bl(o){let i=[];for(let s=0;s<o.length;s+=2)i.push([o[s],o[s+1]]);return i}var tt=class{constructor(o,i,s){if(this.dtype=i,this.shape=o.slice(),this.size=ze(o),s!=null){let _=s.length;E(_===this.size,()=>`Length of values '${_}' does not match the size inferred by the shape '${this.size}'.`)}if(i==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=s||Xm(i,this.size),this.strides=js(o)}set(o,...i){i.length===0&&(i=[0]),E(i.length===this.rank,()=>`The number of provided coordinates (${i.length}) must match the rank (${this.rank})`);let s=this.locToIndex(i);this.values[s]=o}get(...o){o.length===0&&(o=[0]);let i=0;for(let _ of o){if(_<0||_>=this.shape[i]){let _e=`Requested out of range element at ${o}.   Buffer shape=${this.shape}`;throw new Error(_e)}i++}let s=o[o.length-1];for(let _=0;_<o.length-1;++_)s+=this.strides[_]*o[_];return this.values[s]}locToIndex(o){if(this.rank===0)return 0;if(this.rank===1)return o[0];let i=o[o.length-1];for(let s=0;s<o.length-1;++s)i+=this.strides[s]*o[s];return i}indexToLoc(o){if(this.rank===0)return[];if(this.rank===1)return[o];let i=new Array(this.shape.length);for(let s=0;s<i.length-1;++s)i[s]=Math.floor(o/this.strides[s]),o-=i[s]*this.strides[s];return i[i.length-1]=o,i}get rank(){return this.shape.length}toTensor(){return Ps().makeTensor(this.values,this.shape,this.dtype)}},Ps=null,ec=null;function Z0(o){Ps=o}function J0(o){ec=o}var mt=class{constructor(o,i,s,_){this.kept=!1,this.isDisposedInternal=!1,this.shape=o.slice(),this.dtype=i||"float32",this.size=ze(o),this.strides=js(o),this.dataId=s,this.id=_,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){let o=await this.data();return ec.buffer(this.shape,this.dtype,o)}bufferSync(){return ec.buffer(this.shape,this.dtype,this.dataSync())}async array(){let o=await this.data();return Tu(this.shape,o,this.dtype==="complex64")}arraySync(){return Tu(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();let o=Ps().read(this.dataId);if(this.dtype==="string"){let i=await o;try{return i.map(s=>Jp(s))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return o}dataToGPU(o){return this.throwIfDisposed(),Ps().readToGPU(this.dataId,o)}dataSync(){this.throwIfDisposed();let o=Ps().readSync(this.dataId);if(this.dtype==="string")try{return o.map(i=>Jp(i))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return o}async bytes(){this.throwIfDisposed();let o=await Ps().read(this.dataId);return this.dtype==="string"?o:new Uint8Array(o.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),Ps().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(o=!1){return ec.print(this,o)}clone(){return this.throwIfDisposed(),ec.clone(this)}toString(o=!1){return Y0(this.dataSync(),this.shape,this.dtype,o)}cast(o){return this.throwIfDisposed(),ec.cast(this,o)}variable(o=!0,i,s){return this.throwIfDisposed(),Ps().makeVariable(this,o,i,s)}};function hw(){return fl("Tensor",()=>mt)}Object.defineProperty(mt,Symbol.hasInstance,{value:o=>!!o&&o.data!=null&&o.dataSync!=null&&o.throwIfDisposed!=null}),hw();var ri=class extends mt{constructor(o,i,s,_){super(o.shape,o.dtype,o.dataId,_),this.trainable=i,this.name=s}assign(o){if(o.dtype!==this.dtype)throw new Error(`dtype of the new value (${o.dtype}) and previous value (${this.dtype}) must match`);if(!br(o.shape,this.shape))throw new Error(`shape of the new value (${o.shape}) and previous value (${this.shape}) must match`);Ps().disposeTensor(this),this.dataId=o.dataId,Ps().incRef(this,null)}dispose(){Ps().disposeVariable(this),this.isDisposedInternal=!0}};Object.defineProperty(ri,Symbol.hasInstance,{value:o=>o instanceof mt&&o.assign!=null&&o.assign instanceof Function});var rk={},gw,r15,xw,yw,bw,Cw;qe(rk,{assertTypesMatch:()=>ww,getTensorsInContainer:()=>Cl,isTensorInList:()=>h4,makeTypesMatch:()=>Oe}),r15=gw||(gw={}),r15.R0="R0",r15.R1="R1",r15.R2="R2",r15.R3="R3",r15.R4="R4",r15.R5="R5",r15.R6="R6",function(o){o.float32="float32",o.int32="int32",o.bool="int32",o.complex64="complex64"}(xw||(xw={})),function(o){o.float32="float32",o.int32="int32",o.bool="bool",o.complex64="complex64"}(yw||(yw={})),function(o){o.float32="float32",o.int32="float32",o.bool="float32",o.complex64="complex64"}(bw||(bw={})),function(o){o.float32="complex64",o.int32="complex64",o.bool="complex64",o.complex64="complex64"}(Cw||(Cw={}));var f4={float32:bw,int32:xw,bool:yw,complex64:Cw};function dt(o,i){if(o==="string"||i==="string"){if(o==="string"&&i==="string")return"string";throw new Error(`Can not upcast ${o} with ${i}`)}return f4[o][i]}function oi(o){return dt(o,"int32")}function rd(o){return o!=null&&typeof o=="object"&&"texture"in o&&o.texture instanceof WebGLTexture}function od(o){return typeof GPUBuffer<"u"&&o!=null&&typeof o=="object"&&"buffer"in o&&o.buffer instanceof GPUBuffer}function Oe(o,i){if(o.dtype===i.dtype)return[o,i];let s=dt(o.dtype,i.dtype);return[o.cast(s),i.cast(s)]}function ww(o,i){E(o.dtype===i.dtype,()=>`The dtypes of the first(${o.dtype}) and second(${i.dtype}) input must match`)}function h4(o,i){return i.some(s=>s.id===o.id)}function Cl(o){let i=[];return tk(o,i,new Set),i}function tk(o,i,s){if(o==null)return;if(o instanceof mt)return void i.push(o);if(!g4(o))return;let _=o;for(let _e in _){let ct=_[_e];s.has(ct)||(s.add(ct),tk(ct,i,s))}}function g4(o){return Array.isArray(o)||typeof o=="object"}function Sw(o){return o.kernelName!=null}var nd=class{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(o=>o.name)))}}}dispose(){for(let o in this.registeredVariables)this.registeredVariables[o].dispose()}},wl=class Rme{constructor(i){this.ENV=i,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new nd}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;let i=this.getSortedBackends();for(let s=0;s<i.length;s++){let _=i[s];if(await this.initializeBackend(_).success)return void await this.setBackend(_)}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){let{name:i,asyncInit:s}=this.initializeBackendsAndReturnBest();if(s)throw new Error(`The highest priority backend '${i}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(i)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(i){if(!(i in this.registry)){if(!(i in this.registryFactory))return null;{let{asyncInit:s}=this.initializeBackend(i);if(s)return null}}return this.registry[i]}findBackendFactory(i){return i in this.registryFactory?this.registryFactory[i].factory:null}registerBackend(i,s,_=1){return i in this.registryFactory?(Ia(`${i} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[i]={factory:s,priority:_},!0)}async setBackend(i){if(this.registryFactory[i]==null)throw new Error(`Backend name '${i}' not found in registry`);if(this.backendName=i,this.registry[i]==null){this.backendInstance=null;let{success:s,asyncInit:_}=this.initializeBackend(i);if(!(_?await s:s))return!1}return this.backendInstance=this.registry[i],this.setupRegisteredKernels(),this.profiler=new ed(this.backendInstance),!0}setupRegisteredKernels(){Ym(this.backendName).forEach(i=>{i.setupFunc!=null&&i.setupFunc(this.backendInstance)})}disposeRegisteredKernels(i){Ym(i).forEach(s=>{s.disposeFunc!=null&&s.disposeFunc(this.registry[i])})}initializeBackend(i){let s=this.registryFactory[i];if(s==null)throw new Error(`Cannot initialize backend ${i}, no registration found.`);try{let _=s.factory();if(!_||_ instanceof ao||typeof _.then!="function")return this.registry[i]=_,{success:!0,asyncInit:!1};{let _e=++this.pendingBackendInitId,ct=_.then(Mt=>!(_e<this.pendingBackendInitId)&&(this.registry[i]=Mt,this.pendingBackendInit=null,!0)).catch(Mt=>(_e<this.pendingBackendInitId||(this.pendingBackendInit=null,Ia(`Initialization of backend ${i} failed`),Ia(Mt.stack||Mt.message)),!1));return this.pendingBackendInit=ct,{success:ct,asyncInit:!0}}}catch(_){return Ia(`Initialization of backend ${i} failed`),Ia(_.stack||_.message),{success:!1,asyncInit:!1}}}removeBackend(i){if(!(i in this.registryFactory))throw new Error(`${i} backend not found in registry`);this.backendName===i&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,i in this.registry&&(this.disposeRegisteredKernels(i),this.registry[i].dispose(),delete this.registry[i]),delete this.registryFactory[i],this.backendName===i&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((i,s)=>this.registryFactory[s].priority-this.registryFactory[i].priority)}initializeBackendsAndReturnBest(){let i=this.getSortedBackends();for(let s=0;s<i.length;s++){let _=i[s],{success:_e,asyncInit:ct}=this.initializeBackend(_);if(ct||_e)return{name:_,asyncInit:ct}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(i,s){let _=this.state.tensorInfo.get(s),_e=_.backend,ct=this.readSync(s),Mt=_e.refCount(s);_e.disposeData(s,!0),_.backend=i,i.move(s,ct,_.shape,_.dtype,Mt),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(i,s){let _,_e=null;if(s==null){if(typeof i!="function")throw new Error("Please provide a function to tidy()");s=i}else{if(typeof i!="string"&&!(i instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof s!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");_e=i}return this.scopedRun(()=>this.startScope(_e),()=>this.endScope(_),()=>(_=s(),_ instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),_))}scopedRun(i,s,_){i();try{let _e=_();return s(),_e}catch(_e){throw s(),_e}}nextTensorId(){return Rme.nextTensorId++}nextVariableId(){return Rme.nextVariableId++}clone(i){let s=T$1.runKernel(Co,{x:i}),_={x:i};return this.addTapeNode(this.state.activeScope.name,_,[s],_e=>({x:()=>{let ct={x:_e},Mt={dtype:"float32"};return T$1.runKernel(yo,ct,Mt)}}),[],{}),s}runKernel(i,s,_){if(this.backendName==null&&this.backend,Xp(i,this.backendName)==null)throw new Error(`Kernel '${i}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:i,inputs:s,attrs:_})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(i,s,_){let _e=this.backend.numDataIds(),ct=0;_.forEach(Ut=>{ct+=Ut.dtype==="complex64"?3:1});let Mt=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],Ft=_e-s-ct-Mt;if(Ft>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${Ft} data ids) after running '${i}'`)}runKernelFunc(i){let s,_,_e=[],ct=this.isTapeOn(),Mt=this.state.numBytes,Ft=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),this.backendName==null&&this.backend;let Ut,Xt=Sw(i)?i.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(Sw(i)){let{kernelName:hr,inputs:fr,attrs:yr}=i;this.backendName==null&&this.backend;let Lr=Xp(hr,this.backendName);E(Lr!=null,()=>`Cannot find registered kernel '${hr}' for backend '${this.backendName}'`),_=()=>{let Br=this.backend.numDataIds();Ut=Lr.kernelFunc({inputs:fr,attrs:yr,backend:this.backend});let Vr=Array.isArray(Ut)?Ut:[Ut];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(hr,Br,Vr);let Wr=Vr.map(ro=>ro.rank!=null?ro:this.makeTensorFromTensorInfo(ro));if(ct){let ro=this.getTensorsForGradient(hr,fr,Wr);_e=this.saveTensorsForBackwardMode(ro)}return Wr}}else{let{forwardFunc:hr}=i,fr=yr=>{ct&&(_e=yr.map(Lr=>this.keep(this.clone(Lr))))};_=()=>{let yr=this.backend.numDataIds();Ut=this.tidy(()=>hr(this.backend,fr));let Lr=Array.isArray(Ut)?Ut:[Ut];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(Xt,yr,Lr),Lr}}let Kt,{inputs:nr,attrs:rr}=i,or=Sw(i)?null:i.backwardsFunc;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{this.ENV.getBool("DEBUG")||this.state.profiling?(Kt=this.profiler.profileKernel(Xt,nr,()=>_()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(Kt),s=Kt.outputs):s=_()}),ct&&this.addTapeNode(Xt,nr,s,or,_e,rr),this.state.profiling&&this.state.activeProfile.kernels.push({name:Xt,bytesAdded:this.state.numBytes-Mt,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-Ft,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(nr).map(hr=>nr[hr]!=null?nr[hr].shape:null),outputShapes:s.map(hr=>hr.shape),kernelTimeMs:Kt.timeMs,extraInfo:Kt.extraInfo}),Array.isArray(Ut)?s:s[0]}saveTensorsForBackwardMode(i){return i.map(s=>this.keep(this.clone(s)))}getTensorsForGradient(i,s,_){let _e=iw(i);if(_e!=null){let ct,Mt=_e.inputsToSave||[],Ft=_e.outputsToSave||[];_e.saveAllInputs?(E(Array.isArray(s),()=>"saveAllInputs is true, expected inputs to be an array."),ct=Object.keys(s).map(Xt=>s[Xt])):ct=Mt.map(Xt=>s[Xt]);let Ut=_.filter((Xt,Kt)=>Ft[Kt]);return ct.concat(Ut)}return[]}makeTensor(i,s,_,_e){if(i==null)throw new Error("Values passed to engine.makeTensor() are null");_=_||"float32",_e=_e||this.backend;let ct=i;_==="string"&&zo(i[0])&&(ct=i.map(Ut=>Ji(Ut)));let Mt=_e.write(ct,s,_),Ft=new mt(s,_,Mt,this.nextTensorId());if(this.trackTensor(Ft,_e),_==="string"){let Ut=this.state.tensorInfo.get(Mt),Xt=ow(ct);this.state.numBytes+=Xt-Ut.bytes,Ut.bytes=Xt}return Ft}makeTensorFromDataId(i,s,_,_e){let ct={dataId:i,shape:s,dtype:_=_||"float32"};return this.makeTensorFromTensorInfo(ct,_e)}makeTensorFromTensorInfo(i,s){let{dataId:_,shape:_e,dtype:ct}=i,Mt=new mt(_e,ct,_,this.nextTensorId());return this.trackTensor(Mt,s),Mt}makeVariable(i,s=!0,_,_e){_=_||this.nextVariableId().toString(),_e!=null&&_e!==i.dtype&&(i=i.cast(_e));let ct=new ri(i,s,_,this.nextTensorId());if(this.state.registeredVariables[ct.name]!=null)throw new Error(`Variable with name ${ct.name} was already registered`);return this.state.registeredVariables[ct.name]=ct,this.incRef(ct,this.backend),ct}trackTensor(i,s){this.state.numTensors++,i.dtype==="string"&&this.state.numStringTensors++;let _=0;i.dtype!=="complex64"&&i.dtype!=="string"&&(_=i.size*Wp(i.dtype)),this.state.numBytes+=_,this.state.tensorInfo.has(i.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(i.dataId,{backend:s||this.backend,dtype:i.dtype,shape:i.shape,bytes:_})),i instanceof ri||this.track(i)}incRef(i,s){this.trackTensor(i,s),this.backend.incRef(i.dataId)}removeDataId(i,s){this.state.tensorInfo.has(i)&&this.state.tensorInfo.get(i).backend===s&&(this.state.tensorInfo.delete(i),this.state.numDataBuffers--)}disposeTensor(i){if(!this.state.tensorInfo.has(i.dataId))return;let s=this.state.tensorInfo.get(i.dataId);if(this.state.numTensors--,i.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=s.bytes),i.dtype!=="complex64"&&i.dtype!=="string"){let _=i.size*Wp(i.dtype);this.state.numBytes-=_}s.backend.disposeData(i.dataId)&&this.removeDataId(i.dataId,s.backend)}disposeVariables(){for(let i in this.state.registeredVariables){let s=this.state.registeredVariables[i];this.disposeVariable(s)}}disposeVariable(i){this.disposeTensor(i),this.state.registeredVariables[i.name]!=null&&delete this.state.registeredVariables[i.name]}memory(){let i=this.backend.memory();return i.numTensors=this.state.numTensors,i.numDataBuffers=this.state.numDataBuffers,i.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(i.unreliable=!0,i.reasons==null&&(i.reasons=[]),i.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),i}async profile(i){this.state.profiling=!0;let s=this.state.numBytes,_=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await i(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(_e=>_e.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-s,this.state.activeProfile.newTensors=this.state.numTensors-_;for(let _e of this.state.activeProfile.kernels)_e.kernelTimeMs=await _e.kernelTimeMs,_e.extraInfo=await _e.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(i,s,_,_e,ct,Mt){let Ft={id:this.state.nextTapeNodeId++,kernelName:i,inputs:s,outputs:_,saved:ct},Ut=iw(i);Ut!=null&&(_e=Ut.gradFunc),_e!=null&&(Ft.gradient=Xt=>(Xt=Xt.map((Kt,nr)=>{if(Kt==null){let rr=_[nr],or=Gp(rr.size,rr.dtype);return this.makeTensor(or,rr.shape,rr.dtype)}return Kt}),_e(Xt.length>1?Xt:Xt[0],ct,Mt))),this.state.activeTape.push(Ft)}keep(i){return i.kept=!0,i}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(i){let s={track:[],name:"unnamed scope",id:this.state.nextScopeId++};i&&(s.name=i),this.state.scopeStack.push(s),this.state.activeScope=s}endScope(i){let s=Cl(i),_=new Set(s.map(ct=>ct.id));for(let ct=0;ct<this.state.activeScope.track.length;ct++){let Mt=this.state.activeScope.track[ct];!Mt.kept&&!_.has(Mt.id)&&Mt.dispose()}let _e=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],s.forEach(ct=>{!ct.kept&&ct.scopeId===_e.id&&this.track(ct)})}gradients(i,s,_,_e=!1){if(E(s.length>0,()=>"gradients() received an empty list of xs."),_!=null&&_.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${_.dtype}'`);let ct=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",i));E(ct instanceof mt,()=>"The result y returned by f() must be a tensor.");let Mt=q0(this.state.activeTape,s,ct);if(!_e&&Mt.length===0&&s.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{let Ft={};Ft[ct.id]=_??x4(ct.shape),j0(Ft,Mt,Xt=>this.tidy(Xt),y4);let Ut=s.map(Xt=>Ft[Xt.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(Xt=>{for(let Kt of Xt.saved)Kt.dispose()}),this.state.activeTape=null),{value:ct,grads:Ut}})}customGrad(i){return E(qs(i),()=>"The f passed in customGrad(f) must be a function."),(...s)=>{E(s.every(ct=>ct instanceof mt),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let _,_e={};return s.forEach((ct,Mt)=>{_e[Mt]=ct}),this.runKernelFunc({forwardFunc:(ct,Mt)=>(_=i(...s,Mt),E(_.value instanceof mt,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),E(qs(_.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),_.value),backwardsFunc:(ct,Mt)=>{let Ft=_.gradFunc(ct,Mt),Ut=Array.isArray(Ft)?Ft:[Ft];E(Ut.length===s.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),E(Ut.every(Kt=>Kt instanceof mt),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");let Xt={};return Ut.forEach((Kt,nr)=>{Xt[nr]=()=>Kt}),Xt},inputs:_e})}}readSync(i){return this.state.tensorInfo.get(i).backend.readSync(i)}read(i){return this.state.tensorInfo.get(i).backend.read(i)}readToGPU(i,s){return this.state.tensorInfo.get(i).backend.readToGPU(i,s)}async time(i){let s=Mu(),_=await this.backend.time(i);return _.wallMs=Mu()-s,_}track(i){return this.state.activeScope!=null&&(i.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(i)),i}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new nd;for(let i in this.registry)this.disposeRegisteredKernels(i),this.registry[i].dispose(),delete this.registry[i];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}};function x4(o){let i=ml(ze(o),"float32");return T$1.makeTensor(i,o,"float32")}function Iw(){let o=aw();if(o._tfengine==null){let i=new dl(o);o._tfengine=new wl(i)}return $0(o._tfengine.ENV),Z0(()=>o._tfengine),o._tfengine}wl.nextTensorId=0,wl.nextVariableId=0;var T$1=Iw();function y4(o,i){let s={a:o,b:i};return T$1.runKernel(uo,s)}var eu={},vw;function b4(){return typeof navigator<"u"&&navigator!=null}function C4(o){vw=o}function w4(o){if(vw!==void 0)return vw;if(o||b4()){if(o||(o=navigator),o.product==="ReactNative")return!0;let i=o.userAgent||o.vendor||(typeof window<"u"?window.opera:"");if(!i){let s=o;return s.userAgentData&&s.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(i)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(i.substr(0,4))}return!1}function kw(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}qe(eu,{isBrowser:()=>kw,isMobile:()=>w4,mockIsMobile:()=>C4});var _r=A();function sr(o,i){let s=o;if(Pt$2(o))return i==="string"?[]:[o.length];if(rd(o)){let _e=o.channels||"RGBA";return[o.height,o.width*_e.length]}if(od(o))return[o.buffer.size/(i==null?4:Wp(i))];if(!Array.isArray(o))return[];let _=[];for(;Array.isArray(s)||Pt$2(s)&&i!=="string";)_.push(s.length),s=s[0];return Array.isArray(o)&&A().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&nk(o,_,[]),_}function nk(o,i,s){if(s=s||[],!Array.isArray(o)&&!Pt$2(o))return void E(i.length===0,()=>`Element arr[${s.join("][")}] is a primitive, but should be an array/TypedArray of ${i[0]} elements`);E(i.length>0,()=>`Element arr[${s.join("][")}] should be a primitive, but is an array of ${o.length} elements`),E(o.length===i[0],()=>`Element arr[${s.join("][")}] should have ${i[0]} elements, but has ${o.length} elements`);let _=i.slice(1);for(let _e=0;_e<o.length;++_e)nk(o[_e],_,s.concat(_e))}function ok(o,i,s,_){if(o!=="string_or_numeric"){if(o==null)throw new Error("Expected dtype cannot be null.");if(o!=="numeric"&&o!==i||o==="numeric"&&i==="string")throw new Error(`Argument '${s}' passed to '${_}' must be ${o} tensor, but got ${i} tensor`)}}function v(o,i,s,_="numeric"){if(o instanceof hw())return ok(_,o.dtype,i,s),o;let _e=Ei(o);if(_e!=="string"&&["bool","int32","float32"].indexOf(_)>=0&&(_e=_),ok(_,_e,i,s),o==null||!Pt$2(o)&&!Array.isArray(o)&&typeof o!="number"&&typeof o!="boolean"&&typeof o!="string"){let Ft=o==null?"null":o.constructor.name;throw new Error(`Argument '${i}' passed to '${s}' must be a Tensor or TensorLike, but got '${Ft}'`)}let ct=sr(o,_e);!Pt$2(o)&&!Array.isArray(o)&&(o=[o]);let Mt=_e!=="string"?Zp(o,_e):Fs(o,[],!0);return T$1.makeTensor(Mt,ct,_e)}function ni(o,i,s,_="numeric"){if(!Array.isArray(o))throw new Error(`Argument ${i} passed to ${s} must be a \`Tensor[]\` or \`TensorLike[]\``);return o.map((_e,ct)=>v(_e,`${i}[${ct}]`,s,_))}_r.registerFlag("DEBUG",()=>!1,o=>{o&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),_r.registerFlag("IS_BROWSER",()=>kw()),_r.registerFlag("IS_NODE",()=>typeof process<"u"&&process.versions!==void 0&&process.versions.node!==void 0),_r.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)),_r.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor)),_r.registerFlag("PROD",()=>!1),_r.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>_r.getBool("DEBUG")),_r.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0),_r.registerFlag("IS_TEST",()=>!1),_r.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>_r.getBool("DEBUG")),_r.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1),_r.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1),_r.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);var Nw="__op";function N$1(o){let i=Object.keys(o);if(i.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${i.length} keys.`);let s=i[0],_=o[s];s.endsWith("_")&&(s=s.substring(0,s.length-1)),s+=Nw;let _e=(...ct)=>{T$1.startScope(s);try{let Mt=_(...ct);return Eu(Mt)&&console.error("Cannot return a Promise inside of tidy."),T$1.endScope(Mt),Mt}catch(Mt){throw T$1.endScope(null),Mt}};return Object.defineProperty(_e,"name",{value:s,configurable:!0}),_e}function S4(o,i){let s=v(o,"real","complex"),_=v(i,"imag","complex");xt$1(s.shape,_.shape,`real and imag shapes, ${s.shape} and ${_.shape}, must match in call to tf.complex().`);let _e={real:s,imag:_};return T$1.runKernel(Di,_e)}var Er=N$1({complex_:S4});function wr(o,i,s,_){if(_==null)_=Ei(o);else if(_==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(od(o)||rd(o)){if(_!=="float32"&&_!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${_}.`);return T$1.backend.createTensorFromGPUData(o,i||s,_)}if(!Pt$2(o)&&!Array.isArray(o)&&typeof o!="number"&&typeof o!="boolean"&&typeof o!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(i!=null){Ct(i);let _e=ze(i),ct=ze(s);E(_e===ct,()=>`Based on the provided shape, [${i}], the tensor should have ${_e} values but has ${ct}`);for(let Mt=0;Mt<s.length;++Mt){let Ft=s[Mt],Ut=Mt!==s.length-1||Ft!==ze(i.slice(Mt));E(s[Mt]===i[Mt]||!Ut,()=>`Error creating a new Tensor. Inferred shape (${s}) does not match the provided shape (${i}). `)}}return!Pt$2(o)&&!Array.isArray(o)&&(o=[o]),i=i||s,o=_!=="string"?Zp(o,_):Fs(o,[],!0),T$1.makeTensor(o,i,_)}function ar(o,i,s){return wr(o,i,sr(o,s),s)}var si={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8},ir=class Yge{static join(i){return new Yge(i).slice()}constructor(i){if(this.shards=[],this.previousShardIndex=0,i==null||(i instanceof Array||(i=[i]),(i=i.map(_=>Pt$2(_)?_.buffer:_)).length===0))return;this.bufferUniformSize=i[0].byteLength;let s=0;for(let _=0;_<i.length;_++){let _e=i[_];_!==i.length-1&&_e.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);let ct=s+_e.byteLength;this.shards.push({buffer:_e,start:s,end:ct}),s=ct}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(i=0,s=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(i=isNaN(Number(i))?0:i,s=isNaN(Number(s))?0:s,i=Math.max(0,i),(s=Math.min(this.byteLength,s))<=i)return new ArrayBuffer(0);let _=this.findShardForByte(i);if(_===-1)throw new Error(`Could not find start shard for byte ${i}`);let _e=new ArrayBuffer(s-i),ct=new Uint8Array(_e),Mt=0;for(let Ft=_;Ft<this.shards.length;Ft++){let Ut=this.shards[Ft],Xt=i+Mt-Ut.start,Kt=Mt,nr=Math.min(s,Ut.end)-Ut.start,rr=new Uint8Array(Ut.buffer,Xt,nr-Xt);if(ct.set(rr,Kt),Mt+=rr.length,s<Ut.end)break}return _e}findShardForByte(i){if(this.shards.length===0||i<0||i>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(i/this.bufferUniformSize),this.previousShardIndex;function s(_e){return i<_e.start?-1:i>=_e.end?1:0}if(s(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;let _=I4(this.shards,s);return _===-1?-1:(this.previousShardIndex=_,this.previousShardIndex)}};function I4(o,i){let s=0,_=o.length;for(;s<=_;){let _e=Math.floor((_-s)/2)+s,ct=i(o[_e]);if(ct===0)return _e;ct<0?_=_e:s=_e+1}return-1}function hme(){A().set("PROD",!0)}function gme(){A().set("DEBUG",!0)}function xme(){A().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function Tw(o){A().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(o+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function yme(){T$1.disposeVariables()}function ur(){return T$1}function bme(){return T$1.memory()}function Cme(o){return T$1.profile(o)}function De$1(o,i){return T$1.tidy(o,i)}function Ot$1(o){Cl(o).forEach(i=>i.dispose())}function $r(o){return T$1.keep(o)}function wme(o){return T$1.time(o)}function Sme(o){return T$1.setBackend(o)}function Ime(){return T$1.ready()}function sk(){return T$1.backendName}function vme(o){T$1.removeBackend(o)}function kme(o){return T$1.findBackend(o)}function Nme(o){return T$1.findBackendFactory(o)}function tu(o,i,s=1){return T$1.registerBackend(o,i,s)}function ak(){return T$1.backend}function Tme(o,i){A().setPlatform(o,i)}var ru=4;async function pk(o,i){let s=[],_=[],_e=Array.isArray(o)?o.map(ct=>ct.name):Object.keys(o);for(let ct=0;ct<_e.length;++ct){let Mt=_e[ct],Ft=Array.isArray(o)?o[ct].tensor:o[Mt];if(Ft.dtype!=="float32"&&Ft.dtype!=="int32"&&Ft.dtype!=="bool"&&Ft.dtype!=="string"&&Ft.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${Mt}': ${Ft.dtype}`);let Ut={name:Mt,shape:Ft.shape,dtype:Ft.dtype};if(Ft.dtype==="string"){let Xt=new Promise(async Kt=>{let nr=await Ft.bytes(),rr=nr.reduce((fr,yr)=>fr+yr.length,0)+ru*nr.length,or=new Uint8Array(rr),hr=0;for(let fr=0;fr<nr.length;fr++){let yr=nr[fr],Lr=new Uint8Array(new Uint32Array([yr.length]).buffer);or.set(Lr,hr),hr+=ru,or.set(yr,hr),hr+=yr.length}Kt(or)});_.push(Xt)}else _.push(Ft.data());i!=null&&(Ut.group=i),s.push(Ut)}return{data:N4(await Promise.all(_)),specs:s}}function sd(o,i){let s=new ir(o),_={},_e=0;for(let ct of i){let Mt=v4(ct,(Ft,Ut)=>s.slice(_e+Ft,_e+Ut));_[ct.name]=ck(ct,s.slice(_e,_e+Mt)),_e+=Mt}return _}function v4(o,i){let s,_=ze(o.shape);if("quantization"in o){let _e=o.quantization;s=si[_e.dtype]}else{if(o.dtype==="string"){let _e=0;for(let ct=0;ct<_;ct++)_e+=ru+new Uint32Array(i(_e,_e+ru))[0];return _e}s=si[o.dtype]}return _*s}async function k4(o,i){let s,_=ze(o.shape);if("quantization"in o){let _e=o.quantization;s=si[_e.dtype]}else{if(o.dtype==="string"){let _e=0;for(let ct=0;ct<_;ct++)_e+=ru+new Uint32Array(await i(_e,_e+ru))[0];return _e}s=si[o.dtype]}return _*s}function ck(o,i){let s,_=o.name,_e=o.dtype,ct=o.shape,Mt=ze(ct),Ft=0;if("quantization"in o){let Ut=o.quantization;if(Ut.dtype==="uint8"||Ut.dtype==="uint16"){if(!("min"in Ut)||!("scale"in Ut))throw new Error(`Weight ${o.name} with quantization ${Ut.dtype} doesn't have corresponding metadata min and scale.`)}else{if(Ut.dtype!=="float16")throw new Error(`Weight ${o.name} has unknown quantization dtype ${Ut.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);if(_e!=="float32")throw new Error(`Weight ${o.name} is quantized with ${Ut.dtype} which only supports weights of type float32 not ${_e}.`)}let Xt=si[Ut.dtype],Kt=Ut.dtype==="uint8"?new Uint8Array(i):new Uint16Array(i);if(_e==="float32")if(Ut.dtype==="uint8"||Ut.dtype==="uint16"){s=new Float32Array(Kt.length);for(let nr=0;nr<Kt.length;nr++){let rr=Kt[nr];s[nr]=rr*Ut.scale+Ut.min}}else{if(Ut.dtype!=="float16")throw new Error(`Unsupported quantization type ${Ut.dtype} for weight type float32.`);s=$4()(Kt)}else{if(_e!=="int32")throw new Error(`Unsupported dtype in weight '${_}': ${_e}`);if(Ut.dtype!=="uint8"&&Ut.dtype!=="uint16")throw new Error(`Unsupported quantization type ${Ut.dtype} for weight type int32.`);s=new Int32Array(Kt.length);for(let nr=0;nr<Kt.length;nr++){let rr=Kt[nr];s[nr]=Math.round(rr*Ut.scale+Ut.min)}}Ft+=Mt*Xt}else if(_e==="string"){let Ut=ze(o.shape);s=[];for(let Xt=0;Xt<Ut;Xt++){let Kt=new Uint32Array(i.slice(Ft,Ft+ru))[0];Ft+=ru;let nr=new Uint8Array(i.slice(Ft,Ft+Kt));s.push(nr),Ft+=Kt}}else{let Ut=si[_e];if(_e==="float32")s=new Float32Array(i);else if(_e==="int32")s=new Int32Array(i);else{if(_e!=="bool"){if(_e==="complex64"){s=new Float32Array(i);let Xt=new Float32Array(s.length/2),Kt=new Float32Array(s.length/2);for(let hr=0;hr<Xt.length;hr++)Xt[hr]=s[2*hr],Kt[hr]=s[2*hr+1];let nr=ar(Xt,ct,"float32"),rr=ar(Kt,ct,"float32"),or=Er(nr,rr);return nr.dispose(),rr.dispose(),or}throw new Error(`Unsupported dtype in weight '${_}': ${_e}`)}s=new Uint8Array(i)}Ft+=Mt*Ut}return ar(s,ct,_e)}async function ik(o,i,s){let _=new Uint8Array(i);for(;_.byteLength<s;){let{done:_e,value:ct}=await o.read();if(_e&&ct==null){let Ft=s-_.byteLength;throw new Error(`Reader is done but ${Ft} bytes are still expected`)}let Mt=new Uint8Array(_.length+ct.byteLength);Mt.set(_,0),Mt.set(new Uint8Array(ct),_.length),_=Mt}return _.buffer}async function ad(o,i){let s={},_=o.getReader(),_e=new ArrayBuffer(0);for(let ct of i){let Mt=await k4(ct,async(Xt,Kt)=>(_e=await ik(_,_e,Kt),_e.slice(Xt,Kt)));_e=await ik(_,_e,Mt);let Ft=_e.slice(0,Mt);_e=_e.slice(Mt);let Ut=ck(ct,Ft);if(s[ct.name]=Ut,sk()==="webgpu"){let Xt=ak();"uploadToGPU"in Xt&&ze(Ut.shape)>=A().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&Xt.uploadToGPU(Ut.dataId)}}return s}function N4(o){if(o===null)throw new Error(`Invalid input value: ${JSON.stringify(o)}`);let i=0,s=[];o.forEach(ct=>{if(i+=ct.byteLength,s.push(ct.byteLength===ct.buffer.byteLength?ct:new ct.constructor(ct)),!(ct instanceof Float32Array||ct instanceof Int32Array||ct instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${ct.constructor.name}`)});let _=new Uint8Array(i),_e=0;return s.forEach(ct=>{_.set(new Uint8Array(ct.buffer),_e),_e+=ct.byteLength}),_.buffer}var _w=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function uk(o){return _w?Buffer.byteLength(o,"utf8"):new Blob([o]).size}function lk(o){if(_w)return Buffer.from(o).toString("base64");let i=new Uint8Array(o),s="";for(let _=0,_e=i.length;_<_e;_++)s+=String.fromCharCode(i[_]);return btoa(s)}function mk(o){if(_w){let _=Buffer.from(o,"base64");return _.buffer.slice(_.byteOffset,_.byteOffset+_.byteLength)}let i=atob(o),s=new Uint8Array(i.length);for(let _=0;_<i.length;++_)s.set([i.charCodeAt(_)],_);return s.buffer}function dk(o){return ir.join(o)}function Ew(o){for(o=o.trim();o.endsWith("/");)o=o.slice(0,o.length-1);let i=o.split("/");return i[i.length-1]}function id(o,i){let s={modelTopology:o.modelTopology,format:o.format,generatedBy:o.generatedBy,convertedBy:o.convertedBy,weightsManifest:i};return o.signature!=null&&(s.signature=o.signature),o.userDefinedMetadata!=null&&(s.userDefinedMetadata=o.userDefinedMetadata),o.modelInitializer!=null&&(s.modelInitializer=o.modelInitializer),o.initializerSignature!=null&&(s.initializerSignature=o.initializerSignature),o.trainingConfig!=null&&(s.trainingConfig=o.trainingConfig),s}function $w(o,i,s){let _={modelTopology:o.modelTopology,format:o.format,generatedBy:o.generatedBy,convertedBy:o.convertedBy};if(o.trainingConfig!=null&&(_.trainingConfig=o.trainingConfig),o.weightsManifest!=null){if(!i)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!s)throw new Error("modelJSON has weightsManifest but weightData is null");_.weightSpecs=i,_.weightData=s}return o.signature!=null&&(_.signature=o.signature),o.userDefinedMetadata!=null&&(_.userDefinedMetadata=o.userDefinedMetadata),o.modelInitializer!=null&&(_.modelInitializer=o.modelInitializer),o.initializerSignature!=null&&(_.initializerSignature=o.initializerSignature),_}async function tc(o,i){let s,_;return o.weightsManifest!=null&&([s,_]=await i(o.weightsManifest)),$w(o,s,_)}function va(o){if(o.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:o.modelTopology==null?0:uk(JSON.stringify(o.modelTopology)),weightSpecsBytes:o.weightSpecs==null?0:uk(JSON.stringify(o.weightSpecs)),weightDataBytes:o.weightData==null?0:new ir(o.weightData).byteLength}}function Sl(o){let i=[];for(let s of o)i.push(...s.weights);return i}function T4(){let o=s=>{let _=s<<13,_e=0;for(;!(8388608&_);)_e-=8388608,_<<=1;return _&=-8388609,_e+=947912704,_|_e},i=new Uint32Array(2048);i[0]=0;for(let s=1;s<1024;s++)i[s]=o(s);for(let s=1024;s<2048;s++)i[s]=939524096+(s-1024<<13);return i}function _4(){let o=new Uint32Array(64);o[0]=0,o[31]=1199570944,o[32]=2147483648,o[63]=3347054592;for(let i=1;i<31;i++)o[i]=i<<23;for(let i=33;i<63;i++)o[i]=2147483648+(i-32<<23);return o}function E4(){let o=new Uint32Array(64);for(let i=0;i<64;i++)o[i]=1024;return o[0]=o[32]=0,o}function $4(){let o=T4(),i=_4(),s=E4();return _=>{let _e=new ArrayBuffer(4*_.length),ct=new Uint32Array(_e);for(let Mt=0;Mt<_.length;Mt++){let Ft=_[Mt],Ut=o[s[Ft>>10]+(1023&Ft)]+i[Ft>>10];ct[Mt]=Ut}return new Float32Array(_e)}}var qt=class oC{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return oC.instance==null&&(oC.instance=new oC),oC.instance}static registerSaveRouter(i){oC.getInstance().saveRouters.push(i)}static registerLoadRouter(i){oC.getInstance().loadRouters.push(i)}static getSaveHandlers(i){return oC.getHandlers(i,"save")}static getLoadHandlers(i,s){return oC.getHandlers(i,"load",s)}static getHandlers(i,s,_){let _e=[];return(s==="load"?oC.getInstance().loadRouters:oC.getInstance().saveRouters).forEach(ct=>{let Mt=ct(i,_);Mt!==null&&_e.push(Mt)}),_e}},fk=o=>qt.registerSaveRouter(o),hk=o=>qt.registerLoadRouter(o),gk=o=>qt.getSaveHandlers(o),xk=(o,i)=>qt.getLoadHandlers(o,i),Rw="tensorflowjs",Dw=1,Lu="models_store",ou="model_info_store";function yk(){if(!A().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");let o=typeof window>"u"?self:window,i=o.indexedDB||o.mozIndexedDB||o.webkitIndexedDB||o.msIndexedDB||o.shimIndexedDB;if(i==null)throw new Error("The current browser does not appear to support IndexedDB.");return i}function Aw(o){let i=o.result;i.createObjectStore(Lu,{keyPath:"modelPath"}),i.createObjectStore(ou,{keyPath:"modelPath"})}var ka=class{constructor(o){if(this.indexedDB=yk(),o==null||!o)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=o}async save(o){if(o.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,o)}async load(){return this.databaseAction(this.modelPath)}databaseAction(o,i){return new Promise((s,_)=>{let _e=this.indexedDB.open(Rw,Dw);_e.onupgradeneeded=()=>Aw(_e),_e.onsuccess=()=>{let ct=_e.result;if(i==null){let Mt=ct.transaction(Lu,"readonly"),Ft=Mt.objectStore(Lu).get(this.modelPath);Ft.onsuccess=()=>{if(Ft.result==null)return ct.close(),_(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));s(Ft.result.modelArtifacts)},Ft.onerror=Ut=>(ct.close(),_(Ft.error)),Mt.oncomplete=()=>ct.close()}else{i.weightData=ir.join(i.weightData);let Mt,Ft,Ut=va(i),Xt=ct.transaction(ou,"readwrite"),Kt=Xt.objectStore(ou);try{Mt=Kt.put({modelPath:this.modelPath,modelArtifactsInfo:Ut})}catch(nr){return _(nr)}Mt.onsuccess=()=>{Ft=ct.transaction(Lu,"readwrite");let nr,rr=Ft.objectStore(Lu);try{nr=rr.put({modelPath:this.modelPath,modelArtifacts:i,modelArtifactsInfo:Ut})}catch(or){return _(or)}nr.onsuccess=()=>s({modelArtifactsInfo:Ut}),nr.onerror=or=>{Kt=Xt.objectStore(ou);let hr=Kt.delete(this.modelPath);hr.onsuccess=()=>(ct.close(),_(nr.error)),hr.onerror=fr=>(ct.close(),_(nr.error))}},Mt.onerror=nr=>(ct.close(),_(Mt.error)),Xt.oncomplete=()=>{Ft==null?ct.close():Ft.oncomplete=()=>ct.close()}}},_e.onerror=ct=>_(_e.error)})}};ka.URL_SCHEME="indexeddb://";var bk=o=>A().getBool("IS_BROWSER")&&!Array.isArray(o)&&o.startsWith(ka.URL_SCHEME)?R4(o.slice(ka.URL_SCHEME.length)):null;function R4(o){return new ka(o)}function D4(o){return o.startsWith(ka.URL_SCHEME)?o.slice(ka.URL_SCHEME.length):o}qt.registerSaveRouter(bk),qt.registerLoadRouter(bk);var ud=class{constructor(){this.indexedDB=yk()}async listModels(){return new Promise((o,i)=>{let s=this.indexedDB.open(Rw,Dw);s.onupgradeneeded=()=>Aw(s),s.onsuccess=()=>{let _=s.result,_e=_.transaction(ou,"readonly"),ct=_e.objectStore(ou).getAll();ct.onsuccess=()=>{let Mt={};for(let Ft of ct.result)Mt[Ft.modelPath]=Ft.modelArtifactsInfo;o(Mt)},ct.onerror=Mt=>(_.close(),i(ct.error)),_e.oncomplete=()=>_.close()},s.onerror=_=>i(s.error)})}async removeModel(o){return o=D4(o),new Promise((i,s)=>{let _=this.indexedDB.open(Rw,Dw);_.onupgradeneeded=()=>Aw(_),_.onsuccess=()=>{let _e,ct=_.result,Mt=ct.transaction(ou,"readwrite"),Ft=Mt.objectStore(ou),Ut=Ft.get(o);Ut.onsuccess=()=>{if(Ut.result==null)return ct.close(),s(new Error(`Cannot find model with path '${o}' in IndexedDB.`));{let Xt=Ft.delete(o),Kt=()=>{_e=ct.transaction(Lu,"readwrite");let nr=_e.objectStore(Lu).delete(o);nr.onsuccess=()=>i(Ut.result.modelArtifactsInfo),nr.onerror=rr=>s(Ut.error)};Xt.onsuccess=Kt,Xt.onerror=nr=>(Kt(),ct.close(),s(Ut.error))}},Ut.onerror=Xt=>(ct.close(),s(Ut.error)),Mt.oncomplete=()=>{_e==null?ct.close():_e.oncomplete=()=>ct.close()}},_.onerror=_e=>s(_.error)})}},ai="/",rc="tensorflowjs_models",Ck="info",A4="model_topology",F4="weight_specs",P4="weight_data",O4="model_metadata";function wk(o){return{info:[rc,o,Ck].join(ai),topology:[rc,o,A4].join(ai),weightSpecs:[rc,o,F4].join(ai),weightData:[rc,o,P4].join(ai),modelMetadata:[rc,o,O4].join(ai)}}function Sk(o){for(let i of Object.values(o))window.localStorage.removeItem(i)}function M4(o){let i=o.split(ai);if(i.length<3)throw new Error(`Invalid key format: ${o}`);return i.slice(1,i.length-1).join(ai)}function L4(o){return o.startsWith(Na.URL_SCHEME)?o.slice(Na.URL_SCHEME.length):o}var Na=class{constructor(o){if(!A().getBool("IS_BROWSER")||typeof window>"u"||window.localStorage===void 0)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,o==null||!o)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=o,this.keys=wk(this.modelPath)}async save(o){if(o.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{let i=JSON.stringify(o.modelTopology),s=JSON.stringify(o.weightSpecs),_=va(o),_e=ir.join(o.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(_)),this.LS.setItem(this.keys.topology,i),this.LS.setItem(this.keys.weightSpecs,s),this.LS.setItem(this.keys.weightData,lk(_e));let ct={format:o.format,generatedBy:o.generatedBy,convertedBy:o.convertedBy,signature:o.signature!=null?o.signature:void 0,userDefinedMetadata:o.userDefinedMetadata!=null?o.userDefinedMetadata:void 0,modelInitializer:o.modelInitializer!=null?o.modelInitializer:void 0,initializerSignature:o.initializerSignature!=null?o.initializerSignature:void 0,trainingConfig:o.trainingConfig!=null?o.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(ct)),{modelArtifactsInfo:_}}catch{throw Sk(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${_.modelTopologyBytes}, weightSpecsBytes=${_.weightSpecsBytes}, weightDataBytes=${_.weightDataBytes}.`)}}}async load(){let o=JSON.parse(this.LS.getItem(this.keys.info));if(o==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(o.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");let i={},s=JSON.parse(this.LS.getItem(this.keys.topology));if(s==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);i.modelTopology=s;let _=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(_==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);i.weightSpecs=_;let _e=this.LS.getItem(this.keys.modelMetadata);if(_e!=null){let Mt=JSON.parse(_e);i.format=Mt.format,i.generatedBy=Mt.generatedBy,i.convertedBy=Mt.convertedBy,Mt.signature!=null&&(i.signature=Mt.signature),Mt.userDefinedMetadata!=null&&(i.userDefinedMetadata=Mt.userDefinedMetadata),Mt.modelInitializer!=null&&(i.modelInitializer=Mt.modelInitializer),Mt.initializerSignature!=null&&(i.initializerSignature=Mt.initializerSignature),Mt.trainingConfig!=null&&(i.trainingConfig=Mt.trainingConfig)}let ct=this.LS.getItem(this.keys.weightData);if(ct==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return i.weightData=mk(ct),i}};Na.URL_SCHEME="localstorage://";var Ik=o=>A().getBool("IS_BROWSER")&&!Array.isArray(o)&&o.startsWith(Na.URL_SCHEME)?B4(o.slice(Na.URL_SCHEME.length)):null;function B4(o){return new Na(o)}qt.registerSaveRouter(Ik),qt.registerLoadRouter(Ik);var pd=class{constructor(){E(A().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),E(typeof window>"u"||window.localStorage!==void 0,()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){let o={},i=rc+ai,s=ai+Ck;for(let _=0;_<this.LS.length;++_){let _e=this.LS.key(_);_e.startsWith(i)&&_e.endsWith(s)&&(o[M4(_e)]=JSON.parse(this.LS.getItem(_e)))}return o}async removeModel(o){let i=wk(o=L4(o));if(this.LS.getItem(i.info)==null)throw new Error(`Cannot find model at path '${o}'`);let s=JSON.parse(this.LS.getItem(i.info));return Sk(i),s}},oc="://",Os=class T8{constructor(){this.managers={}}static getInstance(){return T8.instance==null&&(T8.instance=new T8),T8.instance}static registerManager(i,s){E(i!=null,()=>"scheme must not be undefined or null."),i.endsWith(oc)&&(i=i.slice(0,i.indexOf(oc))),E(i.length>0,()=>"scheme must not be an empty string.");let _=T8.getInstance();E(_.managers[i]==null,()=>`A model store manager is already registered for scheme '${i}'.`),_.managers[i]=s}static getManager(i){let s=T8.getInstance().managers[i];if(s==null)throw new Error(`Cannot find model manager for scheme '${i}'`);return s}static getSchemes(){return Object.keys(T8.getInstance().managers)}};function cd(o){if(o.indexOf(oc)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${Os.getSchemes().join(",")}`);return{scheme:o.split(oc)[0],path:o.split(oc)[1]}}async function vk(o,i,s=!1){E(o!==i,()=>`Old path and new path are the same: '${o}'`);let _=qt.getLoadHandlers(o);E(_.length>0,()=>`Copying failed because no load handler is found for source URL ${o}.`),E(_.length<2,()=>`Copying failed because more than one (${_.length}) load handlers for source URL ${o}.`);let _e=_[0],ct=qt.getSaveHandlers(i);E(ct.length>0,()=>`Copying failed because no save handler is found for destination URL ${i}.`),E(ct.length<2,()=>`Copying failed because more than one (${_.length}) save handlers for destination URL ${i}.`);let Mt=ct[0],Ft=cd(o).scheme,Ut=cd(o).path,Xt=Ft===cd(o).scheme,Kt=await _e.load();s&&Xt&&await Os.getManager(Ft).removeModel(Ut);let nr=await Mt.save(Kt);return s&&!Xt&&await Os.getManager(Ft).removeModel(Ut),nr.modelArtifactsInfo}async function kk(){let o=Os.getSchemes(),i={};for(let s of o){let _=await Os.getManager(s).listModels();for(let _e in _)i[s+oc+_e]=_[_e]}return i}async function Nk(o){let i=cd(o);return Os.getManager(i.scheme).removeModel(i.path)}async function Tk(o,i){return vk(o,i,!1)}async function _k(o,i){return vk(o,i,!0)}var Fw=class{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(o,i){return fetch(o,i)}now(){return performance.now()}encode(o,i){if(i!=="utf-8"&&i!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${i}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(o)}decode(o,i){return new TextDecoder(i).decode(o)}setTimeoutCustom(o,i){typeof window<"u"&&A().getBool("USE_SETTIMEOUTCUSTOM")?(this.functionRefs.push(o),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},i),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",s=>{s.source===window&&s.data.name===this.messageName&&(s.stopPropagation(),(0,this.functionRefs[s.data.index])(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0))},!0))):setTimeout(o,i)}isTypedArray(o){return Qm(o)}};if(A().get("IS_BROWSER")){A().setPlatform("browser",new Fw);try{Os.registerManager(Na.URL_SCHEME,new pd)}catch{}try{Os.registerManager(ka.URL_SCHEME,new ud)}catch{}}var z4={importFetch:()=>Ek()},Pw,Ow=class{constructor(){this.util=$k(),this.textEncoder=new this.util.TextEncoder}fetch(o,i){return A().global.fetch!=null?A().global.fetch(o,i):(Pw==null&&(Pw=z4.importFetch()),Pw(o,i))}now(){let o=process.hrtime();return 1e3*o[0]+o[1]/1e6}encode(o,i){if(i!=="utf-8"&&i!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${i}`);return this.textEncoder.encode(o)}decode(o,i){return o.length===0?"":new this.util.TextDecoder(i).decode(o)}isTypedArray(o){return this.util.types.isFloat32Array(o)||this.util.types.isInt32Array(o)||this.util.types.isUint8Array(o)||this.util.types.isUint8ClampedArray(o)}};function me$1(o,i="float32",s){return i=i||"float32",Ct(o),new tt(o,i,s)}function V4(o,i){let s=v(o,"x","cast");if(!rw(i))throw new Error(`Failed to cast to unknown dtype ${i}`);if(i==="string"&&s.dtype!=="string"||i!=="string"&&s.dtype==="string")throw new Error("Only strings can be casted to strings");let _={x:s},_e={dtype:i};return T$1.runKernel(yo,_,_e)}A().get("IS_NODE")&&!A().get("IS_BROWSER")&&A().setPlatform("node",new Ow);var Ue=N$1({cast_:V4});function W4(o){let i={x:v(o,"x","clone","string_or_numeric")};return T$1.runKernel(Co,i)}var Ur=N$1({clone_:W4});function ld(o,i=!1){console.log(o.toString(i))}Iw();var U4={buffer:me$1,cast:Ue,clone:Ur,print:ld};function G4(o,i){let s=v(o,"a","add"),_=v(i,"b","add");[s,_]=Oe(s,_);let _e={a:s,b:_};return T$1.runKernel(uo,_e)}J0(U4);var Ce$1=N$1({add_:G4});function H4(o,i){let s=v(o,"a","floorDiv"),_=v(i,"b","floorDiv");[s,_]=Oe(s,_);let _e={a:s,b:_};return T$1.runKernel(Sn,_e)}var md=N$1({floorDiv_:H4});function K4(o,i){let s=v(o,"a","div"),_=v(i,"b","div");if([s,_]=Oe(s,_),s.dtype==="int32"&&_.dtype==="int32")return md(s,_);let _e={a:s,b:_};return T$1.runKernel(fn,_e,{})}var je=N$1({div_:K4});function q4(o,i){let s=v(o,"a","mul"),_=v(i,"b","mul");[s,_]=Oe(s,_);let _e={a:s,b:_};return T$1.runKernel(Xn,_e)}var se=N$1({mul_:q4});function j4(o){let i=v(o,"x","abs");if(i.dtype==="complex64"){let s={x:i};return T$1.runKernel(Ai,s)}{let s={x:i};return T$1.runKernel(Xs,s)}}var Qt=N$1({abs_:j4});function X4(o){let i={x:v(o,"x","acos")};return T$1.runKernel(Vo,i)}var Rk=N$1({acos_:X4});function Y4(o){let i={x:v(o,"x","acosh")};return T$1.runKernel(Wo,i)}var Dk=N$1({acosh_:Y4});function Q4(o){E(Array.isArray(o),()=>"The argument passed to tf.addN() must be a list of tensors"),E(o.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${o.length}`);let i=o.map((_e,ct)=>v(_e,`tensors${ct}`,"addN")),s=i[0];i.forEach(_e=>{if(_e.dtype!==s.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),i.forEach(_e=>{if(!br(_e.shape,s.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});let _=i;return T$1.runKernel(Uo,_)}var Ak=N$1({addN_:Q4});function Z4(o,i=null,s=!1){let _={x:v(o,"x","all","bool")},_e={axis:i,keepDims:s};return T$1.runKernel(Go,_,_e)}var Fk=N$1({all_:Z4});function J4(o,i=null,s=!1){let _={x:v(o,"x","any","bool")},_e={axis:i,keepDims:s};return T$1.runKernel(Ho,_,_e)}var Pk=N$1({any_:J4});function eH(o,i=0){let s={x:v(o,"x","argMax")},_={axis:i};return T$1.runKernel(Ys,s,_)}var Ok=N$1({argMax_:eH});function tH(o,i=0){let s={x:v(o,"x","argMin")},_={axis:i};return T$1.runKernel(Qs,s,_)}var Mk=N$1({argMin_:tH});function rH(o){let i={x:v(o,"x","asin")};return T$1.runKernel(Ko,i)}var Lk=N$1({asin_:rH});function oH(o){let i={x:v(o,"x","asinh")};return T$1.runKernel(qo,i)}var Bk=N$1({asinh_:oH});function nH(o){let i={x:v(o,"x","atan")};return T$1.runKernel(jo,i)}var zk=N$1({atan_:nH});function sH(o,i){let s=v(o,"a","atan2"),_=v(i,"b","atan2");[s,_]=Oe(s,_);let _e={a:s,b:_};return T$1.runKernel(Yo,_e)}var Vk=N$1({atan2_:sH});function aH(o){let i={x:v(o,"x","atanh")};return T$1.runKernel(Xo,i)}var Wk=N$1({atanh_:aH});function iH(o,i,s,_,_e="NHWC",ct){return zu(o,[...i,o[3]],s,ct,_,null,null,Gk(_e))}function Lw(o,i,s,_,_e,ct,Mt="channelsLast"){let Ft,[Ut,Xt]=Il(i);if(Mt==="channelsLast")Ft=[Ut,Xt,o[3],o[3]];else{if(Mt!=="channelsFirst")throw new Error(`Unknown dataFormat ${Mt}`);Ft=[Ut,Xt,o[1],o[1]]}return zu(o,Ft,s,_,_e,ct,!1,Mt)}function uH(o,i,s,_,_e,ct,Mt="NDHWC"){let Ft,Ut,[Xt,Kt,nr]=Mw(i);if(Mt==="NDHWC")Ut="channelsLast",Ft=[Xt,Kt,nr,o[4],o[4]];else{if(Mt!=="NCDHW")throw new Error(`Unknown dataFormat ${Mt}`);Ut="channelsFirst",Ft=[Xt,Kt,nr,o[1],o[1]]}return Uk(o,Ft,s,_,_e,!1,Ut,ct)}function zu(o,i,s,_,_e,ct,Mt=!1,Ft="channelsLast"){let[Ut,Xt,Kt,nr]=[-1,-1,-1,-1];if(Ft==="channelsLast")[Ut,Xt,Kt,nr]=o;else{if(Ft!=="channelsFirst")throw new Error(`Unknown dataFormat ${Ft}`);[Ut,nr,Xt,Kt]=o}let rr,[or,hr,,fr]=i,[yr,Lr]=Il(s),[Br,Vr]=Il(_),Wr=nc(or,Br),ro=nc(hr,Vr),{padInfo:no,outHeight:so,outWidth:ko}=lH(_e,Xt,Kt,yr,Lr,Wr,ro,ct,Ft),To=Mt?fr*nr:fr;return Ft==="channelsFirst"?rr=[Ut,To,so,ko]:Ft==="channelsLast"&&(rr=[Ut,so,ko,To]),{batchSize:Ut,dataFormat:Ft,inHeight:Xt,inWidth:Kt,inChannels:nr,outHeight:so,outWidth:ko,outChannels:To,padInfo:no,strideHeight:yr,strideWidth:Lr,filterHeight:or,filterWidth:hr,effectiveFilterHeight:Wr,effectiveFilterWidth:ro,dilationHeight:Br,dilationWidth:Vr,inShape:o,outShape:rr,filterShape:i}}function Uk(o,i,s,_,_e,ct=!1,Mt="channelsLast",Ft){let[Ut,Xt,Kt,nr,rr]=[-1,-1,-1,-1,-1];if(Mt==="channelsLast")[Ut,Xt,Kt,nr,rr]=o;else{if(Mt!=="channelsFirst")throw new Error(`Unknown dataFormat ${Mt}`);[Ut,rr,Xt,Kt,nr]=o}let or,[hr,fr,yr,,Lr]=i,[Br,Vr,Wr]=Mw(s),[ro,no,so]=Mw(_),ko=nc(hr,ro),To=nc(fr,no),oo=nc(yr,so),{padInfo:No,outDepth:As,outHeight:Ks,outWidth:vu}=mH(_e,Xt,Kt,nr,Br,Vr,Wr,ko,To,oo,Ft),Fu=ct?Lr*rr:Lr;return Mt==="channelsFirst"?or=[Ut,Fu,As,Ks,vu]:Mt==="channelsLast"&&(or=[Ut,As,Ks,vu,Fu]),{batchSize:Ut,dataFormat:Mt,inDepth:Xt,inHeight:Kt,inWidth:nr,inChannels:rr,outDepth:As,outHeight:Ks,outWidth:vu,outChannels:Fu,padInfo:No,strideDepth:Br,strideHeight:Vr,strideWidth:Wr,filterDepth:hr,filterHeight:fr,filterWidth:yr,effectiveFilterDepth:ko,effectiveFilterHeight:To,effectiveFilterWidth:oo,dilationDepth:ro,dilationHeight:no,dilationWidth:so,inShape:o,outShape:or,filterShape:i}}function pH(o,i,s,_,_e){_==null&&(_=Bw(o,i,s));let ct=o[0],Mt=o[1];return[vl((ct-i+2*_)/s+1,_e),vl((Mt-i+2*_)/s+1,_e)]}function cH(o,i,s,_,_e,ct){_e==null&&(_e=Bw(o,i[0],_[0]));let Mt=[0,0,0,s];for(let Ft=0;Ft<3;Ft++)o[Ft]+2*_e>=i[Ft]&&(Mt[Ft]=vl((o[Ft]-i[Ft]+2*_e)/_[Ft]+1,ct));return Mt}function Bw(o,i,s,_=1){let _e=nc(i,_);return Math.floor((o[0]*(s-1)-s+_e)/2)}function Il(o){return typeof o=="number"?[o,o,o]:o.length===2?[o[0],o[1],1]:o}function Mw(o){return typeof o=="number"?[o,o,o]:o}function nc(o,i){return i<=1?o:o+(o-1)*(i-1)}function lH(o,i,s,_,_e,ct,Mt,Ft,Ut){let Xt,Kt,nr;if(typeof o=="number"){Xt={top:o,bottom:o,left:o,right:o,type:o===0?"VALID":"NUMBER"};let rr=pH([i,s],ct,_,o,Ft);Kt=rr[0],nr=rr[1]}else if(o==="same"){Kt=Math.ceil(i/_),nr=Math.ceil(s/_e);let rr=Math.max(0,(Kt-1)*_+ct-i),or=Math.max(0,(nr-1)*_e+Mt-s),hr=Math.floor(rr/2),fr=rr-hr,yr=Math.floor(or/2);Xt={top:hr,bottom:fr,left:yr,right:or-yr,type:"SAME"}}else if(o==="valid")Xt={top:0,bottom:0,left:0,right:0,type:"VALID"},Kt=Math.ceil((i-ct+1)/_),nr=Math.ceil((s-Mt+1)/_e);else{if(typeof o!="object")throw Error(`Unknown padding parameter: ${o}`);{let rr=Ut==="channelsLast"?o[1][0]:o[2][0],or=Ut==="channelsLast"?o[1][1]:o[2][1],hr=Ut==="channelsLast"?o[2][0]:o[3][0],fr=Ut==="channelsLast"?o[2][1]:o[3][1];Xt={top:rr,bottom:or,left:hr,right:fr,type:rr===0&&or===0&&hr===0&&fr===0?"VALID":"EXPLICIT"},Kt=vl((i-ct+rr+or)/_+1,Ft),nr=vl((s-Mt+hr+fr)/_e+1,Ft)}}return{padInfo:Xt,outHeight:Kt,outWidth:nr}}function mH(o,i,s,_,_e,ct,Mt,Ft,Ut,Xt,Kt){let nr,rr,or,hr;if(o==="valid"&&(o=0),typeof o=="number"){nr={top:o,bottom:o,left:o,right:o,front:o,back:o,type:o===0?"VALID":"NUMBER"};let fr=cH([i,s,_,1],[Ft,Ut,Xt],1,[_e,ct,Mt],o,Kt);rr=fr[0],or=fr[1],hr=fr[2]}else{if(o!=="same")throw Error(`Unknown padding parameter: ${o}`);{rr=Math.ceil(i/_e),or=Math.ceil(s/ct),hr=Math.ceil(_/Mt);let fr=(rr-1)*_e+Ft-i,yr=(or-1)*ct+Ut-s,Lr=(hr-1)*Mt+Xt-_,Br=Math.floor(fr/2),Vr=fr-Br,Wr=Math.floor(yr/2),ro=yr-Wr,no=Math.floor(Lr/2);nr={top:Wr,bottom:ro,left:no,right:Lr-no,front:Br,back:Vr,type:"SAME"}}}return{padInfo:nr,outDepth:rr,outHeight:or,outWidth:hr}}function vl(o,i){if(!i)return Math.trunc(o);switch(i){case"round":return Math.round(o);case"ceil":return Math.ceil(o);case"floor":return Math.floor(o);default:throw new Error(`Unknown roundingMode ${i}`)}}function Bu(o){let[i,s,_]=Il(o);return i===1&&s===1&&_===1}function gr(o,i){return Bu(o)||Bu(i)}function Ta(o){return Il(o).every(i=>i>0)}function Gk(o){if(o==="NHWC")return"channelsLast";if(o==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${o}`)}function Lt$2(o,i,s){if(s!=null){if(typeof i=="string")throw Error(`Error in ${o}: pad must be an integer when using dimRoundingMode ${s} but got pad ${i}.`);if(typeof i=="number")E(Ka(i),()=>`Error in ${o}: pad must be an integer when using dimRoundingMode ${s} but got pad ${i}.`);else{if(typeof i!="object")throw Error(`Error in ${o}: Unknown padding parameter: ${i}`);i.forEach(_=>{_.forEach(_e=>{E(Ka(_e),()=>`Error in ${o}: pad must be an integer when using dimRoundingMode ${s} but got pad ${_e}.`)})})}}}function dH(o,i){let s={x:v(o,"x","reshape","string_or_numeric")},_={shape:i};return T$1.runKernel(da,s,_)}var W$1=N$1({reshape_:dH});function fH(o,i,s,_,_e){let ct=v(o,"x","avgPool","float32");E(gr(s,1),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${s} and dilations '1'`);let Mt=ct,Ft=!1;ct.rank===3&&(Ft=!0,Mt=W$1(ct,[1,ct.shape[0],ct.shape[1],ct.shape[2]])),E(Mt.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${Mt.rank}.`),Lt$2("avgPool",_,_e);let Ut={x:Mt},Xt={filterSize:i,strides:s,pad:_,dimRoundingMode:_e},Kt=T$1.runKernel(Qo,Ut,Xt);return Kt=Ue(Kt,ct.dtype),Ft?W$1(Kt,[Kt.shape[1],Kt.shape[2],Kt.shape[3]]):Kt}var dd=N$1({avgPool_:fH});function hH(o,i,s,_,_e,ct="NDHWC"){let Mt=v(o,"x","avgPool3d","float32"),Ft=Mt,Ut=!1;Mt.rank===4&&(Ut=!0,Ft=W$1(Mt,[1,Mt.shape[0],Mt.shape[1],Mt.shape[2],Mt.shape[3]])),E(Ft.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${Ft.rank}.`),E(ct==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${ct}`),E(typeof s=="number"&&s>0||Array.isArray(s)&&s[0]>0&&s[1]>0&&s[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${s}'`),Lt$2("avgPool3d",_,_e);let Xt={x:Ft},Kt={filterSize:i,strides:s,pad:_,dimRoundingMode:_e,dataFormat:ct},nr=T$1.runKernel(Zs,Xt,Kt);return nr=Ue(nr,Ft.dtype),Ut?W$1(nr,[nr.shape[1],nr.shape[2],nr.shape[3],nr.shape[4]]):nr}var Hk=N$1({avgPool3d_:hH});function gH(o,i=0){E(o.length>=1,()=>"Pass at least one tensor to concat");let s=ni(o,"tensors","concat","string_or_numeric");if(s[0].dtype==="complex64"&&s.forEach(ct=>{if(ct.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${ct.dtype}. `)}),s.length===1)return Ur(s[0]);let _=s,_e={axis:i};return T$1.runKernel(ta,_,_e)}var yt=N$1({concat_:gH});function xH(o,i,s=!1,_=!1){let _e=v(o,"a","matMul"),ct=v(i,"b","matMul");[_e,ct]=Oe(_e,ct);let Mt={a:_e,b:ct},Ft={transposeA:s,transposeB:_};return T$1.runKernel(Zo,Mt,Ft)}var Ze=N$1({matMul_:xH});function yH(o){let i={x:v(o,"x","sigmoid","float32")};return T$1.runKernel(bs,i)}var Ea=N$1({sigmoid_:yH});function bH(o,i,s){let _=v(o,"x","slice","string_or_numeric");if(_.rank===0)throw new Error("Slicing scalar is not possible");let _e={x:_},ct={begin:i,size:s};return T$1.runKernel(ha,_e,ct)}var Xe=N$1({slice_:bH});function CH(o){let i={x:v(o,"x","tanh","float32")};return T$1.runKernel(Es,i)}var kl=N$1({tanh_:CH});function wH(o,i,s,_,_e,ct){let Mt=v(o,"forgetBias","basicLSTMCell"),Ft=v(i,"lstmKernel","basicLSTMCell"),Ut=v(s,"lstmBias","basicLSTMCell"),Xt=v(_,"data","basicLSTMCell"),Kt=v(_e,"c","basicLSTMCell"),nr=v(ct,"h","basicLSTMCell"),rr=yt([Xt,nr],1),or=Ze(rr,Ft),hr=Ce$1(or,Ut),fr=hr.shape[0],yr=hr.shape[1]/4,Lr=[fr,yr],Br=Xe(hr,[0,0],Lr),Vr=Xe(hr,[0,yr],Lr),Wr=Xe(hr,[0,2*yr],Lr),ro=Xe(hr,[0,3*yr],Lr),no=Ce$1(se(Ea(Br),kl(Vr)),se(Kt,Ea(Ce$1(Mt,Wr))));return[no,se(kl(no),Ea(ro))]}var Kk=N$1({basicLSTMCell_:wH});function SH(o,i,s){let _=v(o,"x","batchToSpaceND"),_e=i.reduce((Ft,Ut)=>Ft*Ut);E(_.rank>=1+i.length,()=>`input rank is ${_.rank} but should be > than blockShape.length ${i.length}`),E(s.length===i.length,()=>`crops.length is ${s.length} but should be equal to blockShape.length  ${i.length}`),E(_.shape[0]%_e==0,()=>`input tensor batch is ${_.shape[0]} but is not divisible by the product of the elements of blockShape ${i.join(" * ")} === ${_e}`);let ct={x:_},Mt={blockShape:i,crops:s};return T$1.runKernel(Js,ct,Mt)}var fd=N$1({batchToSpaceND_:SH});function qk(o){let i;return i=o.rank===0||o.rank===1?W$1(o,[1,1,1,o.size]):o.rank===2?W$1(o,[1,1,o.shape[0],o.shape[1]]):o.rank===3?W$1(o,[1,o.shape[0],o.shape[1],o.shape[2]]):o,i}function IH(o,i,s,_,_e,ct){ct==null&&(ct=.001);let Mt,Ft,Ut=v(o,"x","batchNorm"),Xt=v(i,"mean","batchNorm"),Kt=v(s,"variance","batchNorm");_e!=null&&(Mt=v(_e,"scale","batchNorm")),_!=null&&(Ft=v(_,"offset","batchNorm")),E(Xt.rank===Kt.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),E(Ft==null||Xt.rank===Ft.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),E(Mt==null||Xt.rank===Mt.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let nr={x:qk(Ut),scale:Mt,offset:Ft,mean:Xt,variance:Kt},rr={varianceEpsilon:ct},or=T$1.runKernel(In,nr,rr);return W$1(or,Ut.shape)}var nu=N$1({batchNorm_:IH});function vH(o,i,s,_,_e,ct){let Mt,Ft,Ut=v(o,"x","batchNorm"),Xt=v(i,"mean","batchNorm"),Kt=v(s,"variance","batchNorm");return _e!=null&&(Mt=v(_e,"scale","batchNorm")),_!=null&&(Ft=v(_,"offset","batchNorm")),E(Ut.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${Ut.rank}.`),E(Xt.rank===2||Xt.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${Xt.rank}.`),E(Kt.rank===2||Kt.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${Kt.rank}.`),Mt!=null&&E(Mt.rank===2||Mt.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${Mt.rank}.`),Ft!=null&&E(Ft.rank===2||Ft.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${Ft.rank}.`),nu(Ut,Xt,Kt,Ft,Mt,ct)}var jk=N$1({batchNorm2d_:vH});function kH(o,i,s,_,_e,ct){let Mt,Ft,Ut=v(o,"x","batchNorm"),Xt=v(i,"mean","batchNorm"),Kt=v(s,"variance","batchNorm");return _e!=null&&(Mt=v(_e,"scale","batchNorm")),_!=null&&(Ft=v(_,"offset","batchNorm")),E(Ut.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${Ut.rank}.`),E(Xt.rank===3||Xt.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${Xt.rank}.`),E(Kt.rank===3||Kt.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${Kt.rank}.`),Mt!=null&&E(Mt.rank===3||Mt.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${Mt.rank}.`),Ft!=null&&E(Ft.rank===3||Ft.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${Ft.rank}.`),nu(Ut,Xt,Kt,Ft,Mt,ct)}var Xk=N$1({batchNorm3d_:kH});function NH(o,i,s,_,_e,ct){let Mt,Ft,Ut=v(o,"x","batchNorm"),Xt=v(i,"mean","batchNorm"),Kt=v(s,"variance","batchNorm");return _e!=null&&(Mt=v(_e,"scale","batchNorm")),_!=null&&(Ft=v(_,"offset","batchNorm")),E(Ut.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${Ut.rank}.`),E(Xt.rank===4||Xt.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${Xt.rank}.`),E(Kt.rank===4||Kt.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${Kt.rank}.`),Mt!=null&&E(Mt.rank===4||Mt.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${Mt.rank}.`),Ft!=null&&E(Ft.rank===4||Ft.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${Ft.rank}.`),nu(Ut,Xt,Kt,Ft,Mt,ct)}var Yk=N$1({batchNorm4d_:NH});function TH(o,i,s){let _=v(o,"x","bincount"),_e=v(i,"weights","bincount");E(_.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${_.dtype}`),E(s>=0,()=>`size must be non-negative, but got ${s}.`),E(_e.size===_.size||_e.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${_.shape}, weights shape: ${_e.shape}.`);let ct={x:_,weights:_e},Mt={size:s};return T$1.runKernel(Jo,ct,Mt)}var hd=N$1({bincount_:TH});function _H(o,i){let s=v(o,"x","bitwiseAnd"),_=v(i,"y","bitwiseAnd");if(!br(s.shape,_.shape))throw new Error(`BitwiseAnd: Tensors must have the same shape. x: ${s.shape}, y: ${_.shape}`);if(s.dtype!=="int32"||_.dtype!=="int32")throw new Error(`BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ${s.dtype} and type of y: ${_.dtype}`);let _e={a:s,b:_};return T$1.runKernel(qa,_e)}var Qk=N$1({bitwiseAnd_:_H});function EH(o,i){let s=v(o,"s0","broadcastArgs","int32"),_=v(i,"s1","broadcastArgs","int32");if(s.rank!==1)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${s.rank}`);if(_.rank!==1)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${_.rank}`);let _e={s0:s,s1:_};return T$1.runKernel(ea,_e)}var Zk=N$1({broadcastArgs_:EH});function $H(o,i){let s=v(o,"broadcastTo","x"),_=s.shape;if(Ct(i),i.length<s.rank)throw new Error(`broadcastTo(): shape.length=${i.length} < input.rank=${s.rank}.`);if(i.length>s.rank){let Ut=s.shape.slice();for(;Ut.length<i.length;)Ut.unshift(1);s=W$1(s,Ut)}let _e=s.shape,ct=Array.from(i);for(let Ut=i.length-1;Ut>=0;Ut--)if(_e[Ut]===i[Ut])ct[Ut]=1;else if(s.shape[Ut]!==1)throw new Error(`broadcastTo(): [${_}] cannot be broadcast to [${i}].`);if(ct.map((Ut,Xt)=>Ut>1?Xt:-1).filter(Ut=>Ut>=0).length===0)return Ur(s);let Mt={x:s},Ft={reps:ct};return T$1.runKernel(po,Mt,Ft)}var su=N$1({broadcastTo_:$H});function RH(o){let i={x:v(o,"x","ceil","float32")};return T$1.runKernel(en,i)}var Jk=N$1({ceil_:RH});function $a(o,i,s){Ct(o);let _={shape:o,value:i,dtype:s=s||Ei(i)};return T$1.runKernel(sa,{},_)}function DH(o,i,s){let _=v(o,"x","clipByValue");if(E(i<=s,()=>`Error in clip: min (${i}) must be less than or equal to max (${s}).`),i===s)return $a(_.shape,i,_.dtype);let _e={x:_},ct={clipValueMin:i,clipValueMax:s};return T$1.runKernel(bo,_e,ct)}var e2=N$1({clipByValue_:DH});function AH(o){return yt(o,0)}var t2=N$1({concat1d_:AH});function FH(o,i){return yt(o,i)}var r22=N$1({concat2d_:FH});function PH(o,i){return yt(o,i)}var o2=N$1({concat3d_:PH});function OH(o,i){return yt(o,i)}var n2=N$1({concat4d_:OH});function MH(o,i,s,_,_e="NHWC",ct=[1,1],Mt){let Ft=v(o,"x","conv2d","float32"),Ut=v(i,"filter","conv2d","float32"),Xt=Ft,Kt=!1;Ft.rank===3&&(Kt=!0,Xt=W$1(Ft,[1,Ft.shape[0],Ft.shape[1],Ft.shape[2]])),E(Xt.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${Xt.rank}.`),E(Ut.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${Ut.rank}.`),Lt$2("conv2d",_,Mt);let nr=_e==="NHWC"?Xt.shape[3]:Xt.shape[1];E(nr===Ut.shape[2],()=>`Error in conv2d: depth of input (${nr}) must match input depth for filter ${Ut.shape[2]}.`),E(gr(s,ct),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${s} and dilations '${ct}'`),E(Ta(ct),()=>"Error in conv2D: Dilated rates should be larger than 0."),E(Ta(s),()=>"Error in conv2D: Strides should be larger than 0.");let rr={x:Xt,filter:Ut},or={strides:s,pad:_,dataFormat:_e,dilations:ct,dimRoundingMode:Mt},hr=T$1.runKernel(tn,rr,or);return Kt?W$1(hr,[hr.shape[1],hr.shape[2],hr.shape[3]]):hr}var au=N$1({conv2d_:MH});function LH(o,i,s,_,_e="NWC",ct=1,Mt){let Ft=v(o,"x","conv1d"),Ut=v(i,"filter","conv1d"),Xt=Ft,Kt=!1;Ft.rank===2&&(Kt=!0,Xt=W$1(Ft,[1,Ft.shape[0],Ft.shape[1]])),E(Xt.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${Xt.rank}.`),E(Ut.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${Ut.rank}.`),Lt$2("conv1d",_,Mt),E(Xt.shape[2]===Ut.shape[1],()=>`Error in conv1d: depth of input (${Xt.shape[2]}) must match input depth for filter ${Ut.shape[1]}.`),E(gr(s,ct),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${s} and dilation '${ct}'`),E(Ta(ct),()=>"Error in conv1D: Dilated rates should be larger than 0."),E(Ta(s),()=>"Error in conv1D: Stride should be larger than 0."),E(_e==="NWC",()=>`Error in conv1d: got dataFormat of ${_e} but only NWC is currently supported.`);let nr=W$1(Ut,[1,Ut.shape[0],Ut.shape[1],Ut.shape[2]]),rr=W$1(Xt,[Xt.shape[0],1,Xt.shape[1],Xt.shape[2]]),or=au(rr,nr,[1,s],_,"NHWC",[1,ct],Mt);return W$1(or,Kt?[or.shape[2],or.shape[3]]:[or.shape[0],or.shape[2],or.shape[3]])}var s2=N$1({conv1d_:LH});function BH(o,i,s,_,_e,ct="NHWC",Mt){E(o.length===i.rank,()=>`Length of inShape (${o.length}) and rank of dy (${i.rank}) must match`);let Ft=o,Ut=i,Xt=!1;i.rank===3&&(Xt=!0,Ut=W$1(i,[1,i.shape[0],i.shape[1],i.shape[2]]),Ft=[1,o[0],o[1],o[2]]),E(Ft.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${Ft.length}.`),E(Ut.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${Ut.rank}`),E(s.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${s.rank}`);let Kt=ct==="NHWC"?Ft[3]:Ft[1],nr=ct==="NHWC"?Ut.shape[3]:Ut.shape[1];E(Kt===s.shape[2],()=>`Error in conv2dDerInput: depth of input (${Kt}) must match input depth for filter ${s.shape[2]}.`),E(nr===s.shape[3],()=>`Error in conv2dDerInput: depth of output (${nr}) must match output depth for filter ${s.shape[3]}.`),Lt$2("conv2dDerInput",_e,Mt);let rr={dy:Ut,filter:s},or={strides:_,pad:_e,dataFormat:ct,dimRoundingMode:Mt,inputShape:Ft},hr=T$1.runKernel(rn,rr,or);return Xt?W$1(hr,[hr.shape[1],hr.shape[2],hr.shape[3]]):hr}var gd=N$1({conv2DBackpropInput_:BH});function zH(o,i,s,_,_e,ct){let Mt=v(o,"x","conv2dTranspose"),Ft=v(i,"filter","conv2dTranspose");return gd(s,Mt,Ft,_,_e,"NHWC",ct)}var a2=N$1({conv2dTranspose_:zH});function VH(o,i,s,_,_e="NDHWC",ct=[1,1,1]){let Mt=v(o,"x","conv3d"),Ft=v(i,"filter","conv3d"),Ut=Mt,Xt=!1;Mt.rank===4&&(Xt=!0,Ut=W$1(Mt,[1,Mt.shape[0],Mt.shape[1],Mt.shape[2],Mt.shape[3]])),E(Ut.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${Ut.rank}.`),E(Ft.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${Ft.rank}.`),E(Ut.shape[4]===Ft.shape[3],()=>`Error in conv3d: depth of input (${Ut.shape[4]}) must match input depth for filter ${Ft.shape[3]}.`),E(gr(s,ct),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${s} and dilations '${ct}'`),E(_e==="NDHWC",()=>`Error in conv3d: got dataFormat of ${_e} but only NDHWC is currently supported.`),E(Ta(ct),()=>"Error in conv3D: Dilated rates should be larger than 0."),E(Ta(s),()=>"Error in conv3D: Strides should be larger than 0.");let Kt={x:Ut,filter:Ft},nr={strides:s,pad:_,dataFormat:_e,dilations:ct},rr=T$1.runKernel(on,Kt,nr);return Xt?W$1(rr,[rr.shape[1],rr.shape[2],rr.shape[3],rr.shape[4]]):rr}var i2=N$1({conv3d_:VH});function WH(o,i,s,_,_e){E(o.length===i.rank,()=>`Length of inShape (${o.length}) and rank of dy (${i.rank}) must match`);let ct=o,Mt=i,Ft=!1;i.rank===4&&(Ft=!0,Mt=W$1(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]]),ct=[1,o[0],o[1],o[2],o[3]]);let Ut=ct[4],Xt=Mt.shape[4];E(ct.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${ct.length}.`),E(Mt.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${Mt.rank}`),E(s.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${s.rank}`),E(Ut===s.shape[3],()=>`Error in conv3dDerInput: depth of input (${Ut}) must match input depth for filter ${s.shape[3]}.`),E(Xt===s.shape[4],()=>`Error in conv3dDerInput: depth of output (${Xt}) must match output depth for filter ${s.shape[4]}.`);let Kt={dy:Mt,filter:s},nr={pad:_e,strides:_,inputShape:ct},rr=T$1.runKernel(nn,Kt,nr);return Ft?W$1(rr,[rr.shape[1],rr.shape[2],rr.shape[3],rr.shape[4]]):rr}var u2=N$1({conv3DBackpropInput_:WH});function UH(o,i,s,_,_e){let ct=v(o,"x","conv3dTranspose"),Mt=v(i,"filter","conv3dTranspose");return u2(s,ct,Mt,_,_e)}var p2=N$1({conv3dTranspose_:UH});function GH(o){let i={x:v(o,"x","cos","float32")};return T$1.runKernel(sn,i)}var c2=N$1({cos_:GH});function HH(o){let i={x:v(o,"x","cosh","float32")};return T$1.runKernel(an,i)}var l2=N$1({cosh_:HH});function KH(o,i=0,s=!1,_=!1){let _e={x:v(o,"x","cumprod")},ct={axis:i,exclusive:s,reverse:_};return T$1.runKernel(un,_e,ct)}var m2=N$1({cumprod_:KH});function qH(o,i=0,s=!1,_=!1){let _e={x:v(o,"x","cumsum")},ct={axis:i,exclusive:s,reverse:_};return T$1.runKernel(pn,_e,ct)}var d2=N$1({cumsum_:qH});function jH(o,i,s,_=!1){let _e=v(o,"x","denseBincount"),ct=v(i,"weights","denseBincount");E(_e.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${_e.dtype}`),E(_e.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${_e.rank}.`),E(s>=0,()=>`size must be non-negative, but got ${s}.`),E(ct.size===_e.size||ct.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${_e.shape}, weights shape: ${ct.shape}.`);let Mt={x:_e,weights:ct},Ft={size:s,binaryOutput:_};return T$1.runKernel(ra,Mt,Ft)}var f2=N$1({denseBincount_:jH});function XH(o,i,s="NHWC"){let _=v(o,"x","depthToSpace","float32"),_e=s==="NHWC"?_.shape[1]:_.shape[2],ct=s==="NHWC"?_.shape[2]:_.shape[3],Mt=s==="NHWC"?_.shape[3]:_.shape[1];E(i>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${i}`),E(_e*i>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${_e} and ${i}  for depthToSpace with input shape
    ${_.shape}`),E(ct*i>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${ct} and ${i} for depthToSpace with input shape
        ${_.shape}`),E(Mt%(i*i)==0,()=>`Dimension size must be evenly divisible by ${i*i} but is ${Mt} for depthToSpace with input shape ${_.shape}`);let Ft={x:_},Ut={blockSize:i,dataFormat:s};return T$1.runKernel(ln,Ft,Ut)}var h2=N$1({depthToSpace_:XH});function YH(o,i,s,_,_e="NHWC",ct=[1,1],Mt){let Ft=v(o,"x","depthwiseConv2d","float32"),Ut=v(i,"filter","depthwiseConv2d","float32"),Xt=Ft,Kt=!1;Ft.rank===3&&(Kt=!0,Xt=W$1(Ft,[1,Ft.shape[0],Ft.shape[1],Ft.shape[2]])),E(Xt.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${Xt.rank}.`),E(Ut.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${Ut.rank}.`);let nr=_e==="NHWC"?Xt.shape[3]:Xt.shape[1];E(nr===Ut.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${nr}) must match the inChannels dimension in filter ${Ut.shape[2]}.`),Lt$2("depthwiseConv2d",_,Mt);let rr={x:Xt,filter:Ut},or={strides:s,pad:_,dataFormat:_e,dilations:ct,dimRoundingMode:Mt},hr=T$1.runKernel(mn,rr,or);return Kt?W$1(hr,[hr.shape[1],hr.shape[2],hr.shape[3]]):hr}var sc=N$1({depthwiseConv2d_:YH});function QH(o){let i={x:v(o,"x","diag")};return T$1.runKernel(oa,i)}var g2=N$1({diag_:QH});function ZH(o,i,s,_,_e=[1,1],ct="NHWC"){let Mt=v(o,"x","dilation2d"),Ft=v(i,"filter","dilation2d");E(Mt.rank===3||Mt.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${Mt.rank}.`),E(Ft.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${Ft.rank}.`),E(ct==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${ct}`);let Ut=Mt,Xt=!1;Mt.rank===3&&(Ut=W$1(Mt,[1,Mt.shape[0],Mt.shape[1],Mt.shape[2]]),Xt=!0),E(Ut.shape[3]===Ft.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${Ut.shape[3]} vs ${Ft.shape[2]}`);let Kt={x:Ut,filter:Ft},nr={strides:s,pad:_,dilations:_e},rr=T$1.runKernel(dn,Kt,nr);return Xt?W$1(rr,[rr.shape[1],rr.shape[2],rr.shape[3]]):rr}var x2=N$1({dilation2d_:ZH}),Sr={};function y2(o,i){let s=o.length,_=[];for(let _e=0;_e<s;_e++){let ct=s-1-_e,Mt=o[ct]||1;(i[i.length-1-_e]||1)>1&&Mt===1&&_.unshift(ct)}return _}function xd(o,i){let s=[];for(let _=0;_<i.length;_++){let _e=o[o.length-_-1],ct=i.length-_-1,Mt=i[ct];(_e==null||_e===1&&Mt>1)&&s.unshift(ct)}return s}function rt(o,i){let s=Math.max(o.length,i.length),_=new Array(s);for(let _e=0;_e<s;_e++){let ct=o[o.length-_e-1];ct==null&&(ct=1);let Mt=i[i.length-_e-1];if(Mt==null&&(Mt=1),ct===1)_[s-_e-1]=Mt;else if(Mt===1)_[s-_e-1]=ct;else{if(ct!==Mt)throw Error(`Operands could not be broadcast together with shapes ${o} and ${i}.`);_[s-_e-1]=ct}}return _}function JH(o,i){let s=v(o,"a","equal","string_or_numeric"),_=v(i,"b","equal","string_or_numeric");[s,_]=Oe(s,_),rt(s.shape,_.shape);let _e={a:s,b:_};return T$1.runKernel(xn,_e)}qe(Sr,{assertAndGetBroadcastShape:()=>rt,getBroadcastDims:()=>y2,getReductionAxes:()=>xd});var yd=N$1({equal_:JH});function eK(o,i,s){let _=v(i,"a","where"),_e=v(s,"b","where"),ct=v(o,"condition","where","bool"),Mt=rt(rt(ct.shape,_.shape),_e.shape),Ft={condition:su(ct,Mt),t:su(_,Mt),e:su(_e,Mt)};return T$1.runKernel(fa,Ft)}var lo=N$1({where_:eK});function tK(o){let i={x:v(o,"x","zerosLike")};return T$1.runKernel(Sa,i)}var Gt$1=N$1({zerosLike_:tK});function rK(o,i){let s=v(o,"a","div"),_=v(i,"b","div");[s,_]=Oe(s,_);let _e=je(s,_),ct=Gt$1(_e),Mt=yd(_,ct);return lo(Mt,ct,_e)}var b2=N$1({divNoNan_:rK});function oK(o,i){let s=v(o,"t1","dot"),_=v(i,"t2","dot");E(!(s.rank!==1&&s.rank!==2||_.rank!==1&&_.rank!==2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${s.rank} and ${_.rank}.`);let _e=s.rank===1?s.size:s.shape[1],ct=_.rank===1?_.size:_.shape[0];if(E(_e===ct,()=>`Error in dot: inner dimensions of inputs must match, but got ${_e} and ${ct}.`),s.rank===1&&_.rank===1){let Mt=W$1(s,[1,-1]),Ft=W$1(_,[-1,1]),Ut=Ze(Mt,Ft);return W$1(Ut,[])}if(s.rank===1&&_.rank===2){let Mt=W$1(s,[1,-1]),Ft=W$1(_,[_.shape[0],_.shape[1]]),Ut=Ze(Mt,Ft);return W$1(Ut,[Ut.size])}if(s.rank===2&&_.rank===1){let Mt=W$1(_,[-1,1]),Ft=Ze(s,Mt);return W$1(Ft,[Ft.size])}{let Mt=W$1(_,[_.shape[0],_.shape[1]]);return Ze(s,Mt)}}var C2=N$1({dot_:oK});function nK(o,...i){let s=i.map((_e,ct)=>v(_e,`tensors${ct}`,"einsum")),_={equation:o};return T$1.runKernel(Bi,s,_)}var iu=N$1({einsum_:nK});function sK(o){let i={x:v(o,"x","elu","float32")};return T$1.runKernel(hn,i)}var bd=N$1({elu_:sK});function aK(o,i){let s=v(o,"x","ensureShape","string_or_numeric");if(!ZC(s.shape,i))throw new Error(`EnsureShape: Shape of tensor ${s.shape} is not compatible with expected shape ${i}`);return o}var w2=N$1({ensureShape_:aK});function iK(o){let i=v(o,"x","erf");E(i.dtype==="int32"||i.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),i.dtype==="int32"&&(i=Ue(i,"float32"));let s={x:i};return T$1.runKernel(gn,s)}var S2=N$1({erf_:iK});function zw(o,i){for(let s=0;s<o.length;++s)if(o[o.length-s-1]!==i-1-s)return!1;return!0}function I2(o,i,s){let _=o.length+i.length,_e=[],ct=0,Mt=0;for(let Ft=0;Ft<_;Ft++)s.indexOf(Ft)===-1?_e.push(o[ct++]):_e.push(i[Mt++]);return _e}function uK(o,i){let s=[],_=o.length;for(let _e=0;_e<_;_e++)i.indexOf(_e)===-1&&s.push(o[_e]);return[s,i.map(_e=>o[_e])]}function ii(o,i){return I2(o,i.map(s=>1),i)}function pK(o,i,s){E(zw(i,s),()=>`${o} supports only inner-most axes for now. Got axes ${i} and rank-${s} input.`)}function cK(o,i){if(zw(o,i))return null;let s=[];for(let _=0;_<i;++_)o.indexOf(_)===-1&&s.push(_);return o.forEach(_=>s.push(_)),s}function lK(o){return o.map((i,s)=>[s,i]).sort((i,s)=>i[1]-s[1]).map(i=>i[0])}function mK(o,i){let s=[];for(let _=i-o;_<i;++_)s.push(_);return s}function fK(o,i=null,s=!1){let _={x:v(o,"x","max")},_e={reductionIndices:i,keepDims:s};return T$1.runKernel(zn,_,_e)}var Ra=N$1({max_:fK});function hK(o,i=null,s=!1){let _={x:v(o,"x","min")},_e={axis:i,keepDims:s};return T$1.runKernel(Gn,_,_e)}var Nl=N$1({min_:hK});function gK(o,i){let s=v(o,"base","pow"),_=v(i,"exp","pow");[s,_]=Oe(s,_);let _e={a:s,b:_};return T$1.runKernel(ts,_e)}var ui=N$1({pow_:gK});function ke(o,i){if((Pt$2(o)&&i!=="string"||Array.isArray(o))&&i!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(i==="string"&&Pt$2(o)&&!(o instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return wr(o,[],[],i)}function xK(o){let i={x:v(o,"x","sqrt","float32")};return T$1.runKernel(ws,i)}var Rr=N$1({sqrt_:xK});function yK(o){let i=v(o,"x","square");return T$1.runKernel("Square",{x:i},{})}var Zt=N$1({square_:yK});function bK(o,i=null,s=!1){let _=v(o,"x","sum");_.dtype==="bool"&&(_=Ue(_,"int32"));let _e={x:_},ct={axis:i,keepDims:s};return T$1.runKernel(Ss,_e,ct)}var ot=N$1({sum_:bK});function CK(o,i="euclidean",s=null,_=!1){let _e=v2(o=v(o,"x","norm"),i,s),ct=_e.shape;if(_){let Mt=_i(s,o.shape);ct=ii(_e.shape,Mt)}return W$1(_e,ct)}function v2(o,i,s=null){if(o.rank===0)return Qt(o);if(o.rank!==1&&s===null)return v2(W$1(o,[-1]),i,s);if(o.rank===1||typeof s=="number"||Array.isArray(s)&&s.length===1){if(i===1)return ot(Qt(o),s);if(i===1/0)return Ra(Qt(o),s);if(i===-1/0)return Nl(Qt(o),s);if(i==="euclidean"||i===2)return Rr(ot(ui(Qt(o),ke(2,"int32")),s));throw new Error(`Error in norm: invalid ord value: ${i}`)}if(Array.isArray(s)&&s.length===2){if(i===1)return Ra(ot(Qt(o),s[0]),s[1]-1);if(i===1/0)return Ra(ot(Qt(o),s[1]),s[0]);if(i===-1/0)return Nl(ot(Qt(o),s[1]),s[0]);if(i==="fro"||i==="euclidean")return Rr(ot(Zt(o),s));throw new Error(`Error in norm: invalid ord value: ${i}`)}throw new Error(`Error in norm: invalid axis: ${s}`)}var Vu=N$1({norm_:CK});function wK(o,i=null,s=!1){return Vu(o,"euclidean",i,s)}var k2=N$1({euclideanNorm_:wK});function SK(o){let i={x:v(o,"x","exp")};return T$1.runKernel(yn,i)}var _o=N$1({exp_:SK});function IK(o,i=0){let s=v(o,"x","expandDims","string_or_numeric");E(i<=s.rank,()=>"Axis must be <= rank of the tensor");let _={input:s},_e={dim:i};return T$1.runKernel(na,_,_e)}var Ms=N$1({expandDims_:IK});function vK(o){let i={x:v(o,"x","expm1")};return T$1.runKernel(bn,i)}var N2=N$1({expm1_:vK});function kK(o,i){let s=v(o,"x","tile","string_or_numeric");E(s.rank===i.length,()=>`Error in transpose: rank of input ${s.rank} must match length of reps ${i}.`);let _={x:s},_e={reps:i};return T$1.runKernel(po,_,_e)}var uu=N$1({tile_:kK});function NK(o,i,s,_="float32"){i==null&&(i=o);let _e=me$1([o,i],_),ct=o<=i?o:i;for(let Ft=0;Ft<ct;++Ft)_e.set(1,Ft,Ft);let Mt=W$1(_e.toTensor(),[o,i]);if(s==null)return Mt;if(s.length===1)return uu(Ms(Mt,0),[s[0],1,1]);if(s.length===2)return uu(Ms(Ms(Mt,0),0),[s[0],s[1],1,1]);if(s.length===3)return uu(Ms(Ms(Ms(Mt,0),0),0),[s[0],s[1],s[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${s.length}D.`)}var Cd=N$1({eye_:NK});function TK(o){let i={x:v(o,"x","floor","float32")};return T$1.runKernel(wn,i)}var wd=N$1({floor_:TK});function _K(o,i,s=0,_=0){let _e={x:v(o,"x","gather"),indices:v(i,"indices","gather","int32")},ct={axis:s,batchDims:_};return T$1.runKernel(aa,_e,ct)}var Sd=N$1({gather_:_K});function EK(o,i){let s=v(o,"a","greater","string_or_numeric"),_=v(i,"b","greater","string_or_numeric");[s,_]=Oe(s,_),rt(s.shape,_.shape);let _e={a:s,b:_};return T$1.runKernel(kn,_e)}var Wu=N$1({greater_:EK});function $K(o,i){let s=v(o,"a","greaterEqual","string_or_numeric"),_=v(i,"b","greaterEqual","string_or_numeric");[s,_]=Oe(s,_),rt(s.shape,_.shape);let _e={a:s,b:_};return T$1.runKernel(Nn,_e)}var Id=N$1({greaterEqual_:$K});function RK(o){let i={input:v(o,"input","imag")};return T$1.runKernel(Wi,i)}var pu=N$1({imag_:RK});function DK(o){let i={x:v(o,"x","isFinite")};return T$1.runKernel(Tn,i)}var T2=N$1({isFinite_:DK});function AK(o){let i={x:v(o,"x","isInf")};return T$1.runKernel(_n,i)}var _2=N$1({isInf_:AK});function FK(o){let i={x:v(o,"x","isNaN")};return T$1.runKernel(En,i)}var E2=N$1({isNaN_:FK});function PK(o,i=.2){let s={x:v(o,"x","leakyRelu")},_={alpha:i};return T$1.runKernel($n,s,_)}var vd=N$1({leakyRelu_:PK});function OK(o,i){let s=v(o,"a","less","string_or_numeric"),_=v(i,"b","less","string_or_numeric");[s,_]=Oe(s,_),rt(s.shape,_.shape);let _e={a:s,b:_};return T$1.runKernel(Rn,_e)}var Tl=N$1({less_:OK});function MK(o,i){let s=v(o,"a","lessEqual","string_or_numeric"),_=v(i,"b","lessEqual","string_or_numeric");[s,_]=Oe(s,_),rt(s.shape,_.shape);let _e={a:s,b:_};return T$1.runKernel(Dn,_e)}var ac=N$1({lessEqual_:MK});function $2(o,i,s){if(s<=0)throw new Error("The number of values should be positive.");let _={start:o,stop:i,num:s};return T$1.runKernel(An,{},_)}function LK(o,i=5,s=1,_=1,_e=.5){let ct=v(o,"x","localResponseNormalization");E(ct.rank===4||ct.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${ct.rank}.`),E(Ka(i),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${i}.`);let Mt=ct,Ft=!1;ct.rank===3&&(Ft=!0,Mt=W$1(ct,[1,ct.shape[0],ct.shape[1],ct.shape[2]]));let Ut={x:Mt},Xt={depthRadius:i,bias:s,alpha:_,beta:_e},Kt=T$1.runKernel(Bn,Ut,Xt);return Ft?W$1(Kt,[Kt.shape[1],Kt.shape[2],Kt.shape[3]]):Kt}var R2=N$1({localResponseNormalization_:LK});function BK(o){let i={x:v(o,"x","log","float32")};return T$1.runKernel(Fn,i)}var pi=N$1({log_:BK});function zK(o){let i={x:v(o,"x","log1p")};return T$1.runKernel(Pn,i)}var kd=N$1({log1p_:zK});function VK(o){return E(qs(o),()=>"The f passed in grad(f) must be a function"),(i,s)=>{let _=v(i,"x","tf.grad","string_or_numeric"),_e=s!=null?v(s,"dy","tf.grad"):null;return T$1.tidy(()=>{let{value:ct,grads:Mt}=T$1.gradients(()=>o(_),[_],_e);return _e!=null&&xt$1(ct.shape,_e.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),Nd(Mt),Mt[0]})}}function WK(o){return E(qs(o),()=>"The f passed in grads(f) must be a function"),(i,s)=>{E(Array.isArray(i),()=>"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s");let _=ni(i,"args","tf.grads","string_or_numeric"),_e=s!=null?v(s,"dy","tf.grads"):null;return T$1.tidy(()=>{let{value:ct,grads:Mt}=T$1.gradients(()=>o(..._),_,_e);return _e!=null&&xt$1(ct.shape,_e.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),Nd(Mt),Mt})}}function UK(o){return E(qs(o),()=>"The f passed in valueAndGrad(f) must be a function"),(i,s)=>{E(i instanceof mt,()=>"The x passed in valueAndGrad(f)(x) must be a tensor"),E(s==null||s instanceof mt,()=>"The dy passed in valueAndGrad(f)(x, dy) must be a tensor");let{grads:_,value:_e}=T$1.gradients(()=>o(i),[i],s);return Nd(_),{grad:_[0],value:_e}}}function GK(o){return E(qs(o),()=>"The f passed in valueAndGrads(f) must be a function"),(i,s)=>{E(Array.isArray(i)&&i.every(_e=>_e instanceof mt),()=>"The args passed in valueAndGrads(f)(args) must be array of tensors"),E(s==null||s instanceof mt,()=>"The dy passed in valueAndGrads(f)(args, dy) must be a tensor");let _=T$1.gradients(()=>o(...i),i,s);return s!=null&&xt$1(_.value.shape,s.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),Nd(_.grads),_}}function Vw(o,i){E(qs(o),()=>"The f passed in variableGrads(f) must be a function"),E(i==null||Array.isArray(i)&&i.every(Ut=>Ut instanceof ri),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");let s=i!=null;if(!s){i=[];for(let Ut in T$1.registeredVariables)i.push(T$1.registeredVariables[Ut])}let _=s?i.filter(Ut=>!Ut.trainable):null,_e=i.length;i=i.filter(Ut=>Ut.trainable),E(i.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${_e} variables is trainable.`);let{value:ct,grads:Mt}=T$1.gradients(o,i,null,!0);E(Mt.some(Ut=>Ut!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),E(ct.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${ct.rank} tensor`);let Ft={};return i.forEach((Ut,Xt)=>{Mt[Xt]!=null&&(Ft[Ut.name]=Mt[Xt])}),_!=null&&_.forEach(Ut=>Ft[Ut.name]=null),{value:ct,grads:Ft}}function Ir(o){return T$1.customGrad(o)}function Nd(o){if(o.filter(i=>i==null).length>0)throw new Error(`Cannot compute gradient of y=f(x) with respect to x. Make sure that
    the f you passed encloses all operations that lead from x to y.`)}function HK(o){let i={x:v(o,"x","neg")};return T$1.runKernel(pa,i)}var pr=N$1({neg_:HK});function KK(o){let i={x:v(o,"x","softplus")};return T$1.runKernel(Cs,i)}var Td=N$1({softplus_:KK});function qK(o){let i=v(o,"x","logSigmoid");return Ir(s=>({value:pr(Td(pr(s))),gradFunc:_=>se(_,Ea(pr(s)))}))(i)}var D2=N$1({logSigmoid_:qK});function jK(o,i){let s=v(o,"a","sub"),_=v(i,"b","sub");[s,_]=Oe(s,_);let _e={a:s,b:_};return T$1.runKernel(Ts,_e)}var Te$1=N$1({sub_:jK});function XK(o,i=-1){let s=v(o,"logits","logSoftmax");if(i===-1&&(i=s.rank-1),i!==s.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${s.rank} and axis was ${i}`);return Ir((_,_e)=>{let ct=Ra(_,i,!0),Mt=Te$1(_,ct),Ft=Te$1(Ue(Mt,"float32"),pi(ot(_o(Mt),i,!0)));return _e([Ft]),{value:Ft,gradFunc:(Ut,Xt)=>{let[Kt]=Xt,nr=_o(Kt);return Te$1(Ut,se(ot(Ut,i,!0),nr))}}})(s)}var A2=N$1({logSoftmax_:XK});function YK(o,i=null,s=!1){let _=v(o,"x","logSumExp"),_e=_i(i,_.shape),ct=Ra(_,_e,!0),Mt=Te$1(_,ct),Ft=_o(Mt),Ut=ot(Ft,_e),Xt=pi(Ut),Kt=Ce$1(W$1(ct,Xt.shape),Xt);if(s){let nr=ii(Kt.shape,_e);return W$1(Kt,nr)}return Kt}var _d=N$1({logSumExp_:YK});function QK(o,i){let s=v(o,"a","logicalAnd","bool"),_=v(i,"b","logicalAnd","bool");rt(s.shape,_.shape);let _e={a:s,b:_};return T$1.runKernel(On,_e)}var Uu=N$1({logicalAnd_:QK});function ZK(o){let i={x:v(o,"x","logicalNot","bool")};return T$1.runKernel(Mn,i)}var Ed=N$1({logicalNot_:ZK});function JK(o,i){let s=v(o,"a","logicalOr","bool"),_=v(i,"b","logicalOr","bool");rt(s.shape,_.shape);let _e={a:s,b:_};return T$1.runKernel(Ln,_e)}var $d=N$1({logicalOr_:JK});function eq(o,i){let s=v(o,"a","logicalXor","bool"),_=v(i,"b","logicalXor","bool");return rt(s.shape,_.shape),Uu($d(o,i),Ed(Uu(o,i)))}var F2=N$1({logicalXor_:eq}),Rd=2147483648;function tq(o,i,s="left"){let _=v(o,"sortedSequence","searchSorted"),_e=v(i,"values","searchSorted"),ct=_.shape[_.shape.length-1],Mt=_e.shape[_e.shape.length-1],Ft=W$1(_,[-1,ct]),Ut=W$1(_e,[-1,Mt]);if(Ft.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(Ft.shape[0]!==Ut.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(ze(Ut.shape)>=Rd)throw new Error(`values tensor size must less than ${Rd}`);if(Ft.shape[1]>=Rd)throw new Error(`trailing dim_size must less than ${Rd} for int32 output type, was ${Ft.shape[1]}`);let Xt={sortedSequence:Ft,values:Ut},Kt={side:s};return T$1.runKernel(fs,Xt,Kt)}var _l=N$1({searchSorted_:tq});function P2(o,i){return _l(o,i,"left")}function rq(o,i,s,_,_e){let ct=v(o,"x","maxPool"),Mt=ct,Ft=!1;ct.rank===3&&(Ft=!0,Mt=W$1(ct,[1,ct.shape[0],ct.shape[1],ct.shape[2]])),E(Mt.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${Mt.rank}.`),E(gr(s,1),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '1'`),Lt$2("maxPool",_,_e);let Ut={x:Mt},Xt={filterSize:i,strides:s,pad:_,dimRoundingMode:_e},Kt=T$1.runKernel(Wn,Ut,Xt);return Ft?W$1(Kt,[Kt.shape[1],Kt.shape[2],Kt.shape[3]]):Kt}var Dd=N$1({maxPool_:rq});function oq(o,i=[1,1,1],s,_,_e,ct="NDHWC"){let Mt=v(o,"x","maxPool3d"),Ft=Mt,Ut=!1;Mt.rank===4&&(Ut=!0,Ft=W$1(Mt,[1,Mt.shape[0],Mt.shape[1],Mt.shape[2],Mt.shape[3]])),E(Ft.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${Ft.rank}.`),E(ct==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${ct}`),Lt$2("maxPool3d",_,_e);let Xt={x:Ft},Kt={filterSize:i,strides:s,pad:_,dimRoundingMode:_e,dataFormat:ct},nr=T$1.runKernel(ia,Xt,Kt);return Ut?W$1(nr,[nr.shape[1],nr.shape[2],nr.shape[3],nr.shape[4]]):nr}var O2=N$1({maxPool3d_:oq});function nq(o,i,s,_,_e=!1){let ct={x:v(o,"x","maxPoolWithArgmax")},Mt={filterSize:i,strides:s,pad:_,includeBatchInIndex:_e},Ft=T$1.runKernel(ua,ct,Mt);return{result:Ft[0],indexes:Ft[1]}}var M2=N$1({maxPoolWithArgmax_:nq});function sq(o,i){let s=v(o,"a","maximum"),_=v(i,"b","maximum");[s,_]=Oe(s,_),s.dtype==="bool"&&(s=Ue(s,"int32"),_=Ue(_,"int32")),rt(s.shape,_.shape);let _e={a:s,b:_};return T$1.runKernel(Vn,_e)}var Ad=N$1({maximum_:sq});function aq(o,i=null,s=!1){let _={x:v(o,"x","mean")},_e={axis:i,keepDims:s};return T$1.runKernel(Un,_,_e)}var Gu=N$1({mean_:aq});function Gr(o,i="float32"){if(Ct(o),i==="complex64"){let _=Gr(o,"float32"),_e=Gr(o,"float32");return Er(_,_e)}let s=Gp(ze(o),i);return T$1.makeTensor(s,o,i)}function Da(o,i="float32"){if(Ct(o),i==="complex64"){let _=Da(o,"float32"),_e=Gr(o,"float32");return Er(_,_e)}let s=ml(ze(o),i);return T$1.makeTensor(s,o,i)}function L2(o,i,{indexing:s="xy"}={}){if(s!=="xy"&&s!=="ij")throw new TypeError(`${s} is not a valid third argument to meshgrid`);if(o===void 0)return[];let _=v(o,"x","meshgrid",o instanceof mt?o.dtype:"float32");if(i===void 0)return[_];let _e=v(i,"y","meshgrid",i instanceof mt?i.dtype:"float32"),ct=ze(_.shape),Mt=ze(_e.shape);return s==="xy"?(_=W$1(_,[1,-1]),_e=W$1(_e,[-1,1]),[Ze(Da([Mt,1],_.dtype),_),Ze(_e,Da([1,ct],_e.dtype))]):(_=W$1(_,[-1,1]),_e=W$1(_e,[1,-1]),[Ze(_,Da([1,Mt],_.dtype)),Ze(Da([ct,1],_e.dtype),_e)])}function iq(o,i){let s=v(o,"a","minimum"),_=v(i,"b","minimum");[s,_]=Oe(s,_),s.dtype==="bool"&&(s=Ue(s,"int32"),_=Ue(_,"int32")),rt(s.shape,_.shape);let _e={a:s,b:_};return T$1.runKernel(Hn,_e)}var Hu=N$1({minimum_:iq});function uq(o,i,s){E(s==="reflect"||s==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${s}.`);let _=v(o,"x","mirrorPad");if(_.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");E(i.length===_.rank,()=>`Padding doesn't match input. Must be ${_.rank}. Got ${i.length}.`);let _e=s==="reflect"?1:0;for(let Ft=0;Ft<_.rank;Ft++)E(i[Ft].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),E(i[Ft][0]>=0&&i[Ft][0]<=_.shape[Ft]-_e&&i[Ft][1]>=0&&i[Ft][1]<=_.shape[Ft]-_e,()=>`Padding in dimension ${Ft} cannot be greater than or equal to ${_.shape[Ft]-_e} or less than 0 for input of shape ${_.shape}`);let ct={paddings:i,mode:s},Mt={x:_};return T$1.runKernel(Kn,Mt,ct)}var B2=N$1({mirrorPad_:uq});function pq(o,i){let s=v(o,"a","mod"),_=v(i,"b","mod");[s,_]=Oe(s,_);let _e={a:s,b:_};return T$1.runKernel(qn,_e)}var z2=N$1({mod_:pq});function cq(o,i=null,s=!1){let _=_i(i,(o=v(o,"x","moments")).shape),_e=Gu(o,_,s),ct=_e.shape;s||(ct=ii(_e.shape,_));let Mt=Zt(Te$1(Ue(o,"float32"),W$1(_e,ct)));return{mean:_e,variance:Gu(Mt,_,s)}}var V2=N$1({moments_:cq});function lq(o,i,s,_){let _e=v(i,"data","multiRNNCell"),ct=ni(s,"c","multiRNNCell"),Mt=ni(_,"h","multiRNNCell"),Ft=_e,Ut=[];for(let nr=0;nr<o.length;nr++){let rr=o[nr](Ft,ct[nr],Mt[nr]);Ut.push(rr[0]),Ut.push(rr[1]),Ft=rr[1]}let Xt=[],Kt=[];for(let nr=0;nr<Ut.length;nr+=2)Xt.push(Ut[nr]),Kt.push(Ut[nr+1]);return[Xt,Kt]}var W2=N$1({multiRNNCell_:lq});function mq(o,i,s,_=!1){let _e=v(o,"logits","multinomial"),ct=_e.size,Mt=_e.rank;if(ct<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${ct}.`);if(Mt>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${Mt}`);s=s||Math.random();let Ft={logits:Mt===1?W$1(_e,[1,-1]):_e},Ut={numSamples:i,seed:s,normalized:_},Xt=T$1.runKernel(jn,Ft,Ut);return Mt===1?W$1(Xt,[Xt.size]):Xt}var U2=N$1({multinomial_:mq});function dq(o,i){let s=v(o,"a","notEqual","string_or_numeric"),_=v(i,"b","notEqual","string_or_numeric");[s,_]=Oe(s,_),rt(s.shape,_.shape);let _e={a:s,b:_};return T$1.runKernel(Yn,_e)}var Fd=N$1({notEqual_:dq});function fq(o,i,s=1,_=0,_e="int32"){if(i<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${i}`);let ct={indices:v(o,"indices","oneHot","int32")},Mt={dtype:_e,depth:i,onValue:s,offValue:_};return T$1.runKernel(Jn,ct,Mt)}var El=N$1({oneHot_:fq});function hq(o){let i={x:v(o,"x","onesLike")};return T$1.runKernel(ca,i)}var G2=N$1({onesLike_:hq});function gq(o,i){let s=v(o,"v1","outerProduct"),_=v(i,"v2","outerProduct");E(s.rank===1&&_.rank===1,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${s.rank} and ${_.rank}.`);let _e=W$1(s,[-1,1]),ct=W$1(_,[1,-1]);return Ze(_e,ct)}var H2=N$1({outerProduct_:gq});function xq(o,i,s=0){let _=v(o,"x","pad");if(_.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");let _e={paddings:i,constantValue:s},ct={x:_};return T$1.runKernel(es,ct,_e)}var Aa=N$1({pad_:xq});function yq(o,i,s=0){return E(i.length===2,()=>"Invalid number of paddings. Must be length of 2."),Aa(o,[i],s)}var K2=N$1({pad1d_:yq});function bq(o,i,s=0){return E(i.length===2&&i[0].length===2&&i[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Aa(o,i,s)}var q2=N$1({pad2d_:bq});function Cq(o,i,s=0){return E(i.length===3&&i[0].length===2&&i[1].length===2&&i[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Aa(o,i,s)}var j2=N$1({pad3d_:Cq});function wq(o,i,s=0){return E(i.length===4&&i[0].length===2&&i[1].length===2&&i[2].length===2&&i[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Aa(o,i,s)}var X2=N$1({pad4d_:wq});function Sq(o,i,s){let _=v(o,"x","spaceToBatchND");E(_.rank>=1+i.length,()=>`input rank ${_.rank} should be > than [blockShape] ${i.length}`),E(s.length===i.length,()=>`paddings.shape[0] ${s.length} must be equal to [blockShape] ${i.length}`),E(_.shape.reduce((Mt,Ft,Ut)=>Ut>0&&Ut<=i.length?Mt&&(Ft+s[Ut-1][0]+s[Ut-1][1])%i[Ut-1]==0:Mt,!0),()=>`input spatial dimensions ${_.shape.slice(1)} with paddings ${s.toString()} must be divisible by blockShapes ${i.toString()}`);let _e={x:_},ct={blockShape:i,paddings:s};return T$1.runKernel(ga,_e,ct)}var Pd=N$1({spaceToBatchND_:Sq});function Iq(o,i,s,_,_e,ct,Mt){_e==null&&(_e=[1,1]),ct==null&&(ct=1),_===0&&(_="valid");let Ft=v(o,"x","maxPool"),Ut=Ft,Xt=!1;Ft.rank===3&&(Xt=!0,Ut=W$1(Ft,[1,Ft.shape[0],Ft.shape[1],Ft.shape[2]])),E(gr(ct,_e),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${ct} and dilations '${_e}'`);let Kt,nr=Lw(Ut.shape,i,ct,_e,_),rr=[nr.dilationHeight,nr.dilationWidth];Kt=_==="same"?kq([nr.filterHeight,nr.filterWidth],rr):[[0,0],[0,0]];let or=rr[0]===1&&rr[1]===1,[hr,fr]=vq([nr.inHeight,nr.inWidth],rr,Kt),yr=or?_:"valid",Lr=or?Ut:Pd(Ut,rr,hr),Br=(s==="avg"?()=>dd(Lr,i,ct,yr,Mt):()=>Dd(Lr,i,ct,yr,Mt))(),Vr=or?Br:fd(Br,rr,fr);return Xt?W$1(Vr,[Vr.shape[1],Vr.shape[2],Vr.shape[3]]):Vr}function vq(o,i,s){let _=s.map(Ut=>Ut[0]),_e=s.map(Ut=>Ut[1]),ct=o.concat(_,_e),Mt=i.map((Ut,Xt)=>(Ut-ct[Xt]%Ut)%Ut),Ft=_e.map((Ut,Xt)=>Ut+Mt[Xt]);return[i.map((Ut,Xt)=>[_[Xt],Ft[Xt]]),i.map((Ut,Xt)=>[0,Mt[Xt]])]}function kq(o,i){let s=o.map((ct,Mt)=>ct+(ct-1)*(i[Mt]-1)).map(ct=>ct-1),_=s.map(ct=>Math.floor(ct/2)),_e=s.map((ct,Mt)=>ct-_[Mt]);return s.map((ct,Mt)=>[_[Mt],_e[Mt]])}var Y2=N$1({pool_:Iq});function Nq(o,i){let s={x:v(o,"x","prelu"),alpha:v(i,"alpha","prelu")};return T$1.runKernel(rs,s)}var Od=N$1({prelu_:Nq});function Tq(o,i=null,s=!1){let _=v(o,"x","prod");_.dtype==="bool"&&(_=Ue(_,"int32"));let _e={x:_},ct={axis:i,keepDims:s};return T$1.runKernel(os,_e,ct)}var Q2=N$1({prod_:Tq});function _q(o,i,s,_){let _e={paramsNestedSplits:o.map((Ft,Ut)=>v(Ft,`tensors${Ut}`,"raggedGather","int32")),paramsDenseValues:v(i,"paramsDenseValues","raggedGather"),indices:v(s,"indices","raggedGather","int32")},ct={outputRaggedRank:_},Mt=T$1.runKernel(Hp,_e,ct);return{outputNestedSplits:Mt.slice(0,Mt.length-1),outputDenseValues:Mt[Mt.length-1]}}var Z2=N$1({raggedGather_:_q});function Eq(o,i,s){let _=v(o,"starts","raggedRange"),_e={starts:_,limits:v(i,"limits","raggedRange",_.dtype),deltas:v(s,"deltas","raggedRange",_.dtype)},ct=T$1.runKernel(Kp,_e);return{rtNestedSplits:ct[0],rtDenseValues:ct[1]}}var J2=N$1({raggedRange_:Eq});function $q(o,i,s,_,_e){let ct=v(o,"shape","raggedTensorToTensor","int32"),Mt=v(i,"values","raggedTensorToTensor"),Ft=v(s,"defaultValue","raggedTensorToTensor",Mt.dtype),Ut=_.map((nr,rr)=>v(nr,`tensors${rr}`,"raggedTensorToTensor","int32")),Xt={shape:ct,values:Mt,defaultValue:Ft,rowPartitionTensors:Ut},Kt={rowPartitionTypes:_e};return T$1.runKernel(qp,Xt,Kt)}var e1=N$1({raggedTensorToTensor_:$q});function Rq(o,i,s){Ct(o);let _=ze(o),_e=null;if(s==null||s==="float32")_e=new Float32Array(_);else if(s==="int32")_e=new Int32Array(_);else{if(s!=="bool")throw new Error(`Unknown data type ${s}`);_e=new Uint8Array(_)}for(let ct=0;ct<_;ct++)_e[ct]=i();return T$1.makeTensor(_e,o,s)}var t1=N$1({rand_:Rq}),Vd=zp(jw()),w1={};qe(w1,{TEST_EPSILON_FLOAT16:()=>y1,createVideoElement:()=>Gq,encodeStrings:()=>C1,expectArrayBuffersEqual:()=>Uq,expectArraysClose:()=>Bq,expectArraysEqual:()=>Vq,expectNumbersClose:()=>b1,expectPromiseToFail:()=>zq,expectValuesInRange:()=>Wq,play:()=>Hq,testEpsilon:()=>Ld});var Lq=.001,y1=.1;function Bq(o,i,s){return s==null&&(s=Ld()),Xw(o,i,(_,_e)=>Yw(_,_e,s))}function Ld(){return T$1.backend.floatPrecision()===32?Lq:y1}function Xw(o,i,s){let _=!0;if((Pt$2(o)||Pt$2(i))&&(_=!1),Pt$2(o)&&Pt$2(i)&&(_=!0),_){let Mt=o.constructor.name,Ft=i.constructor.name;if(Mt!==Ft)throw new Error(`Arrays are of different type. Actual: ${Mt}. Expected: ${Ft}`)}if(Array.isArray(o)&&Array.isArray(i)){let Mt=sr(o),Ft=sr(i);if(!br(Mt,Ft))throw new Error(`Arrays have different shapes. Actual: [${Mt}]. Expected: [${Ft}]`)}let _e=Pt$2(o)?o:Fs(o),ct=Pt$2(i)?i:Fs(i);if(_e.length!==ct.length)throw new Error(`Arrays have different lengths actual: ${_e.length} vs expected: ${ct.length}.
Actual:   ${_e}.
Expected: ${ct}.`);for(let Mt=0;Mt<ct.length;++Mt){let Ft=_e[Mt],Ut=ct[Mt];if(!s(Ft,Ut))throw new Error(`Arrays differ: actual[${Mt}] = ${Ft}, expected[${Mt}] = ${Ut}.
Actual:   ${_e}.
Expected: ${ct}.`)}typeof expect<"u"&&expect().nothing()}function zq(o,i){o().then(()=>i.fail(),()=>i()),typeof expect<"u"&&expect().nothing()}function Vq(o,i){let s=typeof i=="string"||typeof i=="number"||typeof i=="boolean"?[i]:i;return zo(o)||zo(o[0])||zo(i)||zo(i[0])?Xw(o,s,(_,_e)=>_==_e):Xw(o,i,(_,_e)=>Yw(_,_e,0))}function b1(o,i,s){if(s==null&&(s=Ld()),!Yw(o,i,s))throw new Error(`Numbers differ: actual === ${o}, expected === ${i}`);typeof expect<"u"&&expect().nothing()}function Yw(o,i,s){return!isFinite(o)&&!isFinite(i)||!(isNaN(o)||isNaN(i)||Math.abs(o-i)>s)}function Wq(o,i,s){for(let _=0;_<o.length;_++)if(o[_]<i||o[_]>s)throw new Error(`Value out of range:${o[_]} low: ${i}, high: ${s}`)}function Uq(o,i){let s=new Float32Array(o),_=new Float32Array(i);if(s.length!==_.length)throw new Error(`Expected ArrayBuffer to be of length ${_.length}, but it was ${s.length}`);for(let _e=0;_e<_.length;_e++)if(s[_e]!==_[_e])throw new Error(`Expected ArrayBuffer value at ${_e} to be ${_[_e]} but got ${s[_e]} instead`)}function C1(o){for(let i=0;i<o.length;i++){let s=o[i];Array.isArray(s)?C1(s):o[i]=Ji(s)}return o}function Gq(o){let i=document.createElement("video");return"playsInline"in i&&(i.playsInline=!0),i.muted=!0,i.loop=!0,i.style.position="fixed",i.style.left="0px",i.style.top="0px",i.preload="auto",i.appendChild(o),new Promise(s=>{i.addEventListener("loadeddata",_=>s(i)),i.load()})}async function Hq(o){await o.play(),"requestVideoFrameCallback"in o&&await new Promise(i=>{o.requestVideoFrameCallback(i)})}var qu=class{constructor(o,i,s,_,_e){this.mean=o,this.stdDev=i,this.dtype=s,this.nextVal=NaN,this.truncated=_,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);let ct=_e||Math.random();this.random=Vd.alea(ct.toString())}nextValue(){if(!isNaN(this.nextVal)){let _=this.nextVal;return this.nextVal=NaN,_}let o,i,s=!1;for(;!s;){let _,_e,ct;do _=2*this.random()-1,_e=2*this.random()-1,ct=_*_+_e*_e;while(ct>=1||ct===0);let Mt=Math.sqrt(-2*Math.log(ct)/ct);o=this.mean+this.stdDev*_*Mt,i=this.mean+this.stdDev*_e*Mt,(!this.truncated||this.isValidTruncated(o))&&(s=!0)}return(!this.truncated||this.isValidTruncated(i))&&(this.nextVal=this.convertValue(i)),this.convertValue(o)}convertValue(o){return this.dtype==null||this.dtype==="float32"?o:Math.round(o)}isValidTruncated(o){return o<=this.upper&&o>=this.lower}},Bd=class{constructor(o,i,s,_){this.alpha=o,this.beta=1/i,this.dtype=s;let _e=_||Math.random();this.randu=Vd.alea(_e.toString()),this.randn=new qu(0,1,s,!1,this.randu()),this.d=o<1?o+2/3:o-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let o,i,s,_,_e,ct;for(;;){do _=this.randn.nextValue(),ct=1+this.c*_;while(ct<=0);if(ct*=ct*ct,o=_*_,i=1-.331*o*o,s=.5*o+this.d*(1-ct+Math.log(ct)),_e=this.randu(),_e<i||Math.log(_e)<s)break}return ct=1/this.beta*this.d*ct,this.alpha<1&&(ct*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(ct)}convertValue(o){return this.dtype==="float32"?o:Math.round(o)}},zd=class{constructor(o=0,i=1,s,_){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=o,this.range=i-o,this.dtype=s,_==null&&(_=Math.random()),typeof _=="number"&&(_=_.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${o} - ${i} <= 1 and dtype is not float`);this.random=Vd.alea(_)}convertValue(o){return this.canReturnFloat()?o:Math.round(o)}nextValue(){return this.convertValue(this.min+this.range*this.random())}};function Kq(o,i,s=1,_="float32",_e){if(Ct(o),s==null&&(s=1),_==null&&(_="float32"),_!=="float32"&&_!=="int32")throw new Error(`Unsupported data type ${_}`);let ct=new Bd(i,s,_,_e),Mt=me$1(o,_);for(let Ft=0;Ft<Mt.values.length;Ft++)Mt.values[Ft]=ct.nextValue();return Mt.toTensor()}var S1=N$1({randomGamma_:Kq});function qq(o,i=0,s=1,_,_e){if(Ct(o),_!=null&&_==="bool")throw new Error(`Unsupported data type ${_}`);let ct=new qu(i,s,_,!1,_e),Mt=me$1(o,_);for(let Ft=0;Ft<Mt.values.length;Ft++)Mt.values[Ft]=ct.nextValue();return Mt.toTensor()}var Wd=N$1({randomNormal_:qq});function jq(o,i,s){if(i!=null&&i==="bool")throw new Error(`Unsupported data type ${i}`);return Wd(o,0,1,i,s)}var I1=N$1({randomStandardNormal_:jq});function Xq(o,i=0,s=1,_="float32",_e){Ct(o);let ct=me$1(o,_),Mt=new zd(i,s,null,_e);for(let Ft=0;Ft<ct.values.length;Ft++)ct.values[Ft]=Mt.nextValue();return ct.toTensor()}var ic=N$1({randomUniform_:Xq});function Yq(o,i,s,_){return ic(o,i,s,"int32",_)}var v1=N$1({randomUniformInt_:Yq});function cu(o,i,s=1,_="float32"){if(s===0)throw new Error("Cannot have a step of zero");let _e={start:o,stop:i,step:s,dtype:_};return T$1.runKernel(ma,{},_e)}function Qq(o){let i={input:v(o,"input","real")};return T$1.runKernel(Hi,i)}var ci=N$1({real_:Qq});function Zq(o){let i={x:v(o,"x","reciprocal")};return T$1.runKernel(ns,i)}var k1=N$1({reciprocal_:Zq});function Jq(o){let i={x:v(o,"x","relu")};return T$1.runKernel(ss,i)}var lu=N$1({relu_:Jq});function e6(o){let i={x:v(o,"x","relu6")};return T$1.runKernel(us,i)}var Ud=N$1({relu6_:e6});function t6(o,i){let s={x:v(o,"x","reverse")},_={dims:i};return T$1.runKernel(ps,s,_)}var mo=N$1({reverse_:t6});function r6(o){let i=v(o,"x","reverse");return E(i.rank===1,()=>`Error in reverse1D: x must be rank 1 but got rank ${i.rank}.`),mo(i,0)}var N1=N$1({reverse1d_:r6});function o6(o,i){let s=v(o,"x","reverse");return E(s.rank===2,()=>`Error in reverse2D: x must be rank 2 but got rank ${s.rank}.`),mo(s,i)}var T1=N$1({reverse2d_:o6});function n6(o,i){let s=v(o,"x","reverse");return E(s.rank===3,()=>`Error in reverse3D: x must be rank 3 but got rank ${s.rank}.`),mo(s,i)}var _1=N$1({reverse3d_:n6});function s6(o,i){let s=v(o,"x","reverse");return E(s.rank===4,()=>`Error in reverse4D: x must be rank 4 but got rank ${s.rank}.`),mo(s,i)}var E1=N$1({reverse4d_:s6});function a6(o){let i={x:v(o,"x","round")};return T$1.runKernel(cs,i)}var Gd=N$1({round_:a6});function i6(o){let i={x:v(o,"x","rsqrt","float32")};return T$1.runKernel(ls,i)}var $1=N$1({rsqrt_:i6});function u6(o){let i={x:v(o,"x","selu")};return T$1.runKernel(hs,i)}var R1=N$1({selu_:u6});function p6(o,i,s,_,_e,ct=[1,1],Mt="NHWC"){let Ft=v(o,"x","separableConv2d"),Ut=v(i,"depthwiseFilter","separableConv2d"),Xt=v(s,"pointwiseFilter","separableConv2d"),Kt=Ft,nr=!1;if(Ft.rank===3&&(nr=!0,Kt=W$1(Ft,[1,Ft.shape[0],Ft.shape[1],Ft.shape[2]])),Mt==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");E(Kt.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${Kt.rank}.`),E(Ut.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${Ut.rank}.`),E(Xt.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${Ut.rank}.`),E(Xt.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${Xt.shape[0]}.`),E(Xt.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${Xt.shape[1]}.`);let rr=Ut.shape[2],or=Ut.shape[3];E(Xt.shape[2]===rr*or,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${rr*or}, but got ${Xt.shape[2]}.`);let hr=sc(Kt,Ut,_,_e,Mt,ct),fr=au(hr,Xt,1,"valid",Mt);return nr?W$1(fr,[fr.shape[1],fr.shape[2],fr.shape[3]]):fr}var D1=N$1({separableConv2d_:p6});async function c6(o,i){let s=v(o,"x","setdiff1d"),_=v(i,"y","setdiff1d");E(s.dtype===_.dtype,()=>`x and y should have the same dtype, but got x (${s.dtype}) and y (${_.dtype}).`),E(s.rank===1,()=>`x should be 1D tensor, but got x (${s.shape}).`),E(_.rank===1,()=>`y should be 1D tensor, but got y (${_.shape}).`);let _e=await s.data(),ct=await _.data(),Mt=new Set(ct),Ft=0;for(let Kt=0;Kt<_e.length;Kt++)Mt.has(_e[Kt])||Ft++;let Ut=new tt([Ft],s.dtype),Xt=new tt([Ft],"int32");for(let Kt=0,nr=0;Kt<_e.length;Kt++)Mt.has(_e[Kt])||(Ut.values[nr]=_e[Kt],Xt.values[nr]=Kt,nr++);return[Ut.toTensor(),Xt.toTensor()]}var A1=c6;function l6(o){let i={x:v(o,"x","sign")};return T$1.runKernel(ys,i)}var F1=N$1({sign_:l6});function m6(o){let i={x:v(o,"x","sin","float32")};return T$1.runKernel(gs,i)}var P1=N$1({sin_:m6});function d6(o){let i={x:v(o,"x","sinh")};return T$1.runKernel(xs,i)}var O1=N$1({sinh_:d6});function f6(o,i,s){let _=v(o,"x","slice1d");return E(_.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${_.rank} tensor`),Xe(_,[i],[s])}var M1=N$1({slice1d_:f6});function h6(o,i,s){let _=v(o,"x","slice2d");return E(_.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${_.rank} tensor`),Xe(_,i,s)}var L1=N$1({slice2d_:h6});function g6(o,i,s){let _=v(o,"x","slice3d");return E(_.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${_.rank} tensor`),Xe(_,i,s)}var B1=N$1({slice3d_:g6});function x6(o,i,s){let _=v(o,"x","slice4d");return E(_.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${_.rank} tensor`),Xe(_,i,s)}var z1=N$1({slice4d_:x6});function y6(o,i=-1){let s=v(o,"logits","softmax","float32");if(i===-1&&(i=s.rank-1),i!==s.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${s.rank} and dim was ${i}`);let _={logits:s},_e={dim:i};return T$1.runKernel(Is,_,_e)}var V1=N$1({softmax_:y6});function b6(o){E(o.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${o.dtype}.`);let i={input:o};return T$1.runKernel(zi,i)}var uc=N$1({fft_:b6});function C6(o){E(o.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${o.dtype}.`);let i={input:o};return T$1.runKernel(Vi,i)}var ju=N$1({ifft_:C6});function w6(o){let i,s=o.shape[o.shape.length-1],_=o.size/s;if(s<=2){let _e=W$1(o,[_,s]);i=ju(_e)}else{let _e=[_,2*(s-1)],ct=W$1(ci(o),[_,s]),Mt=W$1(pu(o),[_,s]),Ft=mo(Xe(ct,[0,1],[_,s-2]),1),Ut=se(mo(Xe(Mt,[0,1],[_,s-2]),1),ke(-1)),Xt=yt([ct,Ft],1),Kt=yt([Mt,Ut],1),nr=W$1(Er(Xt,Kt),[_e[0],_e[1]]);i=ju(nr)}if(i=ci(i),o.rank===3&&o.shape[0]!==0){let _e=i,ct=o.shape[0];i=W$1(i,[ct,i.shape[0]/ct,i.shape[1]]),_e.dispose()}return i}var Hd=N$1({irfft_:w6});function S6(o,i,s=0){let _={x:v(o,"x","split")},_e={numOrSizeSplits:i,axis:s};return T$1.runKernel(xa,_,_e)}var li=N$1({split_:S6});function I6(o,i){E(o.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${o.dtype}`);let s,_=o.shape[o.shape.length-1],_e=o.size/_;if(i!=null&&i<_){let hr=o.shape.map(yr=>0),fr=o.shape.map(yr=>yr);fr[o.shape.length-1]=i,s=Xe(o,hr,fr),_=i}else if(i!=null&&i>_){let hr=o.shape.map(fr=>fr);hr[o.shape.length-1]=i-_,s=yt([o,Gr(hr)],o.shape.length-1),_=i}else s=o;let ct=Gt$1(s),Mt=W$1(Er(s,ct),[_e,_]),Ft=uc(Mt),Ut=Math.floor(_/2)+1,Xt=ci(Ft),Kt=pu(Ft),nr=li(Xt,[Ut,_-Ut],Xt.shape.length-1),rr=li(Kt,[Ut,_-Ut],Kt.shape.length-1),or=s.shape.slice();return or[s.shape.length-1]=Ut,W$1(Er(nr[0],rr[0]),or)}var pc=N$1({rfft_:I6});function v6(o,i){let s=v(o,"a","squaredDifference"),_=v(i,"b","squaredDifference");[s,_]=Oe(s,_),rt(s.shape,_.shape);let _e={a:s,b:_};return T$1.runKernel(ks,_e,{})}var Kd=N$1({squaredDifference_:v6});function k6(o,i){let s=v(o,"x","squeeze","string_or_numeric");return W$1(s,JC(s.shape,i).newShape)}var cc=N$1({squeeze_:k6});function N6(o,i=0){let s=ni(o,"tensors","stack","string_or_numeric");E(s.length>=1,()=>"Pass at least one tensor to tf.stack"),s.length>0&&E(i<=s[0].rank,()=>"Axis must be <= rank of the tensor");let _=s,_e={axis:i};return T$1.runKernel(la,_,_e)}var vr=N$1({stack_:N6});function T6(o,i=0){let s={x:v(o,"x","step")},_={alpha:i};return T$1.runKernel(wo,s,_)}var qd=N$1({step_:T6});function _6(o,i,s,_,_e=0,ct=0,Mt=0,Ft=0,Ut=0){let Xt={x:v(o,"x","stridedSlice","string_or_numeric")},Kt={begin:i,end:s,strides:_,beginMask:_e,endMask:ct,ellipsisMask:Mt,newAxisMask:Ft,shrinkAxisMask:Ut};return T$1.runKernel(Ns,Xt,Kt)}var W1=N$1({stridedSlice_:_6});function E6(o){let i={x:v(o,"x","tan","float32")};return T$1.runKernel(_s,i)}var U1=N$1({tan_:E6});function Jt(o,i){io(o);let s=sr(o,i);if(s.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return wr(o,null,s,i)}function mu(o,i,s){if(io(o),i!=null&&i.length!==2)throw new Error("tensor2d() requires shape to have two numbers");let _=sr(o,s);if(_.length!==2&&_.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(_.length===1&&i==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return wr(o,i,_,s)}function jd(o,i,s){if(io(o),i!=null&&i.length!==3)throw new Error("tensor3d() requires shape to have three numbers");let _=sr(o,s);if(_.length!==3&&_.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(_.length===1&&i==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return wr(o,i,_,s)}function G1(o,i,s){if(io(o),i!=null&&i.length!==4)throw new Error("tensor4d() requires shape to have four numbers");let _=sr(o,s);if(_.length!==4&&_.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(_.length===1&&i==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return wr(o,i,_,s)}function H1(o,i,s){if(io(o),i!=null&&i.length!==5)throw new Error("tensor5d() requires shape to have five numbers");let _=sr(o,s);if(_.length!==5&&_.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(_.length===1&&i==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return wr(o,i,_,s)}function K1(o,i,s){if(io(o),i!=null&&i.length!==6)throw new Error("tensor6d() requires shape to have six numbers");let _=sr(o,s);if(_.length!==6&&_.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(_.length===1&&i==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return wr(o,i=i||_,_,s)}var du={};function Qw(o,i,s){let _=i.rank>1?i.shape[i.rank-1]:1,_e=i.rank>1?i.rank-1:1,ct=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${s.shape}, indices.shape: ${i.shape}, shape: ${o}, sliceDim: ${_}, and batchDim: ${_e}.`;if(s.rank<_e)throw new Error(ct+` update.rank < ${_e}. `);if(o.length<_+(s.rank-_e))throw new Error(ct+` Output shape length < ${_+(s.rank-_e)}`);if(s.rank!==_e+o.length-_)throw new Error(ct+" update.rank != "+(_e+o.length-_));for(let Mt=0;Mt<_e;++Mt)if(s.shape[Mt]!==i.shape[Mt])throw new Error(ct+` updates.shape[${Mt}] (${s.shape[Mt]}) != indices.shape[${Mt}] (${i.shape[Mt]}).`);for(let Mt=0;Mt<s.rank-_e;++Mt)if(s.shape[Mt+_e]!==o[Mt+_])throw new Error(ct+` updates.shape[${Mt+_e}] (${s.shape[Mt+_e]}) != shape[${Mt+_e}] (${o[Mt+_e]})`)}function lc(o,i,s){if(i.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${i.rank}.`);if(o.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${o.rank}.`);if(i.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${i.dtype}`);if(s.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${s}`);if(s.length===0){if(i.size===0)throw new Error(`Indices specified for empty output. indices shape: ${i.shape}`);if(o.size===0)throw new Error(`Updates specified for empty output. updates shape: ${o.shape}`)}Qw(s,i,o)}function q1(o,i,s){let _=i.shape.length,_e=_>1?i.shape[_-1]:1,ct=s.length,Mt=1;for(let Ut=_e;Ut<ct;++Ut)Mt*=s[Ut];let Ft=_e<1?1:_e;return{sliceRank:_e,numUpdates:ze(i.shape)/Ft,sliceSize:Mt,strides:[...js(s.slice(0,_e)),1],outputSize:ze(s)}}function $6(o,i,s){let _=v(o,"tensor","tensorScatterupdate"),_e=v(i,"indices","tensorScatterupdate","int32"),ct=v(s,"updates","tensorScatterupdate");if(lc(ct,_e,_.shape),_.dtype!==ct.dtype)throw new Error(`tensor and updates must have the same dtype, instead they are ${_.dtype} and ${ct.dtype}.`);let Mt={tensor:_,indices:_e,updates:ct};return T$1.runKernel(ds,Mt,{})}qe(du,{calculateShapes:()=>q1,validateInput:()=>lc,validateUpdateShape:()=>Qw});var j1=N$1({tensorScatterUpdate_:$6});function R6(o,i=1,s=!0){let _=v(o,"x","topk");if(_.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");let _e=_.shape[_.shape.length-1];if(i<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${i}`);if(i>_e)throw new Error(`'k' passed to topk() must be <= the last dimension (${_e}) but got ${i}`);let ct={x:_},Mt={k:i,sorted:s},[Ft,Ut]=T$1.runKernel($s,ct,Mt);return{values:Ft,indices:Ut}}var X1=N$1({topk_:R6});function D6(o,i=0,s=1,_,_e){if(Ct(o),_!=null&&_==="bool")throw new Error("Unsupported data type $ { dtype }");let ct=new qu(i,s,_,!0,_e),Mt=me$1(o,_);for(let Ft=0;Ft<Mt.values.length;Ft++)Mt.values[Ft]=ct.nextValue();return Mt.toTensor()}var Y1=N$1({truncatedNormal_:D6});function A6(o,i=0){let s=v(o,"x","unique","string_or_numeric");E(s.rank>0,()=>"The input tensor must be at least 1D");let _={x:s},_e={axis:i},[ct,Mt]=T$1.runKernel(Yi,_,_e);return{values:ct,indices:Mt}}var Q1=N$1({unique_:A6});function F6(o,i,s){let _=v(o,"x","unsortedSegmentSum"),_e=v(i,"segmentIds","unsortedSegmentSum","int32");E(Ka(s),()=>"numSegments must be of dtype int");let ct={x:_,segmentIds:_e},Mt={numSegments:s};return T$1.runKernel(Qi,ct,Mt)}var Z1=N$1({unsortedSegmentSum_:F6});function P6(o,i=0){let s=v(o,"x","unstack","string_or_numeric");E(i>=-s.shape.length&&i<s.shape.length,()=>`Axis = ${i} is not in [-${s.shape.length}, ${s.shape.length})`);let _={value:s},_e={axis:i};return T$1.runKernel(wa,_,_e)}var fo=N$1({unstack_:P6});function J1(o,i){return _l(o,i,"right")}function eN(o,i=!0,s,_){return T$1.makeVariable(o,i,s,_)}function Xd(o,i){let s=[];for(let ct=0;ct<i.length;ct++)i[ct]&&s.push(ct);let _=me$1(o,"int32"),_e=me$1([s.length,o.length],"int32");for(let ct=0;ct<s.length;ct++){let Mt=_.indexToLoc(s[ct]),Ft=ct*o.length;_e.values.set(Mt,Ft)}return _e.toTensor()}async function O6(o){let i=v(o,"condition","whereAsync","bool"),s=await i.data(),_=Xd(i.shape,s);return o!==i&&i.dispose(),_}var Yd=O6;async function M6(o,i,s){let _=v(o,"tensor","boolMask"),_e=v(i,"mask","boolMask","bool"),ct=s??0,Mt=_e.rank,Ft=_.shape;E(Mt>0,()=>"mask cannot be scalar"),xt$1(Ft.slice(ct,ct+Mt),_e.shape,"mask's shape must match the first K dimensions of tensor's shape,");let Ut=1;for(let fr=ct;fr<ct+Mt;fr++)Ut*=Ft[fr];let Xt=Ft.slice(0,ct).concat([Ut],Ft.slice(ct+Mt)),Kt=W$1(_,Xt),nr=W$1(_e,[-1]),rr=await Yd(nr),or=cc(rr,[1]),hr=Sd(Kt,or,ct);return o!==_&&_.dispose(),i!==_e&&_e.dispose(),or.dispose(),Kt.dispose(),nr.dispose(),rr.dispose(),hr}var L6=M6;function B6(o,i,s){let _=v(o,"x","transpose");if(i==null&&(i=_.shape.map((Mt,Ft)=>Ft).reverse()),E(_.rank===i.length,()=>`Error in transpose: rank of input ${_.rank} must match length of perm ${i}.`),i.forEach(Mt=>{E(Mt>=0&&Mt<_.rank,()=>`All entries in 'perm' must be between 0 and ${_.rank-1} but got ${i}`)}),_.rank<=1)return _.clone();let _e={x:_},ct={perm:i};return _.dtype==="complex64"?De$1(()=>{let Mt=ci(_),Ft=pu(_);return Mt=T$1.runKernel(co,{x:Mt},ct),Ft=T$1.runKernel(co,{x:Ft},ct),s&&(Ft=pr(Ft)),Er(Mt,Ft)}):T$1.runKernel(co,_e,ct)}var mc=N$1({transpose_:B6});function z6(o,i,s,_,_e=!0){let ct=v(o,"v","movingAverage"),Mt=v(i,"x","movingAverage"),Ft=v(s,"decay","movingAverage");ww(ct,Mt),E(br(ct.shape,Mt.shape),()=>"Shape mismatch in v and x");let Ut=ke(1),Xt=Te$1(Ut,Ft),Kt=se(Te$1(Mt,ct),Xt);if(_e){E(_!=null,()=>"When using zeroDebias: true, step is required.");let nr=v(_,"step","movingAverage");Kt=je(Kt,Te$1(Ut,ui(Ft,nr)))}return Ce$1(ct,Kt)}var V6=N$1({movingAverage_:z6});function W6(o,i,s){Ct(s);let _=v(o,"indices","scatterND","int32"),_e=v(i,"updates","scatterND");lc(_e,_,s);let ct={indices:_,updates:_e},Mt={shape:s};return T$1.runKernel(ms,ct,Mt)}var U6=N$1({scatterND_:W6});function tN(o,i,s,_){if(o.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${o.dtype}.`);if(o.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${o.shape}.`);let _e=o.rank>0?o.shape[0]:1,ct=o.rank>1?o.shape[1]:1;if(s.length!==ct)throw new Error(`outputShape has incorrect number of elements:, ${s.length}, should be: ${ct}.`);let Mt=i.size;if(i.rank!==0&&(i.rank!==1||Mt!==_e))throw new Error(`sparseValues has incorrect shape ${i.shape}, should be [] or [${_e}]`);if(i.dtype!==_.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}function H6(o,i,s,_=0){Ct(s);let _e=v(o,"sparseIndices","sparseToDense","int32"),ct=v(i,"sparseValues","sparseToDense","string_or_numeric"),Mt=v(_,"defaultValue","sparseToDense",ct.dtype);tN(_e,ct,s,Mt);let Ft={sparseIndices:_e,sparseValues:ct,defaultValue:Mt},Ut={outputShape:s};return T$1.runKernel(vs,Ft,Ut)}var K6=N$1({sparseToDense_:H6});function q6(o,i){let s=v(i,"indices","gatherND","int32"),_={params:v(o,"x","gatherND","string_or_numeric"),indices:s};return T$1.runKernel(vn,_)}var j6=N$1({gatherND_:q6});function rN(o,i){if(i==null)return o.shape.slice();if(br(o.shape,i))return i;if(o.shape.length===i.length){let s=[];for(let _=0;_<o.shape.length;_++)i[_]==null&&o.shape[_]!=null?s.push(o.shape[_]):s.push(i[_]);return s}return i}function X6(o,i,s,_){let _e=v(o,"x","dropout");if(E(_e.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${_e.dtype} tensor instead.`),E(i>=0&&i<1,()=>`rate must be a float in the range [0, 1), but got ${i}.`),i===0)return o instanceof mt?_e.clone():_e;let ct=rN(_e,s),Mt=1-i,Ft=je(wd(Ce$1(ic(ct,0,1,"float32",_),Mt)),Mt);return se(_e,Ft)}var Y6=N$1({dropout_:X6});function Zw(o){return Math.floor(Math.pow(2,Math.ceil(Math.log(o)/Math.log(2))))}function $l(o,i,s){let _=1-o%2,_e=new Float32Array(o);for(let ct=0;ct<o;++ct){let Mt=2*Math.PI*ct/(o+_-1);_e[ct]=i-s*Math.cos(Mt)}return Jt(_e,"float32")}async function Q6(o,i,s=1){let _=v(o,"predictions","inTopK"),_e=v(i,"targets","inTopK");E(_.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${_.rank}`),E(_.rank-1===_e.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${_.rank} and targets rank ${_e.rank}`),xt$1(_.shape.slice(0,_.shape.length-1),_e.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");let ct=_.shape[_.shape.length-1];E(s>0&&s<=ct,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${ct}), but got ${s}`);let Mt=await _.data(),Ft=await _e.data(),[Ut,Xt]=[Mt.length/ct,ct],Kt=ew("bool",Ut);for(let nr=0;nr<Ut;nr++){let rr=nr*Xt,or=Mt.subarray(rr,rr+Xt),hr=[];for(let fr=0;fr<or.length;fr++)hr.push({value:or[fr],index:fr});hr.sort((fr,yr)=>yr.value-fr.value),Kt[nr]=0;for(let fr=0;fr<s;fr++)if(hr[fr].index===Ft[nr]){Kt[nr]=1;break}}return o!==_&&_.dispose(),i!==_e&&_e.dispose(),ar(Kt,_e.shape,"bool")}var Z6=Q6,Jw={};function J6(o,i,s,_,_e,ct="NHWC",Mt){let Ft=o;o.rank===3&&(Ft=W$1(o,[1,o.shape[0],o.shape[1],o.shape[2]]));let Ut=i;Ut.rank===3&&(Ut=W$1(i,[1,i.shape[0],i.shape[1],i.shape[2]])),E(Ft.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${Ft.shape}.`),E(Ut.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${Ut.shape}.`),E(s.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${s}.`);let Xt=ct==="NHWC"?Ft.shape[3]:Ft.shape[1],Kt=ct==="NHWC"?Ut.shape[3]:Ut.shape[1];E(Xt===s[2],()=>`Error in conv2dDerFilter: depth of input ${Xt}) must match input depth in filter (${s[2]}.`),E(Kt===s[3],()=>`Error in conv2dDerFilter: depth of dy (${Kt}) must match output depth for filter (${s[3]}).`),Lt$2("conv2dDerFilter",_e,Mt);let nr={x:Ft,dy:Ut},rr={strides:_,pad:_e,dataFormat:ct,dimRoundingMode:Mt,filterShape:s};return T$1.runKernel(Fi,nr,rr)}qe(Jw,{conv2d:()=>nN,depthwiseConv2d:()=>iN,matMul:()=>uN});var oN=N$1({conv2DBackpropFilter_:J6});function Xu(o,i,s){if(s==null||s==="linear")return o;if(s==="relu")return se(o,qd(i));throw new Error(`Cannot compute gradient for fused activation ${s}.`)}function Yu(o,i){let s=i,_=xd(o.shape,i.shape);return _.length>0&&(s=ot(s,_)),W$1(s,o.shape)}function Qu(o,i,s,_){if(i==="linear")return o;if(i==="relu")return lu(o);if(i==="elu")return bd(o);if(i==="relu6")return Ud(o);if(i==="prelu")return Od(o,s);if(i==="leakyrelu")return vd(o,_);if(i==="sigmoid")return Ea(o);throw new Error(`Unknown fused activation ${i}.`)}var Zu=(o,i)=>!(o>0)||i==="linear";function ej({x:o,filter:i,strides:s,pad:_,dataFormat:_e="NHWC",dilations:ct=[1,1],dimRoundingMode:Mt,bias:Ft,activation:Ut="linear",preluActivationWeights:Xt,leakyreluAlpha:Kt}){if(Ut=Ut||"linear",Zu(T$1.state.gradientDepth,Ut)===!1){E(_e==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${_e} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let no=au(o,i,s,_,_e,ct,Mt);return Ft!=null&&(no=Ce$1(no,Ft)),Qu(no,Ut,Xt,Kt)}let nr=v(o,"x","conv2d","float32"),rr=v(i,"filter","conv2d","float32"),or=nr,hr=!1;nr.rank===3&&(hr=!0,or=W$1(nr,[1,nr.shape[0],nr.shape[1],nr.shape[2]])),E(or.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${or.rank}.`),E(rr.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${rr.rank}.`),Lt$2("fused conv2d",_,Mt);let fr=_e==="NHWC"?or.shape[3]:or.shape[1];E(rr.shape[2]===fr,()=>`Error in conv2d: depth of input (${fr}) must match input depth for filter ${rr.shape[2]}.`),E(gr(s,ct),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${s} and dilations '${ct}'`);let yr,Lr,Br=zu(or.shape,rr.shape,s,ct,_,Mt);if(Ft!=null&&(yr=v(Ft,"bias","fused conv2d"),[yr]=Oe(yr,nr),_e==="NHWC"?rt(Br.outShape,yr.shape):(E(yr.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${yr.shape.length}.`),E(yr.shape.length===0||yr.shape[0]===Br.outChannels||yr.shape[0]===1,()=>`Error in fused conv2d: bias shape (${yr.shape}) is not compatible with the number of output channels (${Br.outChannels})`))),Xt!=null){let no=Xt.shape;if(E(no.length<=1||no.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${no.length}.`),no.length===1)E(no[0]===1||no[0]===Br.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${no}) is not compatible with the number of output channels (${Br.outChannels}).`);else if(no.length===3)try{rt(no,Br.outShape)}catch{let ko=`Error in fused conv2d: PReLU activation weights (${no}) is not compatible with the output shape of the conv2d (${Br.outShape}).`;throw Error(ko)}Lr=v(Xt,"prelu weights","fused conv2d")}let Vr=(no,so)=>{E(_e==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${_e} but only NHWC is currently supported.`);let[ko,To,oo,No]=so,As=Xu(no,oo,Ut);E(Bu(ct),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${ct}'`);let Ks=[gd(To.shape,As,ko,s,_),oN(To,As,ko.shape,s,_)];if(No!=null){let vu=Yu(No,As);Ks.push(vu)}return Ks},Wr={x:or,filter:rr,bias:yr,preluActivationWeights:Lr},ro={strides:s,pad:_,dataFormat:_e,dilations:ct,dimRoundingMode:Mt,activation:Ut,leakyreluAlpha:Kt};return Ft==null?Ir((no,so,ko)=>{let To=T$1.runKernel(Io,Wr,ro);return ko([so,no,To]),hr&&(To=W$1(To,[To.shape[1],To.shape[2],To.shape[3]])),{value:To,gradFunc:Vr}})(or,rr):Ir((no,so,ko,To)=>{let oo=T$1.runKernel(Io,Wr,ro);return To([so,no,oo,ko]),hr&&(oo=W$1(oo,[oo.shape[1],oo.shape[2],oo.shape[3]])),{value:oo,gradFunc:Vr}})(or,rr,yr)}var nN=N$1({fusedConv2d_:ej});function tj(o,i,s,_,_e,ct=[1,1],Mt){let Ft=o;o.rank===3&&(Ft=W$1(o,[1,o.shape[0],o.shape[1],o.shape[2]]));let Ut=i;Ut.rank===3&&(Ut=W$1(i,[1,i.shape[0],i.shape[1],i.shape[2]]));let Xt={x:Ft,dy:Ut},Kt={strides:_,pad:_e,dimRoundingMode:Mt,dilations:ct,filterShape:s};return T$1.runKernel(Pi,Xt,Kt)}var sN=N$1({depthwiseConv2dNativeBackpropFilter_:tj});function rj(o,i,s,_,_e,ct=[1,1],Mt){let Ft=i,Ut=!1;i.rank===3&&(Ut=!0,Ft=W$1(i,[1,i.shape[0],i.shape[1],i.shape[2]]));let Xt={dy:Ft,filter:s},Kt={strides:_,pad:_e,dimRoundingMode:Mt,dilations:ct,inputShape:o},nr=T$1.runKernel(Oi,Xt,Kt);return Ut?W$1(nr,[nr.shape[1],nr.shape[2],nr.shape[3]]):nr}var aN=N$1({depthwiseConv2dNativeBackpropInput_:rj});function oj({x:o,filter:i,strides:s,pad:_,dataFormat:_e="NHWC",dilations:ct=[1,1],dimRoundingMode:Mt,bias:Ft,activation:Ut="linear",preluActivationWeights:Xt,leakyreluAlpha:Kt}){if(Zu(T$1.state.gradientDepth,Ut)===!1){let ro=sc(o,i,s,_,_e,ct,Mt);return Ft!=null&&(ro=Ce$1(ro,Ft)),Qu(ro,Ut,Xt,Kt)}let nr=v(o,"x","depthwiseConv2d","float32"),rr=v(i,"filter","depthwiseConv2d","float32"),or=nr,hr=!1;nr.rank===3&&(hr=!0,or=W$1(nr,[1,nr.shape[0],nr.shape[1],nr.shape[2]])),E(or.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${or.rank}.`),E(rr.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${rr.rank}.`),E(or.shape[3]===rr.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${or.shape[3]}) must match the inChannels dimension in filter ${rr.shape[2]}.`),ct==null&&(ct=[1,1]),E(gr(s,ct),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${s} and dilations '${ct}'`),Lt$2("fused depthwiseConv2d",_,Mt);let fr,yr,Lr=zu(or.shape,rr.shape,s,ct,_,Mt,!0);Ft!=null&&(fr=v(Ft,"bias","fused conv2d"),[fr]=Oe(fr,nr),rt(Lr.outShape,fr.shape)),Xt!=null&&(yr=v(Xt,"prelu weights","fused depthwiseConv2d"));let Br=(ro,no)=>{E(Bu(ct),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${ct}'`);let[so,ko,To,oo]=no,No=Xu(ro,To,Ut),As=aN(ko.shape,No,so,s,_,ct,Mt),Ks=sN(ko,No,so.shape,s,_,ct,Mt);return oo!=null?[As,Ks,Yu(fr,No)]:[As,Ks]},Vr={x:or,filter:rr,bias:fr,preluActivationWeights:yr},Wr={strides:s,pad:_,dataFormat:_e,dilations:ct,dimRoundingMode:Mt,activation:Ut,leakyreluAlpha:Kt};return Ft==null?Ir((ro,no,so)=>{let ko=T$1.runKernel(vo,Vr,Wr);return so([no,ro,ko]),hr&&(ko=W$1(ko,[ko.shape[1],ko.shape[2],ko.shape[3]])),{value:ko,gradFunc:Br}})(or,rr):Ir((ro,no,so,ko)=>{let To=T$1.runKernel(vo,Vr,Wr);return ko([no,ro,To,so]),hr&&(To=W$1(To,[To.shape[1],To.shape[2],To.shape[3]])),{value:To,gradFunc:Br}})(or,rr,fr)}var iN=N$1({fusedDepthwiseConv2d_:oj});function nj({a:o,b:i,transposeA:s=!1,transposeB:_=!1,bias:_e,activation:ct="linear",preluActivationWeights:Mt,leakyreluAlpha:Ft=.2}){if(Zu(T$1.state.gradientDepth,ct)===!1){let oo=Ze(o,i,s,_);return _e!=null&&(oo=Ce$1(oo,_e)),Qu(oo,ct,Mt,Ft)}let Ut=v(o,"a","fused matMul"),Xt=v(i,"b","fused matMul");[Ut,Xt]=Oe(Ut,Xt);let Kt=s?Ut.shape[Ut.rank-2]:Ut.shape[Ut.rank-1],nr=_?Xt.shape[Xt.rank-1]:Xt.shape[Xt.rank-2],rr=s?Ut.shape[Ut.rank-1]:Ut.shape[Ut.rank-2],or=_?Xt.shape[Xt.rank-2]:Xt.shape[Xt.rank-1],hr=Ut.shape.slice(0,-2),fr=Xt.shape.slice(0,-2),yr=ze(hr),Lr=ze(fr);E(Kt===nr,()=>`Error in fused matMul: inner shapes (${Kt}) and (${nr}) of Tensors with shapes ${Ut.shape} and ${Xt.shape} and transposeA=${s} and transposeB=${_} must match.`);let Br,Vr,Wr=rt(Ut.shape.slice(0,-2),Xt.shape.slice(0,-2)).concat([rr,or]),ro=W$1(Ut,s?[yr,Kt,rr]:[yr,rr,Kt]),no=W$1(Xt,_?[Lr,or,nr]:[Lr,nr,or]);_e!=null&&(Br=v(_e,"bias","fused matMul"),[Br]=Oe(Br,Ut),rt(Wr,Br.shape)),Mt!=null&&(Vr=v(Mt,"prelu weights","fused matMul"));let so=(oo,No)=>{let As,Ks,[vu,Fu,Ap,Pp]=No,Lo=Xu(W$1(oo,Ap.shape),Ap,ct);return s||_?!s&&_?(As=Ze(Lo,Fu,!1,!1),Ks=Ze(Lo,vu,!0,!1)):s&&!_?(As=Ze(Fu,Lo,!1,!0),Ks=Ze(vu,Lo,!1,!1)):(As=Ze(Fu,Lo,!0,!0),Ks=Ze(Lo,vu,!0,!0)):(As=Ze(Lo,Fu,!1,!0),Ks=Ze(vu,Lo,!0,!1)),_e!=null?[As,Ks,Yu(Pp,Lo)]:[As,Ks]},ko={a:ro,b:no,bias:Br,preluActivationWeights:Vr},To={transposeA:s,transposeB:_,activation:ct,leakyreluAlpha:Ft};return _e==null?Ir((oo,No,As)=>{let Ks=T$1.runKernel(So,ko,To);return As([oo,No,Ks]),{value:W$1(Ks,Wr),gradFunc:so}})(ro,no):Ir((oo,No,As,Ks)=>{let vu=T$1.runKernel(So,ko,To);return Ks([oo,No,vu,As]),{value:W$1(vu,Wr),gradFunc:so}})(ro,no,Br)}var uN=N$1({fusedMatMul_:nj});function sj(o){return $l(o,.54,.46)}var pN=N$1({hammingWindow_:sj});function aj(o){return $l(o,.5,.5)}var Qd=N$1({hannWindow_:aj});function ij(o,i,s,_=!1,_e=0){let ct=0,Mt=[];for(;ct+i<=o.size;)Mt.push(Xe(o,ct,i)),ct+=s;if(_)for(;ct<o.size;){let Ft=ct+i-o.size,Ut=yt([Xe(o,ct,i-Ft),$a([Ft],_e)]);Mt.push(Ut),ct+=s}return Mt.length===0?mu([],[0,i]):W$1(yt(Mt),[Mt.length,i])}var Zd=N$1({frame_:ij});function uj(o,i,s,_,_e=Qd){_==null&&(_=Zw(i));let ct=Zd(o,i,s),Mt=se(ct,_e(i));return pc(Mt,_)}var cN=N$1({stft_:uj});function pj(o,i,s,_,_e="bilinear",ct=0){let Mt=v(o,"image","cropAndResize"),Ft=v(i,"boxes","cropAndResize","float32"),Ut=v(s,"boxInd","cropAndResize","int32"),Xt=Ft.shape[0];E(Mt.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${Mt.rank}.`),E(Ft.rank===2&&Ft.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${Xt},4] but had shape ${Ft.shape}.`),E(Ut.rank===1&&Ut.shape[0]===Xt,()=>`Error in cropAndResize: boxInd must be have size [${Xt}] but had shape ${Ft.shape}.`),E(_.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${_.length}.`),E(_[0]>=1&&_[1]>=1,()=>`cropSize must be atleast [1,1], but was ${_}`),E(_e==="bilinear"||_e==="nearest",()=>`method must be bilinear or nearest, but was ${_e}`);let Kt={image:Mt,boxes:Ft,boxInd:Ut},nr={method:_e,extrapolationValue:ct,cropSize:_};return T$1.runKernel(cn,Kt,nr)}var lN=N$1({cropAndResize_:pj});function cj(o){let i=v(o,"image","flipLeftRight","float32");E(i.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${i.rank}.`);let s={image:i};return T$1.runKernel(Cn,s,{})}var mN=N$1({flipLeftRight_:cj});function lj(o){let i=v(o,"image","grayscaleToRGB"),s=i.rank-1,_=i.shape[s];E(i.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${i.rank}.`),E(_===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${_}.`);let _e=new Array(i.rank);return _e.fill(1,0,s),_e[s]=3,uu(i,_e)}var dN=N$1({grayscaleToRGB_:lj});function mj(o){let i=v(o,"image","RGBToGrayscale"),s=i.rank-1,_=i.shape[s];E(i.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${i.rank}.`),E(_===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${_}.`);let _e,ct=i.dtype,Mt=Ue(i,"float32"),Ft=Jt([.2989,.587,.114]);switch(i.rank){case 2:_e=iu("ij,j->i",Mt,Ft);break;case 3:_e=iu("ijk,k->ij",Mt,Ft);break;case 4:_e=iu("ijkl,l->ijk",Mt,Ft);break;case 5:_e=iu("ijklm,m->ijkl",Mt,Ft);break;case 6:_e=iu("ijklmn,n->ijklm",Mt,Ft);break;default:throw new Error("Not a valid tensor rank.")}return _e=Ms(_e,-1),Ue(_e,ct)}var fN=N$1({rgbToGrayscale_:mj});function dj(o,i,s=0,_=.5){let _e=v(o,"image","rotateWithOffset","float32");E(_e.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${_e.rank}.`);let ct={image:_e},Mt={radians:i,fillValue:s,center:_};return T$1.runKernel(Ds,ct,Mt)}var hN=N$1({rotateWithOffset_:dj});function Eo(o,i,s,_,_e,ct){_==null&&(_=.5),_e==null&&(_e=Number.NEGATIVE_INFINITY),ct==null&&(ct=0);let Mt=o.shape[0];return s=Math.min(s,Mt),E(0<=_&&_<=1,()=>`iouThreshold must be in [0, 1], but was '${_}'`),E(o.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${o.rank}'`),E(o.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${o.shape[1]}`),E(i.rank===1,()=>"scores must be a 1D tensor"),E(i.shape[0]===Mt,()=>`scores has incompatible shape with boxes. Expected ${Mt}, but was ${i.shape[0]}`),E(0<=ct&&ct<=1,()=>`softNmsSigma must be in [0, 1], but was '${ct}'`),{maxOutputSize:s,iouThreshold:_,scoreThreshold:_e,softNmsSigma:ct}}function fj(o,i,s,_=.5,_e=Number.NEGATIVE_INFINITY){let ct=v(o,"boxes","nonMaxSuppression","float32"),Mt=v(i,"scores","nonMaxSuppression","float32"),Ft=Eo(ct,Mt,s,_,_e),Ut={maxOutputSize:s=Ft.maxOutputSize,iouThreshold:_=Ft.iouThreshold,scoreThreshold:_e=Ft.scoreThreshold};return T$1.runKernel(Qn,{boxes:ct,scores:Mt},Ut)}var gN=N$1({nonMaxSuppression_:fj});function xN(o,i,s){let _=hj(o,i,s),_e=_<0?-(_+1):_;o.splice(_e,0,i)}function hj(o,i,s){return xj(o,i,s||gj)}function gj(o,i){return o>i?1:o<i?-1:0}function xj(o,i,s){let _=0,_e=o.length,ct=0,Mt=!1;for(;_<_e;){ct=_+(_e-_>>>1);let Ft=s(i,o[ct]);Ft>0?_=ct+1:(_e=ct,Mt=!Ft)}return Mt?_:-_-1}function Jd(o,i,s,_,_e){return eS(o,i,s,_,_e,0)}function ef(o,i,s,_,_e,ct){return eS(o,i,s,_,_e,0,!1,ct,!0)}function tf(o,i,s,_,_e,ct){return eS(o,i,s,_,_e,ct,!0)}function eS(o,i,s,_,_e,ct,Mt=!1,Ft=!1,Ut=!1){let Xt=[];for(let yr=0;yr<i.length;yr++)i[yr]>_e&&Xt.push({score:i[yr],boxIndex:yr,suppressBeginIndex:0});Xt.sort(yN);let Kt=ct>0?-.5/ct:0,nr=[],rr=[];for(;nr.length<s&&Xt.length>0;){let yr=Xt.pop(),{score:Lr,boxIndex:Br,suppressBeginIndex:Vr}=yr;if(Lr<_e)break;let Wr=!1;for(let ro=nr.length-1;ro>=Vr;--ro){let no=yj(o,Br,nr[ro]);if(no>=_){Wr=!0;break}if(yr.score=yr.score*bj(_,Kt,no),yr.score<=_e)break}yr.suppressBeginIndex=nr.length,Wr||(yr.score===Lr?(nr.push(Br),rr.push(yr.score)):yr.score>_e&&xN(Xt,yr,yN))}let or=nr.length,hr=s-or;Ft&&hr>0&&(nr.push(...new Array(hr).fill(0)),rr.push(...new Array(hr).fill(0)));let fr={selectedIndices:nr};return Mt&&(fr.selectedScores=rr),Ut&&(fr.validOutputs=or),fr}function yj(o,i,s){let _=o.subarray(4*i,4*i+4),_e=o.subarray(4*s,4*s+4),ct=Math.min(_[0],_[2]),Mt=Math.min(_[1],_[3]),Ft=Math.max(_[0],_[2]),Ut=Math.max(_[1],_[3]),Xt=Math.min(_e[0],_e[2]),Kt=Math.min(_e[1],_e[3]),nr=Math.max(_e[0],_e[2]),rr=Math.max(_e[1],_e[3]),or=(Ft-ct)*(Ut-Mt),hr=(nr-Xt)*(rr-Kt);if(or<=0||hr<=0)return 0;let fr=Math.max(ct,Xt),yr=Math.max(Mt,Kt),Lr=Math.min(Ft,nr),Br=Math.min(Ut,rr),Vr=Math.max(Lr-fr,0)*Math.max(Br-yr,0);return Vr/(or+hr-Vr)}function bj(o,i,s){let _=Math.exp(i*s*s);return s<=o?_:0}function yN(o,i){return o.score-i.score||o.score===i.score&&i.boxIndex-o.boxIndex}async function Cj(o,i,s,_=.5,_e=Number.NEGATIVE_INFINITY){let ct=v(o,"boxes","nonMaxSuppressionAsync"),Mt=v(i,"scores","nonMaxSuppressionAsync"),Ft=Eo(ct,Mt,s,_,_e);s=Ft.maxOutputSize,_=Ft.iouThreshold,_e=Ft.scoreThreshold;let Ut=await Promise.all([ct.data(),Mt.data()]),Xt=Ut[0],Kt=Ut[1],{selectedIndices:nr}=Jd(Xt,Kt,s,_,_e);return ct!==o&&ct.dispose(),Mt!==i&&Mt.dispose(),Jt(nr,"int32")}var bN=Cj;function wj(o,i,s,_=.5,_e=Number.NEGATIVE_INFINITY,ct=0){let Mt=v(o,"boxes","nonMaxSuppression"),Ft=v(i,"scores","nonMaxSuppression"),Ut=Eo(Mt,Ft,s,_,_e,ct),Xt={boxes:Mt,scores:Ft},Kt={maxOutputSize:s=Ut.maxOutputSize,iouThreshold:_=Ut.iouThreshold,scoreThreshold:_e=Ut.scoreThreshold,softNmsSigma:ct=Ut.softNmsSigma},nr=T$1.runKernel(Zn,Xt,Kt);return{selectedIndices:nr[0],selectedScores:nr[1]}}var CN=N$1({nonMaxSuppressionWithScore_:wj});async function Sj(o,i,s,_=.5,_e=Number.NEGATIVE_INFINITY,ct=0){let Mt=v(o,"boxes","nonMaxSuppressionAsync"),Ft=v(i,"scores","nonMaxSuppressionAsync"),Ut=Eo(Mt,Ft,s,_,_e,ct);s=Ut.maxOutputSize,_=Ut.iouThreshold,_e=Ut.scoreThreshold,ct=Ut.softNmsSigma;let Xt=await Promise.all([Mt.data(),Ft.data()]),Kt=Xt[0],nr=Xt[1],{selectedIndices:rr,selectedScores:or}=tf(Kt,nr,s,_,_e,ct);return Mt!==o&&Mt.dispose(),Ft!==i&&Ft.dispose(),{selectedIndices:Jt(rr,"int32"),selectedScores:Jt(or)}}var wN=Sj;function Ij(o,i,s,_=.5,_e=Number.NEGATIVE_INFINITY,ct=!1){let Mt=v(o,"boxes","nonMaxSuppression"),Ft=v(i,"scores","nonMaxSuppression"),Ut=Eo(Mt,Ft,s,_,_e,null),Xt={boxes:Mt,scores:Ft},Kt={maxOutputSize:Ut.maxOutputSize,iouThreshold:Ut.iouThreshold,scoreThreshold:Ut.scoreThreshold,padToMaxOutputSize:ct},nr=T$1.runKernel(Qa,Xt,Kt);return{selectedIndices:nr[0],validOutputs:nr[1]}}var SN=N$1({nonMaxSuppressionPadded_:Ij});async function vj(o,i,s,_=.5,_e=Number.NEGATIVE_INFINITY,ct=!1){let Mt=v(o,"boxes","nonMaxSuppressionAsync"),Ft=v(i,"scores","nonMaxSuppressionAsync"),Ut=Eo(Mt,Ft,s,_,_e,null),Xt=Ut.maxOutputSize,Kt=Ut.iouThreshold,nr=Ut.scoreThreshold,[rr,or]=await Promise.all([Mt.data(),Ft.data()]),{selectedIndices:hr,validOutputs:fr}=ef(rr,or,Xt,Kt,nr,ct);return Mt!==o&&Mt.dispose(),Ft!==i&&Ft.dispose(),{selectedIndices:Jt(hr,"int32"),validOutputs:ke(fr,"int32")}}var IN=vj;function kj(o,i,s=!1,_=!1){let _e=v(o,"images","resizeBilinear");E(_e.rank===3||_e.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${_e.rank}.`),E(i.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${i}.`),E(_===!1||s===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let ct=_e,Mt=!1;_e.rank===3&&(Mt=!0,ct=W$1(_e,[1,_e.shape[0],_e.shape[1],_e.shape[2]]));let Ft={images:ct},Ut={alignCorners:s,halfPixelCenters:_,size:i},Xt=T$1.runKernel(is,Ft,Ut);return Mt?W$1(Xt,[Xt.shape[1],Xt.shape[2],Xt.shape[3]]):Xt}var vN=N$1({resizeBilinear_:kj});function Nj(o,i,s=!1,_=!1){let _e=v(o,"images","resizeNearestNeighbor");E(_e.rank===3||_e.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${_e.rank}.`),E(i.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${i}.`),E(_e.dtype==="float32"||_e.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),E(_===!1||s===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let ct=_e,Mt=!1;_e.rank===3&&(Mt=!0,ct=W$1(_e,[1,_e.shape[0],_e.shape[1],_e.shape[2]]));let Ft={images:ct},Ut={alignCorners:s,halfPixelCenters:_,size:i},Xt=T$1.runKernel(as,Ft,Ut);return Mt?W$1(Xt,[Xt.shape[1],Xt.shape[2],Xt.shape[3]]):Xt}var kN=N$1({resizeNearestNeighbor_:Nj});function Tj(o,i="binary",s=!1,_=.5){let _e,ct,Mt,Ft,Ut=v(o,"image","threshold"),Xt=Ut.shape[0]*Ut.shape[1],Kt=se(Jt([_]),255);if(E(Ut.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${Ut.rank}.`),E(Ut.shape[2]===3||Ut.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${Ut.shape[2]}.`),E(Ut.dtype==="int32"||Ut.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${Ut.dtype}.`),E(i==="otsu"||i==="binary",()=>`Method must be binary or otsu, but was ${i}`),Ut.shape[2]===3){[_e,ct,Mt]=li(Ut,[1,1,1],-1);let rr=se(_e,.2989),or=se(ct,.587),hr=se(Mt,.114);Ft=Ce$1(Ce$1(rr,or),hr)}else Ft=o;i==="otsu"&&(Kt=_j(hd(Ue(Gd(Ft),"int32"),ar([]),256),Xt));let nr=s?ac(Ft,Kt):Wu(Ft,Kt);return Ue(se(nr,255),"int32")}function _j(o,i){let s,_,_e,ct,Mt,Ft,Ut=Jt([-1]),Xt=Jt([0]),Kt=Jt([0]);for(let nr=0;nr<o.size-1;nr++){s=Xe(o,0,nr+1),_=Xe(o,nr+1),Mt=je(ot(s),i),Ft=je(ot(_),i);let rr=ot(se(s,cu(0,s.size)));_e=je(rr,ot(s));let or=$a(_.shape,s.size),hr=Ce$1(cu(0,_.size),or),fr=se(_,hr);ct=je(ot(fr),ot(_));let yr=Te$1(_e,ct),Lr=Te$1(_e,ct),Br=se(Mt,Ft);Kt=se(se(Br,yr),Lr);let Vr=Wu(Kt,Xt);Xt=lo(Vr,Kt,Xt),Ut=lo(Vr,Jt([nr]),Ut)}return Ut}var NN=N$1({threshold_:Tj});function Ej(o,i,s="nearest",_="constant",_e=0,ct){let Mt=v(o,"image","transform","float32"),Ft=v(i,"transforms","transform","float32");E(Mt.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${Mt.rank}.`),E(Ft.rank===2&&(Ft.shape[0]===Mt.shape[0]||Ft.shape[0]===1)&&Ft.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),E(ct==null||ct.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${ct}.`);let Ut={image:Mt,transforms:Ft},Xt={interpolation:s,fillMode:_,fillValue:_e,outputShape:ct};return T$1.runKernel(Rs,Ut,Xt)}var TN=N$1({transform_:Ej});function $j(o,i,s){let _=v(o,"a","bandPart");E(_.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${_.rank}.`);let _e,ct,Mt=_.shape,[Ft,Ut]=_.shape.slice(-2);typeof i=="number"?(E(i%1==0,()=>`bandPart(): numLower must be an integer, got ${i}.`),E(i<=Ft,()=>`bandPart(): numLower (${i}) must not be greater than the number of rows (${Ft}).`),_e=v(i<0?Ft:i,"numLower","bandPart")):(E(i.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),_e=lo(Tl(i,0),Ft,Hu(i,Ft))),typeof s=="number"?(E(s%1==0,()=>`bandPart(): numUpper must be an integer, got ${s}.`),E(s<=Ut,()=>`bandPart(): numUpper (${s}) must not be greater than the number of columns (${Ut}).`),ct=v(s<0?Ut:s,"numUpper","bandPart")):(E(s.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),ct=lo(Tl(s,0),Ut,Hu(s,Ut)));let Xt=W$1(cu(0,Ft,1,"int32"),[-1,1]),Kt=cu(0,Ut,1,"int32"),nr=Te$1(Xt,Kt),rr=Uu(ac(nr,_e),Id(nr,pr(ct))),or=Gr([Ft,Ut],_.dtype);return W$1(vr(fo(W$1(_,[-1,Ft,Ut])).map(hr=>lo(rr,hr,or))),Mt)}var _N=N$1({bandPart_:$j});function Rj(o){let i;if(Array.isArray(o)){i=!1,E(o!=null&&o.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");let _e=o[0].shape[0];for(let ct=1;ct<o.length;++ct)E(o[ct].shape[0]===_e,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${o[ct].shape[0]} vs. ${_e})`)}else i=!0,o=li(o,o.shape[0],0).map(_e=>cc(_e,[0]));E(o.length<=o[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${o.length}) exceeds number of dimensions (${o[0].shape[0]}).`);let s=[],_=o;for(let _e=0;_e<o.length;++_e)s.push(T$1.tidy(()=>{let ct=_[_e];if(_e>0)for(let Mt=0;Mt<_e;++Mt){let Ft=se(ot(se(s[Mt],ct)),s[Mt]);ct=Te$1(ct,Ft)}return je(ct,Vu(ct,"euclidean"))}));return i?vr(s,0):s}var EN=N$1({gramSchmidt_:Rj});function Dj(o,i=!1){if(E(o.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${o.rank}`),o.rank===2)return $N(o,i);{let s=o.shape.slice(0,o.shape.length-2).reduce((Mt,Ft)=>Mt*Ft),_=fo(W$1(o,[s,o.shape[o.shape.length-2],o.shape[o.shape.length-1]]),0),_e=[],ct=[];return _.forEach(Mt=>{let[Ft,Ut]=$N(Mt,i);_e.push(Ft),ct.push(Ut)}),[W$1(vr(_e,0),o.shape),W$1(vr(ct,0),o.shape)]}}function $N(o,i=!1){return T$1.tidy(()=>{E(o.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${o.shape.length}D Tensor.`);let s=o.shape[0],_=o.shape[1],_e=Cd(s),ct=Ur(o),Mt=mu([[1]],[1,1]),Ft=Ur(Mt),Ut=s>=_?_:s;for(let Xt=0;Xt<Ut;++Xt){let Kt=ct,nr=Ft,rr=_e;[Ft,ct,_e]=T$1.tidy(()=>{let or=Xe(ct,[Xt,Xt],[s-Xt,1]),hr=Vu(or),fr=Xe(ct,[Xt,Xt],[1,1]),yr=lo(Wu(fr,0),mu([[-1]]),mu([[1]])),Lr=Te$1(fr,se(yr,hr)),Br=je(or,Lr);Ft=Br.shape[0]===1?Ur(Mt):yt([Mt,Xe(Br,[1,0],[Br.shape[0]-1,Br.shape[1]])],0);let Vr=pr(je(Ze(yr,Lr),hr)),Wr=Xe(ct,[Xt,0],[s-Xt,_]),ro=se(Vr,Ft),no=mc(Ft);if(Xt===0)ct=Te$1(Wr,Ze(ro,Ze(no,Wr)));else{let To=Te$1(Wr,Ze(ro,Ze(no,Wr)));ct=yt([Xe(ct,[0,0],[Xt,_]),To],0)}let so=mc(ro),ko=Xe(_e,[0,Xt],[s,_e.shape[1]-Xt]);if(Xt===0)_e=Te$1(ko,Ze(Ze(ko,Ft),so));else{let To=Te$1(ko,Ze(Ze(ko,Ft),so));_e=yt([Xe(_e,[0,0],[s,Xt]),To],1)}return[Ft,ct,_e]}),Ot$1([Kt,nr,rr])}return!i&&s>_&&(_e=Xe(_e,[0,0],[s,_]),ct=Xe(ct,[0,0],[_,_])),[_e,ct]})}var RN=N$1({qr_:Dj}),$t;function Aj(o,i,s=$t.SUM_BY_NONZERO_WEIGHTS){let _=v(o,"losses","computeWeightedLoss"),_e=null;i!=null&&(_e=v(i,"weights","computeWeightedLoss"));let ct=_e==null?_:se(_,_e);if(s===$t.NONE)return ct;if(s===$t.SUM)return ot(ct);if(s===$t.MEAN){if(_e==null)return Gu(ct);{let Mt=_.size/_e.size,Ft=je(ot(ct),ot(_e));return Mt>1?je(Ft,ke(Mt)):Ft}}if(s===$t.SUM_BY_NONZERO_WEIGHTS){if(_e==null)return je(ot(ct),ke(_.size));{let Mt=se(_e,Da(_.shape)),Ft=Ue(ot(Fd(Mt,ke(0))),"float32");return je(ot(ct),Ft)}}throw Error(`Unknown reduction: ${s}`)}(function(o){o[o.NONE=0]="NONE",o[o.MEAN=1]="MEAN",o[o.SUM=2]="SUM",o[o.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})($t||($t={}));var cr=N$1({computeWeightedLoss_:Aj});function Fj(o,i,s,_=$t.SUM_BY_NONZERO_WEIGHTS){let _e=v(o,"labels","absoluteDifference"),ct=v(i,"predictions","absoluteDifference"),Mt=null;s!=null&&(Mt=v(s,"weights","absoluteDifference")),xt$1(_e.shape,ct.shape,"Error in absoluteDifference: ");let Ft=Qt(Te$1(_e,ct));return cr(Ft,Mt,_)}var DN=N$1({absoluteDifference_:Fj});function Pj(o,i,s,_,_e=$t.SUM_BY_NONZERO_WEIGHTS){let ct=v(o,"labels","cosineDistance"),Mt=v(i,"predictions","cosineDistance"),Ft=null;_!=null&&(Ft=v(_,"weights","cosineDistance")),xt$1(ct.shape,Mt.shape,"Error in cosineDistance: ");let Ut=ke(1),Xt=Te$1(Ut,ot(se(ct,Mt),s,!0));return cr(Xt,Ft,_e)}var AN=N$1({cosineDistance_:Pj});function Oj(o,i,s,_=$t.SUM_BY_NONZERO_WEIGHTS){let _e=v(o,"labels","hingeLoss"),ct=v(i,"predictions","hingeLoss"),Mt=null;s!=null&&(Mt=v(s,"weights","hingeLoss")),xt$1(_e.shape,ct.shape,"Error in hingeLoss: ");let Ft=ke(1);_e=Te$1(se(ke(2),_e),Ft);let Ut=lu(Te$1(Ft,se(_e,ct)));return cr(Ut,Mt,_)}var FN=N$1({hingeLoss_:Oj});function Mj(o,i,s,_=1,_e=$t.SUM_BY_NONZERO_WEIGHTS){let ct=v(o,"labels","huberLoss"),Mt=v(i,"predictions","huberLoss"),Ft=null;s!=null&&(Ft=v(s,"weights","huberLoss")),xt$1(ct.shape,Mt.shape,"Error in huberLoss: ");let Ut=ke(_),Xt=Qt(Te$1(Mt,ct)),Kt=Hu(Xt,Ut),nr=Te$1(Xt,Kt),rr=Ce$1(se(ke(.5),Zt(Kt)),se(Ut,nr));return cr(rr,Ft,_e)}var PN=N$1({huberLoss_:Mj});function Lj(o,i,s,_=1e-7,_e=$t.SUM_BY_NONZERO_WEIGHTS){let ct=v(o,"labels","logLoss"),Mt=v(i,"predictions","logLoss"),Ft=null;s!=null&&(Ft=v(s,"weights","logLoss")),xt$1(ct.shape,Mt.shape,"Error in logLoss: ");let Ut=ke(1),Xt=ke(_),Kt=pr(se(ct,pi(Ce$1(Mt,Xt)))),nr=se(Te$1(Ut,ct),pi(Ce$1(Te$1(Ut,Mt),Xt))),rr=Te$1(Kt,nr);return cr(rr,Ft,_e)}var ON=N$1({logLoss_:Lj});function Bj(o,i,s,_=$t.SUM_BY_NONZERO_WEIGHTS){let _e=v(o,"labels","meanSquaredError"),ct=v(i,"predictions","meanSquaredError"),Mt=null;s!=null&&(Mt=v(s,"weights","meanSquaredError")),xt$1(_e.shape,ct.shape,"Error in meanSquaredError: ");let Ft=Kd(_e,ct);return cr(Ft,Mt,_)}var MN=N$1({meanSquaredError_:Bj});function zj(o,i){let s=v(o,"labels","sigmoidCrossEntropyWithLogits"),_=v(i,"logits","sigmoidCrossEntropyWithLogits");xt$1(s.shape,_.shape,"Error in sigmoidCrossEntropyWithLogits: ");let _e=lu(_),ct=se(_,s),Mt=kd(_o(pr(Qt(_))));return Ce$1(Te$1(_e,ct),Mt)}function Vj(o,i,s,_=0,_e=$t.SUM_BY_NONZERO_WEIGHTS){let ct=v(o,"multiClassLabels","sigmoidCrossEntropy"),Mt=v(i,"logits","sigmoidCrossEntropy"),Ft=null;if(s!=null&&(Ft=v(s,"weights","sigmoidCrossEntropy")),xt$1(ct.shape,Mt.shape,"Error in sigmoidCrossEntropy: "),_>0){let Xt=ke(_),Kt=ke(1),nr=ke(.5);ct=Ce$1(se(ct,Te$1(Kt,Xt)),se(nr,Xt))}let Ut=zj(ct,Mt);return cr(Ut,Ft,_e)}var LN=N$1({sigmoidCrossEntropy_:Vj});function Wj(o,i,s=-1){if(s===-1&&(s=i.rank-1),s!==i.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${i.rank} and dim was ${s}`);return Ir((_,_e,ct)=>{let Mt=_d(_e,[s],!0),Ft=Te$1(Ue(_e,"float32"),Mt);ct([_,Ft]);let Ut=pr(se(Ft,_));return{value:ot(Ut,[s]),gradFunc:(Xt,Kt)=>{let[nr,rr]=Kt,or=ii(Xt.shape,[s]);return[se(W$1(Xt,or),Te$1(Ue(nr,"float32"),_o(rr))),se(W$1(Xt,or),Te$1(_o(rr),Ue(nr,"float32")))]}}})(o,i)}function Uj(o,i,s,_=0,_e=$t.SUM_BY_NONZERO_WEIGHTS){let ct=v(o,"onehotLabels","softmaxCrossEntropy"),Mt=v(i,"logits","softmaxCrossEntropy"),Ft=null;if(s!=null&&(Ft=v(s,"weights","softmaxCrossEntropy")),xt$1(ct.shape,Mt.shape,"Error in softmaxCrossEntropy: "),_>0){let Xt=ke(_),Kt=ke(1),nr=ke(ct.shape[1]);ct=Ce$1(se(ct,Te$1(Kt,Xt)),je(Xt,nr))}let Ut=Wj(ct,Mt);return cr(Ut,Ft,_e)}var BN=N$1({softmaxCrossEntropy_:Uj});function Gj(o,i,s,_){let _e=v(o,"indices","sparseFillEmptyRows","int32"),ct=v(i,"values","sparseFillEmptyRows"),Mt=v(s,"denseShape","sparseFillEmptyRows","int32"),Ft=v(_,"defaultValue","sparseFillEmptyRows",ct.dtype);if(_e.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${_e.shape}`);if(ct.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${ct.shape}`);if(Mt.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${Mt.shape}`);if(Ft.rank!==0)throw new Error(`Default value should be a scalar but received shape ${Ft.shape}`);let Ut={indices:_e,values:ct,denseShape:Mt,defaultValue:Ft},Xt=T$1.runKernel(Ki,Ut);return{outputIndices:Xt[0],outputValues:Xt[1],emptyRowIndicator:Xt[2],reverseIndexMap:Xt[3]}}var zN=N$1({sparseFillEmptyRows_:Gj});function Hj(o,i,s){let _=v(o,"inputIndices","sparseReshape","int32"),_e=v(i,"inputShape","sparseReshape","int32"),ct=v(s,"newShape","sparseReshape","int32");if(_.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${_.shape}`);if(_e.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${_e.shape}`);if(ct.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${ct.shape}`);let Mt={inputIndices:_,inputShape:_e,newShape:ct},Ft=T$1.runKernel(ei,Mt);return{outputIndices:Ft[0],outputShape:Ft[1]}}var VN=N$1({sparseReshape_:Hj});function Kj(o,i,s){let _=v(o,"data","sparseSegmentMean"),_e=v(i,"indices","sparseSegmentMean","int32"),ct=v(s,"segmentIds","sparseSegmentMean","int32");if(_.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(_e.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${_e.shape}`);if(ct.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${ct.shape}`);let Mt={data:_,indices:_e,segmentIds:ct};return T$1.runKernel(ya,Mt)}var WN=N$1({sparseSegmentMean_:Kj});function qj(o,i,s){let _=v(o,"data","sparseSegmentSum"),_e=v(i,"indices","sparseSegmentSum","int32"),ct=v(s,"segmentIds","sparseSegmentSum","int32");if(_.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(_e.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${_e.shape}`);if(ct.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${ct.shape}`);let Mt={data:_,indices:_e,segmentIds:ct};return T$1.runKernel(ba,Mt)}var UN=N$1({sparseSegmentSum_:qj});function jj(o,i,s,_,_e,ct,Mt,Ft){let Ut=v(o,"data","stringNGrams","string");if(Ut.dtype!=="string")throw new Error("Data must be of datatype string");if(Ut.shape.length!==1)throw new Error(`Data must be a vector, saw: ${Ut.shape}`);let Xt=v(i,"dataSplits","stringNGrams");if(Xt.dtype!=="int32")throw new Error("Data splits must be of datatype int32");let Kt={separator:s,nGramWidths:_,leftPad:_e,rightPad:ct,padWidth:Mt,preserveShortSequences:Ft},nr={data:Ut,dataSplits:Xt},rr=T$1.runKernel(Ca,nr,Kt);return{nGrams:rr[0],nGramsSplits:rr[1]}}var GN=N$1({stringNGrams_:jj});function Xj(o,i,s=!0){let _=v(o,"input","stringSplit","string"),_e=v(i,"delimiter","stringSplit","string");if(_.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${_.shape}`);if(_e.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${_e.shape}`);let ct={skipEmpty:s},Mt={input:_,delimiter:_e},Ft=T$1.runKernel(ji,Mt,ct);return{indices:Ft[0],values:Ft[1],shape:Ft[2]}}var HN=N$1({stringSplit_:Xj});function Yj(o,i){let s=v(o,"input","stringToHashBucketFast","string"),_={numBuckets:i};if(i<=0)throw new Error("Number of buckets must be at least 1");let _e={input:s};return T$1.runKernel(Xi,_e,_)}var KN=N$1({stringToHashBucketFast_:Yj});function Qj(o,i,s,_=!0){let _e=v(o,"input","staticRegexReplace","string"),ct={pattern:i,rewrite:s,replaceGlobal:_};return T$1.runKernel(Ru,{x:_e},ct)}var qN=N$1({staticRegexReplace_:Qj}),Zj={fft:uc,ifft:ju,rfft:pc,irfft:Hd},Jj={hammingWindow:pN,hannWindow:Qd,frame:Zd,stft:cN},eX={flipLeftRight:mN,grayscaleToRGB:dN,resizeNearestNeighbor:kN,resizeBilinear:vN,rgbToGrayscale:fN,rotateWithOffset:hN,cropAndResize:lN,nonMaxSuppression:gN,nonMaxSuppressionAsync:bN,nonMaxSuppressionWithScore:CN,nonMaxSuppressionWithScoreAsync:wN,nonMaxSuppressionPadded:SN,nonMaxSuppressionPaddedAsync:IN,threshold:NN,transform:TN},tX={bandPart:_N,gramSchmidt:EN,qr:RN},rX={absoluteDifference:DN,computeWeightedLoss:cr,cosineDistance:AN,hingeLoss:FN,huberLoss:PN,logLoss:ON,meanSquaredError:MN,sigmoidCrossEntropy:LN,softmaxCrossEntropy:BN},oX={sparseFillEmptyRows:zN,sparseReshape:VN,sparseSegmentMean:WN,sparseSegmentSum:UN},nX={stringNGrams:GN,stringSplit:HN,stringToHashBucketFast:KN,staticRegexReplace:qN},jN={};qe(jN,{Serializable:()=>Rl,SerializationMap:()=>rf,getRegisteredName:()=>aX,registerClass:()=>rS});var sX=new Map,tS=new Map,Rl=class{getClassName(){return this.constructor.className}static fromConfig(o,i){return new o(i)}},rf=class $le{constructor(){this.classNameMap={}}static getMap(){return $le.instance==null&&($le.instance=new $le),$le.instance}static register(i){$le.getMap().classNameMap[i.className]=[i,i.fromConfig]}};function rS(o,i,s){E(o.className!=null,()=>"Class being registered does not have the static className property defined."),E(typeof o.className=="string",()=>"className is required to be a string, but got type "+typeof o.className),E(o.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),i===void 0&&(i="Custom"),s===void 0&&(s=o.className);let _=i+">"+s;return rf.register(o),sX.set(_,o),tS.set(o,_),o}function aX(o){return tS.has(o)?tS.get(o):o.className}var kr=class extends Rl{minimize(o,i=!1,s){let{value:_,grads:_e}=this.computeGradients(o,s);if(s!=null){let ct=s.map(Mt=>({name:Mt.name,tensor:_e[Mt.name]}));this.applyGradients(ct)}else this.applyGradients(_e);return Ot$1(_e),i?_:(_.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(o,i){return Vw(o,i)}dispose(){this.iterations_!=null&&Ot$1(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:ke(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(o){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(o){return this.iterations_=(await o[0].tensor.data())[0],o.slice(1)}};Object.defineProperty(kr,Symbol.hasInstance,{value:o=>o.minimize!=null&&o.computeGradients!=null&&o.applyGradients!=null});var Ju=class extends kr{static get className(){return"Adadelta"}constructor(o,i,s=null){super(),this.learningRate=o,this.rho=i,this.epsilon=s,this.accumulatedGrads=[],this.accumulatedUpdates=[],s==null&&(this.epsilon=T$1.backend.epsilon())}applyGradients(o){(Array.isArray(o)?o.map(i=>i.name):Object.keys(o)).forEach((i,s)=>{let _=T$1.registeredVariables[i],_e=!1;this.accumulatedGrads[s]==null&&(this.accumulatedGrads[s]={originalName:`${i}/accum_grad`,variable:De$1(()=>Gt$1(_).variable(_e))}),this.accumulatedUpdates[s]==null&&(this.accumulatedUpdates[s]={originalName:`${i}/accum_var`,variable:De$1(()=>Gt$1(_).variable(_e))});let ct=Array.isArray(o)?o[s].tensor:o[i];if(ct==null)return;let Mt=this.accumulatedGrads[s].variable,Ft=this.accumulatedUpdates[s].variable;De$1(()=>{let Ut=Ce$1(se(Mt,this.rho),se(Zt(ct),1-this.rho)),Xt=se(je(Rr(Ce$1(Ft,this.epsilon)),Rr(Ce$1(Mt,this.epsilon))),ct),Kt=Ce$1(se(Ft,this.rho),se(Zt(Xt),1-this.rho));Mt.assign(Ut),Ft.assign(Kt);let nr=Ce$1(se(Xt,-this.learningRate),_);_.assign(nr)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(Ot$1(this.accumulatedGrads.map(o=>o.variable)),Ot$1(this.accumulatedUpdates.map(o=>o.variable)))}async getWeights(){let o=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(o.map(i=>({name:i.originalName,tensor:i.variable})))}async setWeights(o){let i=(o=await this.extractIterations(o)).length/2,s=!1;this.accumulatedGrads=o.slice(0,i).map(_=>({originalName:_.name,variable:_.tensor.variable(s)})),this.accumulatedUpdates=o.slice(i,2*i).map(_=>({originalName:_.name,variable:_.tensor.variable(s)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(o,i){return new o(i.learningRate,i.rho,i.epsilon)}},ep=class extends kr{static get className(){return"Adagrad"}constructor(o,i=.1){super(),this.learningRate=o,this.initialAccumulatorValue=i,this.accumulatedGrads=[]}applyGradients(o){(Array.isArray(o)?o.map(i=>i.name):Object.keys(o)).forEach((i,s)=>{let _=T$1.registeredVariables[i];this.accumulatedGrads[s]==null&&(this.accumulatedGrads[s]={originalName:`${i}/accumulator`,variable:De$1(()=>$a(_.shape,this.initialAccumulatorValue).variable(!1))});let _e=Array.isArray(o)?o[s].tensor:o[i];if(_e==null)return;let ct=this.accumulatedGrads[s].variable;De$1(()=>{let Mt=Ce$1(ct,Zt(_e));ct.assign(Mt);let Ft=Ce$1(se(je(_e,Rr(Ce$1(Mt,T$1.backend.epsilon()))),-this.learningRate),_);_.assign(Ft)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&Ot$1(this.accumulatedGrads.map(o=>o.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(o=>({name:o.originalName,tensor:o.variable})))}async setWeights(o){o=await this.extractIterations(o),this.accumulatedGrads=o.map(i=>({originalName:i.name,variable:i.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(o,i){return new o(i.learningRate,i.initialAccumulatorValue)}},tp=class extends kr{static get className(){return"Adam"}constructor(o,i,s,_=null){super(),this.learningRate=o,this.beta1=i,this.beta2=s,this.epsilon=_,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],De$1(()=>{this.accBeta1=ke(i).variable(),this.accBeta2=ke(s).variable()}),_==null&&(this.epsilon=T$1.backend.epsilon())}applyGradients(o){let i=Array.isArray(o)?o.map(s=>s.name):Object.keys(o);De$1(()=>{let s=Te$1(1,this.accBeta1),_=Te$1(1,this.accBeta2);i.forEach((_e,ct)=>{let Mt=T$1.registeredVariables[_e],Ft=!1;this.accumulatedFirstMoment[ct]==null&&(this.accumulatedFirstMoment[ct]={originalName:`${_e}/m`,variable:De$1(()=>Gt$1(Mt).variable(Ft))}),this.accumulatedSecondMoment[ct]==null&&(this.accumulatedSecondMoment[ct]={originalName:`${_e}/v`,variable:De$1(()=>Gt$1(Mt).variable(Ft))});let Ut=Array.isArray(o)?o[ct].tensor:o[_e];if(Ut==null)return;let Xt=this.accumulatedFirstMoment[ct].variable,Kt=this.accumulatedSecondMoment[ct].variable,nr=Ce$1(se(Xt,this.beta1),se(Ut,1-this.beta1)),rr=Ce$1(se(Kt,this.beta2),se(Zt(Ut),1-this.beta2)),or=je(nr,s),hr=je(rr,_);Xt.assign(nr),Kt.assign(rr);let fr=Ce$1(se(je(or,Ce$1(Rr(hr),this.epsilon)),-this.learningRate),Mt);Mt.assign(fr)}),this.accBeta1.assign(se(this.accBeta1,this.beta1)),this.accBeta2.assign(se(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&Ot$1(this.accumulatedFirstMoment.map(o=>o.variable)),this.accumulatedSecondMoment!=null&&Ot$1(this.accumulatedSecondMoment.map(o=>o.variable))}async getWeights(){let o=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(o.map(i=>({name:i.originalName,tensor:i.variable})))}async setWeights(o){o=await this.extractIterations(o),De$1(()=>{this.accBeta1.assign(ui(this.beta1,this.iterations_+1)),this.accBeta2.assign(ui(this.beta2,this.iterations_+1))});let i=o.length/2,s=!1;this.accumulatedFirstMoment=o.slice(0,i).map(_=>({originalName:_.name,variable:_.tensor.variable(s)})),this.accumulatedSecondMoment=o.slice(i,2*i).map(_=>({originalName:_.name,variable:_.tensor.variable(s)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(o,i){return new o(i.learningRate,i.beta1,i.beta2,i.epsilon)}},rp=class extends kr{static get className(){return"Adamax"}constructor(o,i,s,_=null,_e=0){super(),this.learningRate=o,this.beta1=i,this.beta2=s,this.epsilon=_,this.decay=_e,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],De$1(()=>{this.iteration=ke(0).variable(),this.accBeta1=ke(i).variable()}),_==null&&(this.epsilon=T$1.backend.epsilon())}applyGradients(o){let i=Array.isArray(o)?o.map(s=>s.name):Object.keys(o);De$1(()=>{let s=Te$1(1,this.accBeta1),_=je(-this.learningRate,Ce$1(se(this.iteration,this.decay),1));i.forEach((_e,ct)=>{let Mt=T$1.registeredVariables[_e],Ft=!1;this.accumulatedFirstMoment[ct]==null&&(this.accumulatedFirstMoment[ct]={originalName:`${_e}/m`,variable:Gt$1(Mt).variable(Ft)}),this.accumulatedWeightedInfNorm[ct]==null&&(this.accumulatedWeightedInfNorm[ct]={originalName:`${_e}/v`,variable:Gt$1(Mt).variable(Ft)});let Ut=Array.isArray(o)?o[ct].tensor:o[_e];if(Ut==null)return;let Xt=this.accumulatedFirstMoment[ct].variable,Kt=this.accumulatedWeightedInfNorm[ct].variable,nr=Ce$1(se(Xt,this.beta1),se(Ut,1-this.beta1)),rr=se(Kt,this.beta2),or=Qt(Ut),hr=Ad(rr,or);Xt.assign(nr),Kt.assign(hr);let fr=Ce$1(se(je(_,s),je(nr,Ce$1(hr,this.epsilon))),Mt);Mt.assign(fr)}),this.iteration.assign(Ce$1(this.iteration,1)),this.accBeta1.assign(se(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&Ot$1(this.accumulatedFirstMoment.map(o=>o.variable)),this.accumulatedWeightedInfNorm!=null&&Ot$1(this.accumulatedWeightedInfNorm.map(o=>o.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(o){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(o,i){return new o(i.learningRate,i.beta1,i.beta2,i.epsilon,i.decay)}},mi=class extends kr{static get className(){return"SGD"}constructor(o){super(),this.learningRate=o,this.setLearningRate(o)}applyGradients(o){(Array.isArray(o)?o.map(i=>i.name):Object.keys(o)).forEach((i,s)=>{let _=Array.isArray(o)?o[s].tensor:o[i];if(_==null)return;let _e=T$1.registeredVariables[i];De$1(()=>{let ct=Ce$1(se(this.c,_),_e);_e.assign(ct)})}),this.incrementIterations()}setLearningRate(o){this.learningRate=o,this.c!=null&&this.c.dispose(),this.c=$r(ke(-o))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(o){if((o=await this.extractIterations(o)).length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(o,i){return new o(i.learningRate)}},op=class extends mi{static get className(){return"Momentum"}constructor(o,i,s=!1){super(o),this.learningRate=o,this.momentum=i,this.useNesterov=s,this.accumulations=[],this.m=ke(this.momentum)}applyGradients(o){(Array.isArray(o)?o.map(i=>i.name):Object.keys(o)).forEach((i,s)=>{let _=T$1.registeredVariables[i];this.accumulations[s]==null&&(this.accumulations[s]={originalName:`${i}/momentum`,variable:De$1(()=>Gt$1(_).variable(!1))});let _e=this.accumulations[s].variable,ct=Array.isArray(o)?o[s].tensor:o[i];ct!=null&&De$1(()=>{let Mt,Ft=Ce$1(se(this.m,_e),ct);Mt=this.useNesterov?Ce$1(se(this.c,Ce$1(ct,se(Ft,this.m))),_):Ce$1(se(this.c,Ft),_),_e.assign(Ft),_.assign(Mt)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&Ot$1(this.accumulations.map(o=>o.variable))}setMomentum(o){this.momentum=o}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(o=>({name:o.originalName,tensor:o.variable})))}async setWeights(o){o=await this.extractIterations(o),this.accumulations=o.map(i=>({originalName:i.name,variable:i.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(o,i){return new o(i.learningRate,i.momentum,i.useNesterov)}},np=class extends kr{static get className(){return"RMSProp"}constructor(o,i=.9,s=0,_=null,_e=!1){if(super(),this.learningRate=o,this.decay=i,this.momentum=s,this.epsilon=_,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=_e,_==null&&(this.epsilon=T$1.backend.epsilon()),o==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(o){(Array.isArray(o)?o.map(i=>i.name):Object.keys(o)).forEach((i,s)=>{let _=T$1.registeredVariables[i],_e=!1;this.accumulatedMeanSquares[s]==null&&(this.accumulatedMeanSquares[s]={originalName:`${i}/rms`,variable:De$1(()=>Gt$1(_).variable(_e))}),this.accumulatedMoments[s]==null&&(this.accumulatedMoments[s]={originalName:`${i}/momentum`,variable:De$1(()=>Gt$1(_).variable(_e))}),this.accumulatedMeanGrads[s]==null&&this.centered&&(this.accumulatedMeanGrads[s]={originalName:`${i}/mg`,variable:De$1(()=>Gt$1(_).variable(_e))});let ct=Array.isArray(o)?o[s].tensor:o[i];if(ct==null)return;let Mt=this.accumulatedMeanSquares[s].variable,Ft=this.accumulatedMoments[s].variable;De$1(()=>{let Ut=Ce$1(se(Mt,this.decay),se(Zt(ct),1-this.decay));if(this.centered){let Xt=this.accumulatedMeanGrads[s].variable,Kt=Ce$1(se(Xt,this.decay),se(ct,1-this.decay)),nr=je(se(ct,this.learningRate),Rr(Te$1(Ut,Ce$1(Zt(Kt),this.epsilon)))),rr=Ce$1(se(Ft,this.momentum),nr);Mt.assign(Ut),Xt.assign(Kt),Ft.assign(rr);let or=Te$1(_,rr);_.assign(or)}else{let Xt=Ce$1(se(Mt,this.decay),se(Zt(ct),1-this.decay)),Kt=Ce$1(se(Ft,this.momentum),je(se(ct,this.learningRate),Rr(Ce$1(Xt,this.epsilon))));Mt.assign(Xt),Ft.assign(Kt);let nr=Te$1(_,Kt);_.assign(nr)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&Ot$1(this.accumulatedMeanSquares.map(o=>o.variable)),this.accumulatedMeanGrads!=null&&this.centered&&Ot$1(this.accumulatedMeanGrads.map(o=>o.variable)),this.accumulatedMoments!=null&&Ot$1(this.accumulatedMoments.map(o=>o.variable))}async getWeights(){let o=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&o.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(o.map(i=>({name:i.originalName,tensor:i.variable})))}async setWeights(o){o=await this.extractIterations(o);let i=this.centered?o.length/3:o.length/2,s=!1;this.accumulatedMeanSquares=o.slice(0,i).map(_=>({originalName:_.name,variable:_.tensor.variable(s)})),this.accumulatedMoments=o.slice(i,2*i).map(_=>({originalName:_.name,variable:_.tensor.variable(s)})),this.centered&&(this.accumulatedMeanGrads=o.slice(2*i,3*i).map(_=>({originalName:_.name,variable:_.tensor.variable(s)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(o,i){return new o(i.learningRate,i.decay,i.momentum,i.epsilon,i.centered)}},iX=[Ju,ep,tp,rp,op,np,mi];function XN(){for(let o of iX)rS(o)}var di={};qe(di,{CompositeArrayBuffer:()=>ir,browserFiles:()=>QN,browserHTTPRequest:()=>tT,concatenateArrayBuffers:()=>dk,copyModel:()=>Tk,decodeWeights:()=>sd,decodeWeightsStream:()=>ad,encodeWeights:()=>pk,fromMemory:()=>rT,fromMemorySync:()=>uS,getLoadHandlers:()=>xk,getModelArtifactsForJSON:()=>tc,getModelArtifactsForJSONSync:()=>$w,getModelArtifactsInfoForJSON:()=>va,getSaveHandlers:()=>gk,getWeightSpecs:()=>Sl,http:()=>nf,isHTTPScheme:()=>of,listModels:()=>kk,loadWeights:()=>JN,moveModel:()=>_k,registerLoadRouter:()=>hk,registerSaveRouter:()=>fk,removeModel:()=>Nk,weightsLoaderFactory:()=>aS,withSaveHandler:()=>oT,withSaveHandlerSync:()=>nT});var uX="model",pX=".json",cX=".weights.bin";function YN(o){return new Promise(i=>setTimeout(i)).then(o)}var dc=class Pme{constructor(i){if(!A().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");i.startsWith(Pme.URL_SCHEME)&&(i=i.slice(Pme.URL_SCHEME.length)),(i==null||i.length===0)&&(i=uX),this.modelJsonFileName=i+pX,this.weightDataFileName=i+cX}async save(i){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");let s=ir.join(i.weightData),_=window.URL.createObjectURL(new Blob([s],{type:"application/octet-stream"}));if(i.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{let _e=id(i,[{paths:["./"+this.weightDataFileName],weights:i.weightSpecs}]),ct=window.URL.createObjectURL(new Blob([JSON.stringify(_e)],{type:"application/json"})),Mt=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(Mt.download=this.modelJsonFileName,Mt.href=ct,await YN(()=>Mt.dispatchEvent(new MouseEvent("click"))),i.weightData!=null){let Ft=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;Ft.download=this.weightDataFileName,Ft.href=_,await YN(()=>Ft.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:va(i)}}}};dc.URL_SCHEME="downloads://";var oS=class{constructor(o){if(o==null||o.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${o}`);this.jsonFile=o[0],this.weightsFiles=o.slice(1)}async load(){return new Promise((o,i)=>{let s=new FileReader;s.onload=_=>{let _e=JSON.parse(_.target.result),ct=_e.modelTopology;if(ct==null)return void i(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));if(_e.weightsManifest==null)return void i(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));if(this.weightsFiles.length===0)return void o({modelTopology:ct});let Mt=tc(_e,Ft=>this.loadWeights(Ft));o(Mt)},s.onerror=_=>i(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),s.readAsText(this.jsonFile)})}loadWeights(o){let i=[],s=[];for(let ct of o)i.push(...ct.weights),s.push(...ct.paths);let _=this.checkManifestAndWeightFiles(o),_e=s.map(ct=>this.loadWeightsFile(ct,_[ct]));return Promise.all(_e).then(ct=>[i,ct])}loadWeightsFile(o,i){return new Promise((s,_)=>{let _e=new FileReader;_e.onload=ct=>{let Mt=ct.target.result;s(Mt)},_e.onerror=ct=>_(`Failed to weights data from file of path '${o}'.`),_e.readAsArrayBuffer(i)})}checkManifestAndWeightFiles(o){let i=[],s=this.weightsFiles.map(_e=>Ew(_e.name)),_={};for(let _e of o)_e.paths.forEach(ct=>{let Mt=Ew(ct);if(i.indexOf(Mt)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${Mt}'`);if(i.push(Mt),s.indexOf(Mt)===-1)throw new Error(`Weight file with basename '${Mt}' is not provided.`);_[ct]=this.weightsFiles[s.indexOf(Mt)]});if(i.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${i.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return _}},lX=o=>A().getBool("IS_BROWSER")&&!Array.isArray(o)&&o.startsWith(dc.URL_SCHEME)?mX(o.slice(dc.URL_SCHEME.length)):null;function mX(o="model"){return new dc(o)}function QN(o){return new oS(o)}function nS(o,i,s,_){(function(ct){E(ct!=null&&Array.isArray(ct)&&ct.length>0,()=>"promises must be a none empty array")})(o),function(ct,Mt){E(ct>=0&&ct<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${ct}`),E(Mt>=0&&Mt<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${Mt}`),E(Mt>=ct,()=>`startFraction must be no more than endFraction, but got startFraction ${ct} and endFraction ${Mt}`)}(s=s??0,_=_??1);let _e=0;return Promise.all(o.map(ct=>(ct.then(Mt=>{let Ft=s+ ++_e/o.length*(_-s);return i(Ft),Mt}),ct)))}async function sS(o,i){i==null&&(i={});let s=i.fetchFunc==null?A().platform.fetch:i.fetchFunc,_=o.map(ct=>s(ct,i.requestInit,{isBinary:!0})),_e=(i.onProgress==null?await Promise.all(_):await nS(_,i.onProgress,0,.5)).map(ct=>ct.arrayBuffer());return i.onProgress==null?await Promise.all(_e):await nS(_e,i.onProgress,.5,1)}function ZN(o,i){var s;let _,_e=i.fetchFunc==null?A().platform.fetch:i.fetchFunc,ct=0;return(s=i.onProgress)===null||s===void 0||s.call(i,0),new ReadableStream({pull:async Mt=>{for(var Ft;ct<o.length;){_||(_=(await _e(o[ct],i.requestInit,{isBinary:!0})).body.getReader());let{done:Ut,value:Xt}=await _.read();if(!Ut)return void Mt.enqueue(Xt);ct++,_=void 0,(Ft=i.onProgress)===null||Ft===void 0||Ft.call(i,ct/o.length)}Mt.close()}})}async function JN(o,i="",s,_){return aS(_e=>sS(_e,{requestInit:_}))(o,i,s)}function aS(o){return async(i,s="",_)=>{let _e=i.map(()=>!1),ct={},Mt=_!=null?_.map(()=>!1):[],Ft=[];if(i.forEach((or,hr)=>{let fr=0;or.weights.forEach(yr=>{let Lr="quantization"in yr?yr.quantization.dtype:yr.dtype,Br=si[Lr]*ze(yr.shape),Vr=()=>{_e[hr]=!0,ct[hr]==null&&(ct[hr]=[]),ct[hr].push({manifestEntry:yr,groupOffset:fr,sizeBytes:Br})};_!=null?_.forEach((Wr,ro)=>{Wr===yr.name&&(Vr(),Mt[ro]=!0)}):Vr(),Ft.push(yr.name),fr+=Br})}),!Mt.every(or=>or)){let or=_.filter((hr,fr)=>!Mt[fr]);throw new Error(`Could not find weights in manifest with names: ${or.join(", ")}. 
Manifest JSON has weights with names: ${Ft.join(", ")}.`)}let Ut=_e.reduce((or,hr,fr)=>(hr&&or.push(fr),or),[]),Xt=[];Ut.forEach(or=>{i[or].paths.forEach(hr=>{let fr=s+(s.endsWith("/")?"":"/")+hr;Xt.push(fr)})});let Kt=await o(Xt),nr={},rr=0;return Ut.forEach(or=>{let hr=i[or].paths.length,fr=new ir(Kt.slice(rr,rr+hr));ct[or].forEach(yr=>{let Lr=sd(fr.slice(yr.groupOffset,yr.groupOffset+yr.sizeBytes),[yr.manifestEntry]);for(let Br in Lr)nr[Br]=Lr[Br]}),rr+=hr}),nr}}qt.registerSaveRouter(lX);var dX="application/octet-stream",fX="application/json",Dl=class{constructor(o,i){if(this.DEFAULT_METHOD="POST",i==null&&(i={}),this.weightPathPrefix=i.weightPathPrefix,this.weightUrlConverter=i.weightUrlConverter,i.fetchFunc!=null?(E(typeof i.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=i.fetchFunc):this.fetch=A().platform.fetch,E(o!=null&&o.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(o)&&E(o.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${o.length}).`),this.path=o,i.requestInit!=null&&i.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=i.requestInit||{},this.loadOptions=i}async save(o){if(o.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");let i=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);i.body=new FormData;let s=id(o,[{paths:["./model.weights.bin"],weights:o.weightSpecs}]);if(i.body.append("model.json",new Blob([JSON.stringify(s)],{type:fX}),"model.json"),o.weightData!=null){let _e=ir.join(o.weightData);i.body.append("model.weights.bin",new Blob([_e],{type:dX}),"model.weights.bin")}let _=await this.fetch(this.path,i);if(_.ok)return{modelArtifactsInfo:va(o),responses:[_]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${_.status}.`)}async loadModelJSON(){let o,i=await this.fetch(this.path,this.requestInit);if(!i.ok)throw new Error(`Request to ${this.path} failed with status code ${i.status}. Please verify this URL points to the model JSON of the model to load.`);try{o=await i.json()}catch{let ct=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?ct+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":ct+=" Please make sure the server is serving valid JSON for this request.",new Error(ct)}let s=o.modelTopology,_=o.weightsManifest;if(s==null&&_==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return o}async load(){return this.loadOptions.streamWeights?this.loadStream():tc(await this.loadModelJSON(),o=>this.loadWeights(o))}async loadStream(){let o=await this.loadModelJSON(),i=await this.getWeightUrls(o.weightsManifest),s=Sl(o.weightsManifest);return Object.assign(Object.assign({},o),{weightSpecs:s,getWeightStream:()=>ZN(i,this.loadOptions)})}async getWeightUrls(o){let i=Array.isArray(this.path)?this.path[1]:this.path,[s,_]=hX(i),_e=this.weightPathPrefix||s,ct=[],Mt=[];for(let Ft of o)for(let Ut of Ft.paths)this.weightUrlConverter!=null?Mt.push(this.weightUrlConverter(Ut)):ct.push(_e+Ut+_);return this.weightUrlConverter&&ct.push(...await Promise.all(Mt)),ct}async loadWeights(o){let i=await this.getWeightUrls(o);return[Sl(o),await sS(i,this.loadOptions)]}};function hX(o){let i=o.lastIndexOf("/"),s=o.lastIndexOf("?");return[o.substring(0,i)+"/",s>i?o.substring(s):""]}function of(o){return o.match(Dl.URL_SCHEME_REGEX)!=null}Dl.URL_SCHEME_REGEX=/^https?:\/\//;var eT=(o,i)=>{if(typeof fetch>"u"&&(i==null||i.fetchFunc==null))return null;{let s=!0;if(s=Array.isArray(o)?o.every(_=>of(_)):of(o),s)return nf(o,i)}return null};function nf(o,i){return new Dl(o,i)}function tT(o,i){return nf(o,i)}qt.registerSaveRouter(eT),qt.registerLoadRouter(eT);var Al=class{constructor(o){this.modelArtifacts=o}load(){return this.modelArtifacts}},sf=class{constructor(o){this.saveHandler=o}save(o){return this.saveHandler(o)}},iS=class{constructor(o){o.load&&(this.load=()=>Promise.resolve(o.load())),o.save&&(this.save=i=>Promise.resolve(o.save(i)))}};function rT(o,i,s,_){return new iS(uS(...arguments))}function uS(o,i,s,_){return arguments.length===1?o.modelTopology!=null||o.weightSpecs!=null?new Al(o):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Al({modelTopology:o})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Al({modelTopology:o,weightSpecs:i,weightData:s,trainingConfig:_}))}function oT(o){return new sf(o)}function nT(o){return new sf(o)}var aT={};function gX(o,i,s){let _=v(o,"labels","confusionMatrix"),_e=v(i,"predictions","confusionMatrix");E(s==null||s>0&&Number.isInteger(s),()=>`If provided, numClasses must be a positive integer, but got ${s}`),E(_.rank===1,()=>`Expected the rank of labels to be 1, but got ${_.rank}`),E(_e.rank===1,()=>`Expected the rank of predictions to be 1, but got ${_e.rank}`),E(_.shape[0]===_e.shape[0],()=>`Mismatch in the number of examples: ${_.shape[0]} vs. ${_e.shape[0]}. Labels and predictions should have the same number of elements.`),E(s>0&&Number.isInteger(s),()=>`numClasses is required to be a positive integer, but got ${s}`);let ct=El(Ue(_,"int32"),s),Mt=El(Ue(_e,"int32"),s),Ft=mc(ct),Ut=Ze(Ft,Mt);return Ue(Ut,"int32")}qe(aT,{confusionMatrix:()=>sT});var sT=N$1({confusionMatrix_:gX}),cT={},sp;qe(cT,{draw:()=>vX,fromPixels:()=>kX,fromPixelsAsync:()=>wX,toPixels:()=>IX});var iT=!1;function uT(o,i=3){if(i>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(o==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let s=!1,_=!1,_e=!1,ct=!1,Mt=!1,Ft=!1;if(o.data instanceof Uint8Array)s=!0;else if(typeof ImageData<"u"&&o instanceof ImageData)_=!0;else if(typeof HTMLVideoElement<"u"&&o instanceof HTMLVideoElement)_e=!0;else if(typeof HTMLImageElement<"u"&&o instanceof HTMLImageElement)ct=!0;else if(o.getContext!=null)Mt=!0;else{if(!(typeof ImageBitmap<"u"&&o instanceof ImageBitmap))throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${o.constructor.name}`);Ft=!0}if(Xp(Du,T$1.backendName)!=null){let rr={pixels:o},or={numChannels:i};return T$1.runKernel(Du,rr,or)}let Ut,Xt,[Kt,nr]=_e?[o.videoWidth,o.videoHeight]:[o.width,o.height];if(Mt)Ut=o.getContext("2d").getImageData(0,0,Kt,nr).data;else if(_||s)Ut=o.data;else if(ct||_e||Ft){if(sp==null)if(typeof document>"u"){if(typeof OffscreenCanvas>"u"||typeof OffscreenCanvasRenderingContext2D>"u")throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");sp=new OffscreenCanvas(1,1).getContext("2d")}else sp=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});sp.canvas.width=Kt,sp.canvas.height=nr,sp.drawImage(o,0,0,Kt,nr),Ut=sp.getImageData(0,0,Kt,nr).data}if(i===4)Xt=new Int32Array(Ut);else{let rr=Kt*nr;Xt=new Int32Array(rr*i);for(let or=0;or<rr;or++)for(let hr=0;hr<i;++hr)Xt[or*i+hr]=Ut[4*or+hr]}return jd(Xt,[nr,Kt,i],"int32")}function xX(o){return o!=null&&o.data instanceof Uint8Array}function yX(){return typeof window<"u"&&typeof ImageBitmap<"u"&&window.hasOwnProperty("createImageBitmap")}function bX(o){return o!=null&&o.width!==0&&o.height!==0}function CX(o){return yX()&&!(o instanceof ImageBitmap)&&bX(o)&&!xX(o)}async function wX(o,i=3){let s=null;if(A().getBool("WRAP_TO_IMAGEBITMAP")&&CX(o)){let _;try{_=await createImageBitmap(o,{premultiplyAlpha:"none"})}catch{_=null}s=_!=null&&_.width===o.width&&_.height===o.height?_:o}else s=o;return uT(s,i)}function pT(o){if(o.rank!==2&&o.rank!==3)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${o.rank}.`);let i=o.rank===2?1:o.shape[2];if(i>4||i===2)throw new Error(`toPixels only supports depth of size 1, 3 or 4 but got ${i}`);if(o.dtype!=="float32"&&o.dtype!=="int32")throw new Error(`Unsupported type for toPixels: ${o.dtype}. Please use float32 or int32 tensors.`)}function SX(o){let i=(o==null?void 0:o.alpha)||1;if(i>1||i<0)throw new Error(`Alpha value ${i} is suppoed to be in range [0 - 1].`)}async function IX(o,i){let s=v(o,"img","toPixels");if(!(o instanceof mt)){let Xt=s;s=Ue(Xt,"int32"),Xt.dispose()}pT(s);let[_,_e]=s.shape.slice(0,2),ct=s.rank===2?1:s.shape[2],Mt=await s.data(),Ft=s.dtype==="float32"?255:1,Ut=new Uint8ClampedArray(_e*_*4);for(let Xt=0;Xt<_*_e;++Xt){let Kt=[0,0,0,255];for(let rr=0;rr<ct;rr++){let or=Mt[Xt*ct+rr];if(s.dtype==="float32"){if(or<0||or>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${or}.`)}else if(s.dtype==="int32"&&(or<0||or>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${or}.`);ct===1?(Kt[0]=or*Ft,Kt[1]=or*Ft,Kt[2]=or*Ft):Kt[rr]=or*Ft}let nr=4*Xt;Ut[nr+0]=Math.round(Kt[0]),Ut[nr+1]=Math.round(Kt[1]),Ut[nr+2]=Math.round(Kt[2]),Ut[nr+3]=Math.round(Kt[3])}if(i!=null){iT||Xp($u,T$1.backendName)!=null&&(console.warn("tf.browser.toPixels is not efficient to draw tensor on canvas. Please try tf.browser.draw instead."),iT=!0),i.width=_e,i.height=_;let Xt=i.getContext("2d"),Kt=new ImageData(Ut,_e,_);Xt.putImageData(Kt,0,0)}return s!==o&&s.dispose(),Ut}function vX(o,i,s){let _=v(o,"img","draw");if(!(o instanceof mt)){let Mt=_;_=Ue(Mt,"int32"),Mt.dispose()}pT(_),SX(s==null?void 0:s.imageOptions);let _e={image:_},ct={canvas:i,options:s};T$1.runKernel($u,_e,ct)}var kX=N$1({fromPixels_:uT}),af={};function lT(o,i){let s=o.shape.length,_=i.shape.length;if(s<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${s}.`);if(_<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${_}.`);if(i.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${i.dtype}.`);if(i.shape[_-1]>s)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${i.shape[_-1]} vs. ${s}`);if(ze(o.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${o.shape}.`);let _e=i.shape,ct=_e[_e.length-1],Mt=1;for(let nr=0;nr<_e.length-1;++nr)Mt*=_e[nr];let Ft=o.shape,Ut=_e.slice();Ut.pop();let Xt=1;for(let nr=ct;nr<s;++nr)Xt*=Ft[nr],Ut.push(Ft[nr]);let Kt=[...js(o.shape).map(nr=>nr/Xt),1].slice(0,ct);return[Ut,Mt,Xt,Kt]}qe(af,{prepareAndValidate:()=>lT});var pt={};qe(pt,{assertParamsValid:()=>TX,computeFlatOffset:()=>DX,computeOutShape:()=>EX,getNormalizedAxes:()=>$X,isSliceContinous:()=>RX,maskToAxes:()=>_X,parseSliceParams:()=>AX,sliceInfo:()=>FX,startForAxis:()=>bT,startIndicesWithElidedDims:()=>gT,stopForAxis:()=>CT,stopIndicesWithElidedDims:()=>xT,stridesForAxis:()=>yT,stridesWithElidedDims:()=>dT});var pS=-2,NX=-1;function TX(o,i,s){let _=o.shape.length;E(_===i.length,()=>`Error in slice${_}D: Length of begin ${i} must match the rank of the array (${_}).`),E(_===s.length,()=>`Error in slice${_}D: Length of size ${s} must match the rank of the array (${_}).`);for(let _e=0;_e<_;++_e)E(i[_e]+s[_e]<=o.shape[_e],()=>`Error in slice${_}D: begin[${_e}] + size[${_e}] (${i[_e]+s[_e]}) would overflow input.shape[${_e}] (${o.shape[_e]})`)}function _X(o){let i=[],s=0;for(;o>0;)1&o&&i.push(s),o/=2,s++;return i}function EX(o,i,s){let _=[];for(let _e=0;_e<o.length;_e++)_[_e]=Math.ceil((i[_e]-o[_e])/s[_e]);return _}function dT(o,i,s,_){let _e=[...o];for(let ct=_e.length;ct<_.length;ct++)_e.push(1);for(let ct=0;ct<s;ct++)ct===0?_e[i]=1:(_e.splice(i,0,1),_e.pop());return _e}function fT(o,i,s){return s<=o?s:s-(i-1)}function hT(o,i){let s=[];for(let _=0;_<o;_++)s.push(i+_);return s}function $X(o,i,s,_,_e,ct,Mt,Ft,Ut){let Xt=o.length,Kt=new Array(Xt),nr=new Array(Xt),rr=new Array(Xt);if(i.length&&s>0){let or=i[0],hr=s+1;Kt=gT(Mt,or,hr,_,o),nr=xT(Ft,or,hr,_e,o),rr=dT(ct,or,hr,o)}else for(let or=0;or<Xt;or++)Kt[or]=bT(Mt,_,ct,o,or,Ut),nr[or]=CT(Ft,_e,ct,o,or,Ut),rr[or]=yT(ct,or,Ut);return{begin:Kt,end:nr,strides:rr}}function gT(o,i,s,_,_e){let ct=[..._e],Mt=hT(s,i);for(let Ft=0;Ft<ct.length;Ft++)if(Mt.indexOf(Ft)>-1)ct[Ft]=0;else{let Ut=fT(i,s,Ft),Xt=_[Ut];o&1<<Ut&&(Xt=0),ct[Ft]=Xt}return ct}function xT(o,i,s,_,_e){let ct=[..._e],Mt=hT(s,i);for(let Ft=0;Ft<ct.length;Ft++)if(Mt.indexOf(Ft)>-1)ct[Ft]=Number.MAX_SAFE_INTEGER;else{let Ut=fT(i,s,Ft),Xt=_[Ut];o&1<<Ut&&(Xt=Number.MAX_SAFE_INTEGER),ct[Ft]=Xt}for(let Ft=0;Ft<ct.length;Ft++){let Ut=_e[Ft];ct[Ft]<0&&(ct[Ft]+=Ut),ct[Ft]=Vp(0,ct[Ft],_e[Ft])}return ct}function yT(o,i,s){let _=o[i];return(s&1<<i||_==null)&&(_=1),_}function bT(o,i,s,_,_e,ct){let Mt=i[_e],Ft=s[_e]||1;(o&1<<_e||ct&1<<_e||Mt==null)&&(Mt=Ft>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);let Ut=_[_e];return Mt<0&&(Mt+=Ut),Mt=Vp(0,Mt,Ut-1),Mt}function CT(o,i,s,_,_e,ct){let Mt=i[_e],Ft=s[_e]||1;(o&1<<_e||ct&1<<_e||Mt==null)&&(Mt=Ft>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);let Ut=_[_e];return Mt<0&&(Mt+=Ut),Mt=Ft>0?Vp(0,Mt,Ut):Vp(-1,Mt,Ut-1),Mt}function RX(o,i,s){let _=s.length;for(let _e=0;_e<s.length;_e++)if(s[_e]>1){_=_e;break}for(let _e=_+1;_e<s.length;_e++)if(i[_e]>0||s[_e]!==o[_e])return!1;return!0}function DX(o,i){let s=o.length>0?o[o.length-1]:1;for(let _=0;_<o.length-1;_++)s+=o[_]*i[_];return s}function AX(o,i,s){let _,_e,ct=o.shape.length;return _=typeof i=="number"?[i,...new Array(ct-1).fill(0)]:i.length<ct?i.concat(new Array(ct-i.length).fill(0)):i.slice(),_.forEach(Mt=>{E(Mt!==-1,()=>"slice() does not support negative begin indexing.")}),_e=s==null?new Array(ct).fill(-1):typeof s=="number"?[s,...new Array(ct-1).fill(-1)]:s.length<ct?s.concat(new Array(ct-s.length).fill(-1)):s,_e=_e.map((Mt,Ft)=>Mt>=0?Mt:(E(Mt===-1,()=>`Negative size values should be exactly -1 but got ${Mt} for the slice() size at index ${Ft}.`),o.shape[Ft]-_[Ft])),[_,_e]}function FX(o,i,s,_,_e,ct,Mt,Ft,Ut){let Xt;if(_==null?(Xt=new Array(i.length),Xt.fill(1)):Xt=_,Mt!=null&&Mt&Mt-1)throw new Error("Multiple ellipses in slice is not allowed.");let Kt=!1,nr={dims:Xt.length,numAddAxisAfterEllipsis:0,begin:i.slice(),end:s.slice(),strides:Xt.slice(),beginMask:_e,endMask:ct,ellipsisMask:Mt,newAxisMask:Ft,shrinkAxisMask:Ut};for(let Br=0;Br<nr.dims;Br++)Kt&&1<<Br&Ft&&nr.numAddAxisAfterEllipsis++,1<<Br&Mt&&(Kt=!0);Kt||(nr.ellipsisMask|=1<<nr.dims,nr.dims++);let rr={dims:o.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};PX(nr,rr);let or=!0,hr=!0,fr=!0,yr=[],Lr=[];for(let Br=0;Br<o.length;++Br){if(rr.strides[Br]===0)throw Error(`strides[${Br}] must be non-zero`);let Vr=!!(rr.shrinkAxisMask&1<<Br),Wr=o[Br];if(Wr===-1){yr.push(Vr?1:-1);continue}let ro=[rr.beginMask&1<<Br,rr.endMask&1<<Br],no=[rr.strides[Br]>0?0:-1,rr.strides[Br]>0?Wr:Wr-1];if(Vr&&rr.strides[Br]<=0)throw Error("only stride 1 allowed on non-range indexing.");fr=fr&&rr.strides[Br]===1;let so=!!(rr.beginMask&1<<Br&&rr.endMask&1<<Br);if(rr.beginValid&&rr.endValid){if(Vr){let No=rr.begin[Br]<0?Wr+rr.begin[Br]:rr.begin[Br];if(rr.begin[Br]=No,rr.end[Br]=rr.begin[Br]+1,No<0||No>=Wr)throw Error(`slice index ${rr.begin[Br]} of dimension ${Br} out of bounds.`)}else rr.begin[Br]=mT(rr.begin[Br],0,rr.strides[Br],Wr,ro,no),rr.end[Br]=mT(rr.end[Br],1,rr.strides[Br],Wr,ro,no);let oo=rr.strides[Br]===1&&rr.begin[Br]===0&&rr.end[Br]===Wr;or=or&&oo,hr=hr&&(Br===0&&rr.strides[Br]===1||oo)}else or=or&&rr.strides[Br]===1&&so,hr=hr&&(Br===0&&rr.strides[Br]===1||so);let ko,To=!1;if(rr.beginValid&&rr.endValid?(ko=rr.end[Br]-rr.begin[Br],To=!0):Vr?(ko=1,To=!0):so&&Wr>=0&&(ko=rr.strides[Br]<0?-Wr:Wr,To=!0),To){let oo;oo=ko===0||ko<0!=rr.strides[Br]<0?0:Math.trunc(ko/rr.strides[Br])+(ko%rr.strides[Br]!=0?1:0),yr.push(oo)}else yr.push(-1)}for(let Br=0;Br<rr.finalShapeGatherIndices.length;++Br){let Vr=rr.finalShapeGatherIndices[Br];Vr>=0?Lr.push(yr[Vr]):Vr===pS&&Lr.push(1)}return{finalShapeSparse:Lr.filter((Br,Vr)=>rr.finalShapeGatherIndices[Vr]!==pS),finalShape:Lr,isIdentity:or,sliceDim0:hr,isSimpleSlice:fr,begin:rr.begin,end:rr.end,strides:rr.strides}}function PX(o,i){i.beginMask=0,i.endMask=0,i.shrinkAxisMask=0;let s=0;i.beginValid=o.begin!=null,i.endValid=o.end!=null,i.begin=new Array(i.dims),i.end=new Array(i.dims),i.strides=new Array(i.dims),i.finalShapeGatherIndices=[],i.finalShapeGatherIndicesSparse=[],i.inputShapeGatherIndicesSparse=new Array(i.dims);for(let _=0;_<o.dims;_++)if(1<<_&o.ellipsisMask){let _e=Math.min(i.dims-(o.dims-_)+1+o.numAddAxisAfterEllipsis,i.dims);for(;s<_e;s++)i.begin[s]=0,i.end[s]=0,i.strides[s]=1,i.beginMask|=1<<s,i.endMask|=1<<s,i.finalShapeGatherIndices.push(s),i.finalShapeGatherIndicesSparse.push(-1),i.inputShapeGatherIndicesSparse[s]=_}else if(1<<_&o.newAxisMask)i.finalShapeGatherIndices.push(pS),i.finalShapeGatherIndicesSparse.push(-1);else{if(s===i.begin.length)throw Error(`Index out of range using input dim ${s}; input has only ${i.dims} dims, ${i.begin.length}.`);o.begin!=null&&(i.begin[s]=o.begin[_]),o.end!=null&&(i.end[s]=o.end[_]),i.strides[s]=o.strides[_],o.beginMask&1<<_&&(i.beginMask|=1<<s),o.endMask&1<<_&&(i.endMask|=1<<s),o.shrinkAxisMask&1<<_?(i.finalShapeGatherIndices.push(NX),i.finalShapeGatherIndicesSparse.push(-1),i.shrinkAxisMask|=1<<s):(i.finalShapeGatherIndices.push(s),i.finalShapeGatherIndicesSparse.push(_)),i.inputShapeGatherIndicesSparse[s]=_,s++}}function mT(o,i,s,_,_e,ct){if(_e[i])return s>0?ct[i]:ct[i+1&1];{let Mt=o<0?_+o:o;return Mt<ct[0]?ct[0]:Mt>ct[1]?ct[1]:Mt}}var OX="4.17.0",Fl=class{static sgd(o){return new mi(o)}static momentum(o,i,s=!1){return new op(o,i,s)}static rmsprop(o,i=.9,s=0,_=null,_e=!1){return new np(o,i,s,_,_e)}static adam(o=.001,i=.9,s=.999,_=null){return new tp(o,i,s,_)}static adadelta(o=.001,i=.95,s=null){return new Ju(o,i,s)}static adamax(o=.002,i=.9,s=.999,_=null,_e=0){return new rp(o,i,s,_,_e)}static adagrad(o,i=.1){return new ep(o,i)}},OGe=Fl,MX=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:o=>o();function cS(){return new Promise(o=>MX(()=>o()))}var w={},Fa;function LX(o,i){let s=o[0].length;o.forEach((_e,ct)=>{E(_e.length===s,()=>`Error in concat${s}D: rank of tensors[${ct}] must be the same as the rank of the rest (${s})`)}),E(i>=0&&i<s,()=>`Error in concat${s}D: axis must be between 0 and ${s-1}.`);let _=o[0];o.forEach((_e,ct)=>{for(let Mt=0;Mt<s;Mt++)E(Mt===i||_e[Mt]===_[Mt],()=>`Error in concat${s}D: Shape of tensors[${ct}] (${_e}) does not match the shape of the rest (${_}) along the non-concatenated axis ${ct}.`)})}function BX(o,i){let s=o[0].slice();for(let _=1;_<o.length;_++)s[i]+=o[_][i];return s}function zX(o,i,s){let _=new Array;if(s==null&&i==null)return _;if(i==null)for(;_.length<o+s.length;)_.push(-1);else _=i.slice();if(s==null)return _;if(o+s.length!==_.length)throw new Error(`rt input.shape and shape=${i} are incompatible: rt input.rank = ${o+s.length}, but shape.rank = ${_.length}`);for(let _e=1;_e<s.length;++_e){let ct=s[_e],Mt=_[_.length-s.length+_e],Ft=_[Mt];if(ct>=0)if(Ft>=0){if(Ft!==ct)throw new Error(`rt input.shape and shape=${i} are incompatible: rt input.shape[${_e+o}] = ${ct} but shape[${_e+o}] = ${Ft}`)}else _[Mt]=ct}return _}function VX(o){let i={FIRST_DIM_SIZE:Fa.FIRST_DIM_SIZE,VALUE_ROWIDS:Fa.VALUE_ROWIDS,ROW_LENGTHS:Fa.ROW_LENGTHS,ROW_SPLITS:Fa.ROW_SPLITS,ROW_LIMITS:Fa.ROW_LIMITS,ROW_STARTS:Fa.ROW_STARTS},s=[];for(let _ of o){if(!(_ in i))break;s.push(i[_])}return s}function WX(o){return o.length===0?0:o[0]===Fa.FIRST_DIM_SIZE?o.length-1:o.length}function UX(o,i){if(o==null||i==null)return;let s=o.length,_=i.length;if(s>=_)throw new Error(`defaultValue.shape=${o} and ragged tensor flatValues.shape=${i}, are incompatible: defaultValue.rank = ${s} must be less than ragged tensor input flatValues.rank = ${_})`);for(let _e=0;_e<Math.min(s,_-1);++_e){let ct=o[_e],Mt=i[_e+1];if(ct>=0&&Mt>=0&&ct!==1&&ct!==Mt)throw new Error(`defaultValue.shape=${o}, and ragged tensor input flatValues.shape=${i} are incompatible: defaultValue.shape[${_e-o.length}] = ${ct} but ragged tensor input.flatValues.shape[${_e-o.length}] = ${Mt}`)}}qe(w,{ERF_A1:()=>e5,ERF_A2:()=>t5,ERF_A3:()=>r52,ERF_A4:()=>o5,ERF_A5:()=>n5,ERF_P:()=>JX,PARALLELIZE_THRESHOLD:()=>uf,RowPartitionType:()=>Fa,SELU_SCALE:()=>ZX,SELU_SCALEALPHA:()=>QX,applyActivation:()=>Qu,assertAndGetBroadcastShape:()=>rt,assertAxesAreInnerMostDims:()=>pK,assertParamsConsistent:()=>LX,assignToTypedArray:()=>c5,axesAreInnerMostDims:()=>zw,calculateShapes:()=>q1,checkEinsumDimSizes:()=>g5,checkPadOnDimRoundingMode:()=>Lt$2,combineLocations:()=>I2,combineRaggedTensorToTensorShapes:()=>zX,complexWithEvenIndex:()=>i5,complexWithOddIndex:()=>u5,computeConv2DInfo:()=>zu,computeConv3DInfo:()=>Uk,computeDefaultPad:()=>Bw,computeDilation2DInfo:()=>iH,computeOptimalWindowSize:()=>GX,computeOutAndReduceShapes:()=>uK,computeOutShape:()=>BX,computePool2DInfo:()=>Lw,computePool3DInfo:()=>uH,convertConv2DDataFormat:()=>Gk,decodeEinsumEquation:()=>f5,eitherStridesOrDilationsAreOne:()=>gr,expandShapeToKeepDim:()=>ii,exponent:()=>m5,exponents:()=>l5,fromStringArrayToUint8:()=>M5,fromUint8ToStringArray:()=>O5,getAxesPermutation:()=>cK,getBroadcastDims:()=>y2,getComplexWithIndex:()=>p5,getEinsumComputePath:()=>x5,getEinsumPermutation:()=>h5,getFusedBiasGradient:()=>Yu,getFusedDyActivation:()=>Xu,getImageCenter:()=>HX,getInnerMostAxes:()=>mK,getPermuted:()=>qX,getRaggedRank:()=>WX,getReductionAxes:()=>xd,getReshaped:()=>KX,getReshapedPermuted:()=>jX,getRowPartitionTypesHelper:()=>VX,getSliceBeginCoords:()=>XX,getSliceSize:()=>YX,getSparseFillEmptyRowsIndicesDenseShapeMismatch:()=>w5,getSparseFillEmptyRowsNegativeIndexErrorMessage:()=>S5,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:()=>I5,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:()=>N5,getSparseReshapeInputOutputMismatchErrorMessage:()=>_5,getSparseReshapeInputOutputMultipleErrorMessage:()=>T5,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:()=>v5,getSparseReshapeNegativeOutputDimErrorMessage:()=>k5,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:()=>D5,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:()=>E5,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:()=>$5,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:()=>R5,getUndoAxesPermutation:()=>lK,isIdentityPermutation:()=>y5,log:()=>t4,mergeRealAndImagArrays:()=>s5,prepareAndValidate:()=>lT,prepareSplitSize:()=>C5,segment_util:()=>mS,shouldFuse:()=>Zu,slice_util:()=>pt,splitRealAndImagArrays:()=>a5,stridesOrDilationsArePositive:()=>Ta,tupleValuesAreOne:()=>Bu,upcastType:()=>dt,validateDefaultValueShape:()=>UX,validateInput:()=>lc,validateUpdateShape:()=>Qw,warn:()=>Ia}),function(o){o[o.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",o[o.VALUE_ROWIDS=1]="VALUE_ROWIDS",o[o.ROW_LENGTHS=2]="ROW_LENGTHS",o[o.ROW_SPLITS=3]="ROW_SPLITS",o[o.ROW_LIMITS=4]="ROW_LIMITS",o[o.ROW_STARTS=5]="ROW_STARTS"}(Fa||(Fa={}));var uf=30;function GX(o){return o<=uf?o:Up(o,Math.floor(Math.sqrt(o)))}function HX(o,i,s){return[s*(typeof o=="number"?o:o[0]),i*(typeof o=="number"?o:o[1])]}function KX(o,i,s,_=!0){let _e=[];if(_)_e=_e.concat(i.slice(0)),_e.push(o[0]/s),_e=_e.concat(o.slice(1));else{_e=_e.concat(o[0]);let ct=i.length;for(let Mt=0;Mt<ct;++Mt)_e=_e.concat([o[Mt+1]/i[Mt],i[Mt]]);_e=_e.concat(o.slice(ct+1))}return _e}function qX(o,i,s=!0){let _=[];if(s){_.push(i);for(let _e=i+1;_e<o;++_e)_e<=2*i?(_.push(_e),_.push(_e-(i+1))):_.push(_e)}else{let _e=[],ct=[];for(let Mt=1;Mt<o;++Mt)Mt>=2*i+1||Mt%2==1?ct.push(Mt):_e.push(Mt);_.push(..._e),_.push(0),_.push(...ct)}return _}function jX(o,i,s,_=!0){let _e=[];_?_e.push(o[0]/s):_e.push(o[0]*s);for(let ct=1;ct<o.length;++ct)ct<=i.length?_?_e.push(i[ct-1]*o[ct]):_e.push(o[ct]/i[ct-1]):_e.push(o[ct]);return _e}function XX(o,i){let s=[0];for(let _=0;_<i;++_)s.push(o[_][0]);return s}function YX(o,i,s){let _=o.slice(0,1);for(let _e=0;_e<s;++_e)_.push(o[_e+1]-i[_e][0]-i[_e][1]);return _}var QX=1.7580993408473768,ZX=1.0507009873554805,JX=.3275911,e5=.254829592,t5=-.284496736,r52=1.421413741,o5=-1.453152027,n5=1.061405429;function s5(o,i){if(o.length!==i.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${o.length}, imag: ${i.length}.`);let s=new Float32Array(2*o.length);for(let _=0;_<s.length;_+=2)s[_]=o[_/2],s[_+1]=i[_/2];return s}function a5(o){let i=new Float32Array(o.length/2),s=new Float32Array(o.length/2);for(let _=0;_<o.length;_+=2)i[_/2]=o[_],s[_/2]=o[_+1];return{real:i,imag:s}}function i5(o){let i=Math.ceil(o.length/4),s=new Float32Array(i),_=new Float32Array(i);for(let _e=0;_e<o.length;_e+=4)s[Math.floor(_e/4)]=o[_e],_[Math.floor(_e/4)]=o[_e+1];return{real:s,imag:_}}function u5(o){let i=Math.floor(o.length/4),s=new Float32Array(i),_=new Float32Array(i);for(let _e=2;_e<o.length;_e+=4)s[Math.floor(_e/4)]=o[_e],_[Math.floor(_e/4)]=o[_e+1];return{real:s,imag:_}}function p5(o,i){return{real:o[2*i],imag:o[2*i+1]}}function c5(o,i,s,_){o[2*_]=i,o[2*_+1]=s}function l5(o,i){let s=new Float32Array(o/2),_=new Float32Array(o/2);for(let _e=0;_e<Math.ceil(o/2);_e++){let ct=(i?2:-2)*Math.PI*(_e/o);s[_e]=Math.cos(ct),_[_e]=Math.sin(ct)}return{real:s,imag:_}}function m5(o,i,s){let _=(s?2:-2)*Math.PI*(o/i);return{real:Math.cos(_),imag:Math.sin(_)}}var lS="->",d5=/->/g,wT=",",ST="...";function f5(o,i){let s=((o=o.replace(/\s/g,"")).length-o.replace(d5,"").length)/lS.length;if(s<1)throw new Error("Equations without an arrow are not supported.");if(s>1)throw new Error(`Equation must contain exactly one arrow ("${lS}").`);let[_,_e]=o.split(lS);E(_.indexOf(ST)===-1,()=>`The ellipsis notation ("${ST}") is not supported yet.`);let ct=_.split(wT),Mt=ct.length;if(i!==Mt)throw new Error(`Expected ${Mt} input tensors, received ${i}`);if(Mt>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");let Ft=[];for(let nr=0;nr<_e.length;++nr){let rr=_e[nr];if(!ct.some(or=>or.indexOf(rr)!==-1))throw new Error(`Output subscripts contain the label ${rr} not present in the input subscripts.`);Ft.indexOf(rr)===-1&&Ft.push(rr)}for(let nr=0;nr<_.length;++nr){let rr=_[nr];Ft.indexOf(rr)===-1&&rr!==wT&&Ft.push(rr)}let Ut=new Array(ct.length);for(let nr=0;nr<Mt;++nr){if(new Set(ct[nr].split("")).size!==ct[nr].length)throw new Error(`Found duplicate axes in input component ${ct[nr]}. Support for duplicate axes in input is not implemented yet.`);Ut[nr]=[];for(let rr=0;rr<ct[nr].length;++rr)Ut[nr].push(Ft.indexOf(ct[nr][rr]))}let Xt=Ft.length,Kt=[];for(let nr=_e.length;nr<Xt;++nr)Kt.push(nr);return{allDims:Ft,summedDims:Kt,idDims:Ut}}function h5(o,i){let s=new Array(o);s.fill(-1);for(let _e=0;_e<i.length;++_e)s[i[_e]]=_e;let _=[];for(let _e=0;_e<o;++_e)s[_e]===-1&&_.push(_e);return s=s.filter(_e=>_e!==-1),{permutationIndices:s,expandDims:_}}function g5(o,i,s){let _=new Array(o);for(let _e=0;_e<s.length;++_e){let ct=s[_e].shape;for(let Mt=0;Mt<i[_e].length;++Mt)_[i[_e][Mt]]===void 0?_[i[_e][Mt]]=ct[Mt]:E(_[i[_e][Mt]]===ct[Mt],()=>`Expected dimension ${_[i[_e][Mt]]} at axis ${Mt} of input shaped ${JSON.stringify(ct)}, but got dimension ${ct[Mt]}`)}}function x5(o,i){let s=o,_=[],_e=0;o.length===0&&s.push(-1),_e=o.length+1;for(let Mt=0;Mt<_e;++Mt)_.push([]);let ct=[];for(let Mt=0;Mt<s.length;++Mt){let Ft=b5(i,s[Mt]);for(let Ut of Ft)ct.indexOf(Ut)===-1&&(_[Mt].push(Ut),ct.push(Ut))}return{path:s,steps:_}}function y5(o){return o.every((i,s)=>i===s)}function b5(o,i){let s=[];for(let _=0;_<o.length;++_)(o[_].length===0||o[_].indexOf(i)!==-1||i===-1)&&s.push(_);return s}function C5(o,i,s=0){let _=[];if(typeof i=="number")E(o.shape[s]%i==0,()=>"Number of splits must evenly divide the axis."),_=new Array(i).fill(o.shape[s]/i);else{let _e=i.reduce((Mt,Ft)=>(Ft===-1&&(Mt+=1),Mt),0);E(_e<=1,()=>"There should be only one negative value in split array.");let ct=i.indexOf(-1);if(ct!==-1){let Mt=i.reduce((Ft,Ut)=>Ut>0?Ft+Ut:Ft);i[ct]=o.shape[s]-Mt}E(o.shape[s]===i.reduce((Mt,Ft)=>Mt+Ft),()=>"The sum of sizes must match the size of the axis dimension."),_=i}return _}function w5(o){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${o}`}function S5(o,i){return`indices(${o}, 0) is invalid: ${i} < 0`}function I5(o,i,s){return`indices(${o}, 0) is invalid: ${i} >= ${s}`}function v5(o,i){return`only one output dimension may be -1, not both ${o} and ${i}`}function k5(o,i){return`size ${o} must be non-negative, not ${i}`}function N5(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function T5(o,i){return`Input to reshape is a SparseTensor with ${ze(o)}
  dense values, but the requested shape requires a multiple of ${ze(i)}. inputShape=${o} outputShape= ${i}`}function _5(o,i){return`Input to reshape is a tensor with ${ze(o)} dense values, but the requested shape has ${ze(i)}. inputShape=${o} outputShape=${i}`}function E5(){return"segment ids must be >= 0"}function $5(){return"segment ids are not increasing"}function R5(o,i){return`Segment id ${o} out of range [0, ${i}), possibly because segmentIds input is not sorted.`}function D5(o,i,s){return`Bad: indices[${o}] == ${i} out of range [0, ${s})`}var mS={};function A5(o,i){let s,_=!1;for(o<=uf?(s=o,_=!0):s=Up(o,Math.floor(Math.sqrt(o)));!_;)s>i||s===o?_=!0:s=Up(o,s+1);return s}function F5(o,i,s){let _=[],_e=o.length;for(let ct=0;ct<_e;ct++)ct!==i?_.push(o[ct]):_.push(s);return _}function P5(o,i,s,_){let _e=i.shape.length,ct=o.shape.length;if(_!==0&&(_<-_e||_>_e))throw new Error(`Expect batchDims in the range of [-${_e}, ${_e}], but got ${_}`);if(_<0&&(_+=_e),_>ct)throw new Error(`batchDims (${_}) must be less than rank(x) (
    ${ct}).`);if(s<_)throw new Error(`batchDims (${_}) must be less than or equal to axis (${s}).`);for(let nr=0;nr<_;++nr)if(o.shape[nr]!==i.shape[nr])throw new Error(`x.shape[${nr}]: ${o.shape[nr]} should be equal to indices.shape[${nr}]: ${i.shape[nr]}.`);let Mt=o.shape[s],Ft=[],Ut=1,Xt=1,Kt=1;for(let nr=0;nr<_;++nr)Ft.push(o.shape[nr]),Ut*=o.shape[nr];for(let nr=_;nr<s;nr++)Ft.push(o.shape[nr]),Xt*=o.shape[nr];for(let nr=_;nr<_e;nr++)Ft.push(i.shape[nr]);for(let nr=s+1;nr<ct;nr++)Ft.push(o.shape[nr]),Kt*=o.shape[nr];return{batchSize:Ut,sliceSize:Kt,outerSize:Xt,dimSize:Mt,outputShape:Ft}}function O5(o){try{return o.map(i=>Jp(i))}catch(i){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${i}`)}}function M5(o){return o.map(i=>Ji(i))}qe(mS,{collectGatherOpShapeInfo:()=>P5,computeOutShape:()=>F5,segOpComputeOptimalWindowSize:()=>A5});var Vt={};qe(Vt,{nonMaxSuppressionV3Impl:()=>Jd,nonMaxSuppressionV4Impl:()=>ef,nonMaxSuppressionV5Impl:()=>tf,whereImpl:()=>Xd}),XN();var L5=A(),Dr,IT;L5.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,o=>{o&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")}),function(o){o[o.DT_INVALID=0]="DT_INVALID",o[o.DT_FLOAT=1]="DT_FLOAT",o[o.DT_DOUBLE=2]="DT_DOUBLE",o[o.DT_INT32=3]="DT_INT32",o[o.DT_UINT8=4]="DT_UINT8",o[o.DT_INT16=5]="DT_INT16",o[o.DT_INT8=6]="DT_INT8",o[o.DT_STRING=7]="DT_STRING",o[o.DT_COMPLEX64=8]="DT_COMPLEX64",o[o.DT_INT64=9]="DT_INT64",o[o.DT_BOOL=10]="DT_BOOL",o[o.DT_QINT8=11]="DT_QINT8",o[o.DT_QUINT8=12]="DT_QUINT8",o[o.DT_QINT32=13]="DT_QINT32",o[o.DT_BFLOAT16=14]="DT_BFLOAT16",o[o.DT_QINT16=15]="DT_QINT16",o[o.DT_QUINT16=16]="DT_QUINT16",o[o.DT_UINT16=17]="DT_UINT16",o[o.DT_COMPLEX128=18]="DT_COMPLEX128",o[o.DT_HALF=19]="DT_HALF",o[o.DT_RESOURCE=20]="DT_RESOURCE",o[o.DT_VARIANT=21]="DT_VARIANT",o[o.DT_UINT32=22]="DT_UINT32",o[o.DT_UINT64=23]="DT_UINT64",o[o.DT_FLOAT_REF=101]="DT_FLOAT_REF",o[o.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",o[o.DT_INT32_REF=103]="DT_INT32_REF",o[o.DT_UINT8_REF=104]="DT_UINT8_REF",o[o.DT_INT16_REF=105]="DT_INT16_REF",o[o.DT_INT8_REF=106]="DT_INT8_REF",o[o.DT_STRING_REF=107]="DT_STRING_REF",o[o.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",o[o.DT_INT64_REF=109]="DT_INT64_REF",o[o.DT_BOOL_REF=110]="DT_BOOL_REF",o[o.DT_QINT8_REF=111]="DT_QINT8_REF",o[o.DT_QUINT8_REF=112]="DT_QUINT8_REF",o[o.DT_QINT32_REF=113]="DT_QINT32_REF",o[o.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",o[o.DT_QINT16_REF=115]="DT_QINT16_REF",o[o.DT_QUINT16_REF=116]="DT_QUINT16_REF",o[o.DT_UINT16_REF=117]="DT_UINT16_REF",o[o.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",o[o.DT_HALF_REF=119]="DT_HALF_REF",o[o.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",o[o.DT_VARIANT_REF=121]="DT_VARIANT_REF",o[o.DT_UINT32_REF=122]="DT_UINT32_REF",o[o.DT_UINT64_REF=123]="DT_UINT64_REF"}(Dr||(Dr={})),function(o){var i;(i=o.CheckpointFormatVersion||(o.CheckpointFormatVersion={}))[i.LEGACY=0]="LEGACY",i[i.V1=1]="V1",i[i.V2=2]="V2"}(IT||(IT={}));var fS={};function z5(o,i){let s={tfOpName:o,category:"custom",inputs:[],attrs:[],customExecutor:i};fS[o]=s}function pf(o){return fS[o]}function V5(o){delete fS[o]}function I(o,i,s,_,_e){let ct=i.inputParams[o];if(ct&&ct.inputIndexStart!==void 0){let Ft=ct.inputIndexStart,Ut=ct.inputIndexEnd===0?void 0:ct.inputIndexEnd===void 0?Ft+1:ct.inputIndexEnd,Xt=Ft<0?i.inputNames.length+Ft:Ft;if(ct.type==="tensor")return Bt$2(i.inputNames[Xt],s,_,_e);if(ct.type==="tensors"){let rr=i.inputs.slice(Ft,Ut);return i.inputNames.slice(Ft,Ut).filter((or,hr)=>{var fr;return((fr=rr[hr])===null||fr===void 0?void 0:fr.op)!=="NoOp"}).map(or=>Bt$2(or,s,_,_e))}let Kt=Bt$2(i.inputNames[Xt],s,_,_e),nr=Kt.dataSync();return ct.type==="number"?nr[0]:y.toNestedArray(Kt.shape,nr)}let Mt=i.attrParams[o];return Mt&&Mt.value}function Bt$2(o,i,s,_){let[_e,ct]=Nr(o,s);if(_!=null){let Ft=_.getHashTableHandleByName(_e);if(Ft!=null)return Ft}let Mt=s.currentContextIds.find(Ft=>!!i[cf(_e,Ft)]);return Mt!==void 0?i[cf(_e,Mt)][ct]:void 0}function hS(o,i,s){return i[cf(o,s.currentContextId)]}function Ls(o,i){let[s,_,_e]=Nr(o,i);return[cf(s,i&&i.currentContextId),_,_e]}function cf(o,i){return i?`${o}-${i}`:o}function Nr(o,i){if(o==="")return["",0,void 0];let s=i!=null&&i.parseNodeNameCache!=null;if(s){let ct=i.parseNodeNameCache.get(o);if(ct!=null)return ct}let _,_e=o.split(":");if(_e.length===1)_=[o,0,void 0];else{let ct=_e[0],Mt=_e.length===3?_e[1]:void 0;_=[ct,Number(_e[_e.length-1]),Mt]}return s&&i.parseNodeNameCache.set(o,_),_}function Pl(o,i,s){let _=I("pad",o,i,s);if(_==="explicit"){_=I("explicitPaddings",o,i,s);let _e=[[0,0],[0,0],[0,0],[0,0]];for(let ct=0;ct<4;ct++)_e[ct][0]=_[2*ct],_e[ct][1]=_[2*ct+1];return _e}return _}function Bs(o){return o.kept?o:Ur(o)}var gS={};qe(gS,{json:()=>W5});var W5=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],xS={};qe(xS,{json:()=>U5});var U5=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],yS={};qe(yS,{json:()=>G5});var G5=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],bS={};qe(bS,{json:()=>H5});var H5=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],CS={};qe(CS,{json:()=>K5});var K5=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],wS={};qe(wS,{json:()=>q5});var q5=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],SS={};qe(SS,{json:()=>j5});var j5=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],IS={};qe(IS,{json:()=>X5});var X5=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],vS={};qe(vS,{json:()=>Y5});var Y5=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],kS={};qe(kS,{json:()=>Q5});var Q5=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],NS={};qe(NS,{json:()=>Z5});var Z5=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}],TS={};qe(TS,{json:()=>J5});var J5=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}],_S={};qe(_S,{json:()=>e8});var e8=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}],ES={};qe(ES,{json:()=>t8});var t8=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],$S={};qe($S,{json:()=>r8});var r8=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],RS={};qe(RS,{json:()=>o8});var o8=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],DS={};qe(DS,{json:()=>n8});var n8=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],AS={};qe(AS,{json:()=>s8});var s8=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],FS={};qe(FS,{json:()=>a8});var a8=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],Ol=class{static get Instance(){return this._instance||(this._instance=new this)}constructor(){let o=[].concat(...[gS,xS,yS,bS,CS,wS,SS,IS,vS,kS,NS,TS,_S,ES,$S,RS,DS,AS,FS].map(i=>i.json));this.opMappers=o.reduce((i,s)=>(i[s.tfOpName]=s,i),{})}transformGraph(o,i={}){let s=o.node,_=[],_e=[],ct=[],Mt=s.reduce((hr,fr)=>(hr[fr.name]=this.mapNode(fr),fr.op.startsWith("Placeholder")?_.push(hr[fr.name]):fr.op==="Const"?_e.push(hr[fr.name]):(fr.input==null||fr.input.length===0)&&ct.push(hr[fr.name]),hr),{}),Ft=[],Ut=[],Xt={},Kt={};i!=null&&(Xt=this.mapSignatureEntries(i.inputs),Kt=this.mapSignatureEntries(i.outputs));let nr=Object.keys(Mt);nr.forEach(hr=>{let fr=Mt[hr];fr.inputNames.forEach((yr,Lr)=>{let[Br,,Vr]=Ls(yr),Wr=Mt[Br];if(Wr.outputs!=null){let ro=Wr.outputs.indexOf(Vr);if(ro!==-1){let no=`${Br}:${ro}`;fr.inputNames[Lr]=no}}fr.inputs.push(Wr),Wr.children.push(fr)})}),Object.keys(Kt).length===0?nr.forEach(hr=>{let fr=Mt[hr];fr.children.length===0&&Ut.push(fr)}):Object.keys(Kt).forEach(hr=>{let[fr]=Ls(hr),yr=Mt[fr];yr!=null&&(yr.signatureKey=Kt[hr],Ut.push(yr))}),Object.keys(Xt).length>0?Object.keys(Xt).forEach(hr=>{let[fr]=Ls(hr),yr=Mt[fr];yr&&(yr.signatureKey=Xt[hr],Ft.push(yr))}):Ft=_;let rr={};o.library!=null&&o.library.function!=null&&(rr=o.library.function.reduce((hr,fr)=>(hr[fr.signature.name]=this.mapFunction(fr),hr),{}));let or={nodes:Mt,inputs:Ft,outputs:Ut,weights:_e,placeholders:_,signature:i,functions:rr};return ct.length>0&&(or.initNodes=ct),or}mapSignatureEntries(o){return Object.keys(o||{}).reduce((i,s)=>(i[o[s].name]=s,i),{})}mapNode(o){let i=pf(o.op)||this.opMappers[o.op]||{};o.attr==null&&(o.attr={});let s={name:o.name,op:o.op,category:i.category,inputNames:(o.input||[]).map(_=>_.startsWith("^")?_.slice(1):_),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:o.attr,outputs:i.outputs};return i.inputs!=null&&(s.inputParams=i.inputs.reduce((_,_e)=>(_[_e.name]={type:_e.type,inputIndexStart:_e.start,inputIndexEnd:_e.end},_),{})),i.attrs!=null&&(s.attrParams=i.attrs.reduce((_,_e)=>{let ct,Mt=_e.type;switch(_e.type){case"string":ct=lf(o.attr,_e.tfName,_e.defaultValue),ct===void 0&&_e.tfDeprecatedName&&(ct=lf(o.attr,_e.tfDeprecatedName,_e.defaultValue));break;case"string[]":ct=yf(o.attr,_e.tfName,_e.defaultValue),ct===void 0&&_e.tfDeprecatedName&&(ct=yf(o.attr,_e.tfDeprecatedName,_e.defaultValue));break;case"number":ct=df(o.attr,_e.tfName,_e.defaultValue||0),ct===void 0&&_e.tfDeprecatedName&&(ct=df(o.attr,_e.tfDeprecatedName,_e.defaultValue));break;case"number[]":ct=xf(o.attr,_e.tfName,_e.defaultValue),ct===void 0&&_e.tfDeprecatedName&&(ct=xf(o.attr,_e.tfDeprecatedName,_e.defaultValue));break;case"bool":ct=mf(o.attr,_e.tfName,_e.defaultValue),ct===void 0&&_e.tfDeprecatedName&&(ct=mf(o.attr,_e.tfDeprecatedName,_e.defaultValue));break;case"bool[]":ct=Cf(o.attr,_e.tfName,_e.defaultValue),ct===void 0&&_e.tfDeprecatedName&&(ct=Cf(o.attr,_e.tfDeprecatedName,_e.defaultValue));break;case"shape":ct=gf(o.attr,_e.tfName,_e.defaultValue),ct===void 0&&_e.tfDeprecatedName&&(ct=gf(o.attr,_e.tfDeprecatedName,_e.defaultValue));break;case"shape[]":ct=bf(o.attr,_e.tfName,_e.defaultValue),ct===void 0&&_e.tfDeprecatedName&&(ct=bf(o.attr,_e.tfDeprecatedName,_e.defaultValue));break;case"dtype":ct=ff(o.attr,_e.tfName,_e.defaultValue),ct===void 0&&_e.tfDeprecatedName&&(ct=ff(o.attr,_e.tfDeprecatedName,_e.defaultValue));break;case"dtype[]":ct=hf(o.attr,_e.tfName,_e.defaultValue),ct===void 0&&_e.tfDeprecatedName&&(ct=hf(o.attr,_e.tfDeprecatedName,_e.defaultValue));break;case"func":ct=vT(o.attr,_e.tfName,_e.defaultValue),ct===void 0&&_e.tfDeprecatedName&&(ct=vT(o.attr,_e.tfDeprecatedName,_e.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${_e.type} for op: ${o.op}`)}return _[_e.name]={value:ct,type:Mt},_},{})),s}mapFunction(o){let i=o.nodeDef,s=[],_={};i!=null&&(_=i.reduce((Ut,Xt)=>(Ut[Xt.name]=this.mapNode(Xt),Xt.op==="Const"&&s.push(Ut[Xt.name]),Ut),{}));let _e=[],ct=[];o.signature.inputArg.forEach(Ut=>{let[Xt]=Ls(Ut.name),Kt={name:Xt,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:PS(Ut.type),type:"dtype"}},children:[]};Kt.signatureKey=Ut.name,_e.push(Kt),_[Xt]=Kt}),Object.keys(_).forEach(Ut=>{let Xt=_[Ut];Xt.inputNames.forEach((Kt,nr)=>{let[rr,,or]=Ls(Kt),hr=_[rr];if(hr.outputs!=null){let fr=hr.outputs.indexOf(or);if(fr!==-1){let yr=`${rr}:${fr}`;Xt.inputNames[nr]=yr}}Xt.inputs.push(hr),hr.children.push(Xt)})});let Mt=o.ret;o.signature.outputArg.forEach(Ut=>{let[Xt,Kt]=Ls(Mt[Ut.name]),nr=_[Xt];nr!=null&&(nr.defaultOutput=Kt,ct.push(nr))});let Ft=this.mapArgsToSignature(o);return{nodes:_,inputs:_e,outputs:ct,weights:s,placeholders:[],signature:Ft}}mapArgsToSignature(o){return{methodName:o.signature.name,inputs:o.signature.inputArg.reduce((i,s)=>(i[s.name]=this.mapArgToTensorInfo(s),i),{}),outputs:o.signature.outputArg.reduce((i,s)=>(i[s.name]=this.mapArgToTensorInfo(s,o.ret),i),{})}}mapArgToTensorInfo(o,i){let s=o.name;return i!=null&&(s=i[s]),{name:s,dtype:o.type}}};function i8(o){let i=A().global;if(i.atob!==void 0)return i.atob(o);if(typeof Buffer<"u")return new Buffer(o,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function kT(o,i){let s=Array.isArray(o)?String.fromCharCode.apply(null,o):i8(o);return i?s:s.toLowerCase()}function lf(o,i,s,_=!1){let _e=o[i];return _e!=null?kT(_e.s,_):s}function mf(o,i,s){let _=o[i];return _?_.b:s}function df(o,i,s){let _=o[i]||{},_e=_.i!=null?_.i:_.f!=null?_.f:s;return typeof _e=="number"?_e:parseInt(_e,10)}function PS(o){switch(typeof o=="string"&&(o=Dr[o]),o){case Dr.DT_FLOAT:case Dr.DT_HALF:return"float32";case Dr.DT_INT32:case Dr.DT_INT64:case Dr.DT_INT8:case Dr.DT_UINT8:return"int32";case Dr.DT_BOOL:return"bool";case Dr.DT_DOUBLE:return"float32";case Dr.DT_STRING:return"string";case Dr.DT_COMPLEX64:case Dr.DT_COMPLEX128:return"complex64";default:return null}}function vT(o,i,s){let _=o[i];return _&&_.func?_.func.name:s}function ff(o,i,s){let _=o[i];return _&&_.type?PS(_.type):s}function hf(o,i,s){let _=o[i];return _&&_.list&&_.list.type?_.list.type.map(_e=>PS(_e)):s}function NT(o){if(!o.unknownRank)return o.dim!=null?o.dim.map(i=>typeof i.size=="number"?i.size:parseInt(i.size,10)):[]}function gf(o,i,s){let _=o[i];return _&&_.shape?NT(_.shape):s}function xf(o,i,s){let _=o[i];return _?((_.list.f&&_.list.f.length?_.list.f:_.list.i)||[]).map(_e=>typeof _e=="number"?_e:parseInt(_e,10)):s}function yf(o,i,s,_=!1){let _e=o[i];return _e&&_e.list&&_e.list.s?_e.list.s.map(ct=>kT(ct,_)):s}function bf(o,i,s){let _=o[i];return _&&_.list&&_.list.shape?_.list.shape.map(_e=>NT(_e)):s}function Cf(o,i,s){let _=o[i];return _&&_.list&&_.list.b?_.list.b:s}var wf=class{constructor(o,i,s){this.node=o,this.tensorMap=i,this.context=s,this.inputs=[],this.attrs={},this.inputs=o.inputNames.map(_=>this.getInput(_)),o.rawAttrs!=null&&(this.attrs=Object.keys(o.rawAttrs).reduce((_,_e)=>(_[_e]=this.getAttr(_e),_),{}))}getInput(o){return Bt$2(o,this.tensorMap,this.context)}getAttr(o,i){let s=this.node.rawAttrs[o];if(s.tensor!=null)return Bt$2(o,this.tensorMap,this.context);if(s.i!=null||s.f!=null)return df(this.node.rawAttrs,o,i);if(s.s!=null)return lf(this.node.rawAttrs,o,i);if(s.b!=null)return mf(this.node.rawAttrs,o,i);if(s.shape!=null)return gf(this.node.rawAttrs,o,i);if(s.type!=null)return ff(this.node.rawAttrs,o,i);if(s.list!=null){if(s.list.i!=null||s.list.f!=null)return xf(this.node.rawAttrs,o,i);if(s.list.s!=null)return yf(this.node.rawAttrs,o,i);if(s.list.shape!=null)return bf(this.node.rawAttrs,o,i);if(s.list.b!=null)return Cf(this.node.rawAttrs,o,i);if(s.list.type!=null)return hf(this.node.rawAttrs,o,i)}return i}},Je={};qe(Je,{OP_SCOPE_SUFFIX:()=>Nw,abs:()=>Qt,acos:()=>Rk,acosh:()=>Dk,add:()=>Ce$1,addN:()=>Ak,all:()=>Fk,any:()=>Pk,argMax:()=>Ok,argMin:()=>Mk,asin:()=>Lk,asinh:()=>Bk,atan:()=>zk,atan2:()=>Vk,atanh:()=>Wk,avgPool:()=>dd,avgPool3d:()=>Hk,basicLSTMCell:()=>Kk,batchNorm:()=>nu,batchNorm2d:()=>jk,batchNorm3d:()=>Xk,batchNorm4d:()=>Yk,batchToSpaceND:()=>fd,bincount:()=>hd,bitwiseAnd:()=>Qk,booleanMaskAsync:()=>L6,broadcastArgs:()=>Zk,broadcastTo:()=>su,buffer:()=>me$1,cast:()=>Ue,ceil:()=>Jk,clipByValue:()=>e2,clone:()=>Ur,complex:()=>Er,concat:()=>yt,concat1d:()=>t2,concat2d:()=>r22,concat3d:()=>o2,concat4d:()=>n2,conv1d:()=>s2,conv2d:()=>au,conv2dTranspose:()=>a2,conv3d:()=>i2,conv3dTranspose:()=>p2,cos:()=>c2,cosh:()=>l2,cosineWindow:()=>$l,cumprod:()=>m2,cumsum:()=>d2,denseBincount:()=>f2,depthToSpace:()=>h2,depthwiseConv2d:()=>sc,diag:()=>g2,dilation2d:()=>x2,div:()=>je,divNoNan:()=>b2,dot:()=>C2,dropout:()=>Y6,einsum:()=>iu,elu:()=>bd,enclosingPowerOfTwo:()=>Zw,ensureShape:()=>w2,equal:()=>yd,erf:()=>S2,euclideanNorm:()=>k2,exp:()=>_o,expandDims:()=>Ms,expm1:()=>N2,eye:()=>Cd,fft:()=>uc,fill:()=>$a,floor:()=>wd,floorDiv:()=>md,fused:()=>Jw,gather:()=>Sd,gatherND:()=>j6,greater:()=>Wu,greaterEqual:()=>Id,ifft:()=>ju,imag:()=>pu,image:()=>eX,inTopKAsync:()=>Z6,irfft:()=>Hd,isFinite:()=>T2,isInf:()=>_2,isNaN:()=>E2,leakyRelu:()=>vd,less:()=>Tl,lessEqual:()=>ac,linalg:()=>tX,linspace:()=>$2,localResponseNormalization:()=>R2,log:()=>pi,log1p:()=>kd,logSigmoid:()=>D2,logSoftmax:()=>A2,logSumExp:()=>_d,logicalAnd:()=>Uu,logicalNot:()=>Ed,logicalOr:()=>$d,logicalXor:()=>F2,losses:()=>rX,lowerBound:()=>P2,matMul:()=>Ze,max:()=>Ra,maxPool:()=>Dd,maxPool3d:()=>O2,maxPoolWithArgmax:()=>M2,maximum:()=>Ad,mean:()=>Gu,meshgrid:()=>L2,min:()=>Nl,minimum:()=>Hu,mirrorPad:()=>B2,mod:()=>z2,moments:()=>V2,movingAverage:()=>V6,mul:()=>se,multiRNNCell:()=>W2,multinomial:()=>U2,neg:()=>pr,norm:()=>Vu,notEqual:()=>Fd,oneHot:()=>El,ones:()=>Da,onesLike:()=>G2,op:()=>N$1,outerProduct:()=>H2,pad:()=>Aa,pad1d:()=>K2,pad2d:()=>q2,pad3d:()=>j2,pad4d:()=>X2,pool:()=>Y2,pow:()=>ui,prelu:()=>Od,print:()=>ld,prod:()=>Q2,raggedGather:()=>Z2,raggedRange:()=>J2,raggedTensorToTensor:()=>e1,rand:()=>t1,randomGamma:()=>S1,randomNormal:()=>Wd,randomStandardNormal:()=>I1,randomUniform:()=>ic,randomUniformInt:()=>v1,range:()=>cu,real:()=>ci,reciprocal:()=>k1,relu:()=>lu,relu6:()=>Ud,reshape:()=>W$1,reverse:()=>mo,reverse1d:()=>N1,reverse2d:()=>T1,reverse3d:()=>_1,reverse4d:()=>E1,rfft:()=>pc,round:()=>Gd,rsqrt:()=>$1,scalar:()=>ke,scatterND:()=>U6,searchSorted:()=>_l,selu:()=>R1,separableConv2d:()=>D1,setdiff1dAsync:()=>A1,sigmoid:()=>Ea,sign:()=>F1,signal:()=>Jj,sin:()=>P1,sinh:()=>O1,slice:()=>Xe,slice1d:()=>M1,slice2d:()=>L1,slice3d:()=>B1,slice4d:()=>z1,softmax:()=>V1,softplus:()=>Td,spaceToBatchND:()=>Pd,sparse:()=>oX,sparseToDense:()=>K6,spectral:()=>Zj,split:()=>li,sqrt:()=>Rr,square:()=>Zt,squaredDifference:()=>Kd,squeeze:()=>cc,stack:()=>vr,step:()=>qd,stridedSlice:()=>W1,string:()=>nX,sub:()=>Te$1,sum:()=>ot,tan:()=>U1,tanh:()=>kl,tensor:()=>ar,tensor1d:()=>Jt,tensor2d:()=>mu,tensor3d:()=>jd,tensor4d:()=>G1,tensor5d:()=>H1,tensor6d:()=>K1,tensorScatterUpdate:()=>j1,tile:()=>uu,topk:()=>X1,transpose:()=>mc,truncatedNormal:()=>Y1,unique:()=>Q1,unsortedSegmentSum:()=>Z1,unstack:()=>fo,upperBound:()=>J1,variable:()=>eN,where:()=>lo,whereAsync:()=>Yd,zeros:()=>Gr,zerosLike:()=>Gt$1});var TT=(o,i,s,_=Je)=>{switch(o.op){case"BiasAdd":case"AddV2":case"Add":return[_.add(I("a",o,i,s),I("b",o,i,s))];case"AddN":return[_.addN(I("tensors",o,i,s))];case"FloorMod":case"Mod":return[_.mod(I("a",o,i,s),I("b",o,i,s))];case"Mul":return[_.mul(I("a",o,i,s),I("b",o,i,s))];case"RealDiv":case"Div":return[_.div(I("a",o,i,s),I("b",o,i,s))];case"DivNoNan":return[_.divNoNan(I("a",o,i,s),I("b",o,i,s))];case"FloorDiv":return[_.floorDiv(I("a",o,i,s),I("b",o,i,s))];case"Sub":return[_.sub(I("a",o,i,s),I("b",o,i,s))];case"Minimum":return[_.minimum(I("a",o,i,s),I("b",o,i,s))];case"Maximum":return[_.maximum(I("a",o,i,s),I("b",o,i,s))];case"Pow":return[_.pow(I("a",o,i,s),I("b",o,i,s))];case"SquaredDifference":return[_.squaredDifference(I("a",o,i,s),I("b",o,i,s))];default:throw TypeError(`Node type ${o.op} is not implemented`)}},_T=(o,i,s,_=Je)=>{switch(o.op){case"Abs":case"ComplexAbs":return[_.abs(I("x",o,i,s))];case"Acos":return[_.acos(I("x",o,i,s))];case"Acosh":return[_.acosh(I("x",o,i,s))];case"Asin":return[_.asin(I("x",o,i,s))];case"Asinh":return[_.asinh(I("x",o,i,s))];case"Atan":return[_.atan(I("x",o,i,s))];case"Atan2":return[_.atan2(I("x",o,i,s),I("y",o,i,s))];case"Atanh":return[_.atanh(I("x",o,i,s))];case"Ceil":return[_.ceil(I("x",o,i,s))];case"Complex":return[_.complex(I("real",o,i,s),I("imag",o,i,s))];case"Cos":return[_.cos(I("x",o,i,s))];case"Cosh":return[_.cosh(I("x",o,i,s))];case"Elu":return[_.elu(I("x",o,i,s))];case"Erf":return[_.erf(I("x",o,i,s))];case"Exp":return[_.exp(I("x",o,i,s))];case"Expm1":return[_.expm1(I("x",o,i,s))];case"Floor":return[_.floor(I("x",o,i,s))];case"Log":return[_.log(I("x",o,i,s))];case"Log1p":return[_.log1p(I("x",o,i,s))];case"Imag":return[_.imag(I("x",o,i,s))];case"Neg":return[_.neg(I("x",o,i,s))];case"Reciprocal":return[_.reciprocal(I("x",o,i,s))];case"Real":return[_.real(I("x",o,i,s))];case"Relu":return[_.relu(I("x",o,i,s))];case"Round":return[_.round(I("x",o,i,s))];case"Selu":return[_.selu(I("x",o,i,s))];case"Sigmoid":return[_.sigmoid(I("x",o,i,s))];case"Sin":return[_.sin(I("x",o,i,s))];case"Sign":return[_.sign(I("x",o,i,s))];case"Sinh":return[_.sinh(I("x",o,i,s))];case"Softplus":return[_.softplus(I("x",o,i,s))];case"Sqrt":return[_.sqrt(I("x",o,i,s))];case"Square":return[_.square(I("x",o,i,s))];case"Tanh":return[_.tanh(I("x",o,i,s))];case"Tan":return[_.tan(I("x",o,i,s))];case"ClipByValue":return[_.clipByValue(I("x",o,i,s),I("clipValueMin",o,i,s),I("clipValueMax",o,i,s))];case"Relu6":return[_.relu6(I("x",o,i,s))];case"Rsqrt":return[_.rsqrt(Bt$2(o.inputNames[0],i,s))];case"LeakyRelu":return[_.leakyRelu(I("x",o,i,s),I("alpha",o,i,s))];case"Prelu":return[_.prelu(I("x",o,i,s),I("alpha",o,i,s))];case"IsNan":return[_.isNaN(Bt$2(o.inputNames[0],i,s))];case"IsInf":return[_.isInf(Bt$2(o.inputNames[0],i,s))];case"IsFinite":return[_.isFinite(Bt$2(o.inputNames[0],i,s))];default:throw TypeError(`Node type ${o.op} is not implemented`)}};function Hr(o,i,s=""){if(typeof o!="number"&&typeof i!="number"){y.assert(o.length===i.length,()=>s+` Shapes ${o} and ${i} must match`);for(let _=0;_<o.length;_++){let _e=o[_],ct=i[_];y.assert(_e<0||ct<0||_e===ct,()=>s+` Shapes ${o} and ${i} must match`)}}}function ET(o){return!(typeof o=="number"||o.some(i=>i<0))}function fc(o,i,s){let _=Sf(o,s),_e=!ET(_);if(_e&&i.length===0)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${_}`);if(_e&&i.forEach(ct=>{_=Sf(ct.shape,_)}),!ET(_))throw new Error(`Non-fully-defined elementShape: ${_}`);return _}function Sf(o,i){if(typeof o=="number")return i;if(typeof i=="number")return o;if(o.length!==i.length)throw new Error(`Incompatible ranks during merge: ${o} vs. ${i}`);let s=[];for(let _=0;_<o.length;++_){let _e=o[_],ct=i[_];if(_e>=0&&ct>=0&&_e!==ct)throw new Error(`Incompatible shape during merge: ${o} vs. ${i}`);s[_]=_e>=0?_e:ct}return s}var If=class{constructor(o,i,s,_,_e,ct,Mt){this.name=o,this.dtype=i,this.maxSize=s,this.elementShape=_,this.identicalElementShapes=_e,this.dynamicSize=ct,this.clearAfterRead=Mt,this.tensors=[],this.closed_=!1,this.idTensor=ke(0),$r(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(o){this.tensors.forEach(i=>{(o==null||!o.has(i.tensor.id))&&i.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(o){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(o<0||o>=this.size())throw new Error(`Tried to read from index ${o}, but array size is: ${this.size()}`);let i=this.tensors[o];if(i.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${o} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(i.cleared=!0),i.read=!0,i.tensor}readMany(o){return o.map(i=>this.read(i))}write(o,i){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(o<0||!this.dynamicSize&&o>=this.maxSize)throw new Error(`Tried to write to index ${o}, but array is not resizeable and size is: ${this.maxSize}`);let s=this.tensors[o]||{};if(i.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${o},
          because the value dtype is ${i.dtype}, but TensorArray dtype is ${this.dtype}.`);if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=i.shape),Hr(this.elementShape,i.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${o}.`),s.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${o}, because it has already been read.`);if(s.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${o}, because it has already been written.`);s.tensor=i,$r(i),s.written=!0,this.tensors[o]=s}writeMany(o,i){if(o.length!==i.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${o.length} is not the same as tensors size: ${i.length}.`);o.forEach((s,_)=>this.write(s,i[_]))}gather(o,i){if(i&&i!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${i}`);if(o)o=o.slice(0,this.size());else{o=[];for(let _=0;_<this.size();_++)o.push(_)}if(o.length===0)return ar([],[0].concat(this.elementShape));let s=this.readMany(o);return Hr(this.elementShape,s[0].shape,"TensorArray shape mismatch: "),vr(s,0)}concat(o){if(o&&o!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${o}`);if(this.size()===0)return ar([],[0].concat(this.elementShape));let i=[];for(let _=0;_<this.size();_++)i.push(_);let s=this.readMany(i);return Hr(this.elementShape,s[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${s[0].shape})`),yt(s,0)}scatter(o,i){if(i.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${i.dtype}`);if(o.length!==i.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${o.length} vs. ${i.shape[0]}`);let s=Math.max(...o);if(!this.dynamicSize&&s>=this.maxSize)throw new Error(`Max index must be < array size (${s}  vs. ${this.maxSize})`);this.writeMany(o,fo(i,0))}split(o,i){if(i.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${i.dtype}`);let s=0,_=o.map(Ft=>(s+=Ft,s));if(s!==i.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${s}, and tensor's shape is: ${i.shape}`);if(!this.dynamicSize&&o.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${o.length}), and the TensorArray is not marked as dynamically resizeable`);let _e=s===0?0:i.size/s,ct=[];De$1(()=>{i=W$1(i,[1,s,_e]);for(let Ft=0;Ft<o.length;++Ft){let Ut=[0,Ft===0?0:_[Ft-1],0],Xt=[1,o[Ft],_e];ct[Ft]=W$1(Xe(i,Ut,Xt),this.elementShape)}return ct});let Mt=[];for(let Ft=0;Ft<o.length;Ft++)Mt[Ft]=Ft;this.writeMany(Mt,ct)}},hc=class Dme{get id(){return this.idTensor.id}constructor(i,s,_,_e=-1){this.tensors=i,this.elementShape=s,this.elementDtype=_,i!=null&&i.forEach(ct=>{if(_!==ct.dtype)throw new Error(`Invalid data types; op elements ${_}, but list elements ${ct.dtype}`);Hr(s,ct.shape,"TensorList shape mismatch: "),$r(ct)}),this.idTensor=ke(0),this.maxNumElements=_e,$r(this.idTensor)}copy(){return new Dme([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(i){this.tensors.forEach(s=>{(i==null||!i.has(s.id))&&s.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(i,s,_=-1){if(s!==this.elementDtype)throw new Error(`Invalid data types; op elements ${s}, but list elements ${this.elementDtype}`);if(_!==-1&&this.tensors.length!==_)throw new Error(`Operation expected a list with ${_} elements but got a list with ${this.tensors.length} elements.`);Hr(i,this.elementShape,"TensorList shape mismatch: ");let _e=fc(this.elementShape,this.tensors,i);return De$1(()=>{let ct=this.tensors.map(Mt=>W$1(Mt,_e));return vr(ct,0)})}popBack(i,s){if(s!==this.elementDtype)throw new Error(`Invalid data types; op elements ${s}, but list elements ${this.elementDtype}`);if(this.size()===0)throw new Error("Trying to pop from an empty list.");let _=fc(this.elementShape,this.tensors,i),_e=this.tensors.pop();return _e.kept=!1,Hr(_e.shape,i,"TensorList shape mismatch: "),W$1(_e,_)}pushBack(i){if(i.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${i.dtype}, but list elements ${this.elementDtype}`);if(Hr(i.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");$r(i),this.tensors.push(i)}resize(i){if(i<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${i}`);if(this.maxNumElements!==-1&&i>this.maxNumElements)throw new Error(`TensorListResize input size ${i} is greater maxNumElement ${this.maxNumElements}.`);let s=new Dme([],this.elementShape,this.elementDtype,this.maxNumElements);s.tensors.length=i;for(let _=0;_<Math.min(this.tensors.length,i);++_)s.tensors[_]=this.tensors[_];return s}getItem(i,s,_){if(_!==this.elementDtype)throw new Error(`Invalid data types; op elements ${_}, but list elements ${this.elementDtype}`);if(i<0||i>this.tensors.length)throw new Error(`Trying to access element ${i} in a list with ${this.tensors.length} elements.`);if(this.tensors[i]==null)throw new Error(`element at index ${i} is null.`);Hr(this.tensors[i].shape,s,"TensorList shape mismatch: ");let _e=fc(this.elementShape,this.tensors,s);return W$1(this.tensors[i],_e)}setItem(i,s){if(s.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${s.dtype}, but list elements ${this.elementDtype}`);if(i<0||this.maxNumElements!==-1&&i>=this.maxNumElements)throw new Error(`Trying to set element ${i} in a list with max ${this.maxNumElements} elements.`);Hr(this.elementShape,s.shape,"TensorList shape mismatch: "),$r(s),this.tensors[i]!=null&&(this.tensors[i].kept=!1),this.tensors[i]=s}gather(i,s,_){if(s!==this.elementDtype)throw new Error(`Invalid data types; op elements ${s}, but list elements ${this.elementDtype}`);Hr(this.elementShape,_,"TensorList shape mismatch: "),i=i.slice(0,this.size());let _e=fc(this.elementShape,this.tensors,_);return i.length===0?ar([],[0].concat(_e)):De$1(()=>{let ct=i.map(Mt=>W$1(this.tensors[Mt],_e));return vr(ct,0)})}concat(i,s){if(i&&i!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${i}`);Hr(this.elementShape,s,"TensorList shape mismatch: ");let _=fc(this.elementShape,this.tensors,s);return this.size()===0?ar([],[0].concat(_)):De$1(()=>{let _e=this.tensors.map(ct=>W$1(ct,_));return yt(_e,0)})}};function $T(o,i,s){let _=o.dtype;if(o.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${o.shape}`);if(o.dtype!==s)throw new Error(`Invalid data types; op elements ${o.dtype}, but list elements ${s}`);Hr(o.shape.slice(1),i,"TensorList shape mismatch: ");let _e=fo(o);return new hc(_e,i,_)}function RT(o,i,s,_){return new hc([],o,i,_)}function DT(o,i,s,_){if(i.length!==o.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${i.length} vs. ${o.shape[0]}`);let _e=Math.max(...i);if(_!=null&&_!==-1&&_e>=_)throw new Error(`Max index must be < array size (${_e}  vs. ${_})`);let ct=new hc([],s,o.dtype,_),Mt=fo(o,0);return i.forEach((Ft,Ut)=>{ct.setItem(Ft,Mt[Ut])}),ct}function AT(o,i,s){let _=0,_e=i.map(Xt=>(_+=Xt,_));if(_!==o.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${_}, and tensor's shape is: ${o.shape}`);let ct=Sf(o.shape.slice(1),s),Mt=_===0?0:o.size/_,Ft=De$1(()=>{let Xt=[];o=W$1(o,[1,_,Mt]);for(let Kt=0;Kt<i.length;++Kt){let nr=[0,Kt===0?0:_e[Kt-1],0],rr=[1,i[Kt],Mt];Xt[Kt]=W$1(Xe(o,nr,rr),ct)}return o.dispose(),Xt}),Ut=new hc([],s,o.dtype,i.length);for(let Xt=0;Xt<Ft.length;Xt++)Ut.setItem(Xt,Ft[Xt]);return Ut}var FT=async(o,i,s)=>{switch(o.op){case"If":case"StatelessIf":{let _=I("thenBranch",o,i,s),_e=I("elseBranch",o,i,s),ct=I("cond",o,i,s),Mt=I("args",o,i,s);return(await ct.data())[0]?s.functionMap[_].executeFunctionAsync(Mt,s.tensorArrayMap,s.tensorListMap):s.functionMap[_e].executeFunctionAsync(Mt,s.tensorArrayMap,s.tensorListMap)}case"While":case"StatelessWhile":{let _=I("body",o,i,s),_e=I("cond",o,i,s),ct=I("args",o,i,s),Mt=await s.functionMap[_e].executeFunctionAsync(ct,s.tensorArrayMap,s.tensorListMap),Ft=ct.map(Kt=>Kt.id),Ut=await Mt[0].data();Mt.forEach(Kt=>{!Kt.kept&&Ft.indexOf(Kt.id)===-1&&Kt.dispose()});let Xt=ct;for(;Ut[0];){let Kt=Xt;Xt=await s.functionMap[_].executeFunctionAsync(Xt,s.tensorArrayMap,s.tensorListMap);let nr=Xt.map(or=>or.id);Kt.forEach(or=>{!or.kept&&Ft.indexOf(or.id)===-1&&nr.indexOf(or.id)===-1&&or.dispose()});let rr=await s.functionMap[_e].executeFunctionAsync(Xt,s.tensorArrayMap,s.tensorListMap);Ut=await rr[0].data(),rr.forEach(or=>{!or.kept&&Ft.indexOf(or.id)===-1&&nr.indexOf(or.id)===-1&&or.dispose()})}return Xt}case"LoopCond":return[Bs(I("pred",o,i,s))];case"Switch":{let _=I("pred",o,i,s),_e=I("data",o,i,s);return _e.kept||(_e=Bs(_e)),(await _.data())[0]?[void 0,_e]:[_e,void 0]}case"Merge":{let _=o.inputNames.find(_e=>Bt$2(_e,i,s)!==void 0);return _?[Bs(Bt$2(_,i,s))]:void 0}case"Enter":{let _=I("frameName",o,i,s),_e=I("tensor",o,i,s);return s.enterFrame(_),[Bs(_e)]}case"Exit":{let _=I("tensor",o,i,s);return s.exitFrame(),[Bs(_)]}case"NextIteration":{let _=I("tensor",o,i,s);return s.nextIteration(),[Bs(_)]}case"TensorArrayV3":{let _=I("size",o,i,s),_e=I("dtype",o,i,s),ct=I("elementShape",o,i,s),Mt=I("dynamicSize",o,i,s),Ft=I("clearAfterRead",o,i,s),Ut=I("identicalElementShapes",o,i,s),Xt=I("name",o,i,s),Kt=new If(Xt,_e,_,ct,Ut,Mt,Ft);return s.addTensorArray(Kt),[Kt.idTensor,ke(1)]}case"TensorArrayWriteV3":{let _=I("tensorArrayId",o,i,s),_e=I("index",o,i,s),ct=I("tensor",o,i,s),Mt=s.getTensorArray(_.id);return Mt.write(_e,ct),[Mt.idTensor]}case"TensorArrayReadV3":{let _=I("tensorArrayId",o,i,s),_e=I("index",o,i,s);return[s.getTensorArray(_.id).read(_e)]}case"TensorArrayGatherV3":{let _=I("tensorArrayId",o,i,s),_e=I("indices",o,i,s),ct=I("dtype",o,i,s);return[s.getTensorArray(_.id).gather(_e,ct)]}case"TensorArrayScatterV3":{let _=I("tensorArrayId",o,i,s),_e=I("indices",o,i,s),ct=I("tensor",o,i,s),Mt=s.getTensorArray(_.id);return Mt.scatter(_e,ct),[Mt.idTensor]}case"TensorArrayConcatV3":{let _=I("tensorArrayId",o,i,s),_e=s.getTensorArray(_.id),ct=I("dtype",o,i,s);return[_e.concat(ct)]}case"TensorArraySplitV3":{let _=I("tensorArrayId",o,i,s),_e=I("tensor",o,i,s),ct=I("lengths",o,i,s),Mt=s.getTensorArray(_.id);return Mt.split(ct,_e),[Mt.idTensor]}case"TensorArraySizeV3":{let _=I("tensorArrayId",o,i,s);return[ke(s.getTensorArray(_.id).size(),"int32")]}case"TensorArrayCloseV3":{let _=I("tensorArrayId",o,i,s),_e=s.getTensorArray(_.id);return _e.clearAndClose(),[_e.idTensor]}case"TensorListSetItem":{let _=I("tensorListId",o,i,s),_e=I("index",o,i,s),ct=I("tensor",o,i,s),Mt=s.getTensorList(_.id);return Mt.setItem(_e,ct),[Mt.idTensor]}case"TensorListGetItem":{let _=I("tensorListId",o,i,s),_e=I("index",o,i,s),ct=I("elementShape",o,i,s),Mt=I("elementDType",o,i,s);return[s.getTensorList(_.id).getItem(_e,ct,Mt)]}case"TensorListScatterV2":case"TensorListScatter":{let _=I("indices",o,i,s),_e=DT(I("tensor",o,i,s),_,I("elementShape",o,i,s),I("numElements",o,i,s));return s.addTensorList(_e),[_e.idTensor]}case"TensorListReserve":case"EmptyTensorList":{let _,_e=I("elementShape",o,i,s),ct=I("elementDType",o,i,s);_=o.op==="TensorListReserve"?"numElements":"maxNumElements";let Mt=I(_,o,i,s),Ft=RT(_e,ct,Mt,o.op==="TensorListReserve"?-1:Mt);return s.addTensorList(Ft),[Ft.idTensor]}case"TensorListGather":{let _=I("tensorListId",o,i,s),_e=I("indices",o,i,s),ct=I("elementShape",o,i,s),Mt=I("elementDType",o,i,s);return[s.getTensorList(_.id).gather(_e,Mt,ct)]}case"TensorListStack":{let _=I("tensorListId",o,i,s),_e=I("elementShape",o,i,s),ct=I("elementDType",o,i,s),Mt=I("numElements",o,i,s);return[s.getTensorList(_.id).stack(_e,ct,Mt)]}case"TensorListFromTensor":{let _=$T(I("tensor",o,i,s),I("elementShape",o,i,s),I("elementDType",o,i,s));return s.addTensorList(_),[_.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{let _=I("tensorListId",o,i,s),_e=s.getTensorList(_.id),ct=I("dtype",o,i,s),Mt=I("elementShape",o,i,s);return[_e.concat(ct,Mt)]}case"TensorListPushBack":{let _=I("tensorListId",o,i,s),_e=I("tensor",o,i,s),ct=s.getTensorList(_.id);return ct.pushBack(_e),[ct.idTensor]}case"TensorListPopBack":{let _=I("tensorListId",o,i,s),_e=I("elementShape",o,i,s),ct=I("elementDType",o,i,s);return[s.getTensorList(_.id).popBack(_e,ct)]}case"TensorListSplit":{let _=I("tensor",o,i,s),_e=I("elementShape",o,i,s),ct=AT(_,I("lengths",o,i,s),_e);return s.addTensorList(ct),[ct.idTensor]}case"TensorListLength":{let _=I("tensorListId",o,i,s);return[ke(s.getTensorList(_.id).size(),"int32")]}case"TensorListResize":{let _=I("tensorListId",o,i,s),_e=I("size",o,i,s),ct=s.getTensorList(_.id).resize(_e);return s.addTensorList(ct),[ct.idTensor]}default:throw TypeError(`Node type ${o.op} is not implemented`)}};function PT(o,i,s){let[_,_e]=I("fusedOps",o,i,s),ct=_==="biasadd",Mt=!ct,Ft=_e==="prelu",Ut=_==="fusedbatchnorm",Xt=I("numArgs",o,i,s);if(ct){if(Ft&&Xt!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!Ft&&ct&&Xt!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(Ut)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");let Kt=I("strides",o,i,s),nr=Pl(o,i,s),rr=I("dataFormat",o,i,s).toUpperCase(),or=I("dilations",o,i,s),[hr,fr]=I("args",o,i,s);return Mt&&(fr=hr,hr=void 0),{stride:Kt,pad:nr,dataFormat:rr,dilations:or,biasArg:hr,preluArg:fr,activationFunc:_e,leakyreluAlpha:I("leakyreluAlpha",o,i,s)}}var OT=(o,i,s,_=Je)=>{switch(o.op){case"Conv1D":{let _e=I("stride",o,i,s),ct=I("pad",o,i,s),Mt=I("dataFormat",o,i,s).toUpperCase(),Ft=I("dilation",o,i,s);return[_.conv1d(I("x",o,i,s),I("filter",o,i,s),_e,ct,Mt,Ft)]}case"Conv2D":{let _e=I("strides",o,i,s),ct=Pl(o,i,s),Mt=I("dataFormat",o,i,s).toUpperCase(),Ft=I("dilations",o,i,s);return[_.conv2d(I("x",o,i,s),I("filter",o,i,s),[_e[1],_e[2]],ct,Mt,[Ft[1],Ft[2]])]}case"_FusedConv2D":{let{stride:_e,pad:ct,dataFormat:Mt,dilations:Ft,biasArg:Ut,preluArg:Xt,activationFunc:Kt,leakyreluAlpha:nr}=PT(o,i,s);return[_.fused.conv2d({x:I("x",o,i,s),filter:I("filter",o,i,s),strides:[_e[1],_e[2]],pad:ct,dataFormat:Mt,dilations:[Ft[1],Ft[2]],bias:Ut,activation:Kt,preluActivationWeights:Xt,leakyreluAlpha:nr})]}case"FusedDepthwiseConv2dNative":{let{stride:_e,pad:ct,dataFormat:Mt,dilations:Ft,biasArg:Ut,preluArg:Xt,activationFunc:Kt,leakyreluAlpha:nr}=PT(o,i,s);return[_.fused.depthwiseConv2d({x:I("x",o,i,s),filter:I("filter",o,i,s),strides:[_e[1],_e[2]],pad:ct,dataFormat:Mt,dilations:[Ft[1],Ft[2]],bias:Ut,activation:Kt,preluActivationWeights:Xt,leakyreluAlpha:nr})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{let _e=I("outputShape",o,i,s),ct=I("strides",o,i,s),Mt=Pl(o,i,s);return[_.conv2dTranspose(I("x",o,i,s),I("filter",o,i,s),_e,[ct[1],ct[2]],Mt)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{let _e=I("strides",o,i,s),ct=Pl(o,i,s),Mt=I("dilations",o,i,s),Ft=I("dataFormat",o,i,s).toUpperCase();return[_.depthwiseConv2d(I("input",o,i,s),I("filter",o,i,s),[_e[1],_e[2]],ct,Ft,[Mt[1],Mt[2]])]}case"Conv3D":{let _e=I("strides",o,i,s),ct=I("pad",o,i,s),Mt=I("dataFormat",o,i,s).toUpperCase(),Ft=I("dilations",o,i,s);return[_.conv3d(I("x",o,i,s),I("filter",o,i,s),[_e[1],_e[2],_e[3]],ct,Mt,[Ft[1],Ft[2],Ft[3]])]}case"AvgPool":{let _e=I("strides",o,i,s),ct=I("pad",o,i,s),Mt=I("kernelSize",o,i,s);return[_.avgPool(I("x",o,i,s),[Mt[1],Mt[2]],[_e[1],_e[2]],ct)]}case"MaxPool":{let _e=I("strides",o,i,s),ct=I("pad",o,i,s),Mt=I("kernelSize",o,i,s);return[_.maxPool(I("x",o,i,s),[Mt[1],Mt[2]],[_e[1],_e[2]],ct)]}case"MaxPoolWithArgmax":{let _e=I("strides",o,i,s),ct=I("pad",o,i,s),Mt=I("kernelSize",o,i,s),Ft=I("includeBatchInIndex",o,i,s),{result:Ut,indexes:Xt}=_.maxPoolWithArgmax(I("x",o,i,s),[Mt[1],Mt[2]],[_e[1],_e[2]],ct,Ft);return[Ut,Xt]}case"AvgPool3D":{let _e=I("strides",o,i,s),ct=I("pad",o,i,s),Mt=I("kernelSize",o,i,s);return[_.avgPool3d(I("x",o,i,s),[Mt[1],Mt[2],Mt[3]],[_e[1],_e[2],_e[3]],ct)]}case"MaxPool3D":{let _e=I("strides",o,i,s),ct=I("pad",o,i,s),Mt=I("kernelSize",o,i,s);return[_.maxPool3d(I("x",o,i,s),[Mt[1],Mt[2],Mt[3]],[_e[1],_e[2],_e[3]],ct)]}case"Dilation2D":{let _e=I("strides",o,i,s),ct=I("pad",o,i,s),Mt=I("dilations",o,i,s),Ft=_e[1],Ut=_e[2],Xt=Mt[1],Kt=Mt[2];return[_.dilation2d(I("x",o,i,s),I("filter",o,i,s),[Ft,Ut],ct,[Xt,Kt],"NHWC")]}default:throw TypeError(`Node type ${o.op} is not implemented`)}},MT=(o,i,s,_=Je)=>{switch(o.op){case"Fill":{let _e=I("shape",o,i,s),ct=I("dtype",o,i,s),Mt=I("value",o,i,s);return[_.fill(_e,Mt,ct)]}case"LinSpace":{let _e=I("start",o,i,s),ct=I("stop",o,i,s),Mt=I("num",o,i,s);return[_.linspace(_e,ct,Mt)]}case"Multinomial":{let _e=I("logits",o,i,s),ct=I("numSamples",o,i,s),Mt=I("seed",o,i,s);return[_.multinomial(_e,ct,Mt)]}case"OneHot":{let _e=I("indices",o,i,s),ct=I("depth",o,i,s),Mt=I("onValue",o,i,s),Ft=I("offValue",o,i,s),Ut=I("dtype",o,i,s);return[_.oneHot(_e,ct,Mt,Ft,Ut)]}case"Ones":return[_.ones(I("shape",o,i,s),I("dtype",o,i,s))];case"OnesLike":return[_.onesLike(I("x",o,i,s))];case"RandomStandardNormal":return[_.randomStandardNormal(I("shape",o,i,s),I("dtype",o,i,s),I("seed",o,i,s))];case"RandomUniform":return[_.randomUniform(I("shape",o,i,s),I("minval",o,i,s),I("maxval",o,i,s),I("dtype",o,i,s))];case"RandomUniformInt":return[_.randomUniformInt(I("shape",o,i,s),I("minval",o,i,s),I("maxval",o,i,s),I("seed",o,i,s))];case"Range":{let _e=I("start",o,i,s),ct=I("stop",o,i,s),Mt=I("step",o,i,s);return[_.range(_e,ct,Mt,I("dtype",o,i,s))]}case"TruncatedNormal":{let _e=I("shape",o,i,s),ct=I("mean",o,i,s),Mt=I("stdDev",o,i,s),Ft=I("seed",o,i,s);return[_.truncatedNormal(_e,ct,Mt,I("dtype",o,i,s),Ft)]}case"Zeros":return[_.zeros(I("shape",o,i,s),I("dtype",o,i,s))];case"ZerosLike":return[_.zerosLike(I("x",o,i,s))];default:throw TypeError(`Node type ${o.op} is not implemented`)}};function OS(o,i,s){return{boxes:I("boxes",o,i,s),scores:I("scores",o,i,s),maxOutputSize:I("maxOutputSize",o,i,s),iouThreshold:I("iouThreshold",o,i,s),scoreThreshold:I("scoreThreshold",o,i,s),softNmsSigma:I("softNmsSigma",o,i,s)}}var LT=async(o,i,s,_,_e=Je)=>{switch(o.op){case"NonMaxSuppressionV5":{let{boxes:ct,scores:Mt,maxOutputSize:Ft,iouThreshold:Ut,scoreThreshold:Xt,softNmsSigma:Kt}=OS(o,i,s),nr=await _e.image.nonMaxSuppressionWithScoreAsync(ct,Mt,Ft,Ut,Xt,Kt);return[nr.selectedIndices,nr.selectedScores]}case"NonMaxSuppressionV4":{let{boxes:ct,scores:Mt,maxOutputSize:Ft,iouThreshold:Ut,scoreThreshold:Xt}=OS(o,i,s),Kt=I("padToMaxOutputSize",o,i,s),nr=await _e.image.nonMaxSuppressionPaddedAsync(ct,Mt,Ft,Ut,Xt,Kt);return[nr.selectedIndices,nr.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{let{boxes:ct,scores:Mt,maxOutputSize:Ft,iouThreshold:Ut,scoreThreshold:Xt}=OS(o,i,s);return[await _e.image.nonMaxSuppressionAsync(ct,Mt,Ft,Ut,Xt)]}case"Where":{let ct=_e.cast(I("condition",o,i,s),"bool"),Mt=[await _e.whereAsync(ct)];return ct.dispose(),Mt}case"ListDiff":return _e.setdiff1dAsync(I("x",o,i,s),I("y",o,i,s));default:throw TypeError(`Node type ${o.op} is not implemented`)}},BT=(o,i,s,_=Je)=>{switch(o.op){case"LowerBound":{let _e=I("sortedSequence",o,i,s),ct=I("values",o,i,s);return[_.lowerBound(_e,ct)]}case"TopKV2":{let _e=I("x",o,i,s),ct=I("k",o,i,s),Mt=I("sorted",o,i,s),Ft=_.topk(_e,ct,Mt);return[Ft.values,Ft.indices]}case"UpperBound":{let _e=I("sortedSequence",o,i,s),ct=I("values",o,i,s);return[_.upperBound(_e,ct)]}case"Unique":{let _e=I("x",o,i,s),ct=_.unique(_e);return[ct.values,ct.indices]}case"UniqueV2":{let _e=I("x",o,i,s),ct=I("axis",o,i,s),Mt=_.unique(_e,ct);return[Mt.values,Mt.indices]}default:throw TypeError(`Node type ${o.op} is not implemented`)}},zT=(o,i,s,_=Je)=>{switch(o.op){case"Const":return i[o.name];case"PlaceholderWithDefault":let _e=I("default",o,i,s);return[Bt$2(o.name,i,s)||_e];case"Placeholder":return[Bt$2(o.name,i,s)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":return[Bs(I("x",o,i,s))];case"IdentityN":return I("x",o,i,s).map(Xt=>Bs(Xt));case"Snapshot":return[Bs(I("x",o,i,s))];case"Shape":return[_.tensor1d(I("x",o,i,s).shape,"int32")];case"ShapeN":return I("x",o,i,s).map(Xt=>_.tensor1d(Xt.shape));case"Size":return[_.scalar(I("x",o,i,s).size,"int32")];case"Rank":return[_.scalar(I("x",o,i,s).rank,"int32")];case"NoOp":return[_.scalar(1)];case"Print":let ct=I("x",o,i,s),Mt=I("data",o,i,s),Ft=I("message",o,i,s),Ut=I("summarize",o,i,s);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(Ft);for(let Xt=0;Xt<Mt.length;Xt++)console.log(Array.prototype.slice.call(Mt[Xt].dataSync()).slice(0,Ut));return[ct];default:throw TypeError(`Node type ${o.op} is not implemented`)}},vf=class{get id(){return this.handle.id}constructor(o,i){this.keyDType=o,this.valueDType=i,this.handle=ke(0),this.tensorMap=new Map,$r(this.handle)}clearAndClose(){this.tensorMap.forEach(o=>o.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return ke(this.size(),"int32")}async import(o,i){this.checkKeyAndValueTensor(o,i);let s=await o.data();return this.tensorMap.forEach(_=>_.dispose()),this.tensorMap.clear(),De$1(()=>{let _=fo(i),_e=s.length,ct=_.length;y.assert(_e===ct,()=>`The number of elements doesn't match, keys has ${_e} elements, the values has ${ct} elements.`);for(let Mt=0;Mt<_e;Mt++){let Ft=s[Mt],Ut=_[Mt];$r(Ut),this.tensorMap.set(Ft,Ut)}return this.handle})}async find(o,i){this.checkKeyAndValueTensor(o,i);let s=await o.data();return De$1(()=>{let _=[];for(let _e=0;_e<s.length;_e++){let ct=s[_e],Mt=this.findWithDefault(ct,i);_.push(Mt)}return vr(_)})}findWithDefault(o,i){let s=this.tensorMap.get(o);return s??i}checkKeyAndValueTensor(o,i){if(o.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${o.dtype}`);if(i.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${i.dtype}`)}},VT=async(o,i,s,_)=>{switch(o.op){case"HashTable":case"HashTableV2":{let _e=_.getHashTableHandleByName(o.name);if(_e!=null)return[_e];{let ct=I("keyDType",o,i,s),Mt=I("valueDType",o,i,s),Ft=new vf(ct,Mt);return _.addHashTable(o.name,Ft),[Ft.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{let _e=I("tableHandle",o,i,s,_),ct=I("keys",o,i,s),Mt=I("values",o,i,s);return[await _.getHashTableById(_e.id).import(ct,Mt)]}case"LookupTableFind":case"LookupTableFindV2":{let _e=I("tableHandle",o,i,s,_),ct=I("keys",o,i,s),Mt=I("defaultValue",o,i,s);return[await _.getHashTableById(_e.id).find(ct,Mt)]}case"LookupTableSize":case"LookupTableSizeV2":{let _e=I("tableHandle",o,i,s,_);return[_.getHashTableById(_e.id).tensorSize()]}default:throw TypeError(`Node type ${o.op} is not implemented`)}},WT=(o,i,s,_=Je)=>{switch(o.op){case"ResizeBilinear":{let _e=I("images",o,i,s),ct=I("size",o,i,s),Mt=I("alignCorners",o,i,s),Ft=I("halfPixelCenters",o,i,s);return[_.image.resizeBilinear(_e,[ct[0],ct[1]],Mt,Ft)]}case"ResizeNearestNeighbor":{let _e=I("images",o,i,s),ct=I("size",o,i,s),Mt=I("alignCorners",o,i,s),Ft=I("halfPixelCenters",o,i,s);return[_.image.resizeNearestNeighbor(_e,[ct[0],ct[1]],Mt,Ft)]}case"CropAndResize":{let _e=I("image",o,i,s),ct=I("boxes",o,i,s),Mt=I("boxInd",o,i,s),Ft=I("cropSize",o,i,s),Ut=I("method",o,i,s),Xt=I("extrapolationValue",o,i,s);return[_.image.cropAndResize(_e,ct,Mt,Ft,Ut,Xt)]}case"ImageProjectiveTransformV3":{let _e=I("images",o,i,s),ct=I("transforms",o,i,s),Mt=I("outputShape",o,i,s),Ft=I("fillValue",o,i,s),Ut=I("interpolation",o,i,s),Xt=I("fillMode",o,i,s);return[_.image.transform(_e,ct,Ut.toLowerCase(),Xt.toLowerCase(),Ft,Mt)]}default:throw TypeError(`Node type ${o.op} is not implemented`)}},UT=(o,i,s,_=Je)=>{switch(o.op){case"Equal":return[_.equal(I("a",o,i,s),I("b",o,i,s))];case"NotEqual":return[_.notEqual(I("a",o,i,s),I("b",o,i,s))];case"Greater":return[_.greater(I("a",o,i,s),I("b",o,i,s))];case"GreaterEqual":return[_.greaterEqual(I("a",o,i,s),I("b",o,i,s))];case"Less":return[_.less(I("a",o,i,s),I("b",o,i,s))];case"LessEqual":return[_.lessEqual(I("a",o,i,s),I("b",o,i,s))];case"LogicalAnd":return[_.logicalAnd(I("a",o,i,s),I("b",o,i,s))];case"LogicalNot":return[_.logicalNot(I("a",o,i,s))];case"LogicalOr":return[_.logicalOr(I("a",o,i,s),I("b",o,i,s))];case"Select":case"SelectV2":return[_.where(I("condition",o,i,s),I("a",o,i,s),I("b",o,i,s))];case"BitwiseAnd":return[_.bitwiseAnd(I("a",o,i,s),I("b",o,i,s))];default:throw TypeError(`Node type ${o.op} is not implemented`)}},GT=(o,i,s,_=Je)=>{switch(o.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[_.matMul(I("a",o,i,s),I("b",o,i,s),I("transposeA",o,i,s),I("transposeB",o,i,s))];case"Einsum":return[_.einsum(I("equation",o,i,s),...I("tensors",o,i,s))];case"Transpose":return[_.transpose(I("x",o,i,s),I("perm",o,i,s))];case"_FusedMatMul":let[_e,ct]=I("fusedOps",o,i,s),Mt=_e==="biasadd",Ft=ct==="prelu",Ut=I("numArgs",o,i,s),Xt=I("leakyreluAlpha",o,i,s);if(Mt){if(Ft&&Ut!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!Ft&&Ut!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}let[Kt,nr]=I("args",o,i,s);return[_.fused.matMul({a:I("a",o,i,s),b:I("b",o,i,s),transposeA:I("transposeA",o,i,s),transposeB:I("transposeB",o,i,s),bias:Kt,activation:ct,preluActivationWeights:nr,leakyreluAlpha:Xt})];case"MatrixBandPart":return[_.linalg.bandPart(I("a",o,i,s),I("numLower",o,i,s),I("numUpper",o,i,s))];default:throw TypeError(`Node type ${o.op} is not implemented`)}},HT=(o,i,s,_=Je)=>{switch(o.op){case"EuclideanNorm":return[_.euclideanNorm(I("x",o,i,s),I("axis",o,i,s),I("keepDims",o,i,s))];case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[_.batchNorm(I("x",o,i,s),I("mean",o,i,s),I("variance",o,i,s),I("offset",o,i,s),I("scale",o,i,s),I("epsilon",o,i,s))];case"LRN":return[_.localResponseNormalization(I("x",o,i,s),I("radius",o,i,s),I("bias",o,i,s),I("alpha",o,i,s),I("beta",o,i,s))];case"Softmax":return[_.softmax(I("x",o,i,s))];case"LogSoftmax":return[_.logSoftmax(I("x",o,i,s))];default:throw TypeError(`Node type ${o.op} is not implemented`)}},KT=(o,i,s,_=Je)=>{switch(o.op){case"RaggedGather":{let{outputNestedSplits:_e,outputDenseValues:ct}=_.raggedGather(I("paramsNestedSplits",o,i,s),I("paramsDenseValues",o,i,s),I("indices",o,i,s),I("outputRaggedRank",o,i,s));return _e.concat(ct)}case"RaggedRange":{let{rtNestedSplits:_e,rtDenseValues:ct}=_.raggedRange(I("starts",o,i,s),I("limits",o,i,s),I("splits",o,i,s));return[_e,ct]}case"RaggedTensorToTensor":return[_.raggedTensorToTensor(I("shape",o,i,s),I("values",o,i,s),I("defaultValue",o,i,s),I("rowPartitionTensors",o,i,s),I("rowPartitionTypes",o,i,s))];default:throw TypeError(`Node type ${o.op} is not implemented`)}},qT=(o,i,s,_=Je)=>{switch(o.op){case"Max":{let Ft=I("axis",o,i,s),Ut=I("keepDims",o,i,s);return[_.max(I("x",o,i,s),Ft,Ut)]}case"Mean":{let Ft=I("axis",o,i,s),Ut=I("keepDims",o,i,s);return[_.mean(I("x",o,i,s),Ft,Ut)]}case"Min":{let Ft=I("axis",o,i,s),Ut=I("keepDims",o,i,s);return[_.min(I("x",o,i,s),Ft,Ut)]}case"Sum":{let Ft=I("axis",o,i,s),Ut=I("keepDims",o,i,s);return[_.sum(I("x",o,i,s),Ft,Ut)]}case"All":{let Ft=I("axis",o,i,s),Ut=I("keepDims",o,i,s);return[_.all(I("x",o,i,s),Ft,Ut)]}case"Any":{let Ft=I("axis",o,i,s),Ut=I("keepDims",o,i,s);return[_.any(I("x",o,i,s),Ft,Ut)]}case"ArgMax":{let Ft=I("axis",o,i,s);return[_.argMax(I("x",o,i,s),Ft)]}case"ArgMin":{let Ft=I("axis",o,i,s);return[_.argMin(I("x",o,i,s),Ft)]}case"Prod":{let Ft=I("axis",o,i,s),Ut=I("keepDims",o,i,s);return[_.prod(I("x",o,i,s),Ft,Ut)]}case"Cumprod":{let Ft=I("axis",o,i,s),Ut=I("exclusive",o,i,s),Xt=I("reverse",o,i,s);return[_.cumprod(I("x",o,i,s),Ft,Ut,Xt)]}case"Cumsum":{let Ft=I("axis",o,i,s),Ut=I("exclusive",o,i,s),Xt=I("reverse",o,i,s);return[_.cumsum(I("x",o,i,s),Ft,Ut,Xt)]}case"Bincount":let _e=I("x",o,i,s),ct=I("weights",o,i,s),Mt=I("size",o,i,s);return[_.bincount(_e,ct,Mt)];case"DenseBincount":{let Ft=I("x",o,i,s),Ut=I("weights",o,i,s),Xt=I("size",o,i,s),Kt=I("binaryOutput",o,i,s);return[_.denseBincount(Ft,Ut,Xt,Kt)]}default:throw TypeError(`Node type ${o.op} is not implemented`)}},jT=(o,i,s,_=Je)=>{switch(o.op){case"ConcatV2":case"Concat":{let _e=I("n",o,i,s),ct=I("axis",o,i,s),Mt=I("tensors",o,i,s);return Mt=Mt.slice(0,_e),[_.concat(Mt,ct)]}case"Gather":{let _e=I("x",o,i,s),ct=I("indices",o,i,s);return[_.gather(_e,_.cast(ct,"int32"),0)]}case"GatherV2":{let _e=I("axis",o,i,s),ct=I("batchDims",o,i,s),Mt=I("x",o,i,s),Ft=I("indices",o,i,s);return[_.gather(Mt,_.cast(Ft,"int32"),_e,ct)]}case"Reverse":{let _e=I("dims",o,i,s),ct=[];for(let Ft=0;Ft<_e.length;Ft++)_e[Ft]&&ct.push(Ft);let Mt=I("x",o,i,s);return[_.reverse(Mt,ct)]}case"ReverseV2":{let _e=I("axis",o,i,s),ct=I("x",o,i,s);return[_.reverse(ct,_e)]}case"Slice":{let _e=I("begin",o,i,s),ct=I("size",o,i,s);return[_.slice(I("x",o,i,s),_e,ct)]}case"StridedSlice":{let _e=I("begin",o,i,s),ct=I("end",o,i,s),Mt=I("strides",o,i,s),Ft=I("beginMask",o,i,s),Ut=I("endMask",o,i,s),Xt=I("ellipsisMask",o,i,s),Kt=I("newAxisMask",o,i,s),nr=I("shrinkAxisMask",o,i,s),rr=I("x",o,i,s);return[_.stridedSlice(rr,_e,ct,Mt,Ft,Ut,Xt,Kt,nr)]}case"Pack":return De$1(()=>{let _e=I("axis",o,i,s),ct=I("tensors",o,i,s),Mt=ct[0].shape,Ft=_.squeeze(ct[0]).shape,Ut=ct.map(Xt=>{let Kt=y.arraysEqual(Xt.shape,Mt);if(!Kt&&!y.arraysEqual(_.squeeze(Xt).shape,Ft))throw new Error("the input tensors shape does not match");return Kt?Xt:_.reshape(Xt,Mt)});return[_.stack(Ut,_e)]});case"Unpack":{let _e=I("axis",o,i,s),ct=I("tensor",o,i,s);return _.unstack(ct,_e)}case"Tile":{let _e=I("reps",o,i,s);return[_.tile(I("x",o,i,s),_e)]}case"Split":case"SplitV":{let _e=I("axis",o,i,s),ct=I("numOrSizeSplits",o,i,s),Mt=I("x",o,i,s);return _.split(Mt,ct,_e)}case"ScatterNd":{let _e=I("indices",o,i,s),ct=I("values",o,i,s),Mt=I("shape",o,i,s);return[_.scatterND(_e,ct,Mt)]}case"GatherNd":{let _e=I("x",o,i,s),ct=I("indices",o,i,s);return[_.gatherND(_e,ct)]}case"SparseToDense":{let _e=I("sparseIndices",o,i,s),ct=I("outputShape",o,i,s),Mt=I("sparseValues",o,i,s),Ft=I("defaultValue",o,i,s);return[_.sparseToDense(_e,Mt,ct,Mt.dtype===Ft.dtype?Ft:_.cast(Ft,Mt.dtype))]}case"TensorScatterUpdate":{let _e=I("indices",o,i,s),ct=I("values",o,i,s),Mt=I("tensor",o,i,s);return[_.tensorScatterUpdate(Mt,_e,ct)]}default:throw TypeError(`Node type ${o.op} is not implemented`)}},XT=(o,i,s,_=Je)=>{switch(o.op){case"SparseFillEmptyRows":{let{outputIndices:_e,outputValues:ct,emptyRowIndicator:Mt,reverseIndexMap:Ft}=_.sparse.sparseFillEmptyRows(I("indices",o,i,s),I("values",o,i,s),I("denseShape",o,i,s),I("defaultValue",o,i,s));return[_e,ct,Mt,Ft]}case"SparseReshape":{let{outputIndices:_e,outputShape:ct}=_.sparse.sparseReshape(I("inputIndices",o,i,s),I("inputShape",o,i,s),I("newShape",o,i,s));return[_e,ct]}case"SparseSegmentMean":return[_.sparse.sparseSegmentMean(I("data",o,i,s),I("indices",o,i,s),I("segmentIds",o,i,s))];case"SparseSegmentSum":return[_.sparse.sparseSegmentSum(I("data",o,i,s),I("indices",o,i,s),I("segmentIds",o,i,s))];default:throw TypeError(`Node type ${o.op} is not implemented`)}},YT=(o,i,s,_=Je)=>{switch(o.op){case"FFT":return[_.fft(I("x",o,i,s))];case"IFFT":return[_.ifft(I("x",o,i,s))];case"RFFT":return[_.rfft(I("x",o,i,s))];case"IRFFT":return[_.irfft(I("x",o,i,s))];default:throw TypeError(`Node type ${o.op} is not implemented`)}},QT=(o,i,s,_=Je)=>{switch(o.op){case"StaticRegexReplace":return[_.string.staticRegexReplace(I("input",o,i,s),I("pattern",o,i,s),I("rewrite",o,i,s),I("replaceGlobal",o,i,s))];case"StringNGrams":{let{nGrams:_e,nGramsSplits:ct}=_.string.stringNGrams(I("data",o,i,s),I("dataSplits",o,i,s),I("separator",o,i,s),I("nGramWidths",o,i,s),I("leftPad",o,i,s),I("rightPad",o,i,s),I("padWidth",o,i,s),I("preserveShortSequences",o,i,s));return[_e,ct]}case"StringSplit":{let{indices:_e,values:ct,shape:Mt}=_.string.stringSplit(I("input",o,i,s),I("delimiter",o,i,s),I("skipEmpty",o,i,s));return[_e,ct,Mt]}case"StringToHashBucketFast":return[_.string.stringToHashBucketFast(I("input",o,i,s),I("numBuckets",o,i,s))];default:throw TypeError(`Node type ${o.op} is not implemented`)}},ZT=(o,i,s,_=Je)=>{switch(o.op){case"Cast":return[_.cast(I("x",o,i,s),I("dtype",o,i,s))];case"ExpandDims":{let _e=I("axis",o,i,s);return[_.expandDims(I("x",o,i,s),_e)]}case"Squeeze":{let _e=I("axis",o,i,s);return[_.squeeze(I("x",o,i,s),_e)]}case"Reshape":return[_.reshape(I("x",o,i,s),I("shape",o,i,s))];case"EnsureShape":return[_.ensureShape(I("x",o,i,s),I("shape",o,i,s))];case"MirrorPad":return[_.mirrorPad(I("x",o,i,s),I("padding",o,i,s),I("mode",o,i,s))];case"PadV2":case"Pad":return[_.pad(I("x",o,i,s),I("padding",o,i,s),I("constantValue",o,i,s))];case"SpaceToBatchND":{let _e=I("blockShape",o,i,s),ct=I("paddings",o,i,s);return[_.spaceToBatchND(I("x",o,i,s),_e,ct)]}case"BatchToSpaceND":{let _e=I("blockShape",o,i,s),ct=I("crops",o,i,s);return[_.batchToSpaceND(I("x",o,i,s),_e,ct)]}case"DepthToSpace":{let _e=I("blockSize",o,i,s),ct=I("dataFormat",o,i,s).toUpperCase();return[_.depthToSpace(I("x",o,i,s),_e,ct)]}case"BroadcastTo":return[_.broadcastTo(I("x",o,i,s),I("shape",o,i,s))];case"BroadcastArgs":return[_.broadcastArgs(I("s0",o,i,s),I("s1",o,i,s))];default:throw TypeError(`Node type ${o.op} is not implemented`)}};function MS(o,i,s,_,_e=De$1){let ct=((Mt,Ft,Ut)=>{switch(Mt.category){case"arithmetic":return _e(()=>TT(Mt,Ft,Ut));case"basic_math":return _e(()=>_T(Mt,Ft,Ut));case"control":return FT(Mt,Ft,Ut);case"convolution":return _e(()=>OT(Mt,Ft,Ut));case"creation":return _e(()=>MT(Mt,Ft,Ut));case"dynamic":return LT(Mt,Ft,Ut);case"evaluation":return _e(()=>BT(Mt,Ft,Ut));case"image":return _e(()=>WT(Mt,Ft,Ut));case"graph":return _e(()=>zT(Mt,Ft,Ut));case"logical":return _e(()=>UT(Mt,Ft,Ut));case"matrices":return _e(()=>GT(Mt,Ft,Ut));case"normalization":return _e(()=>HT(Mt,Ft,Ut));case"ragged":return _e(()=>KT(Mt,Ft,Ut));case"reduction":return _e(()=>qT(Mt,Ft,Ut));case"slice_join":return _e(()=>jT(Mt,Ft,Ut));case"sparse":return _e(()=>XT(Mt,Ft,Ut));case"spectral":return _e(()=>YT(Mt,Ft,Ut));case"string":return _e(()=>QT(Mt,Ft,Ut));case"transformation":return _e(()=>ZT(Mt,Ft,Ut));case"hash_table":return VT(Mt,Ft,Ut,_);case"custom":let Xt=pf(Mt.op);if(Xt&&Xt.customExecutor)return Xt.customExecutor(new wf(Mt,Ft,Ut));throw TypeError(`Custom op ${Mt.op} is not registered.`);default:throw TypeError(`Unknown op '${Mt.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(o,i,s);return y.isPromise(ct)?ct.then(Mt=>[].concat(Mt)):[].concat(ct)}var Ml=class{constructor(o={},i={},s={},_={},_e){this.weightMap=o,this.tensorArrayMap=i,this.tensorListMap=s,this.functionMap=_,this.parseNodeNameCache=_e,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(o,i){return{id:o,frameName:i,iterationId:0}}set currentContext(o){this.contexts!==o&&(this.contexts=o,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){let o=[];for(let i=0;i<this.contexts.length-1;i++){let s=this.contexts.slice(0,this.contexts.length-i);o.push(this.contextIdforContexts(s))}o.push(""),this._currentContextIds=o}contextIdforContexts(o){return o?o.map(i=>i.id===0&&i.iterationId===0?"":`${i.frameName}-${i.iterationId}`).join("/"):""}enterFrame(o){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,o)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()}nextIteration(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");{this.contexts=this.contexts.slice(),this.lastId++;let o=Object.assign({},this.contexts[this.contexts.length-1]);o.iterationId+=1,o.id=this.lastId,this.contexts.splice(-1,1,o),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}}getWeight(o){return this.weightMap[o]}addTensorArray(o){this.tensorArrayMap[o.id]=o}getTensorArray(o){return this.tensorArrayMap[o]}addTensorList(o){this.tensorListMap[o.id]=o}getTensorList(o){return this.tensorListMap[o]}dispose(o){for(let i in this.tensorArrayMap)this.tensorArrayMap[i].clearAndClose(o);for(let i in this.tensorListMap)this.tensorListMap[i].clearAndClose(o)}};function LS(o,i,s,_){let _e=new Set,ct=[],Mt=null,Ft=null,Ut=new Set,Xt=new Set(Object.keys(o).map(rr=>Nr(rr)[0]));_=_||[];let Kt=new Set(_.map(rr=>Nr(rr.name)[0])),nr=[...i];for(;nr.length>0;){let rr=nr.pop();if((fu(rr)||A8(rr)||F8(rr))&&Mt==null&&(Mt=rr,Ft=Mt.children.map(or=>or.name).filter(or=>_e.has(or))),_e.add(rr.name),s[rr.name]==null&&!Xt.has(rr.name)&&!Kt.has(rr.name)){if(rr.inputs.length===0){ct.push(rr.name);continue}rr.inputs.forEach(or=>{Ut.has(or.name)||(Ut.add(or.name),nr.push(or))})}}return{inputs:o,outputs:i,usedNodes:_e,missingInputs:ct,dynamicNode:Mt,syncInputs:Ft}}function JT(o,i){let{usedNodes:s,inputs:_}=i,_e=Object.keys(_).map(fr=>Nr(fr)[0]).map(fr=>o.nodes[fr]),ct=o.initNodes||[],Mt=fr=>s.has(typeof fr=="string"?fr:fr.name);function Ft(fr){return[...new Map(fr.map(yr=>[yr.name,yr])).values()]}let Ut=Ft([..._e,...o.weights,...ct]).filter(Mt),Xt=Ft([...Ut,...Object.values(o.nodes)]).filter(Mt),Kt=new Map(Xt.map(fr=>[fr.name,fr])),nr={};for(let fr of Xt){nr[fr.name]=nr[fr.name]||0;for(let yr of fr.children)Mt(yr)||(nr[yr.name]=Number.POSITIVE_INFINITY),nr[yr.name]=(nr[yr.name]||0)+1}let rr=Object.entries(nr).filter(([,fr])=>fr===0).map(([fr])=>fr),or=[...rr];for(;rr.length>0;){let fr=rr.pop(),yr=Kt.get(fr);for(let Lr of yr.children.filter(Mt))--nr[Lr.name]==0&&(or.push(Lr.name),rr.push(Lr.name))}let hr=_8(or.map(fr=>Kt.get(fr)),Ut);return E8(hr,Ut),hr}function _8(o,i){let s=new Map(o.map(ct=>[ct.name,ct])),_=i.map(ct=>ct.name),_e=new Set(_);for(;_.length>0;){let ct=_.pop(),Mt=s.get(ct);for(let Ft of Mt.children)!s.has(Ft.name)||_e.has(Ft.name)||(_e.add(Ft.name),_.push(Ft.name))}return o.filter(ct=>_e.has(ct.name))}var gc=class extends Error{constructor(o){super(`NodesExecutionOrderError: ${o}`)}};function E8(o,i){let s=new Map(o.map((Ft,Ut)=>[Ft.name,Ut])),_=new Set(i.map(Ft=>Ft.name)),_e=Ft=>_.has(typeof Ft=="string"?Ft:Ft.name),ct=new Set(o.map(Ft=>Ft.name)),Mt=Ft=>ct.has(typeof Ft=="string"?Ft:Ft.name);for(let Ft of o){for(let Ut of Ft.children.filter(Mt)){if(!s.has(Ut.name))throw new gc(`Child ${Ut.name} of node ${Ft.name} is unreachable.`);if(s.get(Ft.name)>s.get(Ut.name))throw new gc(`Node ${Ft.name} is scheduled to run after its child ${Ut.name}.`)}if(!_e(Ft))for(let Ut of Ft.inputs){if(!s.has(Ut.name))throw new gc(`Input ${Ut.name} of node ${Ft.name} is unreachable.`);if(s.get(Ut.name)>s.get(Ft.name))throw new gc(`Node ${Ft.name} is scheduled to run before its input ${Ut.name}.`)}}}function e_(o){let i=new Map(o.map((Ft,Ut)=>[Ft.name,Ut])),s=Number.MAX_SAFE_INTEGER,_=o.map((Ft,Ut)=>fu(Ft)?s:Ut),_e=Ft=>{let Ut=_[i.get(Ft.name)];return Ut??-1},ct=o.map((Ft,Ut)=>Ft.children.map(_e).reduce((Xt,Kt)=>Math.max(Xt,Kt),_[Ut])),Mt=new Map;for(let Ft=0;Ft<o.length;++Ft){let Ut=ct[Ft];if(Ut===s)continue;let Xt=o[Ft],Kt=o[Ut];Mt.has(Kt.name)||Mt.set(Kt.name,[]),Mt.get(Kt.name).push(Xt)}return Mt}var $8=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),R8=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),D8=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function fu(o){return $8.has(o.op)}function A8(o){return R8.has(o.op)}function F8(o){return D8.has(o.op)}var Ll=class Zge{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(i){let s=Object.keys(i).map(_=>i[_].map(_e=>_e.id));this._weightIds=[].concat(...s),this._weightMap=i}set resourceManager(i){this._resourceManager=i}get inputs(){return this._inputs.map(i=>({name:i.name,shape:i.attrParams.shape?i.attrParams.shape.value:void 0,dtype:i.attrParams.dtype?i.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(i=>({name:i.name,shape:i.attrParams.shape?i.attrParams.shape.value:void 0,dtype:i.attrParams.dtype?i.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(i=>i.signatureKey||i.name)}get outputNodes(){return this._outputs.map(i=>{let s=i.signatureKey||i.name;return i.defaultOutput?`${s}:${i.defaultOutput}`:s})}get functions(){return Object.keys(this._functions).reduce((i,s)=>(i[s]=this._functions[s].signature,i),{})}constructor(i,s){this.graph=i,this.parent=s,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=i.outputs,this._inputs=i.inputs,this._initNodes=i.initNodes,this._signature=i.signature,this._functions=i.functions,i.functions!=null&&Object.keys(i.functions).forEach(_=>{this._functionExecutorMap[_]=new Zge(i.functions[_],this)})}getCompilationKey(i,s){let _=i.map(ct=>ct.name).sort(),_e=s.map(ct=>ct.name).sort();return _.join(this.SEPARATOR)+"--"+_e.join(this.SEPARATOR)}compile(i,s){let _=LS(i,s,this.weightMap,this._initNodes),{missingInputs:_e,dynamicNode:ct,syncInputs:Mt}=_;if(ct!=null)throw new Error(`This execution contains the node '${ct.name}', which has the dynamic op '${ct.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${Mt}]`);if(_e.length>0){let Ut=s.map(Kt=>Kt.name),Xt=Object.keys(i);throw new Error(`Cannot compute the outputs [${Ut}] from the provided inputs [${Xt}]. Missing the following inputs: [${_e}]`)}let Ft=JT(this.graph,_);return{orderedNodes:Ft,nodeLiveUntilMap:e_(Ft)}}cloneAndKeepTensor(i){if(i==null)return null;let s=i.clone();return $r(s),s}cloneTensorList(i){return i?i.map(s=>this.cloneAndKeepTensor(s)):null}cloneTensorMap(i){return Object.fromEntries(Object.entries(i).map(([s,_])=>[s,this.cloneTensorList(_)]))}execute(i,s){this.disposeIntermediateTensors(),i=this.mapInputs(i);let _=Object.keys(i).sort();this.checkInputs(i),this.checkInputShapeAndType(i),s=this.mapOutputs(s),this.checkOutputs(s);let _e=_.map(rr=>this.graph.nodes[Nr(rr)[0]]),ct=s.map(rr=>Nr(rr)[0]),Mt=new Set(ct),Ft=ct.map(rr=>this.graph.nodes[rr]);Ft.length===0&&(Ft=this._outputs);let Ut=this.getCompilationKey(_e,Ft),Xt=this.compiledMap.get(Ut);Xt==null&&(Xt=this.compile(i,Ft),this.compiledMap.set(Ut,Xt));try{this.keepIntermediateTensors=A().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(rr){this.keepIntermediateTensors=!1,console.warn(rr.message)}let Kt={},nr={};return De$1(()=>{let rr=new Ml(this.weightMap,Kt,nr,this.functionExecutorMap,this.parseNodeNameCache),or=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(i).forEach(Lr=>{let[Br,Vr]=Nr(Lr,rr),Wr=[];Wr[Vr]=i[Lr],or[Br]=Wr,this.keepIntermediateTensors&&(this.clonedTensorsMap[Br]=this.cloneTensorList(Wr))});let hr=this.getFrozenTensorIds(or),{orderedNodes:fr,nodeLiveUntilMap:yr}=Xt;for(let Lr of fr){if(or[Lr.name])continue;let Br=MS(Lr,or,rr,this._resourceManager);if(y.isPromise(Br))throw new Error(`The execution of the op '${Lr.op}' returned a promise. Please use model.executeAsync() instead.`);or[Lr.name]=Br,this.keepIntermediateTensors&&(this.clonedTensorsMap[Lr.name]=this.cloneTensorList(Br)),this.checkTensorForDisposalWithNodeLiveUntilInfo(Lr,or,rr,hr,Mt,yr.get(Lr.name))}return this.parent==null&&rr.dispose(hr),s.map(Lr=>Bt$2(Lr,or,rr))})}getFrozenTensorIds(i){let s=[].concat.apply([],Object.keys(i).map(_=>i[_]).map(_=>_.map(_e=>_e.id)));return new Set(s)}checkTensorForDisposal(i,s,_,_e,ct,Mt,Ft){if(!fu(s)&&!Mt.has(i)){for(let Ut of _[i])Ut!=null&&(Ft[Ut.id]=(Ft[Ut.id]||0)+s.children.length);for(let Ut of s.inputs){if(fu(Ut))continue;let Xt=hS(Ut.name,_,_e);if(Xt!=null)for(let Kt of Xt){if(!Kt||Kt.kept||ct.has(Kt.id))continue;let nr=Ft[Kt.id];nr===1?(Kt.dispose(),delete Ft[Kt.id]):nr!=null&&Ft[Kt.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(i,s,_,_e,ct,Mt){function Ft(Ut){return fu(Ut)||ct.has(Ut.name)}if(!fu(i)&&Mt!=null)for(let Ut of Mt){if(Ft(Ut))continue;let Xt=hS(Ut.name,s,_);for(let Kt of Xt)!Kt||Kt.kept||_e.has(Kt.id)||Kt.dispose()}}async executeAsync(i,s){return this._executeAsync(i,s)}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach(i=>{for(let s of i)s&&!s.isDisposed&&s.dispose()}),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}async _executeAsync(i,s,_=!1,_e={},ct={}){this.disposeIntermediateTensors(),_||(i=this.mapInputs(i),this.checkInputs(i),this.checkInputShapeAndType(i),s=this.mapOutputs(s),this.checkOutputs(s));try{this.keepIntermediateTensors=A().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(rr){this.keepIntermediateTensors=!1,console.warn(rr.message)}let Mt=new Ml(this.weightMap,_e,ct,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));let Ft=await this.executeWithControlFlow(i,Mt,s,_),Ut=s.map(rr=>Bt$2(rr,Ft,Mt)),Xt=Ut.map(rr=>rr.id),Kt=Object.keys(i).map(rr=>i[rr].id),nr=new Set([...Xt,...Kt,...this.weightIds]);return Object.values(Ft).forEach(rr=>{rr.forEach(or=>{or&&!or.isDisposed&&!nr.has(or.id)&&or.dispose()})}),this.parent==null&&Mt.dispose(nr),Ut}async executeFunctionAsync(i,s,_){let _e=i.reduce((ct,Mt,Ft)=>(ct[this.inputs[Ft].name]=Mt,ct),{});return this._executeAsync(_e,this.outputNodes,!0,s,_)}async executeWithControlFlow(i,s,_,_e){let ct=Object.keys(i),Mt=ct.map(Wr=>this.graph.nodes[Nr(Wr)[0]]),Ft=_.map(Wr=>Nr(Wr)[0]),Ut=new Set(Ft),Xt=Ft.map(Wr=>this.graph.nodes[Wr]);Xt.length===0&&(Xt=this._outputs);let{usedNodes:Kt,missingInputs:nr,dynamicNode:rr,syncInputs:or}=LS(i,Xt,this.weightMap,this._initNodes),hr=[...Mt,...this.graph.weights,...this._initNodes||[]].map(Wr=>({node:Wr,contexts:s.currentContext})),fr=Object.assign({},this.weightMap);Object.keys(i).forEach(Wr=>{let[ro,no]=Nr(Wr),so=[];so[no]=i[Wr],fr[ro]=so});let yr={},Lr=this.getFrozenTensorIds(fr),Br={};for(;hr.length>0;){let Wr=this.processStack(Mt,hr,s,fr,Br,Lr,Ut,yr,Kt);await Promise.all(Wr)}rr==null&&!_e&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");let Vr=Xt.filter(Wr=>!fu(Wr)&&!Bt$2(Wr.name,fr,s)).map(Wr=>Wr.name);if(Vr.length>0){let Wr="";throw rr!=null&&(Wr=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${or}]`),new Error(`Cannot compute the outputs [${Vr}] from the provided inputs [${ct}]. Consider providing the following inputs: [${nr}]. ${Wr}`)}return fr}processStack(i,s,_,_e,ct,Mt,Ft,Ut,Xt){let Kt=[];for(;s.length>0;){let nr=s.pop();_.currentContext=nr.contexts;let rr="";if(nr.node.op==="Enter"&&I("isConstant",nr.node,_e,_)&&([rr]=Ls(nr.node.name,_)),_e[nr.node.name]==null){let or=MS(nr.node,_e,_,this._resourceManager);rr||([rr]=Ls(nr.node.name,_));let hr=_.currentContext;y.isPromise(or)?Kt.push(or.then(fr=>(_e[rr]=fr,this.keepIntermediateTensors&&(this.clonedTensorsMap[rr]=this.cloneTensorList(fr)),_.currentContext=hr,this.checkTensorForDisposal(rr,nr.node,_e,_,Mt,Ft,Ut),this.processChildNodes(nr.node,s,_,_e,ct,Xt),fr))):(_e[rr]=or,this.keepIntermediateTensors&&(this.clonedTensorsMap[rr]=this.cloneTensorList(or)),this.checkTensorForDisposal(rr,nr.node,_e,_,Mt,Ft,Ut),this.processChildNodes(nr.node,s,_,_e,ct,Xt))}else this.processChildNodes(nr.node,s,_,_e,ct,Xt)}return Kt}processChildNodes(i,s,_,_e,ct,Mt){i.children.forEach(Ft=>{let[Ut]=Ls(Ft.name,_);ct[Ut]||!Mt.has(Ft.name)||(Ft.op==="Merge"?Ft.inputNames.some(Xt=>!!Bt$2(Xt,_e,_))&&(ct[Ut]=!0,s.push({contexts:_.currentContext,node:Ft})):Ft.inputNames.every(Xt=>!!Bt$2(Xt,_e,_))&&(ct[Ut]=!0,s.push({contexts:_.currentContext,node:Ft})))})}dispose(){Object.keys(this.weightMap).forEach(i=>this.weightMap[i].forEach(s=>s.dispose()))}checkInputShapeAndType(i){Object.keys(i).forEach(s=>{let _=i[s],[_e]=Nr(s),ct=this.graph.nodes[_e];if(ct.attrParams.shape&&ct.attrParams.shape.value){let Mt=ct.attrParams.shape.value,Ft=Mt.length===_.shape.length&&_.shape.every((Ut,Xt)=>Mt[Xt]===-1||Mt[Xt]===Ut);y.assert(Ft,()=>`The shape of dict['${ct.name}'] provided in model.execute(dict) must be [${Mt}], but was [${_.shape}]`)}ct.attrParams.dtype&&ct.attrParams.dtype.value&&y.assert(_.dtype===ct.attrParams.dtype.value,()=>`The dtype of dict['${ct.name}'] provided in model.execute(dict) must be ${ct.attrParams.dtype.value}, but was ${_.dtype}`)})}mapInputs(i){var s,_;let _e={};for(let ct in i){let Mt=(_=(s=this._signature)===null||s===void 0?void 0:s.inputs)===null||_===void 0?void 0:_[ct];Mt!=null?_e[Mt.name]=i[ct]:_e[ct]=i[ct]}return _e}checkInputs(i){let s=Object.keys(i).filter(_=>{let[_e]=Nr(_);return this.graph.nodes[_e]==null});if(s.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${s}] that are not part of graph`)}mapOutputs(i){return i.map(s=>{var _,_e;let ct=(_e=(_=this._signature)===null||_===void 0?void 0:_.outputs)===null||_e===void 0?void 0:_e[s];return ct!=null?ct.name:s},{})}checkOutputs(i){i.forEach(s=>{let[_]=Nr(s);if(!this.graph.nodes[_])throw new Error(`The output '${s}' is not found in the graph`)})}},kf=class{constructor(o={},i={}){this.hashTableNameToHandle=o,this.hashTableMap=i}addHashTable(o,i){this.hashTableNameToHandle[o]=i.handle,this.hashTableMap[i.id]=i}getHashTableHandleByName(o){return this.hashTableNameToHandle[o]}getHashTableById(o){return this.hashTableMap[o]}dispose(){for(let o in this.hashTableMap)this.hashTableMap[o].clearAndClose(),delete this.hashTableMap[o];for(let o in this.hashTableNameToHandle)this.hashTableNameToHandle[o].dispose(),delete this.hashTableNameToHandle[o]}},P8="?tfjs-format=file",O8="model.json",Bl=class{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(o,i={},s=di){this.modelUrl=o,this.loadOptions=i,this.version="n/a",this.io=s,i==null&&(this.loadOptions={}),this.resourceManager=new kf}findIOHandler(){let o=this.modelUrl;if(o.load!=null)this.handler=o;else if(this.loadOptions.requestInit!=null)this.handler=this.io.browserHTTPRequest(o,this.loadOptions);else{let i=this.io.getLoadHandlers(o,this.loadOptions);if(i.length===0)i.push(this.io.browserHTTPRequest(o,this.loadOptions));else if(i.length>1)throw new Error(`Found more than one (${i.length}) load handlers for URL '${[o]}'`);this.handler=i[0]}}load(){if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");let o=this.handler.load();return y.isPromise(o)?o.then(i=>i.getWeightStream==null?this.loadSync(i):this.loadStreaming(i)):this.loadSync(o)}loadSync(o){let i=this.io.decodeWeights(o.weightData,o.weightSpecs);return this.loadWithWeightMap(o,i)}async loadStreaming(o){if(o.getWeightStream==null)throw new Error("Model artifacts missing streamWeights function");let i=await ad(o.getWeightStream(),o.weightSpecs);return this.loadWithWeightMap(o,i)}loadWithWeightMap(o,i){this.artifacts=o;let s=this.artifacts.modelTopology,_=this.artifacts.signature;if(this.artifacts.userDefinedMetadata!=null){let _e=this.artifacts.userDefinedMetadata;_e.signature!=null&&(_=_e.signature),_e.structuredOutputKeys!=null&&(this.structuredOutputKeys=_e.structuredOutputKeys)}if(this.signature=_,this.version=`${s.versions.producer}.${s.versions.minConsumer}`,this.executor=new Ll(Ol.Instance.transformGraph(s,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(i),this.executor.resourceManager=this.resourceManager,o.modelInitializer!=null&&o.modelInitializer.node!=null){let _e=Ol.Instance.transformGraph(o.modelInitializer);this.initializer=new Ll(_e),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=o.initializerSignature}return!0}async save(o,i){if(typeof o=="string"){let s=this.io.getSaveHandlers(o);if(s.length===0)throw new Error(`Cannot find any save handlers for URL '${o}'`);if(s.length>1)throw new Error(`Found more than one (${s.length}) save handlers for URL '${o}'`);o=s[0]}if(o.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return o.save(this.artifacts)}addStructuredOutputNames(o){if(this.structuredOutputKeys){let i={};return(o instanceof mt?[o]:o).forEach((s,_)=>i[this.structuredOutputKeys[_]]=s),i}return o}predict(o,i){let s=this.execute(o,this.outputNodes);return this.addStructuredOutputNames(s)}async predictAsync(o,i){let s=await this.executeAsync(o,this.outputNodes);return this.addStructuredOutputNames(s)}normalizeInputs(o){var i;if(!(o instanceof mt||Array.isArray(o))){let _e=(i=this.signature)===null||i===void 0?void 0:i.inputs;if(_e!=null)for(let ct in _e){let Mt=_e[ct];Mt.resourceId!=null&&(o[ct]=this.resourceIdToCapturedInput[Mt.resourceId])}return o}o=Array.isArray(o)?o:[o];let s=Object.keys(this.resourceIdToCapturedInput).length;if(o.length+s!==this.inputNodes.length)throw new Error(`Input tensor count mismatch, the graph model has ${this.inputNodes.length-s} non-resource placeholders, while there are ${o.length} input tensors provided.`);let _=0;return this.inputNodes.reduce((_e,ct)=>{var Mt,Ft,Ut;let Xt=(Ut=(Ft=(Mt=this.signature)===null||Mt===void 0?void 0:Mt.inputs)===null||Ft===void 0?void 0:Ft[ct])===null||Ut===void 0?void 0:Ut.resourceId;return _e[ct]=Xt!=null?this.resourceIdToCapturedInput[Xt]:o[_++],_e},{})}normalizeOutputs(o){return o=o||this.outputNodes,Array.isArray(o)?o:[o]}executeInitializerGraph(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}async executeInitializerGraphAsync(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))}setResourceIdToCapturedInput(o){if(this.resourceIdToCapturedInput={},this.initializerSignature){let i=this.initializerSignature.outputs,s=Object.keys(i);for(let _=0;_<s.length;_++){let _e=i[s[_]];this.resourceIdToCapturedInput[_e.resourceId]=o[_]}}}execute(o,i){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),o=this.normalizeInputs(o),i=this.normalizeOutputs(i);let s=this.executor.execute(o,i);return s.length>1?s:s[0]}async executeAsync(o,i){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(await this.executeInitializerGraphAsync()),o=this.normalizeInputs(o),i=this.normalizeOutputs(i);let s=await this.executor.executeAsync(o,i);return s.length>1?s:s[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(o){return Object.keys(o).reduce((i,s)=>(i[s]=[o[s]],i),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&Ot$1(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}};async function M8(o,i={},s=di){if(o==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");i==null&&(i={}),i.fromTFHub&&typeof o=="string"&&(o=B8(o));let _=new Bl(o,i,s);return await _.load(),_}function L8(o){if(o==null)throw new Error("modelUrl in loadGraphModelSync() cannot be null. Please provide model artifacts or an IOHandler that loads the model");let i;if(o instanceof Array){let[_,_e]=o;if(!_)throw new Error("modelJSON must be the first element of the array");if(!(_e&&_e instanceof ArrayBuffer))throw new Error("An ArrayBuffer of weights must be the second element of the array");if(!("modelTopology"in _))throw new Error("Model JSON is missing 'modelTopology'");if(!("weightsManifest"in _))throw new Error("Model JSON is missing 'weightsManifest'");let ct=di.getWeightSpecs(_.weightsManifest),Mt=di.getModelArtifactsForJSONSync(_,ct,_e);i=di.fromMemorySync(Mt)}else if("load"in o)i=o;else{if(!("modelTopology"in o&&"weightSpecs"in o&&"weightData"in o))throw new Error("Unknown model format");i=di.fromMemorySync(o)}let s=new Bl(i);return s.load(),s}function B8(o){return o.endsWith("/")||(o+="/"),`${o}${O8}${P8}`}var z8="4.17.0";function Q$1(o,i){Array.isArray(o)||(o=[o]),o.forEach(s=>{s!=null&&y.assert(s.dtype!=="complex64",()=>`${i} does not support complex64 tensors in the CPU backend.`)})}var V8=Vt.whereImpl,xc=class Qge extends ao{nextDataId(){return Qge.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new Bo(this,ur())}write(i,s,_){this.firstUse&&(this.firstUse=!1,A().get("IS_NODE")&&w.warn(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));let _e={id:this.nextDataId()};return this.data.set(_e,{values:i,dtype:_,refCount:1}),_e}makeTensorInfo(i,s,_){let _e;if(s==="string"&&_!=null&&_.length>0&&y.isString(_[0])){let ct=_.map(Mt=>y.encodeString(Mt));_e=this.write(ct,i,s)}else _e=this.write(_,i,s);return{dataId:_e,shape:i,dtype:s}}refCount(i){return this.data.has(i)?this.data.get(i).refCount:0}incRef(i){this.data.get(i).refCount++}decRef(i){this.data.has(i)&&this.data.get(i).refCount--}move(i,s,_,_e,ct){this.data.set(i,{values:s,dtype:_e,refCount:ct})}numDataIds(){return this.data.numDataIds()}async read(i){return this.readSync(i)}readSync(i){let{dtype:s,complexTensorInfos:_}=this.data.get(i);if(s==="complex64"){let _e=this.readSync(_.real.dataId),ct=this.readSync(_.imag.dataId);return w.mergeRealAndImagArrays(_e,ct)}return y.convertBackendValuesAndArrayBuffer(this.data.get(i).values,s)}bufferSync(i){let s=this.readSync(i.dataId);if(i.dtype==="string")try{let _=s.map(_e=>y.decodeString(_e));return me$1(i.shape,i.dtype,_)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return me$1(i.shape,i.dtype,s)}makeOutput(i,s,_){return ur().makeTensorFromTensorInfo(this.makeTensorInfo(s,_,i),this)}disposeData(i,s=!1){if(this.data.has(i)){if(this.data.get(i).refCount--,!s&&this.data.get(i).refCount>0)return!1;let{complexTensorInfos:_}=this.data.get(i);_!=null&&(this.disposeData(_.real.dataId,!0),this.disposeData(_.imag.dataId,!0)),this.data.delete(i)}return!0}disposeIntermediateTensorInfo(i){this.disposeData(i.dataId)}async time(i){let s=y.now();return i(),{kernelMs:y.now()-s}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(i){Q$1([i],"where");let s=this.readSync(i.dataId);return V8(i.shape,s)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}};xc.nextDataId=0;var Ic={};function BS(o){let i=new Float32Array(o.length);for(let s=0;s<o.length;++s)i[s]=Math.abs(o[s]);return i}qe(Ic,{addImpl:()=>VS,bincountImpl:()=>Cc,bincountReduceImpl:()=>Nf,bitwiseAndImpl:()=>WS,castImpl:()=>zS,ceilImpl:()=>US,concatImpl:()=>ap,equalImpl:()=>GS,expImpl:()=>KS,expm1Impl:()=>jS,floorDivImpl:()=>YS,floorImpl:()=>XS,gatherNdImpl:()=>Tf,gatherV2Impl:()=>_f,greaterEqualImpl:()=>ZS,greaterImpl:()=>QS,lessEqualImpl:()=>eI,lessImpl:()=>JS,linSpaceImpl:()=>Ef,logImpl:()=>tI,maxImpl:()=>$f,maximumImpl:()=>rI,minimumImpl:()=>oI,multiplyImpl:()=>zl,negImpl:()=>nI,notEqualImpl:()=>sI,prodImpl:()=>aI,raggedGatherImpl:()=>Rf,raggedRangeImpl:()=>Df,raggedTensorToTensorImpl:()=>Af,rangeImpl:()=>up,rsqrtImpl:()=>uI,scatterImpl:()=>zs,sigmoidImpl:()=>R_,simpleAbsImpl:()=>BS,sliceImpl:()=>pp,sparseFillEmptyRowsImpl:()=>Ff,sparseReshapeImpl:()=>Pf,sparseSegmentReductionImpl:()=>Sc,sqrtImpl:()=>F_,squaredDifferenceImpl:()=>cI,staticRegexReplaceImpl:()=>lI,stridedSliceImpl:()=>Of,stringNGramsImpl:()=>cp,stringSplitImpl:()=>lp,stringToHashBucketFastImpl:()=>mp,subImpl:()=>dI,tileImpl:()=>Mf,topKImpl:()=>Lf,transposeImpl:()=>wc,uniqueImpl:()=>dp});var W8=o=>{let{x:i}=o.inputs,s=o.backend;Q$1(i,"abs");let _=new Float32Array(y.sizeFromShape(i.shape));return _=BS(s.data.get(i.dataId).values),s.makeOutput(_,i.shape,i.dtype)},t_={kernelName:Xs,backendName:"cpu",kernelFunc:W8};function Ve(o){return(i,s,_,_e,ct)=>{let Mt=w.assertAndGetBroadcastShape(i,s),Ft=Mt.length,Ut=y.computeStrides(Mt),Xt=y.sizeFromShape(Mt),Kt=y.getTypedArrayFromDType(ct,Xt),nr=i.length,rr=s.length,or=y.computeStrides(i),hr=y.computeStrides(s),fr=w.getBroadcastDims(i,Mt),yr=w.getBroadcastDims(s,Mt);if(fr.length+yr.length===0)for(let Lr=0;Lr<Kt.length;++Lr)Kt[Lr]=o(_[Lr%_.length],_e[Lr%_e.length]);else for(let Lr=0;Lr<Kt.length;++Lr){let Br=y.indexToLoc(Lr,Ft,Ut),Vr=Br.slice(-nr);fr.forEach(so=>Vr[so]=0);let Wr=y.locToIndex(Vr,nr,or),ro=Br.slice(-rr);yr.forEach(so=>ro[so]=0);let no=y.locToIndex(ro,rr,hr);Kt[Lr]=o(_[Wr],_e[no])}return[Kt,Mt]}}function Ht(o){let{inputs:i,backend:s}=o,{real:_,imag:_e}=i,ct=s.data.get(_.dataId).values,Mt=s.data.get(_e.dataId).values,Ft=s.makeTensorInfo(_.shape,"complex64");return s.data.get(Ft.dataId).complexTensorInfos={real:s.makeTensorInfo(_.shape,"float32",ct),imag:s.makeTensorInfo(_e.shape,"float32",Mt)},Ft}var r_={kernelName:Di,backendName:"cpu",kernelFunc:Ht};function yc(o,i,s="float32"){if(s==="complex64")return Ht({inputs:{real:yc(o,i,"float32"),imag:yc(o,i,"float32")},backend:o});let _=y.makeZerosTypedArray(y.sizeFromShape(i),s);return o.makeTensorInfo(i,s,_)}function lr(o){let{inputs:i,backend:s}=o,{x:_}=i;return s.incRef(_.dataId),{dataId:_.dataId,shape:_.shape,dtype:_.dtype}}var o_={kernelName:Co,backendName:"cpu",kernelFunc:lr};function $o(o){let{inputs:i,backend:s}=o,{input:_}=i,_e=s.data.get(_.dataId).complexTensorInfos.real,ct=s.data.get(_e.dataId).values;return s.makeTensorInfo(_e.shape,_e.dtype,ct)}var n_={kernelName:Hi,backendName:"cpu",kernelFunc:$o};function zS(o,i,s,_){if(_==="int32")return[i,"int32",Int32Array.from(o)];if(_==="bool"){let _e=y.toTypedArray([0],s),[ct,Mt]=Ve((Ft,Ut)=>Ft!==Ut?1:0)(i,[],o,_e,"bool");return[Mt,"bool",ct]}throw new Error(`Error in Cast: failed to cast ${s} to ${_}`)}function Ro(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{dtype:ct}=_;if(ct==="complex64"){if(_e.dtype==="complex64")return lr({inputs:{x:_e},backend:s});let Kt=yc(s,_e.shape,_e.dtype),nr=Ro({inputs:{x:_e},backend:s,attrs:{dtype:"float32"}}),rr=Ht({inputs:{real:nr,imag:Kt},backend:s});return s.disposeIntermediateTensorInfo(Kt),s.disposeIntermediateTensorInfo(nr),rr}if(_e.dtype==="complex64"){let Kt=$o({inputs:{input:_e},backend:s}),nr=Ro({inputs:{x:Kt},backend:s,attrs:{dtype:ct}});return s.disposeIntermediateTensorInfo(Kt),nr}if(!y.hasEncodingLoss(_e.dtype,ct)){let Kt=lr({inputs:{x:_e},backend:s});return{dataId:Kt.dataId,shape:Kt.shape,dtype:ct}}let Mt=s.data.get(_e.dataId).values,[Ft,Ut,Xt]=zS(Mt,_e.shape,_e.dtype,ct);return s.makeTensorInfo(Ft,Ut,Xt)}var s_={kernelName:yo,backendName:"cpu",kernelFunc:Ro};function Ye(o,i,s,_){return s==null?({inputs:_e,backend:ct})=>{let{a:Mt,b:Ft}=_e,Ut=ct;Q$1([Mt,Ft],o);let Xt=Ut.data.get(Mt.dataId).values,Kt=Ut.data.get(Ft.dataId).values,nr=Mt.dtype==="string"?w.fromUint8ToStringArray(Xt):Xt,rr=Mt.dtype==="string"?w.fromUint8ToStringArray(Kt):Kt,or=_||Mt.dtype,[hr,fr]=i(Mt.shape,Ft.shape,nr,rr,or);return Ut.makeTensorInfo(fr,or,hr)}:({inputs:_e,backend:ct})=>{let{a:Mt,b:Ft}=_e,Ut=ct;if(Mt.dtype==="complex64"||Ft.dtype==="complex64"){let Xt=Ro({inputs:{x:Mt},backend:Ut,attrs:{dtype:"complex64"}}),Kt=Ut.data.get(Xt.dataId),nr=Kt.complexTensorInfos.real,rr=Kt.complexTensorInfos.imag,or=Ut.data.get(nr.dataId).values,hr=Ut.data.get(rr.dataId).values,fr=Ro({inputs:{x:Ft},backend:Ut,attrs:{dtype:"complex64"}}),yr=Ut.data.get(fr.dataId),Lr=yr.complexTensorInfos.real,Br=yr.complexTensorInfos.imag,Vr=Ut.data.get(Lr.dataId).values,Wr=Ut.data.get(Br.dataId).values,[ro,no,so]=s(Mt.shape,Ft.shape,or,hr,Vr,Wr),ko=Ut.makeTensorInfo(so,"float32",ro),To=Ut.makeTensorInfo(so,"float32",no),oo=Ht({inputs:{real:ko,imag:To},backend:Ut});return Ut.disposeIntermediateTensorInfo(Xt),Ut.disposeIntermediateTensorInfo(fr),Ut.disposeIntermediateTensorInfo(ko),Ut.disposeIntermediateTensorInfo(To),oo}{let Xt=Ut.data.get(Mt.dataId).values,Kt=Ut.data.get(Ft.dataId).values,nr=_||Mt.dtype,[rr,or]=i(Mt.shape,Ft.shape,Xt,Kt,nr);return Ut.makeTensorInfo(or,nr,rr)}}}function bc(o){return(i,s,_,_e,ct,Mt)=>{let Ft=w.assertAndGetBroadcastShape(i,s),Ut=y.sizeFromShape(Ft),Xt=Ft.length,Kt=y.computeStrides(Ft),nr=y.getTypedArrayFromDType("float32",Ut),rr=y.getTypedArrayFromDType("float32",Ut),or=w.getBroadcastDims(i,Ft),hr=w.getBroadcastDims(s,Ft),fr=w.mergeRealAndImagArrays(_,_e),yr=w.mergeRealAndImagArrays(ct,Mt),Lr=i.length,Br=y.computeStrides(i),Vr=s.length,Wr=y.computeStrides(s);if(or.length+hr.length===0)for(let ro=0;ro<nr.length;ro++){let no=ro%fr.length,so=ro%yr.length,ko=o(fr[2*no],fr[2*no+1],yr[2*so],yr[2*so+1]);nr[ro]=ko.real,rr[ro]=ko.imag}else for(let ro=0;ro<nr.length;ro++){let no=y.indexToLoc(ro,Xt,Kt),so=no.slice(-Lr);or.forEach(As=>so[As]=0);let ko=y.locToIndex(so,Lr,Br),To=no.slice(-Vr);hr.forEach(As=>To[As]=0);let oo=y.locToIndex(To,Vr,Wr),No=o(fr[2*ko],fr[2*ko+1],yr[2*oo],yr[2*oo+1]);nr[ro]=No.real,rr[ro]=No.imag}return[nr,rr,Ft]}}var VS=Ve((o,i)=>o+i),U8=bc((o,i,s,_)=>({real:o+s,imag:i+_})),Pa=Ye(uo,VS,U8),a_={kernelName:uo,backendName:"cpu",kernelFunc:Pa};function Cc(o,i,s,_,_e){let ct=y.sizeFromShape(_),Mt=y.makeZerosTypedArray(_e,s);for(let Ft=0;Ft<o.length;Ft++){let Ut=o[Ft];if(Ut<0)throw new Error("Input x must be non-negative!");Ut>=_e||(Mt[Ut]+=ct>0?i[Ft]:1)}return Mt}function Nf(o,i,s,_=!1){let _e=o.shape[0],ct=o.shape[1],Mt=me$1([_e,s],i.dtype);for(let Ft=0;Ft<_e;Ft++)for(let Ut=0;Ut<ct;Ut++){let Xt=o.get(Ft,Ut);if(Xt<0)throw new Error("Input x must be non-negative!");Xt>=s||(_?Mt.set(1,Ft,Xt):i.size>0?Mt.set(Mt.get(Ft,Xt)+i.get(Ft,Ut),Ft,Xt):Mt.set(Mt.get(Ft,Xt)+1,Ft,Xt))}return Mt}var WS=Ve((o,i)=>o&i),G8=Ye(qa,WS),i_={kernelName:qa,backendName:"cpu",kernelFunc:G8};function jt$2(o){return(i,s,_)=>{let _e=y.getArrayFromDType(s,i.length);for(let ct=0;ct<i.length;++ct)_e[ct]=o(i[ct],_);return _e}}function Ie$1(o,i,s){return Ar(o,jt$2(i),s)}function Ar(o,i,s){return({inputs:_,attrs:_e,backend:ct})=>{let{x:Mt}=_;Q$1(Mt,o);let Ft,Ut=ct,Xt=Ut.data.get(Mt.dataId).values;if(Mt.dtype==="string"){if(!Array.isArray(Xt))throw new Error("String tensor's value was not an instance of Array");Ft=w.fromUint8ToStringArray(Xt)}else Ft=Xt;let Kt=s||Mt.dtype,nr=i(Ft,Kt,_e);return Ut.makeTensorInfo(Mt.shape,Kt,nr)}}var US=jt$2(o=>Math.ceil(o)),H8=Ar(en,US),u_={kernelName:en,backendName:"cpu",kernelFunc:H8};function ap(o,i,s,_){let _e=y.getArrayFromDType(s,y.sizeFromShape(i));if(_&&s!=="string"){let ct=0;o.forEach(Mt=>{let Ft=y.sizeFromShape(Mt.shape);_e.set(Mt.vals,ct),ct+=Ft})}else{let ct=0;o.forEach(Mt=>{let Ft=s==="string"?w.fromUint8ToStringArray(Mt.vals):Mt.vals,Ut=0;for(let Xt=0;Xt<Mt.shape[0];++Xt){let Kt=Xt*i[1]+ct;for(let nr=0;nr<Mt.shape[1];++nr)_e[Kt+nr]=Ft[Ut++]}ct+=Mt.shape[1]})}return _e}var GS=Ve((o,i)=>o===i?1:0),HS=Ye(xn,GS,null,"bool"),p_={kernelName:xn,backendName:"cpu",kernelFunc:HS},KS=jt$2(o=>Math.exp(o)),qS=Ar(yn,KS,"float32"),c_={kernelName:yn,backendName:"cpu",kernelFunc:qS},jS=jt$2(o=>Math.expm1(o)),K8=Ar(bn,jS),l_={kernelName:bn,backendName:"cpu",kernelFunc:K8},XS=jt$2(o=>Math.floor(o)),q8=Ar(wn,XS),m_={kernelName:wn,backendName:"cpu",kernelFunc:q8},YS=Ve((o,i)=>Math.floor(o/i)),j8=Ye(Sn,YS,null,"int32"),d_={kernelName:Sn,backendName:"cpu",kernelFunc:j8};function Tf(o,i,s,_,_e,ct,Mt,Ft,Ut){let Xt=me$1([_,ct],s);for(let Kt=0;Kt<_;Kt++){let nr=[],rr=0;for(let or=0;or<_e;or++){let hr=o[Kt*_e+or];rr+=hr*Mt[or],nr.push(hr)}if(rr<0||rr>=Ut/ct)throw new Error(`Invalid indices: ${nr} does not index into ${Ft}`);for(let or=0;or<ct;or++)Xt.values[Kt*ct+or]=i.get(...i.indexToLoc(rr*ct+or))}return Xt}function _f(o,i,s){let _=me$1(s,o.dtype);for(let _e=0;_e<_.size;++_e){let ct=_.indexToLoc(_e).slice(),Mt=ct[0],Ft=ct[2],Ut=i.locToIndex([Mt,Ft]);ct[2]=i.values[Ut];let Xt=o.locToIndex(ct);0<=Xt&&Xt<o.values.length&&(_.values[_e]=o.values[Xt])}return _}var QS=Ve((o,i)=>o>i?1:0),X8=Ye(kn,QS,null,"bool"),f_={kernelName:kn,backendName:"cpu",kernelFunc:X8},ZS=Ve((o,i)=>o>=i?1:0),Y8=Ye(Nn,ZS,null,"bool"),h_={kernelName:Nn,backendName:"cpu",kernelFunc:Y8},JS=Ve((o,i)=>o<i?1:0),Q8=Ye(Rn,JS,null,"bool"),g_={kernelName:Rn,backendName:"cpu",kernelFunc:Q8},eI=Ve((o,i)=>o<=i?1:0),Z8=Ye(Dn,eI,null,"bool"),x_={kernelName:Dn,backendName:"cpu",kernelFunc:Z8};function Ef(o,i,s){let _=(i-o)/(s-1),_e=y.makeZerosTypedArray(s,"float32");_e[0]=o;for(let ct=1;ct<_e.length;ct++)_e[ct]=_e[ct-1]+_;return _e}var tI=jt$2(o=>Math.log(o)),J8=Ar(Fn,tI),y_={kernelName:Fn,backendName:"cpu",kernelFunc:J8};function $f(o,i,s,_){let _e=y.getTypedArrayFromDType(_,y.sizeFromShape(s));for(let ct=0;ct<_e.length;++ct){let Mt=ct*i,Ft=o[Mt];for(let Ut=0;Ut<i;++Ut){let Xt=o[Mt+Ut];(Number.isNaN(Xt)||Xt>Ft)&&(Ft=Xt)}_e[ct]=Ft}return _e}var rI=Ve((o,i)=>Math.max(o,i)),eY=Ye(Vn,rI),b_={kernelName:Vn,backendName:"cpu",kernelFunc:eY},oI=Ve((o,i)=>Math.min(o,i)),tY=Ye(Hn,oI),C_={kernelName:Hn,backendName:"cpu",kernelFunc:tY},zl=Ve((o,i)=>o*i),rY=bc((o,i,s,_)=>({real:o*s-i*_,imag:o*_+i*s})),ip=Ye(Xn,zl,rY),w_={kernelName:Xn,backendName:"cpu",kernelFunc:ip};function nI(o,i,s){let _=y.createScalarValue(-1,s);return zl([],i,_,o,s)}function oY(o){let{inputs:i,backend:s}=o,{x:_}=i;Q$1(_,"neg");let _e=s.data.get(_.dataId).values,[ct,Mt]=nI(_e,_.shape,_.dtype);return s.makeTensorInfo(Mt,_.dtype,ct)}var S_={kernelName:pa,backendName:"cpu",kernelFunc:oY},sI=Ve((o,i)=>o!==i?1:0),nY=Ye(Yn,sI,null,"bool"),I_={kernelName:Yn,backendName:"cpu",kernelFunc:nY};function wc(o,i,s,_,_e){let ct=i.length,Mt=y.sizeFromShape(i),Ft=y.computeStrides(i),Ut=y.computeStrides(_e),Xt=y.getTypedArrayFromDType(s,y.sizeFromShape(_e));for(let Kt=0;Kt<Mt;++Kt){let nr=y.indexToLoc(Kt,ct,Ft),rr=new Array(nr.length);for(let or=0;or<rr.length;or++)rr[or]=nr[_[or]];Xt[y.locToIndex(rr,ct,Ut)]=o[Kt]}return Xt}function St$2(o){let{inputs:i,attrs:s,backend:_}=o,{x:_e}=i,{perm:ct}=s;Q$1(_e,"transpose");let Mt=_e.shape.length,Ft=new Array(Mt);for(let Xt=0;Xt<Ft.length;Xt++)Ft[Xt]=_e.shape[ct[Xt]];let Ut=wc(_.data.get(_e.dataId).values,_e.shape,_e.dtype,ct,Ft);return{dataId:_.write(Ut,Ft,_e.dtype),shape:Ft,dtype:_e.dtype}}var v_={kernelName:co,backendName:"cpu",kernelFunc:St$2};function aI(o,i,s,_){let[_e,ct]=w.computeOutAndReduceShapes(o,_),Mt=dt(i,"int32"),Ft=y.makeZerosTypedArray(y.sizeFromShape(_e),Mt),Ut=y.sizeFromShape(ct);for(let Xt=0;Xt<Ft.length;++Xt){let Kt=Xt*Ut,nr=1;for(let rr=0;rr<Ut;++rr)nr*=s[Kt+rr];Ft[Xt]=nr}return{outVals:Ft,outShape:_e,outDtype:Mt}}function sY(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{axis:ct,keepDims:Mt}=_;Q$1(_e,"prod");let Ft=_e.shape.length,Ut=y.parseAxisParam(ct,_e.shape),Xt=w.getAxesPermutation(Ut,Ft),Kt=Ut,nr=_e,rr=[];Xt!=null&&(nr=St$2({inputs:{x:_e},backend:s,attrs:{perm:Xt}}),rr.push(nr),Kt=w.getInnerMostAxes(Kt.length,Ft));let or=s.data.get(nr.dataId).values,{outVals:hr,outShape:fr,outDtype:yr}=aI(nr.shape,nr.dtype,or,Kt),Lr=fr;return Mt&&(Lr=w.expandShapeToKeepDim(fr,Ut)),rr.forEach(Br=>s.disposeIntermediateTensorInfo(Br)),s.makeTensorInfo(Lr,yr,hr)}var k_={kernelName:os,backendName:"cpu",kernelFunc:sY};function aY(o,i,s){o.forEach((_,_e)=>{if(_<0||_>=s){let ct=y.indexToLoc(_e,i.length,y.computeStrides(i)).join(",");throw new Error(`indices[${ct}] = ${_} is not in [0, ${s})`)}})}function iY(o,i){for(let s=0;s<o.length;++s){let _=o[s],_e=s===o.length-1?i:o[s+1].length;if(_.length===0)throw new Error("Ragged splits may not be empty");if(_[0]<0)throw new Error("Ragged splits must be non-negative");if(_[_.length-1]>_e)throw new Error("Ragged splits must not point past values");for(let ct=1;ct<_.length;++ct)if(_[ct-1]>_[ct])throw new Error("Ragged splits must be sorted in ascending order")}}function uY(o,i,s,_){let _e=[],ct=0,Mt=i.length-1+s.length,Ft=new Array(Mt).fill(null).map(()=>[0]);iY(s,_);let Ut=1;for(let Xt=0;Xt<i.length-1;++Xt){Ut*=i[Xt];let Kt=i[Xt+1];for(let nr=1;nr<Ut+1;++nr)Ft[Xt].push(nr*Kt)}for(let Xt=0;Xt<o.length;++Xt){let Kt=o[Xt],nr=o[Xt]+1;for(let rr=0;rr<s.length;++rr){let or=s[rr],hr=rr+i.length-1;if(hr>=0){let fr=Ft[hr],yr=fr[fr.length-1]-or[Kt];for(let Lr=Kt;Lr<nr;++Lr)Ft[hr].push(or[Lr+1]+yr)}Kt=or[Kt],nr=or[nr]}nr!==Kt&&(_e.push([Kt,nr]),ct+=nr-Kt)}return{outSplits:Ft,valueSlices:_e,numValues:ct}}function pY(o){let i=[];for(let s=0;s<o.length;++s){let _=o[s].length,_e=y.getArrayFromDType("int32",_);i.push(_e),o[s].forEach((ct,Mt)=>_e[Mt]=ct)}return i}function N_(o,i){let s=o.slice(0,i);for(;s.length<i;)s.push(1);for(let _=i;_<o.length;_++)s[i-1]*=o[_];return s}function cY(o,i,s,_,_e,ct){let Mt=N_(i,2)[1],Ft=N_(ct,2)[1],Ut=0;for(let Xt of s)for(let Kt=Xt[0];Kt<Xt[1];++Kt){for(let nr=0;nr<_;++nr)_e[Ut*Ft+nr]=o[Kt*Mt+nr];++Ut}}function lY(o,i,s,_,_e){let ct=i.slice();ct[0]=_e;let Mt=y.getArrayFromDType(s,y.sizeFromShape(ct)),Ft=o.length;return cY(o,i,_,Ft===0?0:Ft/i[0],Mt,ct),[Mt,ct]}function Rf(o,i,s,_,_e,ct,Mt,Ft){if(o.length===0)throw new Error("paramsNestedSplits must be non empty");if(i[0].length===0)throw new Error("Split tensors must not be scalars");if(aY(ct,Mt,i[0][0]-1),_.length===0)throw new Error("params.rank must be nonzero");let Ut=_[0],{outSplits:Xt,valueSlices:Kt,numValues:nr}=uY(ct,Mt,o,Ut),rr=pY(Xt),or=lY(s,_,_e,Kt,nr);return[rr,or[0],or[1]]}var T_=2147483647;function Df(o,i,s,_,_e,ct,Mt){if(i.length>1)throw new Error("starts must be a scalar or vector");if(_e.length>1)throw new Error("limits must be a scalar or vector");if(Mt.length>1)throw new Error("deltas must be a scalar or vector");let Ft=i.length===0,Ut=_e.length===0,Xt=Mt.length===0,Kt=[];Ft||Kt.push(i[0]),Ut||Kt.push(_e[0]),Xt||Kt.push(Mt[0]);for(let yr=1;yr<Kt.length;++yr)if(Kt[yr]!==Kt[yr-1])throw new Error("starts, limits, and deltas must have the same shape");let nr=Kt.length===0?1:Kt[0],rr=y.getArrayFromDType("int32",nr+1);rr[0]=0;for(let yr=0;yr<nr;++yr){let Lr,Br=Ft?o[0]:o[yr],Vr=Ut?_[0]:_[yr],Wr=Xt?ct[0]:ct[yr];if(Wr===0)throw new Error("Requires delta != 0");if(Wr>0&&Vr<Br||Wr<0&&Vr>Br)Lr=0;else if(Lr=Math.ceil(Math.abs((Vr-Br)/Wr)),Lr>T_)throw new Error(`Requires ((limit - start) / delta) <= ${T_}`);rr[yr+1]=rr[yr]+Lr}let or=rr[nr],hr=y.getArrayFromDType(s,or),fr=0;for(let yr=0;yr<nr;++yr){let Lr=rr[yr+1]-rr[yr],Br=Ft?o[0]:o[yr],Vr=Xt?ct[0]:ct[yr];for(let Wr=0;Wr<Lr;++Wr)hr[fr++]=Br,Br+=Vr}return[rr,hr]}var Do=w.RowPartitionType,iI=class Mme{constructor(i,s,_,_e,ct,Mt,Ft,Ut,Xt,Kt){this.shape=i,this.shapeShape=s,this.values=_,this.valuesShape=_e,this.valuesDType=ct,this.defaultValue=Mt,this.defaultValueShape=Ft,this.rowPartitionValues=Ut,this.rowPartitionValuesShapes=Xt,this.rowPartitionTypes=w.getRowPartitionTypesHelper(Kt),this.raggedRank=w.getRaggedRank(this.rowPartitionTypes)}getRowPartitionTypeByDimension(i){return this.rowPartitionTypes[0]===Do.FIRST_DIM_SIZE?this.rowPartitionTypes[i+1]:this.rowPartitionTypes[i]}getRowPartitionTensor(i){return this.rowPartitionTypes[0]===Do.FIRST_DIM_SIZE?this.rowPartitionValues[i+1]:this.rowPartitionValues[i]}getMaxWidth(i){let s=this.getRowPartitionTensor(i-1);switch(this.getRowPartitionTypeByDimension(i-1)){case Do.VALUE_ROWIDS:return Mme.getMaxWidthValueRowID(s);case Do.ROW_SPLITS:return Mme.getMaxWidthRowSplit(s);default:throw new Error(`Cannot handle partition type ${Do[this.getRowPartitionTypeByDimension(i-1)]}`)}}static getMaxWidthRowSplit(i){let s=i.length;if(s===0||s===1)return 0;let _=0;for(let _e=0;_e<s-1;++_e){let ct=i[_e+1]-i[_e];ct>_&&(_=ct)}return _}static getMaxWidthValueRowID(i){let s=i.length;if(s===0)return 0;let _=0,_e=i[0],ct=0;for(let Mt=1;Mt<s;++Mt){let Ft=i[Mt];Ft!==_e&&(_e=Ft,ct=Math.max(Mt-_,ct),_=Mt)}return Math.max(s-_,ct)}tensorShapeFromTensor(i,s,_=!0){if(s.length===0){if(i[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return E_(i,_)}calculateOutputSize(i){let s=this.valuesShape,_=this.defaultValueShape;w.validateDefaultValueShape(_,s);let _e=this.tensorShapeFromTensor(this.shape,this.shapeShape),ct=w.combineRaggedTensorToTensorShapes(this.raggedRank,_e,s);ct[0]<0&&(ct[0]=i);for(let Mt=1;Mt<=this.raggedRank;++Mt)ct[Mt]<0&&(ct[Mt]=this.getMaxWidth(Mt));return ct}calculateFirstParentOutputIndex(i,s,_){let _e=Math.min(i,_),ct=[],Mt=0;for(let Ft=0;Ft<_e;++Ft,Mt+=s)ct.push(Mt);for(let Ft=_e;Ft<i;++Ft)ct.push(-1);return y.assert(ct.length===i,()=>"Final length of result must be equal to firstDimension."),ct}calculateOutputIndexRowSplit(i,s,_,_e){let ct=i.length,Mt=[];for(let Ft=0;Ft<ct-1;++Ft){let Ut=i[Ft+1]-i[Ft],Xt=Math.min(_e,Ut),Kt=s[Ft];Kt===-1&&(Xt=0);for(let nr=0;nr<Xt;++nr)Mt.push(Kt),Kt+=_;for(let nr=0;nr<Ut-Xt;++nr)Mt.push(-1)}if(ct>0&&Mt.length!==i[ct-1])throw new Error("Invalid row split size.");return Mt}calculateOutputIndexValueRowID(i,s,_,_e){let ct=i.length,Mt=[];if(ct===0)return[];let Ft=0,Ut=i[0];if(Ut>=s.length)throw new Error(`Got currentValueRowId=${Ut}, which is not less than ${s.length}`);let Xt=s[Ut];Mt.push(Xt);for(let Kt=1;Kt<ct;++Kt){let nr=i[Kt];if(nr===Ut)Xt>=0&&(++Ft,Ft<_e?Xt+=_:Xt=-1);else{if(Ft=0,Ut=nr,nr>=s.length)throw new Error(`Got nextValueRowId=${nr} which is not less than ${s.length}`);Xt=s[nr]}Mt.push(Xt)}if(Mt.length!==i.length)throw new Error("Invalid row ids.");return Mt}calculateOutputIndex(i,s,_,_e){let ct=this.getRowPartitionTensor(i),Mt=this.getRowPartitionTypeByDimension(i);switch(Mt){case Do.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(ct,s,_,_e);case Do.ROW_SPLITS:if(ct.length-1>s.length)throw new Error(`Row partition size is greater than output size: ${ct.length-1} > ${s.length}`);return this.calculateOutputIndexRowSplit(ct,s,_,_e);default:throw new Error(`Unsupported partition type: ${Do[Mt]}`)}}getFirstDimensionSize(){let i=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");let s=this.rowPartitionTypes[0];switch(s){case Do.FIRST_DIM_SIZE:return i[0];case Do.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case Do.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${Do[s]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");let i=this.getFirstDimensionSize(),s=this.calculateOutputSize(i),_=new Array(this.raggedRank+1);_[_.length-1]=1;for(let Mt=_.length-2;Mt>=0;--Mt)_[Mt]=_[Mt+1]*s[Mt+1];let _e=E_(s,!1),ct=y.getArrayFromDType(this.valuesDType,y.sizeFromShape(_e));if(_[0]*s[0]>0){let Mt=this.calculateFirstParentOutputIndex(i,_[0],s[0]);for(let Ft=1;Ft<=this.raggedRank;++Ft)Mt=this.calculateOutputIndex(Ft-1,Mt,_[Ft],s[Ft]);this.setOutput(this.raggedRank,Mt,ct,_e)}return[_e,ct]}setOutput(i,s,_,_e){if(_.length===0)return;let ct=this.values,Mt=_,Ft=_e.slice();Ft=Ft.slice(i+1);let Ut=y.sizeFromShape(Ft),Xt=s.length,Kt=this.defaultValue;if(Kt.length!==Ut&&Kt.length!==1){let hr=this.defaultValueShape;De$1(()=>{let fr=W$1(Kt,hr);Kt=su(fr,Ft).dataSync()})}let nr=0,rr=0,or=0;for(let hr=0;hr<=Xt;++hr){let fr=hr<Xt?s[hr]:-1;if(fr!==or){if(rr<or){let yr=ct.subarray(nr*Ut);__(Mt.subarray(rr*Ut),yr,(or-rr)*Ut)}if(hr>=Xt){let yr=_.length;fr=Math.floor(yr/Ut)}if(fr>or)if(this.defaultValue.length===1)Mt.subarray(or*Ut,fr*Ut).fill(this.defaultValue[0]),or=fr;else for(;fr>or;)__(Mt.slice(or*Ut),Kt,Ut),++or;fr<0?(nr=hr+1,rr=or):(nr=hr,rr=or,or=rr+1)}else++or}}};function __(o,i,s){for(let _=0;_<s;_++)o[_]=i[_]}function E_(o,i){let s=[];for(let _ of o){if(_<0){if(!i)throw new Error(`Dimension ${_} must be >= 0`);if(_<-1)throw new Error(`Dimension ${_} must be >= -1`);_=-1}s.push(_)}return s}function Af(o,i,s,_,_e,ct,Mt,Ft,Ut,Xt){return new iI(o,i,s,_,_e,ct,Mt,Ft,Ut,Xt).compute()}function up(o,i,s,_){if(o===i||o<i&&s<0||i<o&&s>1)return y.makeZerosTypedArray(0,_);let _e=Math.abs(Math.ceil((i-o)/s)),ct=y.makeZerosTypedArray(_e,_);i<o&&s===1&&(s=-1),ct[0]=o;for(let Mt=1;Mt<ct.length;Mt++)ct[Mt]=ct[Mt-1]+s;return ct}var uI=jt$2(o=>1/Math.sqrt(o)),mY=Ar(ls,uI),$_={kernelName:ls,backendName:"cpu",kernelFunc:mY};function zs(o,i,s,_,_e,ct,Mt,Ft,Ut,Xt){let Kt=[_/_e,_e],nr=o.values,rr=i.values;if(_===0)return me$1(s,i.dtype);let or=Ut instanceof tt?Ut:me$1(Kt,i.dtype);typeof Ut=="string"||typeof Ut=="number"?or.values.fill(Ut):typeof Ut=="boolean"&&or.values.fill(+Ut);for(let hr=0;hr<ct;hr++){let fr=[],yr=0;for(let Lr=0;Lr<Mt;Lr++){let Br=nr[hr*Mt+Lr];fr.push(Br),yr+=Br*Ft[Lr]}if(yr<0||yr>=_/_e)throw new Error(`Invalid indices: ${fr} does not index into ${s}`);for(let Lr=0;Lr<_e;Lr++)Xt?or.values[yr*_e+Lr]+=rr[hr*_e+Lr]:or.values[yr*_e+Lr]=i.rank===0?rr[0]:rr[hr*_e+Lr]}return or}var R_=jt$2(o=>1/(1+Math.exp(-o))),pI=Ie$1(bs,o=>1/(1+Math.exp(-o))),D_={kernelName:bs,backendName:"cpu",kernelFunc:pI};function pp(o,i,s,_,_e){let ct=pt.isSliceContinous(_,i,s),Mt=y.sizeFromShape(s),Ft=y.computeStrides(_);if(ct){let Kt=pt.computeFlatOffset(i,Ft);return _e==="string"?o.slice(Kt,Kt+Mt):o.subarray(Kt,Kt+Mt)}let Ut=me$1(_,_e,_e==="string"?w.fromUint8ToStringArray(o):o),Xt=me$1(s,_e);for(let Kt=0;Kt<Xt.size;++Kt){let nr=Xt.indexToLoc(Kt),rr=nr.map((or,hr)=>or+i[hr]);Xt.set(Ut.get(...rr),...nr)}return _e==="string"?w.fromStringArrayToUint8(Xt.values):Xt.values}function Ao(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{begin:ct,size:Mt}=_;Q$1(_e,"slice");let[Ft,Ut]=pt.parseSliceParams(_e,ct,Mt);pt.assertParamsValid(_e,Ft,Ut);let Xt=pp(s.data.get(_e.dataId).values,Ft,Ut,_e.shape,_e.dtype);return s.makeTensorInfo(Ut,_e.dtype,Xt)}var A_={kernelName:ha,backendName:"cpu",kernelFunc:Ao};function Ff(o,i,s,_,_e,ct,Mt){let Ft=i[0],Ut=ct[0],Xt=new Array(Ut),Kt=new Array(Ft),nr=i[1];if(Ut===0){if(Ft!==0)throw new Error(w.getSparseFillEmptyRowsIndicesDenseShapeMismatch(Ft));return[y.getArrayFromDType(s,0),[0,nr],y.getArrayFromDType(_e,0),Xt,Kt]}let rr=!0,or=0,hr=new Array(Ut).fill(0);for(let yr=0;yr<Ft;++yr){let Lr=o[yr*nr];if(Lr<0)throw new Error(w.getSparseFillEmptyRowsNegativeIndexErrorMessage(yr,Lr));if(Lr>=Ut)throw new Error(w.getSparseFillEmptyRowsOutOfRangeIndexErrorMessage(yr,Lr,Ut));++hr[Lr],rr=rr&&Lr>=or,or=Lr}let fr=!0;for(let yr=0;yr<Ut;++yr){let Lr=hr[yr]===0;Xt[yr]=Lr,fr=fr&&!Lr,hr[yr]=Math.max(hr[yr],1),yr>0&&(hr[yr]+=hr[yr-1])}if(fr&&rr){let yr=o,Lr=_;for(let Br=0;Br<Ft;++Br)Kt[Br]=Br;return[yr,[Ft,nr],Lr,Xt,Kt]}{let yr=hr[Ut-1],Lr=y.getArrayFromDType(s,yr*nr),Br=y.getArrayFromDType(_e,yr),Vr=new Array(Ut).fill(0);for(let Wr=0;Wr<Ft;++Wr){let ro=o[Wr*nr],no=Vr[ro],so=(ro===0?0:hr[ro-1])+no;Vr[ro]++;for(let ko=0;ko<nr;++ko)Lr[so*nr+ko]=o[Wr*nr+ko];Br[so]=_[Wr],Kt[Wr]=so}for(let Wr=0;Wr<Ut;++Wr)if(Vr[Wr]===0){let ro=Wr===0?0:hr[Wr-1];Lr[ro*nr+0]=Wr;for(let no=1;no<nr;++no)Lr[ro*nr+no]=0;Br[ro]=Mt}return[Lr,[yr,nr],Br,Xt,Kt]}}function Pf(o,i,s,_,_e){let ct=y.sizeFromShape(_),Mt=i[0],Ft=_e.length,Ut=[],Xt=1,Kt=-1;for(let fr=0;fr<Ft;++fr){let yr=_e[fr];if(yr===-1){if(Kt!==-1)throw new Error(w.getSparseReshapeMultipleNegativeOneOutputDimErrorMessage(Kt,fr));Kt=fr,Ut.push(1)}else{if(yr<0)throw new Error(w.getSparseReshapeNegativeOutputDimErrorMessage(fr,yr));Xt*=yr,Ut.push(yr)}}if(Kt!==-1){if(Xt<=0)throw new Error(w.getSparseReshapeEmptyTensorZeroOutputDimErrorMessage());let fr=Math.trunc(ct/Xt);if(Xt*fr!==ct)throw new Error(w.getSparseReshapeInputOutputMultipleErrorMessage(_,Ut));Ut[Kt]=fr}if(y.sizeFromShape(Ut)!==ct)throw new Error(w.getSparseReshapeInputOutputMismatchErrorMessage(_,Ut));let nr=_.length,rr=[];if(nr>0){rr[nr-1]=1;for(let fr=nr-2;fr>=0;--fr)rr[fr]=rr[fr+1]*_[fr+1]}let or=[];if(Ft>0){or[Ft-1]=1;for(let fr=Ft-2;fr>=0;--fr)or[fr]=or[fr+1]*Ut[fr+1]}let hr=y.getArrayFromDType(s,Mt*Ft);for(let fr=0;fr<Mt;++fr){let yr=0;for(let Lr=0;Lr<nr;++Lr)yr+=o[fr*nr+Lr]*rr[Lr];for(let Lr=0;Lr<Ft;++Lr)hr[fr*Ft+Lr]=Math.trunc(yr/or[Lr]),yr%=or[Lr]}return[hr,[Mt,Ft],Ut]}function Sc(o,i,s,_,_e,ct=!1,Mt=0){let Ft=_.length,Ut=[i[0],o.length/i[0]],Xt=Ut[1],Kt=Ft>0?_e[Ft-1]+1:0;if(Kt<0)throw new Error(w.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());let nr=i.slice();nr[0]=Kt;let rr=nr.reduce((Br,Vr)=>Br*Vr,1),or=y.getArrayFromDType(s,rr);if(Ft===0)return Kt>0&&or.fill(Mt),[or,nr];if(Kt<=0)throw new Error(w.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());let hr=0,fr=1,yr=0,Lr=_e[hr];for(;;){let Br=0;if(fr<Ft){if(Br=_e[fr],Lr===Br){++fr;continue}if(Lr>=Br)throw new Error(w.getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage())}if(Lr<0||Lr>=Kt)throw new Error(w.getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage(Lr,Kt));Lr>yr&&or.fill(Mt,yr*Xt,Lr*Xt);for(let Vr=hr;Vr<fr;++Vr){let Wr=_[Vr];if(Wr<0||Wr>=Ut[0])throw new Error(w.getSparseSegmentReductionIndicesOutOfRangeErrorMessage(Vr,_[Vr],Ut[0]));for(let ro=0;ro<Xt;ro++)or[Lr*Xt+ro]+=o[Wr*Xt+ro]}if(ct)for(let Vr=0;Vr<Xt;Vr++)or[Lr*Xt+Vr]/=fr-hr;if(hr=fr,++fr,yr=Lr+1,Lr=Br,fr>Ft)break}return yr<Kt&&or.fill(Mt,yr*Xt,Kt*Xt),[or,nr]}var F_=jt$2(o=>Math.sqrt(o)),dY=Ie$1(ws,o=>Math.sqrt(o)),P_={kernelName:ws,backendName:"cpu",kernelFunc:dY},cI=Ve((o,i)=>{let s=o-i;return s*s}),fY=Ye(ks,cI),O_={kernelName:ks,backendName:"cpu",kernelFunc:fY},lI=jt$2((o,i)=>{let{pattern:s,replaceGlobal:_,rewrite:_e}=i;return o.replace(new RegExp(s,_?"g":""),_e)}),hY=Ar(Ru,lI),M_={kernelName:Ru,backendName:"cpu",kernelFunc:hY};function Of(o,i,s,_){let _e=me$1(o,i.dtype);for(let ct=0;ct<_e.size;ct++){let Mt=_e.indexToLoc(ct),Ft=new Array(Mt.length);for(let Ut=0;Ut<Ft.length;Ut++)Ft[Ut]=Mt[Ut]*s[Ut]+_[Ut];_e.set(i.get(...Ft),...Mt)}return _e}var mI=class{constructor(o,i,s,_,_e,ct){this.separator=y.encodeString(o),this.nGramWidths=i,this.leftPad=y.encodeString(s),this.rightPad=y.encodeString(_),this.padWidth=_e,this.preserveShort=ct}getPadWidth(o){return Math.min(this.padWidth<0?o-1:this.padWidth,o-1)}getNumNGrams(o,i){let s=this.getPadWidth(i);return Math.max(0,o+2*s-i+1)}createNGrams(o,i,s,_,_e,ct){for(let Mt=0;Mt<_e;++Mt){let Ft=this.getPadWidth(ct),Ut=Math.max(0,Ft-Mt),Xt=Math.max(0,Ft-(_e-(Mt+1))),Kt=ct-(Ut+Xt),nr=i+(Ut>0?0:Mt-Ft),rr=0;rr+=Ut*this.leftPad.length;for(let yr=0;yr<Kt;++yr)rr+=o[nr+yr].length;rr+=Xt*this.rightPad.length,rr+=(Ut+Xt+Kt-1)*this.separator.length,s[_+Mt]=new Uint8Array(rr);let or=s[_+Mt],hr=0,fr=yr=>yr.forEach(Lr=>or[hr++]=Lr);for(let yr=0;yr<Ut;++yr)fr(this.leftPad),fr(this.separator);for(let yr=0;yr<Kt-1;++yr)fr(o[nr+yr]),fr(this.separator);if(Kt>0){fr(o[nr+Kt-1]);for(let yr=0;yr<Xt;++yr)fr(this.separator),fr(this.rightPad)}else{for(let yr=0;yr<Xt-1;++yr)fr(this.rightPad),fr(this.separator);fr(this.rightPad)}}}compute(o,i){let s=o.length,_=i.length;if(_>0){let Ft=i[0];if(Ft!==0)throw new Error(`First split value must be 0, got ${Ft}`);for(let Ut=1;Ut<_;++Ut){let Xt=i[Ut]>=Ft;if(Xt=Xt&&i[Ut]<=s,!Xt)throw new Error(`Invalid split value ${i[Ut]}, must be in [${Ft}, ${s}]`);Ft=i[Ut]}if(Ft!==s)throw new Error(`Last split value must be data size. Expected ${s}, got ${Ft}`)}let _e=_-1,ct=y.getArrayFromDType("int32",_);if(s===0||_===0){let Ft=new Array(s);for(let Ut=0;Ut<=_e;++Ut)ct[Ut]=0;return[Ft,ct]}ct[0]=0;for(let Ft=1;Ft<=_e;++Ft){let Ut=i[Ft]-i[Ft-1],Xt=0;this.nGramWidths.forEach(Kt=>{Xt+=this.getNumNGrams(Ut,Kt)}),this.preserveShort&&Ut>0&&Xt===0&&(Xt=1),ct[Ft]=ct[Ft-1]+Xt}let Mt=new Array(ct[_e]);for(let Ft=0;Ft<_e;++Ft){let Ut=i[Ft],Xt=ct[Ft];if(this.nGramWidths.forEach(Kt=>{let nr=i[Ft+1]-i[Ft],rr=this.getNumNGrams(nr,Kt);this.createNGrams(o,Ut,Mt,Xt,rr,Kt),Xt+=rr}),this.preserveShort&&Xt===ct[Ft]){let Kt=i[Ft+1]-i[Ft];if(Kt===0)continue;let nr=Kt+2*this.padWidth;this.createNGrams(o,Ut,Mt,Xt,1,nr)}}return[Mt,ct]}};function cp(o,i,s,_,_e,ct,Mt,Ft){return new mI(s,_,_e,ct,Mt,Ft).compute(o,i)}function gY(o,i,s,_){if(!o.length)return;if(i.length===0){for(let ct=0;ct<o.length;++ct)_.push(o.subarray(ct,ct+1));return}if(i.length===1){let ct=i[0],Mt=o.indexOf(ct);for(;Mt!==-1;){let Ft=o.subarray(0,Mt);(!s||Ft.length!==0)&&_.push(Ft),Mt=(o=o.subarray(Mt+1)).indexOf(ct)}return void((!s||o.length!==0)&&_.push(o))}let _e=0;for(let ct=0;ct<o.length+1;ct++)if(ct===o.length||i.indexOf(o[ct])!==-1){let Mt=o.subarray(_e,ct);(!s||Mt.length!==0)&&_.push(Mt),_e=ct+1}}function lp(o,i,s){let _=o.length,_e=[],ct=0,Mt=0,Ft=new Array(_);for(let rr=0;rr<_;++rr){let or=_e.length;gY(o[rr],i,s,_e);let hr=_e.length-or;Ft[rr]=hr,ct+=hr,Mt=Math.max(Mt,hr)}let Ut=y.getArrayFromDType("int32",2*ct),Xt=new Array(ct),Kt=[_,Mt],nr=0;for(let rr=0;rr<_;++rr)for(let or=0;or<Ft[rr];++or)Ut[2*nr]=rr,Ut[2*nr+1]=or,Xt[nr]=_e[nr],++nr;return[Ut,Xt,Kt]}function mp(o,i){let s=y.getArrayFromDType("int32",o.length);for(let _=0;_<o.length;++_)s[_]=y.fingerPrint64(o[_]).modulo(i).getLowBitsUnsigned();return s}var dI=Ve((o,i)=>o-i),xY=bc((o,i,s,_)=>({real:o-s,imag:i-_})),Vl=Ye(Ts,dI,xY),L_={kernelName:Ts,backendName:"cpu",kernelFunc:Vl};function Mf(o,i){let s=new Array(o.rank);for(let _e=0;_e<s.length;_e++)s[_e]=o.shape[_e]*i[_e];let _=me$1(s,o.dtype);for(let _e=0;_e<_.values.length;++_e){let ct=_.indexToLoc(_e),Mt=new Array(o.rank);for(let Ut=0;Ut<Mt.length;Ut++)Mt[Ut]=ct[Ut]%o.shape[Ut];let Ft=o.locToIndex(Mt);_.values[_e]=o.values[Ft]}return _}var Wl=(o,i)=>{let s=i.value-o.value;return s===0?o.index-i.index:s};function B_(o,i,s=0,_=o.length-1){for(;_>s;){if(_-s>600){let Ft=_-s+1,Ut=i-s+1,Xt=Math.log(Ft),Kt=.5*Math.exp(2*Xt/3),nr=.5*Math.sqrt(Xt*Kt*(Ft-Kt)/Ft)*Math.sign(Ut-Ft/2);B_(o,i,Math.max(s,Math.floor(i-Ut*Kt/Ft+nr)),Math.min(_,Math.floor(i+(Ft-Ut)*Kt/Ft+nr)))}let _e=o[i],ct=s,Mt=_;for(y.swap(o,s,i),Wl(o[_],_e)>0&&y.swap(o,s,_);ct<Mt;){for(y.swap(o,ct,Mt),ct++,Mt--;Wl(o[ct],_e)<0;)ct+=1;for(;Wl(o[Mt],_e)>0;)Mt-=1}Wl(o[s],_e)===0?y.swap(o,s,Mt):(Mt+=1,y.swap(o,Mt,_)),Mt<=i&&(s=Mt+1),i<=Mt&&(_=Mt-1)}}function Lf(o,i,s,_,_e){let ct=i[i.length-1],[Mt,Ft]=[o.length/ct,ct],Ut=y.getTypedArrayFromDType(s,Mt*_),Xt=y.getTypedArrayFromDType("int32",Mt*_);for(let nr=0;nr<Mt;nr++){let rr=nr*Ft,or=o.subarray(rr,rr+Ft),hr=new Array(or.length);or.forEach((Br,Vr)=>hr[Vr]={value:Br,index:Vr}),_<hr.length&&(B_(hr,_),hr=hr.slice(0,_)),_e&&hr.sort(Wl);let fr=nr*_,yr=Ut.subarray(fr,fr+_),Lr=Xt.subarray(fr,fr+_);for(let Br=0;Br<_;Br++)yr[Br]=hr[Br].value,Lr[Br]=hr[Br].index}let Kt=i.slice();return Kt[Kt.length-1]=_,[me$1(Kt,s,Ut),me$1(Kt,"int32",Xt)]}function dp(o,i,s,_){let _e=y.parseAxisParam(i,s)[0],ct=[1,s[0],1];for(let hr=0;hr<_e;hr++)ct[0]*=s[hr];ct[1]=s[_e];for(let hr=_e+1;hr<s.length;hr++)ct[2]*=s[hr];let Mt=new Map,Ft=new Int32Array(s[_e]),Ut=new tt(ct,_,o),Xt=[],Kt=ct[0]===1&&ct[2]===1;for(let hr=0;hr<s[_e];hr++){let fr;if(Kt)fr=o[hr].toString();else{let Lr=[];for(let Br=0;Br<ct[0];Br++)for(let Vr=0;Vr<ct[2];Vr++)Lr.push(Ut.get(Br,hr,Vr));fr=Lr.join(",")}let yr=Mt.get(fr);if(yr!=null)Ft[hr]=yr;else{let Lr=Mt.size;Mt.set(fr,Lr),Ft[hr]=Lr,Xt.push(hr)}}let nr=ct.slice();nr[1]=Mt.size;let rr=new tt(nr,_);Xt.forEach((hr,fr)=>{for(let yr=0;yr<ct[0];yr++)for(let Lr=0;Lr<ct[2];Lr++)rr.set(Ut.get(yr,hr,Lr),yr,fr,Lr)});let or=s.slice();return or[_e]=nr[1],{outputValues:rr.values,outputShape:or,indices:Ft}}var yY="4.17.0";tu("cpu",()=>new xc,1);var fI=Ie$1(hn,o=>o>=0?o:Math.exp(o)-1),z_={kernelName:hn,backendName:"cpu",kernelFunc:fI};function hI(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{alpha:ct}=_;Q$1([_e],"leakyRelu");let Mt=y.sizeFromShape(_e.shape),Ft=s.data.get(_e.dataId).values,Ut=y.getTypedArrayFromDType("float32",Mt);for(let Xt=0;Xt<Ft.length;Xt++)Ut[Xt]=Ft[Xt]<0?ct*Ft[Xt]:Ft[Xt];return s.makeTensorInfo(_e.shape,"float32",Ut)}var V_={kernelName:$n,backendName:"cpu",kernelFunc:hI},bY=Ve((o,i)=>o<0?i*o:o);function gI(o){let{inputs:i,backend:s}=o,{x:_,alpha:_e}=i;Q$1([_,_e],"prelu");let ct=s.data.get(_.dataId).values,Mt=s.data.get(_e.dataId).values,[Ft,Ut]=bY(_.shape,_e.shape,ct,Mt,"float32");return s.makeTensorInfo(Ut,"float32",Ft)}var W_={kernelName:rs,backendName:"cpu",kernelFunc:gI},xI=Ie$1(ss,o=>Math.max(0,o)),U_={kernelName:ss,backendName:"cpu",kernelFunc:xI},yI=Ie$1(us,o=>Math.min(Math.max(0,o),6)),G_={kernelName:us,backendName:"cpu",kernelFunc:yI};function fp(o,i,s,_,_e){if(s==="linear")return lr({inputs:{x:i},backend:o});if(s==="relu")return xI({inputs:{x:i},backend:o});if(s==="elu")return fI({inputs:{x:i},backend:o});if(s==="relu6")return yI({inputs:{x:i},backend:o});if(s==="prelu")return gI({inputs:{x:i,alpha:_},backend:o});if(s==="leakyrelu")return hI({inputs:{x:i},backend:o,attrs:{alpha:_e}});if(s==="sigmoid")return pI({inputs:{x:i},backend:o});throw new Error(`Activation ${s} has not been implemented for the CPU backend.`)}function We(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{shape:ct}=_,Mt=y.sizeFromShape(_e.shape),Ft=y.inferFromImplicitShape(ct,Mt),Ut=y.sizeFromShape(Ft);y.assert(Mt===Ut,()=>`The new shape (${Ft}) has ${Ut} elements and the old shape (${_e.shape}) has ${Mt} elements. The new shape and old shape must have the same number of elements.`),s.incRef(_e.dataId);let Xt=s.data.get(_e.dataId);if(Xt.complexTensorInfos!=null){let Kt=Xt.complexTensorInfos.real,nr=Xt.complexTensorInfos.imag;Kt.shape=Ft,nr.shape=Ft}return{dataId:_e.dataId,shape:Ft,dtype:_e.dtype}}var H_={kernelName:da,backendName:"cpu",kernelFunc:We};function bI(o){let{inputs:i,backend:s,attrs:_}=o,{a:_e,b:ct}=i,{transposeA:Mt,transposeB:Ft}=_;Q$1([_e,ct],"matMul");let Ut=_e.shape.length,Xt=ct.shape.length,Kt=Mt?_e.shape[Ut-2]:_e.shape[Ut-1],nr=Ft?ct.shape[Xt-1]:ct.shape[Xt-2],rr=Mt?_e.shape[Ut-1]:_e.shape[Ut-2],or=Ft?ct.shape[Xt-2]:ct.shape[Xt-1],hr=_e.shape.slice(0,-2),fr=ct.shape.slice(0,-2),yr=y.sizeFromShape(hr),Lr=y.sizeFromShape(fr),Br=Sr.assertAndGetBroadcastShape(_e.shape.slice(0,-2),ct.shape.slice(0,-2)).concat([rr,or]);y.assert(Kt===nr,()=>`Error in matMul: inner shapes (${Kt}) and (${nr}) of Tensors with shapes ${_e.shape} and ${ct.shape} and transposeA=${Mt} and transposeB=${Ft} must match.`);let Vr=Ft?[Lr,or,nr]:[Lr,nr,or],Wr=We({inputs:{x:_e},backend:s,attrs:{shape:Mt?[yr,Kt,rr]:[yr,rr,Kt]}}),ro=We({inputs:{x:ct},backend:s,attrs:{shape:Vr}}),no=Mt?Wr.shape[1]:Wr.shape[2],so=Mt?Wr.shape[2]:Wr.shape[1],ko=Ft?ro.shape[1]:ro.shape[2],To=Math.max(yr,Lr),oo=s.data.get(Wr.dataId).values,No=s.data.get(ro.dataId).values,As=y.computeStrides(Wr.shape),Ks=y.computeStrides(ro.shape),[vu,Fu,Ap]=Mt?[As[0],1,As[1]]:[As[0],As[1],1],[Pp,Lo,Au]=Ft?[1,Ks[1],Ks[0]]:[Ks[1],1,Ks[0]],Mp=so*ko,Lp=me$1([To,so,ko],Wr.dtype),Op=Lp.values,Fp=s.blockSize;for(let wm=0;wm<To;wm++){let Bp=wm%yr,Em=wm%Lr;for(let Yp=0;Yp<so;Yp+=Fp){let _m=Math.min(Yp+Fp,so);for(let Tm=0;Tm<ko;Tm+=Fp){let Im=Math.min(Tm+Fp,ko);for(let Mm=0;Mm<no;Mm+=Fp){let Bm=Math.min(Mm+Fp,no);for(let zm=Yp;zm<_m;zm++)for(let Am=Tm;Am<Im;Am++){let Om=0;for(let Hm=Mm;Hm<Bm;Hm++)Om+=oo[Bp*vu+zm*Fu+Hm*Ap]*No[Hm*Pp+Am*Lo+Em*Au];Op[wm*Mp+(zm*ko+Am)]+=Om}}}}}return s.disposeIntermediateTensorInfo(Wr),s.disposeIntermediateTensorInfo(ro),s.makeTensorInfo(Br,Lp.dtype,Lp.values)}var K_={kernelName:Zo,backendName:"cpu",kernelFunc:bI};function CY(o){let i,s,_,{inputs:_e,backend:ct,attrs:Mt}=o,{a:Ft,b:Ut,bias:Xt,preluActivationWeights:Kt}=_e,{transposeA:nr,transposeB:rr,activation:or,leakyreluAlpha:hr}=Mt,fr=[];i=bI({inputs:{a:Ft,b:Ut},attrs:{transposeA:nr,transposeB:rr},backend:ct}),Xt&&(s=Pa({inputs:{a:i,b:Xt},backend:ct}),fr.push(i),i=s),or&&(_=fp(ct,i,or,Kt,hr),fr.push(i),i=_);for(let yr of fr)ct.disposeIntermediateTensorInfo(yr);return i}var q_={kernelName:So,backendName:"cpu",kernelFunc:CY},wY=Ie$1(Vo,o=>Math.acos(o)),j_={kernelName:Vo,backendName:"cpu",kernelFunc:wY},SY=Ie$1(Wo,o=>Math.acosh(o)),X_={kernelName:Wo,backendName:"cpu",kernelFunc:SY};function IY(o){let{inputs:i,backend:s}=o,_=i;Q$1(i,"addN");let _e=_.map(Ft=>s.data.get(Ft.dataId).values),ct=me$1(_[0].shape,_[0].dtype),Mt=ct.values;for(let Ft=0;Ft<_.length;Ft++){let Ut=_e[Ft];for(let Xt=0;Xt<Mt.length;Xt++)Mt[Xt]+=Ut[Xt]}return s.makeTensorInfo(ct.shape,ct.dtype,ct.values)}var Y_={kernelName:Uo,backendName:"cpu",kernelFunc:IY};function vY(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{axis:ct,keepDims:Mt}=_;Q$1(_e,"all");let Ft=y.parseAxisParam(ct,_e.shape),Ut=Ft,Xt=w.getAxesPermutation(Ut,_e.shape.length),Kt=_e;Xt!=null&&(Kt=St$2({inputs:{x:_e},backend:s,attrs:{perm:Xt}}),Ut=w.getInnerMostAxes(Ut.length,_e.shape.length)),w.assertAxesAreInnerMostDims("all",Ut,Kt.shape.length);let[nr,rr]=w.computeOutAndReduceShapes(Kt.shape,Ut),or=y.sizeFromShape(rr),hr=y.makeZerosTypedArray(y.sizeFromShape(nr),Kt.dtype),fr=s.data.get(Kt.dataId).values;for(let Lr=0;Lr<hr.length;++Lr){let Br=Lr*or,Vr=fr[Br];for(let Wr=0;Wr<or;++Wr){let ro=fr[Br+Wr];Vr=Vr&&ro}hr[Lr]=Vr}Xt!=null&&s.disposeIntermediateTensorInfo(Kt);let yr=s.makeTensorInfo(nr,Kt.dtype,hr);if(Mt){let Lr=We({inputs:{x:yr},backend:s,attrs:{shape:w.expandShapeToKeepDim(nr,Ft)}});return s.disposeIntermediateTensorInfo(yr),Lr}return yr}var Q_={kernelName:Go,backendName:"cpu",kernelFunc:vY};function kY(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{axis:ct,keepDims:Mt}=_;Q$1(_e,"any");let Ft=y.parseAxisParam(ct,_e.shape),Ut=Ft,Xt=w.getAxesPermutation(Ut,_e.shape.length),Kt=_e;Xt!=null&&(Kt=St$2({inputs:{x:_e},backend:s,attrs:{perm:Xt}}),Ut=w.getInnerMostAxes(Ut.length,_e.shape.length)),w.assertAxesAreInnerMostDims("any",Ut,Kt.shape.length);let[nr,rr]=w.computeOutAndReduceShapes(Kt.shape,Ut),or=y.sizeFromShape(rr),hr=y.makeZerosTypedArray(y.sizeFromShape(nr),Kt.dtype),fr=s.data.get(Kt.dataId).values;for(let Lr=0;Lr<hr.length;++Lr){let Br=Lr*or,Vr=fr[Br];for(let Wr=0;Wr<or;++Wr){let ro=fr[Br+Wr];Vr=Vr||ro}hr[Lr]=Vr}Xt!=null&&s.disposeIntermediateTensorInfo(Kt);let yr=s.makeTensorInfo(nr,Kt.dtype,hr);if(Mt){let Lr=We({inputs:{x:yr},backend:s,attrs:{shape:w.expandShapeToKeepDim(nr,Ft)}});return s.disposeIntermediateTensorInfo(yr),Lr}return yr}var Z_={kernelName:Ho,backendName:"cpu",kernelFunc:kY};function NY(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{axis:ct}=_;Q$1(_e,"argMax");let Mt=y.parseAxisParam(ct,_e.shape),Ft=w.getAxesPermutation(Mt,_e.shape.length),Ut=_e,Xt=[];Ft!=null&&(Ut=St$2({inputs:{x:_e},backend:s,attrs:{perm:Ft}}),Xt.push(Ut),Mt=w.getInnerMostAxes(Mt.length,Ut.shape.length)),Mt=[Mt[0]],w.assertAxesAreInnerMostDims("argMax",Mt,Ut.shape.length);let[Kt,nr]=w.computeOutAndReduceShapes(Ut.shape,Mt),rr=y.sizeFromShape(Kt),or=y.makeZerosTypedArray(rr,"int32"),hr=y.sizeFromShape(nr),fr=s.data.get(Ut.dataId).values;for(let yr=0;yr<or.length;++yr){let Lr=yr*hr,Br=fr[Lr],Vr=0;for(let Wr=0;Wr<hr;++Wr){let ro=fr[Lr+Wr];ro>Br&&(Br=ro,Vr=Wr)}or[yr]=Vr}return Xt.forEach(yr=>s.disposeIntermediateTensorInfo(yr)),s.makeTensorInfo(Kt,"int32",or)}var J_={kernelName:Ys,backendName:"cpu",kernelFunc:NY};function TY(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{axis:ct}=_;Q$1(_e,"argMin");let Mt=y.parseAxisParam(ct,_e.shape),Ft=w.getAxesPermutation(Mt,_e.shape.length),Ut=_e,Xt=[];Ft!=null&&(Ut=St$2({inputs:{x:_e},backend:s,attrs:{perm:Ft}}),Xt.push(Ut),Mt=w.getInnerMostAxes(Mt.length,Ut.shape.length)),Mt=[Mt[0]],w.assertAxesAreInnerMostDims("argMin",Mt,Ut.shape.length);let[Kt,nr]=w.computeOutAndReduceShapes(Ut.shape,Mt),rr=y.sizeFromShape(Kt),or=y.makeZerosTypedArray(rr,"int32"),hr=y.sizeFromShape(nr),fr=s.data.get(Ut.dataId).values;for(let yr=0;yr<or.length;++yr){let Lr=yr*hr,Br=fr[Lr],Vr=0;for(let Wr=0;Wr<hr;++Wr){let ro=fr[Lr+Wr];ro<Br&&(Br=ro,Vr=Wr)}or[yr]=Vr}return Xt.forEach(yr=>s.disposeIntermediateTensorInfo(yr)),s.makeTensorInfo(Kt,"int32",or)}var eE={kernelName:Qs,backendName:"cpu",kernelFunc:TY},_Y=Ie$1(Ko,o=>Math.asin(o)),tE={kernelName:Ko,backendName:"cpu",kernelFunc:_Y},EY=Ie$1(qo,o=>Math.asinh(o)),rE={kernelName:qo,backendName:"cpu",kernelFunc:EY},$Y=Ie$1(jo,o=>Math.atan(o)),oE={kernelName:jo,backendName:"cpu",kernelFunc:$Y},RY=Ve((o,i)=>Math.atan2(o,i)),DY=Ye(Yo,RY),nE={kernelName:Yo,backendName:"cpu",kernelFunc:DY},AY=Ie$1(Xo,o=>Math.atanh(o)),sE={kernelName:Xo,backendName:"cpu",kernelFunc:AY};function vc(o,i,s,_,_e,ct){let Mt=_e.strideHeight,Ft=_e.strideWidth,Ut=_e.dilationHeight,Xt=_e.dilationWidth,Kt=_e.effectiveFilterHeight,nr=_e.effectiveFilterWidth,rr=_e.padInfo.top,or=_e.padInfo.left,hr=ct==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,fr=me$1(_e.outShape,s),yr=fr.values,Lr=_e.outShape[1]*_e.outShape[2]*_e.outShape[3],Br=_e.outShape[2]*_e.outShape[3],Vr=_e.outShape[3];for(let Wr=0;Wr<_e.batchSize;++Wr){let ro=Wr*Lr,no=Wr*_[0];for(let so=0;so<_e.inChannels;++so)for(let ko=0;ko<_e.outHeight;++ko){let To=ko*Mt-rr,oo=Math.max(0,To),No=Math.min(_e.inHeight,Kt+To),As=ro+ko*Br;for(let Ks=0;Ks<_e.outWidth;++Ks){let vu=Ks*Ft-or,Fu=Math.max(0,vu),Ap=Math.min(_e.inWidth,nr+vu),Pp=hr,Lo=0,Au=0;for(let Mp=oo;Mp<No;Mp+=Ut){let Lp=no+Mp*_[1];for(let Op=Fu;Op<Ap;Op+=Xt){let Fp=o[Lp+Op*_[2]+so];ct==="max"&&Fp>Pp?Pp=Fp:ct==="avg"&&(Lo+=Fp,Au++)}if(isNaN(Pp))break}yr[As+Ks*Vr+so]=ct==="avg"?Lo/Au:Pp}}}return fr}function Bf(o,i,s,_,_e=!1,ct=!1){let Mt=me$1(_.outShape,"int32"),Ft=_.strideHeight,Ut=_.strideWidth,Xt=_.dilationHeight,Kt=_.dilationWidth,nr=_.effectiveFilterHeight,rr=_.effectiveFilterWidth,or=_.padInfo.top,hr=_.padInfo.left,fr=me$1(i,s,o);for(let yr=0;yr<_.batchSize;++yr)for(let Lr=0;Lr<_.inChannels;++Lr)for(let Br=0;Br<_.outHeight;++Br){let Vr=Br*Ft-or,Wr=Vr;for(;Wr<0;)Wr+=Xt;let ro=Math.min(_.inHeight,nr+Vr);for(let no=0;no<_.outWidth;++no){let so=no*Ut-hr,ko=so;for(;ko<0;)ko+=Kt;let To=Math.min(_.inWidth,rr+so),oo=Number.NEGATIVE_INFINITY,No=-1;for(let As=Wr;As<ro;As+=Xt){let Ks=As-Vr;for(let vu=ko;vu<To;vu+=Kt){let Fu=vu-so,Ap=fr.get(yr,As,vu,Lr);Ap>oo&&(oo=Ap,No=_e?ct?((yr*_.inHeight+As)*_.inWidth+vu)*_.inChannels+Lr:(As*_.inWidth+vu)*_.inChannels+Lr:Ks*rr+Fu)}}Mt.set(No,yr,Br,no,Lr)}}return Mt}function zf(o,i,s,_,_e,ct){let Mt=_e.strideDepth,Ft=_e.strideHeight,Ut=_e.strideWidth,Xt=_e.dilationDepth,Kt=_e.dilationHeight,nr=_e.dilationWidth,rr=_e.effectiveFilterDepth,or=_e.effectiveFilterHeight,hr=_e.effectiveFilterWidth,fr=_e.padInfo.front,yr=_e.padInfo.top,Lr=_e.padInfo.left,Br=ct==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,Vr=me$1(_e.outShape,s),Wr=Vr.values,ro=_e.outShape[1]*_e.outShape[2]*_e.outShape[3]*_e.outShape[4],no=_e.outShape[2]*_e.outShape[3]*_e.outShape[4],so=_e.outShape[3]*_e.outShape[4],ko=_e.outShape[4];for(let To=0;To<_e.batchSize;++To){let oo=To*ro,No=To*_[0];for(let As=0;As<_e.inChannels;++As)for(let Ks=0;Ks<_e.outDepth;++Ks){let vu=Ks*Mt-fr,Fu=vu;for(;Fu<0;)Fu+=Xt;let Ap=Math.min(_e.inDepth,rr+vu),Pp=oo+Ks*no;for(let Lo=0;Lo<_e.outHeight;++Lo){let Au=Lo*Ft-yr,Mp=Au;for(;Mp<0;)Mp+=Kt;let Lp=Math.min(_e.inHeight,or+Au),Op=Pp+Lo*so;for(let Fp=0;Fp<_e.outWidth;++Fp){let wm=Fp*Ut-Lr,Bp=wm;for(;Bp<0;)Bp+=nr;let Em=Math.min(_e.inWidth,hr+wm),Yp=Op+Fp*ko,_m=Br,Tm=0,Im=0;for(let Mm=Fu;Mm<Ap;Mm+=Xt){let Bm=No+Mm*_[1];for(let zm=Mp;zm<Lp;zm+=Kt){let Am=Bm+zm*_[2];for(let Om=Bp;Om<Em;Om+=nr){let Hm=o[Am+Om*_[3]+As];if(ct==="max"&&Hm>_m?_m=Hm:ct==="avg"&&(Tm+=Hm,Im++),isNaN(_m))break}if(isNaN(_m))break}if(isNaN(_m))break}Wr[Yp+As]=ct==="avg"?Tm/Math.max(Im,1):_m}}}}return Vr}function aE(o,i){let s=me$1(i.outShape,"int32"),_=i.strideDepth,_e=i.strideHeight,ct=i.strideWidth,Mt=i.dilationDepth,Ft=i.dilationHeight,Ut=i.dilationWidth,Xt=i.effectiveFilterDepth,Kt=i.effectiveFilterHeight,nr=i.effectiveFilterWidth,rr=i.padInfo.front,or=i.padInfo.top,hr=i.padInfo.left;for(let fr=0;fr<i.batchSize;++fr)for(let yr=0;yr<i.inChannels;++yr)for(let Lr=0;Lr<i.outDepth;++Lr){let Br=Lr*_-rr,Vr=Br;for(;Vr<0;)Vr+=Mt;let Wr=Math.min(i.inDepth,Xt+Br);for(let ro=0;ro<i.outHeight;++ro){let no=ro*_e-or,so=no;for(;so<0;)so+=Ft;let ko=Math.min(i.inHeight,Kt+no);for(let To=0;To<i.outWidth;++To){let oo=To*ct-hr,No=oo;for(;No<0;)No+=Ut;let As=Math.min(i.inWidth,nr+oo),Ks=Number.NEGATIVE_INFINITY,vu=-1;for(let Fu=Vr;Fu<Wr;Fu+=Mt){let Ap=Fu-Br;for(let Pp=so;Pp<ko;Pp+=Ft){let Lo=Pp-no;for(let Au=No;Au<As;Au+=Ut){let Mp=Au-oo,Lp=o.get(fr,Fu,Pp,Au,yr);Lp>=Ks&&(Ks=Lp,vu=Ap*Kt*nr+Lo*Kt+Mp)}}}s.set(vu,fr,Lr,ro,To,yr)}}}return s}function FY(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i;Q$1(_e,"avgPool");let{filterSize:ct,strides:Mt,pad:Ft,dimRoundingMode:Ut}=_;y.assert(w.eitherStridesOrDilationsAreOne(Mt,1),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${Mt} and dilations '1'`);let Xt,Kt=w.computePool2DInfo(_e.shape,ct,Mt,1,Ft,Ut);if(Kt.filterWidth===1&&Kt.filterHeight===1&&y.arraysEqual(Kt.inShape,Kt.outShape))Xt=lr({inputs:{x:_e},backend:s});else{let nr=s.data.get(_e.dataId).values,rr=y.computeStrides(_e.shape),or=vc(nr,_e.shape,_e.dtype,rr,Kt,"avg");Xt=s.makeTensorInfo(Kt.outShape,_e.dtype,or.values)}return Xt}var iE={kernelName:Qo,backendName:"cpu",kernelFunc:FY};function PY(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{filterSize:ct,strides:Mt,pad:Ft,dimRoundingMode:Ut,dataFormat:Xt}=_;Q$1(_e,"avgPool3d");let Kt=w.computePool3DInfo(_e.shape,ct,Mt,1,Ft,Ut,Xt),nr=zf(s.data.get(_e.dataId).values,_e.shape,_e.dtype,y.computeStrides(_e.shape),Kt,"avg");return s.makeTensorInfo(nr.shape,"float32",nr.values)}var uE={kernelName:Zs,backendName:"cpu",kernelFunc:PY};function OY(o){let{inputs:i,backend:s,attrs:_}=o,{dy:_e,input:ct}=i,{filterSize:Mt,strides:Ft,pad:Ut,dimRoundingMode:Xt}=_;Q$1([_e,ct],"avgPool3DGrad");let Kt=w.computePool3DInfo(ct.shape,Mt,Ft,1,Ut,Xt),nr=Kt.strideDepth,rr=Kt.strideHeight,or=Kt.strideWidth,hr=Kt.filterDepth,fr=Kt.filterHeight,yr=Kt.filterWidth,Lr=Kt.dilationDepth,Br=Kt.dilationHeight,Vr=Kt.dilationWidth,Wr=Kt.effectiveFilterDepth,ro=Kt.effectiveFilterHeight,no=Kt.effectiveFilterWidth,so=Wr-1-Kt.padInfo.front,ko=no-1-Kt.padInfo.left,To=ro-1-Kt.padInfo.top,oo=me$1(ct.shape,"float32"),No=1/(hr*fr*yr),As=s.bufferSync(_e);for(let Ks=0;Ks<Kt.batchSize;++Ks)for(let vu=0;vu<Kt.inChannels;++vu)for(let Fu=0;Fu<Kt.inDepth;++Fu)for(let Ap=0;Ap<Kt.inHeight;++Ap)for(let Pp=0;Pp<Kt.inWidth;++Pp){let Lo=Fu-so,Au=Ap-To,Mp=Pp-ko,Lp=0;for(let Op=0;Op<Wr;Op+=Lr){let Fp=(Lo+Op)/nr;if(!(Fp<0||Fp>=Kt.outDepth||Math.floor(Fp)!==Fp))for(let wm=0;wm<ro;wm+=Br){let Bp=(Au+wm)/rr;if(!(Bp<0||Bp>=Kt.outHeight||Math.floor(Bp)!==Bp))for(let Em=0;Em<no;Em+=Vr){let Yp=(Mp+Em)/or;Yp<0||Yp>=Kt.outWidth||Math.floor(Yp)!==Yp||(Lp+=As.get(Ks,Fp,Bp,Yp,vu))}}}oo.set(Lp*No,Ks,Fu,Ap,Pp,vu)}return s.makeTensorInfo(oo.shape,oo.dtype,oo.values)}var pE={kernelName:Ri,backendName:"cpu",kernelFunc:OY};function MY(o){let{inputs:i,backend:s,attrs:_}=o,{dy:_e,input:ct}=i,Mt=ct;Q$1([_e,ct],"avgPoolGrad");let{filterSize:Ft,strides:Ut,pad:Xt}=_,Kt=w.computePool2DInfo(Mt.shape,Ft,Ut,1,Xt),nr=Kt.strideHeight,rr=Kt.strideWidth,or=Kt.filterHeight,hr=Kt.filterWidth,fr=Kt.dilationHeight,yr=Kt.dilationWidth,Lr=Kt.effectiveFilterHeight,Br=Kt.effectiveFilterWidth,Vr=Br-1-Kt.padInfo.left,Wr=Lr-1-Kt.padInfo.top,ro=me$1(Mt.shape,"float32"),no=1/(or*hr),so=s.data.get(_e.dataId).values,ko=me$1(_e.shape,"float32",so);for(let To=0;To<Kt.batchSize;++To)for(let oo=0;oo<Kt.inChannels;++oo)for(let No=0;No<Kt.inHeight;++No)for(let As=0;As<Kt.inWidth;++As){let Ks=No-Wr,vu=As-Vr,Fu=0;for(let Ap=0;Ap<Lr;Ap+=fr){let Pp=(Ks+Ap)/nr;if(!(Pp<0||Pp>=Kt.outHeight||Math.floor(Pp)!==Pp))for(let Lo=0;Lo<Br;Lo+=yr){let Au=(vu+Lo)/rr;Au<0||Au>=Kt.outWidth||Math.floor(Au)!==Au||(Fu+=ko.get(To,Pp,Au,oo))}}ro.set(Fu*no,To,No,As,oo)}return s.makeTensorInfo(ro.shape,ro.dtype,ro.values)}var cE={kernelName:$i,backendName:"cpu",kernelFunc:MY};function LY(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e,scale:ct,offset:Mt,mean:Ft,variance:Ut}=i;y.assert(Ft.shape.length===Ut.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),y.assert(Mt==null||Ft.shape.length===Mt.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),y.assert(ct==null||Ft.shape.length===ct.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),Q$1([_e,Ft,Ut,ct,Mt],"batchNorm");let{varianceEpsilon:Xt}=_;Xt==null&&(Xt=.001);let Kt=s.data.get(_e.dataId).values,nr=s.data.get(Ft.dataId).values,rr=s.data.get(Ut.dataId).values,or=ct?s.data.get(ct.dataId).values:new Float32Array([1]),hr=Mt?s.data.get(Mt.dataId).values:new Float32Array([0]),fr=new Float32Array(Kt.length),yr=hr.length,Lr=or.length,Br=rr.length,Vr=nr.length,Wr=0,ro=0,no=0,so=0;for(let ko=0;ko<Kt.length;++ko)fr[ko]=hr[Wr++]+(Kt[ko]-nr[ro++])*or[no++]/Math.sqrt(rr[so++]+Xt),Wr>=yr&&(Wr=0),ro>=Vr&&(ro=0),no>=Lr&&(no=0),so>=Br&&(so=0);return s.makeTensorInfo(_e.shape,_e.dtype,fr)}var lE={kernelName:In,backendName:"cpu",kernelFunc:LY};function BY(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{blockShape:ct,crops:Mt}=_;Q$1([_e],"batchToSpaceND");let Ft=ct.reduce((Lr,Br)=>Lr*Br),Ut=w.getReshaped(_e.shape,ct,Ft),Xt=w.getPermuted(Ut.length,ct.length),Kt=w.getReshapedPermuted(_e.shape,ct,Ft),nr=w.getSliceBeginCoords(Mt,ct.length),rr=w.getSliceSize(Kt,Mt,ct.length),or=We({inputs:{x:_e},backend:s,attrs:{shape:Ut}}),hr=St$2({inputs:{x:or},backend:s,attrs:{perm:Xt}}),fr=We({inputs:{x:hr},backend:s,attrs:{shape:Kt}}),yr=Ao({inputs:{x:fr},backend:s,attrs:{begin:nr,size:rr}});return s.disposeIntermediateTensorInfo(or),s.disposeIntermediateTensorInfo(hr),s.disposeIntermediateTensorInfo(fr),yr}var mE={kernelName:Js,backendName:"cpu",kernelFunc:BY};function zY(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e,weights:ct}=i,{size:Mt}=_,Ft=Cc(s.data.get(_e.dataId).values,s.data.get(ct.dataId).values,ct.dtype,ct.shape,Mt);return s.makeTensorInfo([Mt],ct.dtype,Ft)}var dE={kernelName:Jo,backendName:"cpu",kernelFunc:zY};function VY(o){let{inputs:i,backend:s}=o,{s0:_,s1:_e}=i,ct=s.data.get(_.dataId).values,Mt=s.data.get(_e.dataId).values,Ft=w.assertAndGetBroadcastShape(Array.from(ct),Array.from(Mt));return s.makeTensorInfo([Ft.length],"int32",Int32Array.from(Ft))}var fE={kernelName:ea,backendName:"cpu",kernelFunc:VY},WY=Ie$1(bo,(o,i)=>{let s=i;return o>s.clipValueMax?s.clipValueMax:o<s.clipValueMin?s.clipValueMin:o}),hE={kernelName:bo,backendName:"cpu",kernelFunc:WY},UY=o=>{let{x:i}=o.inputs,s=o.backend,_=new Float32Array(y.sizeFromShape(i.shape)),_e=s.data.get(i.dataId),ct=_e.complexTensorInfos.real,Mt=_e.complexTensorInfos.imag,Ft=s.data.get(ct.dataId).values,Ut=s.data.get(Mt.dataId).values;for(let Xt=0;Xt<Ft.length;Xt++){let Kt=Ft[Xt],nr=Ut[Xt];_[Xt]=Math.hypot(Kt,nr)}return s.makeOutput(_,i.shape,"float32")},gE={kernelName:Ai,backendName:"cpu",kernelFunc:UY};function Oa(o){let{inputs:i,backend:s}=o,{input:_}=i,_e=s.data.get(_.dataId).complexTensorInfos.imag,ct=s.data.get(_e.dataId).values;return s.makeTensorInfo(_e.shape,_e.dtype,ct)}var xE={kernelName:Wi,backendName:"cpu",kernelFunc:Oa};function hu(o){let{inputs:i,backend:s,attrs:_}=o,{axis:_e}=_,ct=y.parseAxisParam(_e,i[0].shape)[0],Mt=i.map(fr=>fr.shape);w.assertParamsConsistent(Mt,ct);let Ft=w.computeOutShape(i.map(fr=>fr.shape),ct);if(y.sizeFromShape(Ft)===0)return s.makeTensorInfo(Ft,i[0].dtype,[]);let Ut=i.filter(fr=>y.sizeFromShape(fr.shape)>0);if(Ut.length===1)return lr({inputs:{x:Ut[0]},backend:s});if(Ut[0].dtype==="complex64"){let fr=Ut.map(Wr=>$o({inputs:{input:Wr},backend:s})),yr=Ut.map(Wr=>Oa({inputs:{input:Wr},backend:s})),Lr=hu({inputs:fr,backend:s,attrs:{axis:ct}}),Br=hu({inputs:yr,backend:s,attrs:{axis:ct}}),Vr=Ht({inputs:{real:Lr,imag:Br},backend:s});return fr.forEach(Wr=>s.disposeIntermediateTensorInfo(Wr)),yr.forEach(Wr=>s.disposeIntermediateTensorInfo(Wr)),s.disposeIntermediateTensorInfo(Lr),s.disposeIntermediateTensorInfo(Br),Vr}let Xt=Ut.map(fr=>{let yr=[-1,y.sizeFromShape(fr.shape.slice(ct))];return We({inputs:{x:fr},backend:s,attrs:{shape:yr}})}),Kt=Xt.map(fr=>({vals:s.data.get(fr.dataId).values,shape:fr.shape}));Ft=w.computeOutShape(Xt.map(fr=>fr.shape),1);let nr=Xt[0].shape[0]===1,rr=ap(Kt,Ft,i[0].dtype,nr),or=w.computeOutShape(Ut.map(fr=>fr.shape),ct),hr=s.makeTensorInfo(or,i[0].dtype,rr);return Xt.forEach(fr=>s.disposeIntermediateTensorInfo(fr)),hr}var yE={kernelName:ta,backendName:"cpu",kernelFunc:hu};function CI(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e,filter:ct}=i,{strides:Mt,pad:Ft,dataFormat:Ut,dilations:Xt,dimRoundingMode:Kt}=_;Q$1([_e,ct],"conv2d");let nr=w.convertConv2DDataFormat(Ut),rr=w.computeConv2DInfo(_e.shape,ct.shape,Mt,Xt,Ft,Kt,!1,nr),or=rr.filterHeight,hr=rr.filterWidth,fr=rr.dilationHeight,yr=rr.dilationWidth,Lr=rr.padInfo.left,Br=rr.padInfo.top,Vr=rr.dataFormat==="channelsLast",Wr=new tt(rr.outShape,_e.dtype),ro=y.computeStrides(_e.shape),no=y.computeStrides(ct.shape),so=ro[0],ko=Vr?ro[1]:ro[2],To=Vr?ro[2]:1,oo=Vr?1:ro[1],No=Wr.strides[0],As=Vr?Wr.strides[1]:Wr.strides[2],Ks=Vr?Wr.strides[2]:1,vu=Vr?1:Wr.strides[1],Fu=s.data.get(_e.dataId).values,Ap=s.data.get(ct.dataId).values,Pp=Wr.values;for(let Lo=0;Lo<rr.batchSize;++Lo){let Au=Lo*so,Mp=Lo*No;for(let Lp=0;Lp<rr.outHeight;++Lp){let Op=Mp+Lp*As,Fp=Lp*rr.strideHeight-Br;for(let wm=0;wm<or;++wm){let Bp=Fp+wm*fr;if(Bp<0||Bp>=rr.inHeight)continue;let Em=wm*no[0],Yp=Au+Bp*ko;for(let _m=0;_m<rr.outWidth;++_m){let Tm=Op+_m*Ks,Im=_m*rr.strideWidth-Lr;for(let Mm=0;Mm<hr;++Mm){let Bm=Im+Mm*yr;if(Bm<0||Bm>=rr.inWidth)continue;let zm=Yp+Bm*To,Am=Em+Mm*no[1];for(let Om=0;Om<rr.inChannels;++Om){let Hm=Fu[zm+Om*oo];for(let u1=0;u1<rr.outChannels;++u1)Pp[Tm+u1*vu]+=Hm*Ap[Am+u1];Am+=rr.outChannels}}}}}}return s.makeTensorInfo(Wr.shape,Wr.dtype,Pp)}var bE={kernelName:tn,backendName:"cpu",kernelFunc:CI};function GY(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e,dy:ct}=i,{strides:Mt,pad:Ft,dataFormat:Ut,dimRoundingMode:Xt,filterShape:Kt}=_;Q$1([_e,ct],"conv2dBackpropFilter");let nr=w.convertConv2DDataFormat(Ut),rr=w.computeConv2DInfo(_e.shape,Kt,Mt,1,Ft,Xt,!1,nr),{strideHeight:or,strideWidth:hr,filterHeight:fr,filterWidth:yr}=rr,Lr=rr.dataFormat==="channelsLast",Br=new tt(rr.filterShape,"float32"),Vr=rr.padInfo.left,Wr=rr.padInfo.top,ro=s.data.get(_e.dataId).values,no=s.data.get(ct.dataId).values,so=new tt(_e.shape,_e.dtype,ro),ko=new tt(ct.shape,ct.dtype,no);for(let To=0;To<fr;++To){let oo=Math.max(0,Math.ceil((Wr-To)/or)),No=Math.min(rr.outHeight,(rr.inHeight+Wr-To)/or);for(let As=0;As<yr;++As){let Ks=Math.max(0,Math.ceil((Vr-As)/hr)),vu=Math.min(rr.outWidth,(rr.inWidth+Vr-As)/hr);for(let Fu=0;Fu<rr.inChannels;++Fu)for(let Ap=0;Ap<rr.outChannels;++Ap){let Pp=0;for(let Lo=0;Lo<rr.batchSize;++Lo)for(let Au=oo;Au<No;++Au){let Mp=To+Au*or-Wr;for(let Lp=Ks;Lp<vu;++Lp){let Op=As+Lp*hr-Vr;Pp+=Lr?so.get(Lo,Mp,Op,Fu)*ko.get(Lo,Au,Lp,Ap):so.get(Lo,Fu,Mp,Op)*ko.get(Lo,Ap,Au,Lp)}}Br.set(Pp,To,As,Fu,Ap)}}}return s.makeTensorInfo(Br.shape,Br.dtype,Br.values)}var CE={kernelName:Fi,backendName:"cpu",kernelFunc:GY};function HY(o){let{inputs:i,backend:s,attrs:_}=o,{dy:_e,filter:ct}=i,{inputShape:Mt,strides:Ft,pad:Ut,dataFormat:Xt,dimRoundingMode:Kt}=_;Q$1([_e,ct],"conv2dBackpropInput");let nr=y.computeStrides(ct.shape),rr=y.computeStrides(_e.shape),or=w.convertConv2DDataFormat(Xt),hr=w.computeConv2DInfo(Mt,ct.shape,Ft,1,Ut,Kt,!1,or),fr=new tt(hr.inShape,"float32"),yr=fr.values,Lr=s.data.get(_e.dataId).values,Br=s.data.get(ct.dataId).values,[Vr,Wr,ro]=nr,{batchSize:no,filterHeight:so,filterWidth:ko,inChannels:To,inHeight:oo,inWidth:No,outChannels:As,outHeight:Ks,outWidth:vu,strideHeight:Fu,strideWidth:Ap}=hr;or=hr.dataFormat;let Pp=so-1-hr.padInfo.top,Lo=ko-1-hr.padInfo.left,Au=or==="channelsLast",Mp=fr.strides[0],Lp=Au?fr.strides[1]:fr.strides[2],Op=Au?fr.strides[2]:1,Fp=Au?1:fr.strides[1],wm=rr[0],Bp=Au?rr[1]:rr[2],Em=Au?rr[2]:1,Yp=Au?1:rr[1];for(let _m=0;_m<no;++_m)for(let Tm=0;Tm<To;++Tm)for(let Im=0;Im<oo;++Im){let Mm=Im-Pp,Bm=Math.max(0,Math.ceil(Mm/Fu)),zm=Math.min(Ks,(so+Mm)/Fu);for(let Am=0;Am<No;++Am){let Om=Am-Lo,Hm=Math.max(0,Math.ceil(Om/Ap)),u1=Math.min(vu,(ko+Om)/Ap),a1=0;for(let Gm=Bm;Gm<zm;++Gm){let c1=Gm*Fu-Mm;for(let m1=Hm;m1<u1;++m1){let Sm=wm*_m+Bp*Gm+Em*m1,Nm=Vr*(so-1-c1)+Wr*(ko-1-(m1*Ap-Om))+ro*Tm;for(let Qp=0;Qp<As;++Qp)a1+=Lr[Sm+Yp*Qp]*Br[Nm+Qp]}}yr[Mp*_m+Lp*Im+Op*Am+Fp*Tm]=a1}}return s.makeTensorInfo(fr.shape,fr.dtype,fr.values)}var wE={kernelName:rn,backendName:"cpu",kernelFunc:HY};function KY(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e,filter:ct}=i,{strides:Mt,pad:Ft,dilations:Ut}=_;Q$1([_e,ct],"conv3d");let Xt=w.computeConv3DInfo(_e.shape,ct.shape,Mt,Ut,Ft),{filterDepth:Kt,filterHeight:nr,filterWidth:rr,dilationDepth:or,dilationHeight:hr,dilationWidth:fr,padInfo:yr}=Xt,Lr=yr.front,Br=yr.left,Vr=yr.top,Wr=new tt(Xt.outShape,_e.dtype),ro=s.data.get(_e.dataId).values,no=s.data.get(ct.dataId).values,so=Wr.values,ko=y.computeStrides(_e.shape),To=y.computeStrides(ct.shape);for(let oo=0;oo<Xt.batchSize;++oo){let No=oo*ko[0],As=oo*Wr.strides[0];for(let Ks=0;Ks<Xt.outDepth;++Ks){let vu=As+Ks*Wr.strides[1],Fu=Ks*Xt.strideDepth-Lr;for(let Ap=0;Ap<Kt;++Ap){let Pp=Fu+Ap*or;if(Pp<0||Pp>=Xt.inDepth)continue;let Lo=Ap*To[0],Au=No+Pp*ko[1];for(let Mp=0;Mp<Xt.outHeight;++Mp){let Lp=vu+Mp*Wr.strides[2],Op=Mp*Xt.strideHeight-Vr;for(let Fp=0;Fp<nr;++Fp){let wm=Op+Fp*hr;if(wm<0||wm>=Xt.inHeight)continue;let Bp=Lo+Fp*To[1],Em=Au+wm*ko[2];for(let Yp=0;Yp<Xt.outWidth;++Yp){let _m=Lp+Yp*Xt.outChannels,Tm=Yp*Xt.strideWidth-Br;for(let Im=0;Im<rr;++Im){let Mm=Tm+Im*fr;if(Mm<0||Mm>=Xt.inWidth)continue;let Bm=Bp+Im*To[2],zm=Em+Mm*Xt.inChannels,Am=Bm;for(let Om=0;Om<Xt.inChannels;++Om){let Hm=ro[zm+Om];for(let u1=0;u1<Xt.outChannels;++u1)so[_m+u1]+=Hm*no[Am+u1];Am+=Xt.outChannels}}}}}}}}return s.makeTensorInfo(Wr.shape,Wr.dtype,Wr.values)}var SE={kernelName:on,backendName:"cpu",kernelFunc:KY};function qY(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e,dy:ct}=i,{strides:Mt,pad:Ft,filterShape:Ut}=_;Q$1([_e,ct],"conv3dBackpropFilterV2");let Xt=y.computeStrides(_e.shape),Kt=y.computeStrides(ct.shape),nr=w.computeConv3DInfo(_e.shape,Ut,Mt,1,Ft),rr=nr.strideDepth,or=nr.strideHeight,hr=nr.strideWidth,fr=nr.filterDepth,yr=nr.filterHeight,Lr=nr.filterWidth,Br=new tt(nr.filterShape,"float32"),Vr=Br.values,[Wr,ro,no,so]=Br.strides,ko=s.data.get(ct.dataId).values,[To,oo,No,As]=Kt,Ks=s.data.get(_e.dataId).values,[vu,Fu,Ap,Pp]=Xt,Lo=nr.padInfo.front,Au=nr.padInfo.left,Mp=nr.padInfo.top;for(let Lp=0;Lp<fr;++Lp){let Op=Math.max(0,Math.ceil((Lo-Lp)/rr)),Fp=Math.min(nr.outDepth,(nr.inDepth+Lo-Lp)/rr),wm=Lp*Wr;for(let Bp=0;Bp<yr;++Bp){let Em=Math.max(0,Math.ceil((Mp-Bp)/or)),Yp=Math.min(nr.outHeight,(nr.inHeight+Mp-Bp)/or),_m=Bp*ro+wm;for(let Tm=0;Tm<Lr;++Tm){let Im=Math.max(0,Math.ceil((Au-Tm)/hr)),Mm=Math.min(nr.outWidth,(nr.inWidth+Au-Tm)/hr),Bm=Tm*no+_m;for(let zm=0;zm<nr.inChannels;++zm){let Am=zm*so+Bm;for(let Om=0;Om<nr.outChannels;++Om){let Hm=0;for(let u1=0;u1<nr.batchSize;++u1){let a1=u1*vu,Gm=u1*To;for(let c1=Op;c1<Fp;++c1){let m1=(Lp+c1*rr-Lo)*Fu+a1,Sm=c1*oo+Gm;for(let Nm=Em;Nm<Yp;++Nm){let Qp=(Bp+Nm*or-Mp)*Ap+m1,$m=Nm*No+Sm;for(let Pm=Im;Pm<Mm;++Pm){let Fm=Pm*As+$m;Hm+=Ks[(Tm+Pm*hr-Au)*Pp+Qp+zm]*ko[Fm+Om]}}}}Vr[Am+Om]=Hm}}}}}return s.makeTensorInfo(Br.shape,Br.dtype,Br.values)}var IE={kernelName:ja,backendName:"cpu",kernelFunc:qY};function jY(o){let{inputs:i,backend:s,attrs:_}=o,{dy:_e,filter:ct}=i,{pad:Mt,strides:Ft,inputShape:Ut}=_;Q$1([_e],"conv3dBackpropInputV2");let Xt=y.computeStrides(_e.shape),Kt=y.computeStrides(ct.shape),nr=w.computeConv3DInfo(Ut,ct.shape,Ft,1,Mt),rr=new tt(nr.inShape,"float32"),or=rr.values,[hr,fr,yr,Lr]=rr.strides,Br=s.data.get(_e.dataId).values,[Vr,Wr,ro,no]=Xt,so=s.data.get(ct.dataId).values,[ko,To,oo,No]=Kt,{batchSize:As,filterDepth:Ks,filterHeight:vu,filterWidth:Fu,inChannels:Ap,inDepth:Pp,inHeight:Lo,inWidth:Au,outChannels:Mp,outDepth:Lp,outHeight:Op,outWidth:Fp,strideDepth:wm,strideHeight:Bp,strideWidth:Em}=nr,Yp=Ks-1-nr.padInfo.front,_m=vu-1-nr.padInfo.top,Tm=Fu-1-nr.padInfo.left;for(let Im=0;Im<As;++Im)for(let Mm=0;Mm<Ap;++Mm)for(let Bm=0;Bm<Pp;++Bm){let zm=Bm-Yp,Am=Math.max(0,Math.ceil(zm/wm)),Om=Math.min(Lp,(Ks+zm)/wm);for(let Hm=0;Hm<Lo;++Hm){let u1=Hm-_m,a1=Math.max(0,Math.ceil(u1/Bp)),Gm=Math.min(Op,(vu+u1)/Bp);for(let c1=0;c1<Au;++c1){let m1=c1-Tm,Sm=Math.max(0,Math.ceil(m1/Em)),Nm=Math.min(Fp,(Fu+m1)/Em),Qp=0;for(let $m=Am;$m<Om;++$m){let Pm=$m*wm-zm;for(let Fm=a1;Fm<Gm;++Fm){let Rm=Fm*Bp-u1;for(let Dm=Sm;Dm<Nm;++Dm){let Zm=Vr*Im+Wr*$m+ro*Fm+no*Dm,qm=ko*(Ks-1-Pm)+To*(vu-1-Rm)+oo*(Fu-1-(Dm*Em-m1))+No*Mm;for(let Lm=0;Lm<Mp;++Lm)Qp+=Br[Zm+Lm]*so[qm+Lm]}}}or[hr*Im+fr*Bm+yr*Hm+Lr*c1+Mm]=Qp}}}return s.makeTensorInfo(rr.shape,rr.dtype,rr.values)}var vE={kernelName:nn,backendName:"cpu",kernelFunc:jY},XY=Ie$1(sn,o=>Math.cos(o)),kE={kernelName:sn,backendName:"cpu",kernelFunc:XY},YY=Ie$1(an,o=>Math.cosh(o)),NE={kernelName:an,backendName:"cpu",kernelFunc:YY};function QY(o){let{inputs:i,backend:s,attrs:_}=o,{image:_e,boxes:ct,boxInd:Mt}=i,{cropSize:Ft,method:Ut,extrapolationValue:Xt}=_,[Kt,nr,rr,or]=_e.shape,hr=ct.shape[0],[fr,yr]=Ft,Lr=me$1([hr,fr,yr,or],"float32"),Br=s.data.get(ct.dataId).values,Vr=s.data.get(Mt.dataId).values,Wr=s.data.get(_e.dataId).values,ro=y.computeStrides(_e.shape),no=y.computeStrides(Lr.shape);for(let so=0;so<hr;so++){let ko=4*so,To=Br[ko],oo=Br[ko+1],No=Br[ko+2],As=Br[ko+3],Ks=Vr[so];if(Ks>=Kt)continue;let vu=fr>1?(No-To)*(nr-1)/(fr-1):0,Fu=yr>1?(As-oo)*(rr-1)/(yr-1):0;for(let Ap=0;Ap<fr;Ap++){let Pp=fr>1?To*(nr-1)+Ap*vu:.5*(To+No)*(nr-1);if(Pp<0||Pp>nr-1)for(let Lo=0;Lo<yr;Lo++)for(let Au=0;Au<or;Au++){let Mp=Au+Lo*no[2]+Ap*no[1]+so*no[0];Lr.values[Mp]=Xt}else if(Ut==="bilinear"){let Lo=Math.floor(Pp),Au=Math.ceil(Pp),Mp=Pp-Lo;for(let Lp=0;Lp<yr;Lp++){let Op=yr>1?oo*(rr-1)+Lp*Fu:.5*(oo+As)*(rr-1);if(Op<0||Op>rr-1){for(let Em=0;Em<or;Em++){let Yp=Em+Lp*no[2]+Ap*no[1]+so*no[0];Lr.values[Yp]=Xt}continue}let Fp=Math.floor(Op),wm=Math.ceil(Op),Bp=Op-Fp;for(let Em=0;Em<or;Em++){let Yp=Em+Fp*ro[2]+Lo*ro[1]+Ks*ro[0],_m=Wr[Yp];Yp=Em+wm*ro[2]+Lo*ro[1]+Ks*ro[0];let Tm=Wr[Yp];Yp=Em+Fp*ro[2]+Au*ro[1]+Ks*ro[0];let Im=Wr[Yp];Yp=Em+wm*ro[2]+Au*ro[1]+Ks*ro[0];let Mm=_m+(Tm-_m)*Bp,Bm=Im+(Wr[Yp]-Im)*Bp;Yp=Em+Lp*no[2]+Ap*no[1]+so*no[0],Lr.values[Yp]=Mm+(Bm-Mm)*Mp}}}else for(let Lo=0;Lo<yr;++Lo){let Au=yr>1?oo*(rr-1)+Lo*Fu:.5*(oo+As)*(rr-1);if(Au<0||Au>rr-1){for(let Op=0;Op<or;Op++){let Fp=Op+Lo*no[2]+Ap*no[1]+so*no[0];Lr.values[Fp]=Xt}continue}let Mp=Math.round(Au),Lp=Math.round(Pp);for(let Op=0;Op<or;Op++){let Fp=Op+Mp*ro[2]+Lp*ro[1]+Ks*ro[0],wm=Op+Lo*no[2]+Ap*no[1]+so*no[0];Lr.values[wm]=Wr[Fp]}}}}return s.makeTensorInfo(Lr.shape,Lr.dtype,Lr.values)}var TE={kernelName:cn,backendName:"cpu",kernelFunc:QY};function ZY(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{axis:ct,exclusive:Mt,reverse:Ft}=_;Q$1(_e,"cumprod");let Ut=w.getAxesPermutation([ct],_e.shape.length),Xt=_e;Ut!=null&&(Xt=St$2({inputs:{x:_e},backend:s,attrs:{perm:Ut}}));let Kt=w.getInnerMostAxes(1,_e.shape.length)[0];if(Kt!==Xt.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${Xt.shape.length-1} but got axis=${Kt}`);let nr=dt(Xt.dtype,"int32"),rr=y.makeOnesTypedArray(y.sizeFromShape(Xt.shape),nr),or=s.data.get(Xt.dataId).values,hr=Xt.shape[Xt.shape.length-1],fr=Ft?(Lr,Br)=>Lr+hr-Br-1:(Lr,Br)=>Lr+Br;for(let Lr=0;Lr<or.length;Lr+=hr)for(let Br=0;Br<hr;Br++){let Vr=fr(Lr,Br);if(Br===0)rr[Vr]=Mt?1:or[Vr];else{let Wr=fr(Lr,Br-1);rr[Vr]=Mt?or[Wr]*rr[Wr]:or[Vr]*rr[Wr]}}let yr=s.makeTensorInfo(Xt.shape,nr,rr);if(Ut!=null){let Lr=St$2({inputs:{x:yr},backend:s,attrs:{perm:w.getUndoAxesPermutation(Ut)}});return s.disposeIntermediateTensorInfo(yr),s.disposeIntermediateTensorInfo(Xt),Lr}return yr}var _E={kernelName:un,backendName:"cpu",kernelFunc:ZY};function JY(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{axis:ct,exclusive:Mt,reverse:Ft}=_;Q$1(_e,"cumsum");let Ut=w.getAxesPermutation([ct],_e.shape.length),Xt=_e;Ut!=null&&(Xt=St$2({inputs:{x:_e},backend:s,attrs:{perm:Ut}}));let Kt=w.getInnerMostAxes(1,_e.shape.length)[0];if(Kt!==Xt.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${Xt.shape.length-1} but got axis=${Kt}`);let nr=dt(Xt.dtype,"int32"),rr=y.makeZerosTypedArray(y.sizeFromShape(Xt.shape),nr),or=s.data.get(Xt.dataId).values,hr=Xt.shape[Xt.shape.length-1],fr=Ft?(Lr,Br)=>Lr+hr-Br-1:(Lr,Br)=>Lr+Br;for(let Lr=0;Lr<or.length;Lr+=hr)for(let Br=0;Br<hr;Br++){let Vr=fr(Lr,Br);if(Br===0)rr[Vr]=Mt?0:or[Vr];else{let Wr=fr(Lr,Br-1);rr[Vr]=Mt?or[Wr]+rr[Wr]:or[Vr]+rr[Wr]}}let yr=s.makeTensorInfo(Xt.shape,nr,rr);if(Ut!=null){let Lr=St$2({inputs:{x:yr},backend:s,attrs:{perm:w.getUndoAxesPermutation(Ut)}});return s.disposeIntermediateTensorInfo(yr),s.disposeIntermediateTensorInfo(Xt),Lr}return yr}var EE={kernelName:pn,backendName:"cpu",kernelFunc:JY};function e7(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e,weights:ct}=i,{size:Mt,binaryOutput:Ft}=_;if(_e.shape.length===1){let Ut=Cc(s.data.get(_e.dataId).values,s.data.get(ct.dataId).values,ct.dtype,ct.shape,Mt);return s.makeTensorInfo([Mt],ct.dtype,Ut)}if(_e.shape.length===2){let Ut=Nf(s.bufferSync(_e),s.bufferSync(ct),Mt,Ft);return s.makeTensorInfo(Ut.shape,ct.dtype,Ut.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${_e.shape.length}.`)}var $E={kernelName:ra,backendName:"cpu",kernelFunc:e7};function t7(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{blockSize:ct,dataFormat:Mt}=_;y.assert(Mt==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${Mt}`);let Ft=_e.shape[0],Ut=_e.shape[1],Xt=_e.shape[2],Kt=_e.shape[3],nr=Ut*ct,rr=Xt*ct,or=Kt/(ct*ct),hr=s.data.get(_e.dataId).values,fr=new Float32Array(Ft*nr*rr*or),yr=0;for(let Lr=0;Lr<Ft;++Lr)for(let Br=0;Br<nr;++Br){let Vr=Math.floor(Br/ct),Wr=Br%ct;for(let ro=0;ro<rr;++ro){let no=Math.floor(ro/ct),so=(Wr*ct+ro%ct)*or;for(let ko=0;ko<or;++ko){let To=ko+so+Kt*(no+Xt*(Vr+Ut*Lr));fr[yr++]=hr[To]}}}return s.makeTensorInfo([Ft,nr,rr,or],_e.dtype,fr)}var RE={kernelName:ln,backendName:"cpu",kernelFunc:t7};function wI(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e,filter:ct}=i,{strides:Mt,pad:Ft,dilations:Ut,dimRoundingMode:Xt}=_;Q$1([_e,ct],"depthwiseConv2DNative");let Kt=y.computeStrides(_e.shape),nr=y.computeStrides(ct.shape),rr=Ut;rr==null&&(rr=[1,1]),y.assert(w.eitherStridesOrDilationsAreOne(Mt,rr),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${Mt} and dilations '${rr}'`);let or=w.computeConv2DInfo(_e.shape,ct.shape,Mt,rr,Ft,Xt,!0),{filterHeight:hr,filterWidth:fr,dilationHeight:yr,dilationWidth:Lr,padInfo:Br}=or,Vr=Br.left,Wr=Br.top,ro=or.outChannels/or.inChannels,no=new tt(or.outShape,_e.dtype),so=s.data.get(_e.dataId).values,ko=s.data.get(ct.dataId).values,To=no.values;for(let oo=0;oo<or.batchSize;++oo){let No=oo*Kt[0],As=oo*no.strides[0];for(let Ks=0;Ks<or.outHeight;++Ks){let vu=As+Ks*no.strides[1],Fu=Ks*or.strideHeight-Wr;for(let Ap=0;Ap<hr;++Ap){let Pp=Fu+Ap*yr;if(Pp<0||Pp>=or.inHeight)continue;let Lo=Ap*nr[0],Au=No+Pp*Kt[1];for(let Mp=0;Mp<or.outWidth;++Mp){let Lp=vu+Mp*no.strides[2],Op=Mp*or.strideWidth-Vr;for(let Fp=0;Fp<fr;++Fp){let wm=Op+Fp*Lr;if(wm<0||wm>=or.inWidth)continue;let Bp=Lo+Fp*nr[1],Em=Au+wm*or.inChannels,Yp=Lp,_m=Bp;for(let Tm=0;Tm<or.inChannels;++Tm){let Im=so[Em+Tm];for(let Mm=0;Mm<ro;++Mm)To[Yp+Mm]+=Im*ko[_m+Mm];Yp+=ro,_m+=ro}}}}}}return s.makeTensorInfo(no.shape,no.dtype,no.values)}var DE={kernelName:mn,backendName:"cpu",kernelFunc:wI};function r72(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e,dy:ct}=i,{strides:Mt,dilations:Ft,pad:Ut,dimRoundingMode:Xt,filterShape:Kt}=_;Q$1([_e,ct],"depthwiseConv2dNativeBackpropFilter");let nr=w.computeConv2DInfo(_e.shape,Kt,Mt,Ft,Ut,Xt,!0),{strideHeight:rr,strideWidth:or,filterHeight:hr,filterWidth:fr}=nr,yr=new tt(nr.filterShape,"float32"),Lr=nr.padInfo.left,Br=nr.padInfo.top,Vr=nr.outChannels/nr.inChannels,Wr=s.data.get(_e.dataId).values,ro=new tt(_e.shape,_e.dtype,Wr),no=s.data.get(ct.dataId).values,so=new tt(ct.shape,ct.dtype,no);for(let ko=0;ko<hr;++ko){let To=Math.max(0,Math.ceil((Br-ko)/rr)),oo=Math.min(nr.outHeight,(nr.inHeight+Br-ko)/rr);for(let No=0;No<fr;++No){let As=Math.max(0,Math.ceil((Lr-No)/or)),Ks=Math.min(nr.outWidth,(nr.inWidth+Lr-No)/or);for(let vu=0;vu<nr.outChannels;++vu){let Fu=Math.trunc(vu/Vr),Ap=vu%Vr,Pp=0;for(let Lo=0;Lo<nr.batchSize;++Lo)for(let Au=To;Au<oo;++Au){let Mp=ko+Au*rr-Br;for(let Lp=As;Lp<Ks;++Lp){let Op=No+Lp*or-Lr;Pp+=ro.get(Lo,Mp,Op,Fu)*so.get(Lo,Au,Lp,vu)}}yr.set(Pp,ko,No,Fu,Ap)}}}return s.makeTensorInfo(yr.shape,yr.dtype,yr.values)}var AE={kernelName:Pi,backendName:"cpu",kernelFunc:r72};function o7(o){let{inputs:i,backend:s,attrs:_}=o,{dy:_e,filter:ct}=i,{strides:Mt,dilations:Ft,pad:Ut,dimRoundingMode:Xt,inputShape:Kt}=_;Q$1([_e,ct],"depthwiseConv2DNativeBackpropInput");let nr=y.computeStrides(_e.shape),rr=y.computeStrides(ct.shape),or=w.computeConv2DInfo(Kt,ct.shape,Mt,Ft,Ut,Xt,!0),hr=new tt(or.inShape,"float32"),fr=hr.values,[yr,Lr,Br]=hr.strides,Vr=s.data.get(_e.dataId).values,[Wr,ro,no]=nr,so=s.data.get(ct.dataId).values,[ko,To,oo]=rr,{batchSize:No,filterHeight:As,filterWidth:Ks,inChannels:vu,inHeight:Fu,inWidth:Ap,outChannels:Pp,outHeight:Lo,outWidth:Au,strideHeight:Mp,strideWidth:Lp}=or,Op=As-1-or.padInfo.top,Fp=Ks-1-or.padInfo.left,wm=Pp/vu;for(let Bp=0;Bp<No;++Bp)for(let Em=0;Em<vu;++Em)for(let Yp=0;Yp<Fu;++Yp){let _m=Yp-Op,Tm=Math.max(0,Math.ceil(_m/Mp)),Im=Math.min(Lo,(As+_m)/Mp);for(let Mm=0;Mm<Ap;++Mm){let Bm=Mm-Fp,zm=Math.max(0,Math.ceil(Bm/Lp)),Am=Math.min(Au,(Ks+Bm)/Lp),Om=0;for(let Hm=Tm;Hm<Im;++Hm){let u1=Hm*Mp-_m;for(let a1=zm;a1<Am;++a1){let Gm=Wr*Bp+ro*Hm+no*a1,c1=ko*(As-1-u1)+To*(Ks-1-(a1*Lp-Bm))+oo*Em;for(let m1=0;m1<wm;++m1)Om+=Vr[Gm+(Em*wm+m1)]*so[c1+m1]}}fr[yr*Bp+Lr*Yp+Br*Mm+Em]=Om}}return s.makeTensorInfo(hr.shape,hr.dtype,hr.values)}var FE={kernelName:Oi,backendName:"cpu",kernelFunc:o7};function n7(o){let{inputs:i,backend:s}=o,{x:_}=i,_e=y.sizeFromShape(_.shape),ct=s.data.get(_.dataId).values,Mt=me$1([_e,_e],_.dtype),Ft=Mt.values;for(let Xt=0;Xt<ct.length;Xt++)Ft[Xt*_e+Xt]=ct[Xt];let Ut=[..._.shape,..._.shape];return s.makeTensorInfo(Ut,Mt.dtype,Mt.values)}var PE={kernelName:oa,backendName:"cpu",kernelFunc:n7},OE={kernelName:dn,backendName:"cpu",kernelFunc:({inputs:o,backend:i,attrs:s})=>{let{x:_,filter:_e}=o,{strides:ct,pad:Mt,dilations:Ft}=s,Ut=i,Xt=Ut.data.get(_.dataId).values,Kt=_.shape.length,nr=Ut.data.get(_e.dataId).values,rr=_e.shape.length,{batchSize:or,inHeight:hr,inWidth:fr,inChannels:yr,outHeight:Lr,outWidth:Br,padInfo:Vr,strideHeight:Wr,strideWidth:ro,filterHeight:no,filterWidth:so,dilationHeight:ko,dilationWidth:To,outShape:oo}=w.computeDilation2DInfo(_.shape,_e.shape,ct,Mt,"NHWC",Ft),No=y.sizeFromShape(oo),As=oo.length,Ks=y.getArrayFromDType(_.dtype,No);for(let vu=0;vu<or;++vu)for(let Fu=0;Fu<Lr;++Fu){let Ap=Fu*Wr-Vr.top;for(let Pp=0;Pp<Br;++Pp){let Lo=Pp*ro-Vr.left;for(let Au=0;Au<yr;++Au){let Mp=Number.MIN_SAFE_INTEGER;for(let Lp=0;Lp<no;++Lp){let Op=Ap+Lp*ko;if(Op>=0&&Op<hr)for(let Fp=0;Fp<so;++Fp){let wm=Lo+Fp*To;if(wm>=0&&wm<fr){let Bp=y.locToIndex([vu,Op,wm,Au],Kt,y.computeStrides(_.shape)),Em=y.locToIndex([Lp,Fp,Au],rr,y.computeStrides(_e.shape)),Yp=Xt[Bp]+nr[Em];Yp>Mp&&(Mp=Yp)}}}Ks[y.locToIndex([vu,Fu,Pp,Au],As,y.computeStrides(oo))]=Mp}}}return{dataId:Ut.write(y.toTypedArray(Ks,_.dtype),oo,_.dtype),shape:oo,dtype:_.dtype}}},ME={kernelName:Li,backendName:"cpu",kernelFunc:({inputs:o,backend:i,attrs:s})=>{let{x:_,filter:_e,dy:ct}=o,{strides:Mt,pad:Ft,dilations:Ut}=s,Xt=i,Kt=y.toNestedArray(_.shape,Xt.data.get(_.dataId).values),nr=y.toNestedArray(_e.shape,Xt.data.get(_e.dataId).values),{batchSize:rr,inHeight:or,inWidth:hr,inChannels:fr,outHeight:yr,outWidth:Lr,padInfo:Br,strideHeight:Vr,strideWidth:Wr,filterHeight:ro,filterWidth:no,dilationHeight:so,dilationWidth:ko,outShape:To}=w.computeDilation2DInfo(_.shape,_e.shape,Mt,Ft,"NHWC",Ut);y.assert(ct.rank===To.length,()=>`Error in ${Li}, dy must have the same rank as output ${To.length}, but got ${ct.rank}`);let oo=y.toNestedArray(To,Xt.data.get(ct.dataId).values),No=y.makeZerosNestedTypedArray(_e.shape,_e.dtype);for(let As=0;As<rr;++As)for(let Ks=0;Ks<yr;++Ks){let vu=Ks*Vr-Br.top;for(let Fu=0;Fu<Lr;++Fu){let Ap=Fu*Wr-Br.left;for(let Pp=0;Pp<fr;++Pp){let Lo=Number.MIN_SAFE_INTEGER,Au=0,Mp=0;for(let Lp=0;Lp<ro;++Lp){let Op=vu+Lp*so;if(Op>=0&&Op<or)for(let Fp=0;Fp<no;++Fp){let wm=Ap+Fp*ko;if(wm>=0&&wm<hr){let Bp=Kt[As][Op][wm][Pp]+nr[Lp][Fp][Pp];Bp>Lo&&(Lo=Bp,Au=Lp,Mp=Fp)}}}No[Au][Mp][Pp]+=oo[As][Ks][Fu][Pp]}}}return{dataId:Xt.write(y.toTypedArray(No,_.dtype),_e.shape,_e.dtype),shape:_e.shape,dtype:_e.dtype}}},LE={kernelName:Mi,backendName:"cpu",kernelFunc:({inputs:o,backend:i,attrs:s})=>{let{x:_,filter:_e,dy:ct}=o,{strides:Mt,pad:Ft,dilations:Ut}=s,Xt=i,Kt=y.toNestedArray(_.shape,Xt.data.get(_.dataId).values),nr=y.toNestedArray(_e.shape,Xt.data.get(_e.dataId).values),{batchSize:rr,inHeight:or,inWidth:hr,inChannels:fr,outHeight:yr,outWidth:Lr,padInfo:Br,strideHeight:Vr,strideWidth:Wr,filterHeight:ro,filterWidth:no,dilationHeight:so,dilationWidth:ko,outShape:To}=w.computeDilation2DInfo(_.shape,_e.shape,Mt,Ft,"NHWC",Ut);y.assert(ct.rank===To.length,()=>`Error in ${Mi}, dy must have the same rank as output ${To.length}, but got ${ct.rank}`);let oo=y.toNestedArray(To,Xt.data.get(ct.dataId).values),No=y.makeZerosNestedTypedArray(_.shape,_.dtype);for(let As=0;As<rr;++As)for(let Ks=0;Ks<yr;++Ks){let vu=Ks*Vr-Br.top;for(let Fu=0;Fu<Lr;++Fu){let Ap=Fu*Wr-Br.left;for(let Pp=0;Pp<fr;++Pp){let Lo=Number.MIN_SAFE_INTEGER,Au=vu<0?0:vu,Mp=Ap<0?0:Ap;for(let Lp=0;Lp<ro;++Lp){let Op=vu+Lp*so;if(Op>=0&&Op<or)for(let Fp=0;Fp<no;++Fp){let wm=Ap+Fp*ko;if(wm>=0&&wm<hr){let Bp=Kt[As][Op][wm][Pp]+nr[Lp][Fp][Pp];Bp>Lo&&(Lo=Bp,Au=Op,Mp=wm)}}}No[As][Au][Mp][Pp]+=oo[As][Ks][Fu][Pp]}}}return{dataId:Xt.write(y.toTypedArray(No,_.dtype),_.shape,_.dtype),shape:_.shape,dtype:_.dtype}}};function s7(o){let{inputs:i,backend:s,attrs:_}=o,{image:_e}=i,{canvas:ct,options:Mt}=_,{contextOptions:Ft,imageOptions:Ut}=Mt||{},Xt=(Ut==null?void 0:Ut.alpha)||1,Kt=(Ft==null?void 0:Ft.contextType)||"2d";if(Kt!=="2d")throw new Error(`Context type ${Ft.contextType} is not supported by the CPU backend.`);let nr=ct.getContext(Kt,(Ft==null?void 0:Ft.contextAttributes)||{});if(nr==null)throw new Error(`Could not get the context with ${Kt} type.`);let[rr,or]=_e.shape.slice(0,2),hr=_e.shape.length===2?1:_e.shape[2],fr=s.data.get(_e.dataId).values,yr=_e.dtype==="float32"?255:1,Lr=new Uint8ClampedArray(or*rr*4);for(let Vr=0;Vr<rr*or;++Vr){let Wr=[0,0,0,255*Xt];for(let no=0;no<hr;no++){let so=fr[Vr*hr+no];if(_e.dtype==="float32"){if(so<0||so>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${so}.`)}else if(_e.dtype==="int32"&&(so<0||so>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${so}.`);hr===1?(Wr[0]=so*yr,Wr[1]=so*yr,Wr[2]=so*yr):Wr[no]=so*yr}let ro=4*Vr;Lr[ro+0]=Math.round(Wr[0]),Lr[ro+1]=Math.round(Wr[1]),Lr[ro+2]=Math.round(Wr[2]),Lr[ro+3]=Math.round(Wr[3])}ct.width=or,ct.height=rr;let Br=new ImageData(Lr,or,rr);return nr.putImageData(Br,0,0),_e}var BE={kernelName:$u,backendName:"cpu",kernelFunc:s7};function fi(o){let i,{inputs:s,backend:_,attrs:_e}=o,{x:ct}=s,{axis:Mt,keepDims:Ft}=_e;Q$1(ct,"sum"),i=ct.dtype==="bool"?Ro({inputs:{x:ct},backend:_,attrs:{dtype:"int32"}}):lr({inputs:{x:ct},backend:_});let Ut=i.shape.length,Xt=y.parseAxisParam(Mt,i.shape),Kt=w.getAxesPermutation(Xt,Ut),nr=Xt,rr=i;Kt!=null&&(rr=St$2({inputs:{x:i},backend:_,attrs:{perm:Kt}}),nr=w.getInnerMostAxes(nr.length,Ut)),w.assertAxesAreInnerMostDims("sum",nr,rr.shape.length);let[or,hr]=w.computeOutAndReduceShapes(rr.shape,nr),fr=yc(_,or,w.upcastType(rr.dtype,"int32")),yr=y.sizeFromShape(hr),Lr=_.data.get(fr.dataId).values,Br=_.data.get(rr.dataId).values;for(let Vr=0;Vr<Lr.length;++Vr){let Wr=Vr*yr,ro=0;for(let no=0;no<yr;++no)ro+=Br[Wr+no];Lr[Vr]=ro}if(Ft){let Vr=fr;fr=We({inputs:{x:fr},backend:_,attrs:{shape:w.expandShapeToKeepDim(fr.shape,Xt)}}),_.disposeIntermediateTensorInfo(Vr)}return _.disposeIntermediateTensorInfo(i),Kt!=null&&_.disposeIntermediateTensorInfo(rr),fr}var zE={kernelName:Ss,backendName:"cpu",kernelFunc:fi};function a7(o){let{inputs:i,backend:s,attrs:_}=o,{equation:_e}=_,ct=i,{allDims:Mt,summedDims:Ft,idDims:Ut}=w.decodeEinsumEquation(_e,ct.length);w.checkEinsumDimSizes(Mt.length,Ut,ct);let{path:Xt,steps:Kt}=w.getEinsumComputePath(Ft,Ut),nr=Kt.length,rr=null,or=Mt.length,hr=[];for(let fr=0;fr<nr;++fr){for(let yr of Kt[fr]){let Lr,{permutationIndices:Br,expandDims:Vr}=w.getEinsumPermutation(or,Ut[yr]);w.isIdentityPermutation(Br)?Lr=ct[yr]:(Lr=St$2({inputs:{x:ct[yr]},backend:s,attrs:{perm:Br}}),hr.push(Lr));let Wr=Lr.shape.slice();for(let ro=0;ro<Vr.length;++ro)Wr.splice(Vr[ro],0,1);y.arraysEqual(Lr.shape,Wr)||(Lr=We({inputs:{x:Lr},backend:s,attrs:{shape:Wr}}),hr.push(Lr)),rr===null?rr=Lr:(rr=ip({inputs:{a:Lr,b:rr},backend:s}),hr.push(rr))}fr<nr-1&&(Xt[fr]>=0&&(rr=fi({inputs:{x:rr},backend:s,attrs:{axis:Xt[fr]-(Mt.length-or),keepDims:!1}}),hr.push(rr)),or--)}for(let fr of hr)fr!==rr&&s.disposeIntermediateTensorInfo(fr);return rr}var VE={kernelName:Bi,backendName:"cpu",kernelFunc:a7};function i7(o){let{inputs:i,backend:s}=o,{dy:_,y:_e}=i;Q$1([_,_e],"eluGrad");let ct=new Float32Array(y.sizeFromShape(_e.shape)),Mt=s.data.get(_e.dataId).values,Ft=s.data.get(_.dataId).values;for(let Ut=0;Ut<Mt.length;++Ut){let Xt=Mt[Ut];ct[Ut]=Xt>=0?Ft[Ut]:Ft[Ut]*(Xt+1)}return s.makeTensorInfo(_e.shape,"float32",ct)}var WE={kernelName:Xa,backendName:"cpu",kernelFunc:i7},u7=w.ERF_P,p7=w.ERF_A1,c7=w.ERF_A2,l7=w.ERF_A3,m7=w.ERF_A4,d7=w.ERF_A5,f7=Ie$1(gn,o=>{let i=Math.sign(o),s=Math.abs(o),_=1/(1+u7*s);return i*(1-((((d7*_+m7)*_+l7)*_+c7)*_+p7)*_*Math.exp(-s*s))}),UE={kernelName:gn,backendName:"cpu",kernelFunc:f7};function kc(o){let{inputs:i,backend:s,attrs:_}=o,{input:_e}=i,{dim:ct}=_,Mt=_e.shape.length,Ft=_e.shape.slice(),Ut=ct;return ct<0&&(y.assert(-(Mt+1)<=ct,()=>`Axis must be in the interval [${-(Mt+1)}, ${Mt}]`),Ut=Mt+ct+1),Ft.splice(Ut,0,1),We({inputs:{x:_e},backend:s,attrs:{shape:Ft}})}var GE={kernelName:na,backendName:"cpu",kernelFunc:kc},h7=Ve((o,i)=>o/i),Ul=Ye(fn,h7),Gl={kernelName:fn,backendName:"cpu",kernelFunc:Ul};function Vf(o,i,s){let _=o.shape,_e=_[0],ct=_[1],Mt=s.data.get(o.dataId),Ft=Mt.complexTensorInfos.real,Ut=Mt.complexTensorInfos.imag,Xt=[_e,ct],Kt=y.sizeFromShape(Xt),nr=y.getTypedArrayFromDType("float32",Kt),rr=y.getTypedArrayFromDType("float32",Kt);for(let yr=0;yr<_e;yr++){let Lr=Ao({inputs:{x:Ft},backend:s,attrs:{begin:[yr,0],size:[1,ct]}}),Br=Ao({inputs:{x:Ut},backend:s,attrs:{begin:[yr,0],size:[1,ct]}}),Vr=Ht({inputs:{real:Lr,imag:Br},backend:s}),{real:Wr,imag:ro}=g7(Vr,i,s),no=w.mergeRealAndImagArrays(Wr,ro);for(let so=0;so<ct;so++){let ko=w.getComplexWithIndex(no,so);nr[yr*ct+so]=ko.real,rr[yr*ct+so]=ko.imag}s.disposeIntermediateTensorInfo(Lr),s.disposeIntermediateTensorInfo(Br),s.disposeIntermediateTensorInfo(Vr)}let or=s.makeTensorInfo(Xt,"float32",nr),hr=s.makeTensorInfo(Xt,"float32",rr),fr=Ht({inputs:{real:or,imag:hr},backend:s});return s.disposeIntermediateTensorInfo(or),s.disposeIntermediateTensorInfo(hr),fr}function g7(o,i,s){let _=y.sizeFromShape(o.shape),_e=s.data.get(o.dataId),ct=s.data.get(_e.complexTensorInfos.real.dataId).values,Mt=s.data.get(_e.complexTensorInfos.imag.dataId).values;if(x7(_)){let Ft=SI(ct,Mt,_,i,s),Ut=[o.shape[0],o.shape[1]];if(i){let Xt=s.makeTensorInfo(Ut,"float32",Ft.real),Kt=s.makeTensorInfo(Ut,"float32",Ft.imag),nr=s.makeTensorInfo([],"float32",y.createScalarValue(_,"float32")),rr=lr({inputs:{x:nr},backend:s}),or=Gl.kernelFunc({inputs:{a:Xt,b:nr},backend:s}),hr=Gl.kernelFunc({inputs:{a:Kt,b:rr},backend:s}),fr=s.data.get(or.dataId).values,yr=s.data.get(hr.dataId).values;return s.disposeIntermediateTensorInfo(Xt),s.disposeIntermediateTensorInfo(Kt),s.disposeIntermediateTensorInfo(nr),s.disposeIntermediateTensorInfo(rr),s.disposeIntermediateTensorInfo(or),s.disposeIntermediateTensorInfo(hr),{real:fr,imag:yr}}return Ft}{let Ft=y7(w.mergeRealAndImagArrays(ct,Mt),_,i);return w.splitRealAndImagArrays(Ft)}}function x7(o){return!(o&o-1)}function SI(o,i,s,_,_e){if(s===1)return{real:o,imag:i};let ct=w.mergeRealAndImagArrays(o,i),Mt=s/2,Ft=w.complexWithEvenIndex(ct),Ut=Ft.real,Xt=Ft.imag,Kt=[Ut.length],nr=_e.makeTensorInfo(Kt,"float32",Ut),rr=_e.makeTensorInfo(Kt,"float32",Xt),or=Ht({inputs:{real:nr,imag:rr},backend:_e}),hr=w.complexWithOddIndex(ct),fr=hr.real,yr=hr.imag,Lr=[fr.length],Br=_e.makeTensorInfo(Lr,"float32",fr),Vr=_e.makeTensorInfo(Lr,"float32",yr),Wr=Ht({inputs:{real:Br,imag:Vr},backend:_e}),ro=SI(Ut,Xt,Mt,_,_e),no=ro.real,so=ro.imag,ko=[no.length],To=_e.makeTensorInfo(ko,"float32",no),oo=_e.makeTensorInfo(ko,"float32",so),No=Ht({inputs:{real:To,imag:oo},backend:_e}),As=SI(fr,yr,Mt,_,_e),Ks=As.real,vu=As.imag,Fu=[Ks.length],Ap=_e.makeTensorInfo(Fu,"float32",Ks),Pp=_e.makeTensorInfo(Fu,"float32",vu),Lo=Ht({inputs:{real:Ap,imag:Pp},backend:_e}),Au=w.exponents(s,_),Mp=[Au.real.length],Lp=_e.makeTensorInfo(Mp,"float32",Au.real),Op=_e.makeTensorInfo(Mp,"float32",Au.imag),Fp=Ht({inputs:{real:Lp,imag:Op},backend:_e}),wm=ip({inputs:{a:Fp,b:Lo},backend:_e}),Bp=Pa({inputs:{a:No,b:wm},backend:_e}),Em=Vl({inputs:{a:No,b:wm},backend:_e}),Yp=$o({inputs:{input:Bp},backend:_e}),_m=$o({inputs:{input:Em},backend:_e}),Tm=Oa({inputs:{input:Bp},backend:_e}),Im=Oa({inputs:{input:Em},backend:_e}),Mm=hu({inputs:[Yp,_m],backend:_e,attrs:{axis:0}}),Bm=hu({inputs:[Tm,Im],backend:_e,attrs:{axis:0}}),zm=_e.data.get(Mm.dataId).values,Am=_e.data.get(Bm.dataId).values;return _e.disposeIntermediateTensorInfo(nr),_e.disposeIntermediateTensorInfo(rr),_e.disposeIntermediateTensorInfo(or),_e.disposeIntermediateTensorInfo(Br),_e.disposeIntermediateTensorInfo(Vr),_e.disposeIntermediateTensorInfo(Wr),_e.disposeIntermediateTensorInfo(To),_e.disposeIntermediateTensorInfo(oo),_e.disposeIntermediateTensorInfo(No),_e.disposeIntermediateTensorInfo(Ap),_e.disposeIntermediateTensorInfo(Pp),_e.disposeIntermediateTensorInfo(Lo),_e.disposeIntermediateTensorInfo(Lp),_e.disposeIntermediateTensorInfo(Op),_e.disposeIntermediateTensorInfo(Fp),_e.disposeIntermediateTensorInfo(wm),_e.disposeIntermediateTensorInfo(Bp),_e.disposeIntermediateTensorInfo(Em),_e.disposeIntermediateTensorInfo(Yp),_e.disposeIntermediateTensorInfo(Tm),_e.disposeIntermediateTensorInfo(_m),_e.disposeIntermediateTensorInfo(Im),_e.disposeIntermediateTensorInfo(Mm),_e.disposeIntermediateTensorInfo(Bm),{real:zm,imag:Am}}function y7(o,i,s){let _=new Float32Array(2*i);for(let _e=0;_e<i;_e++){let ct=0,Mt=0;for(let Ft=0;Ft<i;Ft++){let Ut=w.exponent(_e*Ft,i,s),Xt=w.getComplexWithIndex(o,Ft);ct+=Xt.real*Ut.real-Xt.imag*Ut.imag,Mt+=Xt.real*Ut.imag+Xt.imag*Ut.real}s&&(ct/=i,Mt/=i),w.assignToTypedArray(_,ct,Mt,_e)}return _}function b7(o){let{inputs:i,backend:s}=o,{input:_}=i,_e=y.sizeFromShape(_.shape),ct=_.shape[_.shape.length-1],Mt=We({inputs:{x:_},backend:s,attrs:{shape:[_e/ct,ct]}}),Ft=Vf(Mt,!1,s),Ut=We({inputs:{x:Ft},backend:s,attrs:{shape:_.shape}});return s.disposeIntermediateTensorInfo(Mt),s.disposeIntermediateTensorInfo(Ft),Ut}var HE={kernelName:zi,backendName:"cpu",kernelFunc:b7};function Hl(o){let{backend:i,attrs:s}=o,{shape:_,value:_e,dtype:ct}=s,Mt=ct||y.inferDtype(_e),Ft=y.getArrayFromDType(Mt,y.sizeFromShape(_));return C7(Ft,_e),i.makeTensorInfo(_,Mt,Ft)}var KE={kernelName:sa,backendName:"cpu",kernelFunc:Hl};function C7(o,i,s){o.fill(i)}var qE={kernelName:Cn,backendName:"cpu",kernelFunc:({inputs:o,attrs:i,backend:s})=>{let{image:_}=o,_e=s,ct=y.getTypedArrayFromDType(_.dtype,y.sizeFromShape(_.shape)),[Mt,Ft,Ut,Xt]=_.shape,Kt=_e.data.get(_.dataId).values;for(let nr=0;nr<Mt;nr++){let rr=nr*Ut*Ft*Xt;for(let or=0;or<Ft;or++){let hr=or*(Ut*Xt);for(let fr=0;fr<Ut;fr++){let yr=fr*Xt;for(let Lr=0;Lr<Xt;Lr++){let Br=Math.round(Ut-fr-1),Vr=rr+hr+yr+Lr,Wr=Kt[Vr];Br>=0&&Br<Ut&&(Wr=Kt[rr+hr+Br*Xt+Lr]),ct[Vr]=Wr}}}}return{dataId:_e.write(ct,_.shape,_.dtype),shape:_.shape,dtype:_.dtype}}};function w7(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e,filter:ct,bias:Mt,preluActivationWeights:Ft}=i,{strides:Ut,pad:Xt,dataFormat:Kt,dilations:nr,dimRoundingMode:rr,activation:or,leakyreluAlpha:hr}=_,fr=CI({inputs:{x:_e,filter:ct},backend:s,attrs:{strides:Ut,pad:Xt,dataFormat:Kt,dilations:nr,dimRoundingMode:rr}});if(Mt){let yr=fr;if(Kt==="NCHW"&&Mt.shape.length===1&&Mt.shape[0]!==1){let Lr=We({inputs:{x:Mt},backend:s,attrs:{shape:[Mt.shape[0],1,1]}});fr=Pa({inputs:{a:fr,b:Lr},backend:s}),s.disposeIntermediateTensorInfo(Lr)}else fr=Pa({inputs:{a:fr,b:Mt},backend:s});s.disposeIntermediateTensorInfo(yr)}if(or){let yr=fr;if(Kt==="NCHW"&&or==="prelu"&&Ft.shape.length===1&&Ft.shape[0]!==1){let Lr=We({inputs:{x:Ft},backend:s,attrs:{shape:[Ft.shape[0],1,1]}});fr=fp(s,fr,or,Lr,hr),s.disposeIntermediateTensorInfo(Lr)}else fr=fp(s,fr,or,Ft,hr);s.disposeIntermediateTensorInfo(yr)}return fr}var jE={kernelName:Io,backendName:"cpu",kernelFunc:w7};function S7(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e,filter:ct,bias:Mt,preluActivationWeights:Ft}=i,{strides:Ut,pad:Xt,dataFormat:Kt,dilations:nr,dimRoundingMode:rr,activation:or,leakyreluAlpha:hr}=_,fr=wI({inputs:{x:_e,filter:ct},backend:s,attrs:{strides:Ut,pad:Xt,dataFormat:Kt,dilations:nr,dimRoundingMode:rr}});if(Mt){let yr=fr;fr=Pa({inputs:{a:fr,b:Mt},backend:s}),s.disposeIntermediateTensorInfo(yr)}if(or){let yr=fr;fr=fp(s,fr,or,Ft,hr),s.disposeIntermediateTensorInfo(yr)}return fr}var XE={kernelName:vo,backendName:"cpu",kernelFunc:S7};function I7(o){let{inputs:i,backend:s}=o,{params:_,indices:_e}=i,ct=y.sizeFromShape(_.shape),Mt=_e.shape,Ft=Mt[Mt.length-1],[Ut,Xt,Kt,nr]=w.prepareAndValidate(_,_e);if(Xt===0)return s.makeTensorInfo(Ut,_.dtype,[]);let rr=Tf(s.data.get(_e.dataId).values,s.bufferSync(_),_.dtype,Xt,Ft,Kt,nr,_.shape,ct);return s.makeTensorInfo(Ut,_.dtype,rr.values)}var YE={kernelName:vn,backendName:"cpu",kernelFunc:I7};function v7(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e,indices:ct}=i,{axis:Mt,batchDims:Ft}=_;Q$1([_e,ct],"gatherV2");let Ut=y.parseAxisParam(Mt,_e.shape)[0],Xt=s.data.get(ct.dataId).values,Kt=_e.shape[Ut];for(let Vr=0;Vr<Xt.length;++Vr){let Wr=Xt[Vr];y.assert(Wr<=Kt-1&&Wr>=0,()=>`GatherV2: the index value ${Wr} is not in [0, ${Kt-1}]`)}let nr=Ft;Ft==null&&(nr=0);let rr=y.sizeFromShape(ct.shape),or=w.segment_util.collectGatherOpShapeInfo(_e,ct,Ut,nr),hr=We({inputs:{x:_e},backend:s,attrs:{shape:[or.batchSize,or.outerSize,or.dimSize,or.sliceSize]}}),fr=We({inputs:{x:ct},backend:s,attrs:{shape:[or.batchSize,rr/or.batchSize]}}),yr=[or.batchSize,or.outerSize,rr/or.batchSize,or.sliceSize],Lr=s.bufferSync(fr),Br=_f(s.bufferSync(hr),Lr,yr);return s.disposeIntermediateTensorInfo(hr),s.disposeIntermediateTensorInfo(fr),s.makeTensorInfo(or.outputShape,Br.dtype,Br.values)}var QE={kernelName:aa,backendName:"cpu",kernelFunc:v7};function k7(o){let{inputs:i,backend:s}=o,{input:_}=i,_e=y.sizeFromShape(_.shape),ct=_.shape[_.shape.length-1],Mt=We({inputs:{x:_},backend:s,attrs:{shape:[_e/ct,ct]}}),Ft=Vf(Mt,!0,s),Ut=We({inputs:{x:Ft},backend:s,attrs:{shape:_.shape}});return s.disposeIntermediateTensorInfo(Mt),s.disposeIntermediateTensorInfo(Ft),Ut}var ZE={kernelName:Vi,backendName:"cpu",kernelFunc:k7},N7=Ie$1(Tn,o=>Number.isFinite(o)?1:0,"bool"),JE={kernelName:Tn,backendName:"cpu",kernelFunc:N7},T7=Ie$1(_n,o=>Math.abs(o)===1/0?1:0,"bool"),e$={kernelName:_n,backendName:"cpu",kernelFunc:T7},_7=Ie$1(En,o=>Number.isNaN(o)?1:0,"bool"),t$={kernelName:En,backendName:"cpu",kernelFunc:_7};function E7(o){let{backend:i,attrs:s}=o,{start:_,stop:_e,num:ct}=s,Mt=Ef(_,_e,ct);return i.makeTensorInfo([Mt.length],"float32",Mt)}var r$={kernelName:An,backendName:"cpu",kernelFunc:E7},$7=Ie$1(Pn,o=>Math.log1p(o)),o$={kernelName:Pn,backendName:"cpu",kernelFunc:$7},R7=Ve((o,i)=>o&&i),D7=Ye(On,R7,null,"bool"),n$={kernelName:On,backendName:"cpu",kernelFunc:D7},A7=Ie$1(Mn,o=>o?0:1,"bool"),s$={kernelName:Mn,backendName:"cpu",kernelFunc:A7},F7=Ve((o,i)=>o||i),P7=Ye(Ln,F7,null,"bool"),a$={kernelName:Ln,backendName:"cpu",kernelFunc:P7};function O7(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{depthRadius:ct,bias:Mt,alpha:Ft,beta:Ut}=_;Q$1(_e,"LRN");let Xt=_e.shape[3],Kt=Xt-1,nr=s.data.get(_e.dataId).values,rr=y.sizeFromShape(_e.shape),or=new Float32Array(rr);function hr(fr){let yr=fr%Xt,Lr=fr-yr+Math.max(0,yr-ct),Br=fr-yr+Math.min(yr+ct,Kt),Vr=0;for(;Lr<=Br;Lr++){let Wr=nr[Lr];Vr+=Wr*Wr}return Vr}for(let fr=0;fr<rr;fr++){let yr=hr(fr),Lr=nr[fr]*Math.pow(Mt+Ft*yr,-Ut);or[fr]=Lr}return s.makeTensorInfo(_e.shape,_e.dtype,or)}var i$={kernelName:Bn,backendName:"cpu",kernelFunc:O7};function M7(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e,y:ct,dy:Mt}=i,{depthRadius:Ft,bias:Ut,alpha:Xt,beta:Kt}=_;Q$1(Mt,"LRNGrad");let nr=y.sizeFromShape(Mt.shape),rr=Mt.shape[3],or=s.data.get(Mt.dataId).values,hr=s.data.get(_e.dataId).values,fr=s.data.get(ct.dataId).values,yr=new Float32Array(nr),Lr=nr;for(let Br=0;Br<Lr;Br++){let Vr=Br%rr,Wr=Br-Vr+Math.max(0,Vr-Ft),ro=Br-Vr+Math.min(rr,Vr+Ft+1),no=0;for(let so=Wr;so<ro;so++)no+=Math.pow(hr[so],2);no=Xt*no+Ut;for(let so=Wr;so<ro;so++){let ko=-2*Xt*Kt*hr[so]*fr[Br]/no;Br===so&&(ko+=Math.pow(no,-Kt)),ko*=or[Br],yr[so]+=ko}}return s.makeTensorInfo(Mt.shape,_e.dtype,yr)}var u$={kernelName:Ya,backendName:"cpu",kernelFunc:M7};function II(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{reductionIndices:ct,keepDims:Mt}=_,Ft=s,Ut=_e.shape,Xt=Ut.length,Kt=y.parseAxisParam(ct,Ut),nr=Kt,rr=w.getAxesPermutation(nr,Xt),or=Ft.data.get(_e.dataId).values;if(rr!=null){let Vr=new Array(Xt);for(let Wr=0;Wr<Vr.length;Wr++)Vr[Wr]=Ut[rr[Wr]];or=wc(or,Ut,_e.dtype,rr,Vr),nr=w.getInnerMostAxes(nr.length,Xt),Ut=Vr}Q$1(_e,"max"),w.assertAxesAreInnerMostDims("max",nr,Xt);let[hr,fr]=w.computeOutAndReduceShapes(Ut,nr),yr=$f(or,y.sizeFromShape(fr),hr,_e.dtype),Lr=Ft.write(yr,hr,_e.dtype),Br=hr;return Mt&&(Br=w.expandShapeToKeepDim(hr,Kt)),{dataId:Lr,shape:Br,dtype:_e.dtype}}var p$={kernelName:zn,backendName:"cpu",kernelFunc:II};function L7(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i;Q$1(_e,"maxPool");let{filterSize:ct,strides:Mt,pad:Ft,dimRoundingMode:Ut}=_;y.assert(w.eitherStridesOrDilationsAreOne(Mt,1),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${Mt} and dilations '1'`);let Xt,Kt=w.computePool2DInfo(_e.shape,ct,Mt,1,Ft,Ut);if(Kt.filterWidth===1&&Kt.filterHeight===1&&y.arraysEqual(Kt.inShape,Kt.outShape))Xt=lr({inputs:{x:_e},backend:s});else{let nr=s.data.get(_e.dataId).values,rr=y.computeStrides(_e.shape),or=vc(nr,_e.shape,_e.dtype,rr,Kt,"max");Xt=s.makeTensorInfo(Kt.outShape,_e.dtype,or.values)}return Xt}var c$={kernelName:Wn,backendName:"cpu",kernelFunc:L7};function B7(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{filterSize:ct,strides:Mt,pad:Ft,dimRoundingMode:Ut,dataFormat:Xt}=_;Q$1(_e,"maxPool3d");let Kt=w.computePool3DInfo(_e.shape,ct,Mt,1,Ft,Ut,Xt),nr=zf(s.data.get(_e.dataId).values,_e.shape,_e.dtype,y.computeStrides(_e.shape),Kt,"max");return s.makeTensorInfo(nr.shape,"float32",nr.values)}var l$={kernelName:ia,backendName:"cpu",kernelFunc:B7};function z7(o){let{inputs:i,backend:s,attrs:_}=o,{dy:_e,input:ct}=i,{filterSize:Mt,strides:Ft,pad:Ut,dimRoundingMode:Xt}=_;Q$1([_e,ct],"maxPool3DGrad");let Kt=w.computePool3DInfo(ct.shape,Mt,Ft,1,Ut,Xt),nr=aE(s.bufferSync(ct),Kt),rr=Kt.strideDepth,or=Kt.strideHeight,hr=Kt.strideWidth,fr=Kt.dilationDepth,yr=Kt.dilationHeight,Lr=Kt.dilationWidth,Br=Kt.effectiveFilterDepth,Vr=Kt.effectiveFilterHeight,Wr=Kt.effectiveFilterWidth,ro=Br-1-Kt.padInfo.front,no=Wr-1-Kt.padInfo.left,so=Vr-1-Kt.padInfo.top,ko=me$1(ct.shape,"float32"),To=s.bufferSync(_e);for(let oo=0;oo<Kt.batchSize;++oo)for(let No=0;No<Kt.inChannels;++No)for(let As=0;As<Kt.inDepth;++As)for(let Ks=0;Ks<Kt.inHeight;++Ks)for(let vu=0;vu<Kt.inWidth;++vu){let Fu=As-ro,Ap=Ks-so,Pp=vu-no,Lo=0;for(let Au=0;Au<Br;Au+=fr){let Mp=(Fu+Au)/rr;if(!(Mp<0||Mp>=Kt.outDepth||Math.floor(Mp)!==Mp))for(let Lp=0;Lp<Vr;Lp+=yr){let Op=(Ap+Lp)/or;if(!(Op<0||Op>=Kt.outHeight||Math.floor(Op)!==Op))for(let Fp=0;Fp<Wr;Fp+=Lr){let wm=(Pp+Fp)/hr;if(wm<0||wm>=Kt.outWidth||Math.floor(wm)!==wm)continue;let Bp=Br*Vr*Wr-1-nr.get(oo,Mp,Op,wm,No)===Au*Vr*Wr+Lp*Wr+Fp?1:0;Bp!==0&&(Lo+=To.get(oo,Mp,Op,wm,No)*Bp)}}}ko.set(Lo,oo,As,Ks,vu,No)}return s.makeTensorInfo(ko.shape,ko.dtype,ko.values)}var m$={kernelName:Gi,backendName:"cpu",kernelFunc:z7};function V7(o){let{inputs:i,backend:s,attrs:_}=o,{dy:_e,input:ct,output:Mt}=i,Ft=ct;Q$1([ct,Mt],"maxPoolGrad");let{filterSize:Ut,strides:Xt,pad:Kt,dimRoundingMode:nr}=_,rr=w.computePool2DInfo(Ft.shape,Ut,Xt,1,Kt,nr),or=s.data.get(Ft.dataId).values,hr=me$1(rr.outShape,Ft.dtype,Bf(or,Ft.shape,Ft.dtype,rr).values),fr=rr.strideHeight,yr=rr.strideWidth,Lr=rr.dilationHeight,Br=rr.dilationWidth,Vr=rr.effectiveFilterHeight,Wr=rr.effectiveFilterWidth,ro=Wr-1-rr.padInfo.left,no=Vr-1-rr.padInfo.top,so=me$1(Ft.shape,"float32"),ko=s.data.get(_e.dataId).values,To=me$1(_e.shape,"float32",ko);for(let oo=0;oo<rr.batchSize;++oo)for(let No=0;No<rr.inChannels;++No)for(let As=0;As<rr.inHeight;++As)for(let Ks=0;Ks<rr.inWidth;++Ks){let vu=As-no,Fu=Ks-ro,Ap=0;for(let Pp=0;Pp<Vr;Pp+=Lr){let Lo=(vu+Pp)/fr;if(!(Lo<0||Lo>=rr.outHeight||Math.floor(Lo)!==Lo))for(let Au=0;Au<Wr;Au+=Br){let Mp=(Fu+Au)/yr;if(Mp<0||Mp>=rr.outWidth||Math.floor(Mp)!==Mp)continue;let Lp=Vr*Wr-1-hr.get(oo,Lo,Mp,No)===Pp*Wr+Au?1:0;Lp!==0&&(Ap+=To.get(oo,Lo,Mp,No)*Lp)}}so.set(Ap,oo,As,Ks,No)}return s.makeTensorInfo(so.shape,so.dtype,so.values)}var d$={kernelName:Ui,backendName:"cpu",kernelFunc:V7};function f$(o,i,s,_,_e){let ct=vc(o,i,s,y.computeStrides(i),_e,"max"),Mt=Bf(o,i,s,_e,!0,_);return[ct.values,Mt.values]}var h$={kernelName:ua,backendName:"cpu",kernelFunc:({inputs:o,attrs:i,backend:s})=>{let{x:_}=o,{filterSize:_e,strides:ct,pad:Mt,includeBatchInIndex:Ft}=i,Ut=s;Q$1(_,"MaxPoolWithArgmax");let Xt=Ut.data.get(_.dataId).values,Kt=w.computePool2DInfo(_.shape,_e,ct,[1,1],Mt),[nr,rr]=f$(Xt,_.shape,_.dtype,Ft,Kt),or=Ut.write(nr,Kt.outShape,_.dtype),hr=Ut.write(rr,Kt.outShape,_.dtype);return[{dataId:or,shape:Kt.outShape,dtype:_.dtype},{dataId:hr,shape:Kt.outShape,dtype:"int32"}]}};function W7(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{axis:ct,keepDims:Mt}=_,Ft=y.parseAxisParam(ct,_e.shape),Ut=w.computeOutAndReduceShapes(_e.shape,Ft)[1],Xt=y.sizeFromShape(Ut),Kt=[],nr=s.makeTensorInfo([],"float32",new Float32Array([Xt]));Kt.push(nr);let rr=Ro({inputs:{x:_e},backend:s,attrs:{dtype:"float32"}});Kt.push(rr);let or=Ul({inputs:{a:rr,b:nr},backend:s});Kt.push(or);let hr=fi({inputs:{x:or},backend:s,attrs:{axis:ct,keepDims:Mt}});return Kt.forEach(fr=>s.disposeIntermediateTensorInfo(fr)),hr}var g$={kernelName:Un,backendName:"cpu",kernelFunc:W7};function U7(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{axis:ct,keepDims:Mt}=_;Q$1(_e,"min");let Ft=y.parseAxisParam(ct,_e.shape),Ut=Ft,Xt=w.getAxesPermutation(Ut,_e.shape.length),Kt=_e;Xt!=null&&(Kt=St$2({inputs:{x:_e},backend:s,attrs:{perm:Xt}}),Ut=w.getInnerMostAxes(Ut.length,_e.shape.length)),w.assertAxesAreInnerMostDims("min",Ut,Kt.shape.length);let[nr,rr]=w.computeOutAndReduceShapes(Kt.shape,Ut),or=y.sizeFromShape(rr),hr=y.makeZerosTypedArray(y.sizeFromShape(nr),Kt.dtype),fr=s.data.get(Kt.dataId).values;for(let Lr=0;Lr<hr.length;++Lr){let Br=Lr*or,Vr=fr[Br];for(let Wr=0;Wr<or;++Wr){let ro=fr[Br+Wr];(Number.isNaN(ro)||ro<Vr)&&(Vr=ro)}hr[Lr]=Vr}Xt!=null&&s.disposeIntermediateTensorInfo(Kt);let yr=s.makeTensorInfo(nr,Kt.dtype,hr);if(Mt){let Lr=We({inputs:{x:yr},backend:s,attrs:{shape:w.expandShapeToKeepDim(nr,Ft)}});return s.disposeIntermediateTensorInfo(yr),Lr}return yr}var x$={kernelName:Gn,backendName:"cpu",kernelFunc:U7};function G7(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{paddings:ct,mode:Mt}=_;Q$1(_e,"mirrorPad");let Ft=ct.map((Br,Vr)=>Br[0]+_e.shape[Vr]+Br[1]),Ut=ct.map(Br=>Br[0]),Xt=ct.map((Br,Vr)=>Br[0]+_e.shape[Vr]),Kt=Mt==="reflect"?0:1,nr=s.data.get(_e.dataId).values,rr=_e.shape.length,or=y.computeStrides(_e.shape),hr=y.sizeFromShape(Ft),fr=Ft.length,yr=y.computeStrides(Ft),Lr=y.getTypedArrayFromDType(_e.dtype,hr);for(let Br=0;Br<hr;Br++){let Vr=y.indexToLoc(Br,fr,yr);for(let ro=0;ro<fr;ro++)Vr[ro]<Ut[ro]?Vr[ro]=2*Ut[ro]-Vr[ro]-Kt:Vr[ro]>=Xt[ro]&&(Vr[ro]=2*(Xt[ro]-1)-Vr[ro]+Kt);Vr=Vr.map((ro,no)=>ro-Ut[no]);let Wr=y.locToIndex(Vr,rr,or);Lr[Br]=nr[Wr]}return{dataId:s.write(Lr,Ft,_e.dtype),shape:Ft,dtype:_e.dtype}}var y$={kernelName:Kn,backendName:"cpu",kernelFunc:G7},H7=Ve((o,i)=>{let s=o%i;return o<0&&i<0||o>=0&&i>=0?s:(s+i)%i}),K7=Ye(qn,H7),b$={kernelName:qn,backendName:"cpu",kernelFunc:K7},w$=zp(jw());function vI(o){let{inputs:i,backend:s,attrs:_}=o,{logits:_e}=i,{dim:ct}=_,Mt=_e.shape.length,Ft=ct;if(Ft===-1&&(Ft=Mt-1),Ft!==Mt-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${Mt} and dim was ${Ft}`);let Ut=y.parseAxisParam([Ft],_e.shape),Xt=II({inputs:{x:_e},backend:s,attrs:{reductionIndices:Ut,keepDims:!1}}),Kt=w.expandShapeToKeepDim(Xt.shape,Ut),nr=We({inputs:{x:Xt},backend:s,attrs:{shape:Kt}}),rr=Vl({inputs:{a:_e,b:nr},backend:s}),or=qS({inputs:{x:rr},backend:s}),hr=fi({inputs:{x:or},backend:s,attrs:{axis:Ut,keepDims:!1}}),fr=We({inputs:{x:hr},backend:s,attrs:{shape:Kt}}),yr=Ul({inputs:{a:or,b:fr},backend:s});return s.disposeIntermediateTensorInfo(Xt),s.disposeIntermediateTensorInfo(nr),s.disposeIntermediateTensorInfo(rr),s.disposeIntermediateTensorInfo(or),s.disposeIntermediateTensorInfo(hr),s.disposeIntermediateTensorInfo(fr),yr}var C$={kernelName:Is,backendName:"cpu",kernelFunc:vI};function q7(o){let{inputs:i,backend:s,attrs:_}=o,{logits:_e}=i,{numSamples:ct,seed:Mt,normalized:Ft}=_;Q$1(_e,"multinomial");let Ut=Ft?_e:vI({inputs:{logits:_e},backend:s,attrs:{dim:-1}}),Xt=Ut.shape[0],Kt=Ut.shape[1],nr=s.data.get(Ut.dataId).values,rr=[Xt,ct],or=y.makeZerosTypedArray(y.sizeFromShape(rr),"int32");for(let hr=0;hr<Xt;++hr){let fr=hr*Kt,yr=new Float32Array(Kt-1);yr[0]=nr[fr];for(let Vr=1;Vr<yr.length;++Vr)yr[Vr]=yr[Vr-1]+nr[fr+Vr];let Lr=w$.alea(Mt.toString()),Br=hr*ct;for(let Vr=0;Vr<ct;++Vr){let Wr=Lr();or[Br+Vr]=yr.length;for(let ro=0;ro<yr.length;ro++)if(Wr<yr[ro]){or[Br+Vr]=ro;break}}}return Ft||s.disposeIntermediateTensorInfo(Ut),s.makeTensorInfo(rr,"int32",or)}var S$={kernelName:jn,backendName:"cpu",kernelFunc:q7},j7=Vt.nonMaxSuppressionV3Impl;function X7(o){let{inputs:i,backend:s,attrs:_}=o,{boxes:_e,scores:ct}=i,{maxOutputSize:Mt,iouThreshold:Ft,scoreThreshold:Ut}=_;Q$1(_e,"NonMaxSuppression");let Xt=s.data.get(_e.dataId).values,Kt=s.data.get(ct.dataId).values,{selectedIndices:nr}=j7(Xt,Kt,Mt,Ft,Ut);return s.makeTensorInfo([nr.length],"int32",new Int32Array(nr))}var I$={kernelName:Qn,backendName:"cpu",kernelFunc:X7},Y7=Vt.nonMaxSuppressionV4Impl;function Q7(o){let{inputs:i,backend:s,attrs:_}=o,{boxes:_e,scores:ct}=i,{maxOutputSize:Mt,iouThreshold:Ft,scoreThreshold:Ut,padToMaxOutputSize:Xt}=_;Q$1(_e,"NonMaxSuppressionPadded");let Kt=s.data.get(_e.dataId).values,nr=s.data.get(ct.dataId).values,{selectedIndices:rr,validOutputs:or}=Y7(Kt,nr,Mt,Ft,Ut,Xt);return[s.makeTensorInfo([rr.length],"int32",new Int32Array(rr)),s.makeTensorInfo([],"int32",new Int32Array([or]))]}var v$={kernelName:Qa,backendName:"cpu",kernelFunc:Q7},Z7=Vt.nonMaxSuppressionV5Impl;function J7(o){let{inputs:i,backend:s,attrs:_}=o,{boxes:_e,scores:ct}=i,{maxOutputSize:Mt,iouThreshold:Ft,scoreThreshold:Ut,softNmsSigma:Xt}=_;Q$1(_e,"NonMaxSuppressionWithScore");let Kt=s.data.get(_e.dataId).values,nr=s.data.get(ct.dataId).values,rr=Mt,or=Ft,hr=Ut,fr=Xt,{selectedIndices:yr,selectedScores:Lr}=Z7(Kt,nr,rr,or,hr,fr);return[s.makeTensorInfo([yr.length],"int32",new Int32Array(yr)),s.makeTensorInfo([Lr.length],"float32",new Float32Array(Lr))]}var k$={kernelName:Zn,backendName:"cpu",kernelFunc:J7};function eQ(o){let{inputs:i,backend:s,attrs:_}=o,{indices:_e}=i,{dtype:ct,depth:Mt,onValue:Ft,offValue:Ut}=_;Q$1(_e,"oneHot");let Xt=y.sizeFromShape(_e.shape),Kt=new Float32Array(Xt*Mt);Kt.fill(Ut);let nr=s.data.get(_e.dataId).values;for(let rr=0;rr<Xt;++rr)nr[rr]>=0&&nr[rr]<Mt&&(Kt[rr*Mt+nr[rr]]=Ft);return s.makeTensorInfo([..._e.shape,Mt],ct,Kt)}var N$={kernelName:Jn,backendName:"cpu",kernelFunc:eQ};function Kl(o){let{inputs:i,backend:s}=o,{x:_}=i;if(_.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(_.dtype==="complex64"){let _e=$o({inputs:{input:_},backend:s}),ct=Kl({inputs:{x:_e},backend:s}),Mt=Oa({inputs:{input:_},backend:s}),Ft=Kl({inputs:{x:Mt},backend:s}),Ut=Ht({inputs:{real:ct,imag:Ft},backend:s});return s.disposeIntermediateTensorInfo(_e),s.disposeIntermediateTensorInfo(ct),s.disposeIntermediateTensorInfo(Mt),s.disposeIntermediateTensorInfo(Ft),Ut}return Hl({backend:s,attrs:{shape:_.shape,value:0,dtype:_.dtype}})}var T$={kernelName:Sa,backendName:"cpu",kernelFunc:Kl};function _$(o){let{inputs:i,backend:s}=o,{x:_}=i;if(_.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(_.dtype==="complex64"){let _e=$o({inputs:{input:_},backend:s}),ct=_$({inputs:{x:_e},backend:s}),Mt=Oa({inputs:{input:_},backend:s}),Ft=Kl({inputs:{x:Mt},backend:s}),Ut=Ht({inputs:{real:ct,imag:Ft},backend:s});return s.disposeIntermediateTensorInfo(_e),s.disposeIntermediateTensorInfo(ct),s.disposeIntermediateTensorInfo(Mt),s.disposeIntermediateTensorInfo(Ft),Ut}return Hl({backend:s,attrs:{shape:_.shape,value:1,dtype:_.dtype}})}var E$={kernelName:ca,backendName:"cpu",kernelFunc:_$};function kI(o){let{inputs:i,backend:s,attrs:_}=o,{axis:_e}=_;if(i.length===1)return kc({inputs:{input:i[0]},backend:s,attrs:{dim:_e}});let ct=i[0].shape,Mt=i[0].dtype;i.forEach(Xt=>{y.assertShapesMatch(ct,Xt.shape,"All tensors passed to stack must have matching shapes"),y.assert(Mt===Xt.dtype,()=>"All tensors passed to stack must have matching dtypes")});let Ft=[],Ut=hu({inputs:i.map(Xt=>{let Kt=kc({inputs:{input:Xt},backend:s,attrs:{dim:_e}});return Ft.push(Kt),Kt}),backend:s,attrs:{axis:_e}});return Ft.forEach(Xt=>s.disposeIntermediateTensorInfo(Xt)),Ut}var $$={kernelName:la,backendName:"cpu",kernelFunc:kI};function tQ(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{paddings:ct,constantValue:Mt}=_;Q$1(_e,"pad");let Ft=ct.map((Lr,Br)=>Lr[0]+_e.shape[Br]+Lr[1]),Ut=ct.map(Lr=>Lr[0]),Xt=s.data.get(_e.dataId).values,Kt=y.sizeFromShape(_e.shape),nr=_e.shape.length,rr=y.computeStrides(_e.shape),or=y.sizeFromShape(Ft),hr=Ft.length,fr=y.computeStrides(Ft),yr=y.getTypedArrayFromDType(_e.dtype,or);Mt!==0&&yr.fill(Mt);for(let Lr=0;Lr<Kt;Lr++){let Br=y.indexToLoc(Lr,nr,rr).map((Vr,Wr)=>Vr+Ut[Wr]);yr[y.locToIndex(Br,hr,fr)]=Xt[Lr]}return{dataId:s.write(yr,Ft,_e.dtype),shape:Ft,dtype:_e.dtype}}var Wf={kernelName:es,backendName:"cpu",kernelFunc:tQ},rQ=Ve((o,i)=>Math.pow(o,i)),oQ=Ye(ts,rQ),R$={kernelName:ts,backendName:"cpu",kernelFunc:oQ};function nQ(o){let{inputs:i,backend:s,attrs:_}=o,{paramsNestedSplits:_e,paramsDenseValues:ct,indices:Mt}=i,Ft=_e.map(yr=>s.data.get(yr.dataId).values),Ut=_e.map(yr=>yr.shape),Xt=s.data.get(ct.dataId).values,Kt=s.data.get(Mt.dataId).values,[nr,rr,or]=Rf(Ft,Ut,Xt,ct.shape,ct.dtype,Kt,Mt.shape),hr=nr.map(yr=>s.makeTensorInfo([yr.length],"int32",yr)),fr=s.makeTensorInfo(or,ct.dtype,rr);return hr.concat([fr])}var D$={kernelName:Hp,backendName:"cpu",kernelFunc:nQ};function sQ(o){let{inputs:i,backend:s}=o,{starts:_,limits:_e,deltas:ct}=i,Mt=s.data.get(_.dataId).values,Ft=s.data.get(_e.dataId).values,Ut=s.data.get(ct.dataId).values,[Xt,Kt]=Df(Mt,_.shape,_.dtype,Ft,_e.shape,Ut,ct.shape);return[s.makeTensorInfo([Xt.length],"int32",Xt),s.makeTensorInfo([Kt.length],_.dtype,Kt)]}var A$={kernelName:Kp,backendName:"cpu",kernelFunc:sQ};function aQ(o){let{inputs:i,backend:s,attrs:_}=o,{shape:_e,values:ct,defaultValue:Mt,rowPartitionTensors:Ft}=i,{rowPartitionTypes:Ut}=_,Xt=s.data.get(_e.dataId).values,Kt=s.data.get(ct.dataId).values,nr=s.data.get(Mt.dataId).values,rr=Ft.map(yr=>s.data.get(yr.dataId).values),or=Ft.map(yr=>yr.shape),[hr,fr]=Af(Xt,_e.shape,Kt,ct.shape,ct.dtype,nr,Mt.shape,rr,or,Ut);return s.makeTensorInfo(hr,ct.dtype,fr)}var F$={kernelName:qp,backendName:"cpu",kernelFunc:aQ};function iQ(o){let{backend:i,attrs:s}=o,{start:_,stop:_e,dtype:ct,step:Mt}=s,Ft=up(_,_e,Mt,ct);return i.makeTensorInfo([Ft.length],ct,Ft)}var P$={kernelName:ma,backendName:"cpu",kernelFunc:iQ},uQ=Ie$1(ns,o=>1/o),O$={kernelName:ns,backendName:"cpu",kernelFunc:uQ};function pQ(o){let{inputs:i,backend:s,attrs:_}=o,{images:_e}=i,{alignCorners:ct,halfPixelCenters:Mt,size:Ft}=_;Q$1(_e,"resizeBilinear");let Ut=y.computeStrides(_e.shape),[Xt,Kt]=Ft,[nr,rr,or,hr]=_e.shape,fr=s.data.get(_e.dataId).values,yr=new Float32Array(y.sizeFromShape([nr,Xt,Kt,hr])),Lr=[ct&&Xt>1?rr-1:rr,ct&&Kt>1?or-1:or],Br=[ct&&Xt>1?Xt-1:Xt,ct&&Kt>1?Kt-1:Kt],Vr=0,Wr=Lr[0]/Br[0],ro=Lr[1]/Br[1];for(let no=0;no<nr;no++)for(let so=0;so<Xt;so++){let ko;ko=Mt?Wr*(so+.5)-.5:Wr*so;let To=Math.max(0,Math.floor(ko)),oo=ko-To,No=Math.min(rr-1,Math.ceil(ko)),As=no*Ut[0]+To*Ut[1],Ks=no*Ut[0]+No*Ut[1];for(let vu=0;vu<Kt;vu++){let Fu;Fu=Mt?ro*(vu+.5)-.5:ro*vu;let Ap=Math.max(0,Math.floor(Fu)),Pp=Fu-Ap,Lo=Math.min(or-1,Math.ceil(Fu)),Au=As+Ap*Ut[2],Mp=Ks+Ap*Ut[2],Lp=As+Lo*Ut[2],Op=Ks+Lo*Ut[2];for(let Fp=0;Fp<hr;Fp++){let wm=fr[Au+Fp],Bp=fr[Mp+Fp],Em=wm+(fr[Lp+Fp]-wm)*Pp,Yp=Em+(Bp+(fr[Op+Fp]-Bp)*Pp-Em)*oo;yr[Vr++]=Yp}}}return s.makeTensorInfo([nr,Xt,Kt,hr],"float32",yr)}var M$={kernelName:is,backendName:"cpu",kernelFunc:pQ};function cQ(o){let{inputs:i,backend:s,attrs:_}=o,{images:_e,dy:ct}=i,{alignCorners:Mt}=_;Q$1([ct,_e],"resizeBilinearGrad");let Ft=y.computeStrides(_e.shape),[Ut,Xt,Kt,nr]=_e.shape,[,rr,or]=ct.shape,hr=new Float32Array(Ut*Xt*Kt*nr),fr=[Mt&&rr>1?Xt-1:Xt,Mt&&or>1?Kt-1:Kt],yr=[Mt&&rr>1?rr-1:rr,Mt&&or>1?or-1:or],Lr=fr[0]/yr[0],Br=fr[1]/yr[1],Vr=s.data.get(ct.dataId).values,Wr=0;for(let ro=0;ro<Ut;ro++){let no=ro*Ft[0];for(let so=0;so<rr;so++){let ko=so*Lr,To=Math.floor(ko),oo=Math.min(Math.ceil(ko),Xt-1),No=no+To*Ft[1],As=no+oo*Ft[1],Ks=ko-To,vu=1-Ks;for(let Fu=0;Fu<or;Fu++){let Ap=Fu*Br,Pp=Math.floor(Ap),Lo=Math.min(Math.ceil(Ap),Kt-1),Au=Ap-Pp,Mp=1-Au,Lp=No+Pp*Ft[2],Op=No+Lo*Ft[2],Fp=As+Pp*Ft[2],wm=As+Lo*Ft[2],Bp=vu*Mp,Em=vu*Au,Yp=Ks*Mp,_m=Ks*Au;for(let Tm=0;Tm<nr;Tm++){let Im=Vr[Wr++];hr[Lp+Tm]+=Im*Bp,hr[Op+Tm]+=Im*Em,hr[Fp+Tm]+=Im*Yp,hr[wm+Tm]+=Im*_m}}}}return s.makeTensorInfo([Ut,Kt,Xt,nr],"float32",hr)}var L$={kernelName:Ja,backendName:"cpu",kernelFunc:cQ};function lQ(o){let{inputs:i,backend:s,attrs:_}=o,{images:_e}=i,{alignCorners:ct,halfPixelCenters:Mt,size:Ft}=_;Q$1(_e,"resizeNearestNeighbor");let Ut=y.computeStrides(_e.shape),[Xt,Kt]=Ft,[nr,rr,or,hr]=_e.shape,fr=s.data.get(_e.dataId).values,yr=new Float32Array(nr*Xt*Kt*hr),Lr=[ct&&Xt>1?rr-1:rr,ct&&Kt>1?or-1:or],Br=[ct&&Xt>1?Xt-1:Xt,ct&&Kt>1?Kt-1:Kt],Vr=Lr[0]/Br[0],Wr=Lr[1]/Br[1],ro=0;for(let no=0;no<nr;no++){let so=no*Ut[0];for(let ko=0;ko<Xt;ko++){let To=Mt?Vr*(ko+.5):Vr*ko,oo=Math.min(rr-1,ct?Math.round(To):Math.floor(To));Mt&&(oo=Math.max(0,oo));let No=so+oo*Ut[1];for(let As=0;As<Kt;As++){let Ks=Mt?Wr*(As+.5):Wr*As,vu=Math.min(or-1,ct?Math.round(Ks):Math.floor(Ks));Mt&&(vu=Math.max(0,vu));let Fu=No+vu*Ut[2];for(let Ap=0;Ap<hr;Ap++){let Pp=fr[Fu+Ap];yr[ro++]=Pp}}}}return s.makeTensorInfo([nr,Xt,Kt,hr],_e.dtype,yr)}var B$={kernelName:as,backendName:"cpu",kernelFunc:lQ};function mQ(o){let{inputs:i,backend:s,attrs:_}=o,{images:_e,dy:ct}=i,{alignCorners:Mt}=_;Q$1([ct,_e],"resizeNearestNeighborGrad");let Ft=y.computeStrides(_e.shape),Ut=y.computeStrides(ct.shape),[Xt,Kt,nr,rr]=_e.shape,[,or,hr]=ct.shape,fr=new Float32Array(Xt*Kt*nr*rr),yr=s.data.get(ct.dataId).values,Lr=[Mt&&or>1?Kt-1:Kt,Mt&&hr>1?nr-1:nr],Br=[Mt&&or>1?or-1:or,Mt&&hr>1?hr-1:hr],Vr=Lr[0]/Br[0],Wr=Lr[1]/Br[1],ro=1/Vr,no=1/Wr,so=2*Math.ceil(ro)+2,ko=2*Math.ceil(no)+2;for(let To=0;To<Xt;To++){let oo=To*Ft[0];for(let No=0;No<Kt;No++){let As=oo+No*Ft[1],Ks=Math.floor(No*ro),vu=Math.floor(Ks-so/2);for(let Fu=0;Fu<nr;Fu++){let Ap=As+Fu*Ft[2],Pp=Math.floor(Fu*no),Lo=Math.floor(Pp-ko/2);for(let Au=0;Au<rr;Au++){let Mp=0;for(let Lp=0;Lp<so;Lp++){let Op=Lp+vu;if(Op<0||Op>=or)continue;let Fp=oo+Op*Ut[1],wm=Op*Vr;if(No===Math.min(Kt-1,Mt?Math.round(wm):Math.floor(wm)))for(let Bp=0;Bp<ko;Bp++){let Em=Bp+Lo;if(Em<0||Em>=hr)continue;let Yp=Fp+Em*Ut[2],_m=Em*Wr;Fu===Math.min(nr-1,Mt?Math.round(_m):Math.floor(_m))&&(Mp+=yr[Yp+Au])}}fr[Ap+Au]=Mp}}}}return s.makeTensorInfo(_e.shape,_e.dtype,fr)}var z$={kernelName:Za,backendName:"cpu",kernelFunc:mQ};function dQ(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{dims:ct}=_;Q$1(_e,"reverse");let Mt=_e.shape.length,Ft=y.parseAxisParam(ct,_e.shape);if(Mt===0)return lr({inputs:{x:_e},backend:s});let Ut=new tt(_e.shape,_e.dtype),Xt=s.bufferSync(_e);for(let Kt=0;Kt<Ut.size;Kt++){let nr=Ut.indexToLoc(Kt),rr=nr.slice();Ft.forEach(or=>rr[or]=_e.shape[or]-1-rr[or]),Ut.set(Xt.get(...rr),...nr)}return s.makeTensorInfo(Ut.shape,Ut.dtype,Ut.values)}var V$={kernelName:ps,backendName:"cpu",kernelFunc:dQ},W$={kernelName:Ds,backendName:"cpu",kernelFunc:({inputs:o,attrs:i,backend:s})=>{let{image:_}=o,{radians:_e,fillValue:ct,center:Mt}=i,Ft=s,Ut=y.getTypedArrayFromDType(_.dtype,y.sizeFromShape(_.shape)),[Xt,Kt,nr,rr]=_.shape,[or,hr]=w.getImageCenter(Mt,Kt,nr),fr=Math.sin(_e),yr=Math.cos(_e),Lr=Ft.data.get(_.dataId).values;for(let Br=0;Br<Xt;Br++){let Vr=Br*nr*Kt*rr;for(let Wr=0;Wr<Kt;Wr++){let ro=Wr*(nr*rr);for(let no=0;no<nr;no++){let so=no*rr;for(let ko=0;ko<rr;ko++){let To=[Xt,Wr,no,ko],oo=To[2],No=To[1],As=(oo-or)*yr-(No-hr)*fr,Ks=(oo-or)*fr+(No-hr)*yr;As=Math.round(As+or),Ks=Math.round(Ks+hr);let vu=ct;typeof ct!="number"&&(vu=ko===3?255:ct[ko]),As>=0&&As<nr&&Ks>=0&&Ks<Kt&&(vu=Lr[Vr+Ks*(nr*rr)+As*rr+ko]),Ut[Vr+ro+so+ko]=vu}}}}return{dataId:Ft.write(Ut,_.shape,_.dtype),shape:_.shape,dtype:_.dtype}}},fQ=Ie$1(cs,o=>{let i=Math.floor(o);return o-i<.5?Math.floor(o):o-i>.5?Math.ceil(o):i%2==0?i:i+1}),U$={kernelName:cs,backendName:"cpu",kernelFunc:fQ};function hQ(o){let{inputs:i,backend:s,attrs:_}=o,{indices:_e,updates:ct}=i,{shape:Mt}=_,{sliceRank:Ft,numUpdates:Ut,sliceSize:Xt,strides:Kt,outputSize:nr}=w.calculateShapes(ct,_e,Mt),rr=zs(s.bufferSync(_e),s.bufferSync(ct),Mt,nr,Xt,Ut,Ft,Kt,0,!0);return s.makeTensorInfo(Mt,rr.dtype,rr.values)}var G$={kernelName:ms,backendName:"cpu",kernelFunc:hQ};function gQ(o,i){let s=0,_=o.length,_e=0;for(;s<_;)_e=Math.floor((s+_)/2),o[_e]<i?s=_e+1:_=_e;return _}function xQ(o,i){let s=0,_=o.length,_e=0;for(;s<_;)_e=Math.floor((s+_)/2),o[_e]<=i?s=_e+1:_=_e;return _}function H$(o,i,s,_,_e,ct){let Mt=y.getArrayFromDType("int32",s*_e);for(let Ft=0;Ft<s;++Ft){let Ut=o.slice(Ft*_,(Ft+1)*_),Xt=Ft*_e;for(let Kt=0;Kt<_e;++Kt)Mt[Xt+Kt]=ct==="left"?gQ(Ut,i[Kt+Xt]):xQ(Ut,i[Kt+Xt])}return Mt}function yQ(o){let{inputs:i,backend:s,attrs:_}=o,{sortedSequence:_e,values:ct}=i,{side:Mt}=_,Ft=H$(s.data.get(_e.dataId).values,s.data.get(ct.dataId).values,_e.shape[0],_e.shape[1],ct.shape[1],Mt);return s.makeTensorInfo(ct.shape,"int32",Ft)}var K$={kernelName:fs,backendName:"cpu",kernelFunc:yQ};function bQ(o){let{inputs:i,backend:s}=o,{condition:_,t:_e,e:ct}=i;Q$1([_,_e,ct],"select");let Mt=_.shape.length,Ft=s.data.get(_.dataId).values,Ut=s.data.get(_e.dataId).values,Xt=s.data.get(ct.dataId).values,Kt=dt(_e.dtype,ct.dtype),nr=y.makeZerosTypedArray(y.sizeFromShape(_e.shape),Kt),rr=0,or=Mt===0||Mt>1||_e.shape.length===1?1:y.sizeFromShape(_e.shape.slice(1));for(let hr=0;hr<Ft.length;hr++)for(let fr=0;fr<or;fr++)Ft[hr]===1?nr[rr++]=Ut[hr]:nr[rr++]=Xt[hr];return s.makeTensorInfo(_e.shape,Kt,nr)}var q$={kernelName:fa,backendName:"cpu",kernelFunc:bQ},CQ=w.SELU_SCALEALPHA,wQ=w.SELU_SCALE,SQ=Ie$1(hs,o=>o>=0?wQ*o:CQ*(Math.exp(o)-1)),j$={kernelName:hs,backendName:"cpu",kernelFunc:SQ},IQ=Ie$1(ys,o=>o<0?-1:o>0?1:0),X$={kernelName:ys,backendName:"cpu",kernelFunc:IQ},vQ=Ie$1(gs,o=>Math.sin(o)),Y$={kernelName:gs,backendName:"cpu",kernelFunc:vQ},kQ=Ie$1(xs,o=>Math.sinh(o)),Q$={kernelName:xs,backendName:"cpu",kernelFunc:kQ},NQ=11920928955078125e-23,Z$=Math.log(NQ)+2,TQ=Ie$1(Cs,o=>{let i,s=o>-Z$,_=o<Z$,_e=Math.exp(o);return i=_?_e:s?o:Math.log(1+_e),i}),J$={kernelName:Cs,backendName:"cpu",kernelFunc:TQ};function _Q(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{blockShape:ct,paddings:Mt}=_;Q$1([_e],"spaceToBatchND");let Ft=y.sizeFromShape(ct),Ut=[[0,0]];Ut.push(...Mt);for(let yr=1+ct.length;yr<_e.shape.length;++yr)Ut.push([0,0]);let Xt=Wf.kernelFunc({inputs:{x:_e},backend:s,attrs:{paddings:Ut,constantValue:0}}),Kt=w.getReshaped(Xt.shape,ct,Ft,!1),nr=w.getPermuted(Kt.length,ct.length,!1),rr=w.getReshapedPermuted(Xt.shape,ct,Ft,!1),or=We({inputs:{x:Xt},backend:s,attrs:{shape:Kt}}),hr=St$2({inputs:{x:or},backend:s,attrs:{perm:nr}}),fr=We({inputs:{x:hr},backend:s,attrs:{shape:rr}});return s.disposeIntermediateTensorInfo(Xt),s.disposeIntermediateTensorInfo(or),s.disposeIntermediateTensorInfo(hr),fr}var eR={kernelName:ga,backendName:"cpu",kernelFunc:_Q};function EQ(o){let{inputs:i,backend:s}=o,{indices:_,values:_e,denseShape:ct,defaultValue:Mt}=i;if(ct.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${ct.shape}`);if(_.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${_.shape}`);if(_e.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${_e.shape}`);if(Mt.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${Mt.shape}`);let Ft=s.data.get(_.dataId).values,Ut=s.data.get(_e.dataId).values,Xt=s.data.get(ct.dataId).values,Kt=s.data.get(Mt.dataId).values[0],[nr,rr,or,hr,fr]=Ff(Ft,_.shape,_.dtype,Ut,_e.dtype,Xt,Kt);return[s.makeTensorInfo(rr,_.dtype,nr),s.makeTensorInfo([rr[0]],_e.dtype,or),s.makeTensorInfo([hr.length],"bool",new Uint8Array(hr.map(yr=>Number(yr)))),s.makeTensorInfo([fr.length],_.dtype,new Int32Array(fr))]}var tR={kernelName:Ki,backendName:"cpu",kernelFunc:EQ};function $Q(o){let{inputs:i,backend:s}=o,{inputIndices:_,inputShape:_e,newShape:ct}=i;if(_.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${_.shape}`);if(_e.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${_e.shape}`);if(ct.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${ct.shape}`);let Mt=Array.from(s.data.get(_e.dataId).values),Ft=s.data.get(_.dataId).values,Ut=Array.from(s.data.get(ct.dataId).values),[Xt,Kt,nr]=Pf(Ft,_.shape,_.dtype,Mt,Ut);return[s.makeTensorInfo(Kt,_.dtype,Xt),s.makeTensorInfo([nr.length],ct.dtype,new Int32Array(nr))]}var rR={kernelName:ei,backendName:"cpu",kernelFunc:$Q};function RQ(o){let{inputs:i,backend:s}=o,{data:_,indices:_e,segmentIds:ct}=i;if(_.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(_e.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${_e.shape}`);if(ct.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${ct.shape}`);if(_e.shape[0]!==ct.shape[0])throw new Error("segmentIds and indices should have same size.");let Mt=s.data.get(_.dataId).values,Ft=s.data.get(_e.dataId).values,Ut=s.data.get(ct.dataId).values,[Xt,Kt]=Sc(Mt,_.shape,_.dtype,Ft,Ut,!0);return s.makeTensorInfo(Kt,_.dtype,Xt)}var oR={kernelName:ya,backendName:"cpu",kernelFunc:RQ};function DQ(o){let{inputs:i,backend:s}=o,{data:_,indices:_e,segmentIds:ct}=i;if(_.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(_e.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${_e.shape}`);if(ct.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${ct.shape}`);if(_e.shape[0]!==ct.shape[0])throw new Error("segmentIds and indices should have same size.");let Mt=s.data.get(_.dataId).values,Ft=s.data.get(_e.dataId).values,Ut=s.data.get(ct.dataId).values,[Xt,Kt]=Sc(Mt,_.shape,_.dtype,Ft,Ut);return s.makeTensorInfo(Kt,_.dtype,Xt)}var nR={kernelName:ba,backendName:"cpu",kernelFunc:DQ};function AQ(o){let i,{inputs:s,backend:_,attrs:_e}=o,{sparseIndices:ct,sparseValues:Mt,defaultValue:Ft}=s,{outputShape:Ut}=_e,{sliceRank:Xt,numUpdates:Kt,sliceSize:nr,strides:rr,outputSize:or}=w.calculateShapes(Mt,ct,Ut),hr=!1,fr=_.bufferSync(ct);switch(Mt.dtype){case"bool":i=zs(fr,_.bufferSync(Mt),Ut,or,nr,Kt,Xt,rr,!!_.data.get(Ft.dataId).values[0],hr);break;case"float32":case"int32":i=zs(fr,_.bufferSync(Mt),Ut,or,nr,Kt,Xt,rr,_.data.get(Ft.dataId).values[0],hr);break;case"string":i=zs(fr,_.bufferSync(Mt),Ut,or,nr,Kt,Xt,rr,y.decodeString(_.data.get(Ft.dataId).values[0]),hr);break;default:throw new Error(`Unsupported type ${Mt.dtype}`)}return _.makeTensorInfo(Ut,i.dtype,i.values)}var sR={kernelName:vs,backendName:"cpu",kernelFunc:AQ};function FQ(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{numOrSizeSplits:ct,axis:Mt}=_,Ft=y.parseAxisParam(Mt,_e.shape)[0],Ut=w.prepareSplitSize(_e,ct,Ft),Xt=new Array(_e.shape.length).fill(0),Kt=_e.shape.slice();return Ut.map(nr=>{let rr=[...Kt];rr[Ft]=nr;let or=Ao({inputs:{x:_e},backend:s,attrs:{begin:Xt,size:rr}});return Xt[Ft]+=nr,or})}var aR={kernelName:xa,backendName:"cpu",kernelFunc:FQ},iR={kernelName:qi,backendName:"cpu",kernelFunc:({inputs:o,backend:i})=>{let{x:s}=o,_=i;Q$1(s,"square");let _e=_.data.get(s.dataId).values,ct=new Float32Array(_e.length);for(let Mt=0;Mt<_e.length;++Mt){let Ft=_e[Mt];ct[Mt]=Ft*Ft}return{dataId:_.write(ct,s.shape,s.dtype),shape:s.shape,dtype:s.dtype}}},PQ=Ie$1(wo,(o,i)=>{let s=i;return isNaN(o)?NaN:o>0?1:s.alpha}),uR={kernelName:wo,backendName:"cpu",kernelFunc:PQ};function OQ(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{begin:ct,end:Mt,strides:Ft,beginMask:Ut,endMask:Xt,ellipsisMask:Kt,newAxisMask:nr,shrinkAxisMask:rr}=_;Q$1(_e,"stridedSlice");let or,{finalShapeSparse:hr,finalShape:fr,isIdentity:yr,sliceDim0:Lr,isSimpleSlice:Br,begin:Vr,end:Wr,strides:ro}=pt.sliceInfo(_e.shape,ct,Mt,Ft,Ut,Xt,Kt,nr,rr);if(yr)or=We({inputs:{x:_e},backend:s,attrs:{shape:fr}});else if(Lr||Br){y.assert(_e.shape.length>=1,()=>`Input must have rank at least 1, got: ${_e.shape.length}`);let no=pt.computeOutShape(Vr,Wr,ro),so=Ao({inputs:{x:_e},backend:s,attrs:{begin:Vr,size:no}});or=We({inputs:{x:so},backend:s,attrs:{shape:fr}}),s.disposeIntermediateTensorInfo(so)}else{let no=Of(hr,s.bufferSync(_e),ro,Vr);or=s.makeTensorInfo(fr,no.dtype,no.values)}return or}var pR={kernelName:Ns,backendName:"cpu",kernelFunc:OQ};function MQ(o){let{inputs:i,backend:s,attrs:_}=o,{separator:_e,nGramWidths:ct,leftPad:Mt,rightPad:Ft,padWidth:Ut,preserveShortSequences:Xt}=_,{data:Kt,dataSplits:nr}=i,rr=s.data.get(Kt.dataId).values,or=s.data.get(nr.dataId).values,[hr,fr]=cp(rr,or,_e,ct,Mt,Ft,Ut,Xt);return[s.makeTensorInfo([hr.length],"string",hr),s.makeTensorInfo(nr.shape,"int32",fr)]}var cR={kernelName:Ca,backendName:"cpu",kernelFunc:MQ};function LQ(o){let{inputs:i,backend:s,attrs:_}=o,{skipEmpty:_e}=_,{input:ct,delimiter:Mt}=i;if(ct.dtype!=="string")throw new Error("Input must be of datatype string");if(ct.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${ct.shape}`);if(Mt.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${Mt.shape}`);let Ft=s.data.get(ct.dataId).values,Ut=s.data.get(Mt.dataId).values[0],[Xt,Kt,nr]=lp(Ft,Ut,_e),rr=Kt.length;return[s.makeTensorInfo([rr,2],"int32",Xt),s.makeTensorInfo([rr],"string",Kt),s.makeTensorInfo([2],"int32",new Int32Array(nr))]}var lR={kernelName:ji,backendName:"cpu",kernelFunc:LQ};function BQ(o){let{inputs:i,backend:s,attrs:_}=o,{numBuckets:_e}=_,{input:ct}=i;if(ct.dtype!=="string")throw new Error("Input must be of datatype string");if(_e<=0)throw new Error("Number of buckets must be at least 1");let Mt=mp(s.data.get(ct.dataId).values,_e);return s.makeTensorInfo(ct.shape,"int32",Mt)}var mR={kernelName:Xi,backendName:"cpu",kernelFunc:BQ},zQ=Ie$1(_s,o=>Math.tan(o)),dR={kernelName:_s,backendName:"cpu",kernelFunc:zQ},VQ=Ie$1(Es,o=>Math.tanh(o)),fR={kernelName:Es,backendName:"cpu",kernelFunc:VQ};function WQ(o){let{inputs:i,backend:s}=o,{tensor:_,indices:_e,updates:ct}=i,{sliceRank:Mt,numUpdates:Ft,sliceSize:Ut,strides:Xt,outputSize:Kt}=w.calculateShapes(ct,_e,_.shape),nr=s.bufferSync(_e),rr=s.bufferSync(ct),or=s.bufferSync(_),hr=zs(nr,rr,_.shape,Kt,Ut,Ft,Mt,Xt,or,!1);return s.makeTensorInfo(_.shape,hr.dtype,hr.values)}var hR={kernelName:ds,backendName:"cpu",kernelFunc:WQ};function UQ(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{reps:ct}=_;Q$1(_e,"tile");let Mt=Mf(s.bufferSync(_e),ct);return s.makeTensorInfo(Mt.shape,Mt.dtype,Mt.values)}var gR={kernelName:po,backendName:"cpu",kernelFunc:UQ};function GQ(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{k:ct,sorted:Mt}=_;Q$1(_e,"topk");let Ft=s.data.get(_e.dataId).values,[Ut,Xt]=Lf(Ft,_e.shape,_e.dtype,ct,Mt);return[s.makeTensorInfo(Ut.shape,Ut.dtype,Ut.values),s.makeTensorInfo(Xt.shape,Xt.dtype,Xt.values)]}var xR={kernelName:$s,backendName:"cpu",kernelFunc:GQ};function HQ(o){let{inputs:i,attrs:s,backend:_}=o,{image:_e,transforms:ct}=i,{interpolation:Mt,fillMode:Ft,fillValue:Ut,outputShape:Xt}=s,[Kt,nr,rr,or]=_e.shape,[hr,fr]=Xt??[nr,rr],yr=[Kt,hr,fr,or],Lr=y.computeStrides(_e.shape),Br=Lr[0],Vr=Lr[1],Wr=Lr[2],ro=y.computeStrides(yr),no=ro[0],so=ro[1],ko=ro[2],To=y.getTypedArrayFromDType(_e.dtype,y.sizeFromShape(yr));To.fill(Ut);let oo=_.data.get(_e.dataId).values,No=_.data.get(ct.dataId).values;for(let As=0;As<Kt;++As){let Ks=ct.shape[0]===1?No:No.subarray(8*As,8*As+8);for(let vu=0;vu<hr;++vu)for(let Fu=0;Fu<fr;++Fu)for(let Ap=0;Ap<or;++Ap){let Pp,Lo=Ks[6]*Fu+Ks[7]*vu+1;if(Lo===0)continue;let Au=(Ks[0]*Fu+Ks[1]*vu+Ks[2])/Lo,Mp=(Ks[3]*Fu+Ks[4]*vu+Ks[5])/Lo,Lp=yR(Au,rr,Ft),Op=yR(Mp,nr,Ft);switch(Mt){case"nearest":Pp=YQ(oo,nr,rr,Br,Vr,Wr,As,Op,Lp,Ap,Ut);break;case"bilinear":Pp=QQ(oo,nr,rr,Br,Vr,Wr,As,Op,Lp,Ap,Ut);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${Mt}`)}To[As*no+vu*so+Fu*ko+Ap]=Pp}return _.makeTensorInfo(yr,_e.dtype,To)}return{dataId:_.write(To,yr,_e.dtype),shape:_e.shape,dtype:_e.dtype}}var bR={kernelName:Rs,backendName:"cpu",kernelFunc:HQ};function yR(o,i,s){switch(s){case"reflect":return KQ(o,i);case"wrap":return qQ(o,i);case"nearest":return XQ(o,i);default:return jQ(o)}}function KQ(o,i){let s=o;if(s<0)if(i<=1)s=0;else{let _=2*i;s<_&&(s=_*Math.trunc(-s/_)+s),s=s<-i?s+_:-s-1}else if(s>i-1)if(i<=1)s=0;else{let _=2*i;s-=_*Math.trunc(s/_),s>=i&&(s=_-s-1)}return y.clamp(0,s,i-1)}function qQ(o,i){let s=o;if(s<0)if(i<=1)s=0;else{let _=i-1;s+=i*(Math.trunc(-s/_)+1)}else if(s>i-1)if(i<=1)s=0;else{let _=i-1;s-=i*Math.trunc(s/_)}return y.clamp(0,s,i-1)}function jQ(o,i){return o}function XQ(o,i){return y.clamp(0,o,i-1)}function ql(o,i,s,_,_e,ct,Mt,Ft,Ut,Xt,Kt){return 0<=Ft&&Ft<i&&0<=Ut&&Ut<s?o[Mt*_+Ft*_e+Ut*ct+Xt]:Kt}function YQ(o,i,s,_,_e,ct,Mt,Ft,Ut,Xt,Kt){return ql(o,i,s,_,_e,ct,Mt,Math.round(Ft),Math.round(Ut),Xt,Kt)}function QQ(o,i,s,_,_e,ct,Mt,Ft,Ut,Xt,Kt){let nr=Math.floor(Ft),rr=Math.floor(Ut),or=nr+1,hr=rr+1;return(or-Ft)*((hr-Ut)*ql(o,i,s,_,_e,ct,Mt,nr,rr,Xt,Kt)+(Ut-rr)*ql(o,i,s,_,_e,ct,Mt,nr,hr,Xt,Kt))+(Ft-nr)*((hr-Ut)*ql(o,i,s,_,_e,ct,Mt,or,rr,Xt,Kt)+(Ut-rr)*ql(o,i,s,_,_e,ct,Mt,or,hr,Xt,Kt))}function ZQ(o){let{inputs:i,attrs:s,backend:_}=o,{axis:_e}=s,{x:ct}=i;Q$1(ct,"unique");let Mt=_.data.get(ct.dataId).values,{outputValues:Ft,outputShape:Ut,indices:Xt}=dp(Mt,_e,ct.shape,ct.dtype);return[_.makeTensorInfo(Ut,ct.dtype,Ft),_.makeTensorInfo([Xt.length],"int32",Xt)]}var CR={kernelName:Yi,backendName:"cpu",kernelFunc:ZQ};function JQ(o){let{inputs:i,backend:s,attrs:_}=o,{value:_e}=i,{axis:ct}=_;ct<0&&(ct+=_e.shape.length);let Mt=_e.shape.length,Ft=_e.shape[ct],Ut=new Array(Mt-1),Xt=0;for(let or=0;or<Mt;or++)or!==ct&&(Ut[Xt++]=_e.shape[or]);let Kt=new Array(Mt).fill(0),nr=_e.shape.slice();nr[ct]=1;let rr=new Array(Ft);for(let or=0;or<rr.length;or++){Kt[ct]=or;let hr=Ao({inputs:{x:_e},backend:s,attrs:{begin:Kt,size:nr}});rr[or]=We({inputs:{x:hr},backend:s,attrs:{shape:Ut}}),s.disposeIntermediateTensorInfo(hr)}return rr}var wR={kernelName:wa,backendName:"cpu",kernelFunc:JQ};function eZ(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e,segmentIds:ct}=i,{numSegments:Mt}=_;Q$1(_e,"unsortedSegmentSum");let Ft=[],Ut=[],Xt=_e.shape.length-ct.shape.length,Kt=ct;for(let rr=0;rr<Xt;++rr){let or=kc({inputs:{input:Kt},backend:s,attrs:{dim:rr+1}});Kt=or,Ut.push(or)}for(let rr=0;rr<Mt;++rr){let or=y.createScalarValue(rr,"int32"),hr=s.makeTensorInfo([],"int32",or),fr=HS({inputs:{a:hr,b:Kt},backend:s}),yr=Ro({inputs:{x:fr},backend:s,attrs:{dtype:"float32"}}),Lr=ip({inputs:{a:yr,b:_e},backend:s}),Br=fi({inputs:{x:Lr},backend:s,attrs:{axis:0,keepDims:!1}});Ft.push(Br),Ut.push(hr),Ut.push(fr),Ut.push(yr),Ut.push(Lr),Ut.push(Br)}let nr=kI({inputs:Ft,backend:s,attrs:{axis:0}});return Ut.forEach(rr=>s.disposeIntermediateTensorInfo(rr)),nr}var SR={kernelName:Qi,backendName:"cpu",kernelFunc:eZ},tZ=[q_,t_,j_,X_,a_,Y_,Q_,Z_,J_,eE,tE,rE,oE,nE,sE,iE,uE,pE,cE,K_,lE,mE,dE,i_,fE,s_,u_,hE,r_,gE,yE,bE,CE,wE,SE,IE,vE,kE,NE,TE,_E,EE,$E,RE,DE,AE,FE,PE,OE,ME,LE,BE,VE,z_,WE,p_,UE,c_,GE,l_,HE,KE,qE,m_,d_,jE,XE,YE,QE,f_,h_,o_,ZE,xE,JE,e$,t$,V_,g_,x_,r$,y_,o$,n$,s$,a$,i$,u$,p$,b_,c$,l$,m$,d$,h$,g$,x$,C_,y$,b$,S$,w_,S_,I$,v$,k$,I_,N$,E$,$$,Wf,R$,W_,k_,D$,A$,F$,P$,n_,Gl,O$,U_,G_,H_,M$,L$,B$,z$,V$,W$,U$,$_,G$,K$,q$,j$,D_,X$,Y$,Q$,A_,C$,J$,eR,tR,rR,oR,nR,sR,aR,P_,iR,O_,M_,uR,pR,cR,lR,mR,L_,zE,dR,fR,hR,gR,xR,bR,v_,CR,wR,SR,T$];for(let o of tZ)ti(o);var Ec={};qe(Ec,{assertNotComplex:()=>Vs,bindCanvasToFramebuffer:()=>cZ,bindColorTextureToFramebuffer:()=>Ql,bindTextureToProgramUniformSampler:()=>VI,bindTextureUnit:()=>NR,bindVertexBufferToProgramAttribute:()=>jf,callAndCheck:()=>ce,canBeRepresented:()=>EI,createFragmentShader:()=>RI,createFramebuffer:()=>LI,createProgram:()=>DI,createStaticIndexBuffer:()=>PI,createStaticVertexBuffer:()=>FI,createTexture:()=>OI,createVertexShader:()=>$I,getBatchDim:()=>gi,getExtensionOrThrow:()=>Nc,getFramebufferErrorMessage:()=>TR,getMaxTexturesInShader:()=>GI,getNumChannels:()=>uZ,getProgramUniformLocation:()=>zI,getProgramUniformLocationOrThrow:()=>BI,getRowsCols:()=>xi,getShapeAs3D:()=>_c,getTextureShapeFromLogicalShape:()=>WI,getWebGLDisjointQueryTimerVersion:()=>HI,getWebGLErrorMessage:()=>kR,getWebGLMaxTextureSize:()=>UI,hasExtension:()=>qr,isCapableOfRenderingToFloatTexture:()=>KI,isDownloadFloatTextureEnabled:()=>qI,isReshapeFree:()=>xu,isWebGLFenceEnabled:()=>jI,isWebGLVersionEnabled:()=>Yf,linkProgram:()=>AI,logShaderSourceAndInfoLog:()=>qf,resetMaxTextureSize:()=>lZ,resetMaxTexturesInShader:()=>mZ,unbindColorTextureFromFramebuffer:()=>Xf,unbindTextureUnit:()=>pZ,validateFramebuffer:()=>Tc,validateProgram:()=>Yl,validateTextureSize:()=>MI});var hp={},Uf={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0},gu,mr,er;function NI(o,i){hp[o]=i}function Kr(o,i){if(!(o in hp)||i!=null){let _=oZ(o,i);if(_===null)return console.log("Could not get context for WebGL version",o),null;hp[o]=_}let s=hp[o];return s==null||s.isContextLost()?(delete hp[o],Kr(o)):(s.disable(s.DEPTH_TEST),s.disable(s.STENCIL_TEST),s.disable(s.BLEND),s.disable(s.DITHER),s.disable(s.POLYGON_OFFSET_FILL),s.disable(s.SAMPLE_COVERAGE),s.enable(s.SCISSOR_TEST),s.enable(s.CULL_FACE),s.cullFace(s.BACK),hp[o])}function rZ(o){if(!A().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&o===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function oZ(o,i){if(o!==1&&o!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");let s=i??rZ(o);return s.addEventListener("webglcontextlost",_=>{_.preventDefault(),delete hp[o]},!1),A().getBool("SOFTWARE_WEBGL_ENABLED")&&(Uf.failIfMajorPerformanceCaveat=!1),o===1?s.getContext("webgl",Uf)||s.getContext("experimental-webgl",Uf):s.getContext("webgl2",Uf)}function gp(o,i){return[i,o]}function IR(o,i){return o*i}function jl(o){let i=y.sizeFromShape(o),s=Math.ceil(i/4);return y.sizeToSquarishShape(s)}function Ma(o,i){return[Math.max(1,Math.ceil(i/2)),Math.max(1,Math.ceil(o/2))]}function vR(o,i){let[s,_]=Ma(o,i);return s*_*4}function Xl(o,i){let s,_,_e,ct,Mt,Ft,Ut,Xt,Kt,nr,rr=o;return A().getNumber("WEBGL_VERSION")===2?(s=rr.R32F,_=rr.R16F,_e=rr.RGBA16F,ct=rr.RGBA32F,Mt=rr.RED,Ut=4,Xt=1,Kt=rr.HALF_FLOAT,nr=rr.FLOAT,Ft=rr.RGBA8):(s=o.RGBA,_=o.RGBA,_e=o.RGBA,ct=rr.RGBA,Mt=o.RGBA,Ut=4,Xt=4,Kt=i!=null?i.HALF_FLOAT_OES:null,nr=o.FLOAT,Ft=o.RGBA),{internalFormatFloat:s,internalFormatHalfFloat:_,internalFormatPackedHalfFloat:_e,internalFormatPackedFloat:ct,textureFormatFloat:Mt,downloadTextureFormat:Ft,downloadUnpackNumChannels:Ut,defaultNumChannels:Xt,textureTypeHalfFloat:Kt,textureTypeFloat:nr}}function ce(o,i){let s=i();return A().getBool("DEBUG")&&nZ(o),s}function nZ(o){let i=o.getError();if(i!==o.NO_ERROR)throw new Error("WebGL Error: "+kR(o,i))}(function(o){o[o.DENSE=0]="DENSE",o[o.SHARED_BATCH=1]="SHARED_BATCH"})(gu||(gu={})),function(o){o[o.RENDER=0]="RENDER",o[o.UPLOAD=1]="UPLOAD",o[o.PIXELS=2]="PIXELS",o[o.DOWNLOAD=3]="DOWNLOAD"}(mr||(mr={})),function(o){o[o.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",o[o.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",o[o.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",o[o.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",o[o.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(er||(er={}));var sZ=596e-10,aZ=65504;function EI(o){return!!(A().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||o===0||sZ<Math.abs(o)&&Math.abs(o)<aZ)}function kR(o,i){switch(i){case o.NO_ERROR:return"NO_ERROR";case o.INVALID_ENUM:return"INVALID_ENUM";case o.INVALID_VALUE:return"INVALID_VALUE";case o.INVALID_OPERATION:return"INVALID_OPERATION";case o.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case o.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case o.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${i}`}}function Nc(o,i){return hi(o,()=>o.getExtension(i),'Extension "'+i+'" not supported on this browser.')}function $I(o,i){let s=hi(o,()=>o.createShader(o.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(ce(o,()=>o.shaderSource(s,i)),ce(o,()=>o.compileShader(s)),o.getShaderParameter(s,o.COMPILE_STATUS)===!1)throw console.log(o.getShaderInfoLog(s)),new Error("Failed to compile vertex shader.");return s}function RI(o,i){let s=hi(o,()=>o.createShader(o.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(ce(o,()=>o.shaderSource(s,i)),ce(o,()=>o.compileShader(s)),A().get("ENGINE_COMPILE_ONLY"))return s;if(o.getShaderParameter(s,o.COMPILE_STATUS)===!1)throw qf(i,o.getShaderInfoLog(s)),new Error("Failed to compile fragment shader.");return s}var iZ=/ERROR: [0-9]+:([0-9]+):/g,Hf,Kf;function qf(o,i){let s=iZ.exec(i);if(s==null)return console.log(`Couldn't parse line number in error: ${i}`),void console.log(o);let _=+s[1],_e=o.split(`
`),ct=_e.length.toString().length+2,Mt=_e.map((nr,rr)=>y.rightPad((rr+1).toString(),ct)+nr),Ft=0;for(let nr=0;nr<Mt.length;nr++)Ft=Math.max(Mt[nr].length,Ft);let Ut=Mt.slice(0,_-1),Xt=Mt.slice(_-1,_),Kt=Mt.slice(_);console.log(Ut.join(`
`)),console.log(i.split(`
`)[0]),console.log(`%c ${y.rightPad(Xt[0],Ft)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(Kt.join(`
`))}function DI(o){return hi(o,()=>o.createProgram(),"Unable to create WebGLProgram.")}function AI(o,i){if(ce(o,()=>o.linkProgram(i)),!A().get("ENGINE_COMPILE_ONLY")&&o.getProgramParameter(i,o.LINK_STATUS)===!1)throw console.log(o.getProgramInfoLog(i)),new Error("Failed to link vertex and fragment shaders.")}function Yl(o,i){if(ce(o,()=>o.validateProgram(i)),o.getProgramParameter(i,o.VALIDATE_STATUS)===!1)throw console.log(o.getProgramInfoLog(i)),new Error("Shader program validation failed.")}function FI(o,i){let s=hi(o,()=>o.createBuffer(),"Unable to create WebGLBuffer");return ce(o,()=>o.bindBuffer(o.ARRAY_BUFFER,s)),ce(o,()=>o.bufferData(o.ARRAY_BUFFER,i,o.STATIC_DRAW)),s}function PI(o,i){let s=hi(o,()=>o.createBuffer(),"Unable to create WebGLBuffer");return ce(o,()=>o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,s)),ce(o,()=>o.bufferData(o.ELEMENT_ARRAY_BUFFER,i,o.STATIC_DRAW)),s}function uZ(){return A().getNumber("WEBGL_VERSION")===2?1:4}function OI(o){return hi(o,()=>o.createTexture(),"Unable to create WebGLTexture.")}function MI(o,i){let s=A().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(o<=0||i<=0)throw new Error(`Requested texture size [${o}x${i}] is invalid.`);if(o>s||i>s)throw new Error(`Requested texture size [${o}x${i}] greater than WebGL maximum on this browser / GPU [${s}x${s}].`)}function LI(o){return hi(o,()=>o.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function jf(o,i,s,_,_e,ct,Mt){let Ft=o.getAttribLocation(i,s);return Ft!==-1&&(ce(o,()=>o.bindBuffer(o.ARRAY_BUFFER,_)),ce(o,()=>o.vertexAttribPointer(Ft,_e,o.FLOAT,!1,ct,Mt)),ce(o,()=>o.enableVertexAttribArray(Ft)),!0)}function NR(o,i,s){_R(o,s),ce(o,()=>o.activeTexture(o.TEXTURE0+s)),ce(o,()=>o.bindTexture(o.TEXTURE_2D,i))}function pZ(o,i){_R(o,i),ce(o,()=>o.activeTexture(o.TEXTURE0+i)),ce(o,()=>o.bindTexture(o.TEXTURE_2D,null))}function BI(o,i,s){return hi(o,()=>o.getUniformLocation(i,s),'uniform "'+s+'" not present in program.')}function zI(o,i,s){return o.getUniformLocation(i,s)}function VI(o,i,s,_){ce(o,()=>NR(o,i,_)),ce(o,()=>o.uniform1i(s,_))}function cZ(o){ce(o,()=>o.bindFramebuffer(o.FRAMEBUFFER,null)),ce(o,()=>o.viewport(0,0,o.canvas.width,o.canvas.height)),ce(o,()=>o.scissor(0,0,o.canvas.width,o.canvas.height))}function Ql(o,i,s){ce(o,()=>o.bindFramebuffer(o.FRAMEBUFFER,s)),ce(o,()=>o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,i,0))}function Xf(o,i){ce(o,()=>o.bindFramebuffer(o.FRAMEBUFFER,i)),ce(o,()=>o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,null,0))}function Tc(o){let i=o.checkFramebufferStatus(o.FRAMEBUFFER);if(i!==o.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+TR(o,i))}function TR(o,i){switch(i){case o.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case o.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case o.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case o.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${i}`}}function hi(o,i,s){let _=ce(o,()=>i());if(_==null)throw new Error(s);return _}function _R(o,i){let s=o.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,_=i+o.TEXTURE0;if(_<o.TEXTURE0||_>s)throw new Error(`textureUnit must be in ${`[gl.TEXTURE0, gl.TEXTURE${s}]`}.`)}function gi(o,i=2){return y.sizeFromShape(o.slice(0,o.length-i))}function xi(o){if(o.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[o.length>1?o[o.length-2]:1,o[o.length-1]]}function _c(o){let i=[1,1,1];return o.length===0||o.length===1&&o[0]===1||(i=[gi(o),...xi(o)]),i}function WI(o,i=!1){let s=A().getNumber("WEBGL_MAX_TEXTURE_SIZE"),_=A().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");_===1/0&&A().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(_=s/2),i&&(s*=2,_*=2,o=o.map((Ft,Ut)=>Ut>=o.length-2?y.nearestLargerEven(o[Ut]):o[Ut]),o.length===1&&(o=[2,o[0]])),o.length!==2&&(o=y.squeezeShape(o).newShape);let _e=y.sizeFromShape(o),ct=null;o.length<=1&&_e<=s?ct=[1,_e]:o.length===2&&o[0]<=s&&o[1]<=s?ct=o:o.length===3&&o[0]*o[1]<=s&&o[2]<=s?ct=[o[0]*o[1],o[2]]:o.length===3&&o[0]<=s&&o[1]*o[2]<=s?ct=[o[0],o[1]*o[2]]:o.length===4&&o[0]*o[1]*o[2]<=s&&o[3]<=s?ct=[o[0]*o[1]*o[2],o[3]]:o.length===4&&o[0]<=s&&o[1]*o[2]*o[3]<=s&&(ct=[o[0],o[1]*o[2]*o[3]]);let Mt=ct!=null&&Math.max(...ct)>_&&Math.min(...ct)<=(i?2:1)&&Math.min(...ct)>0;if(ct==null||Mt)if(i){let Ft=gi(o),Ut=2,Xt=2;o.length&&([Ut,Xt]=xi(o)),_e=Ft*(Ut/2)*(Xt/2),ct=y.sizeToSquarishShape(_e).map(Kt=>2*Kt)}else ct=y.sizeToSquarishShape(_e);return ct}function Gf(o){return o%2==0}function xu(o,i){if(o=o.slice(-2),i=i.slice(-2),y.arraysEqual(o,i)||!o.length||!i.length||o[0]===0||o[1]===0||i[0]===0||i[1]===0)return!0;if(o.length!==i.length){let s=o[o.length-1],_=i[i.length-1];if(s===_||Gf(s)&&Gf(_)&&(o[0]===1||i[0]===1))return!0}return o[1]===i[1]&&Gf(o[0])&&Gf(i[0])}function UI(o){if(Hf==null){let i=Kr(o);Hf=i.getParameter(i.MAX_TEXTURE_SIZE)}return Hf}function lZ(){Hf=null}function mZ(){Kf=null}function GI(o){if(Kf==null){let i=Kr(o);Kf=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,Kf)}function HI(o){if(o===0)return 0;let i,s=Kr(o);return i=qr(s,"EXT_disjoint_timer_query_webgl2")&&o===2?2:qr(s,"EXT_disjoint_timer_query")?1:0,i}function qr(o,i){return o.getExtension(i)!=null}function Yf(o){try{if(Kr(o)!=null)return!0}catch(i){return console.log("Error when getting WebGL context: ",i),!1}return!1}function KI(o){if(o===0)return!1;let i=Kr(o);if(o===1){if(!qr(i,"OES_texture_float"))return!1}else if(!qr(i,"EXT_color_buffer_float"))return!1;return _I(i)}function qI(o){if(o===0)return!1;let i=Kr(o);if(o!==1){if(qr(i,"EXT_color_buffer_float"))return _I(i);let s="EXT_color_buffer_half_float";if(qr(i,s)){let _=i.getExtension(s);return dZ(i,_)}return!1}return!(!qr(i,"OES_texture_float")||!qr(i,"WEBGL_color_buffer_float"))&&_I(i)}function _I(o){let i=Xl(o),s=o.createTexture();o.bindTexture(o.TEXTURE_2D,s),o.texImage2D(o.TEXTURE_2D,0,i.internalFormatFloat,1,1,0,i.textureFormatFloat,i.textureTypeFloat,null);let _=o.createFramebuffer();o.bindFramebuffer(o.FRAMEBUFFER,_),o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,s,0);let _e=o.checkFramebufferStatus(o.FRAMEBUFFER)===o.FRAMEBUFFER_COMPLETE;return o.bindTexture(o.TEXTURE_2D,null),o.bindFramebuffer(o.FRAMEBUFFER,null),o.deleteTexture(s),o.deleteFramebuffer(_),_e}function dZ(o,i){let s=Xl(o,i),_=o.createTexture();o.bindTexture(o.TEXTURE_2D,_),o.texImage2D(o.TEXTURE_2D,0,s.internalFormatHalfFloat,1,1,0,s.textureFormatFloat,s.textureTypeHalfFloat,null);let _e=o.createFramebuffer();o.bindFramebuffer(o.FRAMEBUFFER,_e),o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,_,0);let ct=o.checkFramebufferStatus(o.FRAMEBUFFER)===o.FRAMEBUFFER_COMPLETE;return o.bindTexture(o.TEXTURE_2D,null),o.bindFramebuffer(o.FRAMEBUFFER,null),o.deleteTexture(_),o.deleteFramebuffer(_e),ct}function jI(o){return o===2&&Kr(o).fenceSync!=null}function Vs(o,i){Array.isArray(o)||(o=[o]),o.forEach(s=>{s!=null&&y.assert(s.dtype!=="complex64",()=>`${i} does not support complex64 tensors in the WebGL backend.`)})}var Se$1=A();function It$1(){let o,i,s,_,_e,ct,Mt,Ft,Ut,Xt;return A().getNumber("WEBGL_VERSION")===2?(o="#version 300 es",i="in",s="out",_="in",_e="texture",ct="outputColor",Mt="out vec4 outputColor;",Ft=A().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",Ut="",Xt=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(o="",i="attribute",s="varying",_="varying",_e="texture2D",ct="gl_FragColor",Mt="",Ft=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,Ut=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,Xt=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:o,attribute:i,varyingVs:s,varyingFs:_,texture2D:_e,output:ct,defineOutput:Mt,defineSpecialNaN:Ft,defineSpecialInf:Ut,defineRound:Xt}}function Ws(o,i,s="index"){let _=y.computeStrides(i);return _.map((_e,ct)=>`${`int ${o[ct]} = ${s} / ${_e}`}; ${ct===_.length-1?`int ${o[ct+1]} = ${s} - ${o[ct]} * ${_e}`:`index -= ${o[ct]} * ${_e}`};`).join("")}function xp(o,i,s="index"){let _=y.computeStrides(i);return _.map((_e,ct)=>`${`int ${o[ct]} = ${s} / outShapeStrides[${ct}]`}; ${ct===_.length-1?`int ${o[ct+1]} = ${s} - ${o[ct]} * outShapeStrides[${ct}]`:`index -= ${o[ct]} * outShapeStrides[${ct}]`};`).join("")}function fZ(o,i){let s=o.length,_=o.map(ct=>`${i}[${ct}]`),_e=new Array(s-1);_e[s-2]=_[s-1];for(let ct=s-3;ct>=0;--ct)_e[ct]=`(${_e[ct+1]} * ${_[ct+1]})`;return _e}function ER(o,i,s="index"){let _=o.map((ct,Mt)=>Mt),_e=fZ(_,i);return _e.map((ct,Mt)=>`${`int ${o[Mt]} = ${s} / ${_e[Mt]}`}; ${Mt===_e.length-1?`int ${o[Mt+1]} = ${s} - ${o[Mt]} * ${_e[Mt]}`:`index -= ${o[Mt]} * ${_e[Mt]}`};`).join("")}function $c(o){let i=y.computeStrides(o).map(s=>s.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${i[0]} + coords.y * ${i[1]} + coords.z;
  }
`}function Rc(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}Se$1.registerFlag("HAS_WEBGL",()=>Se$1.getNumber("WEBGL_VERSION")>0),Se$1.registerFlag("WEBGL_VERSION",()=>Yf(2)?2:Yf(1)?1:0),Se$1.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1),Se$1.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>Se$1.get("WEBGL_VERSION")===2),Se$1.registerFlag("WEBGL_CPU_FORWARD",()=>!0),Se$1.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1),Se$1.registerFlag("WEBGL_PACK",()=>Se$1.getBool("HAS_WEBGL")),Se$1.registerFlag("WEBGL_PACK_NORMALIZATION",()=>Se$1.getBool("WEBGL_PACK")),Se$1.registerFlag("WEBGL_PACK_CLIP",()=>Se$1.getBool("WEBGL_PACK")),Se$1.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>Se$1.getBool("WEBGL_PACK")),Se$1.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>Se$1.getBool("WEBGL_PACK")),Se$1.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>Se$1.getBool("WEBGL_PACK")),Se$1.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>Se$1.getBool("WEBGL_PACK")),Se$1.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>Se$1.getBool("WEBGL_PACK")),Se$1.registerFlag("WEBGL_PACK_REDUCE",()=>Se$1.getBool("WEBGL_PACK")),Se$1.registerFlag("WEBGL_LAZILY_UNPACK",()=>Se$1.getBool("WEBGL_PACK")),Se$1.registerFlag("WEBGL_CONV_IM2COL",()=>Se$1.getBool("WEBGL_PACK")),Se$1.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>Se$1.getBool("WEBGL_PACK")),Se$1.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>UI(Se$1.getNumber("WEBGL_VERSION"))),Se$1.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>GI(Se$1.getNumber("WEBGL_VERSION"))),Se$1.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{let o=Se$1.getNumber("WEBGL_VERSION");return o===0?0:HI(o)}),Se$1.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>Se$1.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!eu.isMobile()),Se$1.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>KI(Se$1.getNumber("WEBGL_VERSION"))),Se$1.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>!Se$1.getBool("WEBGL_FORCE_F16_TEXTURES")&&Se$1.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")),Se$1.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>qI(Se$1.getNumber("WEBGL_VERSION"))),Se$1.registerFlag("WEBGL_FENCE_API_ENABLED",()=>jI(Se$1.getNumber("WEBGL_VERSION"))),Se$1.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>Se$1.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0),Se$1.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,o=>{if(typeof o!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${o}.`);if(o<0&&o!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${o}.`)}),Se$1.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>eu.isMobile()?1:-1,o=>{if(typeof o!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${o}.`);if(o<0&&o!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${o}.`)}),Se$1.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128),Se$1.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1),Se$1.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5),Se$1.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128),Se$1.registerFlag("WEBGL_EXP_CONV",()=>!1),Se$1.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>Se$1.getBool("IS_TEST")),Se$1.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0),Se$1.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1),Se$1.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1),Se$1.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);var Qf=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`,{getBroadcastDims:$R}=w;function RR(o,i,s){let _=[];if(o.forEach(rr=>{let or=y.sizeFromShape(rr.shapeInfo.logicalShape);if(rr.shapeInfo.isUniform?_.push(`uniform float ${rr.name}${or>1?`[${or}]`:""};`):(_.push(`uniform sampler2D ${rr.name};`),_.push(`uniform int offset${rr.name};`)),s.enableShapeUniforms){let{uniformShape:hr}=Zf(s.packedInputs,rr.shapeInfo.logicalShape,rr.shapeInfo.texShape);switch(hr.length){case 1:_.push(`uniform int ${rr.name}Shape;`);break;case 2:_.push(`uniform ivec2 ${rr.name}Shape;`);break;case 3:_.push(`uniform ivec3 ${rr.name}Shape;`);break;case 4:_.push(`uniform ivec4 ${rr.name}Shape;`)}_.push(`uniform ivec2 ${rr.name}TexShape;`)}}),s.enableShapeUniforms){switch(i.logicalShape.length){case 1:_.push("uniform int outShape;");break;case 2:_.push("uniform ivec2 outShape;"),_.push("uniform int outShapeStrides;");break;case 3:_.push("uniform ivec3 outShape;"),_.push("uniform ivec2 outShapeStrides;");break;case 4:_.push("uniform ivec4 outShape;"),_.push("uniform ivec3 outShapeStrides;")}_.push("uniform ivec2 outTexShape;")}s.customUniforms&&s.customUniforms.forEach(rr=>{_.push(`uniform ${rr.type} ${rr.name}${rr.arrayIndex?`[${rr.arrayIndex}]`:""};`)});let _e,ct,Mt=_.join(`
`),Ft=o.map(rr=>hZ(rr,i,s.packedInputs,s.enableShapeUniforms)).join(`
`),Ut=i.texShape,Xt=It$1(),Kt=yZ(Xt),nr=wZ(Xt);return i.isPacked?(_e=gZ(i.logicalShape,Ut,s.enableShapeUniforms),ct=CZ(Xt)):(_e=xZ(i.logicalShape,Ut,s.enableShapeUniforms),ct=bZ(Xt)),s.packedInputs&&(nr+=kZ),[nr,Kt,ct,Mt,_e,Ft,s.userCode].join(`
`)}function Ac(o,i=!1){let s=o.shapeInfo.logicalShape;switch(s.length){case 0:return MZ(o,i);case 1:return BZ(o,i);case 2:return VZ(o,i);case 3:return UZ(o,i);case 4:return HZ(o,i);case 5:return KZ(o);case 6:return qZ(o);default:throw new Error(`${s.length}-D input sampling is not yet supported`)}}function DR(o,i){switch(o.shapeInfo.logicalShape.length){case 0:return OZ(o);case 1:return LZ(o,i);case 2:return zZ(o,i);case 3:return WZ(o,i);default:return GZ(o,i)}}function hZ(o,i,s=!1,_){let _e="";_e+=s?DR(o,_):Ac(o,_);let ct=o.shapeInfo.logicalShape,Mt=i.logicalShape;return ct.length<=Mt.length&&(_e+=s?jZ(o,i):XZ(o,i)),_e}function gZ(o,i,s){switch(o.length){case 0:return AR();case 1:return NZ(o,i,s);case 2:return FZ(o,i,s);case 3:return _Z(o,i,s);default:return $Z(o,i,s)}}function xZ(o,i,s){switch(o.length){case 0:return AR();case 1:return TZ(o,i,s);case 2:return PZ(o,i,s);case 3:return EZ(o,i,s);case 4:return RZ(o,i,s);case 5:return DZ(o,i);case 6:return AZ(o,i);default:throw new Error(`${o.length}-D output sampling is not yet supported`)}}function yZ(o){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${o.texture2D}(textureSampler, uv).r;
    }
  `}function bZ(o){return`
    void setOutput(float val) {
      ${o.output} = vec4(val, 0, 0, 0);
    }
  `}function CZ(o){return`
    void setOutput(vec4 val) {
      ${o.output} = val;
    }
  `}function wZ(o){return`${o.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${o.varyingFs} vec2 resultUV;
    ${o.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${o.defineSpecialNaN}
    ${o.defineSpecialInf}
    ${o.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${SZ}
    ${IZ}
    ${vZ}
  `}var SZ=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,IZ=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,vZ=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,kZ=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function AR(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function NZ(o,i,s){let _=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];return _[0]===1?s?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${_[1]}.0);
      }
    `:_[1]===1?s?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${_[0]}.0);
      }
    `:s?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${_[0]}, ${_[1]}));
      return 2 * (resTexRC.x * ${_[1]} + resTexRC.y);
    }
  `}function TZ(o,i,s){return i[0]===1?s?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${i[1]}.0);
      }
    `:i[1]===1?s?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${i[0]}.0);
      }
    `:s?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${i[0]}, ${i[1]}));
      return resTexRC.x * ${i[1]} + resTexRC.y;
    }
  `}function _Z(o,i,s){if(s)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;let _=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],_e=Math.ceil(o[2]/2),ct=_e*Math.ceil(o[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${_[0]}, ${_[1]}));
      int index = resTexRC.x * ${_[1]} + resTexRC.y;

      int b = index / ${ct};
      index -= b * ${ct};

      int r = 2 * (index / ${_e});
      int c = imod(index, ${_e}) * 2;

      return ivec3(b, r, c);
    }
  `}function EZ(o,i,s){if(s)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${xp(["r","c","d"],o)}
    return ivec3(r, c, d);
  }
`;let _=Ws(["r","c","d"],o);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${i[0]}, ${i[1]}));
      int index = resTexRC.x * ${i[1]} + resTexRC.y;
      ${_}
      return ivec3(r, c, d);
    }
  `}function $Z(o,i,s){if(s)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;let _=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],_e=Math.ceil(o[o.length-1]/2),ct=_e*Math.ceil(o[o.length-2]/2),Mt=ct,Ft="",Ut="b, r, c";for(let Xt=2;Xt<o.length-1;Xt++)Mt*=o[o.length-Xt-1],Ft=`
      int b${Xt} = index / ${Mt};
      index -= b${Xt} * ${Mt};
    `+Ft,Ut=`b${Xt}, `+Ut;return`
    ivec${o.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${_[0]}, ${_[1]}));
      int index = resTexRC.x * ${_[1]} + resTexRC.y;

      ${Ft}

      int b = index / ${ct};
      index -= b * ${ct};

      int r = 2 * (index / ${_e});
      int c = imod(index, ${_e}) * 2;

      return ivec${o.length}(${Ut});
    }
  `}function RZ(o,i,s){if(s)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${xp(["r","c","d","d2"],o)}
      return ivec4(r, c, d, d2);
    }
  `;let _=Ws(["r","c","d","d2"],o);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${i[0]}, ${i[1]}));
      int index = resTexRC.x * ${i[1]} + resTexRC.y;
      ${_}
      return ivec4(r, c, d, d2);
    }
  `}function DZ(o,i){let s=Ws(["r","c","d","d2","d3"],o);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${i[0]},
                             ${i[1]}));

      int index = resTexRC.x * ${i[1]} + resTexRC.y;

      ${s}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function AZ(o,i){let s=Ws(["r","c","d","d2","d3","d4"],o);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${i[0]}, ${i[1]}));
      int index = resTexRC.x * ${i[1]} + resTexRC.y;

      ${s}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function FZ(o,i,s){let _=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(y.arraysEqual(o,i))return s?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${_[0]}, ${_[1]}));
      }
    `;let _e=Math.ceil(o[1]/2);return s?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${_[0]}, ${_[1]}));

      int index = resTexRC.x * ${_[1]} + resTexRC.y;
      int r = 2 * (index / ${_e});
      int c = imod(index, ${_e}) * 2;

      return ivec2(r, c);
    }
  `}function PZ(o,i,s){return y.arraysEqual(o,i)?s?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${i[0]}, ${i[1]}));
      }
    `:o[1]===1?s?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${i[0]}, ${i[1]}));
        int index = resTexRC.x * ${i[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:o[0]===1?s?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${i[0]}, ${i[1]}));
        int index = resTexRC.x * ${i[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:s?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${i[0]}, ${i[1]}));
      int index = resTexRC.x * ${i[1]} + resTexRC.y;
      int r = index / ${o[1]};
      int c = index - r * ${o[1]};
      return ivec2(r, c);
    }
  `}function yp(o){return`offset${o}`}function OZ(o){let i=o.name;return`
    vec4 ${"get"+i.charAt(0).toUpperCase()+i.slice(1)}() {
      return ${It$1().texture2D}(${i}, halfCR);
    }
  `}function MZ(o,i){let s=o.name,_="get"+s.charAt(0).toUpperCase()+s.slice(1);if(o.shapeInfo.isUniform)return`float ${_}() {return ${s};}`;let[_e,ct]=o.shapeInfo.texShape;if(_e===1&&ct===1)return`
      float ${_}() {
        return sampleTexture(${s}, halfCR);
      }
    `;let Mt=yp(s);if(i)return`
    float ${_}() {
      vec2 uv = uvFromFlat(${s}TexShape[0], ${s}TexShape[1], ${Mt});
      return sampleTexture(${s}, uv);
    }
  `;let[Ft,Ut]=o.shapeInfo.texShape;return`
    float ${_}() {
      vec2 uv = uvFromFlat(${Ft}, ${Ut}, ${Mt});
      return sampleTexture(${s}, uv);
    }
  `}function LZ(o,i){let s=o.name,_="get"+s.charAt(0).toUpperCase()+s.slice(1),_e=o.shapeInfo.texShape,ct=It$1();if(i)return`
    vec4 ${_}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${s}TexShape[0]) / 2.0), ceil(float(${s}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${ct.texture2D}(${s}, uv);
    }
  `;let Mt=[Math.ceil(_e[0]/2),Math.ceil(_e[1]/2)];return`
    vec4 ${_}(int index) {
      vec2 uv = packedUVfrom1D(
        ${Mt[0]}, ${Mt[1]}, index);
      return ${ct.texture2D}(${s}, uv);
    }
  `}function BZ(o,i){let s=o.name,_="get"+s.charAt(0).toUpperCase()+s.slice(1);if(o.shapeInfo.isUniform)return`
      float ${_}(int index) {
        ${Fc(o)}
      }
    `;let _e=o.shapeInfo.texShape,ct=_e[0],Mt=_e[1];if(Mt===1&&ct===1)return`
      float ${_}(int index) {
        return sampleTexture(${s}, halfCR);
      }
    `;let Ft=yp(s);return Mt===1?i?`
      float ${_}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${Ft}) + 0.5) / float(${s}TexShape[0]));
        return sampleTexture(${s}, uv);
      }
    `:`
      float ${_}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${Ft}) + 0.5) / ${ct}.0);
        return sampleTexture(${s}, uv);
      }
    `:ct===1?i?`
      float ${_}(int index) {
        vec2 uv = vec2((float(index + ${Ft}) + 0.5) / float(${s}TexShape[1]), 0.5);
        return sampleTexture(${s}, uv);
      }
    `:`
      float ${_}(int index) {
        vec2 uv = vec2((float(index + ${Ft}) + 0.5) / ${Mt}.0, 0.5);
        return sampleTexture(${s}, uv);
      }
    `:i?`
    float ${_}(int index) {
      vec2 uv = uvFromFlat(${s}TexShape[0], ${s}TexShape[1], index + ${Ft});
      return sampleTexture(${s}, uv);
    }
  `:`
    float ${_}(int index) {
      vec2 uv = uvFromFlat(${ct}, ${Mt}, index + ${Ft});
      return sampleTexture(${s}, uv);
    }
  `}function zZ(o,i){let s=o.shapeInfo.logicalShape,_=o.name,_e="get"+_.charAt(0).toUpperCase()+_.slice(1),ct=o.shapeInfo.texShape,Mt=ct[0],Ft=ct[1],Ut=It$1();if(ct!=null&&y.arraysEqual(s,ct))return i?`
      vec4 ${_e}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${_}TexShape[1], ${_}TexShape[0]);

        return ${Ut.texture2D}(${_}, uv);
      }
    `:`
      vec4 ${_e}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${Ft}.0, ${Mt}.0);

        return ${Ut.texture2D}(${_}, uv);
      }
    `;if(i)return`
    vec4 ${_e}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${_}TexShape[0]) / 2.0), ceil(float(${_}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${_}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${Ut.texture2D}(${_}, uv);
    }
  `;let Xt=[Math.ceil(ct[0]/2),Math.ceil(ct[1]/2)];return`
    vec4 ${_e}(int row, int col) {
      vec2 uv = packedUVfrom2D(${Math.ceil(s[1]/2)}, ${Xt[0]}, ${Xt[1]}, row, col);
      return ${Ut.texture2D}(${_}, uv);
    }
  `}function VZ(o,i){let s=o.shapeInfo.logicalShape,_=o.name,_e="get"+_.charAt(0).toUpperCase()+_.slice(1),ct=o.shapeInfo.texShape;if(ct!=null&&y.arraysEqual(s,ct)){if(i)return`
      float ${_e}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${_}TexShape[1], ${_}TexShape[0]);
        return sampleTexture(${_}, uv);
      }
    `;let rr=ct[0];return`
    float ${_e}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${ct[1]}.0, ${rr}.0);
      return sampleTexture(${_}, uv);
    }
  `}let{newShape:Mt,keptDims:Ft}=y.squeezeShape(s),Ut=Mt;if(Ut.length<s.length){let rr=["row","col"];return`
      ${Ac(Pc(o,Ut),i)}
      float ${_e}(int row, int col) {
        return ${_e}(${Oc(rr,Ft)});
      }
    `}if(o.shapeInfo.isUniform)return`
      float ${_e}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${s[1]}, 1)));
        ${Fc(o)}
      }
    `;let Xt=ct[0],Kt=ct[1],nr=yp(_);return Kt===1?i?`
      float ${_e}(int row, int col) {
        float index = dot(vec3(row, col, ${nr}), vec3(${_}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${_}TexShape[0]));
        return sampleTexture(${_}, uv);
      }
    `:`
    float ${_e}(int row, int col) {
      float index = dot(vec3(row, col, ${nr}), vec3(${s[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${Xt}.0);
      return sampleTexture(${_}, uv);
    }
  `:Xt===1?i?`
      float ${_e}(int row, int col) {
        float index = dot(vec3(row, col, ${nr}), vec3(${_}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${_}TexShape[1]), 0.5);
        return sampleTexture(${_}, uv);
      }
    `:`
    float ${_e}(int row, int col) {
      float index = dot(vec3(row, col, ${nr}), vec3(${s[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${Kt}.0, 0.5);
      return sampleTexture(${_}, uv);
    }
  `:i?`
      float ${_e}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${_}Shape[1] + col + ${nr};
        vec2 uv = uvFromFlat(${_}TexShape[0], ${_}TexShape[1], index);
        return sampleTexture(${_}, uv);
      }
    `:`
  float ${_e}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${s[1]} + col + ${nr};
    vec2 uv = uvFromFlat(${Xt}, ${Kt}, index);
    return sampleTexture(${_}, uv);
  }
`}function WZ(o,i){let s=o.shapeInfo.logicalShape,_=o.name,_e="get"+_.charAt(0).toUpperCase()+_.slice(1),ct=o.shapeInfo.texShape,Mt=[Math.ceil(ct[0]/2),Math.ceil(ct[1]/2)];if(s[0]===1){let nr=[1,2],rr=["b","row","col"];return`
        ${DR(Pc(o,s.slice(1)),i)}
        vec4 ${_e}(int b, int row, int col) {
          return ${_e}(${Oc(rr,nr)});
        }
      `}let Ft=It$1();if(i)return`
    vec4 ${_e}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${_}TexShape[0]) / 2.0), ceil(float(${_}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${_}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${_}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${Ft.texture2D}(${_}, uv);
    }
  `;let Ut=Mt[0],Xt=Mt[1],Kt=Math.ceil(s[2]/2);return`
    vec4 ${_e}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${Ut}, ${Xt}, ${Kt*Math.ceil(s[1]/2)}, ${Kt}, b, row, col);
      return ${Ft.texture2D}(${_}, uv);
    }
  `}function UZ(o,i){let s=o.shapeInfo.logicalShape,_=o.name,_e="get"+_.charAt(0).toUpperCase()+_.slice(1),ct=s[1]*s[2],Mt=s[2],{newShape:Ft,keptDims:Ut}=y.squeezeShape(s),Xt=Ft;if(Xt.length<s.length){let fr=["row","col","depth"];return`
        ${Ac(Pc(o,Xt),i)}
        float ${_e}(int row, int col, int depth) {
          return ${_e}(${Oc(fr,Ut)});
        }
      `}if(o.shapeInfo.isUniform)return`
      float ${_e}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${ct}, ${Mt}, 1)));
        ${Fc(o)}
      }
    `;let Kt=o.shapeInfo.texShape,nr=Kt[0],rr=Kt[1],or=o.shapeInfo.flatOffset;if(rr===ct&&or==null)return i?`
      float ${_e}(int row, int col, int depth) {
        int stride1 = ${_}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${_}TexShape[1], ${_}TexShape[0]);
        return sampleTexture(${_}, uv);
      }
    `:`
        float ${_e}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${Mt}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${rr}.0, ${nr}.0);
          return sampleTexture(${_}, uv);
        }
      `;if(rr===Mt&&or==null)return i?`
      float ${_e}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${_}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${_}TexShape[1], ${_}TexShape[0]);
        return sampleTexture(${_}, uv);
      }
    `:`
    float ${_e}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${s[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${rr}.0, ${nr}.0);
      return sampleTexture(${_}, uv);
    }
  `;let hr=yp(_);return i?`
    float ${_e}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${_}Shape[1] * ${_}Shape[2];
      int stride1 = ${_}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${hr};
      vec2 uv = uvFromFlat(${_}TexShape[0], ${_}TexShape[1], index);
      return sampleTexture(${_}, uv);
    }
    `:`
      float ${_e}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${ct} + col * ${Mt} + depth + ${hr};
        vec2 uv = uvFromFlat(${nr}, ${rr}, index);
        return sampleTexture(${_}, uv);
      }
  `}function GZ(o,i){let s=o.name,_="get"+s.charAt(0).toUpperCase()+s.slice(1),_e=It$1();if(i)return`
    vec4 ${_}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${s}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${s}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${s}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${s}TexShape[0]) / 2.0), ceil(float(${s}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${_e.texture2D}(${s}, uv);
    }
  `;let ct=o.shapeInfo.logicalShape,Mt=ct.length,Ft=o.shapeInfo.texShape,Ut=[Math.ceil(Ft[0]/2),Math.ceil(Ft[1]/2)],Xt=Ut[0],Kt=Ut[1],nr=Math.ceil(ct[Mt-1]/2),rr=nr*Math.ceil(ct[Mt-2]/2),or="int b, int row, int col",hr=`b * ${rr} + (row / 2) * ${nr} + (col / 2)`;for(let fr=2;fr<Mt-1;fr++)or=`int b${fr}, `+or,rr*=ct[Mt-fr-1],hr=`b${fr} * ${rr} + `+hr;return`
    vec4 ${_}(${or}) {
      int index = ${hr};
      int texR = index / ${Kt};
      int texC = index - texR * ${Kt};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${Kt}, ${Xt});
      return ${_e.texture2D}(${s}, uv);
    }
  `}function HZ(o,i){let s=o.shapeInfo.logicalShape,_=o.name,_e="get"+_.charAt(0).toUpperCase()+_.slice(1),ct=s[3],Mt=s[2]*ct,Ft=s[1]*Mt,{newShape:Ut,keptDims:Xt}=y.squeezeShape(s);if(Ut.length<s.length){let Br=["row","col","depth","depth2"];return`
      ${Ac(Pc(o,Ut),i)}
      float ${_e}(int row, int col, int depth, int depth2) {
        return ${_e}(${Oc(Br,Xt)});
      }
    `}if(o.shapeInfo.isUniform)return`
      float ${_e}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${Ft}, ${Mt}, ${ct}, 1)));
        ${Fc(o)}
      }
    `;let Kt=o.shapeInfo.flatOffset,nr=o.shapeInfo.texShape,rr=nr[0],or=nr[1],hr=`int stride2 = ${_}Shape[3];`,fr=`int stride1 = ${_}Shape[2] * stride2;`,yr=`int stride0 = ${_}Shape[1] * stride1;`;if(or===Ft&&Kt==null)return i?`
      float ${_e}(int row, int col, int depth, int depth2) {
        ${hr}
        ${fr}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${_}TexShape[1], ${_}TexShape[0]);
        return sampleTexture(${_}, uv);
      }
    `:`
      float ${_e}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${Mt}, ${ct}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${or}.0, ${rr}.0);
        return sampleTexture(${_}, uv);
      }
    `;if(or===ct&&Kt==null)return i?`
      float ${_e}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${_}Shape[1] * ${_}Shape[2], ${_}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${_}TexShape[1], ${_}TexShape[0]);
        return sampleTexture(${_}, uv);
      }
    `:`
      float ${_e}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${s[1]*s[2]}, ${s[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${or}.0, ${rr}.0);
        return sampleTexture(${_}, uv);
      }
    `;let Lr=yp(_);return i?`
    float ${_e}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${hr}
      ${fr}
      ${yr}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${_}TexShape[0], ${_}TexShape[1], index + ${Lr});
      return sampleTexture(${_}, uv);
    }
  `:`
    float ${_e}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${Ft} + col * ${Mt} +
          depth * ${ct} + depth2;
      vec2 uv = uvFromFlat(${rr}, ${or}, index + ${Lr});
      return sampleTexture(${_}, uv);
    }
  `}function KZ(o){let i=o.shapeInfo.logicalShape,s=o.name,_="get"+s.charAt(0).toUpperCase()+s.slice(1),_e=i[4],ct=i[3]*_e,Mt=i[2]*ct,Ft=i[1]*Mt,{newShape:Ut,keptDims:Xt}=y.squeezeShape(i);if(Ut.length<i.length){let hr=["row","col","depth","depth2","depth3"];return`
      ${Ac(Pc(o,Ut))}
      float ${_}(int row, int col, int depth, int depth2, int depth3) {
        return ${_}(${Oc(hr,Xt)});
      }
    `}if(o.shapeInfo.isUniform)return`
      float ${_}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${Ft}, ${Mt}, ${ct}, ${_e})) +
          depth3;
        ${Fc(o)}
      }
    `;let Kt=o.shapeInfo.flatOffset,nr=o.shapeInfo.texShape,rr=nr[0],or=nr[1];return or===Ft&&Kt==null?`
      float ${_}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${Mt}, ${ct}, ${_e}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${or}.0, ${rr}.0);
        return sampleTexture(${s}, uv);
      }
    `:or===_e&&Kt==null?`
      float ${_}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${i[1]*i[2]*i[3]},
               ${i[2]*i[3]}, ${i[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${or}.0, ${rr}.0);
        return sampleTexture(${s}, uv);
      }
    `:`
    float ${_}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${Ft} + col * ${Mt} + depth * ${ct} +
          depth2 * ${_e} + depth3 + ${yp(s)};
      vec2 uv = uvFromFlat(${rr}, ${or}, index);
      return sampleTexture(${s}, uv);
    }
  `}function qZ(o){let i=o.shapeInfo.logicalShape,s=o.name,_="get"+s.charAt(0).toUpperCase()+s.slice(1),{newShape:_e,keptDims:ct}=y.squeezeShape(i);if(_e.length<i.length){let fr=["row","col","depth","depth2","depth3","depth4"];return`
      ${Ac(Pc(o,_e))}
      float ${_}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${_}(${Oc(fr,ct)});
      }
    `}let Mt=i[5],Ft=i[4]*Mt,Ut=i[3]*Ft,Xt=i[2]*Ut,Kt=i[1]*Xt;if(o.shapeInfo.isUniform)return`
      float ${_}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${Kt}, ${Xt}, ${Ut}, ${Ft})) +
          dot(
            vec2(depth3, depth4),
            vec2(${Mt}, 1)));
        ${Fc(o)}
      }
    `;let nr=o.shapeInfo.flatOffset,rr=o.shapeInfo.texShape,or=rr[0],hr=rr[1];return hr===Kt&&nr==null?`
      float ${_}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${Xt}, ${Ut}, ${Ft}, ${Mt})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${hr}.0, ${or}.0);
        return sampleTexture(${s}, uv);
      }
    `:hr===Mt&&nr==null?`
      float ${_}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${i[1]*i[2]*i[3]*i[4]},
               ${i[2]*i[3]*i[4]},
               ${i[3]*i[4]},
               ${i[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${hr}.0, ${or}.0);
        return sampleTexture(${s}, uv);
      }
    `:`
    float ${_}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${Kt} + col * ${Xt} + depth * ${Ut} +
          depth2 * ${Ft} + depth3 * ${Mt} + depth4 + ${yp(s)};
      vec2 uv = uvFromFlat(${or}, ${hr}, index);
      return sampleTexture(${s}, uv);
    }
  `}function Fc(o){let i=o.name,s=y.sizeFromShape(o.shapeInfo.logicalShape);return s<2?`return ${i};`:`
    for (int i = 0; i < ${s}; i++) {
      if (i == index) {
        return ${i}[i];
      }
    }
  `}function jZ(o,i){let s,_=o.name,_e=_.charAt(0).toUpperCase()+_.slice(1),ct="get"+_e+"AtOutCoords",Mt=o.shapeInfo.logicalShape.length,Ft=i.logicalShape.length,Ut=$R(o.shapeInfo.logicalShape,i.logicalShape),Xt=Re$1(Ft),Kt=Ft-Mt,nr=["x","y","z","w","u","v"];s=Mt===0?"":Ft<2&&Ut.length>=1?"coords = 0;":Ut.map(yr=>`coords.${nr[yr+Kt]} = 0;`).join(`
`);let rr="";rr=Ft<2&&Mt>0?"coords":o.shapeInfo.logicalShape.map((yr,Lr)=>`coords.${nr[Lr+Kt]}`).join(", ");let or="return outputValue;",hr=y.sizeFromShape(o.shapeInfo.logicalShape)===1,fr=y.sizeFromShape(i.logicalShape)===1;if(Mt!==1||hr||fr){if(hr&&!fr)or=Ft===1?`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:`
        return vec4(outputValue.x);
      `;else if(Ut.length){let yr=Mt-2,Lr=Mt-1;Ut.indexOf(yr)>-1&&Ut.indexOf(Lr)>-1?or="return vec4(outputValue.x);":Ut.indexOf(yr)>-1?or="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":Ut.indexOf(Lr)>-1&&(or="return vec4(outputValue.xx, outputValue.zz);")}}else or=`
      return vec4(outputValue.xy, outputValue.xy);
    `;return`
    vec4 ${ct}() {
      ${Xt} coords = getOutputCoords();
      ${s}
      vec4 outputValue = get${_e}(${rr});
      ${or}
    }
  `}function XZ(o,i){let s=o.name,_=s.charAt(0).toUpperCase()+s.slice(1),_e="get"+_+"AtOutCoords",ct=i.texShape,Mt=o.shapeInfo.texShape,Ft=o.shapeInfo.logicalShape.length,Ut=i.logicalShape.length;if(!o.shapeInfo.isUniform&&Ft===Ut&&o.shapeInfo.flatOffset==null&&y.arraysEqual(Mt,ct))return`
      float ${_e}() {
        return sampleTexture(${s}, resultUV);
      }
    `;let Xt,Kt=Re$1(Ut),nr=$R(o.shapeInfo.logicalShape,i.logicalShape),rr=Ut-Ft,or=["x","y","z","w","u","v"];Xt=Ft===0?"":Ut<2&&nr.length>=1?"coords = 0;":nr.map(fr=>`coords.${or[fr+rr]} = 0;`).join(`
`);let hr="";return hr=Ut<2&&Ft>0?"coords":o.shapeInfo.logicalShape.map((fr,yr)=>`coords.${or[yr+rr]}`).join(", "),`
    float ${_e}() {
      ${Kt} coords = getOutputCoords();
      ${Xt}
      return get${_}(${hr});
    }
  `}function Re$1(o){if(o<=1)return"int";if(o===2)return"ivec2";if(o===3)return"ivec3";if(o===4)return"ivec4";if(o===5)return"ivec5";if(o===6)return"ivec6";throw Error(`GPU for rank ${o} is not yet supported`)}function Zf(o,i,s){let{newShape:_,keptDims:_e}=y.squeezeShape(i),ct=i.length,Mt=o&&ct===3&&i[0]===1,Ft=Mt?i.slice(1):_,Ut=!o&&ct>1&&!y.arraysEqual(i,s)&&_.length<ct||Mt;return{useSqueezeShape:Ut,uniformShape:Ut?Ft:i,keptDims:_e}}function Pc(o,i){let s=JSON.parse(JSON.stringify(o));return s.shapeInfo.logicalShape=i,s}function Oc(o,i){return i.map(s=>o[s]).join(", ")}function PR(o,i,s,_){let _e=s.map((Kt,nr)=>{let rr={logicalShape:Kt.shape,texShape:Kt.isUniform?null:Kt.texData.texShape,isUniform:Kt.isUniform,isPacked:!Kt.isUniform&&Kt.texData.isPacked,flatOffset:null};return Kt.texData!=null&&Kt.texData.slice!=null&&Kt.texData.slice.flatOffset>0&&(rr.flatOffset=Kt.texData.slice.flatOffset),{name:i.variableNames[nr],shapeInfo:rr}}),ct=_e.map(Kt=>Kt.shapeInfo),Mt={logicalShape:_.shape,texShape:_.texData.texShape,isUniform:!1,isPacked:_.texData.isPacked,flatOffset:null},Ft=RR(_e,Mt,i),Ut=RI(o.gl,Ft),Xt=o.createProgram(Ut);return A().get("ENGINE_COMPILE_ONLY")?{program:i,fragmentShader:Ut,source:Ft,webGLProgram:Xt,inShapeInfos:ct,outShapeInfo:Mt,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(o.buildVao(Xt),Object.assign({program:i,fragmentShader:Ut,source:Ft,webGLProgram:Xt,inShapeInfos:ct,outShapeInfo:Mt},XI(o,i,Xt)))}function XI(o,i,s){let _,_e,ct,Mt=[],Ft=[],Ut=null,Xt=null;Xt=o.getUniformLocation(s,"NAN",!1),A().getNumber("WEBGL_VERSION")===1&&(Ut=o.getUniformLocation(s,"INFINITY",!1));let Kt=!1;for(let nr of i.variableNames){let rr={name:nr,uniform:o.getUniformLocation(s,nr,Kt),offset:o.getUniformLocation(s,`offset${nr}`,Kt)};i.enableShapeUniforms&&(rr.shape=o.getUniformLocation(s,`${nr}Shape`,Kt),rr.texShape=o.getUniformLocation(s,`${nr}TexShape`,Kt)),Mt.push(rr)}if(i.enableShapeUniforms&&(_=o.getUniformLocation(s,"outShape",Kt),ct=o.getUniformLocation(s,"outShapeStrides",Kt),_e=o.getUniformLocation(s,"outTexShape",Kt)),i.customUniforms)for(let nr of i.customUniforms)Ft.push(o.getUniformLocation(s,nr.name,Kt));return{variablesLocations:Mt,customUniformLocations:Ft,infLoc:Ut,nanLoc:Xt,outShapeLocation:_,outShapeStridesLocation:ct,outTexShapeLocation:_e}}function FR(o,i){if(o.length!==i.length)throw Error(`Binary was compiled with ${o.length} inputs, but was executed with ${i.length} inputs`);o.forEach((s,_)=>{let _e=s.logicalShape,ct=i[_],Mt=ct.shape;if(!y.arraysEqual(_e,Mt))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${_e} and ${Mt} must match`);if(s.isUniform&&ct.isUniform)return;let Ft=s.texShape,Ut=ct.isUniform?null:ct.texData.texShape;if(!y.arraysEqual(Ft,Ut))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${Ft} and ${Ut} must match`)})}function OR(o,i,s,_,_e){i.program.enableShapeUniforms||(FR(i.inShapeInfos,s),FR([i.outShapeInfo],[_]));let ct=_.texData.texture,Mt=_.texData.texShape;_.texData.isPacked?o.setOutputPackedMatrixTexture(ct.texture,Mt[0],Mt[1]):o.setOutputMatrixTexture(ct.texture,Mt[0],Mt[1]),o.setProgram(i.webGLProgram),o.bindVertexArray(i.webGLProgram.vao),A().getNumber("WEBGL_VERSION")===1&&i.infLoc!==null&&o.gl.uniform1f(i.infLoc,1/0),i.nanLoc!==null&&o.gl.uniform1f(i.nanLoc,NaN);for(let Ut=0;Ut<s.length;++Ut){let Xt=s[Ut],{uniform:Kt,offset:nr,shape:rr,texShape:or}=i.variablesLocations[Ut];if(rr){let{uniformShape:hr}=Zf(i.program.packedInputs,Xt.shape,Xt.texData.texShape);switch(hr.length){case 1:o.gl.uniform1iv(rr,new Int32Array(hr));break;case 2:o.gl.uniform2iv(rr,new Int32Array(hr));break;case 3:o.gl.uniform3iv(rr,new Int32Array(hr));break;case 4:o.gl.uniform4iv(rr,new Int32Array(hr))}}if(or&&o.gl.uniform2i(or,Xt.texData.texShape[0],Xt.texData.texShape[1]),Kt!=null){if(Xt.isUniform){if(y.sizeFromShape(Xt.shape)<2)o.gl.uniform1f(Kt,Xt.uniformValues[0]);else{let hr=Xt.uniformValues;hr instanceof Float32Array||(hr=new Float32Array(hr)),o.gl.uniform1fv(Kt,hr)}continue}Xt.texData.slice!=null&&nr!=null&&o.gl.uniform1i(nr,Xt.texData.slice.flatOffset),o.setInputMatrixTexture(Xt.texData.texture.texture,Kt,Ut)}}let Ft=i.outShapeLocation;if(Ft)switch(_.shape.length){case 1:o.gl.uniform1iv(Ft,new Int32Array(_.shape));break;case 2:o.gl.uniform2iv(Ft,new Int32Array(_.shape));break;case 3:o.gl.uniform3iv(Ft,new Int32Array(_.shape));break;case 4:o.gl.uniform4iv(Ft,new Int32Array(_.shape))}if(i.outShapeStridesLocation){let Ut=y.computeStrides(_.shape);switch(_.shape.length){case 2:o.gl.uniform1iv(i.outShapeStridesLocation,new Int32Array(Ut));break;case 3:o.gl.uniform2iv(i.outShapeStridesLocation,new Int32Array(Ut));break;case 4:o.gl.uniform3iv(i.outShapeStridesLocation,new Int32Array(Ut))}}if(i.outTexShapeLocation&&o.gl.uniform2i(i.outTexShapeLocation,_.texData.texShape[0],_.texData.texShape[1]),i.program.customUniforms&&_e)for(let Ut=0;Ut<i.program.customUniforms.length;++Ut){let Xt=i.program.customUniforms[Ut],Kt=i.customUniformLocations[Ut],nr=_e[Ut];if(Xt.type==="float")o.gl.uniform1fv(Kt,nr);else if(Xt.type==="vec2")o.gl.uniform2fv(Kt,nr);else if(Xt.type==="vec3")o.gl.uniform3fv(Kt,nr);else if(Xt.type==="vec4")o.gl.uniform4fv(Kt,nr);else if(Xt.type==="int")o.gl.uniform1iv(Kt,nr);else if(Xt.type==="ivec2")o.gl.uniform2iv(Kt,nr);else if(Xt.type==="ivec3")o.gl.uniform3iv(Kt,nr);else{if(Xt.type!=="ivec4")throw Error(`uniform type ${Xt.type} is not supported yet.`);o.gl.uniform4iv(Kt,nr)}}o.executeProgram()}function MR(o,i,s){let _="";i.concat(s).forEach(Mt=>{let Ft=Mt.texData!=null&&Mt.texData.slice!=null&&Mt.texData.slice.flatOffset>0;if(o.enableShapeUniforms&&!Mt.isUniform){let Ut=Mt.texData.texShape,{useSqueezeShape:Xt,uniformShape:Kt,keptDims:nr}=Zf(o.packedInputs,Mt.shape,Ut),rr="",or="",hr="";if(Kt.length===1&&o.packedInputs){let ro=[Math.ceil(Ut[0]/2),Math.ceil(Ut[1]/2)];rr=`${ro[0]>1}_${ro[1]>1}`}else if(Kt.length!==2||o.packedInputs){if(Kt.length>2&&!o.packedInputs){let ro=y.computeStrides(Kt);hr=`${ro[0]===Ut[1]}_${ro[ro.length-1]===Ut[1]}`}}else or=`${Kt[0]>1}_${Kt[1]>1}`;let fr=Mt.shape.length,yr=Kt.length===2&&y.arraysEqual(Mt.shape,Ut),Lr=y.sizeFromShape(Mt.shape)===1,Br=w.getBroadcastDims(Mt.shape,s.shape),Vr=!o.packedInputs&&fr===s.shape.length&&y.arraysEqual(Ut,s.texData.texShape),Wr=o.packedInputs||Kt.length>2?"":`${Ut[0]>1}_${Ut[1]>1}`;_+=`${fr}_${Vr}_${Xt?nr:""}_${Kt.length}_${Lr}_${Br}_${yr}_${rr}_${or}_${hr}_${Wr}_${Ft}`}else{let Ut=Mt.isUniform?"uniform":Mt.texData.texShape;_+=`${Mt.shape}_${Ut}_${Ft}`}});let _e=o.userCode,ct=o.constructor.name;return ct+="_"+_+"_"+_e+`${A().getNumber("WEBGL_VERSION")}`,ct}function ut(o){return A().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&o<=4}var Jf=class{constructor(o){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=gu.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];let i=It$1();this.outputShape=o,this.enableShapeUniforms=ut(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?xp(["r","c","d"],o):Ws(["r","c","d"],o)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${i.output} = result;
      }
    `}},eh=class{constructor(o){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=gu.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];let i=It$1();this.outputShape=o,this.enableShapeUniforms=ut(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?xp(["r","c","d"],o):Ws(["r","c","d"],o)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${i.output} = result;
      }
    `}},th=class{constructor(o){this.variableNames=["A"],this.outTexUsage=mr.DOWNLOAD;let i=It$1();this.outputShape=o,this.userCode=`
      ${Qf}

      void main() {
        float x = getAAtOutCoords();
        ${i.output} = encode_float(x);
      }
    `}},rh=class{constructor(o){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=mr.DOWNLOAD;let i=It$1();this.outputShape=o,this.userCode=`
      ${Qf}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${i.output} = encode_float(x);
      }
    `}},ZZ={R:0,G:1,B:2,A:3},Zl=class{constructor(o,i=!1,s="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];let _=It$1();this.outputShape=o,this.enableShapeUniforms=ut(this.outputShape.length);let _e="result";i&&(_e="floor(result * 255. + 0.5)");let ct="";for(let Mt=0;Mt<s.length;Mt++){let Ft=s[Mt];ct+=`
          if(offset == ${Mt}) {
            result = values[${ZZ[Ft]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?Rc():$c(o)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${s.length});

        flatIndex = idiv(flatIndex, ${s.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${_.texture2D}(A, uv);
          ${ct}
        }
        ${_.output} = vec4(${_e}, 0., 0., 0.);
      }
    `}},oh=class{constructor(o,i=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];let s=It$1();this.outputShape=o,this.enableShapeUniforms=ut(this.outputShape.length);let _="",_e="result";i&&(_e="floor(result * 255. + 0.5)");for(let ct=0;ct<=1;ct++)for(let Mt=0;Mt<=1;Mt++){let Ft=2*ct+Mt;_+=`
          localCoords = coords;
          if(localCoords[2] + ${Mt} < ${this.enableShapeUniforms?"outShape[2]":`${o[2]}`}) {
          localCoords[2] += ${Mt};
          if (localCoords[1] + ${ct} < ${this.enableShapeUniforms?"outShape[1]":`${o[1]}`}) {
            localCoords[1] += ${ct};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${s.texture2D}(A, uv);

            if (offset == 0) {
              result[${Ft}] = values[0];
            } else if (offset == 1) {
              result[${Ft}] = values[1];
            } else if (offset == 2) {
              result[${Ft}] = values[2];
            } else {
              result[${Ft}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?Rc():$c(o)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${_}

          ${s.output} = ${_e};
        }
    `}},mv={};function YI(o){let i=It$1();return $I(o,`${i.version}
    precision highp float;
    ${i.attribute} vec3 clipSpacePos;
    ${i.attribute} vec2 uv;
    ${i.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`)}function QI(o){return FI(o,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function ZI(o){return PI(o,new Uint16Array([0,1,2,2,1,3]))}function Jl(o,i,s,_,_e,ct){MI(i,s);let Mt=OI(o),Ft=o.TEXTURE_2D;return ce(o,()=>o.bindTexture(Ft,Mt)),ce(o,()=>o.texParameteri(Ft,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE)),ce(o,()=>o.texParameteri(Ft,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE)),ce(o,()=>o.texParameteri(Ft,o.TEXTURE_MIN_FILTER,o.NEAREST)),ce(o,()=>o.texParameteri(Ft,o.TEXTURE_MAG_FILTER,o.NEAREST)),A().getNumber("WEBGL_VERSION")===1?ce(o,()=>o.texImage2D(Ft,0,_,i,s,0,_e,ct,null)):ce(o,()=>o.texStorage2D(Ft,1,_,i,s)),ce(o,()=>o.bindTexture(o.TEXTURE_2D,null)),{texture:Mt,texShape:[s,i]}}function nh(o){return o.internalFormatFloat}function JI(o,i,s,_){let[_e,ct]=gp(i,s);return Jl(o,_e,ct,nh(_),_.textureFormatFloat,o.FLOAT)}function sh(o){return o.internalFormatHalfFloat}function ev(o,i,s,_){let[_e,ct]=gp(i,s);return Jl(o,_e,ct,sh(_),_.textureFormatFloat,_.textureTypeHalfFloat)}function ah(o){return o.downloadTextureFormat}function tv(o,i,s,_){let[_e,ct]=gp(i,s);return Jl(o,_e,ct,ah(_),o.RGBA,o.UNSIGNED_BYTE)}function ih(o){return o.internalFormatPackedFloat}function rv(o,i,s,_){let[_e,ct]=Ma(i,s);return Jl(o,_e,ct,ih(_),o.RGBA,o.FLOAT)}function uh(o){return o.internalFormatPackedHalfFloat}function ov(o,i,s,_){let[_e,ct]=Ma(i,s);return Jl(o,_e,ct,uh(_),o.RGBA,_.textureTypeHalfFloat)}function nv(o,i,s){return ce(o,()=>o.bindBuffer(o.ARRAY_BUFFER,s)),jf(o,i,"clipSpacePos",s,3,20,0)&&jf(o,i,"uv",s,2,20,12)}function sv(o,i,s,_,_e,ct){let Mt,Ft,Ut;ce(o,()=>o.bindTexture(o.TEXTURE_2D,i)),_e instanceof Uint8Array?(Mt=new Uint8Array(s*_*4),Ft=o.UNSIGNED_BYTE,Ut=o.RGBA):(Mt=new Float32Array(s*_*4),Ft=o.FLOAT,Ut=ct.internalFormatPackedFloat),Mt.set(_e),A().getNumber("WEBGL_VERSION")===2?ce(o,()=>o.texSubImage2D(o.TEXTURE_2D,0,0,0,s,_,o.RGBA,Ft,Mt)):ce(o,()=>o.texImage2D(o.TEXTURE_2D,0,Ut,s,_,0,o.RGBA,Ft,Mt)),ce(o,()=>o.bindTexture(o.TEXTURE_2D,null))}function av(o,i,s){ce(o,()=>o.bindTexture(o.TEXTURE_2D,i)),s.data instanceof Uint8Array?A().getNumber("WEBGL_VERSION")===2?ce(o,()=>o.texSubImage2D(o.TEXTURE_2D,0,0,0,s.width,s.height,o.RGBA,o.UNSIGNED_BYTE,s.data)):ce(o,()=>o.texImage2D(o.TEXTURE_2D,0,o.RGBA,s.width,s.height,0,o.RGBA,o.UNSIGNED_BYTE,s.data)):A().getNumber("WEBGL_VERSION")===2?ce(o,()=>o.texSubImage2D(o.TEXTURE_2D,0,0,0,o.RGBA,o.UNSIGNED_BYTE,s)):ce(o,()=>o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,s)),ce(o,()=>o.bindTexture(o.TEXTURE_2D,null))}function iv(o,i,s,_){let _e=o.createBuffer();ce(o,()=>o.bindBuffer(o.PIXEL_PACK_BUFFER,_e));let ct=16*i*s;return ce(o,()=>o.bufferData(o.PIXEL_PACK_BUFFER,ct,o.STREAM_READ)),ce(o,()=>o.readPixels(0,0,s,i,o.RGBA,o.FLOAT,0)),ce(o,()=>o.bindBuffer(o.PIXEL_PACK_BUFFER,null)),_e}function uv(o,i,s){let _=o,_e=new Float32Array(s);return _.bindBuffer(_.PIXEL_PACK_BUFFER,i),_.getBufferSubData(_.PIXEL_PACK_BUFFER,0,_e),_.bindBuffer(_.PIXEL_PACK_BUFFER,null),_e}function pv(o,i,s,_){let[_e,ct]=gp(i,s),Mt=new Uint8Array(IR(i*s,4));return ce(o,()=>o.readPixels(0,0,_e,ct,_.downloadTextureFormat,o.UNSIGNED_BYTE,Mt)),new Float32Array(Mt.buffer)}function cv(o,i,s,_,_e,ct,Mt,Ft){let Ut=o,Xt=new Float32Array(vR(ct,Mt));return Ut.bindBuffer(Ut.PIXEL_PACK_BUFFER,i),Ut.getBufferSubData(Ut.PIXEL_PACK_BUFFER,0,Xt),Ut.bindBuffer(Ut.PIXEL_PACK_BUFFER,null),Xt}function lv(o,i,s){let _=new Float32Array(i*s*4);return ce(o,()=>o.readPixels(0,0,s,i,o.RGBA,o.FLOAT,_)),_}qe(mv,{bindVertexProgramAttributeStreams:()=>nv,createBufferFromOutputTexture:()=>iv,createFloat16MatrixTexture:()=>ev,createFloat16PackedMatrixTexture:()=>ov,createFloat32MatrixTexture:()=>JI,createIndexBuffer:()=>ZI,createPackedMatrixTexture:()=>rv,createUnsignedBytesMatrixTexture:()=>tv,createVertexBuffer:()=>QI,createVertexShader:()=>YI,downloadByteEncodedFloatMatrixFromOutputTexture:()=>pv,downloadFloat32MatrixFromBuffer:()=>uv,downloadMatrixFromPackedOutputTexture:()=>lv,downloadPackedMatrixFromBuffer:()=>cv,getInternalFormatForFloat16MatrixTexture:()=>sh,getInternalFormatForFloat16PackedMatrixTexture:()=>uh,getInternalFormatForFloat32MatrixTexture:()=>nh,getInternalFormatForPackedMatrixTexture:()=>ih,getInternalFormatForUnsignedBytesMatrixTexture:()=>ah,uploadDenseMatrixToTexture:()=>sv,uploadPixelDataToTexture:()=>av});var bp=class{constructor(o){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];let i=A().getNumber("WEBGL_VERSION");if(o!=null?(this.gl=o,NI(i,o)):this.gl=Kr(i),o=this.gl,A().getNumber("WEBGL_VERSION")===2){let _e=o;this.createVertexArray=()=>ce(_e,()=>_e.createVertexArray()),this.bindVertexArray=ct=>ce(_e,()=>_e.bindVertexArray(ct)),this.deleteVertexArray=ct=>ce(_e,()=>_e.deleteVertexArray(ct)),this.getVertexArray=()=>ce(_e,()=>_e.getParameter(_e.VERTEX_ARRAY_BINDING))}else if(o!=null){let _e=o.getExtension("OES_vertex_array_object");if(_e==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>ce(o,()=>_e.createVertexArrayOES()),this.bindVertexArray=ct=>ce(o,()=>_e.bindVertexArrayOES(ct)),this.deleteVertexArray=ct=>ce(o,()=>_e.deleteVertexArrayOES(ct)),this.getVertexArray=()=>ce(o,()=>o.getParameter(_e.VERTEX_ARRAY_BINDING_OES))}let s="WEBGL_color_buffer_float",_="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),A().getNumber("WEBGL_VERSION")===1){let _e="OES_texture_float",ct="OES_texture_half_float";if(this.textureFloatExtension=Nc(this.gl,_e),qr(this.gl,ct))this.textureHalfFloatExtension=Nc(this.gl,ct);else if(A().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(s),qr(this.gl,_))this.colorBufferHalfFloatExtension=Nc(this.gl,_);else if(A().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(s="EXT_color_buffer_float",qr(this.gl,s))this.colorBufferFloatExtension=this.gl.getExtension(s);else{if(!qr(this.gl,_))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(_)}this.vertexBuffer=QI(this.gl),this.indexBuffer=ZI(this.gl),this.framebuffer=LI(this.gl),this.textureConfig=Xl(this.gl,this.textureHalfFloatExtension)}get debug(){return A().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");let o=this.gl;ce(o,()=>o.finish()),ce(o,()=>o.bindFramebuffer(o.FRAMEBUFFER,null)),ce(o,()=>o.deleteFramebuffer(this.framebuffer)),ce(o,()=>o.bindBuffer(o.ARRAY_BUFFER,null)),ce(o,()=>o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,null)),ce(o,()=>o.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(o,i){return this.throwIfDisposed(),JI(this.gl,o,i,this.textureConfig)}createFloat16MatrixTexture(o,i){return this.throwIfDisposed(),ev(this.gl,o,i,this.textureConfig)}createUnsignedBytesMatrixTexture(o,i){return this.throwIfDisposed(),tv(this.gl,o,i,this.textureConfig)}uploadPixelDataToTexture(o,i){this.throwIfDisposed(),av(this.gl,o,i)}uploadDenseMatrixToTexture(o,i,s,_){this.throwIfDisposed(),sv(this.gl,o,i,s,_,this.textureConfig)}createFloat16PackedMatrixTexture(o,i){return this.throwIfDisposed(),ov(this.gl,o,i,this.textureConfig)}createPackedMatrixTexture(o,i){return this.throwIfDisposed(),rv(this.gl,o,i,this.textureConfig)}deleteMatrixTexture(o){this.throwIfDisposed(),this.outputTexture===o&&(Xf(this.gl,this.framebuffer),this.outputTexture=null),ce(this.gl,()=>this.gl.deleteTexture(o))}downloadByteEncodedFloatMatrixFromOutputTexture(o,i,s){return this.downloadMatrixDriver(o,()=>pv(this.gl,i,s,this.textureConfig))}downloadPackedMatrixFromBuffer(o,i,s,_,_e,ct){return cv(this.gl,o,i,s,_,_e,ct,this.textureConfig)}downloadFloat32MatrixFromBuffer(o,i){return uv(this.gl,o,i)}createBufferFromTexture(o,i,s){this.bindTextureToFrameBuffer(o);let _=iv(this.gl,i,s,this.textureConfig);return this.unbindTextureToFrameBuffer(),_}createAndWaitForFence(){let o=this.createFence(this.gl);return this.pollFence(o)}createFence(o){let i,s;if(A().getBool("WEBGL_FENCE_API_ENABLED")){let _=o,_e=_.fenceSync(_.SYNC_GPU_COMMANDS_COMPLETE,0);o.flush(),s=()=>{let ct=_.clientWaitSync(_e,0,0);return ct===_.ALREADY_SIGNALED||ct===_.CONDITION_SATISFIED},i=_e}else A().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(i=this.beginQuery(),this.endQuery(),s=()=>this.isQueryAvailable(i,A().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):s=()=>!0;return{query:i,isFencePassed:s}}downloadMatrixFromPackedTexture(o,i,s){return this.downloadMatrixDriver(o,()=>lv(this.gl,i,s))}createProgram(o){this.throwIfDisposed();let i=this.gl;this.vertexShader==null&&(this.vertexShader=YI(i));let s=DI(i);ce(i,()=>i.attachShader(s,this.vertexShader)),ce(i,()=>i.attachShader(s,o)),AI(i,s);let _=Object.assign(s,{vao:this.createVertexArray()});return this.debug&&Yl(i,_),_}buildVao(o){this.setProgram(o),this.bindVertexArray(o.vao);let i=this.gl;ce(i,()=>i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),nv(i,o,this.vertexBuffer)}deleteProgram(o){this.throwIfDisposed(),o===this.program&&(this.program=null),o!=null&&(ce(this.gl,()=>this.gl.deleteProgram(o)),this.deleteVertexArray(o.vao))}setProgram(o){this.throwIfDisposed(),this.program=o,this.program!=null&&this.debug&&Yl(this.gl,this.program),ce(this.gl,()=>this.gl.useProgram(o))}getUniformLocation(o,i,s=!0){return this.throwIfDisposed(),s?BI(this.gl,o,i):zI(this.gl,o,i)}getAttributeLocation(o,i){return this.throwIfDisposed(),ce(this.gl,()=>this.gl.getAttribLocation(o,i))}getUniformLocationNoThrow(o,i){return this.throwIfDisposed(),this.gl.getUniformLocation(o,i)}setInputMatrixTexture(o,i,s){this.throwIfDisposed(),this.throwIfNoProgram(),VI(this.gl,o,i,s)}setOutputMatrixTexture(o,i,s){this.setOutputMatrixTextureDriver(o,s,i)}setOutputPackedMatrixTexture(o,i,s){this.throwIfDisposed();let[_,_e]=Ma(i,s);this.setOutputMatrixTextureDriver(o,_,_e)}setOutputMatrixWriteRegion(o,i,s,_){this.setOutputMatrixWriteRegionDriver(s,o,_,i)}setOutputPackedMatrixWriteRegion(o,i,s,_){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&Yl(this.gl,this.program),Tc(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();let o=this.gl;if(this.debug){let i=this.getVertexArray();console.assert(i===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}ce(o,()=>o.drawElements(o.TRIANGLES,6,o.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),ce(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=Nc(this.gl,A().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(A().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){let s=this.gl,_=this.getQueryTimerExtensionWebGL2(),_e=s.createQuery();return s.beginQuery(_.TIME_ELAPSED_EXT,_e),_e}let o=this.getQueryTimerExtensionWebGL1(),i=o.createQueryEXT();return o.beginQueryEXT(o.TIME_ELAPSED_EXT,i),i}endQuery(){if(A().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){let i=this.gl,s=this.getQueryTimerExtensionWebGL2();return void i.endQuery(s.TIME_ELAPSED_EXT)}let o=this.getQueryTimerExtensionWebGL1();o.endQueryEXT(o.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(o){return await y.repeatedTry(()=>this.disposed||this.isQueryAvailable(o,A().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(o,A().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(o,i){if(i===0)return null;if(i===2){let s=this.gl;return s.getQueryParameter(o,s.QUERY_RESULT)/1e6}{let s=this.getQueryTimerExtensionWebGL1();return s.getQueryObjectEXT(o,s.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(o,i){if(i===0)return!0;if(i===2){let s=this.gl,_=this.getQueryTimerExtensionWebGL2(),_e=s.getQueryParameter(o,s.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(_.GPU_DISJOINT_EXT)),_e&&!this.disjoint}{let s=this.getQueryTimerExtensionWebGL1(),_=s.getQueryObjectEXT(o,s.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(s.GPU_DISJOINT_EXT)),_&&!this.disjoint}}pollFence(o){return new Promise(i=>{this.addItemToPoll(()=>o.isFencePassed(),()=>i())})}pollItems(){let o=JZ(this.itemsToPoll.map(i=>i.isDoneFn));for(let i=0;i<=o;++i){let{resolveFn:s}=this.itemsToPoll[i];s()}this.itemsToPoll=this.itemsToPoll.slice(o+1)}addItemToPoll(o,i){if(this.itemsToPoll.push({isDoneFn:o,resolveFn:i}),this.itemsToPoll.length>1)return;let s;"setTimeoutCustom"in A().platform&&(s=A().platform.setTimeoutCustom.bind(A().platform)),y.repeatedTry(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,s)}bindTextureToFrameBuffer(o){this.throwIfDisposed(),Ql(this.gl,o,this.framebuffer),this.debug&&Tc(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(Ql(this.gl,this.outputTexture,this.framebuffer),this.debug&&Tc(this.gl)):Xf(this.gl,this.framebuffer)}downloadMatrixDriver(o,i){this.bindTextureToFrameBuffer(o);let s=i();return this.unbindTextureToFrameBuffer(),s}setOutputMatrixTextureDriver(o,i,s){this.throwIfDisposed();let _=this.gl;Ql(_,o,this.framebuffer),this.debug&&Tc(_),this.outputTexture=o,ce(_,()=>_.viewport(0,0,i,s)),ce(_,()=>_.scissor(0,0,i,s))}setOutputMatrixWriteRegionDriver(o,i,s,_){this.throwIfDisposed(),ce(this.gl,()=>this.gl.scissor(o,i,s,_))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}};function JZ(o){let i=0;for(;i<o.length&&o[i]();++i);return i-1}var{addImpl:LR,bincountImpl:ph,bincountReduceImpl:BR,bitwiseAndImpl:zR,castImpl:VR,ceilImpl:WR,concatImpl:UR,equalImpl:GR,expImpl:HR,expm1Impl:KR,floorImpl:qR,gatherNdImpl:jR,gatherV2Impl:XR,greaterImpl:YR,greaterEqualImpl:QR,lessImpl:ZR,lessEqualImpl:JR,linSpaceImpl:eD,logImpl:tD,maxImpl:rD,maximumImpl:oD,minimumImpl:nD,multiplyImpl:sD,negImpl:aD,notEqualImpl:iD,prodImpl:uD,raggedGatherImpl:pD,raggedRangeImpl:cD,raggedTensorToTensorImpl:lD,rangeImpl:mD,rsqrtImpl:dD,scatterImpl:fD,sigmoidImpl:hD,simpleAbsImpl:ch,sliceImpl:gD,sparseFillEmptyRowsImpl:xD,sparseReshapeImpl:yD,sparseSegmentReductionImpl:lh,sqrtImpl:bD,staticRegexReplaceImpl:CD,stridedSliceImpl:wD,stringNGramsImpl:SD,stringSplitImpl:ID,stringToHashBucketFastImpl:vD,subImpl:kD,tileImpl:ND,topKImpl:TD,transposeImpl:Cp,uniqueImpl:_D}=Ic;function dv(o,i){return["x","y","z","w","u","v"].slice(0,i).map(s=>`${o}.${s}`)}function Rt$1(o,i){return i===1?[o]:dv(o,i)}function ED(o,i){if(o===1)return"rc";let s="";for(let _=0;_<o;_++)s+=i[_],_<o-1&&(s+=",");return s}var mh=class{constructor(o){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=o,this.rank=o.length,this.enableShapeUniforms=ut(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{let i=Rt$1("rc",this.rank),s=Re$1(this.rank),_=this.getOutOfBoundsCondition(i),_e=this.getSetup(i),ct=this.getOutput(i);this.userCode=`
        void main() {
          ${s} rc = getOutputCoords();

          if(${_}) {
            setOutput(vec4(0));
          } else {
            ${_e}

            setOutput(vec4(${ct}));
          }
        }
      `}}getSourceCoordsArr(o){let i=[];for(let s=0;s<=1;s++)for(let _=0;_<=1;_++){let _e=`${s===0?"r":"rp1"}, ${_===0?"c":"cp1"}`;for(let ct=2;ct<this.rank;ct++)_e=`${o[o.length-1-ct]},`+_e;i.push(_e)}return i}getOutOfBoundsCondition(o){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let i="";for(let s=this.rank-2;s<this.rank;s++)i+=`${o[s]} >= ${this.enableShapeUniforms?`outShape[${s}]`:this.outputShape[s]}`,s<this.rank-1&&(i+="||");return i}getSetup(o){if(this.rank===1)return"";let i=o.slice(-2),s=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],_=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${i[0]};
      int c = ${i[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${s};
      bool rEdge = rp1 >= ${_};
    `}getOutput(o){let i=this.getSourceCoordsArr(o);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${i[0]}),
            cEdge ? 0. : getA(${i[1]}),
            rEdge ? 0. : getA(${i[2]}),
            rEdge || cEdge ? 0. : getA(${i[3]})`}},Mc=class{constructor(o,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=o,this.enableShapeUniforms=ut(this.outputShape.length);let s="";for(let _=0;_<4;_++){let _e="thisRC = rc;";_%2==1&&(_e+="thisRC.z += 1;"),_>1&&(_e+="thisRC.y += 1;"),s+=`
        ${_e}
        ${_>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${_}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${_>0?"}":""}
      `}this.userCode=`
      ${e9(i,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?Rc():$c(o)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":o[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":o[2]};

        ${s}

        setOutput(result);
      }
    `}};function e9(o,i){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${i?ER(["r","c","d"],"inputShape"):Ws(["r","c","d"],o)}
      return ivec3(r, c, d);
    }
  `}var dh=class{constructor(o){this.gpgpu=o,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(o,i,s){let _=RD(i,s),_e=DD(o,_,s);_e in this.freeTextures||(this.freeTextures[_e]=[]),_e in this.usedTextures||(this.usedTextures[_e]=[]);let ct,Mt=$D(o,_,this.gpgpu.gl,this.gpgpu.textureConfig,s);if(this.freeTextures[_e].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=Mt,this.log();let Ft=this.freeTextures[_e].pop();return this.usedTextures[_e].push(Ft),Ft}return _===er.PACKED_2X2_FLOAT32?ct=this.gpgpu.createPackedMatrixTexture(o[0],o[1]):_===er.PACKED_2X2_FLOAT16?ct=this.gpgpu.createFloat16PackedMatrixTexture(o[0],o[1]):_===er.UNPACKED_FLOAT32?ct=this.gpgpu.createFloat32MatrixTexture(o[0],o[1]):_===er.UNPACKED_FLOAT16?ct=this.gpgpu.createFloat16MatrixTexture(o[0],o[1]):_===er.PACKED_4X1_UNSIGNED_BYTE&&(ct=this.gpgpu.createUnsignedBytesMatrixTexture(o[0],o[1])),this.usedTextures[_e].push(ct),this.numUsedTextures++,this._numBytesAllocated+=Mt,this.log(),ct}releaseTexture(o,i,s,_){if(this.freeTextures==null)return;let _e=RD(s,_),ct=DD(i,_e,_);ct in this.freeTextures||(this.freeTextures[ct]=[]);let Mt=$D(i,_e,this.gpgpu.gl,this.gpgpu.textureConfig,_),Ft=A().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");Ft!==-1&&this._numBytesAllocated>Ft?(this.gpgpu.deleteMatrixTexture(o.texture),this._numBytesAllocated-=Mt):(this.freeTextures[ct].push(o),this.numFreeTextures++,this._numBytesFree+=Mt),this.numUsedTextures--;let Ut=this.usedTextures[ct],Xt=Ut&&Ut.indexOf(o);if(Xt==null||Xt<0)throw new Error("Cannot release a texture that was never provided by this texture manager");Ut[Xt]=Ut[Ut.length-1],Ut.pop(),this.log()}log(){if(!this.logEnabled)return;let o=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${o})`);let i=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*i)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(let o in this.freeTextures)this.freeTextures[o].forEach(i=>{this.gpgpu.deleteMatrixTexture(i.texture)});for(let o in this.usedTextures)this.usedTextures[o].forEach(i=>{this.gpgpu.deleteMatrixTexture(i.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}};function t9(o,i){let s=o;if(i===s.R32F)return 4;if(i===s.R16F)return 2;if(i===s.RGBA32F||i===o.RGBA)return 16;if(i===s.RGBA16F)return 8;if(i===s.RGBA8)return 4;throw new Error(`Unknown internal format ${i}`)}function $D(o,i,s,_,_e){let ct,Mt=r92(i,_);if(_e){let[Ft,Ut]=Ma(o[0],o[1]);ct=Ft*Ut}else{let[Ft,Ut]=gp(o[0],o[1]);ct=Ft*Ut}return ct*t9(s,Mt)}function r92(o,i){switch(o){case er.PACKED_2X2_FLOAT32:return ih(i);case er.PACKED_2X2_FLOAT16:return uh(i);case er.UNPACKED_FLOAT32:return nh(i);case er.UNPACKED_FLOAT16:return sh(i);case er.PACKED_4X1_UNSIGNED_BYTE:return ah(i);default:throw new Error(`Unknown physical texture type ${o}`)}}function o9(o){return A().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?o?er.PACKED_2X2_FLOAT32:er.UNPACKED_FLOAT32:o?er.PACKED_2X2_FLOAT16:er.UNPACKED_FLOAT16}function RD(o,i){if(o===mr.UPLOAD)return er.PACKED_2X2_FLOAT32;if(o===mr.RENDER||o==null)return o9(i);if(o===mr.DOWNLOAD||o===mr.PIXELS)return er.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${o}`)}function DD(o,i,s){return`${o[0]}_${o[1]}_${i}_${s}`}var tr=class{constructor(o,i){this.variableNames=["A"],this.outputShape=o,this.enableShapeUniforms=ut(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${i}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}},Wt="if (isnan(x)) return x;",AD="return x;",fv="return abs(x);",FD="return (x >= 0.0) ? x : (exp(x) - 1.0);",PD=Wt+`
  return (x < 0.0) ? 0.0 : x;
`,OD=Wt+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,La="return x;",MD="return 1.0 / (1.0 + exp(-1.0 * x));",BD="return x;",zD=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,VD=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,WD=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,UD="return 1.0 / (1.0 + exp(-1.0 * x));",Fr=class{constructor(o,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=o,this.enableShapeUniforms=ut(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${i}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}},fh=class{constructor(o){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=o,this.enableShapeUniforms=ut(this.outputShape.length);let i=o.length,s=Rt$1("rc",i),_=Re$1(i),_e=ED(i,s),ct=s.slice(-2),Mt=i<=1?"rc":`vec2(${ct.join(",")})`;this.userCode=`
      void main() {
        ${_} rc = getOutputCoords();
        vec4 packedInput = getA(${_e});

        setOutput(getChannel(packedInput, ${Mt}));
      }
    `}},s9=Vt.whereImpl,a9=1e-7,i9=1e-4,hh={};function u9(o){return o in hh||(hh[o]={}),hh[o]}var p9=A().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),c9=600;function l9(){return A().global.screen==null?1024:A().global.screen.height*A().global.screen.width*window.devicePixelRatio*c9/1024/1024}var Lc=class Jge extends ao{nextDataId(){return Jge.nextDataId++}constructor(i){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!A().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let s;if(i!=null){if(i instanceof bp)s=i;else{let _=Kr(A().getNumber("WEBGL_VERSION"),i);s=new bp(_)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{let _=Kr(A().getNumber("WEBGL_VERSION"));s=new bp(_),this.binaryCache=u9(A().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=s,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new dh(this.gpgpu),this.numMBBeforeWarning=l9(),this.texData=new Bo(this,ur())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(i,s,_,_e,ct,Mt){let Ft=this.makeTensorInfo(s,_),Ut=this.texData.get(Ft.dataId);Ut.isPacked=!1,Ut.texture={texture:i,texShape:[_e,ct]},Ut.texShape=[_e,ct];let Xt=_c(s),Kt=new Zl(Xt,!1,Mt),nr=this.runWebGLProgram(Kt,[Ft],_,[[_e,ct]]);return nr.shape=s,Ut.texture=null,this.disposeIntermediateTensorInfo(Ft),nr.dataId}write(i,s,_){if((A().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||A().getBool("DEBUG"))&&this.checkNumericalProblems(i),_==="complex64"&&i!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");let _e={id:this.nextDataId()};return this.texData.set(_e,{shape:s,dtype:_,values:i,usage:mr.UPLOAD,refCount:1}),_e}refCount(i){return this.texData.has(i)?this.texData.get(i).refCount:0}incRef(i){this.texData.get(i).refCount++}decRef(i){this.texData.has(i)&&this.texData.get(i).refCount--}move(i,s,_,_e,ct){if(A().getBool("DEBUG")&&this.checkNumericalProblems(s),_e==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(i,{shape:_,dtype:_e,values:s,usage:mr.UPLOAD,refCount:ct})}disposeIntermediateTensorInfo(i){this.disposeData(i.dataId)}readSync(i){let s=this.texData.get(i),{values:_,dtype:_e,complexTensorInfos:ct,slice:Mt,shape:Ft,isPacked:Ut}=s;if(Mt!=null){let rr;rr=Ut?new Fr(Ft,La):new tr(Ft,La);let or=this.runWebGLProgram(rr,[{dataId:i,shape:Ft,dtype:_e}],_e),hr=this.readSync(or.dataId);return this.disposeIntermediateTensorInfo(or),hr}if(_!=null)return this.convertAndCacheOnCPU(i);if(_e==="string")return _;let Xt,Kt,nr=this.activeTimers!=null;if(nr&&(Xt=y.now()),_e==="complex64"){let rr=this.readSync(ct.real.dataId),or=this.readSync(ct.imag.dataId);Kt=w.mergeRealAndImagArrays(rr,or)}else Kt=this.getValuesFromTexture(i);return nr&&(this.downloadWaitMs+=y.now()-Xt),this.convertAndCacheOnCPU(i,Kt)}async read(i){if(this.pendingRead.has(i)){let hr=this.pendingRead.get(i);return new Promise(fr=>hr.push(fr))}let s=this.texData.get(i),{values:_,shape:_e,slice:ct,dtype:Mt,complexTensorInfos:Ft,isPacked:Ut}=s;if(ct!=null){let hr;hr=Ut?new Fr(_e,La):new tr(_e,La);let fr=this.runWebGLProgram(hr,[{dataId:i,shape:_e,dtype:Mt}],Mt),yr=this.read(fr.dataId);return this.disposeIntermediateTensorInfo(fr),yr}if(_!=null)return this.convertAndCacheOnCPU(i);if(A().getBool("DEBUG")&&!A().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&A().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let Xt,Kt,nr=null;if(Mt!=="complex64"&&A().get("WEBGL_BUFFER_SUPPORTED")){Xt=this.decode(i);let hr=this.texData.get(Xt.dataId);nr=this.gpgpu.createBufferFromTexture(hr.texture.texture,...jl(_e))}if(this.pendingRead.set(i,[]),Mt!=="complex64"&&await this.gpgpu.createAndWaitForFence(),Mt==="complex64"){let hr=await Promise.all([this.read(Ft.real.dataId),this.read(Ft.imag.dataId)]),fr=hr[0],yr=hr[1];Kt=w.mergeRealAndImagArrays(fr,yr)}else if(nr==null)Kt=this.getValuesFromTexture(i);else{let hr=y.sizeFromShape(_e);Kt=this.gpgpu.downloadFloat32MatrixFromBuffer(nr,hr)}if(Xt!=null&&this.disposeIntermediateTensorInfo(Xt),nr!=null){let hr=this.gpgpu.gl;ce(hr,()=>hr.deleteBuffer(nr))}let rr=this.convertAndCacheOnCPU(i,Kt),or=this.pendingRead.get(i);return this.pendingRead.delete(i),or.forEach(hr=>hr(rr)),this.pendingDisposal.has(i)&&(this.pendingDisposal.delete(i),this.disposeData(i)&&ur().removeDataId(i,this),this.pendingDeletes--),rr}readToGPU(i,s={}){let _=this.texData.get(i),{values:_e,shape:ct,slice:Mt,dtype:Ft,isPacked:Ut,texture:Xt}=_;if(Ft==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(Mt!=null){let or;or=Ut?new Fr(ct,La):new tr(ct,La);let hr=this.runWebGLProgram(or,[{dataId:i,shape:ct,dtype:Ft}],Ft),fr=this.readToGPU(hr,s);return this.disposeIntermediateTensorInfo(hr),fr}if(Xt==null)throw _e!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");let Kt=this.decode(i,s.customTexShape),nr=ur().makeTensorFromTensorInfo(Kt),rr=this.texData.get(Kt.dataId);return Object.assign({tensorRef:nr},rr.texture)}bufferSync(i){let s=this.readSync(i.dataId);if(i.dtype==="string")try{let _=s.map(_e=>y.decodeString(_e));return me$1(i.shape,i.dtype,_)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return me$1(i.shape,i.dtype,s)}checkNumericalProblems(i){if(i!=null)for(let s=0;s<i.length;s++){let _=i[s];if(!EI(_))throw A().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${_} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${_} cannot be represented on this device.`)}}getValuesFromTexture(i){let{shape:s,dtype:_,isPacked:_e}=this.texData.get(i),ct=y.sizeFromShape(s);if(A().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){let rr=this.decode(i),or=this.texData.get(rr.dataId),hr=this.gpgpu.downloadMatrixFromPackedTexture(or.texture.texture,...jl(s)).subarray(0,ct);return this.disposeIntermediateTensorInfo(rr),hr}let Mt=A().getBool("WEBGL_PACK")&&_e===!0,Ft=Mt?_c(s):s,Ut=Mt?new rh(Ft):new th(Ft),Xt=this.runWebGLProgram(Ut,[{shape:Ft,dtype:_,dataId:i}],"float32"),Kt=this.texData.get(Xt.dataId),nr=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(Kt.texture.texture,Kt.texShape[0],Kt.texShape[1]).subarray(0,ct);return this.disposeIntermediateTensorInfo(Xt),nr}timerAvailable(){return A().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(i){let s=this.activeTimers,_=[],_e=!1;this.programTimersStack==null?(this.programTimersStack=_,_e=!0):this.activeTimers.push(_),this.activeTimers=_,i();let ct=y.flatten(this.activeTimers.map(Ut=>Ut.query)).filter(Ut=>Ut!=null),Mt=y.flatten(this.activeTimers.map(Ut=>Ut.name)).filter(Ut=>Ut!=null);this.activeTimers=s,_e&&(this.programTimersStack=null);let Ft={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(A().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){let Ut=await Promise.all(ct);Ft.kernelMs=y.sum(Ut),Ft.getExtraProfileInfo=()=>Ut.map((Xt,Kt)=>({name:Mt[Kt],ms:Xt})).map(Xt=>`${Xt.name}: ${Xt.ms}`).join(", ")}else Ft.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,Ft})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return A().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:y.now(),endMs:null}}endTimer(i){return A().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),i):(i.endMs=y.now(),i)}async getQueryTime(i){if(A().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(i);let s=i;return s.endMs-s.startMs}disposeData(i,s=!1){if(this.pendingDisposal.has(i))return!1;if(!this.texData.has(i))return!0;if(s?this.texData.get(i).refCount=0:this.texData.get(i).refCount--,!s&&this.texData.get(i).refCount>0)return!1;if(this.pendingRead.has(i))return this.pendingDisposal.add(i),this.pendingDeletes++,!1;this.releaseGPUData(i);let{complexTensorInfos:_}=this.texData.get(i);return _!=null&&(this.disposeData(_.real.dataId,s),this.disposeData(_.imag.dataId,s)),this.texData.delete(i),!0}releaseGPUData(i){let{texture:s,dtype:_,texShape:_e,usage:ct,isPacked:Mt,slice:Ft}=this.texData.get(i),Ut=Ft&&Ft.origDataId||i,Xt=this.dataRefCount.get(Ut);Xt>1?this.dataRefCount.set(Ut,Xt-1):(this.dataRefCount.delete(Ut),s!=null&&(this.numBytesInGPU-=this.computeBytes(_e,_),this.textureManager.releaseTexture(s,_e,ct,Mt)));let Kt=this.texData.get(i);Kt.texture=null,Kt.texShape=null,Kt.isPacked=!1,Kt.slice=null}getTexture(i){return this.uploadToGPU(i),this.texData.get(i).texture.texture}getDataInfo(i){return this.texData.get(i)}shouldExecuteOnCPU(i,s=p9){return A().getBool("WEBGL_CPU_FORWARD")&&i.every(_=>this.texData.get(_.dataId).texture==null&&y.sizeFromShape(_.shape)<s)}getGPGPUContext(){return this.gpgpu}where(i){w.warn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");let s=i.dataSync();return s9(i.shape,s)}packedUnaryOp(i,s,_){let _e=new Fr(i.shape,s),ct=this.compileAndRun(_e,[i],_);return ur().makeTensorFromTensorInfo(ct)}abs(i){if(this.shouldExecuteOnCPU([i])&&i.dtype!=="complex64"){let _e=ch(this.texData.get(i.dataId).values);return this.makeOutput(i.shape,i.dtype,_e)}if(A().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(i,fv,i.dtype);let s=new tr(i.shape,fv),_=this.compileAndRun(s,[i]);return ur().makeTensorFromTensorInfo(_)}makeTensorInfo(i,s,_){let _e;if(s==="string"&&_!=null&&_.length>0&&y.isString(_[0])){let ct=_.map(Mt=>y.encodeString(Mt));_e=this.write(ct,i,s)}else _e=this.write(_,i,s);return this.texData.get(_e).usage=null,{dataId:_e,shape:i,dtype:s}}makeOutput(i,s,_){return ur().makeTensorFromTensorInfo(this.makeTensorInfo(i,s,_),this)}unpackTensor(i){let s=new fh(i.shape);return this.runWebGLProgram(s,[i],i.dtype)}packTensor(i){let s=new mh(i.shape);return this.runWebGLProgram(s,[i],i.dtype,null,!0)}packedReshape(i,s){let _=[gi(i.shape),...xi(i.shape)],_e={dtype:i.dtype,shape:_,dataId:i.dataId},ct=[gi(s),...xi(s)],Mt=new Mc(ct,_),Ft=[_],Ut=this.runWebGLProgram(Mt,[_e],i.dtype,Ft,!0);return{dataId:Ut.dataId,shape:s,dtype:Ut.dtype}}decode(i,s){let _=this.texData.get(i),{isPacked:_e,shape:ct,dtype:Mt}=_;if(s!=null){let Kt=y.sizeFromShape(ct),nr=s[0]*s[1]*4;y.assert(Kt<=nr,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}let Ft,Ut=_c(ct);Ft=_e?new eh(Ut):new Jf(Ut);let Xt=[s??jl(Ut)];return{dtype:Mt,shape:ct,dataId:this.runWebGLProgram(Ft,[{shape:Ut,dtype:Mt,dataId:i}],Mt,Xt,!0,s).dataId}}runWebGLProgram(i,s,_,_e,ct=!1,Mt){let Ft=this.makeTensorInfo(i.outputShape,_),Ut=this.texData.get(Ft.dataId);if(i.packedOutput&&(Ut.isPacked=!0),i.outPackingScheme===gu.DENSE){let Lr=Mt??jl(i.outputShape);Ut.texShape=Lr.map(Br=>2*Br)}if(i.outTexUsage!=null&&(Ut.usage=i.outTexUsage),y.sizeFromShape(Ft.shape)===0)return Ut.values=y.getTypedArrayFromDType(Ft.dtype,0),Ft;let Xt=[],Kt=s.map(Lr=>{if(Lr.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let Br=this.texData.get(Lr.dataId);if(Br.texture==null){if(!i.packedInputs&&y.sizeFromShape(Lr.shape)<=A().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:Lr.shape,texData:null,isUniform:!0,uniformValues:Br.values};i.packedInputs&&(Br.isPacked=!0,Br.shape=Lr.shape)}if(this.uploadToGPU(Lr.dataId),!!Br.isPacked!=!!i.packedInputs)Lr=Br.isPacked?this.unpackTensor(Lr):this.packTensor(Lr),Xt.push(Lr),Br=this.texData.get(Lr.dataId);else if(Br.isPacked&&!xu(Br.shape,Lr.shape)){let Vr=Lr,Wr=Lr.shape;Lr.shape=Br.shape,Lr=this.packedReshape(Lr,Wr),Xt.push(Lr),Br=this.texData.get(Lr.dataId),Vr.shape=Wr}return{shape:Lr.shape,texData:Br,isUniform:!1}});this.uploadToGPU(Ft.dataId);let nr,rr={shape:Ft.shape,texData:Ut,isUniform:!1},or=MR(i,Kt,rr),hr=this.getAndSaveBinary(or,()=>PR(this.gpgpu,i,Kt,rr)),fr=this.activeTimers!=null;fr&&(nr=this.startTimer()),A().get("ENGINE_COMPILE_ONLY")||OR(this.gpgpu,hr,Kt,rr,_e),Xt.forEach(Lr=>this.disposeIntermediateTensorInfo(Lr)),fr&&(nr=this.endTimer(nr),this.activeTimers.push({name:i.constructor.name,query:this.getQueryTime(nr)}));let yr=A().getNumber("WEBGL_FLUSH_THRESHOLD");if(yr>0){let Lr=y.now();Lr-this.lastGlFlushTime>yr&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=Lr)}if(!A().getBool("WEBGL_LAZILY_UNPACK")&&Ut.isPacked&&ct===!1){let Lr=this.unpackTensor(Ft);return this.disposeIntermediateTensorInfo(Ft),Lr}return Ft}compileAndRun(i,s,_,_e,ct=!1){return _=_||s[0].dtype,this.runWebGLProgram(i,s,_,_e,ct)}getAndSaveBinary(i,s){return i in this.binaryCache||(this.binaryCache[i]=s()),this.binaryCache[i]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(A().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(i=>{this.gpgpu.deleteProgram(this.binaryCache[i].webGLProgram),delete this.binaryCache[i]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=De$1(()=>{if(!A().get("WEBGL_RENDER_FLOAT32_ENABLED")){let i=A().getBool("DEBUG");A().set("DEBUG",!1);let s=this.abs(ke(1e-8)).dataSync()[0];if(A().set("DEBUG",i),s>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?a9:i9}uploadToGPU(i){let s=this.texData.get(i),{shape:_,dtype:_e,values:ct,texture:Mt,usage:Ft,isPacked:Ut}=s;if(Mt!=null)return;let Xt,Kt=this.activeTimers!=null;Kt&&(Xt=y.now());let nr=s.texShape;if(nr==null&&(nr=WI(_,Ut),s.texShape=nr),ct!=null){let rr,or=_c(_),hr=nr[1],fr=nr[0],yr=ct instanceof Uint8Array||ct instanceof Uint8ClampedArray;(Ut||!yr)&&([hr,fr]=Ma(nr[0],nr[1])),rr=Ut?new oh(or,yr):new Zl(or,yr);let Lr=yr?[fr,hr]:nr,Br=this.makeTensorInfo(Lr,_e),Vr=this.texData.get(Br.dataId);Vr.usage=yr?mr.PIXELS:mr.UPLOAD,Vr.texShape=Lr,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(Br.dataId),hr,fr,ct);let Wr=[[fr,hr]],ro=this.runWebGLProgram(rr,[Br],_e,Wr,!0),no=this.texData.get(ro.dataId);s.texShape=no.texShape,s.isPacked=no.isPacked,s.usage=no.usage,A().get("ENGINE_COMPILE_ONLY")?this.disposeData(ro.dataId):(s.texture=no.texture,s.values=null,this.texData.delete(ro.dataId)),this.disposeIntermediateTensorInfo(Br),Kt&&(this.uploadWaitMs+=y.now()-Xt)}else{let rr=this.acquireTexture(nr,Ft,_e,Ut);s.texture=rr}}convertAndCacheOnCPU(i,s){let _=this.texData.get(i),{dtype:_e}=_;return s!=null&&(_.values=m9(s,_e)),_.values}acquireTexture(i,s,_,_e){if(this.numBytesInGPU+=this.computeBytes(i,_),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){let ct=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${ct} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(i,s,_e)}computeBytes(i,s){return i[0]*i[1]*y.bytesPerElement(s)}checkCompileCompletion(){for(let[,i]of Object.entries(this.binaryCache))this.checkCompletion_(i)}async checkCompileCompletionAsync(){let i=[];if(this.gpgpu.parallelCompilationExtension){for(let[,s]of Object.entries(this.binaryCache))i.push(this.checkCompletionAsync_(s));return Promise.all(i)}for(let[,s]of Object.entries(this.binaryCache)){let _=new Promise(_e=>{try{this.checkCompletion_(s),_e(!0)}catch(ct){throw ct}});i.push(_)}return Promise.all(i)}async checkCompletionAsync_(i){return this.gpgpu.gl.getProgramParameter(i.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(i):(await cS(),this.checkCompletionAsync_(i))}checkCompletion_(i){if(this.gpgpu.gl.getProgramParameter(i.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(i.webGLProgram)),this.gpgpu.gl.getShaderParameter(i.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(qf(i.source,this.gpgpu.gl.getShaderInfoLog(i.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(let i of Object.values(this.binaryCache)){this.gpgpu.buildVao(i.webGLProgram);let{variablesLocations:s,customUniformLocations:_,infLoc:_e,nanLoc:ct,outShapeLocation:Mt,outShapeStridesLocation:Ft,outTexShapeLocation:Ut}=XI(this.gpgpu,i.program,i.webGLProgram);i.variablesLocations=s,i.customUniformLocations=_,i.infLoc=_e,i.nanLoc=ct,i.outShapeLocation=Mt,i.outShapeStridesLocation=Ft,i.outTexShapeLocation=Ut}}createTensorFromGPUData(i,s,_){i.channels=i.channels||"RGBA";let{texture:_e,height:ct,width:Mt,channels:Ft}=i,Ut=ur().backend;if(!Ut.gpgpu.gl.isTexture(_e))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");let Xt=Ut.writeTexture(_e,s,_,ct,Mt,Ft);return ur().makeTensorFromDataId(Xt,s,_,Ut)}};function m9(o,i){if(i==="float32"||i==="complex64")return o;if(i==="int32"||i==="bool"){let s=i==="int32"?new Int32Array(o.length):new Uint8Array(o.length);for(let _=0;_<s.length;++_)s[_]=Math.round(o[_]);return s}throw new Error(`Unknown dtype ${i}`)}Lc.nextDataId=0;var d9="4.17.0";function GD(){A().set("WEBGL_FORCE_F16_TEXTURES",!0)}eu.isBrowser()&&tu("webgl",()=>new Lc,2);var $at={forceHalfFloat:GD},Bc=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`,Pr=class{constructor(o,i,s){this.variableNames=["A","B"],this.outputShape=w.assertAndGetBroadcastShape(i,s),this.enableShapeUniforms=ut(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${o}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}},Xr=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`,jr=class{constructor(o,i,s,_=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=w.assertAndGetBroadcastShape(i,s);let _e=this.outputShape.length;this.enableShapeUniforms=ut(_e);let ct="";if(_)if(_e===0||y.sizeFromShape(this.outputShape)===1)ct=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(ct=`
          ${Re$1(_e)} coords = getOutputCoords();
        `,_e===1)this.enableShapeUniforms?ct+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:ct+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{let Mt=Rt$1("coords",_e);this.enableShapeUniforms?ct+=`
            bool nextRowOutOfBounds =
              (${Mt[_e-2]} + 1) >= outShape[${_e} - 2];
            bool nextColOutOfBounds =
              (${Mt[_e-1]} + 1) >= outShape[${_e} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:ct+=`
            bool nextRowOutOfBounds =
              (${Mt[_e-2]} + 1) >= ${this.outputShape[_e-2]};
            bool nextColOutOfBounds =
              (${Mt[_e-1]} + 1) >= ${this.outputShape[_e-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${o}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${ct}

        setOutput(result);
      }
    `}};function Dt$1(o){let{inputs:i,backend:s}=o,{x:_}=i;return s.incRef(_.dataId),{dataId:_.dataId,shape:_.shape,dtype:_.dtype}}var HD={kernelName:Co,backendName:"webgl",kernelFunc:Dt$1};function Or(o){let{inputs:i,backend:s}=o,{real:_,imag:_e}=i,ct=s.makeTensorInfo(_.shape,"complex64"),Mt=s.texData.get(ct.dataId),Ft=Dt$1({inputs:{x:_},backend:s}),Ut=Dt$1({inputs:{x:_e},backend:s});return Mt.complexTensorInfos={real:Ft,imag:Ut},ct}var KD={kernelName:Di,backendName:"webgl",kernelFunc:Or},hv="return (a < 0.) ? b * a : a;",gv=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function f9(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{alpha:ct}=_,Mt=s.makeTensorInfo([],"float32",y.createScalarValue(ct,"float32")),Ft=A().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new jr(gv,_e.shape,Mt.shape):new Pr(hv,_e.shape,Mt.shape),Ut=s.runWebGLProgram(Ft,[_e,Mt],"float32");return s.disposeIntermediateTensorInfo(Mt),Ut}var qD={kernelName:$n,backendName:"webgl",kernelFunc:f9},xv="return (a < 0.) ? b * a : a;",yv=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function h9(o){let{inputs:i,backend:s}=o,{x:_,alpha:_e}=i,ct=A().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new jr(yv,_.shape,_e.shape):new Pr(xv,_.shape,_e.shape);return s.runWebGLProgram(ct,[_,_e],"float32")}var jD={kernelName:rs,backendName:"webgl",kernelFunc:h9},Fo="if (isnan(x)) return x;";function xe$1({opSnippet:o,packedOpSnippet:i,cpuKernelImpl:s,dtype:_}){return({inputs:_e,backend:ct})=>{let Mt,{x:Ft}=_e,Ut=ct,Xt=_||Ft.dtype;if(Ut.shouldExecuteOnCPU([Ft])&&s!=null){let Kt=Ut.texData.get(Ft.dataId),nr=s(Kt.values,Xt);return Ut.makeTensorInfo(Ft.shape,Xt,nr)}return Mt=A().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&i!=null?new Fr(Ft.shape,i):new tr(Ft.shape,o),Ut.runWebGLProgram(Mt,[Ft],Xt)}}function nt$1({opSnippet:o,packedOpSnippet:i,checkOutOfBounds:s=!1,supportsComplex:_=!1,cpuKernelImpl:_e,dtype:ct}){return({inputs:Mt,backend:Ft})=>{let{a:Ut,b:Xt}=Mt,Kt=Ft;if(_&&Ut.dtype==="complex64"){let or=Kt.texData.get(Ut.dataId),hr=Kt.texData.get(Xt.dataId),[fr,yr]=[[or.complexTensorInfos.real,hr.complexTensorInfos.real],[or.complexTensorInfos.imag,hr.complexTensorInfos.imag]].map(Br=>{let[Vr,Wr]=Br,ro={dataId:Vr.dataId,dtype:Vr.dtype,shape:Ut.shape},no={dataId:Wr.dataId,dtype:Wr.dtype,shape:Xt.shape},so=new Pr(o,Ut.shape,Xt.shape);return Kt.runWebGLProgram(so,[ro,no],dt(Vr.dtype,Wr.dtype))}),Lr=Or({inputs:{real:fr,imag:yr},backend:Kt});return Kt.disposeIntermediateTensorInfo(fr),Kt.disposeIntermediateTensorInfo(yr),Lr}let nr,rr=ct||dt(Ut.dtype,Xt.dtype);if((Ut.dtype==="string"||Xt.dtype==="string"||Kt.shouldExecuteOnCPU([Ut,Xt]))&&_e!=null){let or=Kt.texData.get(Ut.dataId).values,hr=Kt.texData.get(Xt.dataId).values,fr=Ut.dtype==="string"?w.fromUint8ToStringArray(or):or,yr=Ut.dtype==="string"?w.fromUint8ToStringArray(hr):hr,[Lr,Br]=_e(Ut.shape,Xt.shape,fr,yr,rr),Vr=Kt.makeTensorInfo(Br,rr);return Kt.texData.get(Vr.dataId).values=Lr,Vr}return nr=A().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&i!=null?new jr(i,Ut.shape,Xt.shape,s):new Pr(o,Ut.shape,Xt.shape),Kt.runWebGLProgram(nr,[Ut,Xt],rr)}}function yi(o,i=!1){if(o==="linear")return i?BD:AD;if(o==="relu")return i?VD:PD;if(o==="elu")return i?zD:FD;if(o==="relu6")return i?WD:OD;if(o==="prelu")return i?yv:xv;if(o==="leakyrelu")return i?gv:hv;if(o==="sigmoid")return i?UD:MD;throw new Error(`Activation ${o} has not been implemented for the WebGL backend.`)}var zc=class{constructor(o,i,s,_=!1,_e=!1,ct=!1,Mt=null,Ft=!1,Ut=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=s,this.enableShapeUniforms=ut(this.outputShape.length);let Xt=_?o[1]:o[2],Kt=Math.ceil(Xt/2),nr=_?"i * 2, rc.y":"rc.y, i * 2",rr=_e?"rc.z, i * 2":"i * 2, rc.z",or=_?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],hr=_e?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],fr="",yr="";Mt&&(fr=Ft?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${Mt}
        }`:Ut?`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${Mt}
        }`:`vec4 activation(vec4 x) {
          ${Mt}
        }`,yr="result = activation(result);");let Lr=ct?"result += getBiasAtOutCoords();":"";ct&&this.variableNames.push("bias"),Ft&&this.variableNames.push("preluActivationWeights"),Ut&&this.variableNames.push("leakyreluAlpha");let Br="rc.x",Vr="rc.x";o[0]<i[0]?Br=`imod(rc.x, ${o[0]})`:i[0]<o[0]&&(Vr=`imod(rc.x, ${i[0]})`),this.userCode=`
      ${fr}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${Kt}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${Br};
        int batchB = ${Vr};
        for (int i = 0; i < ${Kt}; i++) {
          vec4 a = getMatrixA(batchA, ${nr});
          vec4 b = getMatrixB(batchB, ${rr});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${or[0]} * ${hr[0]});
          result += (${or[1]} * ${hr[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${Lr}

        ${yr}

        setOutput(result);
      }
    `}},bv={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"},em=class{constructor(o,i,s){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=w.assertAndGetBroadcastShape(i,s),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${o}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}},XD="return a * b;";function tm(o){let i,{inputs:s,backend:_}=o,{a:_e,b:ct}=s,Mt=w.upcastType(_e.dtype,ct.dtype);if(_e.dtype==="complex64"){let Ft=_.texData.get(_e.dataId),Ut=_.texData.get(ct.dataId),Xt=new em(bv.REAL,_e.shape,ct.shape),Kt=new em(bv.IMAG,_e.shape,ct.shape),nr=[{dataId:Ft.complexTensorInfos.real.dataId,dtype:Ft.complexTensorInfos.real.dtype,shape:_e.shape},{dataId:Ft.complexTensorInfos.imag.dataId,dtype:Ft.complexTensorInfos.imag.dtype,shape:_e.shape},{dataId:Ut.complexTensorInfos.real.dataId,dtype:Ut.complexTensorInfos.real.dtype,shape:ct.shape},{dataId:Ut.complexTensorInfos.imag.dataId,dtype:Ut.complexTensorInfos.imag.dtype,shape:ct.shape}],rr=_.runWebGLProgram(Xt,nr,"float32"),or=_.runWebGLProgram(Kt,nr,"float32"),hr=Or({inputs:{real:rr,imag:or},backend:_});return _.disposeIntermediateTensorInfo(rr),_.disposeIntermediateTensorInfo(or),hr}if(_.shouldExecuteOnCPU([_e,ct])){let Ft=_.texData.get(_e.dataId),Ut=_.texData.get(ct.dataId),[Xt,Kt]=sD(_e.shape,ct.shape,Ft.values,Ut.values,Mt),nr=_.makeTensorInfo(Kt,Mt);return _.texData.get(nr.dataId).values=Xt,nr}return i=A().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new jr(XD,_e.shape,ct.shape):new Pr(XD,_e.shape,ct.shape),_.runWebGLProgram(i,[_e,ct],Mt)}var YD={kernelName:Xn,backendName:"webgl",kernelFunc:tm};function QD(o,i,s){let _=[gi(o.shape),...xi(o.shape)],_e={dtype:o.dtype,shape:_,dataId:o.dataId},ct=[gi(i),...xi(i)],Mt=new Mc(ct,_),Ft=[_],Ut=s.runWebGLProgram(Mt,[_e],o.dtype,Ft,!0);return{dataId:Ut.dataId,shape:i,dtype:Ut.dtype}}function te(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{shape:ct}=_,Mt=s,Ft=y.sizeFromShape(_e.shape),Ut=y.inferFromImplicitShape(ct,Ft),Xt=y.sizeFromShape(Ut);y.assert(Ft===Xt,()=>`The new shape (${Ut}) has ${Xt} elements and the old shape (${_e.shape}) has ${Ft} elements. The new shape and old shape must have the same number of elements.`);let Kt=Mt.texData.get(_e.dataId);return!Kt.isPacked||xu(_e.shape,Ut)||Kt.texture!==null&&xu(Kt.shape,Ut)?(Mt.incRef(_e.dataId),{dataId:_e.dataId,shape:Ut,dtype:_e.dtype}):QD(_e,Ut,Mt)}var ZD={kernelName:da,backendName:"webgl",kernelFunc:te},rm=class{constructor(o,i){this.variableNames=["x"];let{windowSize:s,batchSize:_,inSize:_e,outSize:ct}=o;this.outputShape=[_,ct];let Mt=4*Math.floor(s/4),Ft=s%4,Ut="sumValue += dot(values, ones);";if(i!=null){let Kt=1/i;Ut=`sumValue += dot(values * ${y.isInt(Kt)?Kt.toPrecision(2):Kt}, ones);`}let Xt="";_e%s>0&&(Xt=`
        if (inIdx < 0 || inIdx >= ${_e}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${Xt}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${s};

        float sumValue = 0.0;

        for (int i = 0; i < ${Mt}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${Ut}
        }

        int inIdx = inOffset + ${Mt};
        if (${Ft===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${Ut}
        } else if (${Ft===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${Ut}
        } else if (${Ft===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${Ut}
        }
        setOutput(sumValue);
      }
    `}},gh=class{constructor(o,i){this.variableNames=["x"];let{windowSize:s,batchSize:_,inSize:_e,outSize:ct}=o;this.outputShape=[_,ct];let Mt="0.0",Ft="";i==="prod"?Mt="1.0":i==="min"?(Mt="1.0 / 1e-20",Ft="min"):i==="max"&&(Mt="-1.0 / 1e-20",Ft="max");let Ut=`${i}(${i}(${i}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;i==="sum"?Ut="sumValue":i==="prod"?Ut="prodValue":i==="all"?Ut="allValue":i==="any"&&(Ut="anyValue");let Xt=4*Math.floor(s/4),Kt=s%4,nr=`
      if (${i==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${i==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${Ft}(values, minMaxValue);
        if (${i==="min"} || ${i==="max"}) {
          minMaxValue = ${Ft}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,rr="vec4";i==="all"?(Mt="1.0",nr=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,rr="bvec4"):i==="any"&&(Mt="0.0",nr=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,rr="bvec4");let or="";_e%s>0&&(or=`
        if (inIdx < 0 || inIdx >= ${_e}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${Mt};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${or}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${s};

        vec4 minMaxValue = vec4(${Mt});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${Xt}; i += 4) {
          int inIdx = inOffset + i;
          ${rr} values = ${rr}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${nr}
        }

        int inIdx = inOffset + ${Xt};
        if (${Kt===1}) {
          ${rr} values = ${rr}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${nr}
        } else if (${Kt===2}) {
          ${rr} values = ${rr}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${nr}
        } else if (${Kt===3}) {
          ${rr} values = ${rr}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${nr}
        }
        setOutput(${Ut});
      }
    `}};function x9(o){let i=[];for(;i.length===0||i[i.length-1].outSize!==1;){let s=i.length?i[i.length-1].outSize:o[1],_=w.computeOptimalWindowSize(s);i.push({inSize:s,windowSize:_,outSize:Math.ceil(s/_)})}return i}function Yr(o,i,s,_){let _e=x9(o.shape),ct=o;for(let Mt=0;Mt<_e.length;Mt++){let Ft,Ut,{inSize:Xt,windowSize:Kt,outSize:nr}=_e[Mt];Ft=s==="mean"?Mt===0?new rm({windowSize:Kt,inSize:Xt,batchSize:o.shape[0],outSize:nr},Xt):new rm({windowSize:Kt,inSize:Xt,batchSize:o.shape[0],outSize:nr}):new gh({windowSize:Kt,inSize:Xt,batchSize:o.shape[0],outSize:nr},s),Ut=ct,ct=_.runWebGLProgram(Ft,[ct],i),Ut.dataId!==o.dataId&&_.disposeIntermediateTensorInfo(Ut)}return ct}var xh=class{constructor(o,i){this.variableNames=["A"];let s=new Array(o.length);for(let ct=0;ct<s.length;ct++)s[ct]=o[i[ct]];this.outputShape=s,this.rank=s.length;let _=Re$1(this.rank),_e=y9(i);this.userCode=`
    void main() {
      ${_} resRC = getOutputCoords();
      setOutput(getA(${_e}));
    }
    `}};function y9(o){let i=o.length;if(i>6)throw Error(`Transpose for rank ${i} is not yet supported`);let s=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],_=new Array(i);for(let _e=0;_e<o.length;_e++)_[o[_e]]=s[_e];return _.join()}var yh=class{constructor(o,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;let s=new Array(o.length);for(let Xt=0;Xt<s.length;Xt++)s[Xt]=o[i[Xt]];if(this.outputShape=s,this.rank=s.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);let _=Re$1(this.rank),_e=dv("rc",this.rank),ct=new Array(this.rank);for(let Xt=0;Xt<i.length;Xt++)ct[i[Xt]]=_e[Xt];let Mt=`vec2(${ct.slice(-2).join()})`,Ft=`++${_e[this.rank-1]} < ${s[this.rank-1]}`,Ut=`getChannel(getA(${ct.join()}), ${Mt})`;this.userCode=`
    void main() {
      ${_} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${Ut};
      if(${Ft}) {
        result[1] = ${Ut};
      }
      --${_e[this.rank-1]};
      if(++${_e[this.rank-2]} < ${s[this.rank-2]}) {
        result[2] = ${Ut};
        if(${Ft}) {
          result[3] = ${Ut};
        }
      }
      setOutput(result);
    }
    `}};function yu(o,i,s){let _=A().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new yh(o.shape,i):new xh(o.shape,i);return s.runWebGLProgram(_,[o],o.dtype)}function JD(o,i,s,_){let _e=i,ct=o.shape.length,Mt=y.parseAxisParam(_e,o.shape),Ft=Mt,Ut=w.getAxesPermutation(Ft,ct),Xt=Ut!=null,Kt=o;Xt&&(Kt=yu(o,Ut,_),Ft=w.getInnerMostAxes(Ft.length,ct)),w.assertAxesAreInnerMostDims("sum",Ft,ct);let[nr,rr]=w.computeOutAndReduceShapes(Kt.shape,Ft),or=nr;s&&(or=w.expandShapeToKeepDim(nr,Mt));let hr=y.sizeFromShape(rr),fr=te({inputs:{x:Kt},attrs:{shape:[y.sizeFromShape(o.shape)/hr,hr]},backend:_}),yr=Yr(fr,oi(o.dtype),"sum",_),Lr=te({inputs:{x:yr},attrs:{shape:or},backend:_});return _.disposeIntermediateTensorInfo(fr),_.disposeIntermediateTensorInfo(yr),Xt&&_.disposeIntermediateTensorInfo(Kt),Lr}function wp(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{axis:ct,keepDims:Mt}=_;return JD(_e,ct,Mt,s)}var eA={kernelName:Ss,backendName:"webgl",kernelFunc:wp};function bt$2(o){let i,{inputs:s,backend:_,attrs:_e}=o,{x:ct}=s,{perm:Mt}=_e,Ft=_,Ut=ct.shape.length,Xt=new Array(Ut);for(let Kt=0;Kt<Xt.length;Kt++)Xt[Kt]=ct.shape[Mt[Kt]];if(Ft.shouldExecuteOnCPU([ct])){let Kt=Ft.texData.get(ct.dataId).values,nr=Cp(Kt,ct.shape,ct.dtype,Mt,Xt);i=Ft.makeTensorInfo(Xt,ct.dtype),Ft.texData.get(i.dataId).values=nr}else i=yu(ct,Mt,Ft);return i}var tA={kernelName:co,backendName:"webgl",kernelFunc:bt$2},Cv=1e3;function Sp({a:o,b:i,transposeA:s,transposeB:_,backend:_e,bias:ct=null,preluActivationWeights:Mt=null,leakyreluAlpha:Ft=0,activation:Ut=null}){let Xt=o.shape.length,Kt=i.shape.length,nr=s?o.shape[Xt-2]:o.shape[Xt-1],rr=_?i.shape[Kt-1]:i.shape[Kt-2],or=s?o.shape[Xt-1]:o.shape[Xt-2],hr=_?i.shape[Kt-2]:i.shape[Kt-1],fr=o.shape.slice(0,-2),yr=i.shape.slice(0,-2),Lr=y.sizeFromShape(fr),Br=y.sizeFromShape(yr),Vr=Sr.assertAndGetBroadcastShape(o.shape.slice(0,-2),i.shape.slice(0,-2)).concat([or,hr]);y.assert(nr===rr,()=>`Error in matMul: inner shapes (${nr}) and (${rr}) of Tensors with shapes ${o.shape} and ${i.shape} and transposeA=${s} and transposeB=${_} must match.`);let Wr,ro=s?[Lr,nr,or]:[Lr,or,nr],no=_?[Br,hr,rr]:[Br,rr,hr],so=te({inputs:{x:o},backend:_e,attrs:{shape:ro}}),ko=te({inputs:{x:i},backend:_e,attrs:{shape:no}}),To=[so,ko],oo=Math.max(Lr,Br),No=s?so.shape[1]:so.shape[2],As=ct!=null,Ks=Mt!=null,vu=Ut==="leakyrelu",Fu=Ut!=null?yi(Ut,!0):null;if((or===1||hr===1)&&No>Cv&&(As||Ks||vu||Fu!=null)===!1){let Pp=so,Lo=ko;s&&(Pp=bt$2({inputs:{x:so},backend:_e,attrs:{perm:[0,2,1]}}),To.push(Pp)),_&&(Lo=bt$2({inputs:{x:ko},backend:_e,attrs:{perm:[0,2,1]}}),To.push(Lo));let Au=hr===1,Mp=Pp;hr!==1&&(Mp=te({inputs:{x:Pp},backend:_e,attrs:{shape:[oo,No,1]}}),To.push(Mp));let Lp=hr===1?2:1,Op=Lo;Au&&(Op=te({inputs:{x:Lo},backend:_e,attrs:{shape:[oo,1,No]}}),To.push(Op));let Fp=tm({inputs:{a:Mp,b:Op},backend:_e});Wr=wp({inputs:{x:Fp},backend:_e,attrs:{axis:Lp,keepDims:!0}}),To.push(Fp)}else{let Pp=dt(o.dtype,i.dtype),Lo=new zc(ro,no,[oo,or,hr],s,_,As,Fu,Ks,vu),Au=[so,ko];if(ct!=null&&Au.push(ct),Ks&&Au.push(Mt),vu){let Mp=_e.makeTensorInfo([],"float32",y.createScalarValue(Ft,"float32"));Au.push(Mp),To.push(Mp)}Wr=_e.runWebGLProgram(Lo,Au,Pp)}let Ap=te({inputs:{x:Wr},backend:_e,attrs:{shape:Vr}});To.push(Wr);for(let Pp of To)_e.disposeIntermediateTensorInfo(Pp);return Ap}function b9(o){let{inputs:i,backend:s,attrs:_}=o,{a:_e,b:ct,bias:Mt,preluActivationWeights:Ft}=i,{transposeA:Ut,transposeB:Xt,activation:Kt,leakyreluAlpha:nr}=_;return Sp({a:_e,b:ct,transposeA:Ut,transposeB:Xt,backend:s,bias:Mt,preluActivationWeights:Ft,leakyreluAlpha:nr,activation:Kt})}var rA={kernelName:So,backendName:"webgl",kernelFunc:b9},oA="return abs(x);";function C9(o){let i,{inputs:s,backend:_}=o,{x:_e}=s;if(_.shouldExecuteOnCPU([_e])&&_e.dtype!=="complex64"){let ct=_.texData.get(_e.dataId),Mt=ch(ct.values);return _.makeTensorInfo(_e.shape,_e.dtype,Mt)}return i=A().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new Fr(_e.shape,oA):new tr(_e.shape,oA),_.runWebGLProgram(i,[_e],_e.dtype)}var nA={kernelName:Xs,backendName:"webgl",kernelFunc:C9},w9=Wt+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,S9=xe$1({opSnippet:w9}),sA={kernelName:Vo,backendName:"webgl",kernelFunc:S9},I9=Wt+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,v9=xe$1({opSnippet:I9}),aA={kernelName:Wo,backendName:"webgl",kernelFunc:v9},iA="return a + b;",k9=nt$1({opSnippet:iA,packedOpSnippet:iA,supportsComplex:!0,cpuKernelImpl:LR}),uA={kernelName:uo,backendName:"webgl",kernelFunc:k9},bh=class{constructor(o,i){this.outputShape=[],this.outputShape=o,this.variableNames=i.map((_e,ct)=>`T${ct}`);let s=[];this.variableNames.forEach(_e=>{s.push(`float v${_e} = get${_e}AtOutCoords();`)});let _=this.variableNames.map(_e=>`v${_e}`).join(" + ");this.userCode=`
      void main() {
        ${s.join(`
        `)}

        float result = ${_};
        setOutput(result);
      }
    `}},Ch=class{constructor(o,i){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=o,this.variableNames=i.map((_e,ct)=>`T${ct}`);let s=[];this.variableNames.forEach(_e=>{s.push(`vec4 v${_e} = get${_e}AtOutCoords();`)});let _=this.variableNames.map(_e=>`v${_e}`).join(" + ");this.userCode=`
      void main() {
        ${s.join(`
        `)}

        vec4 result = ${_};
        setOutput(result);
      }
    `}};function wh(o){let{inputs:i,backend:s}=o,_=i;if(_.length===1)return Dt$1({inputs:{x:_[0]},backend:s});if(_.length>A().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){let Ft=Math.floor(_.length/2),Ut=wh({inputs:_.slice(0,Ft),backend:s}),Xt=wh({inputs:_.slice(Ft),backend:s});return wh({inputs:[Ut,Xt],backend:s})}let _e=_.map(Ft=>Ft.dtype).reduce((Ft,Ut)=>dt(Ft,Ut)),ct=_.map(Ft=>Ft.shape),Mt=A().getBool("WEBGL_PACK")?new Ch(_[0].shape,ct):new bh(_[0].shape,ct);return s.runWebGLProgram(Mt,_,_e)}var pA={kernelName:Uo,backendName:"webgl",kernelFunc:wh};function N9(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{axis:ct,keepDims:Mt}=_,Ft=_e.shape.length,Ut=y.parseAxisParam(ct,_e.shape),Xt=Ut,Kt=w.getAxesPermutation(Xt,Ft),nr=_e;Kt!=null&&(nr=bt$2({inputs:{x:_e},backend:s,attrs:{perm:Kt}}),Xt=w.getInnerMostAxes(Xt.length,Ft)),w.assertAxesAreInnerMostDims("all",Xt,Ft);let rr,[or,hr]=w.computeOutAndReduceShapes(nr.shape,Xt),fr=te({inputs:{x:nr},backend:s,attrs:{shape:[-1,y.sizeFromShape(hr)]}}),yr=Yr(fr,fr.dtype,"all",s);return Mt?rr=te({inputs:{x:yr},backend:s,attrs:{shape:w.expandShapeToKeepDim(or,Ut)}}):rr=te({inputs:{x:yr},backend:s,attrs:{shape:or}}),s.disposeIntermediateTensorInfo(fr),s.disposeIntermediateTensorInfo(yr),Kt!=null&&s.disposeIntermediateTensorInfo(nr),rr}var cA={kernelName:Go,backendName:"webgl",kernelFunc:N9};function T9(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{axis:ct,keepDims:Mt}=_,Ft=_e.shape.length,Ut=y.parseAxisParam(ct,_e.shape),Xt=Ut,Kt=w.getAxesPermutation(Xt,Ft),nr=_e;Kt!=null&&(nr=bt$2({inputs:{x:_e},backend:s,attrs:{perm:Kt}}),Xt=w.getInnerMostAxes(Xt.length,Ft)),w.assertAxesAreInnerMostDims("any",Xt,Ft);let rr,[or,hr]=w.computeOutAndReduceShapes(nr.shape,Xt),fr=te({inputs:{x:nr},backend:s,attrs:{shape:[-1,y.sizeFromShape(hr)]}}),yr=Yr(fr,fr.dtype,"any",s);return Mt?rr=te({inputs:{x:yr},backend:s,attrs:{shape:w.expandShapeToKeepDim(or,Ut)}}):rr=te({inputs:{x:yr},backend:s,attrs:{shape:or}}),s.disposeIntermediateTensorInfo(fr),s.disposeIntermediateTensorInfo(yr),Kt!=null&&s.disposeIntermediateTensorInfo(nr),rr}var lA={kernelName:Ho,backendName:"webgl",kernelFunc:T9},Sh=class{constructor(o,i,s){this.variableNames=["A"];let{windowSize:_,batchSize:_e,outSize:ct}=o;s||this.variableNames.push("bestIndicesA"),this.outputShape=[_e,ct];let Mt=i==="max"?">":"<",Ft=s?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${_};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${_}; i++) {
          int inIdx = ${Ft};
          float candidate = getA(batch, inIdx);
          if (candidate ${Mt} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}},Ih=class{constructor(o,i,s,_){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,y.assert(o.length>2,()=>`Packed arg${s.charAt(0).toUpperCase()+s.slice(1)} supports only inputs with rank above 2.`);let _e=o[o.length-1],ct=Math.ceil(_e/i);this.outputShape=o.slice(0,-1),ct>1&&this.outputShape.push(ct),_||this.variableNames.push("bestIndicesA");let Mt,Ft,Ut=this.outputShape,Xt=Ut.length,Kt=Re$1(Xt),nr=Rt$1("coords",Xt);if(ct===1){Ft=Xt+1;let so=Re$1(Ft);Mt=`
        ${so} sourceLocR = ${so}(${nr.join()}, 0);
        ++${nr[Xt-1]};
        ${so} sourceLocG = ${so}(${nr.join()}, 0);
        ++${nr[Xt-2]};
        ${so} sourceLocA = ${so}(${nr.join()}, 0);
        --${nr[Xt-1]};
        ${so} sourceLocB = ${so}(${nr.join()}, 0);
        --${nr[Xt-2]};`}else Ft=Xt,Mt=`
        ${Kt} sourceLocR = coords;
        ++${nr[Xt-1]};
        ${Kt} sourceLocG = coords;
        ++${nr[Xt-2]};
        ${Kt} sourceLocA = coords;
        --${nr[Xt-1]};
        ${Kt} sourceLocB = coords;
        --${nr[Xt-2]};`;let rr=["x","y","z","w","u","v"].slice(0,Ft),or="."+rr[Ft-1],hr=rr.map(so=>"int "+so),fr=Rt$1("sourceLocR",Ft-1).concat("inIdx.r"),yr=Rt$1("sourceLocG",Ft-1).concat("inIdx.g"),Lr=Rt$1("sourceLocB",Ft-1).concat("inIdx.b"),Br=Rt$1("sourceLocA",Ft-1).concat("inIdx.a"),Vr=s==="max"?"greaterThan":"lessThan",Wr=_?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${fr.join()}),
                             getBestIndicesAChannel(${yr.join()}),
                             getBestIndicesAChannel(${Lr.join()}),
                             getBestIndicesAChannel(${Br.join()})));`,ro=`vec4(
            getAChannel(${fr.join()}),
            hasNextCol ? getAChannel(${yr.join()}) : 0.,
            hasNextRow ? getAChannel(${Lr.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${Br.join()}) : 0.)`,no=_?"":`
      float getBestIndicesAChannel(${hr.join()}) {
        return getChannel(getBestIndicesA(${rr.join()}),
                                          vec2(${rr.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${hr.join()}) {
        return getChannel(getA(${rr.join()}),
                               vec2(${rr.slice(-2).join()}));
      }
      ${no}
      void main() {
        ${Kt} coords = getOutputCoords();
        bool hasNextCol = ${nr[Xt-1]} < ${Ut[Xt-1]-1};
        bool hasNextRow = ${nr[Xt-2]} < ${Ut[Xt-2]-1};
        ${Mt}
        ivec4 srcIdx = ivec4(sourceLocR${or}, sourceLocG${or},
          sourceLocB${or}, sourceLocA${or}) * ${i};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${ro};

        for (int i = 0; i < ${i}; i++) {
          inIdx = srcIdx;
          ${Wr}
          vec4 candidate = ${ro};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${Vr}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}};function mA(o,i,s,_=null){let _e=i.shape[0],ct=i.shape[1];_!=null&&(_e=_.shape[0],ct=_.shape[1]);let Mt=w.computeOptimalWindowSize(ct),Ft={windowSize:Mt,inSize:ct,batchSize:_e,outSize:Math.ceil(ct/Mt)},Ut=new Sh(Ft,s,_==null),Xt=[i];_!=null&&Xt.push(_);let Kt=o.runWebGLProgram(Ut,Xt,"int32");if(Kt.shape[1]===1)return Kt;let nr=mA(o,i,s,Kt);return o.disposeIntermediateTensorInfo(Kt),nr}function dA(o,i,s,_=null){let _e=_!=null?_.shape:i.shape,ct=_e[_e.length-1],Mt=w.computeOptimalWindowSize(ct),Ft=new Ih(_e,Mt,s,_==null),Ut=_==null?[i]:[i,_],Xt=o.runWebGLProgram(Ft,Ut,"int32");if(Xt.shape.length===i.shape.length){let Kt=dA(o,i,s,Xt);return o.disposeIntermediateTensorInfo(Xt),Kt}return Xt}function vh(o,i,s,_){let _e=[s];if(w.assertAxesAreInnerMostDims("arg"+_.charAt(0).toUpperCase()+_.slice(1),_e,i.shape.length),!A().getBool("WEBGL_PACK_REDUCE")||i.shape.length<=2){let ct=[],Mt=o.texData.get(i.dataId),Ft=i;Mt!==null&&Mt.isPacked&&(Ft=o.unpackTensor(i),ct.push(Ft));let[Ut,Xt]=w.computeOutAndReduceShapes(Ft.shape,_e),Kt=y.sizeFromShape(Xt),nr=te({inputs:{x:Ft},backend:o,attrs:{shape:[-1,Kt]}});ct.push(nr);let rr=mA(o,nr,_);ct.push(rr);let or=te({inputs:{x:rr},backend:o,attrs:{shape:Ut}});return ct.forEach(hr=>o.disposeIntermediateTensorInfo(hr)),or}return dA(o,i,_)}function _9(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{axis:ct}=_,Mt=y.parseAxisParam(ct,_e.shape),Ft=w.getAxesPermutation(Mt,_e.shape.length),Ut=_e,Xt=[];Ft!=null&&(Ut=bt$2({inputs:{x:_e},backend:s,attrs:{perm:Ft}}),Xt.push(Ut),Mt=w.getInnerMostAxes(Mt.length,Ut.shape.length)),w.assertAxesAreInnerMostDims("argMax",[Mt[0]],Ut.shape.length);let Kt=vh(s,Ut,Mt[0],"max");return Xt.forEach(nr=>s.disposeIntermediateTensorInfo(nr)),Kt}var fA={kernelName:Ys,backendName:"webgl",kernelFunc:_9};function E9(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{axis:ct}=_,Mt=y.parseAxisParam(ct,_e.shape),Ft=w.getAxesPermutation(Mt,_e.shape.length),Ut=_e,Xt=[];Ft!=null&&(Ut=bt$2({inputs:{x:_e},backend:s,attrs:{perm:Ft}}),Xt.push(Ut),Mt=w.getInnerMostAxes(Mt.length,Ut.shape.length)),w.assertAxesAreInnerMostDims("argMin",[Mt[0]],Ut.shape.length);let Kt=vh(s,Ut,Mt[0],"min");return Xt.forEach(nr=>s.disposeIntermediateTensorInfo(nr)),Kt}var hA={kernelName:Qs,backendName:"webgl",kernelFunc:E9},$9=Wt+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,R9=xe$1({opSnippet:$9}),gA={kernelName:Ko,backendName:"webgl",kernelFunc:R9},D9=Wt+"return log(x + sqrt(x * x + 1.0));",A9=xe$1({opSnippet:D9}),xA={kernelName:qo,backendName:"webgl",kernelFunc:A9},F9=Wt+`
  return atan(x);
`,P9=xe$1({opSnippet:F9}),yA={kernelName:jo,backendName:"webgl",kernelFunc:P9},O9=Bc+`
  return atan(a, b);
`,M9=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Xr+`
  return result;
`,L9=nt$1({opSnippet:O9,packedOpSnippet:M9}),bA={kernelName:Yo,backendName:"webgl",kernelFunc:L9},B9=Wt+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,z9=xe$1({opSnippet:B9}),CA={kernelName:Xo,backendName:"webgl",kernelFunc:z9},Us=class{constructor(o,i,s,_=!1,_e=!1){if(this.variableNames=["x"],i==="avg"&&s)throw new Error("Cannot compute positions for average pool.");let ct=o.filterWidth,Mt=o.strideHeight,Ft=o.strideWidth,Ut=o.dilationHeight,Xt=o.dilationWidth,Kt=o.effectiveFilterHeight,nr=o.effectiveFilterWidth,rr=o.padInfo.top,or=o.padInfo.left;this.outputShape=o.outShape;let hr=i==="avg",fr=`((batch  * ${o.inHeight} + xR) * ${o.inWidth} + xC) * ${o.inChannels} + d`,yr=`(xR * ${o.inWidth} + xC) * ${o.inChannels} + d`,Lr="0.0";if(hr||(Lr="-1.0 / 1e-20"),s){let no=">=";return void(this.userCode=`
        const ivec2 strides = ivec2(${Mt}, ${Ft});
        const ivec2 pads = ivec2(${rr}, ${or});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${Kt};
              wR += ${Ut}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${o.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${nr};
                wC += ${Xt}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${o.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${no} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${_?_e?fr:yr:`wR * ${nr} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `)}let Br=`${i}(${i}(${i}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;i==="avg"&&(Br="avgValue / max(count, 1.0)");let Vr=4*Math.floor(ct/4),Wr=ct%4,ro=`
      if (${hr}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${Mt}, ${Ft});
      const ivec2 pads = ivec2(${rr}, ${or});
      const float initializationValue = ${Lr};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${o.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${Lr});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${Kt};
            wR += ${Ut}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${o.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${Vr}; wC += 4) {
            int xC = xCCorner + wC * ${Xt};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${Xt}, d),
              getValue(batch, xR, xC + 2 * ${Xt}, d),
              getValue(batch, xR, xC + 3 * ${Xt}, d)
            );

            ${ro}
          }

          int xC = xCCorner + ${Vr};
          if (${Wr===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${ro}
          } else if (${Wr===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${Xt}, d),
              initializationValue,
              initializationValue
            );

            ${ro}
          } else if (${Wr===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${Xt}, d),
              getValue(batch, xR, xC + 2 * ${Xt}, d),
              initializationValue
            );

            ${ro}
          }
        }
        setOutput(${Br});
      }
    `}},bu=class{constructor(o,i,s,_=!1,_e=!1){if(this.variableNames=["x"],i==="avg"&&s)throw new Error("Cannot compute positions for average pool.");let ct=o.filterWidth,Mt=o.strideDepth,Ft=o.strideHeight,Ut=o.strideWidth,Xt=o.dilationDepth,Kt=o.dilationHeight,nr=o.dilationWidth,rr=o.effectiveFilterDepth,or=o.effectiveFilterHeight,hr=o.effectiveFilterWidth,fr=o.padInfo.front,yr=o.padInfo.top,Lr=o.padInfo.left;this.outputShape=o.outShape;let Br=i==="avg",Vr="0.0";if(Br||(Vr="-1.0 / 1e-20"),s){let ko=">=";return void(this.userCode=`
        const ivec3 strides =
            ivec3(${Mt}, ${Ft}, ${Ut});
        const ivec3 pads = ivec3(${fr}, ${yr}, ${Lr});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${rr};
              wD += ${Xt}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${o.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${or};
                wR += ${Kt}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${o.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${hr};
                  wC += ${nr}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${o.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${ko} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${_?_e?`(((batch * ${o.inDepth} + xD) * ${o.inHeight} + xR) * ${o.inWidth} + xC) * ${o.inChannels} + ch`:`((xD * ${o.inHeight} + xR) * ${o.inWidth} + xC) * ${o.inChannels} + ch`:`wD * ${or} * ${hr} +
                      wR * ${hr} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `)}let Wr=`${i}(${i}(${i}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;i==="avg"&&(Wr="avgValue / max(count, 1.0)");let ro=4*Math.floor(ct/4),no=ct%4,so=`
      if (${Br}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${Mt}, ${Ft}, ${Ut});
      const ivec3 pads = ivec3(${fr}, ${yr}, ${Lr});
      const float initializationValue = ${Vr};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${o.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${Vr});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${rr};
            wD += ${Xt}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${o.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${or};
            wR += ${Kt}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${o.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${ro}; wC += 4) {
              int xC = xCCorner + wC * ${nr};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${nr}, ch),
                getValue(batch, xD, xR, xC + 2 * ${nr}, ch),
                getValue(batch, xD, xR, xC + 3 * ${nr}, ch)
              );

              ${so}
            }

            int xC = xCCorner + ${ro};
            if (${no===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${so}
            } else if (${no===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${nr}, ch),
                initializationValue,
                initializationValue
              );

              ${so}
            } else if (${no===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${nr}, ch),
                getValue(batch, xD, xR, xC + 2 * ${nr}, ch),
                initializationValue
              );

              ${so}
            }
          }
        }
        setOutput(${Wr});
      }
    `}};function V9(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i;Vs(_e,"avgPool");let{filterSize:ct,strides:Mt,pad:Ft,dimRoundingMode:Ut}=_;y.assert(w.eitherStridesOrDilationsAreOne(Mt,1),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${Mt} and dilations '1'`);let Xt=w.computePool2DInfo(_e.shape,ct,Mt,1,Ft,Ut);if(Xt.filterWidth===1&&Xt.filterHeight===1&&y.arraysEqual(Xt.inShape,Xt.outShape))return Dt$1({inputs:{x:_e},backend:s});let Kt=new Us(Xt,"avg",!1);return s.runWebGLProgram(Kt,[_e],"float32")}var wA={kernelName:Qo,backendName:"webgl",kernelFunc:V9};function W9(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{filterSize:ct,strides:Mt,pad:Ft,dimRoundingMode:Ut,dataFormat:Xt}=_,Kt=w.computePool3DInfo(_e.shape,ct,Mt,[1,1,1],Ft,Ut,Xt),nr=new bu(Kt,"avg",!1);return s.runWebGLProgram(nr,[_e],"float32")}var SA={kernelName:Zs,backendName:"webgl",kernelFunc:W9},kh=class{constructor(o){this.variableNames=["dy"],this.outputShape=o.inShape;let i=o.filterHeight,s=o.filterWidth,_=o.strideHeight,_e=o.strideWidth,ct=o.dilationHeight,Mt=o.dilationWidth,Ft=o.effectiveFilterHeight,Ut=o.effectiveFilterWidth,Xt=Ft-1-o.padInfo.top,Kt=Ut-1-o.padInfo.left,nr=1/(i*s);this.userCode=`
      const ivec2 pads = ivec2(${Xt}, ${Kt});
      const float avgMultiplier = float(${nr});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${Ft};
            wR += ${ct}) {
          float dyR = float(dyRCorner + wR) / ${_}.0;

          if (dyR < 0.0 || dyR >= ${o.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${Ut};
            wC+= ${Mt}) {
            float dyC = float(dyCCorner + wC) / ${_e}.0;

            if (dyC < 0.0 || dyC >= ${o.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}},Nh=class{constructor(o){this.variableNames=["dy"],this.outputShape=o.inShape;let i=o.filterDepth,s=o.filterHeight,_=o.filterWidth,_e=o.strideDepth,ct=o.strideHeight,Mt=o.strideWidth,Ft=o.dilationDepth,Ut=o.dilationHeight,Xt=o.dilationWidth,Kt=o.effectiveFilterDepth,nr=o.effectiveFilterHeight,rr=o.effectiveFilterWidth,or=Kt-1-o.padInfo.front,hr=nr-1-o.padInfo.top,fr=rr-1-o.padInfo.left,yr=1/(i*s*_);this.userCode=`
      const ivec3 pads = ivec3(${or}, ${hr}, ${fr});
      const float avgMultiplier = float(${yr});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${Kt};
            wD += ${Ft}) {
          float dyD = float(dyDCorner + wD) / ${_e}.0;

          if (dyD < 0.0 || dyD >= ${o.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${nr};
              wR += ${Ut}) {
            float dyR = float(dyRCorner + wR) / ${ct}.0;

            if (dyR < 0.0 || dyR >= ${o.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${rr};
                wC += ${Xt}) {
              float dyC = float(dyCCorner + wC) / ${Mt}.0;

              if (dyC < 0.0 || dyC >= ${o.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}};function U9(o){let{inputs:i,backend:s,attrs:_}=o,{dy:_e,input:ct}=i,Mt=ct,{filterSize:Ft,strides:Ut,pad:Xt,dimRoundingMode:Kt}=_,nr=w.computePool3DInfo(Mt.shape,Ft,Ut,[1,1,1],Xt,Kt),rr=new Nh(nr);return s.runWebGLProgram(rr,[_e],Mt.dtype)}var IA={kernelName:Ri,backendName:"webgl",kernelFunc:U9};function G9(o){let{inputs:i,backend:s,attrs:_}=o,{dy:_e,input:ct}=i,Mt=ct;Vs([_e,ct],"avgPoolGrad");let{filterSize:Ft,strides:Ut,pad:Xt}=_,Kt=w.computePool2DInfo(Mt.shape,Ft,Ut,1,Xt),nr=new kh(Kt);return s.runWebGLProgram(nr,[_e],Mt.dtype)}var vA={kernelName:$i,backendName:"webgl",kernelFunc:G9};function H9(o){let{inputs:i,backend:s,attrs:_}=o,{a:_e,b:ct}=i,{transposeA:Mt,transposeB:Ft}=_;return Sp({a:_e,b:ct,transposeA:Mt,transposeB:Ft,backend:s})}var kA={kernelName:Zo,backendName:"webgl",kernelFunc:H9},Th=class{constructor(o,i,s,_,_e,ct){this.outputShape=[],this.variableNames=["x","mean","variance"],w.assertAndGetBroadcastShape(o,i),w.assertAndGetBroadcastShape(o,s);let Mt="0.0";_!=null&&(w.assertAndGetBroadcastShape(o,_),this.variableNames.push("offset"),Mt="getOffsetAtOutCoords()");let Ft="1.0";_e!=null&&(w.assertAndGetBroadcastShape(o,_e),this.variableNames.push("scale"),Ft="getScaleAtOutCoords()"),this.outputShape=o,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${Mt};
        float scale = ${Ft};
        float inv = scale * inversesqrt(variance + float(${ct}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}},_h=class{constructor(o,i,s,_,_e,ct){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],w.assertAndGetBroadcastShape(o,i),w.assertAndGetBroadcastShape(o,s);let Mt="vec4(0.0)";_!=null&&(w.assertAndGetBroadcastShape(o,_),this.variableNames.push("offset"),Mt="getOffsetAtOutCoords()");let Ft="vec4(1.0)";_e!=null&&(w.assertAndGetBroadcastShape(o,_e),this.variableNames.push("scale"),Ft="getScaleAtOutCoords()"),this.outputShape=o,this.userCode=`
      void main() {
        vec4 offset = ${Mt};
        vec4 scale = ${Ft};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${ct}));

        setOutput((x - mean) * inv + offset);
      }
    `}},K9=({inputs:o,backend:i,attrs:s})=>{let{x:_,mean:_e,variance:ct,offset:Mt,scale:Ft}=o;y.assert(_e.shape.length===ct.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),y.assert(Mt==null||_e.shape.length===Mt.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),y.assert(Ft==null||_e.shape.length===Ft.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:Ut}=s;Ut==null&&(Ut=.001);let Xt=[_,_e,ct],Kt=null;Mt!=null&&(Kt=Mt.shape,Xt.push(Mt));let nr=null;Ft!=null&&(nr=Ft.shape,Xt.push(Ft));let rr=A().getBool("WEBGL_PACK_NORMALIZATION")?new _h(_.shape,_e.shape,ct.shape,Kt,nr,Ut):new Th(_.shape,_e.shape,ct.shape,Kt,nr,Ut);return i.runWebGLProgram(rr,Xt,Xt[0].dtype)},NA={kernelName:In,backendName:"webgl",kernelFunc:K9},Eh=class{constructor(o){this.variableNames=["source"],this.outputShape=o,this.rank=o.length;let i=Re$1(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];let s,_=q9(this.rank);s=`
        ${i} sourceLoc;
        ${i} coords = getOutputCoords();
        ${o.map((_e,ct)=>`sourceLoc.${wv[ct]} = start[${ct}] + coords.${wv[ct]};`).join(`
`)}
      `,this.userCode=`
      void main() {
        ${s}
        setOutput(getSource(${_}));
      }
    `}},wv=["x","y","z","w","u","v"];function q9(o){if(o===1)return"sourceLoc";if(o<=6)return wv.slice(0,o).map(i=>"sourceLoc."+i).join(",");throw Error(`Slicing for rank ${o} is not yet supported`)}var $h=class{constructor(o){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=o,this.rank=o.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];let i=Re$1(this.rank),s=Rt$1("coords",this.rank),_=Rt$1("sourceLoc",this.rank),_e=this.rank===1?"sourceLoc":`vec2(${_.slice(-2).join()})`,ct=`getChannel(getSource(${_.join()}), ${_e})`,Mt=`
      result.x = ${ct};
      if (++${s[this.rank-1]} < ${o[this.rank-1]}) {
        ++${_[this.rank-1]};
        result.y = ${ct};
        --${_[this.rank-1]};
      }
    `,Ft=this.rank===1?"":`
      --${s[this.rank-1]};
      if (++${s[this.rank-2]} < ${o[this.rank-2]}) {
        ++${_[this.rank-2]};
        result.z = ${ct};
        if (++${s[this.rank-1]} < ${o[this.rank-1]}) {
          ++${_[this.rank-1]};
          result.w = ${ct};
        }
      }
    `,Ut=this.rank<=4?`sourceLoc = coords +
            ${i}(${o.map((Xt,Kt)=>`start[${Kt}]`).join()});`:o.map((Xt,Kt)=>`${_[Kt]} = ${s[Kt]} + start[${Kt}];`).join(`
`);this.userCode=`
      void main() {
        ${i} coords = getOutputCoords();
        ${i} sourceLoc;
        ${Ut}
        vec4 result = vec4(0.);
        ${Mt}
        ${Ft}
        setOutput(result);
      }
    `}};function j9(o,i,s,_){let _e=_.texData.get(o.dataId),ct=_.makeTensorInfo(s,o.dtype),Mt=_.texData.get(ct.dataId);Object.assign(Mt,_e),Mt.refCount=1,Mt.shape=s,Mt.dtype=o.dtype;let Ft=pt.computeFlatOffset(i,y.computeStrides(o.shape));_e.slice&&(Ft+=_e.slice.flatOffset),Mt.slice={flatOffset:Ft,origDataId:_e.slice&&_e.slice.origDataId||o.dataId};let Ut=_.dataRefCount.get(Mt.slice.origDataId)||1;return _.dataRefCount.set(Mt.slice.origDataId,Ut+1),ct}function Gs(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{begin:ct,size:Mt}=_,[Ft,Ut]=pt.parseSliceParams(_e,ct,Mt);if(pt.assertParamsValid(_e,Ft,Ut),y.sizeFromShape(Ut)===0)return s.makeTensorInfo(Ut,_e.dtype,[]);if(s.shouldExecuteOnCPU([_e])||_e.dtype==="string"){let nr=s.texData.get(_e.dataId),rr=gD(nr.values,Ft,Ut,_e.shape,_e.dtype);return s.makeTensorInfo(Ut,_e.dtype,rr)}let{isPacked:Xt}=s.texData.get(_e.dataId),Kt=pt.isSliceContinous(_e.shape,Ft,Ut);if(Xt||!Kt){let nr=A().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new $h(Ut):new Eh(Ut),rr=[Ft];return s.runWebGLProgram(nr,[_e],_e.dtype,rr)}return s.uploadToGPU(_e.dataId),j9(_e,Ft,Ut,s)}var TA={kernelName:ha,backendName:"webgl",kernelFunc:Gs},X9=o=>{let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{blockShape:ct,crops:Mt}=_;y.assert(_e.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");let Ft=ct.reduce((Br,Vr)=>Br*Vr),Ut=w.getReshaped(_e.shape,ct,Ft),Xt=w.getPermuted(Ut.length,ct.length),Kt=w.getReshapedPermuted(_e.shape,ct,Ft),nr=w.getSliceBeginCoords(Mt,ct.length),rr=w.getSliceSize(Kt,Mt,ct.length),or=[],hr=te({inputs:{x:_e},backend:s,attrs:{shape:Ut}}),fr=bt$2({inputs:{x:hr},backend:s,attrs:{perm:Xt}}),yr=te({inputs:{x:fr},backend:s,attrs:{shape:Kt}}),Lr=Gs({inputs:{x:yr},backend:s,attrs:{begin:nr,size:rr}});return or.push(hr),or.push(fr),or.push(yr),or.forEach(Br=>s.disposeIntermediateTensorInfo(Br)),Lr},_A={kernelName:Js,backendName:"webgl",kernelFunc:X9};function Y9(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e,weights:ct}=i,{size:Mt}=_,Ft=s.readSync(_e.dataId),Ut=s.readSync(ct.dataId),Xt=ph(Ft,Ut,ct.dtype,ct.shape,Mt);return s.makeTensorInfo([Mt],ct.dtype,Xt)}var EA={kernelName:Jo,backendName:"webgl",kernelFunc:Y9},Q9=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,Z9=`
  return float(int(a.r) & int(b.r));
`;function J9(o){let i,{inputs:s,backend:_}=o,{a:_e,b:ct}=s,Mt=A().getBool("WEBGL_PACK_BINARY_OPERATIONS"),Ft=A().getNumber("WEBGL_VERSION");if(_.shouldExecuteOnCPU([_e,ct])||Ft===1){let Ut=_.texData.get(_e.dataId).values,Xt=_.texData.get(ct.dataId).values,[Kt,nr]=zR(_e.shape,ct.shape,Ut,Xt,_e.dtype),rr=_.makeTensorInfo(nr,_e.dtype);return _.texData.get(rr.dataId).values=Kt,rr}return i=Mt?new jr(Q9,_e.shape,ct.shape,!1):new Pr(Z9,_e.shape,ct.shape),_.runWebGLProgram(i,[_e,ct],_e.dtype)}var $A={kernelName:qa,backendName:"webgl",kernelFunc:J9};function eJ(o){let{inputs:i,backend:s}=o,{s0:_,s1:_e}=i,ct=s.readSync(_.dataId),Mt=s.readSync(_e.dataId),Ft=w.assertAndGetBroadcastShape(Array.from(ct),Array.from(Mt));return s.makeTensorInfo([Ft.length],"int32",Int32Array.from(Ft))}var RA={kernelName:ea,backendName:"webgl",kernelFunc:eJ},tJ="return float(a != b);",Sv=nt$1({opSnippet:tJ,cpuKernelImpl:iD,dtype:"bool"}),DA={kernelName:Yn,backendName:"webgl",kernelFunc:Sv};function bi(o){let{inputs:i,backend:s}=o,{input:_}=i;return Dt$1({inputs:{x:s.texData.get(_.dataId).complexTensorInfos.real},backend:s})}var AA={kernelName:Hi,backendName:"webgl",kernelFunc:bi},rJ="return float(int(x));";function FA(o,i){let s=new tr(o.shape,rJ),_=i.runWebGLProgram(s,[o],"int32");return{dataId:_.dataId,shape:_.shape,dtype:_.dtype}}function Iv(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{dtype:ct}=_;if(ct==="complex64"){if(_e.dtype==="complex64")return Dt$1({inputs:{x:_e},backend:s});let Mt=Gr(_e.shape),Ft=Iv({inputs:{x:_e},backend:s,attrs:{dtype:"float32"}}),Ut=Or({inputs:{real:Ft,imag:Mt},backend:s});return Mt.dispose(),s.disposeIntermediateTensorInfo(Ft),Ut}if(_e.dtype==="complex64"){let Mt=bi({inputs:{input:_e},backend:s}),Ft=Iv({inputs:{x:Mt},backend:s,attrs:{dtype:ct}});return s.disposeIntermediateTensorInfo(Mt),Ft}if(!y.hasEncodingLoss(_e.dtype,ct)){let Mt=Dt$1({inputs:{x:_e},backend:s});return{dataId:Mt.dataId,shape:Mt.shape,dtype:ct}}if(s.shouldExecuteOnCPU([_e])){let Mt=s.texData.get(_e.dataId).values,[Ft,Ut,Xt]=VR(Mt,_e.shape,_e.dtype,ct);return s.makeTensorInfo(Ft,Ut,Xt)}if(ct==="int32")return FA(_e,s);if(ct==="bool"){let Mt=s.makeTensorInfo([],"bool",y.getTypedArrayFromDType("bool",1)),Ft=Sv({inputs:{a:_e,b:Mt},backend:s});return s.disposeIntermediateTensorInfo(Mt),Ft}throw new Error(`Error in Cast: failed to cast ${_e.dtype} to ${ct}`)}var PA={kernelName:yo,backendName:"webgl",kernelFunc:Iv},OA="return ceil(x);",oJ=xe$1({opSnippet:OA,packedOpSnippet:OA,cpuKernelImpl:WR}),MA={kernelName:en,backendName:"webgl",kernelFunc:oJ},Rh=class{constructor(o){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=o,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}},Dh=class{constructor(o){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=o,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}};function nJ(o){let i,{inputs:s,backend:_,attrs:_e}=o,{x:ct}=s,{clipValueMin:Mt,clipValueMax:Ft}=_e;i=A().getBool("WEBGL_PACK_CLIP")?new Dh(ct.shape):new Rh(ct.shape);let Ut=[[Mt],[Ft]];return _.runWebGLProgram(i,[ct],ct.dtype,Ut)}var LA={kernelName:bo,backendName:"webgl",kernelFunc:nJ},Ah=class{constructor(o){this.variableNames=["real","imag"],this.outputShape=o,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}};function BA(o,i){return{dataId:i.dataId,dtype:i.dtype,shape:o.shape}}function sJ(o){let{inputs:i,backend:s}=o,{x:_}=i,_e=s.texData.get(_.dataId),ct=new Ah(_.shape),Mt=[BA(_,_e.complexTensorInfos.real),BA(_,_e.complexTensorInfos.imag)];return s.runWebGLProgram(ct,Mt,Mt[0].dtype)}var zA={kernelName:Ai,backendName:"webgl",kernelFunc:sJ},Fh=class{constructor(o){this.outputShape=[],this.outputShape=w.computeOutShape(o,1),this.variableNames=o.map((ct,Mt)=>`T${Mt}`);let i=new Array(o.length-1);i[0]=o[0][1];for(let ct=1;ct<i.length;ct++)i[ct]=i[ct-1]+o[ct][1];let s=[`if (yC < ${i[0]}) setOutput(getT0(yR, yC));`];for(let ct=1;ct<i.length;ct++){let Mt=i[ct-1];s.push(`else if (yC < ${i[ct]}) setOutput(getT${ct}(yR, yC-${Mt}));`)}let _=i.length,_e=i[i.length-1];s.push(`else setOutput(getT${_}(yR, yC-${_e}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${s.join(`
        `)}
      }
    `}},Oh=class{constructor(o,i){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=w.computeOutShape(o,i);let s=this.outputShape,_=s.length,_e=Re$1(_),ct=Rt$1("coords",_),Mt=["x","y","z","w","u","v"].slice(0,_);this.variableNames=o.map((hr,fr)=>`T${fr}`);let Ft=new Array(o.length-1);Ft[0]=o[0][i];for(let hr=1;hr<Ft.length;hr++)Ft[hr]=Ft[hr-1]+o[hr][i];let Ut=Mt[i],Xt=Mt.slice(-2),Kt=Mt.join(),nr=`if (${Ut} < ${Ft[0]}) {
        return getChannel(
            getT0(${Kt}), vec2(${Xt.join()}));
        }`;for(let hr=1;hr<Ft.length;hr++){let fr=Ft[hr-1];nr+=`
        if (${Ut} < ${Ft[hr]}  && ${Ut} >= ${Ft[hr-1]}) {
          return getChannel(
            getT${hr}(${Ph(Mt,Ut,fr)}),
            vec2(${Ph(Xt,Ut,fr)}));
        }`}let rr=Ft.length,or=Ft[Ft.length-1];nr+=`
        return getChannel(
          getT${rr}(${Ph(Mt,Ut,or)}),
          vec2(${Ph(Xt,Ut,or)}));`,this.userCode=`
      float getValue(${Mt.map(hr=>"int "+hr)}) {
        ${nr}
      }

      void main() {
        ${_e} coords = getOutputCoords();
        vec4 result = vec4(getValue(${ct}), 0., 0., 0.);

        ${ct[_-1]} = ${ct[_-1]} + 1;
        if (${ct[_-1]} < ${s[_-1]}) {
          result.g = getValue(${ct});
        }

        ${ct[_-2]} = ${ct[_-2]} + 1;
        if (${ct[_-2]} < ${s[_-2]}) {
          result.a = getValue(${ct});
        }

        ${ct[_-1]} = ${ct[_-1]} - 1;
        if (${ct[_-2]} < ${s[_-2]} &&
            ${ct[_-1]} < ${s[_-1]}) {
          result.b = getValue(${ct});
        }
        setOutput(result);
      }
    `}};function Ph(o,i,s){let _=o.indexOf(i);return o.map((_e,ct)=>ct===_?`${_e} - ${s}`:_e).join()}function Ip(o){let{inputs:i,backend:s}=o,{input:_}=i;return Dt$1({inputs:{x:s.texData.get(_.dataId).complexTensorInfos.imag},backend:s})}var VA={kernelName:Wi,backendName:"webgl",kernelFunc:Ip};function Vc(o,i,s){let _=o[0].dtype;if(_==="complex64"){let or=o.map(Br=>bi({inputs:{input:Br},backend:s})),hr=o.map(Br=>Ip({inputs:{input:Br},backend:s})),fr=Vc(or,i,s),yr=Vc(hr,i,s),Lr=Or({inputs:{real:fr,imag:yr},backend:s});return or.forEach(Br=>s.disposeIntermediateTensorInfo(Br)),hr.forEach(Br=>s.disposeIntermediateTensorInfo(Br)),s.disposeIntermediateTensorInfo(fr),s.disposeIntermediateTensorInfo(yr),Lr}let _e=s.shouldExecuteOnCPU(o);if(_==="string"&&(_e=!0),_e){let or=o.map(Wr=>{let ro=[-1,y.sizeFromShape(Wr.shape.slice(i))];return te({inputs:{x:Wr},backend:s,attrs:{shape:ro}})}),hr=or.map(Wr=>({vals:s.readSync(Wr.dataId),shape:Wr.shape})),fr=w.computeOutShape(or.map(Wr=>Wr.shape),1),yr=or[0].shape[0]===1,Lr=UR(hr,fr,_,yr),Br=w.computeOutShape(o.map(Wr=>Wr.shape),i),Vr=s.makeTensorInfo(Br,_,Lr);return or.forEach(Wr=>s.disposeIntermediateTensorInfo(Wr)),Vr}let ct=o.filter(or=>y.sizeFromShape(or.shape)>0),Mt=A().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&ct[0].shape.length>1;if(ct.length===1){let or=Mt?new tr(o[0].shape,La):new Fr(o[0].shape,La);return s.runWebGLProgram(or,o,_)}let Ft=A().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(ct.length>Ft){let or=[];for(let fr=0;fr<ct.length;fr+=Ft){let yr=ct.slice(fr,fr+Ft);or.push(Vc(yr,i,s))}let hr=Vc(or,i,s);for(let fr of or)s.disposeIntermediateTensorInfo(fr);return hr}if(Mt){let or=new Oh(ct.map(hr=>hr.shape),i);return s.runWebGLProgram(or,ct,_)}let{tensors2D:Ut,outShape:Xt}=aJ(ct,i,s),Kt=new Fh(Ut.map(or=>or.shape)),nr=s.runWebGLProgram(Kt,Ut,_);Ut.forEach(or=>s.disposeIntermediateTensorInfo(or));let rr=te({inputs:{x:nr},attrs:{shape:Xt},backend:s});return s.disposeIntermediateTensorInfo(nr),rr}function aJ(o,i,s){let _=w.computeOutShape(o.map(_e=>_e.shape),i);return{tensors2D:o.map(_e=>te({inputs:{x:_e},attrs:{shape:[-1,y.sizeFromShape(_e.shape.slice(i))]},backend:s})),outShape:_}}function vv(o){let{inputs:i,backend:s,attrs:_}=o,{axis:_e}=_,ct=y.parseAxisParam(_e,i[0].shape)[0],Mt=i.map(Xt=>Xt.shape);w.assertParamsConsistent(Mt,ct);let Ft=w.computeOutShape(i.map(Xt=>Xt.shape),ct);if(y.sizeFromShape(Ft)===0)return s.makeTensorInfo(Ft,i[0].dtype,[]);let Ut=i.filter(Xt=>y.sizeFromShape(Xt.shape)>0);return Ut.length===1?Dt$1({inputs:{x:Ut[0]},backend:s}):Vc(Ut,ct,s)}var WA={kernelName:ta,backendName:"webgl",kernelFunc:vv},Wc=class{constructor(o,i=!1,s=null,_=!1,_e=!1){this.variableNames=["x","W"],this.outputShape=o.outShape;let ct=o.padInfo.top,Mt=o.padInfo.left,Ft=o.strideHeight,Ut=o.strideWidth,Xt=o.dilationHeight,Kt=o.dilationWidth,nr=o.filterHeight,rr=o.filterWidth,or=4*Math.floor(o.inChannels/4),hr=o.inChannels%4,fr=o.dataFormat==="channelsLast",yr=fr?1:2,Lr=fr?2:3,Br=fr?3:1,Vr="",Wr="";s&&(Vr=_?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${s}
        }`:_e?`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${s}
        }`:`
          float activation(float x) {
            ${s}
          }
        `,Wr="result = activation(result);");let ro=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),_&&this.variableNames.push("preluActivationWeights"),_e&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${Vr}

      const ivec2 strides = ivec2(${Ft}, ${Ut});
      const ivec2 pads = ivec2(${ct}, ${Mt});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${Br}];

        ivec2 xRCCorner =
            ivec2(coords[${yr}], coords[${Lr}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${nr}; wR++) {
          int xR = xRCorner + wR * ${Xt};

          if (xR < 0 || xR >= ${o.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${rr}; wC++) {
            int xC = xCCorner + wC * ${Kt};

            if (xC < 0 || xC >= ${o.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${or}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${fr}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${hr===1}) {

              if (${fr}) {
                dotProd +=
                    getX(batch, xR, xC, ${or}) *
                    getW(wR, wC, ${or}, d2);
              } else {
                dotProd +=
                    getX(batch, ${or}, xR, xC) *
                    getW(wR, wC, ${or}, d2);
              }

            } else if (${hr===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${or}, d2),
                getW(wR, wC, ${or} + 1, d2)
              );

              if (${fr}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${or}),
                  getX(batch, xR, xC, ${or} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${or}, xR, xC),
                  getX(batch, ${or} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${hr===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${or}, d2),
                getW(wR, wC, ${or} + 1, d2),
                getW(wR, wC, ${or} + 2, d2)
              );

              if (${fr}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${or}),
                  getX(batch, xR, xC, ${or} + 1),
                  getX(batch, xR, xC, ${or} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${or}, xR, xC),
                  getX(batch, ${or} + 1, xR, xC),
                  getX(batch, ${or} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${ro}
        ${Wr}
        setOutput(result);
      }
    `}},Mh=class{constructor(o){this.variableNames=["x","W"],this.outputShape=o.outShape;let i=o.padInfo.front,s=o.padInfo.top,_=o.padInfo.left,_e=o.strideDepth,ct=o.strideHeight,Mt=o.strideWidth,Ft=o.dilationDepth,Ut=o.dilationHeight,Xt=o.dilationWidth,Kt=o.filterDepth,nr=o.filterHeight,rr=o.filterWidth,or=4*Math.floor(o.inChannels/4),hr=o.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${_e}, ${ct}, ${Mt});
      const ivec3 pads = ivec3(${i}, ${s}, ${_});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${Kt}; wF++) {
          int xF = xFCorner + wF * ${Ft};

          if (xF < 0 || xF >= ${o.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${nr}; wR++) {
            int xR = xRCorner + wR * ${Ut};

            if (xR < 0 || xR >= ${o.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${rr}; wC++) {
              int xC = xCCorner + wC * ${Xt};

              if (xC < 0 || xC >= ${o.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${or}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${hr===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${or}) *
                  getW(wF, wR, wC, ${or}, d2);
              } else if (${hr===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${or}),
                  getX(batch, xF, xR, xC, ${or} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${or}, d2),
                  getW(wF, wR, wC, ${or} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${hr===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${or}),
                  getX(batch, xF, xR, xC, ${or} + 1),
                  getX(batch, xF, xR, xC, ${or} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${or}, d2),
                  getW(wF, wR, wC, ${or} + 1, d2),
                  getW(wF, wR, wC, ${or} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}},Uc=class{constructor(o,i=!1,s=null,_=!1,_e=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=o.outShape,this.enableShapeUniforms=ut(this.outputShape.length);let ct=o.padInfo.left,Mt=o.strideWidth,Ft=o.dilationWidth,Ut=o.filterHeight,Xt=o.filterWidth,Kt=Xt,nr=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let fr=0;fr<Xt;fr++)nr+=`
           vec4 xTexelC${2*fr};
           int xTexelC${2*fr}Ready;
           vec4 xTexelC${2*fr+1};
           int xTexelC${2*fr+1}Ready;
           vec4 xC${fr};`;nr+=`
     for (int r = 0; r < ${Ut}; r++) {
      for (int d1 = 0; d1 < ${o.inChannels}; d1 += 2) {
       `;for(let fr=0;fr<Xt;fr++)nr+=`
           xTexelC${2*fr} = vec4(0.0);
           xTexelC${2*fr}Ready = 0;
           xTexelC${2*fr+1} = vec4(0.0);
           xTexelC${2*fr+1}Ready = 0;
           xC${fr} = vec4(0.0);`;nr+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let fr=0;fr<(Kt+1)/2;fr++){let yr=2*fr;if(nr+=`
           xC = xCCorner + ${yr*Ft};
           `,Mt===1){if(yr<Xt&&(ct%2==1?(nr+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${yr}Ready == 0) {
                   xTexelC${yr} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${yr}.zw = vec2(0.0);
                   }
                   xTexelC${yr}Ready = 1;
                 }
               `,nr+=Ft===1&&yr>0?`
                 xC${yr} = vec4(xTexelC${yr-2}.zw, xTexelC${yr}.xy);
                 `:`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${yr} = vec4(previous.zw, xTexelC${yr}.xy);
                   } else {
                     xC${yr} = vec4(0.0, 0.0, xTexelC${yr}.xy);
                   }
                   `):nr+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${yr}Ready == 0) {
                   xTexelC${yr} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${yr}.zw = vec2(0.0);
                   }
                   xTexelC${yr}Ready = 1;
                 }

                 xC${yr} = xTexelC${yr};
                 `,yr+1<Xt)){let Lr=ct%2==0?y.nearestLargerEven(Ft):Ft;Ft%2==0&&ct%2==1||Ft%2!=0&&ct%2!=1?(nr+=`
                   xCOffset = xC + imod(pads[1], 2) + ${Lr};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${yr+1}Ready == 0) {
                     xTexelC${yr+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${yr+1}.zw = vec2(0.0);
                     }
                     xTexelC${yr+1}Ready = 1;
                   }
                   `,nr+=Ft>1?`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${yr+1} = vec4(previous.zw, xTexelC${yr+1}.xy);
                     } else {
                      xC${yr+1} = vec4(0.0, 0.0, xTexelC${yr+1}.xy);
                     }
                     `:`
                     xC${yr+1} = vec4(xTexelC${yr}.zw, xTexelC${yr+1}.xy);
                     `):nr+=Lr===1?`
                     xC${yr+1} = xTexelC${yr};
                     `:`
                     xCOffset = xC + ${Lr};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${yr+1}Ready == 0) {
                       xTexelC${yr+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${yr+1}.zw = vec2(0.0);
                       }
                       xTexelC${yr+1}Ready = 1;
                     }

                     xC${yr+1} = xTexelC${yr+1};
                     `}}else yr<Xt&&(ct%2==1?(nr+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${yr}Ready == 0) {
                   xTexelC${yr} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${yr}.zw = vec2(0.0);
                   }
                   xTexelC${yr}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${yr+1}Ready == 0) {
                   xTexelC${yr+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${yr+1}.zw = vec2(0.0);
                   }
                   xTexelC${yr+1}Ready = 1;
                 }

                 xC${yr} = vec4(xTexelC${yr}.zw, xTexelC${yr+1}.zw);
               `,yr+1<Xt&&(nr+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${yr+1} = vec4(xTexelC${yr+1}.xy, final.xy);
                 `)):(nr+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${yr}Ready == 0) {
                   xTexelC${yr} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${yr}.zw = vec2(0.0);
                   }
                   xTexelC${yr}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${yr+1}Ready == 0) {
                   xTexelC${yr+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${yr+1}.zw = vec2(0.);
                   }
                   xTexelC${yr+1}Ready = 1;
                 }

                 xC${yr} = vec4(
                   xTexelC${yr}.xy, xTexelC${yr+1}.xy);
               `,yr+1<Xt&&(nr+=`
                   xC${yr+1} = vec4(xTexelC${yr}.zw, xTexelC${yr+1}.zw);
                 `)));yr<Xt&&(nr+=`
             wTexel = getW(r, ${yr}, d1, d2);
             dotProd += xC${yr}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${o.inChannels}) {
               dotProd += xC${yr}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,yr+1<Xt&&(nr+=`
               wTexel = getW(r, ${yr+1}, d1, d2);
               dotProd += xC${yr+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${o.inChannels}) {
                 dotProd += xC${yr+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}nr+=`
     }
   `,nr+=`
     }
   `,nr+=`
     }
   `;let rr="",or="";s&&(rr=_?`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${s}
         }`:_e?`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${s}
         }`:`vec4 activation(vec4 x) {
           ${s}
         }`,or="result = activation(result);");let hr=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),_&&this.variableNames.push("preluActivationWeights"),_e&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${rr}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${nr}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${hr}
         ${or}
         setOutput(result);
       }
     `}},Lh=class{constructor(o,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=o,this.enableShapeUniforms=ut(this.outputShape.length);let{dataFormat:s}=i,_=It$1(),_e=s==="channelsLast",ct=_e?1:2,Mt=_e?2:3,Ft=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${o[2]} && pos < ${o[1]}) {`,Ut="";for(let Xt=0;Xt<=1;Xt++)for(let Kt=0;Kt<=1;Kt++)Ut+=`
          blockIndex = rc.z + ${Kt};
          pos = rc.y + ${Xt};

          ${Ft}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${ct}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${Mt}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${_e}) {
                  innerDims = vec2(d1, ch);
                  result[${2*Xt+Kt}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${2*Xt+Kt}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${Ut}

        ${_.output} = result;
      }
    `}};function Bh(o,i){let s=o.length;return s>=3?i?[...o.slice(0,-3),o[s-3]*o[s-2],o[s-1]]:[...o.slice(0,-3),o[s-3],o[s-2]*o[s-1]]:!i&&s===1&&o[0]>1?[o[0],1]:null}function zh({x:o,filter:i,convInfo:s,backend:_,bias:_e=null,preluActivationWeights:ct=null,leakyreluAlpha:Mt=0,activation:Ft=null}){let Ut,Xt=o.shape,Kt=_.texData.get(o.dataId),nr=s.inChannels,rr=Xt[0]*Xt[1]*Xt[2],or=s.outChannels,hr=s.dataFormat==="channelsLast",fr=!1,yr=[];if(ct!=null){let Lr=Bh(ct.shape,hr);Lr!=null&&(ct=te({inputs:{x:ct},backend:_,attrs:{shape:Lr}}),yr.push(ct))}if(_e!=null){let Lr=Bh(_e.shape,hr);Lr!=null&&(_e=te({inputs:{x:_e},backend:_,attrs:{shape:Lr}}),yr.push(_e))}if((rr!==1&&or!==1||!(nr>Cv))&&Kt.isPacked&&hr&&Kt.texture!=null&&Xt[2]%2!=0&&y.arraysEqual(Kt.shape.slice(-3),Xt.slice(-3))){let Lr=Xt[0]*Xt[1]*(Xt[2]+1),Br={dataId:o.dataId,shape:[1,Lr,s.inChannels],dtype:o.dtype},Vr=Kt.shape;Kt.shape=Kt.shape.slice(),Kt.shape[Kt.shape.length-2]++,y.assert(xu(Kt.shape,Br.shape),()=>`packed reshape ${Kt.shape} to ${Br.shape} isn't free`);let Wr=te({inputs:{x:i},backend:_,attrs:{shape:[1,s.inChannels,s.outChannels]}});yr.push(Wr);let ro=Sp({a:Br,b:Wr,backend:_,transposeA:!1,transposeB:fr,bias:_e,activation:Ft,preluActivationWeights:ct,leakyreluAlpha:Mt}),no=_.texData.get(ro.dataId);y.assert(no.isPacked,()=>"batchMatMul result is expected to be packed"),Kt.shape=Vr,no.shape=s.outShape,Ut=Dt$1({inputs:{x:ro},backend:_}),Ut.shape=s.outShape,yr.push(ro)}else{let Lr=s.outHeight*s.outWidth,Br=te({inputs:{x:o},backend:_,attrs:{shape:hr?[s.batchSize,Lr,s.inChannels]:[s.batchSize,s.inChannels,Lr]}}),Vr=te({inputs:{x:i},backend:_,attrs:{shape:[1,s.inChannels,s.outChannels]}}),Wr=Sp({a:hr?Br:Vr,b:hr?Vr:Br,transposeA:!hr,transposeB:fr,backend:_,bias:_e,activation:Ft,preluActivationWeights:ct,leakyreluAlpha:Mt});Ut=te({inputs:{x:Wr},backend:_,attrs:{shape:s.outShape}}),yr.push(Br),yr.push(Vr),yr.push(Wr)}for(let Lr of yr)_.disposeIntermediateTensorInfo(Lr);return Ut}function Vh({x:o,filter:i,convInfo:s,backend:_,bias:_e=null,preluActivationWeights:ct=null,leakyreluAlpha:Mt=0,activation:Ft=null}){let{filterWidth:Ut,filterHeight:Xt,inChannels:Kt,outWidth:nr,outHeight:rr,dataFormat:or}=s,hr=or==="channelsLast",fr=Ut*Xt*Kt,yr=rr*nr,Lr=[s.batchSize,fr,yr],Br=[];if(ct!=null){let Ap=Bh(ct.shape,hr);Ap!=null&&(ct=te({inputs:{x:ct},backend:_,attrs:{shape:Ap}}),Br.push(ct))}if(_e!=null){let Ap=Bh(_e.shape,hr);Ap!=null&&(_e=te({inputs:{x:_e},backend:_,attrs:{shape:Ap}}),Br.push(_e))}let Vr=te({inputs:{x:i},backend:_,attrs:{shape:[1,fr,y.sizeFromShape(i.shape)/fr]}});Br.push(Vr);let Wr=new Lh(Lr,s),ro=[o.shape,[s.padInfo.top,s.padInfo.left],[s.strideHeight,s.strideWidth],[s.dilationHeight,s.dilationWidth],[s.inChannels],[s.filterWidth*s.inChannels],[s.outWidth]],no=_.runWebGLProgram(Wr,[o],"float32",ro),so=te({inputs:{x:no},backend:_,attrs:{shape:Lr}});Br.push(no),Br.push(so);let ko=_e!=null,To=ct!=null,oo=Ft==="leakyrelu",No=Ft?yi(Ft,!0):null,As=new zc(hr?so.shape:Vr.shape,hr?Vr.shape:so.shape,hr?[s.batchSize,yr,s.outChannels]:[s.batchSize,s.outChannels,yr],!0,!1,ko,No,To,oo),Ks=hr?[so,Vr]:[Vr,so];if(_e&&Ks.push(_e),To&&Ks.push(ct),oo){let Ap=_.makeTensorInfo([],"float32",y.createScalarValue(Mt,"float32"));Ks.push(Ap),Br.push(Ap)}let vu=_.runWebGLProgram(As,Ks,"float32"),Fu=te({inputs:{x:vu},backend:_,attrs:{shape:s.outShape}});Br.push(vu);for(let Ap of Br)_.disposeIntermediateTensorInfo(Ap);return Fu}function iJ(o){let i,{inputs:s,backend:_,attrs:_e}=o,{x:ct,filter:Mt}=s,{strides:Ft,pad:Ut,dataFormat:Xt,dilations:Kt,dimRoundingMode:nr}=_e,rr=w.convertConv2DDataFormat(Xt),or=w.computeConv2DInfo(ct.shape,Mt.shape,Ft,Kt,Ut,nr,!1,rr);if(or.filterHeight!==1||or.filterWidth!==1||or.dilationHeight!==1||or.dilationWidth!==1||or.strideHeight!==1||or.strideWidth!==1||or.padInfo.type!=="SAME"&&or.padInfo.type!=="VALID")if(or.strideWidth<=2&&rr==="channelsLast"&&A().getBool("WEBGL_EXP_CONV")){let fr=new Uc(or),yr=[[or.padInfo.top,or.padInfo.left],[or.strideHeight,or.strideWidth],[or.dilationHeight,or.dilationWidth],[or.inHeight,or.inWidth]];i=_.runWebGLProgram(fr,[ct,Mt],"float32",yr)}else if(A().getBool("WEBGL_CONV_IM2COL"))i=Vh({x:ct,filter:Mt,convInfo:or,backend:_});else{let fr=new Wc(or);i=_.runWebGLProgram(fr,[ct,Mt],"float32")}else i=zh({x:ct,filter:Mt,convInfo:or,backend:_});let hr=te({inputs:{x:i},backend:_,attrs:{shape:or.outShape}});return _.disposeIntermediateTensorInfo(i),hr}var UA={kernelName:tn,backendName:"webgl",kernelFunc:iJ},Wh=class{constructor(o){this.variableNames=["x","dy"],this.outputShape=o.filterShape;let i=o.strideHeight,s=o.strideWidth,_=o.padInfo.top,_e=o.padInfo.left,ct=o.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${o.batchSize}; b++) {
          for (int yR = 0; yR < ${o.outHeight}; yR++) {
            int xR = wR + yR * ${i} - ${_};

            if (xR < 0 || xR >= ${o.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${o.outWidth}; yC++) {
              int xC = wC + yC * ${s} - ${_e};

              if (xC < 0 || xC >= ${o.inWidth}) {
                continue;
              }

              ${ct?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}},Uh=class{constructor(o){this.variableNames=["dy","W"],this.outputShape=o.inShape;let i=o.filterHeight,s=o.filterWidth,_=o.strideHeight,_e=o.strideWidth,ct=o.dataFormat==="channelsLast",Mt=i-1-o.padInfo.top,Ft=s-1-o.padInfo.left,Ut=ct?1:2,Xt=ct?2:3,Kt=ct?3:1;this.userCode=`
      const ivec2 pads = ivec2(${Mt}, ${Ft});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${Kt}];

        ivec2 dyCorner = ivec2(coords[${Ut}], coords[${Xt}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${i}; wR++) {
          float dyR = float(dyRCorner + wR) / ${_}.0;

          if (dyR < 0.0 || dyR >= ${o.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${i} - 1 - wR;

          for (int wC = 0; wC < ${s}; wC++) {
            float dyC = float(dyCCorner + wC) / ${_e}.0;

            if (dyC < 0.0 || dyC >= ${o.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${s} - 1 - wC;

            for (int d2 = 0; d2 < ${o.outChannels}; d2++) {

              if (${ct}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}},Gh=class{constructor(o){this.variableNames=["x","dy"],this.outputShape=o.filterShape;let i=o.strideDepth,s=o.strideHeight,_=o.strideWidth,_e=o.padInfo.front,ct=o.padInfo.top,Mt=o.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${o.batchSize}; b++) {
          for (int yF = 0; yF < ${o.outDepth}; yF++) {
            int xF = wF + yF * ${i} - ${_e};

            if (xF < 0 || xF >= ${o.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${o.outHeight}; yR++) {
              int xR = wR + yR * ${s} - ${ct};

              if (xR < 0 || xR >= ${o.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${o.outWidth}; yC++) {
                int xC = wC + yC * ${_} - ${Mt};

                if (xC < 0 || xC >= ${o.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}},Hh=class{constructor(o){this.variableNames=["dy","W"],this.outputShape=o.inShape;let i=o.filterDepth,s=o.filterHeight,_=o.filterWidth,_e=o.strideDepth,ct=o.strideHeight,Mt=o.strideWidth,Ft=i-1-o.padInfo.front,Ut=s-1-o.padInfo.top,Xt=_-1-o.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${Ft}, ${Ut}, ${Xt});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${i}; wF++) {
          float dyF = float(dyFCorner + wF) / ${_e}.0;

          if (dyF < 0.0 || dyF >= ${o.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${i} - 1 - wF;

          for (int wR = 0; wR < ${s}; wR++) {
            float dyR = float(dyRCorner + wR) / ${ct}.0;

            if (dyR < 0.0 || dyR >= ${o.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${s} - 1 - wR;

            for (int wC = 0; wC < ${_}; wC++) {
              float dyC = float(dyCCorner + wC) / ${Mt}.0;

              if (dyC < 0.0 || dyC >= ${o.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${_} - 1 - wC;

              for (int d2 = 0; d2 < ${o.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}};function uJ(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e,dy:ct}=i,{strides:Mt,pad:Ft,dataFormat:Ut,dimRoundingMode:Xt,filterShape:Kt}=_,nr=w.convertConv2DDataFormat(Ut),rr=w.computeConv2DInfo(_e.shape,Kt,Mt,1,Ft,Xt,!1,nr),or=new Wh(rr);return s.runWebGLProgram(or,[_e,ct],"float32")}var GA={kernelName:Fi,backendName:"webgl",kernelFunc:uJ},Kh=class{constructor(o){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=o.inShape,this.enableShapeUniforms=ut(this.outputShape.length);let i=o.filterHeight,s=o.filterWidth,_=i-1-o.padInfo.top,_e=s-1-o.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${_}, ${_e});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${i}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${o.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${i} - 1 - wR;

          for (int wC = 0; wC < ${s}; wC++) {
            int wCPerm = ${s} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${o.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${o.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${o.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${o.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${o.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}};function pJ(o){let{inputs:i,backend:s,attrs:_}=o,{dy:_e,filter:ct}=i,{inputShape:Mt,strides:Ft,pad:Ut,dataFormat:Xt,dimRoundingMode:Kt}=_,nr=w.convertConv2DDataFormat(Xt),rr=w.computeConv2DInfo(Mt,ct.shape,Ft,1,Ut,Kt,!1,nr);if(A().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&nr==="channelsLast"){let or=[[rr.strideHeight,rr.strideWidth]],hr=new Kh(rr);return s.runWebGLProgram(hr,[_e,ct],"float32",or)}{let or=new Uh(rr);return s.runWebGLProgram(or,[_e,ct],"float32")}}var HA={kernelName:rn,backendName:"webgl",kernelFunc:pJ};function cJ(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e,filter:ct}=i,{strides:Mt,pad:Ft,dilations:Ut}=_,Xt=w.computeConv3DInfo(_e.shape,ct.shape,Mt,Ut,Ft),Kt=new Mh(Xt);return s.runWebGLProgram(Kt,[_e,ct],"float32")}var KA={kernelName:on,backendName:"webgl",kernelFunc:cJ};function lJ(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e,dy:ct}=i,{strides:Mt,pad:Ft,filterShape:Ut}=_,Xt=w.computeConv3DInfo(_e.shape,Ut,Mt,1,Ft),Kt=new Gh(Xt);return s.runWebGLProgram(Kt,[_e,ct],"float32")}var qA={kernelName:ja,backendName:"webgl",kernelFunc:lJ};function mJ(o){let{inputs:i,backend:s,attrs:_}=o,{dy:_e,filter:ct}=i,{pad:Mt,strides:Ft,inputShape:Ut}=_,Xt=w.computeConv3DInfo(Ut,ct.shape,Ft,1,Mt),Kt=new Hh(Xt);return s.runWebGLProgram(Kt,[_e,ct],"float32")}var jA={kernelName:nn,backendName:"webgl",kernelFunc:mJ},dJ=Fo+`
  return cos(x);
`,fJ=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${Xr}
  return result;
`,hJ=xe$1({opSnippet:dJ,packedOpSnippet:fJ}),XA={kernelName:sn,backendName:"webgl",kernelFunc:hJ},gJ=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,xJ=xe$1({opSnippet:gJ}),YA={kernelName:an,backendName:"webgl",kernelFunc:xJ},qh=class{constructor(o,i,s,_,_e){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];let[ct,Mt,Ft,Ut]=o,[Xt]=i,[Kt,nr]=s;this.outputShape=[Xt,Kt,nr,Ut];let rr=_==="bilinear"?1:0,[or,hr]=[Mt-1+".0",Ft-1+".0"],[fr,yr,Lr]=Kt>1?[""+(Mt-1)/(Kt-1),"(y2-y1) * height_ratio",`y1*${or} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${or}`],[Br,Vr,Wr]=nr>1?[""+(Ft-1)/(nr-1),"(x2-x1) * width_ratio",`x1*${hr} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${hr}`];this.userCode=`
      const float height_ratio = float(${fr});
      const float width_ratio = float(${Br});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${ct}) {
          return;
        }

        float height_scale = ${yr};
        float width_scale = ${Vr};

        float in_y = ${Lr};
        if( in_y < 0.0 || in_y > ${or} ) {
          setOutput(float(${_e}));
          return;
        }
        float in_x = ${Wr};
        if( in_x < 0.0 || in_x > ${hr} ) {
          setOutput(float(${_e}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${rr} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}},yJ=o=>{let{inputs:i,backend:s,attrs:_}=o,{image:_e,boxes:ct,boxInd:Mt}=i,{cropSize:Ft,method:Ut,extrapolationValue:Xt}=_,Kt=new qh(_e.shape,ct.shape,Ft,Ut,Xt);return s.runWebGLProgram(Kt,[_e,ct,Mt],"float32")},QA={kernelName:cn,backendName:"webgl",kernelFunc:yJ},vp;(function(o){o.Prod="*",o.Sum="+"})(vp||(vp={}));var om=class{constructor(o,i,s,_){this.op=o,this.outputShape=i,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];let _e=this.outputShape.length,ct=this.op===vp.Prod?"1.0":"0.0",Mt=s?ct:`getX(${ZA(_e,"coords",this.op)})`,Ft=this.outputShape[this.outputShape.length-1],Ut="",Xt="";s?(Ut=_?"end != "+(Ft-1):"end != 0",Xt=_?"end + 1":"end - 1"):(Ut=_?`end + pow2 < ${Ft}`:"end >= pow2",Xt=_?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${Re$1(_e)} coords = getOutputCoords();
        int end = ${JA(_e,"coords",this.op)};
        float val = ${Mt};
        int pow2 = int(pow(2.0, index));
        if (${Ut}) {
          int idx = ${Xt};
          ${JA(_e,"coords",this.op)} = idx;
          val ${this.op}= getX(${ZA(_e,"coords",this.op)});
        }
        setOutput(val);
      }
    `}};function ZA(o,i,s){if(o===1)return`${i}`;if(o===2)return`${i}.x, ${i}.y`;if(o===3)return`${i}.x, ${i}.y, ${i}.z`;if(o===4)return`${i}.x, ${i}.y, ${i}.z, ${i}.w`;throw new Error(`Cumulative ${s} for rank ${o} is not yet supported`)}function JA(o,i,s){if(o===1)return`${i}`;if(o===2)return`${i}.y`;if(o===3)return`${i}.z`;if(o===4)return`${i}.w`;throw new Error(`Cumulative ${s} for rank ${o} is not yet supported`)}function jh(o,i,s,_,_e,ct){let Mt=i.shape.length,Ft=w.getAxesPermutation([_],Mt),Ut=i;Ft!=null&&(Ut=bt$2({inputs:{x:i},backend:s,attrs:{perm:Ft}}));let Xt=w.getInnerMostAxes(1,Mt)[0];if(Xt!==Mt-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${i.shape.length-1} but got axis=${_}`);let Kt=Ut.shape[Xt],nr=Dt$1({inputs:{x:Ut},backend:s});for(let rr=0;rr<=Math.ceil(Math.log2(Kt))-1;rr++){let or=new om(o,Ut.shape,!1,ct),hr=[[rr]],fr=nr;nr=s.runWebGLProgram(or,[nr],nr.dtype,hr),s.disposeIntermediateTensorInfo(fr)}if(_e){let rr=new om(o,Ut.shape,_e,ct),or=nr;nr=s.runWebGLProgram(rr,[nr],nr.dtype),s.disposeIntermediateTensorInfo(or)}if(Ft!=null){let rr=bt$2({inputs:{x:nr},backend:s,attrs:{perm:w.getUndoAxesPermutation(Ft)}});return s.disposeIntermediateTensorInfo(nr),s.disposeIntermediateTensorInfo(Ut),rr}return nr}function bJ(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{axis:ct,exclusive:Mt,reverse:Ft}=_;return jh(vp.Prod,_e,s,ct,Mt,Ft)}var eF={kernelName:un,backendName:"webgl",kernelFunc:bJ};function CJ(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{axis:ct,exclusive:Mt,reverse:Ft}=_;return jh(vp.Sum,_e,s,ct,Mt,Ft)}var tF={kernelName:pn,backendName:"webgl",kernelFunc:CJ};function wJ(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e,weights:ct}=i,{size:Mt,binaryOutput:Ft}=_;if(_e.shape.length===1){let Ut=s.readSync(_e.dataId),Xt=s.readSync(ct.dataId),Kt=ph(Ut,Xt,ct.dtype,ct.shape,Mt);return s.makeTensorInfo([Mt],ct.dtype,Kt)}if(_e.shape.length===2){let Ut=s.bufferSync(_e),Xt=s.bufferSync(ct),Kt=BR(Ut,Xt,Mt,Ft);return s.makeTensorInfo(Kt.shape,ct.dtype,Kt.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${_e.shape.length}.`)}var rF={kernelName:ra,backendName:"webgl",kernelFunc:wJ},Xh=class{constructor(o,i,s){this.variableNames=["x"],this.outputShape=[],this.outputShape=o,this.blockSize=i,this.dataFormat=s,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${i};
      int offset_h = imod(h, ${i});
      int in_w = w / ${i};
      int offset_w = imod(w, ${i});
      int offset_d = (offset_h * ${i} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}};function SJ(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{blockSize:ct,dataFormat:Mt}=_,Ft=_e.shape[0],Ut=(Mt==="NHWC"?_e.shape[1]:_e.shape[2])*ct,Xt=(Mt==="NHWC"?_e.shape[2]:_e.shape[3])*ct,Kt=(Mt==="NHWC"?_e.shape[3]:_e.shape[1])/(ct*ct),nr=new Xh(Mt==="NHWC"?[Ft,Ut,Xt,Kt]:[Ft,Kt,Ut,Xt],ct,Mt);return s.runWebGLProgram(nr,[_e],_e.dtype)}var oF={kernelName:ln,backendName:"webgl",kernelFunc:SJ},Gc=class{constructor(o,i=!1,s=null,_=!1,_e=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=o.outShape,this.enableShapeUniforms=ut(this.outputShape.length);let ct=o.filterHeight,Mt=o.filterWidth,Ft=o.outChannels/o.inChannels,Ut="",Xt="";s&&(Ut=_?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${s}
        }`:_e?`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${s}
        }`:`
          float activation(float x) {
            ${s}
          }
        `,Xt="result = activation(result);");let Kt=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),_&&this.variableNames.push("preluActivationWeights"),_e&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${Ut}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${Ft};
        int q = d2 - d1 * ${Ft};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${ct}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${Mt}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${Kt}
        ${Xt}
        setOutput(result);
      }
    `}},Hc=class{constructor(o,i=!1,s=null,_=!1,_e=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=o.outShape,this.enableShapeUniforms=ut(this.outputShape.length);let ct=o.outChannels/o.inChannels,Mt=o.padInfo.left,Ft=o.strideWidth,Ut=o.dilationWidth,Xt=o.filterHeight,Kt=o.filterWidth,nr=Kt,rr=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let yr=0;yr<Kt;yr++)rr+=`
          vec4 xTexelC${2*yr};
          int xTexelC${2*yr}Ready;
          vec4 xTexelC${2*yr+1};
          int xTexelC${2*yr+1}Ready;
          vec4 xC${yr};`;rr+=`
    for (int r = 0; r < ${Xt}; r++) {
      `;for(let yr=0;yr<Kt;yr++)rr+=`
          xTexelC${2*yr} = vec4(0.0);
          xTexelC${2*yr}Ready = 0;
          xTexelC${2*yr+1} = vec4(0.0);
          xTexelC${2*yr+1}Ready = 0;
          xC${yr} = vec4(0.0);`;rr+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let yr=0;yr<(nr+1)/2;yr++){let Lr=2*yr;if(rr+=`
          xC = xCCorner + ${Lr*Ut};
          `,Ft===1){if(Lr<Kt&&(Mt%2==1?(rr+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${Lr}Ready == 0) {
                  xTexelC${Lr} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${Lr}.zw = vec2(0.0);
                  }
                  xTexelC${Lr}Ready = 1;
                }
              `,rr+=Ut===1&&Lr>0?`
                xC${Lr} = vec4(xTexelC${Lr-2}.zw, xTexelC${Lr}.xy);
                `:`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${Lr} = vec4(previous.zw, xTexelC${Lr}.xy);
                  } else {
                    xC${Lr} = vec4(0.0, 0.0, xTexelC${Lr}.xy);
                  }
                  `):rr+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${Lr}Ready == 0) {
                  xTexelC${Lr} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${Lr}.zw = vec2(0.0);
                  }
                  xTexelC${Lr}Ready = 1;
                }

                xC${Lr} = xTexelC${Lr};
                `,Lr+1<Kt)){let Br=Mt%2==0?y.nearestLargerEven(Ut):Ut;Ut%2==0&&Mt%2==1||Ut%2!=0&&Mt%2!=1?(rr+=`
                  xCOffset = xC + imod(pads[1], 2) + ${Br};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${Lr+1}Ready == 0) {
                    xTexelC${Lr+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${Lr+1}.zw = vec2(0.0);
                    }
                    xTexelC${Lr+1}Ready = 1;
                  }
                  `,rr+=Ut>1?`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${Lr+1} = vec4(previous.zw, xTexelC${Lr+1}.xy);
                    } else {
                     xC${Lr+1} = vec4(0.0, 0.0, xTexelC${Lr+1}.xy);
                    }
                    `:`
                    xC${Lr+1} = vec4(xTexelC${Lr}.zw, xTexelC${Lr+1}.xy);
                    `):rr+=Br===1?`
                    xC${Lr+1} = xTexelC${Lr};
                    `:`
                    xCOffset = xC + ${Br};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${Lr+1}Ready == 0) {
                      xTexelC${Lr+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${Lr+1}.zw = vec2(0.0);
                      }
                      xTexelC${Lr+1}Ready = 1;
                    }

                    xC${Lr+1} = xTexelC${Lr+1};
                    `}}else Lr<Kt&&(Mt%2==1?(rr+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${Lr}Ready == 0) {
                  xTexelC${Lr} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${Lr}.zw = vec2(0.0);
                  }
                  xTexelC${Lr}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${Lr+1}Ready == 0) {
                  xTexelC${Lr+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${Lr+1}.zw = vec2(0.0);
                  }
                  xTexelC${Lr+1}Ready = 1;
                }

                xC${Lr} = vec4(xTexelC${Lr}.zw, xTexelC${Lr+1}.zw);
              `,Lr+1<Kt&&(rr+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${Lr+1} = vec4(xTexelC${Lr+1}.xy, final.xy);
                `)):(rr+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${Lr}Ready == 0) {
                  xTexelC${Lr} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${Lr}.zw = vec2(0.0);
                  }
                  xTexelC${Lr}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${Lr+1}Ready == 0) {
                  xTexelC${Lr+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${Lr+1}.zw = vec2(0.);
                  }
                  xTexelC${Lr+1}Ready = 1;
                }

                xC${Lr} = vec4(
                  xTexelC${Lr}.xy, xTexelC${Lr+1}.xy);
              `,Lr+1<Kt&&(rr+=`
                  xC${Lr+1} = vec4(xTexelC${Lr}.zw, xTexelC${Lr+1}.zw);
                `)));Lr<Kt&&(rr+=`
            wTexel = getW(r, ${Lr}, d1, q);
            dotProd += xC${Lr} * vec4(wTexel.xz, wTexel.xz);
          `,Lr+1<Kt&&(rr+=`
              wTexel = getW(r, ${Lr+1}, d1, q);
              dotProd += xC${Lr+1} * vec4(wTexel.xz, wTexel.xz);
            `))}rr+=`
    }
  `,rr+=`
      }
    `;let or="",hr="";s&&(or=_?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${s}
        }`:_e?`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${s}
        }`:`vec4 activation(vec4 x) {
          ${s}
        }`,hr="result = activation(result);");let fr=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),_&&this.variableNames.push("preluActivationWeights"),_e&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${or}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${ct};
        int q = d2 - d1 * ${ct};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${rr}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${fr}
        ${hr}
        setOutput(result);
      }
    `}};function IJ(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e,filter:ct}=i,{strides:Mt,pad:Ft,dilations:Ut,dimRoundingMode:Xt}=_,Kt=Ut;Kt==null&&(Kt=[1,1]),y.assert(w.eitherStridesOrDilationsAreOne(Mt,Kt),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${Mt} and dilations '${Kt}'`);let nr,rr=w.computeConv2DInfo(_e.shape,ct.shape,Mt,Kt,Ft,Xt,!0);nr=A().getBool("WEBGL_PACK_DEPTHWISECONV")&&rr.strideWidth<=2&&rr.outChannels/rr.inChannels==1?new Hc(rr):new Gc(rr);let or=[[rr.padInfo.top,rr.padInfo.left],[rr.strideHeight,rr.strideWidth],[rr.dilationHeight,rr.dilationWidth],[rr.inHeight,rr.inWidth]];return s.runWebGLProgram(nr,[_e,ct],"float32",or)}var nF={kernelName:mn,backendName:"webgl",kernelFunc:IJ},Yh=class{constructor(o){this.variableNames=["x","dy"],this.outputShape=o.filterShape;let i=o.strideHeight,s=o.strideWidth,_=o.padInfo.top,_e=o.padInfo.left,ct=o.outChannels/o.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${ct} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${o.batchSize}; b++) {
          for (int yR = 0; yR < ${o.outHeight}; yR++) {
            int xR = wR + yR * ${i} - ${_};

            if (xR < 0 || xR >= ${o.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${o.outWidth}; yC++) {
              int xC = wC + yC * ${s} - ${_e};

              if (xC < 0 || xC >= ${o.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}},Qh=class{constructor(o){this.variableNames=["dy","W"],this.outputShape=o.inShape;let i=o.filterHeight,s=o.filterWidth,_=o.strideHeight,_e=o.strideWidth,ct=i-1-o.padInfo.top,Mt=s-1-o.padInfo.left,Ft=o.outChannels/o.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${ct}, ${Mt});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${i}; wR++) {
          float dyR = float(dyRCorner + wR) / ${_}.0;

          if (dyR < 0.0 || dyR >= ${o.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${i} - 1 - wR;

          for (int wC = 0; wC < ${s}; wC++) {
            float dyC = float(dyCCorner + wC) / ${_e}.0;

            if (dyC < 0.0 || dyC >= ${o.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${s} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${Ft}; dm++) {
              int d2 = d1 * ${Ft} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}};function vJ(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e,dy:ct}=i,{strides:Mt,dilations:Ft,pad:Ut,dimRoundingMode:Xt,filterShape:Kt}=_,nr=w.computeConv2DInfo(_e.shape,Kt,Mt,Ft,Ut,Xt,!0),rr=new Yh(nr);return s.runWebGLProgram(rr,[_e,ct],"float32")}var sF={kernelName:Pi,backendName:"webgl",kernelFunc:vJ};function kJ(o){let{inputs:i,backend:s,attrs:_}=o,{dy:_e,filter:ct}=i,{strides:Mt,dilations:Ft,pad:Ut,dimRoundingMode:Xt,inputShape:Kt}=_,nr=w.computeConv2DInfo(Kt,ct.shape,Mt,Ft,Ut,Xt,!0),rr=new Qh(nr);return s.runWebGLProgram(rr,[_e,ct],"float32")}var aF={kernelName:Oi,backendName:"webgl",kernelFunc:kJ},Zh=class{constructor(o){this.variableNames=["X"],this.outputShape=[o,o],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}};function NJ(o){let{inputs:i,backend:s}=o,{x:_}=i,_e=[..._.shape,..._.shape],ct=y.sizeFromShape(_.shape),Mt=te({inputs:{x:_},backend:s,attrs:{shape:[ct]}}),Ft=new Zh(ct),Ut=s.runWebGLProgram(Ft,[Mt],Mt.dtype),Xt=te({inputs:{x:Ut},backend:s,attrs:{shape:_e}});return s.disposeIntermediateTensorInfo(Mt),s.disposeIntermediateTensorInfo(Ut),Xt}var iF={kernelName:oa,backendName:"webgl",kernelFunc:NJ},Jh=class{constructor(o){this.variableNames=["x","W"],this.outputShape=o.outShape;let{inHeight:i,inWidth:s,padInfo:_,strideHeight:_e,strideWidth:ct,filterHeight:Mt,filterWidth:Ft,dilationHeight:Ut,dilationWidth:Xt}=o,{top:Kt,left:nr}=_;this.userCode=`
      const ivec2 strides = ivec2(${_e}, ${ct});
      const ivec2 pads = ivec2(${Kt}, ${nr});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${Mt}; h++) {
          int hIn = hBeg + h * ${Ut};

          if (hIn >= 0 && hIn < ${i}) {
            for (int w = 0; w < ${Ft}; w++) {
              int wIn = wBeg + w * ${Xt};

              if (wIn >= 0 && wIn < ${s}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}};function TJ(o){let i,{inputs:s,backend:_,attrs:_e}=o,{x:ct,filter:Mt}=s,{strides:Ft,pad:Ut,dilations:Xt}=_e,Kt=w.computeDilation2DInfo(ct.shape,Mt.shape,Ft,Ut,"NHWC",Xt),nr=new Jh(Kt);i=_.runWebGLProgram(nr,[ct,Mt],"float32");let rr=te({inputs:{x:i},backend:_,attrs:{shape:Kt.outShape}});return _.disposeIntermediateTensorInfo(i),rr}var uF={kernelName:dn,backendName:"webgl",kernelFunc:TJ};function _J(o){let{inputs:i,backend:s,attrs:_}=o,{equation:_e}=_,ct=i,{allDims:Mt,summedDims:Ft,idDims:Ut}=w.decodeEinsumEquation(_e,ct.length);w.checkEinsumDimSizes(Mt.length,Ut,ct);let{path:Xt,steps:Kt}=w.getEinsumComputePath(Ft,Ut),nr=Kt.length,rr=null,or=Mt.length,hr=[];for(let fr=0;fr<nr;++fr){for(let yr of Kt[fr]){let Lr,{permutationIndices:Br,expandDims:Vr}=w.getEinsumPermutation(or,Ut[yr]);w.isIdentityPermutation(Br)?Lr=ct[yr]:(Lr=bt$2({inputs:{x:ct[yr]},backend:s,attrs:{perm:Br}}),hr.push(Lr));let Wr=Lr.shape.slice();for(let ro=0;ro<Vr.length;++ro)Wr.splice(Vr[ro],0,1);y.arraysEqual(Lr.shape,Wr)||(Lr=te({inputs:{x:Lr},backend:s,attrs:{shape:Wr}}),hr.push(Lr)),rr===null?rr=Lr:(rr=tm({inputs:{a:Lr,b:rr},backend:s}),hr.push(rr))}fr<nr-1&&(Xt[fr]>=0&&(rr=wp({inputs:{x:rr},backend:s,attrs:{axis:Xt[fr]-(Mt.length-or),keepDims:!1}}),hr.push(rr)),or--)}for(let fr of hr)fr!==rr&&s.disposeIntermediateTensorInfo(fr);return rr}var pF={kernelName:Bi,backendName:"webgl",kernelFunc:_J},EJ="return (x >= 0.0) ? x : (exp(x) - 1.0);",$J=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,RJ=xe$1({opSnippet:EJ,packedOpSnippet:$J}),cF={kernelName:hn,backendName:"webgl",kernelFunc:RJ},DJ="return (b >= 0.0) ? a : a * (b + 1.0);",AJ=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,FJ=o=>{let{inputs:i,backend:s}=o,{dy:_,y:_e}=i,ct=A().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new jr(AJ,_.shape,_e.shape):new Pr(DJ,_.shape,_e.shape);return s.runWebGLProgram(ct,[_,_e],_.dtype)},lF={kernelName:Xa,backendName:"webgl",kernelFunc:FJ},PJ=`
  return vec4(equal(a, b));
`,OJ="return float(a == b);",MJ=nt$1({opSnippet:OJ,packedOpSnippet:PJ,dtype:"bool",cpuKernelImpl:GR}),mF={kernelName:xn,backendName:"webgl",kernelFunc:MJ},LJ=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${w.ERF_P};
  float a1 = ${w.ERF_A1};
  float a2 = ${w.ERF_A2};
  float a3 = ${w.ERF_A3};
  float a4 = ${w.ERF_A4};
  float a5 = ${w.ERF_A5};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,BJ=xe$1({opSnippet:LJ}),dF={kernelName:gn,backendName:"webgl",kernelFunc:BJ},zJ=Fo+`
  return exp(x);
`,VJ=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,kv=xe$1({opSnippet:zJ,packedOpSnippet:VJ,cpuKernelImpl:HR,dtype:"float32"}),fF={kernelName:yn,backendName:"webgl",kernelFunc:kv};function eg(o){let{inputs:i,attrs:s,backend:_}=o,{dim:_e}=s,{input:ct}=i,Mt=ct.shape.length,Ft=ct.shape.slice(),Ut=_e;return _e<0&&(y.assert(-(Mt+1)<=_e,()=>`Axis must be in the interval [${-(Mt+1)}, ${Mt}]`),Ut=Mt+_e+1),Ft.splice(Ut,0,1),te({inputs:{x:ct},backend:_,attrs:{shape:Ft}})}var hF={kernelName:na,backendName:"webgl",kernelFunc:eg},gF="return exp(x) - 1.0;",WJ=xe$1({opSnippet:gF,packedOpSnippet:gF,cpuKernelImpl:KR}),xF={kernelName:bn,backendName:"webgl",kernelFunc:WJ},nm=class{constructor(o,i,s){this.variableNames=["real","imag"];let _=i[1];this.outputShape=i;let _e,ct=s?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,Mt=s?`${_}.0`:"1.0";if(o==="real")_e="return real * expR - imag * expI;";else{if(o!=="imag")throw new Error(`FFT component must be either "real" or "imag", got ${o}.`);_e="return real * expI + imag * expR;"}this.userCode=`
      const float exponentMultiplier = ${ct};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${_e}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${_});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${_}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${Mt};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}};function tg(o,i,s){let _=s.texData.get(o.dataId),_e=y.sizeFromShape(o.shape),ct=o.shape[o.shape.length-1],Mt=te({inputs:{x:o},backend:s,attrs:{shape:[_e/ct,ct]}}),Ft=Mt.shape,Ut=new nm("real",Ft,i),Xt=new nm("imag",Ft,i),Kt=[{dataId:_.complexTensorInfos.real.dataId,dtype:_.complexTensorInfos.real.dtype,shape:Ft},{dataId:_.complexTensorInfos.imag.dataId,dtype:_.complexTensorInfos.imag.dtype,shape:Ft}],nr=s.runWebGLProgram(Ut,Kt,"float32"),rr=s.runWebGLProgram(Xt,Kt,"float32"),or=Or({inputs:{real:nr,imag:rr},backend:s});s.disposeIntermediateTensorInfo(nr),s.disposeIntermediateTensorInfo(rr);let hr=te({inputs:{x:or},backend:s,attrs:{shape:o.shape}});return s.disposeIntermediateTensorInfo(Mt),s.disposeIntermediateTensorInfo(or),hr}function UJ(o){let{inputs:i,backend:s}=o,{input:_}=i;return tg(_,!1,s)}var yF={kernelName:zi,backendName:"webgl",kernelFunc:UJ},rg=class{constructor(o,i){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=o,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}};function Ci(o){let{backend:i,attrs:s}=o,{shape:_,value:_e}=s,{dtype:ct}=s;if(ct=ct||y.inferDtype(_e),ct==="string"){let Mt=y.getArrayFromDType(ct,y.sizeFromShape(_));return Mt.fill(_e),i.makeTensorInfo(_,ct,Mt)}{let Mt=new rg(_,_e),Ft=[[_e]];return i.runWebGLProgram(Mt,[],ct,Ft)}}var bF={kernelName:sa,backendName:"webgl",kernelFunc:Ci},og=class{constructor(o){this.variableNames=["Image"],this.outputShape=[];let i=o[2];this.outputShape=o,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${i} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${i}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}},CF={kernelName:Cn,backendName:"webgl",kernelFunc:({inputs:o,backend:i})=>{let{image:s}=o,_=i,_e=new og(s.shape);return _.runWebGLProgram(_e,[s],s.dtype)}},wF="return floor(x);",GJ=xe$1({opSnippet:wF,packedOpSnippet:wF,cpuKernelImpl:qR}),SF={kernelName:wn,backendName:"webgl",kernelFunc:GJ},HJ=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,KJ=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,qJ=nt$1({opSnippet:HJ,packedOpSnippet:KJ,dtype:"int32"}),IF={kernelName:Sn,backendName:"webgl",kernelFunc:qJ},ng=class{constructor(o){this.variableNames=["A"];let i=It$1(),[s,_]=o;this.outputShape=o,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${_}.0, ${s}.0);

        vec4 values = ${i.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}},sg=class{constructor(o){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;let i=It$1(),[s,_]=o;this.outputShape=o,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${_}.0, ${s}.0);
            vec4 values = ${i.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${i.output} = result;
      }
    `}},vF={kernelName:Du,backendName:"webgl",kernelFunc:jJ},Kc,Nv=A().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function jJ(o){let{inputs:i,backend:s,attrs:_}=o,{pixels:_e}=i,{numChannels:ct}=_,Mt=typeof HTMLVideoElement<"u"&&_e instanceof HTMLVideoElement,Ft=typeof HTMLImageElement<"u"&&_e instanceof HTMLImageElement,[Ut,Xt]=Mt?[_e.videoWidth,_e.videoHeight]:[_e.width,_e.height],Kt=[Xt,Ut],nr=[Xt,Ut,ct];if(Ft||Mt){let fr=A().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(Kc==null||fr!==Nv)&&(Nv=fr,Kc=document.createElement("canvas").getContext("2d",{willReadFrequently:Nv})),Kc.canvas.width=Ut,Kc.canvas.height=Xt,Kc.drawImage(_e,0,0,Ut,Xt),_e=Kc.canvas}let rr=s.makeTensorInfo(Kt,"int32");s.texData.get(rr.dataId).usage=mr.PIXELS,s.gpgpu.uploadPixelDataToTexture(s.getTexture(rr.dataId),_e);let or=A().getBool("WEBGL_PACK")?new sg(nr):new ng(nr),hr=s.runWebGLProgram(or,[rr],"int32");return s.disposeData(rr.dataId),hr}function XJ(o){let i,{inputs:s,backend:_,attrs:_e}=o,{x:ct,filter:Mt,bias:Ft,preluActivationWeights:Ut}=s,{strides:Xt,pad:Kt,dataFormat:nr,dilations:rr,dimRoundingMode:or,activation:hr,leakyreluAlpha:fr}=_e,yr=w.convertConv2DDataFormat(nr),Lr=w.computeConv2DInfo(ct.shape,Mt.shape,Xt,rr,Kt,or,!1,yr),Br=[],Vr=Ft!=null,Wr=Ut!=null,ro=hr==="leakyrelu",no=()=>{let ko=[ct,Mt],To=(oo,No)=>{if(No==="NCHW"&&oo.shape.length===1&&oo.shape[0]!==1){let As=te({inputs:{x:oo},backend:_,attrs:{shape:[oo.shape[0],1,1]}});return Br.push(As),As}return oo};if(Vr&&ko.push(To(Ft,nr)),Wr&&ko.push(To(Ut,nr)),ro){let oo=_.makeTensorInfo([],"float32",y.createScalarValue(fr,"float32"));ko.push(oo),Br.push(oo)}return ko};if(Lr.filterHeight!==1||Lr.filterWidth!==1||Lr.dilationHeight!==1||Lr.dilationWidth!==1||Lr.strideHeight!==1||Lr.strideWidth!==1||Lr.padInfo.type!=="SAME"&&Lr.padInfo.type!=="VALID")if(Lr.strideWidth<=2&&yr==="channelsLast"&&A().getBool("WEBGL_EXP_CONV")){let ko=hr?yi(hr,!0):null,To=new Uc(Lr,Vr,ko,Wr,ro),oo=[[Lr.padInfo.top,Lr.padInfo.left],[Lr.strideHeight,Lr.strideWidth],[Lr.dilationHeight,Lr.dilationWidth],[Lr.inHeight,Lr.inWidth]],No=no();i=_.runWebGLProgram(To,No,"float32",oo)}else if(A().getBool("WEBGL_CONV_IM2COL"))i=Vh({x:ct,filter:Mt,convInfo:Lr,backend:_,bias:Ft,activation:hr,preluActivationWeights:Ut,leakyreluAlpha:fr});else{let ko=hr?yi(hr,!1):null,To=new Wc(Lr,Vr,ko,Wr,ro),oo=no();i=_.runWebGLProgram(To,oo,"float32")}else i=zh({x:ct,filter:Mt,convInfo:Lr,backend:_,bias:Ft,activation:hr,preluActivationWeights:Ut,leakyreluAlpha:fr});let so=te({inputs:{x:i},backend:_,attrs:{shape:Lr.outShape}});return Br.push(i),Br.forEach(ko=>_.disposeIntermediateTensorInfo(ko)),so}var kF={kernelName:Io,backendName:"webgl",kernelFunc:XJ};function YJ(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e,filter:ct,bias:Mt,preluActivationWeights:Ft}=i,{strides:Ut,pad:Xt,dilations:Kt,dimRoundingMode:nr,activation:rr,leakyreluAlpha:or}=_,hr=[],fr=Kt;fr==null&&(fr=[1,1]),y.assert(w.eitherStridesOrDilationsAreOne(Ut,fr),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${Ut} and dilations '${fr}'`);let yr,Lr=w.computeConv2DInfo(_e.shape,ct.shape,Ut,fr,Xt,nr,!0),Br=A().getBool("WEBGL_PACK_DEPTHWISECONV")&&Lr.strideWidth<=2&&Lr.outChannels/Lr.inChannels==1,Vr=rr?yi(rr,Br):null,Wr=[_e,ct],ro=Mt!=null,no=Ft!=null,so=rr==="leakyrelu";if(ro&&Wr.push(Mt),no&&Wr.push(Ft),so){let oo=s.makeTensorInfo([],"float32",y.createScalarValue(or,"float32"));Wr.push(oo),hr.push(oo)}yr=Br?new Hc(Lr,ro,Vr,no,so):new Gc(Lr,ro,Vr,no,so);let ko=[[Lr.padInfo.top,Lr.padInfo.left],[Lr.strideHeight,Lr.strideWidth],[Lr.dilationHeight,Lr.dilationWidth],[Lr.inHeight,Lr.inWidth]],To=s.runWebGLProgram(yr,Wr,"float32",ko);return hr.forEach(oo=>s.disposeIntermediateTensorInfo(oo)),To}var NF={kernelName:vo,backendName:"webgl",kernelFunc:YJ},ag=class{constructor(o,i,s,_){this.sliceDim=o,this.strides=i,this.paramsShape=_,this.variableNames=["x","indices"],this.outputShape=s;let _e=Re$1(s.length),ct=`
    int index;`;for(let Mt=0;Mt<this.sliceDim;Mt++)ct+=`
          index = round(getIndices(coords[0], ${Mt}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[Mt]};
          flattenIndex += index * ${this.strides[Mt]};`;this.userCode=`
         void main() {
          ${_e} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${ct}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}};function QJ(o){let{inputs:i,backend:s}=o,{params:_,indices:_e}=i,ct=_e.shape,Mt=ct[ct.length-1],Ft=y.sizeFromShape(_.shape),[Ut,Xt,Kt,nr]=w.prepareAndValidate(_,_e),rr=te({inputs:{x:_e},backend:s,attrs:{shape:[Xt,Mt]}}),or=te({inputs:{x:_},backend:s,attrs:{shape:[y.sizeFromShape(_.shape)/Kt,Kt]}});if(s.shouldExecuteOnCPU([_,_e])||_.dtype==="string"){let Lr=s.readSync(_e.dataId),Br=s.bufferSync(_),Vr=jR(Lr,Br,_.dtype,Xt,Mt,Kt,nr,_.shape,Ft);return s.makeTensorInfo(Ut,_.dtype,Vr.values)}let hr=new ag(Mt,nr,[Xt,Kt],_.shape),fr=s.runWebGLProgram(hr,[or,rr],or.dtype),yr=te({inputs:{x:fr},backend:s,attrs:{shape:Ut}});return s.disposeIntermediateTensorInfo(rr),s.disposeIntermediateTensorInfo(or),s.disposeIntermediateTensorInfo(fr),yr}var TF={kernelName:vn,backendName:"webgl",kernelFunc:QJ},ig=class{constructor(o,i){this.variableNames=["A","indices"],this.outputShape=i,this.rank=i.length;let s=Re$1(this.rank),_=ZJ(o);this.userCode=`
      void main() {
        ${s} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${o[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${_}));
      }
    `}};function ZJ(o,i){let s=["resRC.x","resRC.y","resRC.z","resRC.w"],_=[];for(let _e=0;_e<o.length;_e++)_e===2?_.push("index"):_.push(`${s[_e]}`);return _.join()}function Tv(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e,indices:ct}=i,{axis:Mt,batchDims:Ft}=_,Ut=y.parseAxisParam(Mt,_e.shape)[0];if(A().get("DEBUG")){let Br=s.readSync(ct.dataId),Vr=_e.shape[Ut];for(let Wr=0;Wr<Br.length;++Wr){let ro=Br[Wr];y.assert(ro<=Vr-1&&ro>=0,()=>`GatherV2: the index value ${ro} is not in [0, ${Vr-1}]`)}}let Xt=w.segment_util.collectGatherOpShapeInfo(_e,ct,Ut,Ft),Kt=y.sizeFromShape(ct.shape),nr=[],rr=te({inputs:{x:_e},backend:s,attrs:{shape:[Xt.batchSize,Xt.outerSize,Xt.dimSize,Xt.sliceSize]}}),or=te({inputs:{x:ct},backend:s,attrs:{shape:[Xt.batchSize,Kt/Xt.batchSize]}});nr.push(rr),nr.push(or);let hr=[Xt.batchSize,Xt.outerSize,Kt/Xt.batchSize,Xt.sliceSize];if(s.shouldExecuteOnCPU([_e,ct])||_e.dtype==="string"){let Br=s.bufferSync(or),Vr=s.bufferSync(rr),Wr=XR(Vr,Br,hr);return nr.forEach(ro=>s.disposeIntermediateTensorInfo(ro)),s.makeTensorInfo(Xt.outputShape,Wr.dtype,Wr.values)}let fr=new ig(rr.shape,hr),yr=s.runWebGLProgram(fr,[rr,or],rr.dtype);nr.push(yr);let Lr=te({inputs:{x:yr},backend:s,attrs:{shape:Xt.outputShape}});return nr.forEach(Br=>s.disposeIntermediateTensorInfo(Br)),Lr}var _F={kernelName:aa,backendName:"webgl",kernelFunc:Tv},JJ="return float(a > b);",eee=`
  return vec4(greaterThan(a, b));
`,tee=nt$1({opSnippet:JJ,packedOpSnippet:eee,cpuKernelImpl:YR,dtype:"bool"}),EF={kernelName:kn,backendName:"webgl",kernelFunc:tee},ree="return float(a >= b);",oee=`
  return vec4(greaterThanEqual(a, b));
`,nee=nt$1({opSnippet:ree,packedOpSnippet:oee,dtype:"bool",cpuKernelImpl:QR}),$F={kernelName:Nn,backendName:"webgl",kernelFunc:nee};function see(o){let{inputs:i,backend:s}=o,{input:_}=i;return tg(_,!0,s)}var RF={kernelName:Vi,backendName:"webgl",kernelFunc:see},aee="return float(!isnan(x) && !isinf(x));",iee=xe$1({opSnippet:aee,dtype:"bool"}),DF={kernelName:Tn,backendName:"webgl",kernelFunc:iee},uee="return float(isinf(x));",pee=xe$1({opSnippet:uee,dtype:"bool"}),AF={kernelName:_n,backendName:"webgl",kernelFunc:pee},cee="return float(isnan(x));",lee=xe$1({opSnippet:cee,dtype:"bool"}),FF={kernelName:En,backendName:"webgl",kernelFunc:lee},mee="return float(a < b);",dee=`
  return vec4(lessThan(a, b));
`,fee=nt$1({opSnippet:mee,packedOpSnippet:dee,cpuKernelImpl:ZR,dtype:"bool"}),PF={kernelName:Rn,backendName:"webgl",kernelFunc:fee},hee="return float(a <= b);",gee=`
  return vec4(lessThanEqual(a, b));
`,xee=nt$1({opSnippet:hee,packedOpSnippet:gee,cpuKernelImpl:JR,dtype:"bool"}),OF={kernelName:Dn,backendName:"webgl",kernelFunc:xee};function yee(o){let{backend:i,attrs:s}=o,{start:_,stop:_e,num:ct}=s,Mt=eD(_,_e,ct);return i.makeTensorInfo([Mt.length],"float32",Mt)}var MF={kernelName:An,backendName:"webgl",kernelFunc:yee},bee=Fo+`
  return x < 0.0 ? 0./0. : log(x);
`,Cee=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,wee=xe$1({opSnippet:bee,packedOpSnippet:Cee,cpuKernelImpl:tD}),LF={kernelName:Fn,backendName:"webgl",kernelFunc:wee},See=Fo+`
  return log(1.0 + x);
`,Iee=xe$1({opSnippet:See}),BF={kernelName:Pn,backendName:"webgl",kernelFunc:Iee},vee="return float(a >= 1.0 && b >= 1.0);",kee=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,Nee=nt$1({opSnippet:vee,packedOpSnippet:kee,dtype:"bool"}),zF={kernelName:On,backendName:"webgl",kernelFunc:Nee},Tee="return float(!(x >= 1.0));",_ee=xe$1({opSnippet:Tee}),VF={kernelName:Mn,backendName:"webgl",kernelFunc:_ee},Eee="return float(a >= 1.0 || b >= 1.0);",$ee=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,Ree=nt$1({opSnippet:Eee,packedOpSnippet:$ee,dtype:"bool"}),WF={kernelName:Ln,backendName:"webgl",kernelFunc:Ree},ug=class{constructor(o,i,s,_,_e){this.variableNames=["x"],this.outputShape=[];let ct=i,Mt=o[3]-1;this.outputShape=o;let Ft,Ut=`float(${s}) + float(${_}) * sum`;Ft=_e===.5?`inversesqrt(${Ut})`:_e===1?`1.0/(${Ut})`:`exp(log(${Ut}) * float(-${_e}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${ct}; j <= ${ct}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${Mt}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${Ft};
        setOutput(val);
      }
    `}},pg=class{constructor(o,i,s,_,_e){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;let ct=i,Mt=o[3]-1;this.outputShape=o;let Ft,Ut=`float(${s}) + float(${_}) * sum`;Ft=_e===.5?`inversesqrt(${Ut})`:_e===1?`1.0/(${Ut})`:`exp(log(${Ut}) * float(-${_e}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${ct};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${ct}; j <= ${ct}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${Mt}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${Ft};
        setOutput(result);
      }
    `}},Dee=o=>{let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{depthRadius:ct,bias:Mt,alpha:Ft,beta:Ut}=_,Xt=A().getBool("WEBGL_PACK_NORMALIZATION")?new pg(_e.shape,ct,Mt,Ft,Ut):new ug(_e.shape,ct,Mt,Ft,Ut);return s.runWebGLProgram(Xt,[_e],_e.dtype)},UF={kernelName:Bn,backendName:"webgl",kernelFunc:Dee},cg=class{constructor(o,i,s,_,_e){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=o,this.depth=o[3],this.depthRadius=i,this.bias=s,this.alpha=_,this.beta=_e,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${i})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${i} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${_}) * norm + float(${s});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${_})
                * float(${_e})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${_e});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}},Aee=o=>{let{inputs:i,backend:s,attrs:_}=o,{x:_e,y:ct,dy:Mt}=i,{depthRadius:Ft,bias:Ut,alpha:Xt,beta:Kt}=_,nr=new cg(_e.shape,Ft,Ut,Xt,Kt);return s.runWebGLProgram(nr,[_e,ct,Mt],_e.dtype)},GF={kernelName:Ya,backendName:"webgl",kernelFunc:Aee};function HF(o,i,s,_){let _e=y.sizeFromShape(i),ct=te({inputs:{x:o},attrs:{shape:[y.sizeFromShape(o.shape)/_e,_e]},backend:_}),Mt=Yr(ct,o.dtype,"max",_),Ft=te({inputs:{x:Mt},attrs:{shape:s},backend:_});return _.disposeIntermediateTensorInfo(ct),_.disposeIntermediateTensorInfo(Mt),Ft}function _v(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{reductionIndices:ct,keepDims:Mt}=_,Ft=_e.shape.length,Ut=y.parseAxisParam(ct,_e.shape),Xt=Ut,Kt=w.getAxesPermutation(Xt,Ft),nr=Kt!=null,rr=s.shouldExecuteOnCPU([_e]),or=_e;if(nr){if(rr){let Br=s.texData.get(or.dataId).values,Vr=new Array(Ft);for(let ro=0;ro<Vr.length;ro++)Vr[ro]=_e.shape[Kt[ro]];let Wr=Cp(Br,_e.shape,_e.dtype,Kt,Vr);or=s.makeTensorInfo(Vr,_e.dtype),s.texData.get(or.dataId).values=Wr}else or=yu(_e,Kt,s);Xt=w.getInnerMostAxes(Xt.length,Ft)}w.assertAxesAreInnerMostDims("max",Xt,Ft);let hr,[fr,yr]=w.computeOutAndReduceShapes(or.shape,Xt),Lr=fr;if(Mt&&(Lr=w.expandShapeToKeepDim(fr,Ut)),rr){let Br=s.texData.get(or.dataId).values,Vr=rD(Br,y.sizeFromShape(yr),Lr,_e.dtype);hr=s.makeTensorInfo(Lr,_e.dtype),s.texData.get(hr.dataId).values=Vr}else hr=HF(or,yr,Lr,s);return nr&&s.disposeIntermediateTensorInfo(or),hr}var KF={kernelName:zn,backendName:"webgl",kernelFunc:_v},Fee=Bc+`
  return max(a, b);
`,Pee=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Xr+`
  return result;
`,Oee=nt$1({opSnippet:Fee,packedOpSnippet:Pee,cpuKernelImpl:oD}),qF={kernelName:Vn,backendName:"webgl",kernelFunc:Oee};function Mee(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i;Vs(_e,"maxPool");let{filterSize:ct,strides:Mt,pad:Ft,dimRoundingMode:Ut}=_;y.assert(w.eitherStridesOrDilationsAreOne(Mt,1),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${Mt} and dilations '1'`);let Xt=w.computePool2DInfo(_e.shape,ct,Mt,1,Ft,Ut);if(Xt.filterWidth===1&&Xt.filterHeight===1&&y.arraysEqual(Xt.inShape,Xt.outShape))return Dt$1({inputs:{x:_e},backend:s});let Kt=new Us(Xt,"max",!1);return s.runWebGLProgram(Kt,[_e],_e.dtype)}var jF={kernelName:Wn,backendName:"webgl",kernelFunc:Mee};function Lee(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{filterSize:ct,strides:Mt,pad:Ft,dataFormat:Ut,dimRoundingMode:Xt}=_,Kt=w.computePool3DInfo(_e.shape,ct,Mt,[1,1,1],Ft,Xt,Ut),nr=new bu(Kt,"max",!1);return s.runWebGLProgram(nr,[_e],_e.dtype)}var XF={kernelName:ia,backendName:"webgl",kernelFunc:Lee},lg=class{constructor(o){this.variableNames=["dy","maxPos"],this.outputShape=o.inShape;let i=o.strideHeight,s=o.strideWidth,_=o.dilationHeight,_e=o.effectiveFilterHeight,ct=o.effectiveFilterWidth,Mt=_e-1-o.padInfo.top,Ft=ct-1-o.padInfo.left,Ut=_e*ct-1;this.userCode=`
      const ivec2 pads = ivec2(${Mt}, ${Ft});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${_e};
          wR += ${_}) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${o.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${ct}; wC++) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${o.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${Ut} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${ct} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}},mg=class{constructor(o){this.variableNames=["dy","maxPos"],this.outputShape=o.inShape;let i=o.strideDepth,s=o.strideHeight,_=o.strideWidth,_e=o.dilationDepth,ct=o.dilationHeight,Mt=o.dilationWidth,Ft=o.effectiveFilterDepth,Ut=o.effectiveFilterHeight,Xt=o.effectiveFilterWidth,Kt=Ft-1-o.padInfo.front,nr=Ut-1-o.padInfo.top,rr=Xt-1-o.padInfo.left,or=Ft*Ut*Xt-1;this.userCode=`
      const ivec3 pads = ivec3(${Kt}, ${nr}, ${rr});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${Ft};
           wD += ${_e}) {
          float dyD = float(dyDCorner + wD) / ${i}.0;

          if (dyD < 0.0 || dyD >= ${o.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${Ut};
              wR += ${ct}) {
            float dyR = float(dyRCorner + wR) / ${s}.0;

            if (dyR < 0.0 || dyR >= ${o.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${Xt};
                wC += ${Mt}) {
              float dyC = float(dyCCorner + wC) / ${_}.0;

              if (dyC < 0.0 || dyC >= ${o.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${or} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${Ut} * ${Xt} +
                  wR * ${Xt} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}};function Bee(o){let{inputs:i,backend:s,attrs:_}=o,{dy:_e,input:ct}=i,Mt=ct,{filterSize:Ft,strides:Ut,pad:Xt,dimRoundingMode:Kt}=_,nr=w.computePool3DInfo(Mt.shape,Ft,Ut,[1,1,1],Xt,Kt),rr=new bu(nr,"max",!0),or=s.runWebGLProgram(rr,[Mt],Mt.dtype),hr=new mg(nr),fr=s.runWebGLProgram(hr,[_e,or],Mt.dtype);return s.disposeIntermediateTensorInfo(or),fr}var YF={kernelName:Gi,backendName:"webgl",kernelFunc:Bee};function zee(o){let{inputs:i,backend:s,attrs:_}=o,{dy:_e,input:ct,output:Mt}=i,Ft=ct;Vs([ct,Mt],"maxPoolGrad");let{filterSize:Ut,strides:Xt,pad:Kt,dimRoundingMode:nr}=_,rr=w.computePool2DInfo(Ft.shape,Ut,Xt,1,Kt,nr),or=new Us(rr,"max",!0),hr=s.runWebGLProgram(or,[Ft],Ft.dtype),fr=new lg(rr),yr=s.runWebGLProgram(fr,[_e,hr],Ft.dtype);return s.disposeIntermediateTensorInfo(hr),yr}var QF={kernelName:Ui,backendName:"webgl",kernelFunc:zee};function ZF(o,i,s,_){let _e=new Us(s,"max",!1),ct=_.runWebGLProgram(_e,[o],"float32");return _e=new Us(s,"max",!0,!0,i),[ct,_.runWebGLProgram(_e,[o],"float32")]}var JF={kernelName:ua,backendName:"webgl",kernelFunc:({inputs:o,attrs:i,backend:s})=>{let{x:_}=o,{filterSize:_e,strides:ct,pad:Mt,includeBatchInIndex:Ft}=i,Ut=s;y.assert(_.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${_.shape.length}.`);let Xt=[1,1];y.assert(w.eitherStridesOrDilationsAreOne(ct,Xt),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${ct} and dilations '${Xt}'`);let Kt=w.computePool2DInfo(_.shape,_e,ct,Xt,Mt),[nr,rr]=ZF(_,Ft,Kt,Ut);return[nr,rr]}};function e3(o,i,s,_){let _e=y.sizeFromShape(i),ct=te({inputs:{x:o},attrs:{shape:[y.sizeFromShape(o.shape)/_e,_e]},backend:_}),Mt=Yr(ct,"float32","mean",_),Ft=te({inputs:{x:Mt},attrs:{shape:s},backend:_});return _.disposeIntermediateTensorInfo(ct),_.disposeIntermediateTensorInfo(Mt),Ft}var t3={kernelName:Un,backendName:"webgl",kernelFunc:({inputs:o,attrs:i,backend:s})=>{let{x:_}=o,{keepDims:_e,axis:ct}=i,Mt=s,Ft=_.shape.length,Ut=y.parseAxisParam(ct,_.shape),Xt=Ut,Kt=w.getAxesPermutation(Xt,Ft),nr=Kt!=null,rr=Mt.shouldExecuteOnCPU([_]),or=[],hr=_;if(nr){if(rr){let Vr=Mt.texData.get(hr.dataId).values,Wr=new Array(Ft);for(let no=0;no<Wr.length;no++)Wr[no]=_.shape[Kt[no]];let ro=Cp(Vr,_.shape,_.dtype,Kt,Wr);hr=Mt.makeTensorInfo(Wr,_.dtype),Mt.texData.get(hr.dataId).values=ro}else hr=yu(_,Kt,Mt);or.push(hr),Xt=w.getInnerMostAxes(Xt.length,Ft)}w.assertAxesAreInnerMostDims("sum",Xt,Ft);let[fr,yr]=w.computeOutAndReduceShapes(hr.shape,Xt),Lr=fr;_e&&(Lr=w.expandShapeToKeepDim(fr,Ut));let Br=e3(hr,yr,Lr,Mt);for(let Vr of or)Mt.disposeIntermediateTensorInfo(Vr);return Br}};function Vee(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{axis:ct,keepDims:Mt}=_,Ft=_e.shape.length,Ut=y.parseAxisParam(ct,_e.shape),Xt=Ut,Kt=w.getAxesPermutation(Xt,Ft),nr=_e;Kt!=null&&(nr=bt$2({inputs:{x:_e},backend:s,attrs:{perm:Kt}}),Xt=w.getInnerMostAxes(Xt.length,_e.shape.length)),w.assertAxesAreInnerMostDims("min",Xt,Ft);let rr,[or,hr]=w.computeOutAndReduceShapes(nr.shape,Xt),fr=te({inputs:{x:nr},backend:s,attrs:{shape:[-1,y.sizeFromShape(hr)]}}),yr=Yr(fr,fr.dtype,"min",s);return Mt?rr=te({inputs:{x:yr},backend:s,attrs:{shape:w.expandShapeToKeepDim(or,Ut)}}):rr=te({inputs:{x:yr},backend:s,attrs:{shape:or}}),s.disposeIntermediateTensorInfo(fr),s.disposeIntermediateTensorInfo(yr),Kt!=null&&s.disposeIntermediateTensorInfo(nr),rr}var r32={kernelName:Gn,backendName:"webgl",kernelFunc:Vee},Wee=Bc+`
  return min(a, b);
`,Uee=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Xr+`
  return result;
`,Gee=nt$1({opSnippet:Wee,packedOpSnippet:Uee,cpuKernelImpl:nD}),o3={kernelName:Hn,backendName:"webgl",kernelFunc:Gee},dg=class{constructor(o,i,s){this.variableNames=["x"],this.outputShape=i.map((Xt,Kt)=>Xt[0]+o[Kt]+Xt[1]);let _=o.length,_e=Re$1(_),ct=i.map(Xt=>Xt[0]).join(","),Mt=i.map((Xt,Kt)=>Xt[0]+o[Kt]).join(","),Ft=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,_),Ut=s==="reflect"?0:1;this.userCode=_!==1?`
      ${_e} start = ${_e}(${ct});
      ${_e} end = ${_e}(${Mt});

      void main() {
        ${_e} outC = getOutputCoords();
        for (int i = 0; i < ${_}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${Ut};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${Ut};
          }
        }
        ${_e} coords = outC - start;
        setOutput(getX(${Ft}));
      }
    `:`
        int start = ${ct};
        int end = ${Mt};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${Ut};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${Ut};
          }
          setOutput(getX(outC - start));
        }
      `}},fg=class{constructor(o,i,s){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=i.map((or,hr)=>or[0]+o[hr]+or[1]);let _=o.length,_e=Re$1(_),ct=i.map(or=>or[0]).join(","),Mt=i.map((or,hr)=>or[0]+o[hr]).join(","),Ft=Rt$1("rc",_),Ut=Rt$1("source",_),Xt=`${Ft[_-1]} < ${this.outputShape[_-1]}`,Kt=_===1?"source":`vec2(${Ut.slice(-2).join()})`,nr=s==="reflect"?0:1,rr="";if(_===1){let or=`
        ${_e} source = rc;
        if (source < start) {
          source = start * 2 - source - ${nr};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${nr};
        }
        source -= start;
      `;rr=`
        ${_e} rc = outputLoc;
        ${or}
        result[0] = getChannel(getX(${Ut.join()}), ${Kt});
        ${Ft[_-1]} += 1;
        if(${Xt}) {
          ${or}
          result[1] = getChannel(getX(${Ut.join()}), ${Kt});
        }
      `}else{let or=`
        ${_e} source = rc;
        ${_e} lt = ${_e}(lessThan(source, start));
        ${_e} gte = ${_e}(greaterThanEqual(source, end));
        ${_e} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${nr}) +
                gte * ((end - 1) * 2 - source + ${nr});
        source -= start;
      `;rr=`
        ${_e} rc = outputLoc;
        ${or}
        result[0] = getChannel(getX(${Ut.join()}), ${Kt});
        ${Ft[_-1]} += 1;
        if(${Xt}) {
          ${or}
          result[1] = getChannel(getX(${Ut.join()}), ${Kt});
        }
        rc = outputLoc;
        ${Ft[_-2]} += 1;
        if(${Ft[_-2]} < ${this.outputShape[_-2]}) {
          ${or}
          result[2] = getChannel(getX(${Ut.join()}), ${Kt});
          ${Ft[_-1]} += 1;
          if(${Xt}) {
            ${or}
            result[3] = getChannel(getX(${Ut.join()}), ${Kt});
          }
        }
      `}this.userCode=`
      const ${_e} start = ${_e}(${ct});
      const ${_e} end = ${_e}(${Mt});

      void main() {
        ${_e} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${rr}
        setOutput(result);
      }
    `}},Hee=({inputs:o,backend:i,attrs:s})=>{let{x:_}=o,{paddings:_e,mode:ct}=s,Mt=A().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new fg(_.shape,_e,ct):new dg(_.shape,_e,ct);return i.runWebGLProgram(Mt,[_],_.dtype)},n3={kernelName:Kn,backendName:"webgl",kernelFunc:Hee},Kee=`if (b == 0.0) return NAN;
  return mod(a, b);`,qee=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+Xr+`
  return result;
`,jee=nt$1({opSnippet:Kee,packedOpSnippet:qee}),s3={kernelName:qn,backendName:"webgl",kernelFunc:jee},hg=class{constructor(o,i,s){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[o,s],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${i-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${i-1}));
      }
    `}},Xee=`
if (a == b) {
  return 1.0;
};
return a / b;`,Yee=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,Ev=nt$1({opSnippet:Xee,packedOpSnippet:Yee,checkOutOfBounds:!0}),a3={kernelName:fn,backendName:"webgl",kernelFunc:Ev},i3="return a - b;",$v=nt$1({opSnippet:i3,packedOpSnippet:i3,supportsComplex:!0,cpuKernelImpl:kD}),u3={kernelName:Ts,backendName:"webgl",kernelFunc:$v};function Rv(o){let{inputs:i,backend:s,attrs:_}=o,{logits:_e}=i,{dim:ct}=_,Mt=y.parseAxisParam([ct],_e.shape),Ft=_v({inputs:{x:_e},backend:s,attrs:{reductionIndices:Mt,keepDims:!1}}),Ut=w.expandShapeToKeepDim(Ft.shape,Mt),Xt=te({inputs:{x:Ft},backend:s,attrs:{shape:Ut}}),Kt=$v({inputs:{a:_e,b:Xt},backend:s}),nr=kv({inputs:{x:Kt},backend:s}),rr=wp({inputs:{x:nr},backend:s,attrs:{axis:Mt,keepDims:!1}}),or=te({inputs:{x:rr},backend:s,attrs:{shape:Ut}}),hr=Ev({inputs:{a:nr,b:or},backend:s});return s.disposeIntermediateTensorInfo(Ft),s.disposeIntermediateTensorInfo(Xt),s.disposeIntermediateTensorInfo(Kt),s.disposeIntermediateTensorInfo(nr),s.disposeIntermediateTensorInfo(rr),s.disposeIntermediateTensorInfo(or),hr}var p3={kernelName:Is,backendName:"webgl",kernelFunc:Rv};function Qee(o){let{inputs:i,backend:s,attrs:_}=o,{logits:_e}=i,{numSamples:ct,seed:Mt,normalized:Ft}=_,Ut=Ft?_e:Rv({inputs:{logits:_e},backend:s,attrs:{dim:_e.shape.length-1}}),Xt=Ut.shape[0],Kt=Ut.shape[1],nr=new hg(Xt,Kt,ct),rr=[[Mt]],or=s.runWebGLProgram(nr,[Ut],"int32",rr);return Ft||s.disposeIntermediateTensorInfo(Ut),or}var c3={kernelName:jn,backendName:"webgl",kernelFunc:Qee},Zee=Wt+`
  return -x;
`,Jee=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function ete(o){let i,{inputs:s,backend:_}=o,{x:_e}=s;if(_.shouldExecuteOnCPU([_e])){let ct=_.texData.get(_e.dataId),[Mt,Ft]=aD(ct.values,_e.shape,_e.dtype);return _.makeTensorInfo(Ft,_e.dtype,Mt)}return i=A().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new Fr(_e.shape,Jee):new tr(_e.shape,Zee),_.runWebGLProgram(i,[_e],_e.dtype)}var l3={kernelName:pa,backendName:"webgl",kernelFunc:ete},tte=Vt.nonMaxSuppressionV3Impl;function rte(o){w.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:i,backend:s,attrs:_}=o,{boxes:_e,scores:ct}=i,{maxOutputSize:Mt,iouThreshold:Ft,scoreThreshold:Ut}=_,Xt=s.readSync(_e.dataId),Kt=s.readSync(ct.dataId),{selectedIndices:nr}=tte(Xt,Kt,Mt,Ft,Ut);return s.makeTensorInfo([nr.length],"int32",new Int32Array(nr))}var m3={kernelName:Qn,backendName:"webgl",kernelFunc:rte},ote=Vt.nonMaxSuppressionV4Impl;function nte(o){w.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:i,backend:s,attrs:_}=o,{boxes:_e,scores:ct}=i,{maxOutputSize:Mt,iouThreshold:Ft,scoreThreshold:Ut,padToMaxOutputSize:Xt}=_,Kt=s.readSync(_e.dataId),nr=s.readSync(ct.dataId),{selectedIndices:rr,validOutputs:or}=ote(Kt,nr,Mt,Ft,Ut,Xt);return[s.makeTensorInfo([rr.length],"int32",new Int32Array(rr)),s.makeTensorInfo([],"int32",new Int32Array([or]))]}var d3={kernelName:Qa,backendName:"webgl",kernelFunc:nte},ste=Vt.nonMaxSuppressionV5Impl;function ate(o){w.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:i,backend:s,attrs:_}=o,{boxes:_e,scores:ct}=i,{maxOutputSize:Mt,iouThreshold:Ft,scoreThreshold:Ut,softNmsSigma:Xt}=_,Kt=s.readSync(_e.dataId),nr=s.readSync(ct.dataId),rr=Mt,or=Ft,hr=Ut,fr=Xt,{selectedIndices:yr,selectedScores:Lr}=ste(Kt,nr,rr,or,hr,fr);return[s.makeTensorInfo([yr.length],"int32",new Int32Array(yr)),s.makeTensorInfo([Lr.length],"float32",new Float32Array(Lr))]}var f3={kernelName:Zn,backendName:"webgl",kernelFunc:ate},gg=class{constructor(o,i,s,_){this.variableNames=["indices"],this.outputShape=[o,i],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${_}), float(${s}),
                      float(index == coords.y)));
      }
    `}},ite=o=>{let{inputs:i,backend:s,attrs:_}=o,{indices:_e}=i,{dtype:ct,depth:Mt,onValue:Ft,offValue:Ut}=_,Xt=y.sizeFromShape(_e.shape),Kt=new gg(Xt,Mt,Ft,Ut),nr=te({inputs:{x:_e},backend:s,attrs:{shape:[Xt]}}),rr=s.runWebGLProgram(Kt,[nr],ct);s.disposeIntermediateTensorInfo(nr);let or=te({inputs:{x:rr},backend:s,attrs:{shape:[..._e.shape,Mt]}});return s.disposeIntermediateTensorInfo(rr),or},h3={kernelName:Jn,backendName:"webgl",kernelFunc:ite};function sm(o){let{inputs:i,backend:s}=o,{x:_}=i;if(_.dtype==="complex64"){let _e=bi({inputs:{input:_},backend:s}),ct=sm({inputs:{x:_e},backend:s}),Mt=Ip({inputs:{input:_},backend:s}),Ft=sm({inputs:{x:Mt},backend:s}),Ut=Or({inputs:{real:ct,imag:Ft},backend:s});return s.disposeIntermediateTensorInfo(_e),s.disposeIntermediateTensorInfo(ct),s.disposeIntermediateTensorInfo(Mt),s.disposeIntermediateTensorInfo(Ft),Ut}return Ci({attrs:{shape:_.shape,dtype:_.dtype,value:_.dtype==="string"?"":0},backend:s})}var g3={kernelName:Sa,backendName:"webgl",kernelFunc:sm};function x3(o){let{inputs:i,backend:s}=o,{x:_}=i;if(_.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(_.dtype==="complex64"){let _e=bi({inputs:{input:_},backend:s}),ct=x3({inputs:{x:_e},backend:s}),Mt=Ip({inputs:{input:_},backend:s}),Ft=sm({inputs:{x:Mt},backend:s}),Ut=Or({inputs:{real:ct,imag:Ft},backend:s});return s.disposeIntermediateTensorInfo(_e),s.disposeIntermediateTensorInfo(ct),s.disposeIntermediateTensorInfo(Mt),s.disposeIntermediateTensorInfo(Ft),Ut}return Ci({attrs:{shape:_.shape,dtype:_.dtype,value:1},backend:s})}var y3={kernelName:ca,backendName:"webgl",kernelFunc:x3};function ute(o){let{inputs:i,backend:s,attrs:_}=o,{axis:_e}=_;if(i.length===1)return eg({inputs:{input:i[0]},backend:s,attrs:{dim:_e}});let ct=i[0].shape,Mt=i[0].dtype;i.forEach(Xt=>{y.assertShapesMatch(ct,Xt.shape,"All tensors passed to stack must have matching shapes"),y.assert(Mt===Xt.dtype,()=>"All tensors passed to stack must have matching dtypes")});let Ft=[],Ut=vv({inputs:i.map(Xt=>{let Kt=eg({inputs:{input:Xt},backend:s,attrs:{dim:_e}});return Ft.push(Kt),Kt}),backend:s,attrs:{axis:_e}});return Ft.forEach(Xt=>s.disposeIntermediateTensorInfo(Xt)),Ut}var b3={kernelName:la,backendName:"webgl",kernelFunc:ute},xg=class{constructor(o,i,s){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=i.map((Ut,Xt)=>Ut[0]+o[Xt]+Ut[1]);let _=o.length,_e=Re$1(_),ct=i.map(Ut=>Ut[0]).join(","),Mt=i.map((Ut,Xt)=>Ut[0]+o[Xt]).join(","),Ft=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,_);this.userCode=_!==1?`
      ${_e} start = ${_e}(${ct});
      ${_e} end = ${_e}(${Mt});

      void main() {
        ${_e} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${_e} coords = outC - start;
          setOutput(getX(${Ft}));
        }
      }
    `:`
        int start = ${ct};
        int end = ${Mt};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `}},yg=class{constructor(o,i,s){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=i.map((hr,fr)=>hr[0]+o[fr]+hr[1]);let _=o.length,_e=Re$1(_),ct=i.map(hr=>hr[0]).join(","),Mt=i.map((hr,fr)=>hr[0]+o[fr]).join(","),Ft=Rt$1("rc",_),Ut=Rt$1("source",_),Xt=`${Ft[_-1]} < ${this.outputShape[_-1]}`,Kt=_===1?"source":`vec2(${Ut.slice(-2).join()})`,nr=[`${_e} rc = outputLoc;`,`${Ft[_-1]} += 1;
       if(${Xt}) {
      `,_===1?"":`}
       rc = outputLoc;
       ${Ft[_-2]} += 1;
       if(${Ft[_-2]} < ${this.outputShape[_-2]}) {`,_===1?"":`  ${Ft[_-1]} += 1;
         if(${Xt}) {`],rr=_===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",or="";for(let hr=0,fr=_===1?2:4;hr<fr;hr++)or+=`
        ${nr[hr]}
        if (${rr}) {
          result[${hr}] = float(value);
        } else {
          ${_e} source = rc - start;
          result[${hr}] = getChannel(getX(${Ut.join()}), ${Kt});
        }
      `;or+=_===1?"} ":"}}",this.userCode=`
      const ${_e} start = ${_e}(${ct});
      const ${_e} end = ${_e}(${Mt});

      void main() {
        ${_e} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${or}
        setOutput(result);
      }
    `}},Dv=o=>{let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{paddings:ct,constantValue:Mt}=_;if(y.sizeFromShape(_e.shape)===0)return Ci({backend:s,attrs:{shape:ct.map((Xt,Kt)=>Xt[0]+_e.shape[Kt]+Xt[1]),value:Mt,dtype:_e.dtype}});let Ft=A().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new yg(_e.shape,ct,Mt):new xg(_e.shape,ct,Mt),Ut=[[Mt]];return s.runWebGLProgram(Ft,[_e],_e.dtype,Ut)},C3={kernelName:es,backendName:"webgl",kernelFunc:Dv},pte=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,cte=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+Xr+`
  return result;
`,lte=nt$1({opSnippet:pte,packedOpSnippet:cte}),w3={kernelName:ts,backendName:"webgl",kernelFunc:lte};function mte(o){let i,{inputs:s,backend:_,attrs:_e}=o,{x:ct}=s,{axis:Mt,keepDims:Ft}=_e,Ut=ct.shape.length,Xt=[],Kt=y.parseAxisParam(Mt,ct.shape),nr=Kt,rr=w.getAxesPermutation(nr,Ut),or=ct;if(rr!=null&&(or=bt$2({inputs:{x:ct},backend:_,attrs:{perm:rr}}),nr=w.getInnerMostAxes(nr.length,Ut),Xt.push(or)),w.assertAxesAreInnerMostDims("prod",nr,Ut),_.shouldExecuteOnCPU([or])){let hr=_.texData.get(or.dataId).values,{outVals:fr,outShape:yr,outDtype:Lr}=uD(or.shape,or.dtype,hr,nr);i=_.makeTensorInfo(yr,Lr,fr)}else{let[hr,fr]=w.computeOutAndReduceShapes(or.shape,nr),yr=y.sizeFromShape(fr),Lr=te({inputs:{x:or},backend:_,attrs:{shape:[-1,yr]}}),Br=Yr(Lr,oi(ct.dtype),"prod",_);i=te({inputs:{x:Br},backend:_,attrs:{shape:hr}}),Xt.push(Lr),Xt.push(Br)}if(Ft){Xt.push(i);let hr=w.expandShapeToKeepDim(i.shape,Kt);i=te({inputs:{x:i},backend:_,attrs:{shape:hr}})}return Xt.forEach(hr=>_.disposeIntermediateTensorInfo(hr)),i}var S3={kernelName:os,backendName:"webgl",kernelFunc:mte};function dte(o){let{inputs:i,backend:s,attrs:_}=o,{paramsNestedSplits:_e,paramsDenseValues:ct,indices:Mt}=i,{outputRaggedRank:Ft}=_,Ut=_e.map(Lr=>s.readSync(Lr.dataId)),Xt=_e.map(Lr=>Lr.shape),Kt=s.readSync(ct.dataId),nr=s.readSync(Mt.dataId),[rr,or,hr]=pD(Ut,Xt,Kt,ct.shape,ct.dtype,nr,Mt.shape,Ft),fr=rr.map(Lr=>s.makeTensorInfo([Lr.length],"int32",Lr)),yr=s.makeTensorInfo(hr,ct.dtype,or);return fr.concat([yr])}var I3={kernelName:Hp,backendName:"webgl",kernelFunc:dte};function fte(o){let{inputs:i,backend:s}=o,{starts:_,limits:_e,deltas:ct}=i,Mt=s.readSync(_.dataId),Ft=s.readSync(_e.dataId),Ut=s.readSync(ct.dataId),[Xt,Kt]=cD(Mt,_.shape,_.dtype,Ft,_e.shape,Ut,ct.shape);return[s.makeTensorInfo([Xt.length],"int32",Xt),s.makeTensorInfo([Kt.length],_.dtype,Kt)]}var v3={kernelName:Kp,backendName:"webgl",kernelFunc:fte};function hte(o){let{inputs:i,backend:s,attrs:_}=o,{shape:_e,values:ct,defaultValue:Mt,rowPartitionTensors:Ft}=i,{rowPartitionTypes:Ut}=_,Xt=s.readSync(_e.dataId),Kt=s.readSync(ct.dataId),nr=s.readSync(Mt.dataId),rr=Ft.map(yr=>s.readSync(yr.dataId)),or=Ft.map(yr=>yr.shape),[hr,fr]=lD(Xt,_e.shape,Kt,ct.shape,ct.dtype,nr,Mt.shape,rr,or,Ut);return s.makeTensorInfo(hr,ct.dtype,fr)}var k3={kernelName:qp,backendName:"webgl",kernelFunc:hte},Av=o=>{let{backend:i,attrs:s}=o,{start:_,stop:_e,step:ct,dtype:Mt}=s,Ft=mD(_,_e,ct,Mt);return i.makeTensorInfo([Ft.length],Mt,Ft)},N3={kernelName:ma,backendName:"webgl",kernelFunc:Av},gte="return 1.0 / x;",xte=xe$1({opSnippet:gte}),T3={kernelName:ns,backendName:"webgl",kernelFunc:xte},yte=Wt+`
  return (x < 0.0) ? 0.0 : x;
`,bte=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Cte=xe$1({opSnippet:yte,packedOpSnippet:bte}),_3={kernelName:ss,backendName:"webgl",kernelFunc:Cte},wte=Wt+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,Ste=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Ite=xe$1({opSnippet:wte,packedOpSnippet:Ste}),E3={kernelName:us,backendName:"webgl",kernelFunc:Ite},bg=class{constructor(o,i,s,_,_e){this.variableNames=["A"],this.outputShape=[];let[ct,Mt,Ft,Ut]=o;this.outputShape=[ct,i,s,Ut];let Xt,Kt=[_&&i>1?Mt-1:Mt,_&&s>1?Ft-1:Ft],nr=[_&&i>1?i-1:i,_&&s>1?s-1:s];Xt=_e?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${Kt[0]/nr[0]},
          ${Kt[1]/nr[1]});
      const vec2 inputShapeRC = vec2(${Mt}.0, ${Ft}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${Xt};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}},Cg=class{constructor(o,i,s,_,_e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];let[ct,Mt,Ft,Ut]=o;this.outputShape=[ct,i,s,Ut];let Xt,Kt=[_&&i>1?Mt-1:Mt,_&&s>1?Ft-1:Ft],nr=[_&&i>1?i-1:i,_&&s>1?s-1:s];Xt=_e?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${Kt[0]/nr[0]},
          ${Kt[1]/nr[1]},
          ${Kt[1]/nr[1]});
      const vec3 inputShapeRC = vec3(${Mt}.0, ${Ft}.0,
                                     ${Ft}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${Xt};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${Ut-1};
        bool hasNextRow = coords.z < ${s-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}};function vte(o){let{inputs:i,backend:s,attrs:_}=o,{images:_e}=i,{alignCorners:ct,halfPixelCenters:Mt,size:Ft}=_,[Ut,Xt]=Ft,Kt=A().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Cg(_e.shape,Ut,Xt,ct,Mt):new bg(_e.shape,Ut,Xt,ct,Mt);return s.runWebGLProgram(Kt,[_e],"float32")}var $3={kernelName:is,backendName:"webgl",kernelFunc:vte},wg=class{constructor(o,i,s){this.variableNames=["dy"],this.outputShape=[],this.outputShape=i;let[,_,_e]=i,[,ct,Mt]=o,Ft=[s&&ct>1?_-1:_,s&&Mt>1?_e-1:_e],Ut=[s&&ct>1?ct-1:ct,s&&Mt>1?Mt-1:Mt],Xt=Ft[0]/Ut[0],Kt=Ft[1]/Ut[1],nr=1/Xt,rr=1/Kt,or=2*Math.ceil(nr)+2,hr=2*Math.ceil(rr)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${Xt});
        const float widthScale = float(${Kt});

        const float invHeightScale = float(${nr});
        const float invWidthScale = float(${rr});

        const int winHeight = int(${or});
        const int winWidth = int(${hr});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${ct}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${Mt}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${_-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${_e-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}};function kte(o){let{inputs:i,backend:s,attrs:_}=o,{images:_e,dy:ct}=i,{alignCorners:Mt}=_,Ft=new wg(ct.shape,_e.shape,Mt);return s.runWebGLProgram(Ft,[ct],ct.dtype)}var R3={kernelName:Ja,backendName:"webgl",kernelFunc:kte},Sg=class{constructor(o,i,s,_,_e){this.variableNames=["A"],this.outputShape=[];let[ct,Mt,Ft,Ut]=o;this.outputShape=[ct,i,s,Ut];let Xt,Kt=[_&&i>1?Mt-1:Mt,_&&s>1?Ft-1:Ft],nr=[_&&i>1?i-1:i,_&&s>1?s-1:s],rr=_?"0.5":"0.0";Xt=_e?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${Kt[0]/nr[0]},
          ${Kt[1]/nr[1]});
      const vec2 inputShapeRC = vec2(${Mt}.0, ${Ft}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${Xt};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${rr})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}},Ig=class{constructor(o,i,s,_,_e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];let[ct,Mt,Ft,Ut]=o;this.outputShape=[ct,i,s,Ut];let Xt,Kt=[_&&i>1?Mt-1:Mt,_&&s>1?Ft-1:Ft],nr=[_&&i>1?i-1:i,_&&s>1?s-1:s],rr=_?"0.5":"0.0";Xt=_e?"max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${Kt[0]/nr[0]},
          ${Kt[1]/nr[1]},
          ${Kt[1]/nr[1]});
      const vec3 inputShapeRC = vec3(${Mt}.0, ${Ft}.0,
                                     ${Ft}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${Xt};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${rr})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${Ut-1};
        bool hasNextRow = coords.z < ${s-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}};function Nte(o){let{inputs:i,backend:s,attrs:_}=o,{images:_e}=i,{alignCorners:ct,halfPixelCenters:Mt,size:Ft}=_,[Ut,Xt]=Ft,Kt=A().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Ig(_e.shape,Ut,Xt,ct,Mt):new Sg(_e.shape,Ut,Xt,ct,Mt);return s.runWebGLProgram(Kt,[_e],_e.dtype)}var D3={kernelName:as,backendName:"webgl",kernelFunc:Nte},vg=class{constructor(o,i,s){this.variableNames=["dy"],this.outputShape=[],this.outputShape=i;let[,_,_e]=i,[,ct,Mt]=o,Ft=[s&&ct>1?_-1:_,s&&Mt>1?_e-1:_e],Ut=[s&&ct>1?ct-1:ct,s&&Mt>1?Mt-1:Mt],Xt=Ft[0]/Ut[0],Kt=Ft[1]/Ut[1],nr=1/Xt,rr=1/Kt,or=2*Math.ceil(nr)+2,hr=2*Math.ceil(rr)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${Xt});
        const float widthScale = float(${Kt});

        const float invHeightScale = float(${nr});
        const float invWidthScale = float(${rr});

        const int winHeight = int(${or});
        const int winWidth = int(${hr});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${ct}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${Mt}) {
              continue;
            }

            float sourceFracRow =
              float(${Ft[0]}) *
                (float(dyR) / float(${Ut[0]}));

            float sourceFracCol =
                float(${Ft[1]}) *
                  (float(dyC) / float(${Ut[1]}));

            int sourceNearestRow = int(min(
                float(int(${_}) - 1),
                ${s} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${_e}) - 1),
                ${s} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}};function Tte(o){let{inputs:i,backend:s,attrs:_}=o,{images:_e,dy:ct}=i,{alignCorners:Mt}=_,Ft=new vg(ct.shape,_e.shape,Mt);return s.runWebGLProgram(Ft,[ct],ct.dtype)}var A3={kernelName:Za,backendName:"webgl",kernelFunc:Tte},kg=class{constructor(o,i){this.variableNames=["x"];let s=o.length;if(s>4)throw new Error(`WebGL backend: Reverse of rank-${s} tensor is not yet supported`);if(this.outputShape=o,s===1)return void(this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${o[0]} - coord - 1));
        }
      `);let _=o.map((ct,Mt)=>(Ft=>i.indexOf(Ft)!==-1&&o[Ft]!==1?`${o[Ft]} - coords[${Ft}] - 1`:`coords[${Ft}]`)(Mt)).join(","),_e=Re$1(s);this.userCode=`
      void main() {
        ${_e} coords = getOutputCoords();
        setOutput(getX(${_}));
      }
    `}},Ng=class{constructor(o,i){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;let s=o.length;if(s>4)throw new Error(`WebGL backend: Reverse of rank-${s} tensor is not yet supported`);this.outputShape=o;let _=Rt$1("rc",s),_e=`${_[s-1]} + 1 < ${this.outputShape[s-1]}`,ct=`${_[s-2]} + 1 < ${this.outputShape[s-2]}`,Mt=Re$1(s);var Ft;function Ut(Xt){let Kt=o.map((nr,rr)=>function(or,hr){return i.indexOf(or)!==-1&&o[or]!==1?`${o[or]} - ${hr[or]} - 1`:`${hr[or]}`}(rr,Xt));return`getChannel(getX(${Kt.join(",")}), vec2(${Kt.slice(-2).join(",")}))`}this.userCode=s===1?`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${o[0]} - rc - 1),
            ${o[0]} - rc - 1);
          if(${_e}){
              result.g = getChannel(getX(${o[0]} - (rc  + 1) - 1),
                ${o[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:`
        void main() {
          ${Mt} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${Ft=_.slice(),Ut(Ft)};
          if(${_e}){
            result.g = ${function(Xt){return Xt[s-1]="("+Xt[s-1]+" + 1)",Ut(Xt)}(_.slice())};
          }
          if(${ct}) {
            result.b = ${function(Xt){return Xt[s-2]="("+Xt[s-2]+" + 1)",Ut(Xt)}(_.slice())};
            if(${_e}) {
              result.a = ${function(Xt){return Xt[s-1]="("+Xt[s-1]+" + 1)",Xt[s-2]="("+Xt[s-2]+" + 1)",Ut(Xt)}(_.slice())};
            }
          }
          setOutput(result);
        }
    `}};function _te(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{dims:ct}=_,Mt=_e.shape.length,Ft=y.parseAxisParam(ct,_e.shape);if(Mt===0)return Dt$1({inputs:{x:_e},backend:s});let Ut=A().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Ng(_e.shape,Ft):new kg(_e.shape,Ft);return s.runWebGLProgram(Ut,[_e],_e.dtype)}var F3={kernelName:ps,backendName:"webgl",kernelFunc:_te},Tg=class{constructor(o,i){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];let s=o[1],_=o[2];this.outputShape=o;let _e="";_e=typeof i=="number"?`float outputValue = ${i.toFixed(2)};`:`
        vec3 fill = vec3(${i.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${_e}
          if(coordX >= 0 && coordX < ${_} && coordY >= 0 && coordY < ${s}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}},P3={kernelName:Ds,backendName:"webgl",kernelFunc:({inputs:o,attrs:i,backend:s})=>{let{image:_}=o,{radians:_e,fillValue:ct,center:Mt}=i,Ft=s,Ut=new Tg(_.shape,ct),[Xt,Kt]=w.getImageCenter(Mt,_.shape[1],_.shape[2]),nr=[[Xt,Kt,Math.sin(_e),Math.cos(_e)]];return Ft.runWebGLProgram(Ut,[_],_.dtype,nr)}},Ete=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,$te=xe$1({opSnippet:Ete}),O3={kernelName:cs,backendName:"webgl",kernelFunc:$te},Rte="return inversesqrt(x);",Dte=xe$1({opSnippet:Rte,cpuKernelImpl:dD}),M3={kernelName:ls,backendName:"webgl",kernelFunc:Dte},Cu=class{constructor(o,i,s,_,_e,ct,Mt=!0,Ft=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=ct;let Ut=Re$1(_e.length),Xt=Re$1(ct.length),Kt="";s===1?Kt="i":s===2&&(Kt="i, j");let nr=`getIndices(${Kt})`,rr="";_===1?rr="i":_===2&&(rr="i, coords[1]");let or=`getUpdates(${rr})`,hr="";Ft&&(hr="coords[0], coords[1]");let fr=`getDefaultValue(${hr})`,yr=i>1?"strides[j]":"strides";this.userCode=`
        ${Ut} strides = ${Ut}(${_e});

        void main() {
          ${Xt} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${o}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${i}; j++) {
              int index = round(${nr});
              flattenedIndex += index * ${yr};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${or};
              found = true;
            }
          }
          setOutput(mix(${fr}, sum, float(found)));
        }
      `}},_g=class{constructor(o,i,s,_,_e,ct,Mt=!0,Ft=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=ct;let Ut=Re$1(_e.length),Xt=Re$1(ct.length),Kt="";s===1?Kt="i":s===2&&(Kt="i, j");let nr=`getIndices(${Kt})`,rr="";_===1?rr="i":_===2&&(rr="i, coords[1]");let or=`getUpdates(${rr})`,hr="";Ft&&(hr="coords[0], coords[1]");let fr=`getDefaultValue(${hr})`,yr=i>1?"strides[j]":"strides",Lr=i>1?"strides[j + 1]":"strides";this.userCode=`
        ${Ut} strides = ${Ut}(${_e});

        void main() {
          ${Xt} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${o}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${i}; j+=2) {
              ivec4 index = round(${nr});
              flattenedIndex += index.xz * ${yr};
              if (j + 1 < ${i}) {
                flattenedIndex += index.yw * ${Lr};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${or};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${fr}, sum, found));
        }
      `}};function Ate(o){let{inputs:i,backend:s,attrs:_}=o,{indices:_e,updates:ct}=i,{shape:Mt}=_,{sliceRank:Ft,numUpdates:Ut,sliceSize:Xt,strides:Kt,outputSize:nr}=w.calculateShapes(ct,_e,Mt),rr=[nr/Xt,Xt];if(nr===0)return s.makeTensorInfo(Mt,_e.dtype);let or,hr=te({inputs:{x:_e},backend:s,attrs:{shape:[Ut,Ft]}}),fr=te({inputs:{x:ct},backend:s,attrs:{shape:[Ut,Xt]}}),yr=s.makeTensorInfo([],"float32",new Float32Array([0]));or=A().getBool("WEBGL_PACK")?new _g(Ut,Ft,hr.shape.length,fr.shape.length,Kt,rr):new Cu(Ut,Ft,hr.shape.length,fr.shape.length,Kt,rr);let Lr=s.runWebGLProgram(or,[fr,hr,yr],fr.dtype),Br=te({inputs:{x:Lr},backend:s,attrs:{shape:Mt}});return s.disposeIntermediateTensorInfo(hr),s.disposeIntermediateTensorInfo(fr),s.disposeIntermediateTensorInfo(Lr),s.disposeIntermediateTensorInfo(yr),Br}var L3={kernelName:ms,backendName:"webgl",kernelFunc:Ate},Eg=class{constructor(o,i,s,_){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[o,s];let _e=`for (int i = 0; i < ${Math.ceil(Math.log2(i+1))}; ++i) { if (left >= right) break;`,ct=A().getNumber("WEBGL_VERSION")===2?"while (left < right) {":_e,Mt=_==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${ct}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${Mt} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}};function Fte(o){let{inputs:i,backend:s,attrs:_}=o,{sortedSequence:_e,values:ct}=i,{side:Mt}=_,Ft=new Eg(_e.shape[0],_e.shape[1],ct.shape[1],Mt),Ut=[[_e.shape[1]]];return s.runWebGLProgram(Ft,[_e,ct],"int32",Ut)}var B3={kernelName:fs,backendName:"webgl",kernelFunc:Fte},$g=class{constructor(o,i,s){let _,_e;if(this.variableNames=["c","a","b"],this.outputShape=i,s>4)throw Error(`Where for rank ${s} is not yet supported`);if(s===1)_e="resRC",_="resRC";else{let Mt=["resRC.x","resRC.y","resRC.z","resRC.w"],Ft=[],Ut=[];for(let Xt=0;Xt<i.length;Xt++)Ut.push(`${Mt[Xt]}`),Xt<o&&Ft.push(`${Mt[Xt]}`);_=Ft.join(),_e=Ut.join()}let ct=Re$1(s);this.userCode=`
      void main() {
        ${ct} resRC = getOutputCoords();
        float cVal = getC(${_});
        if (cVal >= 1.0) {
          setOutput(getA(${_e}));
        } else {
          setOutput(getB(${_e}));
        }
      }
    `}};function Pte(o){let{inputs:i,backend:s}=o,{condition:_,t:_e,e:ct}=i,Mt=new $g(_.shape.length,_e.shape,_e.shape.length);return s.runWebGLProgram(Mt,[_,_e,ct],dt(_e.dtype,ct.dtype))}var z3={kernelName:fa,backendName:"webgl",kernelFunc:Pte},Ote=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${w.SELU_SCALEALPHA};
  float scale = ${w.SELU_SCALE};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,Mte=xe$1({opSnippet:Ote}),V3={kernelName:hs,backendName:"webgl",kernelFunc:Mte},Lte=Fo+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,Bte=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,zte=xe$1({opSnippet:Lte,packedOpSnippet:Bte,cpuKernelImpl:hD}),W3={kernelName:bs,backendName:"webgl",kernelFunc:zte},Vte=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,Wte=xe$1({opSnippet:Vte}),U3={kernelName:ys,backendName:"webgl",kernelFunc:Wte},Ute=Fo+`
  return sin(x);
`,Gte=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${Xr}
  return result;
`,Hte=xe$1({opSnippet:Ute,packedOpSnippet:Gte}),G3={kernelName:gs,backendName:"webgl",kernelFunc:Hte},Kte=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,qte=xe$1({opSnippet:Kte}),H3={kernelName:xs,backendName:"webgl",kernelFunc:qte},jte=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,Xte=xe$1({opSnippet:jte}),K3={kernelName:Cs,backendName:"webgl",kernelFunc:Xte},Yte=o=>{let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{blockShape:ct,paddings:Mt}=_;y.assert(_e.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");let Ft=ct.reduce((Lr,Br)=>Lr*Br),Ut=[[0,0]];Ut.push(...Mt);for(let Lr=1+ct.length;Lr<_e.shape.length;++Lr)Ut.push([0,0]);let Xt=[],Kt=Dv({inputs:{x:_e},backend:s,attrs:{paddings:Ut,constantValue:0}}),nr=w.getReshaped(Kt.shape,ct,Ft,!1),rr=w.getPermuted(nr.length,ct.length,!1),or=w.getReshapedPermuted(Kt.shape,ct,Ft,!1),hr=te({inputs:{x:Kt},backend:s,attrs:{shape:nr}}),fr=bt$2({inputs:{x:hr},backend:s,attrs:{perm:rr}}),yr=te({inputs:{x:fr},backend:s,attrs:{shape:or}});return Xt.push(Kt),Xt.push(hr),Xt.push(fr),Xt.forEach(Lr=>s.disposeIntermediateTensorInfo(Lr)),yr},q3={kernelName:ga,backendName:"webgl",kernelFunc:Yte};function Qte(o){let{inputs:i,backend:s}=o,{indices:_,values:_e,denseShape:ct,defaultValue:Mt}=i;if(ct.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${ct.shape}`);if(_.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${_.shape}`);if(_e.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${_e.shape}`);if(Mt.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${Mt.shape}`);let Ft=s.readSync(_.dataId),Ut=s.readSync(_e.dataId),Xt=s.readSync(ct.dataId),Kt=s.readSync(Mt.dataId)[0],[nr,rr,or,hr,fr]=xD(Ft,_.shape,_.dtype,Ut,_e.dtype,Xt,Kt);return[s.makeTensorInfo(rr,_.dtype,nr),s.makeTensorInfo([rr[0]],_e.dtype,or),s.makeTensorInfo([hr.length],"bool",new Uint8Array(hr.map(yr=>Number(yr)))),s.makeTensorInfo([fr.length],_.dtype,new Int32Array(fr))]}var j3={kernelName:Ki,backendName:"webgl",kernelFunc:Qte};function Zte(o){let{inputs:i,backend:s}=o,{inputIndices:_,inputShape:_e,newShape:ct}=i;if(_.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${_.shape}`);if(_e.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${_e.shape}`);if(ct.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${ct.shape}`);let Mt=Array.from(s.readSync(_e.dataId)),Ft=s.readSync(_.dataId),Ut=Array.from(s.readSync(ct.dataId)),[Xt,Kt,nr]=yD(Ft,_.shape,_.dtype,Mt,Ut);return[s.makeTensorInfo(Kt,_.dtype,Xt),s.makeTensorInfo([nr.length],ct.dtype,new Int32Array(nr))]}var X3={kernelName:ei,backendName:"webgl",kernelFunc:Zte};function Jte(o){let{inputs:i,backend:s}=o,{data:_,indices:_e,segmentIds:ct}=i;if(_.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(_e.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${_e.shape}`);if(ct.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${ct.shape}`);let Mt=s.readSync(_.dataId),Ft=s.readSync(_e.dataId),Ut=s.readSync(ct.dataId),[Xt,Kt]=lh(Mt,_.shape,_.dtype,Ft,Ut,!0);return s.makeTensorInfo(Kt,_.dtype,Xt)}var Y3={kernelName:ya,backendName:"webgl",kernelFunc:Jte};function ere(o){let{inputs:i,backend:s}=o,{data:_,indices:_e,segmentIds:ct}=i;if(_.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(_e.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${_e.shape}`);if(ct.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${ct.shape}`);let Mt=s.readSync(_.dataId),Ft=s.readSync(_e.dataId),Ut=s.readSync(ct.dataId),[Xt,Kt]=lh(Mt,_.shape,_.dtype,Ft,Ut);return s.makeTensorInfo(Kt,_.dtype,Xt)}var Q3={kernelName:ba,backendName:"webgl",kernelFunc:ere};function tre(o){let{inputs:i,backend:s,attrs:_}=o,{sparseIndices:_e,sparseValues:ct,defaultValue:Mt}=i,{outputShape:Ft}=_,{sliceRank:Ut,numUpdates:Xt,sliceSize:Kt,strides:nr,outputSize:rr}=w.calculateShapes(ct,_e,Ft),or=!1;if(ct.dtype==="string"){let Lr=s.bufferSync(_e),Br=s.bufferSync(ct),Vr=y.decodeString(s.readSync(Mt.dataId)[0]),Wr=fD(Lr,Br,Ft,rr,Kt,Xt,Ut,nr,Vr,or);return s.makeTensorInfo(Ft,Wr.dtype,Wr.values)}let hr=new Cu(Xt,Ut,_e.shape.length,ct.shape.length,nr,[rr,1],or),fr=s.runWebGLProgram(hr,[ct,_e,Mt],ct.dtype),yr=te({inputs:{x:fr},backend:s,attrs:{shape:Ft}});return s.disposeIntermediateTensorInfo(fr),yr}var Z3={kernelName:vs,backendName:"webgl",kernelFunc:tre};function rre(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{numOrSizeSplits:ct,axis:Mt}=_,Ft=y.parseAxisParam(Mt,_e.shape)[0],Ut=w.prepareSplitSize(_e,ct,Ft),Xt=_e.shape.length,Kt=new Array(Xt).fill(0),nr=_e.shape.slice();return Ut.map(rr=>{let or=[...nr];or[Ft]=rr;let hr=Gs({inputs:{x:_e},backend:s,attrs:{begin:Kt,size:or}});return Kt[Ft]+=rr,hr})}var J3={kernelName:xa,backendName:"webgl",kernelFunc:rre},eP="return sqrt(x);",ore=xe$1({opSnippet:eP,packedOpSnippet:eP,cpuKernelImpl:bD}),tP={kernelName:ws,backendName:"webgl",kernelFunc:ore},nre="return x * x;",sre=xe$1({opSnippet:nre}),rP={kernelName:qi,backendName:"webgl",kernelFunc:sre},oP="return (a - b) * (a - b);",are=nt$1({opSnippet:oP,packedOpSnippet:oP}),nP={kernelName:ks,backendName:"webgl",kernelFunc:are};function ire(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i;if(_e.dtype!=="string")throw new Error("Input must be of datatype string");let ct=s.readSync(_e.dataId),Mt=w.fromUint8ToStringArray(ct),Ft=CD(Mt,"string",_);return s.makeTensorInfo(_e.shape,"string",Ft)}var sP={kernelName:Ru,backendName:"webgl",kernelFunc:ire};function ure({inputs:o,attrs:i,backend:s}){let{x:_}=o,_e=Wt+`
    return x > 0.0 ? 1.0 : float(${i.alpha});
  `,ct=new tr(_.shape,_e);return s.runWebGLProgram(ct,[_],_.dtype)}var aP={kernelName:wo,backendName:"webgl",kernelFunc:ure},Rg=class{constructor(o,i,s){this.variableNames=["x"],this.outputShape=s;let _=s.length,_e=Re$1(s.length),ct=Re$1(s.length),Mt="";if(_===1)Mt="coords * strides + begin";else{let Ft=0;Mt=s.map((Ut,Xt)=>(Ft++,s.length===1?`coords * strides[${Xt}] + begin[${Xt}]`:`coords[${Ft-1}] * strides[${Xt}] + begin[${Xt}]`)).join(",")}this.userCode=`
      ${_e} begin = ${_e}(${o});
      ${_e} strides = ${_e}(${i});

      void main() {
        ${ct} coords = getOutputCoords();
        setOutput(getX(${Mt}));
      }
    `}};function pre(o){let i,{inputs:s,backend:_,attrs:_e}=o,{x:ct}=s,{begin:Mt,end:Ft,strides:Ut,beginMask:Xt,endMask:Kt,ellipsisMask:nr,newAxisMask:rr,shrinkAxisMask:or}=_e,{finalShapeSparse:hr,finalShape:fr,isIdentity:yr,sliceDim0:Lr,isSimpleSlice:Br,begin:Vr,end:Wr,strides:ro}=pt.sliceInfo(ct.shape,Mt,Ft,Ut,Xt,Kt,nr,rr,or);if(yr)i=te({inputs:{x:ct},backend:_,attrs:{shape:fr}});else if(Lr||Br){y.assert(ct.shape.length>=1,()=>`Input must have rank at least 1, got: ${ct.shape.length}`);let so=pt.computeOutShape(Vr,Wr,ro),ko=Gs({inputs:{x:ct},backend:_,attrs:{begin:Vr,size:so}});i=te({inputs:{x:ko},backend:_,attrs:{shape:fr}}),_.disposeIntermediateTensorInfo(ko)}else if(_.shouldExecuteOnCPU([ct])){let so=_.readSync(ct.dataId),ko=me$1(ct.shape,ct.dtype,so),To=wD(hr,ko,ro,Vr);i=_.makeTensorInfo(fr,ct.dtype,To.values)}else{let so=new Rg(Vr,ro,hr);i=_.runWebGLProgram(so,[ct],ct.dtype)}let no=te({inputs:{x:i},backend:_,attrs:{shape:fr}});return _.disposeIntermediateTensorInfo(i),no}var iP={kernelName:Ns,backendName:"webgl",kernelFunc:pre};function cre(o){let{inputs:i,backend:s,attrs:_}=o,{separator:_e,nGramWidths:ct,leftPad:Mt,rightPad:Ft,padWidth:Ut,preserveShortSequences:Xt}=_,{data:Kt,dataSplits:nr}=i,rr=s.readSync(Kt.dataId),or=s.readSync(nr.dataId),[hr,fr]=SD(rr,or,_e,ct,Mt,Ft,Ut,Xt);return[s.makeTensorInfo([hr.length],"string",hr),s.makeTensorInfo(nr.shape,"int32",fr)]}var uP={kernelName:Ca,backendName:"webgl",kernelFunc:cre};function lre(o){let{inputs:i,backend:s,attrs:_}=o,{skipEmpty:_e}=_,{input:ct,delimiter:Mt}=i;if(ct.dtype!=="string")throw new Error("Input must be of datatype string");if(ct.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${ct.shape}`);if(Mt.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${Mt.shape}`);let Ft=s.readSync(ct.dataId),Ut=s.readSync(Mt.dataId)[0],[Xt,Kt,nr]=ID(Ft,Ut,_e),rr=Kt.length;return[s.makeTensorInfo([rr,2],"int32",Xt),s.makeTensorInfo([rr],"string",Kt),s.makeTensorInfo([2],"int32",new Int32Array(nr))]}var pP={kernelName:ji,backendName:"webgl",kernelFunc:lre};function mre(o){let{inputs:i,backend:s,attrs:_}=o,{numBuckets:_e}=_,{input:ct}=i;if(ct.dtype!=="string")throw new Error("Input must be of datatype string");if(_e<=0)throw new Error("Number of buckets must be at least 1");let Mt=s.readSync(ct.dataId),Ft=vD(Mt,_e);return s.makeTensorInfo(ct.shape,"int32",Ft)}var cP={kernelName:Xi,backendName:"webgl",kernelFunc:mre},dre="return tan(x);",fre=xe$1({opSnippet:dre}),lP={kernelName:_s,backendName:"webgl",kernelFunc:fre},hre=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,gre=xe$1({opSnippet:hre}),mP={kernelName:Es,backendName:"webgl",kernelFunc:gre};function xre(o){let{inputs:i,backend:s,attrs:_}=o,{tensor:_e,indices:ct,updates:Mt}=i,{sliceRank:Ft,numUpdates:Ut,sliceSize:Xt,strides:Kt,outputSize:nr}=w.calculateShapes(Mt,ct,_e.shape),rr=[nr/Xt,Xt];if(nr===0)return s.makeTensorInfo(_e.shape,ct.dtype);let or=te({inputs:{x:ct},backend:s,attrs:{shape:[Ut,Ft]}}),hr=te({inputs:{x:Mt},backend:s,attrs:{shape:[Ut,Xt]}}),fr=te({inputs:{x:_e},backend:s,attrs:{shape:rr}}),yr=new Cu(Ut,Ft,or.shape.length,hr.shape.length,Kt,rr,!1,!0),Lr=s.runWebGLProgram(yr,[hr,or,fr],fr.dtype),Br=te({inputs:{x:Lr},backend:s,attrs:{shape:_e.shape}});return s.disposeIntermediateTensorInfo(or),s.disposeIntermediateTensorInfo(hr),s.disposeIntermediateTensorInfo(fr),s.disposeIntermediateTensorInfo(Lr),Br}var dP={kernelName:ds,backendName:"webgl",kernelFunc:xre},Dg=class{constructor(o,i){this.variableNames=["A"];let s=new Array(o.length);for(let ct=0;ct<s.length;ct++)s[ct]=o[ct]*i[ct];this.outputShape=s,this.rank=s.length;let _=Re$1(this.rank),_e=yre(o);this.userCode=`
      void main() {
        ${_} resRC = getOutputCoords();
        setOutput(getA(${_e}));
      }
    `}};function yre(o){let i=o.length;if(i>5)throw Error(`Tile for rank ${i} is not yet supported`);if(i===1)return`imod(resRC, ${o[0]})`;let s=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],_=[];for(let _e=0;_e<o.length;_e++)_.push(`imod(${s[_e]}, ${o[_e]})`);return _.join()}function Fv(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{reps:ct}=_;if(_e.dtype==="string"||_e.shape.length>5){let Ft=s.readSync(_e.dataId),Ut=_e.dtype==="string"?Ft.map(nr=>y.decodeString(nr)):Ft,Xt=me$1(_e.shape,_e.dtype,Ut),Kt=ND(Xt,ct);return s.makeTensorInfo(Kt.shape,Kt.dtype,Kt.values)}let Mt=new Dg(_e.shape,ct);return s.runWebGLProgram(Mt,[_e],_e.dtype)}var fP={kernelName:po,backendName:"webgl",kernelFunc:Fv},Ag=class{constructor(o){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=o,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}},Fg=class{constructor(o){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=o,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}};function kp(o,i){i!==null&&o.disposeIntermediateTensorInfo(i)}function hP(o){let i=1;for(;i<o;)i*=2;return i}function bre(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{k:ct,sorted:Mt}=_,Ft=A().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),Ut=A().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),Xt=_e.shape,Kt=Xt[Xt.length-1];if(s.shouldExecuteOnCPU([_e])||Kt<Ft||ct>Ut){let To=s.readSync(_e.dataId),[oo,No]=TD(To,Xt,_e.dtype,ct,Mt);return[s.makeTensorInfo(oo.shape,oo.dtype,oo.values),s.makeTensorInfo(No.shape,No.dtype,No.values)]}if(ct===0)return Xt[Xt.length-1]=0,[s.makeTensorInfo(Xt,_e.dtype,[]),s.makeTensorInfo(Xt,"int32",[])];if(Kt===1)return[_e,Ci({attrs:{shape:Xt,dtype:"int32",value:0},backend:s})];let nr=s.texData.get(_e.dataId),rr=nr!==null&&nr.isPacked,or=rr?s.unpackTensor(_e):_e,hr=y.sizeFromShape(Xt)/Kt,fr=te({inputs:{x:or},attrs:{shape:[hr,Kt]},backend:s});rr&&kp(s,or);let yr=hP(ct),Lr=hP(Kt),Br=null,Vr=()=>Br===null?[fr,fr]:[fr,Br],Wr=(To,oo,No)=>{let As=Vr(),Ks=new Ag(No),vu=[[Kt],[Br===null?1:0],[Number.NEGATIVE_INFINITY],[To],[oo]],Fu=Br;Br=s.runWebGLProgram(Ks,As,"int32",vu),kp(s,Fu)};for(let To=1;To<yr;To*=2){let oo=2*To;for(let No=To;No>=1;No/=2)Wr(oo,No,[hr,Lr])}for(let To=Lr;To>yr;To/=2){let oo=Vr(),No=new Fg([hr,To/2]),As=[[Kt],[Br===null?1:0],[yr]],Ks=Br;Br=s.runWebGLProgram(No,oo,"int32",As),kp(s,Ks);let vu=yr/2,Fu=2*vu;for(let Ap=vu;Ap>=1;Ap/=2)Wr(Fu,Ap,Br.shape)}let ro=Br;Br=Gs({inputs:{x:Br},backend:s,attrs:{begin:0,size:[hr,ct]}}),kp(s,ro);let no=Tv({inputs:{x:fr,indices:Br},backend:s,attrs:{axis:1,batchDims:1}});kp(s,fr);let so=Xt.slice(0,-1);so.push(ct),ro=Br,Br=te({inputs:{x:Br},attrs:{shape:so},backend:s}),kp(s,ro);let ko=no;return no=te({inputs:{x:no},attrs:{shape:so},backend:s}),kp(s,ko),[no,Br]}var gP={kernelName:$s,backendName:"webgl",kernelFunc:bre},Pg=class{constructor(o,i,s,_,_e,ct){this.variableNames=["Image","Transforms"],this.outputShape=ct;let Mt,Ft=s==="nearest"?1:2;switch(_){case"constant":default:Mt=1;break;case"reflect":Mt=2;break;case"wrap":Mt=3;break;case"nearest":Mt=4}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${Mt} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${Mt} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${Mt} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${o} && 0 <= coordX && coordX < ${i}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${_e});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${_e});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${i}));
                float mapY = mapCoord(inY, float(${o}));

                if (${Ft} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}};function Cre(o){let{inputs:i,backend:s,attrs:_}=o,{image:_e,transforms:ct}=i,{interpolation:Mt,fillMode:Ft,fillValue:Ut,outputShape:Xt}=_,[Kt,nr,rr,or]=_e.shape,[hr,fr]=Xt??[nr,rr],yr=new Pg(nr,rr,Mt,Ft,Ut,[Kt,hr,fr,or]);return s.runWebGLProgram(yr,[_e,ct],"float32")}var xP={kernelName:Rs,backendName:"webgl",kernelFunc:Cre};function wre(o){let{inputs:i,attrs:s,backend:_}=o,{axis:_e}=s,{x:ct}=i;Vs(ct,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");let Mt=_.readSync(ct.dataId),{outputValues:Ft,outputShape:Ut,indices:Xt}=_D(Mt,_e,ct.shape,ct.dtype);return[_.makeTensorInfo(Ut,ct.dtype,Ft),_.makeTensorInfo([Xt.length],"int32",Xt)]}var yP={kernelName:Yi,backendName:"webgl",kernelFunc:wre};function Sre(o){let{inputs:i,backend:s,attrs:_}=o,{value:_e}=i,{axis:ct}=_;ct<0&&(ct+=_e.shape.length);let Mt=_e,Ft=Mt.shape.length,Ut=_e.shape[ct],Xt=new Array(Ft-1),Kt=0;for(let fr=0;fr<Ft;fr++)fr!==ct&&(Xt[Kt++]=Mt.shape[fr]);let nr=[],rr=new Array(Ft).fill(0),or=Mt.shape.slice();or[ct]=1;let hr=new Array(Ut);for(let fr=0;fr<hr.length;fr++){rr[ct]=fr;let yr=Gs({inputs:{x:Mt},backend:s,attrs:{begin:rr,size:or}}),Lr=te({inputs:{x:yr},backend:s,attrs:{shape:Xt}});hr[fr]=Lr,nr.push(yr)}return nr.forEach(fr=>s.disposeIntermediateTensorInfo(fr)),hr}var bP={kernelName:wa,backendName:"webgl",kernelFunc:Sre},Og=class{constructor(o,i){this.variableNames=["x","segmentIds"];let s=o.windowSize,_=o.batchSize,_e=o.inSize,ct=o.numSegments,Mt=ct*Math.ceil(_e/s);this.outputShape=[_,Mt];let Ft=4*Math.floor(s/4),Ut=s%4,Xt=`
        sumValue += dot(values, segFilter);
    `,Kt="";_e%s>0&&(Kt=`
        if (inIdx < 0 || inIdx >= ${_e}) {
          return initializationValue;
        }
      `);let nr="";_e%s>0&&(nr=`
        if (inIdx < 0 || inIdx >= ${_e}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = 0.0;

      float getValue(int batch, int inIdx) {
        ${Kt}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${nr}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${ct})) * float(${s}));
        int currentSeg = int(mod(float(outIdx), float(${ct})));

        float sumValue = 0.0;

        for (int i = 0; i < ${Ft}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${Xt}
        }

        int inIdx = inOffset + ${Ft};
        if (${Ut===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${Xt}
        } else if (${Ut===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${Xt}
        } else if (${Ut===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${Xt}
        }
        setOutput(sumValue);
      }
    `}};function Ire(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e,segmentIds:ct}=i,{numSegments:Mt}=_,Ft=_e.shape.length,Ut=[],Xt=0,Kt=w.getAxesPermutation([Xt],Ft),nr=_e;Kt!=null&&(nr=bt$2({inputs:{x:_e},backend:s,attrs:{perm:Kt}}),Ut.push(nr),Xt=w.getInnerMostAxes(1,Ft)[0]);let rr=w.segment_util.computeOutShape(nr.shape,Xt,Mt),or=y.sizeFromShape([nr.shape[Xt]]),hr=te({inputs:{x:nr},backend:s,attrs:{shape:[-1,or]}});Ut.push(hr);let fr=oi(_e.dtype),yr=(Vr,Wr,ro,no,so)=>{let ko=Vr.shape[0],To=Vr.shape[1],oo=w.segment_util.segOpComputeOptimalWindowSize(To,so),No=new Og({windowSize:oo,inSize:To,batchSize:ko,numSegments:so},Wr),As=s.compileAndRun(No,[Vr,ro],no);if(Ut.push(As),As.shape[1]===so)return As;let Ks=Av({backend:s,attrs:{start:0,stop:so,step:1,dtype:"float32"}}),vu=Fv({inputs:{x:Ks},backend:s,attrs:{reps:[To/oo]}});return Ut.push(Ks),Ut.push(vu),yr(As,Wr,vu,no,so)},Lr=te({inputs:{x:yr(hr,"unsortedSegmentSum",ct,fr,Mt)},backend:s,attrs:{shape:rr}}),Br=Lr;if(Kt!=null){Ut.push(Lr);let Vr=w.getUndoAxesPermutation(Kt);Br=bt$2({inputs:{x:Br},backend:s,attrs:{perm:Vr}})}return Ut.forEach(Vr=>s.disposeIntermediateTensorInfo(Vr)),Br}var CP={kernelName:Qi,backendName:"webgl",kernelFunc:Ire},vre=[rA,nA,sA,aA,uA,pA,cA,lA,fA,hA,gA,xA,yA,bA,CA,wA,SA,IA,vA,kA,NA,_A,EA,$A,RA,PA,MA,LA,KD,zA,WA,UA,GA,HA,KA,qA,jA,XA,YA,QA,eF,tF,rF,oF,nF,sF,aF,iF,uF,pF,cF,lF,mF,dF,fF,hF,xF,yF,bF,CF,SF,IF,vF,kF,NF,TF,_F,EF,$F,HD,RF,VA,DF,AF,FF,qD,PF,OF,MF,LF,BF,zF,VF,WF,UF,GF,KF,qF,jF,XF,YF,QF,JF,t3,r32,o3,n3,s3,c3,YD,l3,m3,d3,f3,DA,h3,y3,b3,C3,w3,jD,S3,I3,v3,k3,N3,AA,a3,T3,_3,E3,ZD,$3,R3,D3,A3,F3,P3,O3,M3,L3,B3,z3,V3,W3,U3,G3,H3,TA,p3,K3,q3,j3,X3,Y3,Q3,Z3,J3,tP,rP,nP,sP,aP,iP,uP,pP,cP,u3,eA,lP,mP,dP,fP,gP,xP,tA,yP,bP,CP,g3],we$1,wu,wP;for(let o of vre)ti(o);function kre(o){wP=o.wasm.cwrap(So,null,["number","array","number","number","array","number","number","number","number","number","number","number","number"])}function Nre(o){let{inputs:i,backend:s,attrs:_}=o,{a:_e,b:ct,bias:Mt,preluActivationWeights:Ft}=i;if(_e.dtype!=="float32"||ct.dtype!=="float32")throw new Error("_FusedMatMul for non non-float32 tensors not yet supported.");let{transposeA:Ut,transposeB:Xt,activation:Kt,leakyreluAlpha:nr}=_,rr=s.dataIdMap.get(_e.dataId).id,or=s.dataIdMap.get(ct.dataId).id,hr=0;if(Mt!=null){let ko=s.dataIdMap.get(Mt.dataId);if(ko.shape.length!==1)throw new Error(`_FusedMatMul only supports rank-1 bias but got rank ${ko.shape.length}.`);hr=ko.id}let fr=Ft==null?0:s.dataIdMap.get(Ft.dataId).id,yr=wu[Kt];if(yr==null)throw new Error(`${Kt} activation not yet supported for FusedConv2D in the wasm backend.`);let Lr=Ut?_e.shape[2]:_e.shape[1],Br=Xt?ct.shape[1]:ct.shape[2],Vr=Sr.assertAndGetBroadcastShape(_e.shape.slice(0,-2),ct.shape.slice(0,-2)),Wr=s.makeOutput([...Vr,Lr,Br],_e.dtype),ro=s.dataIdMap.get(Wr.dataId).id,no=new Uint8Array(new Int32Array(_e.shape).buffer),so=new Uint8Array(new Int32Array(ct.shape).buffer);return wP(rr,no,_e.shape.length,or,so,ct.shape.length,Ut,Xt,yr,hr,fr,nr||0,ro),Wr}(function(o){o[o.float32=0]="float32",o[o.int32=1]="int32",o[o.bool=2]="bool",o[o.string=3]="string",o[o.complex64=4]="complex64"})(we$1||(we$1={})),function(o){o[o.linear=0]="linear",o[o.relu=1]="relu",o[o.relu6=2]="relu6",o[o.prelu=3]="prelu",o[o.leakyrelu=4]="leakyrelu",o[o.sigmoid=5]="sigmoid",o[o.elu=6]="elu"}(wu||(wu={}));var SP={kernelName:So,backendName:"wasm",setupFunc:kre,kernelFunc:Nre};function he$1(o,i){let s;return{kernelName:o,backendName:"wasm",setupFunc:function(_){s=_.wasm.cwrap(o,null,["number","number","number"])},kernelFunc:function(_){let{backend:_e,inputs:{x:ct}}=_,Mt=_e.dataIdMap.get(ct.dataId).id,Ft=_e.makeOutput(ct.shape,i||ct.dtype),Ut=_e.dataIdMap.get(Ft.dataId).id;return y.sizeFromShape(Ft.shape)===0||s(Mt,we$1[ct.dtype],Ut),Ft}}}var IP=he$1(Xs),vP=he$1(Vo),kP=he$1(Wo);function Ge(o,i,s){let _;return{kernelName:o,backendName:"wasm",setupFunc:function(_e){_=_e.wasm.cwrap(o,null,["number","array","number","number","array","number","number","number"])},kernelFunc:function(_e){let{backend:ct,inputs:Mt}=_e,{a:Ft,b:Ut}=Mt,Xt=ct.dataIdMap.get(Ft.dataId).id,Kt=ct.dataIdMap.get(Ut.dataId).id,nr=s??Ft.dtype,rr=w.assertAndGetBroadcastShape(Ft.shape,Ut.shape),or=ct.makeOutput(rr,nr);if(y.sizeFromShape(rr)===0)return or;let hr=new Uint8Array(new Int32Array(Ft.shape).buffer),fr=new Uint8Array(new Int32Array(Ut.shape).buffer),yr=ct.dataIdMap.get(or.dataId).id;return _(Xt,hr,Ft.shape.length,Kt,fr,Ut.shape.length,we$1[Ft.dtype],yr),or}}}var NP=Ge(uo),TP;function _re(o){TP=o.wasm.cwrap(Uo,null,["array","number","number","number"])}function Ere(o){let{inputs:i,backend:s}=o,_=s.makeOutput(i[0].shape,i[0].dtype);if(y.sizeFromShape(_.shape)===0)return _;let _e=i.map(Ft=>s.dataIdMap.get(Ft.dataId).id),ct=new Uint8Array(new Int32Array(_e).buffer),Mt=s.dataIdMap.get(_.dataId).id;return TP(ct,_e.length,we$1[_.dtype],Mt),_}var _P={kernelName:Uo,backendName:"wasm",setupFunc:_re,kernelFunc:Ere};function Np(o){let{inputs:{x:i},backend:s}=o;if(i.dtype==="string")return ar(s.readSync(i.dataId),i.shape,i.dtype);let _=s.makeOutput(i.shape,i.dtype),_e=s.typedArrayFromHeap(i);return s.typedArrayFromHeap(_).set(_e),_}var EP={kernelName:Co,backendName:"wasm",kernelFunc:Np},$P;function $re(o){$P=o.wasm.cwrap(co,null,["number","array","number","number","number","array","number"])}function ho(o){let{inputs:i,backend:s,attrs:_}=o,[_e,ct]=Dre(i.x.shape,_.perm),Mt=!0;for(let hr=0;hr<ct.length;hr++)ct[hr]!==hr&&(Mt=!1);let Ft=Rre(i.x.shape,_.perm),Ut={dataId:i.x.dataId,shape:_e,dtype:i.x.dtype};if(Mt){let hr=Np({inputs:i,backend:s});return hr.shape=Ft,hr}let Xt=s.makeOutput(Ft,Ut.dtype),Kt=s.dataIdMap.get(Ut.dataId).id,nr=s.dataIdMap.get(Xt.dataId).id,rr=new Uint8Array(new Int32Array(ct).buffer),or=new Uint8Array(new Int32Array(Ut.shape).buffer);return $P(Kt,or,Ut.shape.length,we$1[Ut.dtype],nr,rr,ct.length),Xt}function Rre(o,i){let s=new Array(o.length);for(let _=0;_<s.length;_++)s[_]=o[i[_]];return s}function Dre(o,i){let s=[],_=[];for(let _e=0;_e<o.length;++_e)o[_e]!==1&&s.push(o[_e]),o[i[_e]]!==1&&_.push(i[_e]);for(let _e=0;_e<_.length;++_e){let ct=-1;for(let Mt=0;Mt<_.length;++Mt)_[Mt]>=_e&&(ct===-1||_[ct]>_[Mt])&&(ct=Mt);_[ct]=_e}return[s,_]}var RP={kernelName:co,backendName:"wasm",kernelFunc:ho,setupFunc:$re},DP;function Tr(o,i,s){let _=o.shape,_e=o.shape.length,ct=y.parseAxisParam(i,_),Mt=ct,Ft=w.getAxesPermutation(Mt,_e),Ut=null,Xt=!1;if(Ft!=null){let Kt=new Array(_e);for(let rr=0;rr<Kt.length;rr++)Kt[rr]=_[Ft[rr]];Mt=w.getInnerMostAxes(Mt.length,_e),Ut=ho({inputs:{x:o},attrs:{perm:Ft},backend:s});let nr=s.dataIdMap.get(o.dataId).id;s.dataIdMap.get(Ut.dataId).id!==nr&&(Xt=!0)}return{transposed:Ut,originalAxes:ct,axes:Mt,inputWasTransposed:Xt}}function Are(o){DP=o.wasm.cwrap(Go,null,["number, number, number"])}function Fre(o){let{backend:i,inputs:s,attrs:_}=o,{axis:_e,keepDims:ct}=_,{x:Mt}=s,Ft=i.dataIdMap.get(Mt.dataId).id,Ut=Mt,{transposed:Xt,axes:Kt,originalAxes:nr,inputWasTransposed:rr}=Tr(Mt,_e,i);rr&&(Ut=Xt,Ft=i.dataIdMap.get(Xt.dataId).id);let or=Ut.shape.length;w.assertAxesAreInnerMostDims("all",Kt,or);let[hr,fr]=w.computeOutAndReduceShapes(Ut.shape,Kt),yr=y.sizeFromShape(fr),Lr=i.makeOutput(hr,Mt.dtype);if(y.sizeFromShape(Ut.shape)!==0){let Br=i.dataIdMap.get(Lr.dataId).id;DP(Ft,yr,Br)}if(rr&&i.disposeData(Xt.dataId),ct){let Br=w.expandShapeToKeepDim(Lr.shape,nr);Lr.shape=Br}return Lr}var AP={kernelName:Go,backendName:"wasm",setupFunc:Are,kernelFunc:Fre},FP;function Pre(o){FP=o.wasm.cwrap(Ho,null,["number, number, number"])}function Ore(o){let{backend:i,inputs:s,attrs:_}=o,{axis:_e,keepDims:ct}=_,{x:Mt}=s,Ft=i.dataIdMap.get(Mt.dataId).id,Ut=Mt,{transposed:Xt,axes:Kt,originalAxes:nr,inputWasTransposed:rr}=Tr(Mt,_e,i);rr&&(Ut=Xt,Ft=i.dataIdMap.get(Xt.dataId).id);let or=Ut.shape.length;w.assertAxesAreInnerMostDims("any",Kt,or);let[hr,fr]=w.computeOutAndReduceShapes(Ut.shape,Kt),yr=y.sizeFromShape(fr),Lr=i.makeOutput(hr,Mt.dtype);if(y.sizeFromShape(Ut.shape)!==0){let Br=i.dataIdMap.get(Lr.dataId).id;FP(Ft,yr,Br)}if(rr&&i.disposeData(Xt.dataId),ct){let Br=w.expandShapeToKeepDim(Lr.shape,nr);Lr.shape=Br}return Lr}var PP={kernelName:Ho,backendName:"wasm",setupFunc:Pre,kernelFunc:Ore};function Mg(o){let i;return{kernelName:o,backendName:"wasm",setupFunc:function(s){i=s.wasm.cwrap(o,null,["number","number","number","number","number"])},kernelFunc:function(s){let{backend:_,inputs:_e,attrs:ct}=s,{axis:Mt}=ct,{x:Ft}=_e,Ut=_.dataIdMap.get(Ft.dataId).id,Xt=Ut,Kt=Ft,{transposed:nr,axes:rr,inputWasTransposed:or}=Tr(Ft,Mt,_);if(or){let Vr=_.dataIdMap.get(nr.dataId).id;Vr!==Ut&&(Kt=nr,Xt=Vr)}let hr=Kt.shape.slice(0,-1),fr=_.makeOutput(hr,"int32"),yr=_.dataIdMap.get(fr.dataId).id,Lr=y.sizeFromShape(fr.shape),Br=Kt.shape[rr[0]];return i(Xt,we$1[Kt.dtype],Lr,Br,yr),or&&_.disposeData(nr.dataId),fr}}}var OP=Mg(Ys),MP=Mg(Qs),LP=he$1(Ko),BP=he$1(qo),zP=he$1(jo),VP=Ge(Yo),WP=he$1(Xo),UP;function Mre(o){UP=o.wasm.cwrap(Qo,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function Lre(o){let{inputs:i,attrs:s,backend:_}=o,_e=i.x,ct=_.dataIdMap.get(_e.dataId).id,{filterSize:Mt,strides:Ft,pad:Ut,dimRoundingMode:Xt}=s,Kt=w.computePool2DInfo(_e.shape,Mt,Ft,1,Ut,Xt),nr=Kt.filterHeight,rr=Kt.filterWidth,or=Kt.padInfo.top,hr=Kt.padInfo.right,fr=Kt.padInfo.bottom,yr=Kt.padInfo.left,Lr=Kt.strideHeight,Br=Kt.strideWidth,Vr=Kt.inChannels;if(Kt.dataFormat!=="channelsLast")throw new Error(`wasm backend does not support dataFormat:'${Kt.dataFormat}'. Please use 'channelsLast'.`);if(Kt.dilationWidth!==1||Kt.dilationHeight!==1)throw new Error(`was backend only supports average pooling with dilation = [1, 1], got [${Kt.dilationHeight}, ${Kt.dilationWidth}].`);let Wr=_.makeOutput(Kt.outShape,"float32"),ro=_.dataIdMap.get(Wr.dataId).id;return UP(ct,_e.shape[0],_e.shape[1],_e.shape[2],nr,rr,or,hr,fr,yr,Lr,Br,Vr,ro),Wr}var GP={kernelName:Qo,backendName:"wasm",setupFunc:Mre,kernelFunc:Lre},HP;function Bre(o){HP=o.wasm.cwrap("AvgPool3D",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function zre(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{filterSize:ct,strides:Mt,pad:Ft,dimRoundingMode:Ut,dataFormat:Xt}=_,Kt=w.computePool3DInfo(_e.shape,ct,Mt,1,Ft,Ut,Xt),nr=s.makeOutput(Kt.outShape,_e.dtype);return HP(s.dataIdMap.get(_e.dataId).id,s.dataIdMap.get(nr.dataId).id,Kt.batchSize,Kt.inChannels,Kt.inDepth,Kt.inHeight,Kt.inWidth,Kt.outDepth,Kt.outHeight,Kt.outWidth,Kt.strideDepth,Kt.strideHeight,Kt.strideWidth,Kt.dilationDepth,Kt.dilationHeight,Kt.dilationWidth,Kt.effectiveFilterDepth,Kt.effectiveFilterHeight,Kt.effectiveFilterWidth,Kt.padInfo.front,Kt.padInfo.top,Kt.padInfo.left),nr}var KP={kernelName:Zs,backendName:"wasm",setupFunc:Bre,kernelFunc:zre},qP;function Vre(o){qP=o.wasm.cwrap("AvgPool3DGrad",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function Wre(o){let{inputs:i,backend:s,attrs:_}=o,{dy:_e,input:ct}=i,{filterSize:Mt,strides:Ft,pad:Ut,dimRoundingMode:Xt}=_,Kt=w.computePool3DInfo(ct.shape,Mt,Ft,1,Ut,Xt),nr=s.makeOutput(ct.shape,ct.dtype);return qP(s.dataIdMap.get(_e.dataId).id,s.dataIdMap.get(nr.dataId).id,Kt.batchSize,Kt.inChannels,Kt.inDepth,Kt.inHeight,Kt.inWidth,Kt.outDepth,Kt.outHeight,Kt.outWidth,Kt.strideDepth,Kt.strideHeight,Kt.strideWidth,Kt.dilationDepth,Kt.dilationHeight,Kt.dilationWidth,Kt.effectiveFilterDepth,Kt.effectiveFilterHeight,Kt.effectiveFilterWidth,Kt.padInfo.front,Kt.padInfo.top,Kt.padInfo.left,Kt.filterDepth,Kt.filterHeight,Kt.filterWidth),nr}var jP={kernelName:Ri,backendName:"wasm",setupFunc:Vre,kernelFunc:Wre},XP;function Ure(o){XP=o.wasm.cwrap("AvgPoolGrad",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function Gre(o){let{inputs:i,backend:s,attrs:_}=o,{dy:_e,input:ct}=i,{filterSize:Mt,strides:Ft,pad:Ut}=_,Xt=w.computePool2DInfo(ct.shape,Mt,Ft,1,Ut),Kt=s.makeOutput(ct.shape,ct.dtype);return XP(s.dataIdMap.get(_e.dataId).id,s.dataIdMap.get(Kt.dataId).id,Xt.batchSize,Xt.inChannels,Xt.inHeight,Xt.inWidth,Xt.outHeight,Xt.outWidth,Xt.strideHeight,Xt.strideWidth,Xt.dilationHeight,Xt.dilationWidth,Xt.effectiveFilterHeight,Xt.effectiveFilterWidth,Xt.padInfo.top,Xt.padInfo.left,Xt.filterHeight,Xt.filterWidth),Kt}var YP={kernelName:$i,backendName:"wasm",setupFunc:Ure,kernelFunc:Gre};function zt(o){let{inputs:i,attrs:s}=o,{x:_}=i,{shape:_e}=s,ct=y.sizeFromShape(_.shape),Mt=y.inferFromImplicitShape(_e,ct);return y.assert(ct===y.sizeFromShape(Mt),()=>`new shape: ${Mt}, old shape: ${_.shape}. New shape and old shape must have the same number of elements.`),o.backend.incRef(_.dataId),{dataId:_.dataId,shape:Mt,dtype:_.dtype}}var QP={kernelName:da,backendName:"wasm",kernelFunc:zt},ZP;function Hre(o){ZP=o.wasm.cwrap(Zo,null,["number","array","number","number","array","number","number","number","number"])}function Kre(o){let{inputs:i,backend:s,attrs:_}=o,{a:_e,b:ct}=i,{transposeA:Mt,transposeB:Ft}=_;if(_e.dtype!=="float32"||ct.dtype!=="float32")throw new Error("BatchMatMul for non non-float32 tensors not yet supported.");let Ut=_e.shape.length,Xt=ct.shape.length,Kt=Mt?_e.shape[Ut-2]:_e.shape[Ut-1],nr=Ft?ct.shape[Xt-1]:ct.shape[Xt-2],rr=Mt?_e.shape[Ut-1]:_e.shape[Ut-2],or=Ft?ct.shape[Xt-2]:ct.shape[Xt-1],hr=_e.shape.slice(0,-2),fr=ct.shape.slice(0,-2),yr=y.sizeFromShape(hr),Lr=y.sizeFromShape(fr),Br=Sr.assertAndGetBroadcastShape(_e.shape.slice(0,-2),ct.shape.slice(0,-2)).concat([rr,or]);y.assert(Kt===nr,()=>`Error in matMul: inner shapes (${Kt}) and (${nr}) of Tensors with shapes ${_e.shape} and ${ct.shape} and transposeA=${Mt} and transposeB=${Ft} must match.`);let Vr=Ft?[Lr,or,nr]:[Lr,nr,or],Wr=zt({inputs:{x:_e},backend:s,attrs:{shape:Mt?[yr,Kt,rr]:[yr,rr,Kt]}}),ro=zt({inputs:{x:ct},backend:s,attrs:{shape:Vr}}),no=s.dataIdMap.get(Wr.dataId).id,so=s.dataIdMap.get(ro.dataId).id,ko=Mt?Wr.shape[2]:Wr.shape[1],To=Ft?ro.shape[1]:ro.shape[2],oo=Math.max(yr,Lr),No=s.makeOutput([oo,ko,To],Wr.dtype),As=s.dataIdMap.get(No.dataId).id,Ks=new Uint8Array(new Int32Array(Wr.shape).buffer),vu=new Uint8Array(new Int32Array(ro.shape).buffer);return ZP(no,Ks,Wr.shape.length,so,vu,ro.shape.length,Mt,Ft,As),s.disposeData(Wr.dataId),s.disposeData(ro.dataId),No.shape=Br,No}var JP={kernelName:Zo,backendName:"wasm",setupFunc:Hre,kernelFunc:Kre};function Po(o){let{inputs:{x:i},attrs:{begin:s,size:_},backend:_e}=o,[ct,Mt]=pt.parseSliceParams(i,s,_),Ft=pt.isSliceContinous(i.shape,ct,Mt),Ut=_e.readSync(i.dataId),Xt=_e.makeOutput(Mt,i.dtype),Kt=y.computeStrides(i.shape),nr=_e.dataIdMap.get(Xt.dataId);if(Ft){let hr=pt.computeFlatOffset(ct,Kt);return i.dtype==="string"?nr.stringBytes=Ut.slice(hr,hr+y.sizeFromShape(Mt)):_e.typedArrayFromHeap(Xt).set(Ut.subarray(hr,hr+y.sizeFromShape(Mt))),Xt}if(i.dtype==="string"){let hr=pp(Ut,ct,Mt,i.shape,i.dtype);return nr.stringBytes=hr,Xt}let rr=_e.typedArrayFromHeap(Xt),or=i.shape.length;if(or===2)qre(Ut,Kt[0],rr,ct,Mt);else if(or===3)jre(Ut,Kt[0],Kt[1],rr,ct,Mt);else if(or===4)Xre(Ut,Kt[0],Kt[1],Kt[2],rr,ct,Mt);else{let hr=pp(Ut,ct,Mt,i.shape,i.dtype);rr.set(hr)}return Xt}function qre(o,i,s,_,_e){let ct=0,Mt=_[0],Ft=_[1],Ut=Mt+_e[0];for(let Xt=Mt;Xt<Ut;Xt++){let Kt=Xt*i+Ft;s.set(o.subarray(Kt,Kt+_e[1]),ct),ct+=_e[1]}}function jre(o,i,s,_,_e,ct){let Mt=0,Ft=_e[0],Ut=_e[1],Xt=_e[2],Kt=Ft+ct[0],nr=Ut+ct[1];for(let rr=Ft;rr<Kt;rr++)for(let or=Ut;or<nr;or++){let hr=rr*i+or*s+Xt;_.set(o.subarray(hr,hr+ct[2]),Mt),Mt+=ct[2]}}function Xre(o,i,s,_,_e,ct,Mt){let Ft=0,Ut=ct[0],Xt=ct[1],Kt=ct[2],nr=Ut+Mt[0],rr=Xt+Mt[1],or=Kt+Mt[2],hr=ct[3];for(let fr=Ut;fr<nr;fr++)for(let yr=Xt;yr<rr;yr++)for(let Lr=Kt;Lr<or;Lr++){let Br=fr*i+yr*s+Lr*_+hr;_e.set(o.subarray(Br,Br+Mt[3]),Ft),Ft+=Mt[3]}}var eO={kernelName:ha,backendName:"wasm",kernelFunc:Po};function Yre(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{blockShape:ct,crops:Mt}=_,Ft=ct.reduce((Lr,Br)=>Lr*Br),Ut=w.getReshaped(_e.shape,ct,Ft),Xt=w.getPermuted(Ut.length,ct.length),Kt=w.getReshapedPermuted(_e.shape,ct,Ft),nr=w.getSliceBeginCoords(Mt,ct.length),rr=w.getSliceSize(Kt,Mt,ct.length),or=zt({inputs:{x:_e},backend:s,attrs:{shape:Ut}}),hr=ho({inputs:{x:or},backend:s,attrs:{perm:Xt}}),fr=zt({inputs:{x:hr},backend:s,attrs:{shape:Kt}}),yr=Po({inputs:{x:fr},backend:s,attrs:{begin:nr,size:rr}});return s.disposeData(or.dataId),s.disposeData(hr.dataId),s.disposeData(fr.dataId),yr}var tO={kernelName:Js,backendName:"wasm",kernelFunc:Yre},rO;function Qre(o){rO=o.wasm.cwrap(Jo,null,["number","number","boolean","number","number","number"])}function Zre(o){let{backend:i,inputs:s,attrs:_}=o,{x:_e,weights:ct}=s,{size:Mt}=_,Ft=ct.shape.reduce((nr,rr)=>nr*rr,1)!==0,Ut=_e.shape.length===1?[Mt]:[_e.shape[0],Mt],Xt=i.makeOutput(Ut,ct.dtype);function Kt(nr){return i.dataIdMap.get(nr.dataId).id}return rO(Kt(_e),Mt,Ft,Kt(ct),we$1[ct.dtype],Kt(Xt)),Xt}var oO={kernelName:Jo,backendName:"wasm",setupFunc:Qre,kernelFunc:Zre},nO=Ge(qa);function eoe(o){let{inputs:i,backend:s}=o,{s0:_,s1:_e}=i,ct=s.typedArrayFromHeap(_),Mt=s.typedArrayFromHeap(_e),Ft=w.assertAndGetBroadcastShape(Array.from(ct),Array.from(Mt));return s.makeOutput([Ft.length],"int32",void 0,new Int32Array(Ft))}var sO={kernelName:ea,backendName:"wasm",kernelFunc:eoe};function Mr(o){let{inputs:{x:i},attrs:{dtype:s},backend:_}=o,_e=_.makeOutput(i.shape,s),ct=_.typedArrayFromHeap(i);return _.typedArrayFromHeap(_e).set(ct),_e}var aO={kernelName:yo,backendName:"wasm",kernelFunc:Mr},iO=he$1(en),uO;function toe(o){uO=o.wasm.cwrap(bo,null,["number","number","number","number"])}function roe(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{clipValueMin:ct,clipValueMax:Mt}=_,Ft=s.dataIdMap.get(_e.dataId).id,Ut=s.makeOutput(_e.shape,_e.dtype),Xt=s.dataIdMap.get(Ut.dataId).id;return uO(Ft,ct,Mt,Xt),Ut}var pO={kernelName:bo,backendName:"wasm",setupFunc:toe,kernelFunc:roe};function Pv(o){let{inputs:i,backend:s}=o,_=y.parseAxisParam(o.attrs.axis,i[0].shape)[0],_e=i.map(or=>or.shape);w.assertParamsConsistent(_e,_);let ct=w.computeOutShape(i.map(or=>or.shape),_),Mt=i.filter(or=>y.sizeFromShape(or.shape)>0);if(Mt.length===1)return Np({inputs:{x:Mt[0]},backend:s});let Ft=s.makeOutput(ct,i[0].dtype);if(y.sizeFromShape(ct)===0)return Ft;if(Mt[0].dtype==="string"){let or=Mt.map(Br=>{let Vr=[-1,y.sizeFromShape(Br.shape.slice(_))];return zt({inputs:{x:Br},backend:s,attrs:{shape:Vr}})}),hr=or.map(Br=>({vals:s.readSync(Br.dataId),shape:Br.shape}));ct=w.computeOutShape(or.map(Br=>Br.shape),1);let fr=or[0].shape[0]===1,yr=ap(hr,ct,i[0].dtype,fr),Lr=w.computeOutShape(Mt.map(Br=>Br.shape),_);return Ft.shape=Lr,s.dataIdMap.get(Ft.dataId).stringBytes=w.fromStringArrayToUint8(yr),or.forEach(Br=>s.disposeData(Br.dataId)),Ft}let Ut=y.sizeFromShape(Mt[0].shape.slice(0,_)),Xt=0,Kt=Mt.map(or=>{let hr=y.sizeFromShape(or.shape.slice(_));return Xt+=hr,hr}),nr=Mt.map(or=>s.typedArrayFromHeap(or)),rr=s.typedArrayFromHeap(Ft);for(let or=0;or<Ut;or++){let hr=or*Xt;for(let fr=0;fr<nr.length;fr++){let yr=Kt[fr],Lr=or*yr,Br=nr[fr].subarray(Lr,Lr+yr);rr.set(Br,hr),hr+=yr}}return Ft}var cO={kernelName:ta,backendName:"wasm",kernelFunc:Pv},lO;function ooe(o){lO=o.wasm.cwrap(tn,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function noe(o){let{inputs:i,attrs:s,backend:_}=o,{x:_e,filter:ct}=i,Mt=_.dataIdMap.get(_e.dataId).id,Ft=_.dataIdMap.get(ct.dataId).id,{strides:Ut,dilations:Xt,pad:Kt,dimRoundingMode:nr,dataFormat:rr}=s,or=w.convertConv2DDataFormat(rr),hr=w.computeConv2DInfo(_e.shape,ct.shape,Ut,Xt,Kt,nr,!1,or),fr=hr.filterHeight,yr=hr.filterWidth,Lr=hr.padInfo.top,Br=hr.padInfo.right,Vr=hr.padInfo.bottom,Wr=hr.padInfo.left,ro=hr.dilationHeight,no=hr.dilationWidth,so=hr.strideHeight,ko=hr.strideWidth,To=hr.inChannels,oo=hr.outChannels,No=hr.padInfo.type==="SAME"?1:0;if(hr.dataFormat!=="channelsLast")throw new Error(`wasm backend Conv2D does not support dataFormat:'${hr.dataFormat}'. Please use 'channelsLast'.`);let As=_.makeOutput(hr.outShape,"float32"),Ks=_.dataIdMap.get(As.dataId).id;return lO(Mt,_e.shape[0],_e.shape[1],_e.shape[2],Ft,fr,yr,Lr,Br,Vr,Wr,No,ro,no,so,ko,To,oo,Ks),As}var mO={kernelName:tn,backendName:"wasm",setupFunc:ooe,kernelFunc:noe},dO;function soe(o){dO=o.wasm.cwrap(rn,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function aoe(o){let{backend:i,inputs:s,attrs:_}=o,{dy:_e,filter:ct}=s,{strides:Mt,pad:Ft,dataFormat:Ut,dimRoundingMode:Xt,inputShape:Kt}=_,nr=w.convertConv2DDataFormat(Ut),rr=w.computeConv2DInfo(Kt,ct.shape,Mt,1,Ft,Xt,!1,nr),{batchSize:or,filterHeight:hr,filterWidth:fr,inChannels:yr,inHeight:Lr,inWidth:Br,outChannels:Vr,outHeight:Wr,outWidth:ro,strideHeight:no,strideWidth:so}=rr,ko=hr-1-rr.padInfo.top,To=fr-1-rr.padInfo.left,oo=rr.dataFormat==="channelsLast",No=y.computeStrides(rr.inShape),As=y.computeStrides(_e.shape),[Ks,vu,Fu]=y.computeStrides(ct.shape),Ap=No[0],Pp=oo?No[1]:No[2],Lo=oo?No[2]:1,Au=oo?1:No[1],Mp=As[0],Lp=oo?As[1]:As[2],Op=oo?As[2]:1,Fp=oo?1:As[1],wm=i.makeOutput(rr.inShape,"float32"),Bp=i.dataIdMap.get(wm.dataId).id,Em=i.dataIdMap.get(_e.dataId).id,Yp=i.dataIdMap.get(ct.dataId).id;return dO(Em,Yp,or,hr,fr,Lr,Br,yr,Wr,ro,Vr,no,so,ko,To,Ks,vu,Fu,Ap,Pp,Lo,Au,Mp,Lp,Op,Fp,Bp),wm}var fO={kernelName:rn,backendName:"wasm",setupFunc:soe,kernelFunc:aoe},hO;function ioe(o){hO=o.wasm.cwrap(on,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function uoe(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e,filter:ct}=i,{strides:Mt,pad:Ft,dilations:Ut}=_;if(_e.dtype!=="float32")throw new Error(`Tensor x must have dtype float32, got ${_e.dtype}`);if(ct.dtype!=="float32")throw new Error(`Tensor filter must have dtype float32, got ${ct.dtype}`);let Xt=w.computeConv3DInfo(_e.shape,ct.shape,Mt,Ut,Ft),Kt=s.makeOutput(Xt.outShape,_e.dtype);return hO(s.dataIdMap.get(_e.dataId).id,s.dataIdMap.get(ct.dataId).id,s.dataIdMap.get(Kt.dataId).id,Xt.batchSize,Xt.inDepth,Xt.inHeight,Xt.inWidth,Xt.inChannels,Xt.outDepth,Xt.outHeight,Xt.outWidth,Xt.outChannels,Xt.strideDepth,Xt.strideHeight,Xt.strideWidth,Xt.dilationDepth,Xt.dilationHeight,Xt.dilationWidth,Xt.filterDepth,Xt.filterHeight,Xt.filterWidth,Xt.padInfo.front,Xt.padInfo.top,Xt.padInfo.left),Kt}var gO={kernelName:on,backendName:"wasm",setupFunc:ioe,kernelFunc:uoe},xO;function poe(o){xO=o.wasm.cwrap(ja,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function coe(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e,dy:ct}=i,{strides:Mt,pad:Ft,filterShape:Ut}=_;if(_e.dtype!=="float32")throw new Error(`Tensor dy must have dtype float32, got ${_e.dtype}`);if(ct.dtype!=="float32")throw new Error(`Tensor filter must have dtype float32, got ${ct.dtype}`);let Xt=w.computeConv3DInfo(_e.shape,Ut,Mt,1,Ft),Kt=s.makeOutput(Xt.filterShape,ct.dtype);return xO(s.dataIdMap.get(_e.dataId).id,s.dataIdMap.get(ct.dataId).id,s.dataIdMap.get(Kt.dataId).id,Xt.batchSize,Xt.inDepth,Xt.inHeight,Xt.inWidth,Xt.inChannels,Xt.outDepth,Xt.outHeight,Xt.outWidth,Xt.outChannels,Xt.strideDepth,Xt.strideHeight,Xt.strideWidth,Xt.dilationDepth,Xt.dilationHeight,Xt.dilationWidth,Xt.filterDepth,Xt.filterHeight,Xt.filterWidth,Xt.padInfo.front,Xt.padInfo.top,Xt.padInfo.left),Kt}var yO={kernelName:ja,backendName:"wasm",setupFunc:poe,kernelFunc:coe},bO;function loe(o){bO=o.wasm.cwrap(nn,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function moe(o){let{inputs:i,backend:s,attrs:_}=o,{dy:_e,filter:ct}=i,{pad:Mt,strides:Ft,inputShape:Ut}=_;if(_e.dtype!=="float32")throw new Error(`Tensor dy must have dtype float32, got ${_e.dtype}`);if(ct.dtype!=="float32")throw new Error(`Tensor filter must have dtype float32, got ${ct.dtype}`);let Xt=w.computeConv3DInfo(Ut,ct.shape,Ft,1,Mt),Kt=s.makeOutput(Xt.inShape,_e.dtype);return bO(s.dataIdMap.get(ct.dataId).id,s.dataIdMap.get(_e.dataId).id,s.dataIdMap.get(Kt.dataId).id,Xt.batchSize,Xt.inDepth,Xt.inHeight,Xt.inWidth,Xt.inChannels,Xt.outDepth,Xt.outHeight,Xt.outWidth,Xt.outChannels,Xt.strideDepth,Xt.strideHeight,Xt.strideWidth,Xt.dilationDepth,Xt.dilationHeight,Xt.dilationWidth,Xt.filterDepth,Xt.filterHeight,Xt.filterWidth,Xt.padInfo.front,Xt.padInfo.top,Xt.padInfo.left),Kt}var CO={kernelName:nn,backendName:"wasm",setupFunc:loe,kernelFunc:moe},wO=he$1(sn),SO=he$1(an),Ov,IO;function doe(o){IO=o.wasm.cwrap(cn,null,["number","number","number","number","array","number","number","number","number","number"])}function foe(o){let i,{backend:s,inputs:_,attrs:_e}=o,{method:ct,extrapolationValue:Mt,cropSize:Ft}=_e,{image:Ut,boxes:Xt,boxInd:Kt}=_,nr=Xt.shape[0],[rr,or]=Ft,hr=[nr,rr,or,Ut.shape[3]],fr=s.dataIdMap.get(Ut.dataId);Ut.dtype!=="float32"&&(i=Mr({backend:s,inputs:{x:Ut},attrs:{dtype:"float32"}}),fr=s.dataIdMap.get(i.dataId));let yr=fr.id,Lr=s.dataIdMap.get(Xt.dataId).id,Br=s.dataIdMap.get(Kt.dataId).id,Vr=s.makeOutput(hr,"float32"),Wr=s.dataIdMap.get(Vr.dataId).id,ro=new Uint8Array(new Int32Array(Ut.shape).buffer);return IO(yr,Lr,Br,nr,ro,rr,or,Ov[ct],Mt,Wr),i!=null&&s.disposeData(i.dataId),Vr}(function(o){o[o.bilinear=0]="bilinear",o[o.nearest=1]="nearest"})(Ov||(Ov={}));var vO={kernelName:cn,backendName:"wasm",setupFunc:doe,kernelFunc:foe},kO;function hoe(o){kO=o.wasm.cwrap(un,null,["number","number","number","number","number","number"])}function goe(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{axis:ct,exclusive:Mt,reverse:Ft}=_,Ut=_e.shape.length;y.assert(_e.dtype==="float32"||_e.dtype==="int32",()=>`cumprod does not support ${_e.dtype} tensors in the WASM backend`);let Xt=w.getAxesPermutation([ct],Ut),Kt=_e;Xt!==null&&(Kt=ho({inputs:{x:_e},attrs:{perm:Xt},backend:s}));let nr=w.getInnerMostAxes(1,Ut)[0];w.assertAxesAreInnerMostDims("cumprod",[nr],Ut);let rr=s.makeOutput(Kt.shape,Kt.dtype),or=Kt.shape[nr],hr=s.dataIdMap.get(Kt.dataId).id,fr=s.dataIdMap.get(rr.dataId).id;kO(hr,Mt?1:0,Ft?1:0,or,fr,we$1[_e.dtype]);let yr=rr;return Xt!==null&&(yr=ho({inputs:{x:rr},attrs:{perm:w.getUndoAxesPermutation(Xt)},backend:s}),s.disposeData(Kt.dataId),s.disposeData(rr.dataId)),yr}var NO={kernelName:un,backendName:"wasm",setupFunc:hoe,kernelFunc:goe},TO;function xoe(o){TO=o.wasm.cwrap(pn,null,["number","number","number","number","number","number"])}function yoe(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{axis:ct,exclusive:Mt,reverse:Ft}=_,Ut=_e.shape.length;y.assert(_e.dtype==="float32"||_e.dtype==="int32",()=>`cumsum does not support ${_e.dtype} tensors in the WASM backend`);let Xt=w.getAxesPermutation([ct],Ut),Kt=_e;Xt!==null&&(Kt=ho({inputs:{x:_e},attrs:{perm:Xt},backend:s}));let nr=w.getInnerMostAxes(1,Ut)[0];w.assertAxesAreInnerMostDims("cumsum",[nr],Ut);let rr=s.makeOutput(Kt.shape,Kt.dtype),or=Kt.shape[nr],hr=s.dataIdMap.get(Kt.dataId).id,fr=s.dataIdMap.get(rr.dataId).id;TO(hr,Mt?1:0,Ft?1:0,or,fr,we$1[_e.dtype]);let yr=rr;return Xt!==null&&(yr=ho({inputs:{x:rr},attrs:{perm:w.getUndoAxesPermutation(Xt)},backend:s}),s.disposeData(Kt.dataId),s.disposeData(rr.dataId)),yr}var _O={kernelName:pn,backendName:"wasm",setupFunc:xoe,kernelFunc:yoe},EO;function boe(o){EO=o.wasm.cwrap("DenseBincount",null,["number","array","number","number","boolean","number","number","boolean","number"])}function Coe(o){let{backend:i,inputs:s,attrs:_}=o,{x:_e,weights:ct}=s,{size:Mt,binaryOutput:Ft}=_,Ut=ct.shape.reduce((rr,or)=>rr*or,1)!==0,Xt=_e.shape.length===1?[Mt]:[_e.shape[0],Mt],Kt=i.makeOutput(Xt,ct.dtype);function nr(rr){return i.dataIdMap.get(rr.dataId).id}return EO(nr(_e),new Uint8Array(new Int32Array(_e.shape).buffer),_e.shape.length,Mt,Ut,nr(ct),we$1[ct.dtype],Ft,nr(Kt)),Kt}var $O={kernelName:ra,backendName:"wasm",setupFunc:boe,kernelFunc:Coe},RO;function woe(o){RO=o.wasm.cwrap(ln,null,["number","number","number","array","number","array","array","number","number"])}function Soe(o){let{backend:i,inputs:s,attrs:_}=o,{x:_e}=s,{blockSize:ct,dataFormat:Mt}=_,Ft=_e.shape[0],Ut=(Mt==="NHWC"?_e.shape[1]:_e.shape[2])*ct,Xt=(Mt==="NHWC"?_e.shape[2]:_e.shape[3])*ct,Kt=(Mt==="NHWC"?_e.shape[3]:_e.shape[1])/(ct*ct),nr=Mt==="NHWC"?[Ft,Ut,Xt,Kt]:[Ft,Kt,Ut,Xt],rr=i.makeOutput(nr,"float32"),or=i.dataIdMap.get(_e.dataId).id,hr=new Uint8Array(new Int32Array(y.computeStrides(_e.shape)).buffer),fr=new Uint8Array(new Int32Array(nr).buffer),yr=new Uint8Array(new Int32Array(y.computeStrides(nr)).buffer),Lr=i.dataIdMap.get(rr.dataId).id;return RO(or,ct,Mt==="NHWC"?1:0,hr,_e.shape.length-1,fr,yr,nr.length,Lr),rr}var DO={kernelName:ln,backendName:"wasm",setupFunc:woe,kernelFunc:Soe},AO;function Ioe(o){AO=o.wasm.cwrap(mn,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function voe(o){let{inputs:i,attrs:s,backend:_}=o,{x:_e,filter:ct}=i,Mt=_.dataIdMap.get(_e.dataId).id,Ft=_.dataIdMap.get(ct.dataId).id,{strides:Ut,dilations:Xt,pad:Kt,dimRoundingMode:nr}=s,rr=Xt??[1,1],or=w.computeConv2DInfo(_e.shape,ct.shape,Ut,rr,Kt,nr,!0),hr=or.filterHeight,fr=or.filterWidth,yr=or.padInfo.top,Lr=or.padInfo.right,Br=or.padInfo.bottom,Vr=or.padInfo.left,Wr=or.dilationHeight,ro=or.dilationWidth,no=or.strideHeight,so=or.strideWidth,ko=or.inChannels,To=or.outChannels,oo=or.padInfo.type==="SAME"?1:0;if(or.dataFormat!=="channelsLast")throw new Error(`wasm backend DepthwiseConv2dNative does not support dataFormat:'${or.dataFormat}'. Please use 'channelsLast'.`);let No=_.makeOutput(or.outShape,"float32"),As=_.dataIdMap.get(No.dataId).id;return AO(Mt,_e.shape[0],_e.shape[1],_e.shape[2],Ft,hr,fr,yr,Lr,Br,Vr,oo,Wr,ro,no,so,ko,To,As),No}var FO={kernelName:mn,backendName:"wasm",setupFunc:Ioe,kernelFunc:voe},PO;function koe(o){PO=o.wasm.cwrap("Diag",null,["number","number","number","number"])}function Noe(o){let{inputs:i,backend:s}=o,{x:_}=i,_e=y.sizeFromShape(_.shape),ct=s.makeOutput([..._.shape,..._.shape],_.dtype);return PO(s.dataIdMap.get(_.dataId).id,we$1[_.dtype],_e,s.dataIdMap.get(ct.dataId).id),ct}var OO={kernelName:oa,backendName:"wasm",setupFunc:koe,kernelFunc:Noe},MO;function Toe(o){MO=o.wasm.cwrap(dn,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function _oe(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e,filter:ct}=i,{strides:Mt,pad:Ft,dilations:Ut}=_;if(_e.dtype!==ct.dtype)throw new Error(`Dilation2D error: x must have the same dtype as filter. Got ${_e.dtype} and ${ct.dtype}`);let Xt=w.computeDilation2DInfo(_e.shape,ct.shape,Mt,Ft,"NHWC",Ut),Kt=s.makeOutput(Xt.outShape,_e.dtype);return MO(s.dataIdMap.get(_e.dataId).id,s.dataIdMap.get(ct.dataId).id,s.dataIdMap.get(Kt.dataId).id,we$1[_e.dtype],Xt.batchSize,Xt.inChannels,Xt.inHeight,Xt.inWidth,Xt.outHeight,Xt.outWidth,Xt.strideHeight,Xt.strideWidth,Xt.dilationHeight,Xt.dilationWidth,Xt.filterHeight,Xt.filterWidth,Xt.padInfo.top,Xt.padInfo.left),Kt}var LO={kernelName:dn,backendName:"wasm",setupFunc:Toe,kernelFunc:_oe},BO;function Eoe(o){BO=o.wasm.cwrap(Li,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function $oe(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e,filter:ct,dy:Mt}=i,{strides:Ft,pad:Ut,dilations:Xt}=_;if(_e.dtype!==ct.dtype||_e.dtype!==Mt.dtype)throw new Error(`Dilation2DBackpropFilter error: x must have the same dtype as filter and dy. Got ${_e.dtype}, ${ct.dtype}, and ${Mt.dtype}`);let Kt=w.computeDilation2DInfo(_e.shape,ct.shape,Ft,Ut,"NHWC",Xt),nr=s.makeOutput(ct.shape,ct.dtype);return BO(s.dataIdMap.get(_e.dataId).id,s.dataIdMap.get(ct.dataId).id,s.dataIdMap.get(Mt.dataId).id,s.dataIdMap.get(nr.dataId).id,we$1[_e.dtype],Kt.batchSize,Kt.inChannels,Kt.inHeight,Kt.inWidth,Kt.outHeight,Kt.outWidth,Kt.strideHeight,Kt.strideWidth,Kt.dilationHeight,Kt.dilationWidth,Kt.filterHeight,Kt.filterWidth,Kt.padInfo.top,Kt.padInfo.left),nr}var zO={kernelName:Li,backendName:"wasm",setupFunc:Eoe,kernelFunc:$oe},VO;function Roe(o){VO=o.wasm.cwrap(Mi,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function Doe(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e,filter:ct,dy:Mt}=i,{strides:Ft,pad:Ut,dilations:Xt}=_;if(_e.dtype!==ct.dtype||_e.dtype!==Mt.dtype)throw new Error(`Dilation2DBackpropInput error: x must have the same dtype as filter and dy. Got ${_e.dtype}, ${ct.dtype}, and ${Mt.dtype}`);let Kt=w.computeDilation2DInfo(_e.shape,ct.shape,Ft,Ut,"NHWC",Xt),nr=s.makeOutput(_e.shape,_e.dtype);return VO(s.dataIdMap.get(_e.dataId).id,s.dataIdMap.get(ct.dataId).id,s.dataIdMap.get(Mt.dataId).id,s.dataIdMap.get(nr.dataId).id,we$1[_e.dtype],Kt.batchSize,Kt.inChannels,Kt.inHeight,Kt.inWidth,Kt.outHeight,Kt.outWidth,Kt.strideHeight,Kt.strideWidth,Kt.dilationHeight,Kt.dilationWidth,Kt.filterHeight,Kt.filterWidth,Kt.padInfo.top,Kt.padInfo.left),nr}var WO={kernelName:Mi,backendName:"wasm",setupFunc:Roe,kernelFunc:Doe},UO=he$1(hn),GO;function Aoe(o){GO=o.wasm.cwrap(Xa,null,["number","number","number"])}function Foe(o){let{inputs:i,backend:s}=o,{dy:_,y:_e}=i,ct=s.makeOutput(_e.shape,"float32"),Mt=Ft=>s.dataIdMap.get(Ft.dataId).id;return GO(Mt(_e),Mt(_),Mt(ct)),ct}var HO={kernelName:Xa,backendName:"wasm",setupFunc:Aoe,kernelFunc:Foe},Poe=!1,KO=Ge(xn,Poe,"bool"),qO=he$1(gn),jO=he$1(yn,"float32");function Lg(o){let{inputs:i,attrs:s,backend:_}=o,{input:_e}=i,{dim:ct}=s,Mt=_e.shape.length,Ft=_e.shape.slice(),Ut=ct;return ct<0&&(y.assert(-(Mt+1)<=ct,()=>`Axis must be in the interval [${-(Mt+1)}, ${Mt}]`),Ut=Mt+ct+1),Ft.splice(Ut,0,1),zt({inputs:{x:_e},backend:_,attrs:{shape:Ft}})}var XO={kernelName:na,backendName:"wasm",kernelFunc:Lg},YO=he$1(bn,"float32");function Mv(o){let{attrs:{shape:i,value:s},backend:_}=o,{attrs:{dtype:_e}}=o;_e=_e||y.inferDtype(s);let ct=_.makeOutput(i,_e);return _.typedArrayFromHeap(ct).fill(s),ct}var QO={kernelName:sa,backendName:"wasm",kernelFunc:Mv},ZO;function Ooe(o){ZO=o.wasm.cwrap(Cn,null,["number","number","number","number","number","number"])}function Moe(o){let{inputs:i,backend:s}=o,{image:_}=i,_e=s.makeOutput(_.shape,_.dtype),ct=s.dataIdMap.get(_.dataId).id,Mt=s.dataIdMap.get(_e.dataId).id,[Ft,Ut,Xt,Kt]=_.shape;return ZO(ct,Ft,Ut,Xt,Kt,Mt),_e}var JO={kernelName:Cn,backendName:"wasm",kernelFunc:Moe,setupFunc:Ooe},eM=he$1(wn),tM=Ge(Sn),rM;function Boe(o){rM=o.wasm.cwrap(In,null,["number","number","number","number","number","number","number"])}function zoe(o){let{backend:i,inputs:s,attrs:_}=o,{varianceEpsilon:_e}=_,{x:ct,mean:Mt,variance:Ft,offset:Ut,scale:Xt}=s,Kt=i.dataIdMap.get(ct.dataId).id,nr=i.dataIdMap.get(Mt.dataId).id,rr=i.dataIdMap.get(Ft.dataId).id,or=Ut!=null?i.dataIdMap.get(Ut.dataId).id:0,hr=Xt!=null?i.dataIdMap.get(Xt.dataId).id:0,fr=i.makeOutput(ct.shape,ct.dtype);if(y.sizeFromShape(ct.shape)===0)return fr;let yr=i.dataIdMap.get(fr.dataId).id;return rM(Kt,nr,rr,or,hr,_e,yr),fr}var oM={kernelName:In,backendName:"wasm",setupFunc:Boe,kernelFunc:zoe},nM;function Voe(o){nM=o.wasm.cwrap(Io,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function Woe(o){let{inputs:i,attrs:s,backend:_}=o,{x:_e,filter:ct,bias:Mt,preluActivationWeights:Ft}=i,{strides:Ut,pad:Xt,dilations:Kt,dataFormat:nr,dimRoundingMode:rr,activation:or,leakyreluAlpha:hr}=s,fr=w.computeConv2DInfo(_e.shape,ct.shape,Ut,Kt,Xt,rr),yr=wu[or];if(yr==null)throw new Error(`${or} activation not yet supported for FusedConv2D in the wasm backend.`);let Lr=_.dataIdMap.get(_e.dataId).id,Br=_.dataIdMap.get(ct.dataId).id,Vr=fr.outChannels,Wr=0;if(Mt!=null){let Fp=_.dataIdMap.get(Mt.dataId);if(Fp.shape.length!==1)throw new Error(`FusedConv2D only supports rank-1 bias but got rank ${Fp.shape.length}.`);if(Fp.shape[0]!==Vr)throw new Error(`FusedConv2D bias shape (${Fp.shape}) does not match the number of output channels (${Vr})`);Wr=Fp.id}let ro=fr.filterHeight,no=fr.filterWidth,so=fr.padInfo.top,ko=fr.padInfo.right,To=fr.padInfo.bottom,oo=fr.padInfo.left,No=fr.dilationHeight,As=fr.dilationWidth,Ks=fr.strideHeight,vu=fr.strideWidth,Fu=fr.inChannels,Ap=fr.padInfo.type==="SAME"?1:0,Pp=fr.batchSize,Lo=fr.inHeight,Au=fr.inWidth;if(nr!=="NHWC")throw new Error(`wasm backend FusedConv2D does not support dataFormat:'${nr}'. Please use 'NHWC'.`);let Mp=_.makeOutput(fr.outShape,"float32"),Lp=_.dataIdMap.get(Mp.dataId).id,Op=Ft==null?0:_.dataIdMap.get(Ft.dataId).id;return nM(Lr,Pp,Lo,Au,Br,ro,no,Wr,so,ko,To,oo,Ap,No,As,Ks,vu,Fu,Vr,yr,Op,hr||0,Lp),Mp}var sM={kernelName:Io,backendName:"wasm",setupFunc:Voe,kernelFunc:Woe},aM;function Uoe(o){aM=o.wasm.cwrap(vo,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function Goe(o){let{inputs:i,attrs:s,backend:_}=o,{x:_e,filter:ct,bias:Mt,preluActivationWeights:Ft}=i,{strides:Ut,pad:Xt,dilations:Kt,dataFormat:nr,dimRoundingMode:rr,activation:or,leakyreluAlpha:hr}=s,fr=w.computeConv2DInfo(_e.shape,ct.shape,Ut,Kt,Xt,rr,!0),yr=wu[or];if(yr==null)throw new Error(`${or} activation not yet supported for FusedDepthwiseConv2D in the wasm backend.`);let Lr=_.dataIdMap.get(_e.dataId).id,Br=_.dataIdMap.get(ct.dataId).id,Vr=fr.outChannels,Wr=0;if(Mt!=null){let Fp=_.dataIdMap.get(Mt.dataId);if(Fp.shape.length!==1)throw new Error(`FusedDepthwiseConv2D only supports rank-1 bias but got rank ${Fp.shape.length}.`);if(Fp.shape[0]!==Vr)throw new Error(`FusedDepthwiseConv2D bias shape (${Fp.shape}) does not match the number of output channels (${Vr})`);Wr=Fp.id}let ro=fr.filterHeight,no=fr.filterWidth,so=fr.padInfo.top,ko=fr.padInfo.right,To=fr.padInfo.bottom,oo=fr.padInfo.left,No=fr.dilationHeight,As=fr.dilationWidth,Ks=fr.strideHeight,vu=fr.strideWidth,Fu=fr.inChannels,Ap=fr.padInfo.type==="SAME"?1:0,Pp=fr.batchSize,Lo=fr.inHeight,Au=fr.inWidth;if(nr!=="NHWC")throw new Error(`wasm backend FusedDepthwiseConv2D does not support dataFormat:'${nr}'. Please use 'NHWC'.`);let Mp=_.makeOutput(fr.outShape,"float32"),Lp=_.dataIdMap.get(Mp.dataId).id,Op=Ft==null?0:_.dataIdMap.get(Ft.dataId).id;return aM(Lr,Pp,Lo,Au,Br,ro,no,Wr,so,ko,To,oo,Ap,No,As,Ks,vu,Fu,Vr,yr,Op,hr||0,Lp),Mp}var iM={kernelName:vo,backendName:"wasm",setupFunc:Uoe,kernelFunc:Goe},uM;function Hoe(o){uM=o.wasm.cwrap(vn,null,["number","number","number","number","number","number","array","number"])}function Koe(o){let{backend:i,inputs:s}=o,{params:_,indices:_e}=s,[ct,Mt,Ft,Ut]=af.prepareAndValidate(_,_e),Xt=i.makeOutput(ct,_.dtype);if(Mt===0)return Xt;let Kt=_e.shape,nr=Kt[Kt.length-1],rr=i.dataIdMap.get(_.dataId).id,or=i.dataIdMap.get(_e.dataId).id,hr=new Uint8Array(new Int32Array(Ut).buffer),fr=i.dataIdMap.get(Xt.dataId).id;return uM(rr,we$1[_.dtype],or,Mt,nr,Ft,hr,fr),Xt}var pM={kernelName:vn,backendName:"wasm",setupFunc:Hoe,kernelFunc:Koe},cM;function qoe(o){cM=o.wasm.cwrap("Gather",null,["number","number","array","number","number","number","array","number"])}function joe(o){let{backend:i,inputs:s,attrs:_}=o,{x:_e,indices:ct}=s,{axis:Mt,batchDims:Ft}=_,Ut=y.parseAxisParam(Mt,_e.shape)[0],Xt=i.readSync(ct.dataId),Kt=_e.shape[Ut];for(let so=0;so<Xt.length;++so){let ko=Xt[so];y.assert(ko<=Kt-1&&ko>=0,()=>`GatherV2: the index value ${ko} is not in [0, ${Kt-1}]`)}let nr=w.segment_util.collectGatherOpShapeInfo(_e,ct,Ut,Ft),rr=zt({inputs:{x:_e},attrs:{shape:[nr.batchSize,nr.outerSize,nr.dimSize,nr.sliceSize]},backend:i}),or=y.sizeFromShape(ct.shape),hr=zt({inputs:{x:ct},attrs:{shape:[nr.batchSize,or/nr.batchSize]},backend:i}),fr=[nr.batchSize,nr.outerSize,or/nr.batchSize,nr.sliceSize],yr=i.makeOutput(fr,_e.dtype);if(y.sizeFromShape(_e.shape)===0)return yr;let Lr=rr.shape.length-1,Br=i.dataIdMap.get(rr.dataId).id,Vr=i.dataIdMap.get(hr.dataId).id,Wr=i.dataIdMap.get(yr.dataId).id,ro=new Uint8Array(new Int32Array(y.computeStrides(rr.shape)).buffer),no=new Uint8Array(new Int32Array(y.computeStrides(fr)).buffer);return cM(Br,we$1[_e.dtype],ro,Lr,Vr,nr.batchSize,no,Wr),i.disposeData(rr.dataId),i.disposeData(hr.dataId),yr.shape=nr.outputShape,yr}var lM={kernelName:aa,backendName:"wasm",setupFunc:qoe,kernelFunc:joe},Xoe=!1,mM=Ge(kn,Xoe,"bool"),Yoe=!1,dM=Ge(Nn,Yoe,"bool"),fM=he$1(Tn,"bool"),hM=he$1(_n,"bool"),gM=he$1(En,"bool"),xM;function Qoe(o){xM=o.wasm.cwrap($n,null,["number","number","number","number"])}function Zoe(o){let{inputs:{x:i},attrs:{alpha:s},backend:_}=o,_e=_.dataIdMap.get(i.dataId).id,ct=_.makeOutput(i.shape,"float32");if(y.sizeFromShape(i.shape)!==0){let Mt=_.dataIdMap.get(ct.dataId).id;xM(_e,we$1[i.dtype],s,Mt)}return ct}var yM={kernelName:$n,backendName:"wasm",setupFunc:Qoe,kernelFunc:Zoe},Joe=!1,bM=Ge(Rn,Joe,"bool"),ene=!1,CM=Ge(Dn,ene,"bool"),wM;function tne(o){wM=o.wasm.cwrap(An,null,["number","number","number","number"])}function rne(o){let{attrs:i,backend:s}=o,{start:_,stop:_e,num:ct}=i,Mt=Math.floor(ct),Ft=s.makeOutput([Mt],"float32");return wM(s.dataIdMap.get(Ft.dataId).id,_,_e,Mt),Ft}var SM={kernelName:An,backendName:"wasm",setupFunc:tne,kernelFunc:rne},IM=he$1(Fn),vM=he$1(Pn),one=!1,kM=Ge(On,one,"bool"),NM=he$1(Mn),nne=!1,TM=Ge(Ln,nne,"bool"),sne=!1,_M=Ge(R0,sne,"bool"),EM;function ane(o){EM=o.wasm.cwrap(Bn,null,["number","number","number","number","number","number","number"])}function ine(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{depthRadius:ct,bias:Mt,alpha:Ft,beta:Ut}=_;if(_e.dtype!=="float32")throw new Error("LRN error: x must have dtype float32");let Xt=s.makeOutput(_e.shape,_e.dtype);return EM(s.dataIdMap.get(_e.dataId).id,s.dataIdMap.get(Xt.dataId).id,_e.shape[3],ct,Mt,Ft,Ut),Xt}var $M={kernelName:Bn,backendName:"wasm",setupFunc:ane,kernelFunc:ine},RM;function une(o){RM=o.wasm.cwrap(Ya,null,["number","number","number","number","number","number","number","number","number"])}function pne(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e,y:ct,dy:Mt}=i,{depthRadius:Ft,bias:Ut,alpha:Xt,beta:Kt}=_;if(_e.dtype!=="float32"||ct.dtype!=="float32"||Mt.dtype!=="float32")throw new Error("LRNGrad error: x, y, and dy must have dtype float32");let nr=s.makeOutput(_e.shape,_e.dtype);return RM(s.dataIdMap.get(_e.dataId).id,s.dataIdMap.get(ct.dataId).id,s.dataIdMap.get(Mt.dataId).id,s.dataIdMap.get(nr.dataId).id,Mt.shape[3],Ft,Ut,Xt,Kt),nr}var DM={kernelName:Ya,backendName:"wasm",setupFunc:une,kernelFunc:pne},AM;function cne(o){AM=o.wasm.cwrap(zn,null,["number","number","number","number"])}function lne(o){let{backend:i,inputs:s,attrs:_}=o,{reductionIndices:_e,keepDims:ct}=_,{x:Mt}=s,Ft=i.dataIdMap.get(Mt.dataId).id,Ut=Mt,{transposed:Xt,axes:Kt,originalAxes:nr,inputWasTransposed:rr}=Tr(Mt,_e,i);rr&&(Ut=Xt,Ft=i.dataIdMap.get(Xt.dataId).id);let or=Ut.shape.length;w.assertAxesAreInnerMostDims("max",Kt,or);let[hr,fr]=w.computeOutAndReduceShapes(Ut.shape,Kt),yr=y.sizeFromShape(fr),Lr=i.makeOutput(hr,Mt.dtype);if(y.sizeFromShape(Ut.shape)!==0){let Br=i.dataIdMap.get(Lr.dataId).id;AM(Ft,we$1[Mt.dtype],yr,Br)}if(rr&&i.disposeData(Xt.dataId),ct){let Br=w.expandShapeToKeepDim(Lr.shape,nr);Lr.shape=Br}return Lr}var FM={kernelName:zn,backendName:"wasm",setupFunc:cne,kernelFunc:lne},PM=Ge(Vn),OM;function dne(o){OM=o.wasm.cwrap(Wn,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function fne(o){let{inputs:i,attrs:s,backend:_}=o,_e=i.x,ct=_.dataIdMap.get(_e.dataId).id;y.assert(_e.dtype==="float32",()=>`Error in MaxPool: only float32 input is supported. Got ${_e.dtype}.`);let{filterSize:Mt,strides:Ft,pad:Ut,dimRoundingMode:Xt}=s,Kt=w.computePool2DInfo(_e.shape,Mt,Ft,1,Ut,Xt),nr=Kt.filterHeight,rr=Kt.filterWidth,or=Kt.padInfo.top,hr=Kt.padInfo.right,fr=Kt.padInfo.bottom,yr=Kt.padInfo.left,Lr=Kt.dilationHeight,Br=Kt.dilationWidth,Vr=Kt.strideHeight,Wr=Kt.strideWidth,ro=Kt.inChannels,no=Kt.outChannels;if(Kt.dataFormat!=="channelsLast")throw new Error(`wasm backend does not support dataFormat:'${Kt.dataFormat}'. Please use 'channelsLast'.`);let so=_.makeOutput(Kt.outShape,"float32"),ko=_.dataIdMap.get(so.dataId).id;return OM(ct,_e.shape[0],_e.shape[1],_e.shape[2],nr,rr,or,hr,fr,yr,Lr,Br,Vr,Wr,ro,no,ko),so}var MM={kernelName:Wn,backendName:"wasm",setupFunc:dne,kernelFunc:fne},LM;function hne(o){LM=o.wasm.cwrap("MaxPool3D",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function gne(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{filterSize:ct,strides:Mt,pad:Ft,dimRoundingMode:Ut,dataFormat:Xt}=_,Kt=w.computePool3DInfo(_e.shape,ct,Mt,1,Ft,Ut,Xt),nr=s.makeOutput(Kt.outShape,_e.dtype);return LM(s.dataIdMap.get(_e.dataId).id,s.dataIdMap.get(nr.dataId).id,Kt.batchSize,Kt.inChannels,Kt.inDepth,Kt.inHeight,Kt.inWidth,Kt.outDepth,Kt.outHeight,Kt.outWidth,Kt.strideDepth,Kt.strideHeight,Kt.strideWidth,Kt.dilationDepth,Kt.dilationHeight,Kt.dilationWidth,Kt.effectiveFilterDepth,Kt.effectiveFilterHeight,Kt.effectiveFilterWidth,Kt.padInfo.front,Kt.padInfo.top,Kt.padInfo.left),nr}var BM={kernelName:ia,backendName:"wasm",setupFunc:hne,kernelFunc:gne},zM;function xne(o){zM=o.wasm.cwrap("MaxPool3DGrad",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function yne(o){let{inputs:i,backend:s,attrs:_}=o,{dy:_e,input:ct}=i,{filterSize:Mt,strides:Ft,pad:Ut,dimRoundingMode:Xt}=_,Kt=w.computePool3DInfo(ct.shape,Mt,Ft,1,Ut,Xt),nr=s.makeOutput(ct.shape,ct.dtype);return zM(s.dataIdMap.get(ct.dataId).id,s.dataIdMap.get(_e.dataId).id,s.dataIdMap.get(nr.dataId).id,Kt.batchSize,Kt.inChannels,Kt.inDepth,Kt.inHeight,Kt.inWidth,Kt.outDepth,Kt.outHeight,Kt.outWidth,Kt.strideDepth,Kt.strideHeight,Kt.strideWidth,Kt.dilationDepth,Kt.dilationHeight,Kt.dilationWidth,Kt.effectiveFilterDepth,Kt.effectiveFilterHeight,Kt.effectiveFilterWidth,Kt.padInfo.front,Kt.padInfo.top,Kt.padInfo.left),nr}var VM={kernelName:Gi,backendName:"wasm",setupFunc:xne,kernelFunc:yne},WM;function bne(o){WM=o.wasm.cwrap("MaxPoolGrad",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function Cne(o){let{inputs:i,backend:s,attrs:_}=o,{dy:_e,input:ct}=i,{filterSize:Mt,strides:Ft,pad:Ut,dimRoundingMode:Xt}=_,Kt=w.computePool2DInfo(ct.shape,Mt,Ft,1,Ut,Xt),nr=s.makeOutput(ct.shape,ct.dtype);return WM(s.dataIdMap.get(ct.dataId).id,s.dataIdMap.get(_e.dataId).id,s.dataIdMap.get(nr.dataId).id,Kt.batchSize,Kt.inChannels,Kt.inHeight,Kt.inWidth,Kt.outHeight,Kt.outWidth,Kt.strideHeight,Kt.strideWidth,Kt.dilationHeight,Kt.dilationWidth,Kt.effectiveFilterHeight,Kt.effectiveFilterWidth,Kt.padInfo.top,Kt.padInfo.left),nr}var UM={kernelName:Ui,backendName:"wasm",setupFunc:bne,kernelFunc:Cne},GM;function wne(o){GM=o.wasm.cwrap("MaxPoolWithArgmax",null,["number","number","number","number","boolean","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function Sne(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{filterSize:ct,strides:Mt,pad:Ft,includeBatchInIndex:Ut}=_;y.assert(_e.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${_e.shape.length}.`);let Xt=[1,1];y.assert(w.eitherStridesOrDilationsAreOne(Mt,Xt),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${Mt} and dilations '${Xt}'`);let Kt=w.computePool2DInfo(_e.shape,ct,Mt,[1,1],Ft),nr=s.makeOutput(Kt.outShape,_e.dtype),rr=s.makeOutput(Kt.outShape,"int32");return GM(s.dataIdMap.get(_e.dataId).id,s.dataIdMap.get(nr.dataId).id,s.dataIdMap.get(rr.dataId).id,we$1[_e.dtype],Ut,Kt.batchSize,Kt.inChannels,Kt.inHeight,Kt.inWidth,Kt.outHeight,Kt.outWidth,Kt.strideHeight,Kt.strideWidth,Kt.dilationHeight,Kt.dilationWidth,Kt.effectiveFilterHeight,Kt.effectiveFilterWidth,Kt.padInfo.top,Kt.padInfo.left),[nr,rr]}var HM={kernelName:ua,backendName:"wasm",setupFunc:wne,kernelFunc:Sne},KM;function Ine(o){KM=o.wasm.cwrap(Un,null,["number, number, number"])}function vne(o){let{backend:i,inputs:s,attrs:_}=o,{axis:_e,keepDims:ct}=_,{x:Mt}=s,Ft=i.dataIdMap.get(Mt.dataId).id,Ut=Ft,Xt=Mt,{transposed:Kt,axes:nr,originalAxes:rr,inputWasTransposed:or}=Tr(Mt,_e,i),hr=nr;if(or){let Wr=i.dataIdMap.get(Kt.dataId).id;Wr!==Ft&&(Xt=Kt,Ut=Wr,hr=w.getInnerMostAxes(hr.length,Xt.shape.length))}w.assertAxesAreInnerMostDims("mean",hr,Xt.shape.length);let[fr,yr]=w.computeOutAndReduceShapes(Xt.shape,hr),Lr=y.sizeFromShape(yr),Br=Xt;Xt.dtype!=="float32"&&(Br=Mr({backend:i,inputs:{x:Xt},attrs:{dtype:"float32"}}),Ut=i.dataIdMap.get(Br.dataId).id);let Vr=i.makeOutput(fr,"float32");if(y.sizeFromShape(Xt.shape)!==0){let Wr=i.dataIdMap.get(Vr.dataId).id;KM(Ut,Lr,Wr)}if(or&&i.disposeData(Kt.dataId),ct){let Wr=w.expandShapeToKeepDim(Vr.shape,rr);Vr.shape=Wr}return Xt.dtype!=="float32"&&i.disposeData(Br.dataId),Vr}var qM={kernelName:Un,backendName:"wasm",setupFunc:Ine,kernelFunc:vne},jM;function kne(o){jM=o.wasm.cwrap(Gn,null,["number","number","number","number"])}function Nne(o){let{backend:i,inputs:s,attrs:_}=o,{axis:_e,keepDims:ct}=_,{x:Mt}=s,Ft=i.dataIdMap.get(Mt.dataId).id,Ut=Ft,Xt=Mt,{transposed:Kt,axes:nr,originalAxes:rr,inputWasTransposed:or}=Tr(Mt,_e,i);if(or){let Vr=i.dataIdMap.get(Kt.dataId).id;Vr!==Ft&&(Xt=Kt,Ut=Vr)}let hr=Xt.shape.length;w.assertAxesAreInnerMostDims("min",nr,hr);let[fr,yr]=w.computeOutAndReduceShapes(Xt.shape,nr),Lr=y.sizeFromShape(yr),Br=i.makeOutput(fr,Xt.dtype);if(y.sizeFromShape(Xt.shape)!==0){let Vr=i.dataIdMap.get(Br.dataId).id;jM(Ut,we$1[Mt.dtype],Lr,Vr)}if(or&&i.disposeData(Kt.dataId),ct){let Vr=w.expandShapeToKeepDim(Br.shape,rr);Br.shape=Vr}return Br}var XM={kernelName:Gn,backendName:"wasm",setupFunc:kne,kernelFunc:Nne},YM=Ge(Hn),Lv,QM;function _ne(o){QM=o.wasm.cwrap(Kn,null,["number","array","number","number","array","array","number","number"])}function Ene(o){let{inputs:{x:i},backend:s,attrs:{paddings:_,mode:_e}}=o,ct=_.map((hr,fr)=>hr[0]+i.shape[fr]+hr[1]),Mt=s.dataIdMap.get(i.dataId).id,Ft=s.makeOutput(ct,i.dtype),Ut=s.dataIdMap.get(Ft.dataId).id,Xt=new Uint8Array(new Int32Array(i.shape).buffer),Kt=_.map(hr=>hr[0]),nr=_.map(hr=>hr[1]),rr=new Uint8Array(new Int32Array(Kt).buffer),or=new Uint8Array(new Int32Array(nr).buffer);return QM(Mt,Xt,i.shape.length,we$1[i.dtype],rr,or,Lv[_e],Ut),Ft}(function(o){o[o.reflect=0]="reflect",o[o.symmetric=1]="symmetric"})(Lv||(Lv={}));var ZM={kernelName:Kn,backendName:"wasm",kernelFunc:Ene,setupFunc:_ne},JM;function $ne(o){JM=o.wasm.cwrap(Is,null,["number","number","number","number"])}function Bv(o){let{backend:i,inputs:{logits:s},attrs:{dim:_}}=o,_e=i.dataIdMap.get(s.dataId).id,ct=i.makeOutput(s.shape,s.dtype),Mt=i.dataIdMap.get(ct.dataId).id,Ft=s.shape[_],Ut=y.sizeFromShape(s.shape)/Ft;return y.sizeFromShape(ct.shape)===0||JM(_e,Mt,Ft,Ut),ct}var eL={kernelName:Is,backendName:"wasm",setupFunc:$ne,kernelFunc:Bv},tL;function Rne(o){tL=o.wasm.cwrap(jn,null,["number","number","number","number","number","number"])}function Dne(o){let{inputs:i,backend:s,attrs:_}=o,{logits:_e}=i,{numSamples:ct,seed:Mt,normalized:Ft}=_;if(_e.dtype!=="float32")throw new Error(`Tensor logits must have dtype float32, got ${_e.dtype}`);let Ut=Ft?_e:Bv({inputs:{logits:_e},backend:s,attrs:{dim:_e.shape.length-1}}),[Xt,Kt]=Ut.shape,nr=s.makeOutput([Xt,ct],"int32");return tL(s.dataIdMap.get(Ut.dataId).id,Xt,Kt,ct,Mt,s.dataIdMap.get(nr.dataId).id),Ft||s.disposeData(Ut.dataId),nr}var rL={kernelName:jn,backendName:"wasm",setupFunc:Rne,kernelFunc:Dne},oL=Ge(qn),nL=Ge(Xn),sL=he$1(pa),aL;function qc(o,i){let s=new Int32Array(o.wasm.HEAPU8.buffer,i,4),_=s[0],_e=s[1],ct=s[2],Mt=s[3];return o.wasm._free(i),{pSelectedIndices:_,selectedSize:_e,pSelectedScores:ct,pValidOutputs:Mt}}function Fne(o){aL=o.wasm.cwrap(Qn,"number",["number","number","number","number","number"])}function Pne(o){let{backend:i,inputs:s,attrs:_}=o,{iouThreshold:_e,maxOutputSize:ct,scoreThreshold:Mt}=_,{boxes:Ft,scores:Ut}=s,Xt=i.dataIdMap.get(Ft.dataId).id,Kt=i.dataIdMap.get(Ut.dataId).id,nr=aL(Xt,Kt,ct,_e,Mt),{pSelectedIndices:rr,selectedSize:or,pSelectedScores:hr,pValidOutputs:fr}=qc(i,nr);return i.wasm._free(hr),i.wasm._free(fr),i.makeOutput([or],"int32",rr)}var iL={kernelName:Qn,backendName:"wasm",setupFunc:Fne,kernelFunc:Pne},uL;function One(o){uL=o.wasm.cwrap(Qa,"number",["number","number","number","number","number","bool"])}function Mne(o){let{backend:i,inputs:s,attrs:_}=o,{iouThreshold:_e,maxOutputSize:ct,scoreThreshold:Mt,padToMaxOutputSize:Ft}=_,{boxes:Ut,scores:Xt}=s,Kt=i.dataIdMap.get(Ut.dataId).id,nr=i.dataIdMap.get(Xt.dataId).id,rr=uL(Kt,nr,ct,_e,Mt,Ft),{pSelectedIndices:or,selectedSize:hr,pSelectedScores:fr,pValidOutputs:yr}=qc(i,rr);return i.wasm._free(fr),[i.makeOutput([hr],"int32",or),i.makeOutput([],"int32",yr)]}var pL={kernelName:Qa,backendName:"wasm",setupFunc:One,kernelFunc:Mne},cL;function Lne(o){cL=o.wasm.cwrap(Zn,"number",["number","number","number","number","number","number"])}function Bne(o){let{backend:i,inputs:s,attrs:_}=o,{iouThreshold:_e,maxOutputSize:ct,scoreThreshold:Mt,softNmsSigma:Ft}=_,{boxes:Ut,scores:Xt}=s,Kt=i.dataIdMap.get(Ut.dataId).id,nr=i.dataIdMap.get(Xt.dataId).id,rr=cL(Kt,nr,ct,_e,Mt,Ft),{pSelectedIndices:or,selectedSize:hr,pSelectedScores:fr,pValidOutputs:yr}=qc(i,rr);return i.wasm._free(yr),[i.makeOutput([hr],"int32",or),i.makeOutput([hr],"float32",fr)]}var lL={kernelName:Zn,backendName:"wasm",setupFunc:Lne,kernelFunc:Bne},zne=!1,mL=Ge(Yn,zne,"bool"),dL;function Vne(o){dL=o.wasm.cwrap(Jn,null,["number","number","number","number","number"])}function Wne(o){let{inputs:i,backend:s,attrs:_}=o,{indices:_e}=i,{dtype:ct,depth:Mt,onValue:Ft,offValue:Ut}=_,Xt=s.makeOutput([..._e.shape,Mt],ct),Kt=s.dataIdMap.get(Xt.dataId).id,nr=s.dataIdMap.get(_e.dataId).id;return dL(nr,Mt,Ft,Ut,Kt),Xt}var fL={kernelName:Jn,backendName:"wasm",setupFunc:Vne,kernelFunc:Wne};function Une(o){let{inputs:{x:i},backend:s}=o,_=s.makeOutput(i.shape,i.dtype);return s.typedArrayFromHeap(_).fill(1),_}var hL={kernelName:ca,backendName:"wasm",kernelFunc:Une};function Gne(o){let{inputs:i,backend:s,attrs:_}=o,{axis:_e}=_;if(i.length===1)return Lg({inputs:{input:i[0]},backend:s,attrs:{dim:_e}});let ct=i[0].shape,Mt=i[0].dtype;i.forEach(Xt=>{y.assertShapesMatch(ct,Xt.shape,"All tensors passed to stack must have matching shapes"),y.assert(Mt===Xt.dtype,()=>"All tensors passed to stack must have matching dtypes")});let Ft=[],Ut=Pv({inputs:i.map(Xt=>{let Kt=Lg({inputs:{input:Xt},backend:s,attrs:{dim:_e}});return Ft.push(Kt),Kt}),backend:s,attrs:{axis:_e}});return Ft.forEach(Xt=>s.disposeData(Xt.dataId)),Ut}var gL={kernelName:la,backendName:"wasm",kernelFunc:Gne},xL;function Hne(o){xL=o.wasm.cwrap(es,null,["number","array","number","number","array","array","number","number"])}function Kne(o){let{inputs:{x:i},backend:s,attrs:{paddings:_,constantValue:_e}}=o,ct=_.map((hr,fr)=>hr[0]+i.shape[fr]+hr[1]);if(y.sizeFromShape(i.shape)===0)return Mv({backend:s,attrs:{shape:ct,value:_e,dtype:i.dtype}});let Mt=s.dataIdMap.get(i.dataId).id,Ft=s.makeOutput(ct,i.dtype),Ut=s.dataIdMap.get(Ft.dataId).id,Xt=new Uint8Array(new Int32Array(i.shape).buffer),Kt=_.map(hr=>hr[0]),nr=_.map(hr=>hr[1]),rr=new Uint8Array(new Int32Array(Kt).buffer),or=new Uint8Array(new Int32Array(nr).buffer);return xL(Mt,Xt,i.shape.length,we$1[i.dtype],rr,or,_e,Ut),Ft}var Bg={kernelName:es,backendName:"wasm",kernelFunc:Kne,setupFunc:Hne},yL=Ge(ts),bL;function jne(o){bL=o.wasm.cwrap(rs,null,["number","number","number"])}function Xne(o){let{inputs:i,backend:s}=o,{x:_,alpha:_e}=i,ct=s.dataIdMap.get(_.dataId).id,Mt=s.dataIdMap.get(_e.dataId).id,Ft=ct,Ut=_,Xt=Ut;Ut.dtype!=="float32"&&(Xt=Mr({backend:s,inputs:{x:_},attrs:{dtype:"float32"}}),Ft=s.dataIdMap.get(Xt.dataId).id);let Kt=s.makeOutput(_.shape,"float32"),nr=s.dataIdMap.get(Kt.dataId).id;return bL(Ft,Mt,nr),Ut.dtype!=="float32"&&s.disposeData(Xt.dataId),Kt}var CL={kernelName:rs,backendName:"wasm",setupFunc:jne,kernelFunc:Xne},wL;function Yne(o){wL=o.wasm.cwrap(os,null,["number","number","number","number"])}function Qne(o){let{backend:i,inputs:s,attrs:_}=o,{axis:_e,keepDims:ct}=_,{x:Mt}=s,Ft=i.dataIdMap.get(Mt.dataId).id,Ut=Ft,Xt=Mt,{transposed:Kt,axes:nr,originalAxes:rr,inputWasTransposed:or}=Tr(Mt,_e,i),hr=nr;if(or){let Vr=i.dataIdMap.get(Kt.dataId).id;Vr!==Ft&&(Xt=Kt,Ut=Vr,hr=w.getInnerMostAxes(hr.length,Xt.shape.length))}w.assertAxesAreInnerMostDims("prod",hr,Xt.shape.length);let[fr,yr]=w.computeOutAndReduceShapes(Xt.shape,hr),Lr=y.sizeFromShape(yr),Br=i.makeOutput(fr,Xt.dtype);if(y.sizeFromShape(Xt.shape)!==0){let Vr=i.dataIdMap.get(Br.dataId).id;wL(Ut,Lr,we$1[Br.dtype],Vr)}if(or&&i.disposeData(Kt.dataId),ct){let Vr=w.expandShapeToKeepDim(Br.shape,rr);Br.shape=Vr}return Br}var SL={kernelName:os,backendName:"wasm",setupFunc:Yne,kernelFunc:Qne},Zne=o=>{let{backend:i,attrs:s}=o,{start:_,stop:_e,step:ct,dtype:Mt}=s,Ft=up(_,_e,ct,Mt),Ut=i.makeOutput([Ft.length],Mt);return i.typedArrayFromHeap(Ut).set(Ft),Ut},IL={kernelName:ma,backendName:"wasm",kernelFunc:Zne},vL=Ge(fn),kL=he$1(ns),NL=he$1(ss),TL=he$1(us),_L;function ese(o){_L=o.wasm.cwrap(is,null,["number","number","number","number","number","number","number","number","number","number"])}function tse(o){let i,{backend:s,inputs:_,attrs:_e}=o,{images:ct}=_,{alignCorners:Mt,halfPixelCenters:Ft,size:Ut}=_e,[Xt,Kt]=Ut,[nr,rr,or,hr]=ct.shape,fr=[nr,Xt,Kt,hr],yr=s.dataIdMap.get(ct.dataId);yr.dtype!=="float32"&&(i=Mr({backend:s,inputs:{x:ct},attrs:{dtype:"float32"}}),yr=s.dataIdMap.get(i.dataId));let Lr=yr.id,Br=s.makeOutput(fr,"float32");if(y.sizeFromShape(ct.shape)===0)return Br;let Vr=s.dataIdMap.get(Br.dataId).id;return _L(Lr,nr,rr,or,hr,Xt,Kt,Mt?1:0,Ft?1:0,Vr),i!=null&&s.disposeData(i.dataId),Br}var EL={kernelName:is,backendName:"wasm",setupFunc:ese,kernelFunc:tse},$L;function rse(o){$L=o.wasm.cwrap(Ja,null,["number","number","number","array","array","boolean"])}function ose(o){let i,{inputs:s,backend:_,attrs:_e}=o,{images:ct,dy:Mt}=s,{alignCorners:Ft}=_e,Ut=_.makeOutput(ct.shape,"float32"),Xt=_.dataIdMap.get(ct.dataId);return Xt.dtype!=="float32"&&(i=Mr({backend:_,inputs:{x:ct},attrs:{dtype:"float32"}}),Xt=_.dataIdMap.get(i.dataId)),$L(_.dataIdMap.get(ct.dataId).id,_.dataIdMap.get(Mt.dataId).id,_.dataIdMap.get(Ut.dataId).id,new Uint8Array(new Int32Array(ct.shape).buffer),new Uint8Array(new Int32Array(Mt.shape).buffer),Ft),i!=null&&_.disposeData(i.dataId),Ut}var RL={kernelName:Ja,backendName:"wasm",setupFunc:rse,kernelFunc:ose},DL;function nse(o){DL=o.wasm.cwrap(as,null,["number","number","number","number","number","number","number","number","number","number"])}function sse(o){let{backend:i,inputs:s,attrs:_}=o,{images:_e}=s,{alignCorners:ct,halfPixelCenters:Mt,size:Ft}=_,[Ut,Xt]=Ft,[Kt,nr,rr,or]=_e.shape,hr=[Kt,Ut,Xt,or],fr=i.makeOutput(hr,"float32");if(y.sizeFromShape(_e.shape)===0)return fr;let yr,Lr=i.dataIdMap.get(_e.dataId);Lr.dtype!=="float32"&&(yr=Mr({backend:i,inputs:{x:_e},attrs:{dtype:"float32"}}),Lr=i.dataIdMap.get(yr.dataId));let Br=Lr.id,Vr=i.dataIdMap.get(fr.dataId).id;return DL(Br,Kt,nr,rr,or,Ut,Xt,ct?1:0,Mt?1:0,Vr),yr!=null&&i.disposeData(yr.dataId),fr}var AL={kernelName:as,backendName:"wasm",setupFunc:nse,kernelFunc:sse},FL;function ase(o){FL=o.wasm.cwrap(Za,null,["number","number","number","array","array","boolean"])}function ise(o){let i,{inputs:s,backend:_,attrs:_e}=o,{images:ct,dy:Mt}=s,{alignCorners:Ft}=_e,Ut=_.makeOutput(ct.shape,"float32"),Xt=_.dataIdMap.get(ct.dataId);return Xt.dtype!=="float32"&&(i=Mr({backend:_,inputs:{x:ct},attrs:{dtype:"float32"}}),Xt=_.dataIdMap.get(i.dataId)),FL(_.dataIdMap.get(ct.dataId).id,_.dataIdMap.get(Mt.dataId).id,_.dataIdMap.get(Ut.dataId).id,new Uint8Array(new Int32Array(ct.shape).buffer),new Uint8Array(new Int32Array(Mt.shape).buffer),Ft),i!=null&&_.disposeData(i.dataId),Ut}var PL={kernelName:Za,backendName:"wasm",setupFunc:ase,kernelFunc:ise},OL;function use(o){OL=o.wasm.cwrap(ps,null,["number","array","number","array","number","number"])}function pse(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{dims:ct}=_,Mt=y.parseAxisParam(ct,_e.shape);if(_e.shape.length===0)return Np({inputs:{x:_e},backend:s});let Ft=s.makeOutput(_e.shape,_e.dtype),Ut=s.dataIdMap.get(_e.dataId).id,Xt=s.dataIdMap.get(Ft.dataId).id,Kt=new Uint8Array(new Int32Array(Mt).buffer),nr=new Uint8Array(new Int32Array(_e.shape).buffer);OL(Ut,Kt,Mt.length,nr,_e.shape.length,Xt);let rr=zt({inputs:{x:Ft},attrs:{shape:_e.shape},backend:s});return s.disposeData(Ft.dataId),rr}var ML={kernelName:ps,backendName:"wasm",kernelFunc:pse,setupFunc:use},LL;function cse(o){LL=o.wasm.cwrap(Ds,null,["number","number","number","number","number","number","number","number","array","number","number"])}function lse(o){let{inputs:i,backend:s,attrs:_}=o,{image:_e}=i,{radians:ct,fillValue:Mt,center:Ft}=_,Ut=s.makeOutput(_e.shape,_e.dtype),Xt=s.dataIdMap.get(_e.dataId).id,Kt=s.dataIdMap.get(Ut.dataId).id,[nr,rr,or,hr]=_e.shape,[fr,yr]=w.getImageCenter(Ft,rr,or),Lr=typeof Mt=="number"?[Mt,Mt,Mt,Mt===0?0:255]:[...Mt,255],Br=new Uint8Array(new Int32Array(Lr).buffer);return LL(Xt,nr,rr,or,hr,ct,fr,yr,Br,Lr.length,Kt),Ut}var BL={kernelName:Ds,backendName:"wasm",kernelFunc:lse,setupFunc:cse},zL=he$1(cs),VL=he$1(ls),WL;function mse(o){WL=o.wasm.cwrap(ms,null,["number","number","number","number","number","number","array","number","number"])}function dse(o){let{backend:i,inputs:s,attrs:_}=o,{indices:_e,updates:ct}=s,{shape:Mt}=_,Ft=i.makeOutput(Mt,ct.dtype);if(y.sizeFromShape(Mt)===0)return Ft;let{sliceRank:Ut,numUpdates:Xt,sliceSize:Kt,strides:nr,outputSize:rr}=du.calculateShapes(ct,_e,Mt),or=i.dataIdMap.get(_e.dataId).id,hr=i.dataIdMap.get(ct.dataId).id,fr=new Uint8Array(new Int32Array(nr).buffer),yr=i.dataIdMap.get(Ft.dataId).id;return WL(or,hr,we$1[ct.dtype],Ut,Xt,Kt,fr,rr,yr),Ft}var UL={kernelName:ms,backendName:"wasm",setupFunc:mse,kernelFunc:dse},GL;function fse(o){GL=o.wasm.cwrap(fs,null,["number","number","number","number","number","number","bool","number"])}function hse(o){let{inputs:i,backend:s,attrs:_}=o,{sortedSequence:_e,values:ct}=i,{side:Mt}=_;if(_e.dtype!==ct.dtype)throw new Error(`SearchSorted error: sorted_sequence must have the same dtype as values. Got ${_e.dtype} and ${ct.dtype}`);let Ft=s.makeOutput(ct.shape,"int32");function Ut(Xt){return s.dataIdMap.get(Xt.dataId).id}return GL(Ut(_e),Ut(ct),_e.shape[0],_e.shape[1],ct.shape[1],we$1[_e.dtype],Mt==="left",Ut(Ft)),Ft}var HL={kernelName:fs,backendName:"wasm",setupFunc:fse,kernelFunc:hse},KL;function gse(o){KL=o.wasm.cwrap("SelectV2",null,["number","number","number","number","number"])}function xse(o){let{inputs:i,backend:s}=o,{condition:_,t:_e,e:ct}=i,Mt=s.dataIdMap.get(_.dataId).id,Ft=s.dataIdMap.get(_e.dataId).id,Ut=s.dataIdMap.get(ct.dataId).id,Xt=s.makeOutput(_e.shape,_e.dtype),Kt=s.dataIdMap.get(Xt.dataId).id,nr=_.shape.length,rr=_e.shape.length,or=nr===0||nr>1||rr===1?1:y.sizeFromShape(_e.shape.slice(1));return KL(Mt,Ft,Ut,or,Kt),Xt}var qL={kernelName:fa,backendName:"wasm",kernelFunc:xse,setupFunc:gse},jL=he$1(hs),XL;function yse(o){XL=o.wasm.cwrap(bs,null,["number","number"])}function bse(o){let{backend:i,inputs:{x:s}}=o,_=i.dataIdMap.get(s.dataId).id,_e=i.makeOutput(s.shape,s.dtype),ct=i.dataIdMap.get(_e.dataId).id;return y.sizeFromShape(_e.shape)===0||XL(_,ct),_e}var YL={kernelName:"Sigmoid",backendName:"wasm",setupFunc:yse,kernelFunc:bse},QL=he$1(ys),ZL=he$1(gs),JL=he$1(xs),eB=he$1(Cs);function Cse(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{blockShape:ct,paddings:Mt}=_,Ft=y.sizeFromShape(ct),Ut=[[0,0]];Ut.push(...Mt);for(let yr=1+ct.length;yr<_e.shape.length;++yr)Ut.push([0,0]);let Xt=Bg.kernelFunc({inputs:{x:_e},backend:s,attrs:{paddings:Ut,constantValue:0}}),Kt=w.getReshaped(Xt.shape,ct,Ft,!1),nr=w.getPermuted(Kt.length,ct.length,!1),rr=w.getReshapedPermuted(Xt.shape,ct,Ft,!1),or=zt({inputs:{x:Xt},backend:s,attrs:{shape:Kt}}),hr=ho({inputs:{x:or},backend:s,attrs:{perm:nr}}),fr=zt({inputs:{x:hr},backend:s,attrs:{shape:rr}});return s.disposeData(Xt.dataId),s.disposeData(or.dataId),s.disposeData(hr.dataId),fr}var tB={kernelName:ga,backendName:"wasm",kernelFunc:Cse},rB;function wse(o){rB=o.wasm.cwrap("SparseFillEmptyRows","number",["number","number","number","number","number","number","number","number","number","number","number","number"])}function Sse(o){let i,{backend:s,inputs:_}=o,{indices:_e,values:ct,denseShape:Mt,defaultValue:Ft}=_,Ut=_e.shape[0],Xt=_e.shape[1],Kt=s.readSync(Mt.dataId)[0],nr=[Ut+Kt,Xt],rr=s.dataIdMap.get(_e.dataId).id,or=s.dataIdMap.get(ct.dataId).id,hr=s.dataIdMap.get(Ft.dataId).id,fr=s.makeOutput(nr,_e.dtype),yr=s.dataIdMap.get(fr.dataId).id,Lr=s.makeOutput(nr.slice(0,1),ct.dtype),Br=s.dataIdMap.get(Lr.dataId).id,Vr=s.makeOutput([Kt],"bool"),Wr=s.dataIdMap.get(Vr.dataId).id,ro=s.makeOutput([Ut],_e.dtype),no=s.dataIdMap.get(ro.dataId).id,so=s.makeOutput([4],"int32"),ko=s.dataIdMap.get(so.dataId).id,To=rB(rr,or,we$1[ct.dtype],Ut,Kt,Xt,hr,yr,Br,Wr,no,ko),oo=s.readSync(so.dataId);switch(oo[0]){case 1:i=w.getSparseFillEmptyRowsIndicesDenseShapeMismatch(oo[1]);break;case 2:i=w.getSparseFillEmptyRowsNegativeIndexErrorMessage(oo[1],oo[2]);break;case 3:i=w.getSparseFillEmptyRowsOutOfRangeIndexErrorMessage(oo[1],oo[2],oo[3]);break;default:i=""}if(s.disposeData(so.dataId),i)throw s.disposeData(fr.dataId),s.disposeData(Lr.dataId),s.disposeData(Vr.dataId),s.disposeData(ro.dataId),new Error(i);let No=fr,As=Lr;return To!==nr[0]&&(No=Po({inputs:{x:fr},attrs:{begin:0,size:[To,Xt]},backend:s}),As=Po({inputs:{x:Lr},attrs:{begin:0,size:To},backend:s}),s.disposeData(fr.dataId),s.disposeData(Lr.dataId)),[No,As,Vr,ro]}var oB={kernelName:Ki,backendName:"wasm",setupFunc:wse,kernelFunc:Sse},nB;function Ise(o){nB=o.wasm.cwrap(ei,null,["number","number","number","number","number","number","number"])}function vse(o){let{backend:i,inputs:s}=o,{inputIndices:_,inputShape:_e,newShape:ct}=s;if(_.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${_.shape}`);if(_e.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${_e.shape}`);if(ct.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${ct.shape}`);let Mt=i.dataIdMap.get(_.dataId).id,Ft=i.dataIdMap.get(_e.dataId).id,Ut=i.dataIdMap.get(ct.dataId).id,Xt=_.shape[0],Kt=y.sizeFromShape(ct.shape),nr=i.makeOutput([Xt,Kt],_.dtype),rr=i.dataIdMap.get(nr.dataId).id,or=i.makeOutput([Kt],ct.dtype),hr=i.dataIdMap.get(or.dataId).id,fr=i.makeOutput([3],"int32"),yr=i.dataIdMap.get(fr.dataId).id;nB(Mt,Ft,Ut,Xt,rr,hr,yr);let Lr,Br=i.readSync(fr.dataId);switch(Br[0]){case 0:Lr=w.getSparseReshapeMultipleNegativeOneOutputDimErrorMessage(Br[1],Br[2]);break;case 1:Lr=w.getSparseReshapeNegativeOutputDimErrorMessage(Br[1],Br[2]);break;case 2:Lr=w.getSparseReshapeEmptyTensorZeroOutputDimErrorMessage();break;case 3:{let Vr=Array.from(i.readSync(_e.dataId)),Wr=Array.from(i.readSync(or.dataId));Lr=w.getSparseReshapeInputOutputMultipleErrorMessage(Vr,Wr);break}case 4:{let Vr=Array.from(i.readSync(_e.dataId)),Wr=Array.from(i.readSync(or.dataId));Lr=w.getSparseReshapeInputOutputMismatchErrorMessage(Vr,Wr);break}default:Lr=""}if(i.disposeData(fr.dataId),Lr)throw i.disposeData(nr.dataId),i.disposeData(or.dataId),new Error(Lr);return[nr,or]}var sB={kernelName:ei,backendName:"wasm",setupFunc:Ise,kernelFunc:vse},aB;function zg(o){aB=o.wasm.cwrap("SparseSegmentReduction",null,["number","number","number","number","number","number","number","number","number"])}function Vg(o,i){let{backend:s,inputs:_}=o,{data:_e,indices:ct,segmentIds:Mt}=_,Ft=ct.shape[0],Ut=s.readSync(Mt.dataId,Ft-1,Ft)[0],Xt=Ft>0?Ut+1:0;if(Xt<0)throw new Error(w.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());let Kt=_e.shape.slice();Kt[0]=Xt;let nr=s.dataIdMap.get(_e.dataId).id,rr=s.dataIdMap.get(ct.dataId).id,or=s.dataIdMap.get(Mt.dataId).id,hr=s.makeOutput(Kt,_e.dtype),fr=s.dataIdMap.get(hr.dataId).id,yr=s.makeOutput([4],"int32"),Lr=s.dataIdMap.get(yr.dataId).id;aB(nr,we$1[_e.dtype],_e.shape[0],rr,or,fr,Lr,i,0);let Br,Vr=s.readSync(yr.dataId);switch(Vr[0]){case 0:Br=w.getSparseSegmentReductionNegativeSegmentIdsErrorMessage();break;case 1:Br=w.getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage();break;case 2:Br=w.getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage(Vr[1],Vr[2]);break;case 3:Br=w.getSparseSegmentReductionIndicesOutOfRangeErrorMessage(Vr[1],Vr[2],Vr[3]);break;default:Br=""}if(s.disposeData(yr.dataId),Br)throw s.disposeData(hr.dataId),new Error(Br);return hr}function kse(o){return Vg(o,!0)}var iB={kernelName:ya,backendName:"wasm",setupFunc:zg,kernelFunc:kse};function Nse(o){return Vg(o,!1)}var uB={kernelName:ba,backendName:"wasm",setupFunc:zg,kernelFunc:Nse},pB;function Tse(o){pB=o.wasm.cwrap(vs,null,["number","number","number","number","number","number","number","number","array","number","number"])}function _se(o){let{backend:i,inputs:s,attrs:_}=o,{sparseIndices:_e,sparseValues:ct,defaultValue:Mt}=s,{outputShape:Ft}=_,Ut=i.makeOutput(Ft,Mt.dtype);if(y.sizeFromShape(Ft)===0)return Ut;let{sliceRank:Xt,numUpdates:Kt,sliceSize:nr,strides:rr,outputSize:or}=w.calculateShapes(ct,_e,Ft),hr=i.dataIdMap.get(_e.dataId).id,fr=i.dataIdMap.get(ct.dataId).id,yr=i.dataIdMap.get(Mt.dataId).id,Lr=new Uint8Array(new Int32Array(rr).buffer),Br=i.dataIdMap.get(Ut.dataId).id;return pB(hr,fr,ct.shape.length,yr,we$1[Mt.dtype],Xt,Kt,nr,Lr,or,Br),Ut}var cB={kernelName:vs,backendName:"wasm",setupFunc:Tse,kernelFunc:_se};function Ese(o){let{inputs:i,attrs:s,backend:_}=o,{x:_e}=i,{numOrSizeSplits:ct,axis:Mt}=s,Ft=y.parseAxisParam(Mt,_e.shape)[0],Ut=w.prepareSplitSize(_e,ct,Ft),Xt=new Array(_e.shape.length).fill(0),Kt=_e.shape.slice();return Ut.map(nr=>{let rr=[...Kt];rr[Ft]=nr;let or=Po({inputs:{x:_e},attrs:{begin:Xt,size:rr},backend:_});return Xt[Ft]+=nr,or})}var lB={kernelName:xa,backendName:"wasm",kernelFunc:Ese},mB=he$1(ws),dB=he$1(qi),fB=Ge(ks),hB;function Rse(o){hB=o.wasm.cwrap(wo,null,["number","number","number","number"])}function Dse(o){let{backend:i,inputs:s,attrs:_}=o,{alpha:_e}=_,{x:ct}=s,Mt=i.dataIdMap.get(ct.dataId).id,Ft=i.makeOutput(ct.shape,ct.dtype),Ut=i.dataIdMap.get(Ft.dataId).id;return hB(Mt,_e,we$1[ct.dtype],Ut),Ft}var gB={kernelName:wo,backendName:"wasm",setupFunc:Rse,kernelFunc:Dse},xB;function Ase(o){xB=o.wasm.cwrap(Ns,null,["number","array","number","array","array","array","array","array","number","number"])}function Fse(o){let i,{backend:s,inputs:_,attrs:_e}=o,{x:ct}=_,{begin:Mt,end:Ft,strides:Ut,beginMask:Xt,endMask:Kt,ellipsisMask:nr,newAxisMask:rr,shrinkAxisMask:or}=_e,{finalShapeSparse:hr,finalShape:fr,isIdentity:yr,sliceDim0:Lr,isSimpleSlice:Br,begin:Vr,end:Wr,strides:ro}=pt.sliceInfo(ct.shape,Mt,Ft,Ut,Xt,Kt,nr,rr,or);if(yr)i=zt({inputs:{x:ct},backend:s,attrs:{shape:fr}});else if(Lr||Br){y.assert(ct.shape.length>=1,()=>`Input must have rank at least 1, got: ${ct.shape.length}`);let no=pt.computeOutShape(Vr,Wr,ro),so=Po({inputs:{x:ct},backend:s,attrs:{begin:Vr,size:no}});i=zt({inputs:{x:so},backend:s,attrs:{shape:fr}}),s.disposeData(so.dataId)}else{let no=s.makeOutput(hr,"float32"),so=s.dataIdMap.get(ct.dataId).id,ko=new Uint8Array(new Int32Array(y.computeStrides(ct.shape)).buffer),To=new Uint8Array(new Int32Array(Vr).buffer),oo=new Uint8Array(new Int32Array(Wr).buffer),No=new Uint8Array(new Int32Array(ro).buffer),As=new Uint8Array(new Int32Array(hr).buffer),Ks=new Uint8Array(new Int32Array(y.computeStrides(hr)).buffer),vu=s.dataIdMap.get(no.dataId).id;xB(so,ko,ct.shape.length,To,oo,No,As,Ks,hr.length,vu),i=zt({inputs:{x:no},backend:s,attrs:{shape:fr}}),s.disposeData(no.dataId)}return i}var yB={kernelName:Ns,backendName:"wasm",setupFunc:Ase,kernelFunc:Fse};function Pse(o){let{backend:i,inputs:s,attrs:_}=o,{data:_e,dataSplits:ct}=s,{separator:Mt,nGramWidths:Ft,leftPad:Ut,rightPad:Xt,padWidth:Kt,preserveShortSequences:nr}=_,rr=i.readSync(_e.dataId),or=i.readSync(ct.dataId),[hr,fr]=cp(rr,or,Mt,Ft,Ut,Xt,Kt,nr),yr=i.makeOutput([hr.length],"string");i.dataIdMap.get(yr.dataId).stringBytes=hr;let Lr=i.makeOutput(ct.shape,"int32");return i.typedArrayFromHeap(Lr).set(fr),[yr,Lr]}var bB={kernelName:Ca,backendName:"wasm",kernelFunc:Pse};function Ose(o){let{backend:i,inputs:s,attrs:_}=o,{input:_e,delimiter:ct}=s,{skipEmpty:Mt}=_,Ft=i.readSync(_e.dataId),Ut=i.readSync(ct.dataId),[Xt,Kt,nr]=lp(Ft,Ut[0],Mt),rr=Kt.length,or=i.makeOutput([rr,2],"int32");i.typedArrayFromHeap(or).set(Xt);let hr=i.makeOutput([rr],"string");i.dataIdMap.get(hr.dataId).stringBytes=Kt;let fr=i.makeOutput([2],"int32");return i.typedArrayFromHeap(fr).set(nr),[or,hr,fr]}var CB={kernelName:ji,backendName:"wasm",kernelFunc:Ose};function Mse(o){let{backend:i,inputs:s,attrs:_}=o,{input:_e}=s,{numBuckets:ct}=_,Mt=mp(i.readSync(_e.dataId),ct),Ft=i.makeOutput(_e.shape,"int32");return i.typedArrayFromHeap(Ft).set(Mt),Ft}var wB={kernelName:Xi,backendName:"wasm",kernelFunc:Mse},SB=Ge(Ts),IB;function Bse(o){IB=o.wasm.cwrap(Ss,null,["number","number","number","number"])}function zse(o){let{backend:i,inputs:s,attrs:_}=o,{axis:_e,keepDims:ct}=_,{x:Mt}=s,Ft=i.dataIdMap.get(Mt.dataId).id,Ut=Ft,Xt=Mt,{transposed:Kt,axes:nr,originalAxes:rr,inputWasTransposed:or}=Tr(Mt,_e,i),hr=nr;if(or){let Vr=i.dataIdMap.get(Kt.dataId).id;Vr!==Ft&&(Xt=Kt,Ut=Vr,hr=w.getInnerMostAxes(hr.length,Xt.shape.length))}w.assertAxesAreInnerMostDims("sum",hr,Xt.shape.length);let[fr,yr]=w.computeOutAndReduceShapes(Xt.shape,hr),Lr=y.sizeFromShape(yr),Br=i.makeOutput(fr,Xt.dtype);if(y.sizeFromShape(Xt.shape)!==0){let Vr=i.dataIdMap.get(Br.dataId).id;IB(Ut,Lr,we$1[Br.dtype],Vr)}if(or&&i.disposeData(Kt.dataId),ct){let Vr=w.expandShapeToKeepDim(Br.shape,rr);Br.shape=Vr}return Br}var vB={kernelName:Ss,backendName:"wasm",setupFunc:Bse,kernelFunc:zse},kB=he$1(_s),NB=he$1(Es),TB;function Vse(o){TB=o.wasm.cwrap(ds,null,["number","number","number","number","number","number","array","number","number","number"])}function Wse(o){let{backend:i,inputs:s,attrs:_}=o,{tensor:_e,indices:ct,updates:Mt}=s,Ft=i.makeOutput(_e.shape,_e.dtype);if(y.sizeFromShape(_e.shape)===0)return Ft;let{sliceRank:Ut,numUpdates:Xt,sliceSize:Kt,strides:nr,outputSize:rr}=du.calculateShapes(Mt,ct,_e.shape),or=i.dataIdMap.get(ct.dataId).id,hr=i.dataIdMap.get(Mt.dataId).id,fr=i.dataIdMap.get(_e.dataId).id,yr=new Uint8Array(new Int32Array(nr).buffer),Lr=i.dataIdMap.get(Ft.dataId).id;return TB(or,hr,we$1[Mt.dtype],Ut,Xt,Kt,yr,rr,Lr,fr),Ft}var _B={kernelName:ds,backendName:"wasm",setupFunc:Vse,kernelFunc:Wse},EB;function Use(o){EB=o.wasm.cwrap(po,null,["number","array","number","array","number","number"])}function Gse(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,ct=s.dataIdMap.get(_e.dataId).id,{reps:Mt}=_,Ft=new Array(_e.shape.length);for(let rr=0;rr<Ft.length;rr++)Ft[rr]=_e.shape[rr]*Mt[rr];let Ut=new Uint8Array(new Int32Array(_e.shape).buffer),Xt=new Uint8Array(new Int32Array(Ft).buffer),Kt=s.makeOutput(Ft,_e.dtype),nr=s.dataIdMap.get(Kt.dataId).id;return EB(ct,Ut,_e.shape.length,Xt,Ft.length,we$1[Kt.dtype],nr),Kt}var $B={kernelName:po,backendName:"wasm",setupFunc:Use,kernelFunc:Gse},RB;function Hse(o){RB=o.wasm.cwrap($s,null,["number","array","number","number","number","bool","number","number"])}var Kse=({inputs:o,backend:i,attrs:s})=>{let{x:_}=o,{k:_e,sorted:ct}=s,Mt=i.dataIdMap.get(_.dataId).id,Ft=new Uint8Array(new Int32Array(_.shape).buffer),Ut=_.shape.slice();Ut[Ut.length-1]=_e;let Xt=i.makeOutput(Ut,_.dtype),Kt=i.dataIdMap.get(Xt.dataId).id,nr=i.makeOutput(Ut,"int32"),rr=i.dataIdMap.get(nr.dataId).id;return RB(Mt,Ft,_.shape.length,we$1[_.dtype],_e,ct,Kt,rr),[Xt,nr]},DB={kernelName:$s,backendName:"wasm",setupFunc:Hse,kernelFunc:Kse},AB;function qse(o){AB=o.wasm.cwrap(Rs,null,["number","number","bool","number","number","number","number","number","number","array","number","array","number","number","number","number","number"])}function jse(o){let i,{backend:s,inputs:_,attrs:_e}=o,{image:ct,transforms:Mt}=_,{interpolation:Ft,fillMode:Ut,fillValue:Xt,outputShape:Kt}=_e,[nr,rr,or,hr]=ct.shape,[fr,yr]=Kt??[rr,or],Lr=[nr,fr,yr,hr],Br=new Uint8Array(new Int32Array(y.computeStrides(ct.shape)).buffer),Vr=new Uint8Array(new Int32Array(y.computeStrides(Lr)).buffer),Wr=s.makeOutput(Lr,ct.dtype),ro=s.dataIdMap.get(Wr.dataId).id,no=s.dataIdMap.get(ct.dataId).id,so=s.dataIdMap.get(Mt.dataId).id,ko=Ft==="nearest"?1:2;switch(Ut){case"constant":default:i=1;break;case"reflect":i=2;break;case"wrap":i=3;break;case"nearest":i=4}return AB(no,so,Mt.shape[0]>1,nr,fr,yr,hr,or,rr,Br,ct.shape.length-1,Vr,Lr.length-1,ko,i,Xt,ro),Wr}var FB={kernelName:Rs,backendName:"wasm",setupFunc:qse,kernelFunc:jse};function Xse(o){let{inputs:i,attrs:s,backend:_}=o,{axis:_e}=s,{x:ct}=i,{outputValues:Mt,outputShape:Ft,indices:Ut}=dp(_.readSync(ct.dataId),_e,ct.shape,ct.dtype);return[_.makeOutput(Ft,ct.dtype,void 0,Mt),_.makeOutput([Ut.length],"int32",void 0,Ut)]}var PB={kernelName:Yi,backendName:"wasm",kernelFunc:Xse};function Yse(o){let{inputs:i,backend:s,attrs:_}=o,{value:_e}=i,{axis:ct}=_;ct<0&&(ct+=_e.shape.length);let Mt=_e.shape[ct],Ft=_e.shape.length,Ut=new Array(Ft-1),Xt=0;for(let or=0;or<Ft;or++)or!==ct&&(Ut[Xt++]=_e.shape[or]);let Kt=new Array(Mt),nr=new Array(Ft).fill(0),rr=_e.shape.slice();rr[ct]=1;for(let or=0;or<Kt.length;or++)nr[ct]=or,Kt[or]=Po({inputs:{x:_e},attrs:{begin:nr,size:rr},backend:s});return Kt.map(({dataId:or,dtype:hr})=>({dataId:or,dtype:hr,shape:Ut}))}var OB={kernelName:wa,backendName:"wasm",kernelFunc:Yse};function Qse(o){let{inputs:{x:i},backend:s}=o,_=s.makeOutput(i.shape,i.dtype);return s.typedArrayFromHeap(_).fill(0),_}var MB={kernelName:Sa,backendName:"wasm",kernelFunc:Qse},Zse=[SP,IP,vP,kP,NP,_P,AP,PP,OP,MP,LP,BP,zP,VP,WP,GP,YP,KP,jP,JP,tO,oO,nO,sO,aO,iO,pO,cO,mO,fO,gO,yO,CO,wO,SO,vO,NO,_O,$O,DO,FO,OO,LO,zO,WO,UO,HO,KO,qO,jO,XO,YO,QO,JO,eM,tM,oM,sM,iM,pM,lM,mM,dM,EP,fM,hM,gM,yM,bM,CM,SM,vM,IM,kM,NM,TM,_M,$M,DM,FM,PM,MM,BM,VM,UM,HM,qM,XM,YM,ZM,rL,oL,nL,sL,iL,pL,lL,mL,fL,hL,gL,Bg,yL,CL,SL,IL,vL,kL,NL,TL,QP,EL,RL,AL,PL,ML,BL,zL,VL,UL,HL,qL,jL,YL,QL,ZL,JL,eO,eL,eB,tB,oB,sB,iB,uB,cB,lB,mB,dB,fB,gB,yB,bB,CB,wB,SB,vB,kB,NB,_B,$B,DB,FB,RP,PB,OB,MB];for(let o of Zse)ti(o);var zv=A();zv.registerFlag("WASM_HAS_SIMD_SUPPORT",async()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]))}catch{return!1}}),zv.registerFlag("WASM_HAS_MULTITHREAD_SUPPORT",async()=>{if(zv.get("IS_NODE"))return!1;try{return new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}});var jv=zp(VB()),qB=zp(UB()),Xv=zp(GB()),HB=jv.default||jv,Jse=Xv.default||Xv,pm=class extends ao{constructor(o){super(),this.wasm=o,this.dataIdNextNumber=1,this.wasm.tfjs.initWithThreadsCount(XB),qv=this.wasm.tfjs.getThreadsCount(),this.dataIdMap=new Bo(this,ur())}write(o,i,s){let _={id:this.dataIdNextNumber++};return this.move(_,o,i,s,1),_}numDataIds(){return this.dataIdMap.numDataIds()}async time(o){let i=y.now();return o(),{kernelMs:y.now()-i}}move(o,i,s,_,_e){let ct=this.dataIdNextNumber++;if(_==="string"){let Xt=i;return void this.dataIdMap.set(o,{id:ct,stringBytes:Xt,shape:s,dtype:_,memoryOffset:null,refCount:_e})}let Mt=y.sizeFromShape(s),Ft=Mt*y.bytesPerElement(_),Ut=this.wasm._malloc(Ft)>>>0;this.dataIdMap.set(o,{id:ct,memoryOffset:Ut,shape:s,dtype:_,refCount:_e}),this.wasm.tfjs.registerTensor(ct,Mt,Ut),i!=null&&this.wasm.HEAPU8.set(new Uint8Array(i.buffer,i.byteOffset,Ft),Ut)}async read(o){return this.readSync(o)}readSync(o,i,s){let{memoryOffset:_,dtype:_e,shape:ct,stringBytes:Mt}=this.dataIdMap.get(o);if(_e==="string")return i!=null&&i!==0||!(s==null||s>=Mt.length)?Mt.slice(i,s):Mt;i=i||0,s=s||y.sizeFromShape(ct);let Ft=y.bytesPerElement(_e);return tae(this.wasm.HEAPU8.slice(_+i*Ft,_+s*Ft).buffer,_e)}disposeData(o,i=!1){if(this.dataIdMap.has(o)){let s=this.dataIdMap.get(o);if(s.refCount--,!i&&s.refCount>0)return!1;this.wasm._free(s.memoryOffset),this.wasm.tfjs.disposeData(s.id),this.dataIdMap.delete(o)}return!0}refCount(o){return this.dataIdMap.has(o)?this.dataIdMap.get(o).refCount:0}incRef(o){let i=this.dataIdMap.get(o);i!=null&&i.refCount++}floatPrecision(){return 32}getMemoryOffset(o){return this.dataIdMap.get(o).memoryOffset}dispose(){this.wasm.tfjs.dispose(),"PThread"in this.wasm&&this.wasm.PThread.terminateAllThreads(),this.wasm=null}memory(){return{unreliable:!1}}makeOutput(o,i,s,_){let _e;if(s==null)_e=this.write(_??null,o,i);else{let ct=this.dataIdNextNumber++;_e={id:ct},this.dataIdMap.set(_e,{id:ct,memoryOffset:s,shape:o,dtype:i,refCount:1});let Mt=y.sizeFromShape(o);this.wasm.tfjs.registerTensor(ct,Mt,s)}return{dataId:_e,shape:o,dtype:i}}typedArrayFromHeap({shape:o,dtype:i,dataId:s}){let _=this.wasm.HEAPU8.buffer,{memoryOffset:_e}=this.dataIdMap.get(s),ct=y.sizeFromShape(o);switch(i){case"float32":return new Float32Array(_,_e,ct);case"int32":return new Int32Array(_,_e,ct);case"bool":return new Uint8Array(_,_e,ct);default:throw new Error(`Unknown dtype ${i}`)}}};function eae(o){return(i,s)=>(y.fetch(o,{credentials:"same-origin"}).then(_=>{_.ok||i.env.a(`failed to load wasm binary file at '${o}'`),_.arrayBuffer().then(_e=>{WebAssembly.instantiate(_e,i).then(ct=>{s(ct.instance,ct.module)})})}),{})}function KB(o,i,s){if(Gg!=null)return Gg;let _="tfjs-backend-wasm.wasm";return o&&i?_="tfjs-backend-wasm-threaded-simd.wasm":o&&(_="tfjs-backend-wasm-simd.wasm"),im!=null&&im[_]!=null?im[_]:s+_}async function jB(){let[o,i]=await Promise.all([A().getAsync("WASM_HAS_SIMD_SUPPORT"),A().getAsync("WASM_HAS_MULTITHREAD_SUPPORT")]);return new Promise((s,_)=>{let _e={locateFile:(Ft,Ut)=>{if(Ft.endsWith(".worker.js")){let Xt=qB.wasmWorkerContents.replace(/\n/g,"\\n"),Kt=new Blob([Xt],{type:"application/javascript"});return URL.createObjectURL(Kt)}return Ft.endsWith(".wasm")?KB(o,i,am??Ut):Ut+Ft}};Yv&&(_e.instantiateWasm=eae(KB(o,i,am??"")));let ct,Mt=!1;_e.onAbort=()=>{Mt||um||(um=!0,_({message:"Make sure the server can serve the `.wasm` file relative to the bundled js file. For more details see https://github.com/tensorflow/tfjs/blob/master/tfjs-backend-wasm/README.md#using-bundlers"}))},i&&o&&Gg==null?(_e.mainScriptUrlOrBlob=new Blob(["var WasmBackendModuleThreadedSimd = "+HB.toString()],{type:"text/javascript"}),ct=HB(_e)):ct=Jse(_e),ct.then(Ft=>{Mt=!0,um=!1,Ft.tfjs={init:Ft.cwrap("init",null,[]),initWithThreadsCount:Ft.cwrap("init_with_threads_count",null,["number"]),getThreadsCount:Ft.cwrap("get_threads_count","number",[]),registerTensor:Ft.cwrap("register_tensor",null,["number","number","number"]),disposeData:Ft.cwrap("dispose_data",null,["number"]),dispose:Ft.cwrap("dispose",null,[])},s({wasm:Ft})}).catch(_)})}function tae(o,i){switch(i){case"float32":return new Float32Array(o);case"int32":return new Int32Array(o);case"bool":return new Uint8Array(o);default:throw new Error(`Unknown dtype ${i}`)}}var rae=["tfjs-backend-wasm.wasm","tfjs-backend-wasm-simd.wasm","tfjs-backend-wasm-threaded-simd.wasm"],Gg=null,am=null,im={},um=!1,Yv=!1;function oae(o,i=!1){if(Tw("setWasmPath has been deprecated in favor of setWasmPaths and will be removed in a future release."),um)throw new Error("The WASM backend was already initialized. Make sure you call `setWasmPath()` before you call `tf.setBackend()` or `tf.ready()`");Gg=o,Yv=i}function nae(o,i=!1){if(um)throw new Error("The WASM backend was already initialized. Make sure you call `setWasmPaths()` before you call `tf.setBackend()` or `tf.ready()`");if(typeof o=="string")am=o;else{im=o;let s=rae.filter(_=>im[_]==null);if(s.length>0)throw new Error(`There were no entries found for the following binaries: ${s.join(",")}. Please either call setWasmPaths with a map providing a path for each binary, or with a string indicating the directory where all the binaries can be found.`)}Yv=i}var XB=-1,qv=-1;function sae(o){XB=o}function aae(){if(qv===-1)throw new Error("WASM backend not initialized.");return qv}var iae="4.17.0",uae=2;tu("wasm",async()=>{let{wasm:o}=await jB();return new pm(o)},uae);var go=A();go.registerFlag("WEBGPU_DEFERRED_SUBMIT_BATCH_SIZE",()=>15),go.registerFlag("WEBGPU_CPU_FORWARD",()=>!0),go.registerFlag("WEBGPU_MATMUL_PROGRAM_TYPE",()=>-1),go.registerFlag("WEBGPU_USE_NAIVE_CONV2D_TRANSPOSE",()=>!0),go.registerFlag("WEBGPU_USE_LOW_POWER_GPU",()=>!1),go.registerFlag("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e3),go.registerFlag("WEBGPU_USE_PROFILE_TOOL",()=>!1),go.registerFlag("WEBGPU_IMPORT_EXTERNAL_TEXTURE",()=>!0),go.registerFlag("WEBGPU_USE_NAIVE_CONV2D_DEBUG",()=>!1),go.registerFlag("WEBGPU_THRESHOLD_TO_INCREASE_WORKGROUPS_FOR_MATMUL",()=>-1),go.registerFlag("WEBGPU_CONV_SEPARATE_IM2COL_SHADER",()=>!1),go.registerFlag("WEBGPU_PRINT_SHADER",()=>""),go.registerFlag("WEBGPU_ENGINE_COMPILE_ONLY",()=>!1);var Hg=class{constructor(o){o&&(this.vendor=o.vendor,this.architecture=o.architecture,this.intelGPUGeneration=this.getIntelGPUGeneration())}getIntelGPUGeneration(){if(this.isIntel()){if(this.architecture.startsWith("gen"))return Number(this.architecture.match(/\d+/));if(this.architecture.startsWith("xe"))return 12}return 0}isIntel(){return this.vendor==="intel"}},Kg=class{constructor(o){this.device=o,this.numUsedBuffers=0,this.numFreeBuffers=0,this.freeBuffers=new Map,this.usedBuffers=new Map,this.numBytesUsed=0,this.numBytesAllocated=0}acquireBuffer(o,i,s=!1,_=!0){let _e,ct=YB(o,i);return _?(this.freeBuffers.has(ct)||this.freeBuffers.set(ct,[]),this.freeBuffers.get(ct).length>0?(_e=this.freeBuffers.get(ct).pop(),this.numFreeBuffers--):(_e=this.device.createBuffer({size:o,usage:i,mappedAtCreation:s}),this.numBytesAllocated+=o)):(_e=this.device.createBuffer({size:o,usage:i,mappedAtCreation:s}),this.numBytesAllocated+=o),this.usedBuffers.has(ct)||this.usedBuffers.set(ct,[]),this.usedBuffers.get(ct).push(_e),this.numUsedBuffers++,this.numBytesUsed+=o,_e}releaseBuffer(o,i=!0){if(this.freeBuffers.size===0)return;let s=o.size,_=YB(s,o.usage),_e=this.usedBuffers.get(_),ct=_e.indexOf(o);if(ct<0)throw new Error("Cannot find the buffer in buffer manager");_e[ct]=_e[_e.length-1],_e.pop(),this.numUsedBuffers--,this.numBytesUsed-=s,i?(this.freeBuffers.get(_).push(o),this.numFreeBuffers++):(o.destroy(),this.numBytesAllocated-=s)}getNumUsedBuffers(){return this.numUsedBuffers}getNumFreeBuffers(){return this.numFreeBuffers}dispose(){this.freeBuffers.forEach((o,i)=>{o.forEach(s=>{s.destroy()})}),this.usedBuffers.forEach((o,i)=>{o.forEach(s=>{s.destroy()})}),this.freeBuffers=new Map,this.usedBuffers=new Map,this.numUsedBuffers=0,this.numFreeBuffers=0,this.numBytesUsed=0,this.numBytesAllocated=0}};function YB(o,i){return`${o}_${i}`}var qg=class{constructor(o){this.device=o,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures=new Map,this.usedTextures=new Map,this.numBytesUsed=0,this.numBytesAllocated=0}acquireTexture(o,i,s,_){let _e=o*i*ZB(s),ct=QB(o,i,s,_);if(this.freeTextures.has(ct)||this.freeTextures.set(ct,[]),this.usedTextures.has(ct)||this.usedTextures.set(ct,[]),this.numBytesUsed+=_e,this.numUsedTextures++,this.freeTextures.get(ct).length>0){this.numFreeTextures--;let Ft=this.freeTextures.get(ct).shift();return this.usedTextures.get(ct).push(Ft),Ft}this.numBytesAllocated+=_e;let Mt=this.device.createTexture({size:[o,i],format:s,usage:_});return this.usedTextures.get(ct).push(Mt),Mt}releaseTexture(o){if(this.freeTextures.size===0)return;let i=o.width,s=o.height,_=o.format,_e=QB(i,s,_,o.usage);this.freeTextures.has(_e)||this.freeTextures.set(_e,[]),this.freeTextures.get(_e).push(o),this.numFreeTextures++,this.numUsedTextures--;let ct=this.usedTextures.get(_e),Mt=ct.indexOf(o);if(Mt<0)throw new Error("Cannot release a texture that was never provided by this texture manager");ct.splice(Mt,1);let Ft=i*s*ZB(_);this.numBytesUsed-=Ft}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){this.freeTextures.forEach((o,i)=>{o.forEach(s=>{s.destroy()})}),this.usedTextures.forEach((o,i)=>{o.forEach(s=>{s.destroy()})}),this.freeTextures=new Map,this.usedTextures=new Map,this.numUsedTextures=0,this.numFreeTextures=0,this.numBytesUsed=0,this.numBytesAllocated=0}};function QB(o,i,s,_){return`${o}_${i}_${s}_${_}`}function ZB(o){if(o==="rgba8unorm")return 16;throw new Error(`${o} is not supported!`)}function JB(o,i){if(Math.max(...o)>5)throw new Error("Cannot symbolically compute strides for rank > 6 tensor.");let s=o.length,_=o.map(ct=>`${i}.${"xyzwuv"[ct]}`),_e=new Array(s-1);_e[s-2]=_[s-1];for(let ct=s-3;ct>=0;--ct)_e[ct]=`(${_e[ct+1]} * ${_[ct+1]})`;return _e}var Qr=(o,i,s)=>s==="int32"?`atomicAdd(${o}, bitcast<i32>(${i}));`:`
          {
            var oldValue = 0;
            loop {
              let newValueF32 = bitcast<f32>(oldValue) + (${i});
              let newValue = bitcast<i32>(newValueF32);
              let res = atomicCompareExchangeWeak(${o}, oldValue, newValue);
              if res.exchanged {
                break;
              }
              oldValue = res.old_value;
            }
          }`,wi;(function(o){o[o.FROM_PIXELS=0]="FROM_PIXELS",o[o.DRAW=1]="DRAW"})(wi||(wi={}));var oz=(o,i,s,_,_e)=>{let ct=cae(s,{dtype:_.dtype,shape:_.shape},i),Mt=o.createShaderModule({code:ct,label:i.constructor.name}),Ft=A().get("WEBGPU_PRINT_SHADER");if(Ft!==""){Ft=Ft.toLowerCase();let Ut=Ft.split(",");(Ft==="all"||Ut.some(Xt=>i.shaderKey.toLowerCase().includes(Xt)))&&(console.group(i.shaderKey),console.debug(ct),console.groupEnd())}return _e?o.createComputePipelineAsync({compute:{module:Mt,entryPoint:"_start"},label:i.constructor.name,layout:"auto"}):o.createComputePipeline({compute:{module:Mt,entryPoint:"_start"},label:i.constructor.name,layout:"auto"})},Ae=(o,i="f32")=>{switch(o){case 1:return`${i}`;case 2:return`vec2<${i}>`;case 3:return`vec3<${i}>`;case 4:return`vec4<${i}>`;default:throw new Error(`${o}-component ${i} is not supported.`)}};function ft(o){if(o<=1)return"i32";if(o===2)return"vec2<i32>";if(o===3)return"vec3<i32>";if(o===4)return"vec4<i32>";if(o===5)return"vec5";if(o===6)return"vec6";throw Error(`GPU for rank ${o} is not yet supported`)}function Oo(o){if(o===0)return"x";if(o===1)return"y";if(o===2)return"z";if(o===3)return"w";if(o===4)return"u";if(o===5)return"v";throw Error(`Index ${o} is not yet supported`)}function G$3(...o){let i;switch(o.length){case 0:i=`
        fn main()
      `;break;case 1:i=`
        fn main(${o[0]} : i32)
      `;break;default:throw Error("Unreachable")}return i}function ez(o,i){let s;return s=`
     ${pae(i)}
      fn _start(@builtin(local_invocation_id) LocalId : vec3<u32>,
                @builtin(global_invocation_id) GlobalId : vec3<u32>,
                @builtin(local_invocation_index) LocalIndex: u32,
                @builtin(workgroup_id) WorkgroupId : vec3<u32>,
                @builtin(num_workgroups) NumWorkgroups : vec3<u32>) {
        localId = LocalId;
        localIndex = LocalIndex;
        globalId = GlobalId;
        numWorkgroups = NumWorkgroups;
        workgroupId = WorkgroupId;
        ${o?"main(getGlobalIndex());":"main();"};
      }
    `,s}function pae(o){return`
  @compute @workgroup_size(${o.workgroupSize[0]}, ${o.workgroupSize[1]}, ${o.workgroupSize[2]})
`}function cae(o,i,s){let _=[],_e=s.workgroupSize[0]*s.workgroupSize[1]*s.workgroupSize[2];if(s.outputComponent=s.outputComponent?s.outputComponent:1,_.push(`

      var<private> localId: vec3<u32>;
      var<private> localIndex: u32;
      var<private> globalId: vec3<u32>;
      var<private> numWorkgroups: vec3<u32>;
      var<private> workgroupId: vec3<u32>;

      // Only used when the y/z dimension of workgroup size is 1.
      fn getGlobalIndex() -> i32 {
        ${sz(s)?"  return i32(globalId.x);":`  return i32((workgroupId.z * numWorkgroups.x * numWorkgroups.y +
                workgroupId.y * numWorkgroups.x + workgroupId.x) * ${_e}u +
                localIndex);
        `}
      }
    `),s.pixelsOpType!=null){let or=s.pixelsOpType===wi.FROM_PIXELS?`@group(0) @binding(0) var<storage, read_write> result: array<${Su(i.dtype,s.outputComponent)}>;`:`@group(0) @binding(1) var<storage, read> inBuf : array<${Su(o[0].dtype,s.outputComponent)}>;`,hr=i.shape.length===3?"vec2<i32>":"i32";_.push(`
        struct Uniform {
          outShapeStrides : ${hr},
          size            : i32,
          numChannels     : i32,
          alpha           : f32,
        };

        ${or}
        @group(0) @binding(2) var<uniform> uniforms: Uniform;
      `);let fr=rz(s);return[tz,_.join(`
`),cm(i.shape),s.getUserCode(),ez(fr,s)].join(`
`)}let ct,Mt,Ft="struct Uniforms { NAN : f32, INFINITY : f32, ";s.variableNames.forEach((or,hr)=>{let fr=ft(o[hr].shape.length);Ft+=`${or.charAt(0).toLowerCase()+or.slice(1)}Shape : ${fr}, `,ct=o[hr].shape.length-1,Mt=ft(ct),Ft+=`${or.charAt(0).toLowerCase()+or.slice(1)}ShapeStrides: ${Mt}, `});let Ut=ft(i.shape.length);Ft+=`outShape : ${Ut}, `,ct=i.shape.length-1,Mt=ft(ct),Ft+=`
         outShapeStrides: ${Mt}, `,s.size&&(Ft+="size : i32, "),s.uniforms&&(Ft+=s.uniforms),Ft+="};",Ft=yae(Ft),_.push(Ft),s.atomic?_.push(`
      @group(0) @binding(0) var<storage, read_write> result: array<atomic<i32>>;
    `):_.push(`
      @group(0) @binding(0) var<storage, read_write> result: array<${Su(i.dtype,s.outputComponent)}>;
    `),s.variableNames.forEach((or,hr)=>{_.push(`
      @group(0) @binding(${1+hr}) var<storage, read> ${or}: array<${s.variableComponents?Su(o[hr].dtype,s.variableComponents[hr]):Su(o[hr].dtype,s.outputComponent)}>;
        `)}),Ft!==""&&_.push(`
      @group(0) @binding(${1+s.variableNames.length}) var<uniform> uniforms: Uniforms;
      `);let Xt=hae(i.shape,s.dispatchLayout),Kt=[tz,_.join(`
`)+lae,cm(i.shape),Xt,gae(i.shape.length)];s.atomic||Kt.push(xae(i.shape,i.dtype,s.outputComponent)),s.variableNames.forEach((or,hr)=>{Kt.push(`${cm(o[hr].shape,or)}`)});let nr=o.map((or,hr)=>fae(or,i.shape,s.variableComponents?s.variableComponents[hr]:s.outputComponent,s.dispatchLayout.x.length===i.shape.length)).join(`
`);Kt.push(nr),Kt.push(s.getUserCode());let rr=rz(s);return Kt.push(ez(rr,s)),Kt.join(`
`)}function nz(o,i,s){let _=o.shaderKey;if(o.pixelsOpType!=null)return _;let _e=[],ct=[];i.forEach(Kt=>{_e.push(Kt.shape),ct.push(Kt.dtype)}),_e.push(s.shape),ct.push(s.dtype);let Mt=i.map(Kt=>w.getBroadcastDims(Kt.shape,s.shape)),Ft=i.map(Kt=>y.arraysEqual(Kt.shape,s.shape)).join("_"),Ut=Mt.map(Kt=>Kt.join("_")).join(";"),Xt=sz(o)?"flatDispatch":"";return _+="_"+(o.workgroupSize?o.workgroupSize.join(","):"")+_e.map(Kt=>Kt.length).join(",")+ct.join(",")+o.variableNames.join(",")+Ut+Ft+Xt,_}var tz=`
  struct vec5 {x: i32, y: i32, z: i32, w: i32, u: i32};
  struct vec6 {x: i32, y: i32, z: i32, w: i32, u: i32, v: i32};

  // Checks whether coordinates lie within the bounds of the shape.
  fn coordsInBounds2D(coord : vec2<i32>, shape : vec2<i32>) -> bool {
    return all(coord >= vec2<i32>(0)) && all(coord < shape);
  }
  fn coordsInBounds3D(coord : vec3<i32>, shape : vec3<i32>) -> bool {
    return all(coord >= vec3<i32>(0)) && all(coord < shape);
  }
  fn coordsInBounds4D(coord : vec4<i32>, shape : vec4<i32>) -> bool {
    return all(coord >= vec4<i32>(0)) && all(coord < shape);
  }

  fn getIndexFromCoords1D(coord : i32, shape : i32) -> i32 {
    return coord;
  }
  fn getIndexFromCoords2D(coords : vec2<i32>, shape : vec2<i32>) -> i32 {
    return dot(coords, vec2<i32>(shape.y, 1));
  }
  fn getIndexFromCoords3D(coords : vec3<i32>, shape : vec3<i32>) -> i32 {
    return dot(coords, vec3<i32>(shape.y * shape.z, shape.z, 1));
  }
  fn getIndexFromCoords4D(coords : vec4<i32>, shape : vec4<i32>) -> i32 {
    return dot(coords, vec4<i32>(
        shape.y * shape.z * shape.w, shape.z * shape.w, shape.w, 1));
  }
  fn getIndexFromCoords5D(coords : vec5, shape : vec5) -> i32 {
    let shapeStrides: vec5 = vec5(shape.y * shape.z * shape.w * shape.u, shape.z * shape.w * shape.u, shape.w * shape.u, shape.u, 1);
    return coords.x*shapeStrides.x + coords.y*shapeStrides.y + coords.z*shapeStrides.z + coords.w*shapeStrides.w + coords.u*shapeStrides.u;
  }
  fn getIndexFromCoords6D(coords : vec6, shape : vec6) -> i32 {
    let shapeStrides: vec6 = vec6(shape.y * shape.z * shape.w * shape.u * shape.v, shape.z * shape.w * shape.u * shape.v, shape.w * shape.u * shape.v, shape.u * shape.v, shape.v, 1);
    return coords.x*shapeStrides.x + coords.y*shapeStrides.y + coords.z*shapeStrides.z + coords.w*shapeStrides.w + coords.u*shapeStrides.u + coords.v*shapeStrides.v;
  }

  // NaN defination in IEEE 754-1985 is :
  //   - sign = either 0 or 1.
  //   - biased exponent = all 1 bits.
  //   - fraction = anything except all 0 bits (since all 0 bits represents infinity).
  // https://en.wikipedia.org/wiki/IEEE_754-1985#Representation_of_non-numbers
  fn isnan(val: f32) -> bool {
    let floatToUint: u32 = bitcast<u32>(val);
    return (floatToUint & 0x7fffffffu) > 0x7f800000u;
  }
  fn isnanVec4(val : vec4<f32>) -> vec4<bool> {
    let floatToUint: vec4<u32> = bitcast<vec4<u32>>(val);
    return (floatToUint & vec4<u32>(0x7fffffffu)) > vec4<u32>(0x7f800000u);
  }
`,lae=`
  fn isinf(val: f32) -> bool {
    return abs(val) == uniforms.INFINITY;
  }
`;function cm(o,i=""){let s=o.length,_=i!==""?`get${i.charAt(0).toUpperCase()+i.slice(1)}CoordsFromIndex`:"getCoordsFromIndex",_e=i!==""?`${i.charAt(0).toLowerCase()+i.slice(1)}ShapeStrides`:"outShapeStrides";if(s<=1)return`fn ${_}(index : i32) -> i32 { return index; }`;let ct,Mt=y.computeStrides(o),Ft=ft(s),Ut=[];for(let Xt=0;Xt<s;Xt++)Ut.push(`d${Xt}`);return Mt.length===1?`    fn ${_}(index : i32) -> vec2<i32> {
      let d0 = index / uniforms.${_e}; let d1 = index - d0 * uniforms.${_e};
      return vec2<i32>(d0, d1);
    }`:(ct="var index2 = index;"+Mt.map((Xt,Kt)=>`${`let ${Ut[Kt]} = index2 / uniforms.${_e}.${Oo(Kt)}`}; ${Kt===Mt.length-1?`let ${Ut[Kt+1]} = index2 - ${Ut[Kt]} * uniforms.${_e}.${Oo(Kt)}`:`index2 = index2 - ${Ut[Kt]} * uniforms.${_e}.${Oo(Kt)}`};`).join(""),`
    fn ${_}(index : i32) -> ${Ft} {
      ${ct}
      return ${Ft}(${Ut.join(",")});
    }
  `)}function mae(o,i){let s=o.name,_=o.shape.length,_e=ft(_),ct="get"+s.charAt(0).toUpperCase()+s.slice(1),Mt=["d0","d1","d2","d3","d4","d5"].slice(0,_),Ft=Mt.map(Kt=>`${Kt} : i32`).join(", ");if(_<1)return`
      fn ${ct}() -> ${Ae(i)} {
        return ${Ae(i)}(${s}[0]);
      }
    `;let Ut=`uniforms.${s.charAt(0).toLowerCase()+s.slice(1)}Shape`,Xt=`${_}D`;return _===0&&(Xt="1D"),`
    fn ${ct}(${Ft}) -> ${Ae(i)} {
      return ${Ae(i)}(${s}[getIndexFromCoords${Xt}(${_e}(${Mt.join(",")}),
        ${Ut})${i===1?"":` / ${i}`}]);
    }
   `}function dae(o,i,s,_){let _e=o.name,ct=_e.charAt(0).toUpperCase()+_e.slice(1),Mt="get"+ct+"ByOutput",Ft=o.shape.length,Ut=i.length,Xt=ft(Ut);if(y.arraysEqual(o.shape,i)&&_)return`
    fn ${Mt}Index(globalIndex : i32) -> ${Ae(s)} {
      return ${Ae(s)}(${_e}[globalIndex]);
    }

    fn ${Mt}Coords(coords : ${Xt}) -> ${Ae(s)} {
      return ${Ae(s)}(${_e}[${Ut>1?"getOutputIndexFromCoords(coords)":"coords"}${s===1?"":` / ${s}`}]);
    }
    `;let Kt=w.getBroadcastDims(o.shape,i),nr=Ut-Ft,rr="";if(Ft===0)return`
    fn ${Mt}Index(globalIndex : i32) -> ${Ae(s)}{
      return get${ct}();
    }

    fn ${Mt}Coords(coords : ${Xt}) -> ${Ae(s)}{
      return get${ct}();
    }
  `;rr=Ut<2&&Kt.length>=1?"coords = 0;":Kt.map(yr=>`coords.${Oo(yr+nr)} = 0;`).join(`
`);let or="";Ut<2&&Ft>0?or="coords":Ut>1?or=`${ft(Ft)}(${o.shape.map((yr,Lr)=>`coords.${Oo(Lr+nr)}`).join(", ")})`:or="coords";let hr=`uniforms.${_e.charAt(0).toLowerCase()+_e.slice(1)}Shape`,fr=`${Ft}D`;return`
  fn ${Mt}Index(globalIndex : i32) -> ${Ae(s)} {
    var coords = getCoordsFromIndex(globalIndex);
    ${rr}
    return ${Ae(s)}(${_e}[getIndexFromCoords${fr}(${or}, ${hr})${s===1?"":` / ${s}`}]);
  }

  fn ${Mt}Coords(coordsIn : ${Xt}) -> ${Ae(s)} {
    var coords = coordsIn;
    ${rr}
    return ${Ae(s)}(${_e}[getIndexFromCoords${fr}(${or}, ${hr})${s===1?"":` / ${s}`}]);
  }
`}function fae(o,i,s,_){let _e=mae(o,s);return o.shape.length<=i.length&&(_e+=dae(o,i,s,_)),_e}function hae(o,i){let{x:s,y:_=[],z:_e=[]}=i,ct=o.length,Mt=s.length+_.length+_e.length;if(Mt!==ct)return"";if(s.length===ct)return`fn getOutputCoords() -> ${ft(ct)}{
    let globalIndex = getGlobalIndex();
    return getCoordsFromIndex(globalIndex);
  }
  `;let Ft="",Ut=[s,_,_e];for(let rr=0;rr<Ut.length;rr++){let or=Ut[rr];if(or.length!==0)if(or.length===1)Ft+=`let d${or[0]} = i32(globalId[${rr}]);`;else{let hr=JB(or,"uniforms.outShape");Ft+=`var index${rr} = i32(globalId[${rr}]);`;for(let fr=0;fr<hr.length;fr++)Ft+=`let d${or[fr]} = index${rr} / ${hr[fr]};`,fr===hr.length-1?Ft+=`let d${or[fr+1]} = index${rr} - d${or[fr]} * ${hr[fr]};`:Ft+=`index${rr} = index${rr} - d${or[fr]} * ${hr[fr]};`}}let Xt=[];for(let rr=0;rr<Mt;rr++)Xt.push(`d${rr}`);let Kt=ft(Mt),nr=`fn getOutputCoords() -> ${Kt} {
  ${Ft}
`;return Xt.length===0?nr+=`return ${Kt}(0); }`:nr+=`return ${Kt}(${Xt.join(",")}); }`,nr}function gae(o){let i="";switch(o){case 0:case 1:i+=`
        fn getOutputIndexFromCoords(coords : i32) -> i32 {
          return coords;
        }
        `;break;case 2:i+=`
        fn getOutputIndexFromCoords(coords : vec2<i32>) -> i32 {
          return dot(coords, vec2<i32>(uniforms.outShapeStrides, 1));
        }
        `;break;case 3:i+=`
        fn getOutputIndexFromCoords(coords : vec3<i32>) -> i32 {
          return dot(coords, vec3<i32>(uniforms.outShapeStrides.x, uniforms.outShapeStrides.y, 1));
        }
        `;break;case 4:i+=`
        fn getOutputIndexFromCoords(coords : vec4<i32>) -> i32 {
          return dot(coords, vec4<i32>(
            uniforms.outShapeStrides.x, uniforms.outShapeStrides.y, uniforms.outShapeStrides.z, 1));
        }
        `;break;case 5:i+=`
        fn getOutputIndexFromCoords(coords : vec5) -> i32 {
          return coords.x * uniforms.outShapeStrides.x +
              coords.y * uniforms.outShapeStrides.y +
              coords.z * uniforms.outShapeStrides.z +
              coords.w * uniforms.outShapeStrides.w +
              coords.u;
        }
        `;break;case 6:i+=`
        fn getOutputIndexFromCoords(coords : vec6) -> i32 {
          return coords.x * uniforms.outShapeStrides.x +
              coords.y * uniforms.outShapeStrides.y +
              coords.z * uniforms.outShapeStrides.z +
              coords.w * uniforms.outShapeStrides.w +
              coords.u * uniforms.outShapeStrides.u +
              coords.v;
        }
        `;break;default:y.assert(!1,()=>`Unsupported ${o}D shape`)}return i}function sz(o){return o.dispatch[1]===1&&o.dispatch[2]===1}function Su(o,i=1){if(o==="float32")return Ae(i,"f32");if(o==="int32"||o==="bool")return Ae(i,"i32");throw new Error(`type ${o} is not supported.`)}function xae(o,i,s){let _=o.length,_e=Su(i,s),ct=`fn setOutputAtIndex(flatIndex : i32, value : ${Ae(s)}) {
      result[flatIndex] = ${_e}(value);
    }

    fn setOutputAtIndexI32(flatIndex : i32, value : ${Ae(s,"i32")}) {
      result[flatIndex] = ${_e}(value);
    }
    `;if(_>=2){let Mt=["d0","d1","d2","d3","d4","d5"].slice(0,_),Ft=ft(_);ct+=`
      fn setOutputAtCoords(${Mt.map(Ut=>`${Ut} : i32`).join(", ")}, value : ${Ae(s)}) {
        let flatIndex = getOutputIndexFromCoords(${Ft}(${Mt.join(", ")}));
        setOutputAtIndex(flatIndex${s===1?"":` / ${s}`}, value);
      }
      fn setOutputAtCoordsI32(${Mt.map(Ut=>`${Ut} : i32`).join(", ")}, value : ${Ae(s,"i32")}) {
        let flatIndex = getOutputIndexFromCoords(${Ft}(${Mt.join(", ")}));
        setOutputAtIndexI32(flatIndex${s===1?"":` / ${s}`}, value);
      }
    `}return ct}function yae(o){return o=(o=o.replace(/(\w+)\s*:\s*vec(5|6)/g,i=>"@align(16) "+i)).replace(/vec(5|6)\s*,\s*(\w+)/g,(i,s,_)=>`vec${s}, @align(16) ${_}`)}function rz(o){return!(o.dispatchLayout.hasOwnProperty("y")&&o.dispatchLayout.y.length!==0||o.dispatchLayout.hasOwnProperty("z")&&o.dispatchLayout.z.length!==0)}var Zv={};qe(Zv,{GPUBytesPerElement:()=>jg,MatMulProgramType:()=>Mo,assertNotComplex:()=>fm,computeDispatch:()=>H$2,computeWorkPerThreadForConv2d:()=>mm,computeWorkgroupInfoForMatMul:()=>Qv,computeWorkgroupSizeForConv2d:()=>lm,flatDispatchLayout:()=>X$3,isWebGPUSupported:()=>dm,tilesFitEvenlyIntoShape:()=>Cae});var Tp=o=>{let i=1;for(let s=0;s<o.length;s++)i*=o[s];return i},Mo;function Cae(o,i){if(o.length!==i.length)throw new Error(`Cannot compute whether rank ${o.length} tiles fit evenly into rank ${i.length} shape - ranks must match.`);return i.every((s,_)=>s%o[_]==0)}function H$2(o,i,s=[1,1,1],_=[1,1,1]){let[_e,ct,Mt]=[Math.ceil(Tp(o.x.map(Ft=>i[Ft]))/(s[0]*_[0])),o.y?Math.ceil(Tp(o.y.map(Ft=>i[Ft]))/(s[1]*_[1])):1,o.z?Math.ceil(Tp(o.z.map(Ft=>i[Ft]))/(s[2]*_[2])):1];return[_e,ct,Mt]}function Qv(o,i,s,_=!1){let _e=[8,8,1],ct=[4,4,1];return _||(o<=8&&(ct[1]=1),i<=16&&s<=16&&(_e[0]=4)),{workgroupSize:_e,elementsPerThread:ct}}function lm(o,i,s=!1){if(s)return[8,8,1];let _=Tp(o.x.map(ct=>i[ct])),_e=Tp(o.y.map(ct=>i[ct]));return _<=4?[4,16,1]:_e<=4?[16,4,1]:[16,16,1]}function mm(o,i,s=!1){if(s)return[4,4,1];let _=Tp(o.x.map(ct=>i[ct])),_e=Tp(o.y.map(ct=>i[ct]));return _<=4?[1,2,1]:_e<=4?[2,1,1]:[2,2,1]}function X$3(o){return{x:o.map((i,s)=>s)}}function jg(o){if(o==="float32"||o==="int32"||o==="bool"||o==="string")return 4;if(o==="complex64")return 8;throw new Error(`Unknown dtype ${o}`)}function dm(){return!(typeof globalThis>"u"||!globalThis.navigator||!globalThis.navigator.gpu)}function fm(o,i){Array.isArray(o)||(o=[o]),o.forEach(s=>{s!=null&&y.assert(s.dtype!=="complex64",()=>`${i} does not support complex64 tensors in the WebGPU backend.`)})}(function(o){o[o.MatMulReduceProgram=0]="MatMulReduceProgram",o[o.MatMulSplitKProgram=1]="MatMulSplitKProgram",o[o.MatMulSmallOutputSizeProgram=2]="MatMulSmallOutputSizeProgram",o[o.MatMulPackedProgram=3]="MatMulPackedProgram",o[o.MatMulMax=4]="MatMulMax"})(Mo||(Mo={}));var wae=A().getNumber("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD"),Sae=(o,i)=>{let s=o.limits.maxComputeWorkgroupsPerDimension,_=i.dispatchLayout,_e=i.dispatch;if(_e.every(Mt=>Mt<=s))return _e;y.assert(_e[0]>s&&_.y===void 0&&_.z===void 0,()=>"Dispatch size exceeds WebGPU limits in Y or Z dimension.");let ct=Math.ceil(Math.sqrt(_e[0]));return ct>s?(ct=Math.ceil(Math.cbrt(_e[0])),y.assert(ct<=s,()=>"Total dispatch size exceeds WebGPU maximum."),[ct,ct,ct]):[ct,ct,1]},jc=class e1e extends ao{nextDataId(){return e1e.nextDataId++}constructor(i,s){if(super(),this.commandQueueOwnedIds=new WeakSet,this.dispatchCountInPass=0,this.disposed=!1,this.downloadWaitMs=0,this.tensorDataPendingDisposal=[],this.queryResolveBuffer=null,this.querySet=null,this.querySetCount=2,this.stagingPendingDisposal=[],this.uniformPendingDisposal=[],this.uploadWaitMs=0,this.hasReadSyncWarned=!1,this.hasTimestampQueryWarned=!1,!dm())throw new Error("WebGPU is not supported on this device");this.pipelineCache={},this.device=i,this.queue=i.queue,this.commandEncoder=null,this.computePassEncoder=null,this.adapterInfo=new Hg(s),this.supportTimestampQuery=this.device.features.has("timestamp-query"),this.thresholdToIncreaseWorkgroups=this.adapterInfo.intelGPUGeneration>=12?16:8,this.bufferManager=new Kg(this.device),this.textureManager=new qg(this.device),this.tensorMap=new Bo(this,ur()),A().getBool("WEBGPU_USE_PROFILE_TOOL")&&(this.dummyCanvas=document.createElement("canvas"),this.dummyCanvas.width=1,this.dummyCanvas.height=1,this.dummyContext=this.dummyCanvas.getContext("webgpu"),this.dummyContext.configure({device:i,format:"bgra8unorm"}),document.body.appendChild(this.dummyCanvas))}floatPrecision(){return 32}disposeData(i,s=!1){if(!this.tensorMap.has(i))return!0;let _=this.tensorMap.get(i);return s?_.refCount=0:_.refCount--,!(_.refCount>0)&&(_.complexTensorInfos!=null&&(this.disposeData(_.complexTensorInfos.real.dataId),this.disposeData(_.complexTensorInfos.imag.dataId)),this.commandQueueOwnedIds.has(i)?(this.tensorDataPendingDisposal.push(i),!0):(this.releaseResource(i),this.tensorMap.delete(i),!0))}memory(){return{numBytesInGPU:this.bufferManager.numBytesUsed,numBytesAllocatedInGPU:this.bufferManager.numBytesAllocated,unreliable:!1}}releaseResource(i){let s=this.tensorMap.get(i);if(s&&s.resource){if(s.external)return void(s.resource=null);s.resource instanceof GPUBuffer?this.bufferManager.releaseBuffer(s.resource):s.resource instanceof GPUTexture&&this.textureManager.releaseTexture(s.resource),s.resource=null}}refCount(i){return this.tensorMap.has(i)?this.tensorMap.get(i).refCount:0}incRef(i){this.tensorMap.get(i).refCount++}decRef(i){this.tensorMap.has(i)&&this.tensorMap.get(i).refCount--}write(i,s,_){if(_==="complex64"&&i!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");let _e={id:this.nextDataId()};return this.tensorMap.set(_e,{dtype:_,shape:s,values:i,refCount:1}),_e}move(i,s,_,_e,ct){if(_e==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.tensorMap.set(i,{dtype:_e,shape:_,values:s,refCount:ct})}submitQueue(){this.queue.submit([this.commandEncoder.finish()]),this.commandEncoder=null,this.dispatchCountInPass=0,this.commandQueueOwnedIds=new WeakSet,this.tensorDataPendingDisposal.forEach(i=>{this.releaseResource(i),this.tensorMap.delete(i)}),this.uniformPendingDisposal.forEach(i=>this.bufferManager.releaseBuffer(i)),this.stagingPendingDisposal.forEach(i=>this.bufferManager.releaseBuffer(i,!1)),this.tensorDataPendingDisposal=[],this.uniformPendingDisposal=[],this.stagingPendingDisposal=[]}ensureCommandEncoderReady(){this.commandEncoder||(this.commandEncoder=this.device.createCommandEncoder())}endComputePassEncoder(){this.computePassEncoder&&(this.computePassEncoder.end(),this.computePassEncoder=null)}async checkCompileCompletionAsync(){let i;try{i=await Promise.all(Object.values(this.pipelineCache))}catch(s){throw new Error(s.message)}Object.keys(this.pipelineCache).map((s,_)=>{this.pipelineCache[s]=i[_]})}async getBufferData(i){if(A().getBool("WEBGPU_ENGINE_COMPILE_ONLY"))return console.warn("The data may be invalid since WEBGPU_ENGINE_COMPILE_ONLY is true, this can only be called when WEBGPU_ENGINE_COMPILE_ONLY is false"),null;let s=i.size,_=this.bufferManager.acquireBuffer(s,GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ);this.ensureCommandEncoderReady(),this.endComputePassEncoder(),this.commandEncoder.copyBufferToBuffer(i,0,_,0,s),this.submitQueue(),await _.mapAsync(GPUMapMode.READ);let _e=_.getMappedRange().slice(0);return _.unmap(),_!=null&&this.bufferManager.releaseBuffer(_),A().getBool("WEBGPU_USE_PROFILE_TOOL")&&(y.assert(this.dummyContext!==void 0,()=>"Fail to get context for profiling tool"),this.dummyContext.getCurrentTexture()),_e}convertAndCacheOnCPU(i,s){let _=this.tensorMap.get(i);return _.values=s,_.values}readSync(i){let s=this.tensorMap.get(i),{values:_,complexTensorInfos:_e}=s;if(_!=null||s.dtype==="string")return _;if(s.dtype==="complex64"){let fr=this.readSync(_e.real.dataId),yr=this.readSync(_e.imag.dataId),Lr=y.convertBackendValuesAndArrayBuffer(w.mergeRealAndImagArrays(fr,yr).buffer,"float32");return this.convertAndCacheOnCPU(i,Lr),Lr}this.hasReadSyncWarned||(this.hasReadSyncWarned=!0,console.warn("The performance of synchronously reading data from GPU to CPU is poor on the webgpu backend, please use asynchronous APIs instead."));let ct=["opaque","premultiplied"],Mt=s.resource,Ft=Mt.size;y.assert(Ft%4==0,()=>"Because there is 4 bytes for one pixel, buffer size must be multiple of 4.");let Ut=Ft/4,Xt=new ArrayBuffer(Ft),Kt=256,nr=256,rr=ct.map(fr=>new OffscreenCanvas(Kt,nr)),or=new OffscreenCanvas(Kt,nr);this.endComputePassEncoder(),rr.map((fr,yr)=>{let Lr=fr.getContext("webgpu");return Lr.configure({device:this.device,format:"bgra8unorm",usage:GPUTextureUsage.COPY_DST,alphaMode:ct[yr]}),Lr.getCurrentTexture()}).map((fr,yr)=>{let Lr=(so,ko,To)=>{this.ensureCommandEncoderReady(),this.commandEncoder.copyBufferToTexture({buffer:Mt,bytesPerRow:1024,offset:To},{texture:fr},{width:so,height:ko}),this.submitQueue();let oo=or.getContext("2d",{willReadFrequently:!0});oo.clearRect(0,0,so,ko),oo.drawImage(rr[yr],0,0);let No=oo.getImageData(0,0,so,ko).data,As=ct[yr],Ks=new Uint8ClampedArray(Xt,To,so*ko*4);for(let vu=0;vu<Ks.length;vu+=4)if(As==="premultiplied")Ks[vu+3]=No[vu+3];else{let Fu=No[vu];Ks[vu]=No[vu+2],Ks[vu+1]=No[vu+1],Ks[vu+2]=Fu}},Br=Math.floor(Ut/(Kt*nr)),Vr=Kt,Wr=nr,ro=0;for(let so=0;so<Br;so++)Lr(Vr,Wr,ro),ro+=Kt*nr*4;let no=Ut%(Kt*nr);Wr=Math.floor(no/Kt),Wr>0&&(Lr(Vr,Wr,ro),ro+=Wr*(4*Kt)),Vr=no%Kt,Vr>0&&Lr(Vr,1,ro)});let hr=y.convertBackendValuesAndArrayBuffer(Xt,s.dtype);return this.convertAndCacheOnCPU(i,hr),hr}async read(i){if(!this.tensorMap.has(i))throw new Error(`Tensor ${i} was not registered!`);let s,_=this.tensorMap.get(i),{values:_e}=_;if(_e!=null)return _e;if(_.dtype==="complex64"){let ct=await Promise.all([this.read(_.complexTensorInfos.real.dataId),this.read(_.complexTensorInfos.imag.dataId)]),Mt=ct[0],Ft=ct[1];s=w.mergeRealAndImagArrays(Mt,Ft)}else{let ct=await this.getBufferData(_.resource);s=y.convertBackendValuesAndArrayBuffer(ct,_.dtype)}return this.convertAndCacheOnCPU(i,s),s}copyBuffer(i){let s=i.size,_=i.usage,_e=this.bufferManager.acquireBuffer(s,_);return this.ensureCommandEncoderReady(),this.endComputePassEncoder(),this.commandEncoder.copyBufferToBuffer(i,0,_e,0,s),this.submitQueue(),_e}createTensorFromGPUData(i,s,_){let _e=i.buffer;if(_==="complex64")throw new Error("Cannot write to a complex64 dtype. ");let ct={id:this.nextDataId()};this.tensorMap.set(ct,{dtype:_,shape:s,values:null,refCount:1,external:i.zeroCopy});let Mt=this.tensorMap.get(ct),Ft=jg(Mt.dtype)*y.sizeFromShape(Mt.shape);if(i.buffer.size<Ft)throw new Error(`GPUBuffer size(${i.buffer.size}) is smaller than tensor size(${Ft})!`);if((i.buffer.usage&(GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC))!=(GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC))throw new Error("GPUBuffer.usage should include GPUBufferUsage.STORAGE | GPUBufferUsage.COPY_SRC!");return i.zeroCopy!==!0&&(_e=this.copyBuffer(_e)),Mt.resource=_e,ur().makeTensorFromDataId(ct,s,_,this)}readToGPU(i){let s=this.tensorMap.get(i),{values:_,dtype:_e,shape:ct,resource:Mt}=s;if(_e==="complex64")throw new Error("Does not support reading buffer for complex64 dtype.");if(Mt==null)throw _!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");let Ft=Mt,Ut=Ft.size,Xt=Ft.usage,Kt=this.bufferManager.acquireBuffer(Ut,Xt);this.ensureCommandEncoderReady(),this.endComputePassEncoder(),this.commandEncoder.copyBufferToBuffer(Mt,0,Kt,0,Ut),this.submitQueue();let nr=this.makeTensorInfo(ct,_e),rr=ur().makeTensorFromTensorInfo(nr);return this.tensorMap.get(nr.dataId).resource=Kt,{tensorRef:rr,buffer:Kt}}bufferSync(i){let s=this.readSync(i.dataId);if(i.dtype==="string")try{let _=s.map(_e=>y.decodeString(_e));return me$1(i.shape,i.dtype,_)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return me$1(i.shape,i.dtype,s)}async time(i){!this.supportTimestampQuery&&!this.hasTimestampQueryWarned&&(console.warn("This device doesn't support timestamp-query extension. Start Chrome browser with flag --enable-dawn-features=allow_unsafe_apis to try it again. Otherwise, zero will be shown for the kernel time when profiling mode is enabled."),this.hasTimestampQueryWarned=!0);let s=this.activeTimers,_=[],_e=!1;this.programTimersStack==null?(this.programTimersStack=_,_e=!0):this.activeTimers.push(_),this.activeTimers=_,i();let ct=y.flatten(this.activeTimers.map(Xt=>Xt.query)).filter(Xt=>Xt!=null),Mt=y.flatten(this.activeTimers.map(Xt=>Xt.name)).filter(Xt=>Xt!=null);this.activeTimers=s,_e&&(this.programTimersStack=null);let Ft={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},Ut=await Promise.all(ct);return Ft.kernelMs=y.sum(Ut),Ft.getExtraProfileInfo=()=>Ut.map((Xt,Kt)=>({name:Mt[Kt],ms:Xt})).map(Xt=>`${Xt.name}: ${Xt.ms}`).join(", "),this.uploadWaitMs=0,this.downloadWaitMs=0,Ft}makeTensorInfo(i,s,_){return s==="string"&&_!=null&&_.length>0&&y.isString(_[0])&&(_=_.map(_e=>y.encodeString(_e))),{dataId:this.write(_,i,s),shape:i,dtype:s}}tensorToBinding(i){if(!i)return null;let s=this.tensorMap.get(i.dataId).resource;return s instanceof GPUBuffer?{buffer:s}:s instanceof GPUTexture?s.createView():s}uploadToGPU(i){let s=this.tensorMap.get(i);if(s.resource!=null)return;let _,_e=jg(s.dtype)*y.sizeFromShape(s.shape),ct=GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST;if(s.values){if(_=this.bufferManager.acquireBuffer(_e,ct,!0),_.mapState==="unmapped"){let Mt=this.bufferManager.acquireBuffer(_e,GPUBufferUsage.MAP_WRITE|GPUBufferUsage.COPY_SRC,!0,!1),Ft=Mt.getMappedRange();s.dtype==="int32"||s.dtype==="bool"?new Int32Array(Ft).set(s.values):new Float32Array(Ft).set(s.values),Mt.unmap(),this.ensureCommandEncoderReady(),this.endComputePassEncoder(),this.commandEncoder.copyBufferToBuffer(Mt,0,_,0,_e),this.stagingPendingDisposal.push(Mt)}else{let Mt=_.getMappedRange();s.dtype==="int32"||s.dtype==="bool"?new Int32Array(Mt).set(s.values):new Float32Array(Mt).set(s.values),_.unmap()}s.values=null}else _=this.bufferManager.acquireBuffer(_e,ct);s.resource=_}makeUniforms(i){let s=0,_=0,_e=[],ct=1;i.forEach(Ut=>{let Xt;switch(Ut.data.length===0&&(Ut.data=[1]),Ut.data.length){case 1:Xt=4;break;case 2:Xt=8;break;case 3:case 4:case 5:case 6:Xt=16;break;default:y.assert(!1,()=>`Unsupported ${Ut.data.length}D shape`)}(_===5||_===6)&&(Xt=16),Xt>ct&&(ct=Xt),s=Math.ceil(s/Xt)*Xt,_=Ut.data.length,_e.push(s),s+=4*Ut.data.length}),s=Math.ceil(s/ct)*ct;let Mt=new ArrayBuffer(s);i.forEach((Ut,Xt)=>{let Kt=_e[Xt];Ut.type==="int32"?new Int32Array(Mt,Kt,Ut.data.length).set(Ut.data):Ut.type==="uint32"?new Uint32Array(Mt,Kt,Ut.data.length).set(Ut.data):new Float32Array(Mt,Kt,Ut.data.length).set(Ut.data)});let Ft=this.bufferManager.acquireBuffer(s,GPUBufferUsage.COPY_DST|GPUBufferUsage.UNIFORM);return this.queue.writeBuffer(Ft,0,Mt,0,s),this.uniformPendingDisposal.push(Ft),{offset:0,size:s,buffer:Ft}}runWebGPUProgram(i,s,_,_e,ct){if(ct||(ct=this.makeTensorInfo(i.outputShape,_)),y.sizeFromShape(ct.shape)===0)return this.tensorMap.get(ct.dataId).values=y.getTypedArrayFromDType(ct.dtype,0),ct;this.uploadToGPU(ct.dataId),i.dispatch=Sae(this.device,i);let Mt=s.map((Ut,Xt)=>{if(Ut.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");return this.uploadToGPU(Ut.dataId),{dtype:this.tensorMap.get(Ut.dataId).dtype,shape:Ut.shape,name:i.variableNames[Xt]}});i.shaderKey=nz(i,Mt,ct);let Ft=A().getBool("WEBGPU_ENGINE_COMPILE_ONLY");return i.shaderKey in this.pipelineCache||(this.pipelineCache[i.shaderKey]=oz(this.device,i,Mt,ct,Ft)),i.pipeline=this.pipelineCache[i.shaderKey],Ft||this.recordAndSubmit(i,ct,s,_e),ct}recordAndSubmit(i,s,_,_e){if(i.pipeline instanceof Promise)throw new Error("Please call checkCompileCompletionAsync to ensure parallel compilation is done!");let ct=[],Mt=[],Ft="int32";if(i.pixelsOpType==null){ct.push({type:"float32",data:[NaN]},{type:"float32",data:[1/0]}),Mt=_.concat(s).map(or=>or.shape);let rr="int32";Mt.map(or=>{ct.push({type:rr,data:or});let hr=y.computeStrides(or);ct.push({type:rr,data:hr})})}else{let rr=y.computeStrides(s.shape);ct.push({type:Ft,data:rr})}if(i.size){let rr=y.sizeFromShape(i.outputShape);ct.push({type:Ft,data:[i.outputComponent?rr/i.outputComponent:rr]})}_e&&(ct=[...ct,..._e]);let Ut=[this.tensorToBinding(s),..._.map(rr=>this.tensorToBinding(rr)),this.makeUniforms(ct)];_.forEach(rr=>{this.commandQueueOwnedIds.add(rr.dataId)}),this.commandQueueOwnedIds.add(s.dataId);let Xt=this.device.createBindGroup({layout:i.pipeline.getBindGroupLayout(0),entries:Ut.map((rr,or)=>({binding:or,resource:rr}))}),Kt=this.activeTimers!=null;this.ensureCommandEncoderReady();let nr={};Kt&&this.supportTimestampQuery?(this.endComputePassEncoder(),this.querySet==null&&(this.querySet=this.device.createQuerySet({type:"timestamp",count:this.querySetCount})),nr.timestampWrites={querySet:this.querySet,beginningOfPassWriteIndex:0,endOfPassWriteIndex:1},this.computePassEncoder=this.commandEncoder.beginComputePass(nr)):this.computePassEncoder||(this.computePassEncoder=this.commandEncoder.beginComputePass(nr)),this.computePassEncoder.setPipeline(i.pipeline),this.computePassEncoder.setBindGroup(0,Xt),this.computePassEncoder.dispatchWorkgroups(i.dispatch[0],i.dispatch[1],i.dispatch[2]),this.dispatchCountInPass++,(Kt||A().get("WEBGPU_DEFERRED_SUBMIT_BATCH_SIZE")<=this.dispatchCountInPass||i.pixelsOpType===wi.DRAW)&&(this.endComputePassEncoder(),Kt?this.activeTimers.push({name:i.constructor.name,query:this.getQueryTime()}):this.submitQueue())}async getQueryTime(){if(!this.supportTimestampQuery)return 0;this.queryResolveBuffer==null&&(this.queryResolveBuffer=this.bufferManager.acquireBuffer(8*this.querySetCount,GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST|GPUBufferUsage.QUERY_RESOLVE)),this.commandEncoder.resolveQuerySet(this.querySet,0,this.querySetCount,this.queryResolveBuffer,0);let i=this.bufferManager.acquireBuffer(8*this.querySetCount,GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST);this.commandEncoder.copyBufferToBuffer(this.queryResolveBuffer,0,i,0,8*this.querySetCount),this.submitQueue(),await i.mapAsync(GPUMapMode.READ);let s=new BigUint64Array(i.getMappedRange()),_=Number(s[1]-s[0])/1e6;return i.unmap(),this.bufferManager.releaseBuffer(i),_}shouldExecuteOnCPU(i,s=wae){return A().getBool("WEBGPU_CPU_FORWARD")&&i.every(_=>this.tensorMap.get(_.dataId).resource==null&&y.sizeFromShape(_.shape)<s)}numDataIds(){return this.tensorMap.numDataIds()-this.tensorDataPendingDisposal.length}dispose(){this.disposed||(this.querySet!=null&&this.querySet.destroy(),this.bufferManager.dispose(),this.textureManager.dispose(),this.disposed=!0)}},fe$1;jc.nextDataId=0,dm()&&tu("webgpu",async()=>{let o={powerPreference:A().get("WEBGPU_USE_LOW_POWER_GPU")?"low-power":"high-performance"},i=await navigator.gpu.requestAdapter(o),s={},_=[];i.features.has("timestamp-query")&&_.push("timestamp-query"),i.features.has("bgra8unorm-storage")&&_.push(["bgra8unorm-storage"]),s.requiredFeatures=_;let _e=i.limits;s.requiredLimits={maxComputeWorkgroupStorageSize:_e.maxComputeWorkgroupStorageSize,maxComputeWorkgroupsPerDimension:_e.maxComputeWorkgroupsPerDimension,maxStorageBufferBindingSize:_e.maxStorageBufferBindingSize,maxBufferSize:_e.maxBufferSize,maxComputeWorkgroupSizeX:_e.maxComputeWorkgroupSizeX,maxComputeInvocationsPerWorkgroup:_e.maxComputeInvocationsPerWorkgroup};let ct=await i.requestDevice(s),Mt=await i.requestAdapterInfo();return new jc(ct,Mt)},3),function(o){o[o.ADD=0]="ADD",o[o.ATAN2=1]="ATAN2",o[o.COMPLEX_MULTIPLY_IMAG=2]="COMPLEX_MULTIPLY_IMAG",o[o.COMPLEX_MULTIPLY_REAL=3]="COMPLEX_MULTIPLY_REAL",o[o.DIV=4]="DIV",o[o.ELU_DER=5]="ELU_DER",o[o.EQUAL=6]="EQUAL",o[o.FLOOR_DIV=7]="FLOOR_DIV",o[o.GREATER=8]="GREATER",o[o.GREATER_EQUAL=9]="GREATER_EQUAL",o[o.LESS=10]="LESS",o[o.LESS_EQUAL=11]="LESS_EQUAL",o[o.LOGICAL_AND=12]="LOGICAL_AND",o[o.LOGICAL_OR=13]="LOGICAL_OR",o[o.MAX=14]="MAX",o[o.MIN=15]="MIN",o[o.MOD=16]="MOD",o[o.MUL=17]="MUL",o[o.NOT_EQUAL=18]="NOT_EQUAL",o[o.POW=19]="POW",o[o.PRELU=20]="PRELU",o[o.SQUARED_DIFFERENCE=21]="SQUARED_DIFFERENCE",o[o.SUB=22]="SUB"}(fe$1||(fe$1={}));var Iae="let resultTemp = a + b;",vae="let resultTemp = atan2(a, b);",kae="let resultTemp = areal * breal - aimag * bimag;",Nae="let resultTemp = areal * bimag + aimag * breal;",Tae="let resultTemp = a / b;",_ae="let resultTemp = select(a * (b + 1.0), a, b >= b - b);",Eae=`
  let zero = sign(a) * 0 + 0;
  let one = sign(b) * 0 + 1;
  let resultTemp = select(zero, one, a == b);
`,$ae=`
  let remainder =
      select(a % b, round(a % b), (round(a) == a) & (round(b) == b));
  let quotient = (a - remainder) / b;
  let resultTemp =
      round(select(quotient, quotient - 1, sign(remainder) == -sign(b)));
`,Rae=`
  let zero = sign(a) * 0 + 0;
  let one = sign(b) * 0 + 1;
  let resultTemp = select(zero, one, a > b);
`,Dae=`
  let zero = sign(a) * 0 + 0;
  let one = sign(b) * 0 + 1;
  let resultTemp = select(zero, one, a >= b);
`,Aae=`
  let zero = sign(a) * 0 + 0;
  let one = sign(b) * 0 + 1;
  let resultTemp = select(zero, one, a < b);
`,Fae=`
  let zero = sign(a) * 0 + 0;
  let one = sign(b) * 0 + 1;
  let resultTemp = select(zero, one, a <= b);
`,Pae="return f32(a >= 1.0 && b >= 1.0);",Oae=`return (vec4<f32>(a >= vec4<f32>(1.0)) *
  vec4<f32>(b >= vec4<f32>(1.0)));`,Mae="return f32(a >= 1.0 || b >= 1.0);",Lae=`return min(vec4<f32>(a >= vec4<f32>(1.0)) +
  vec4<f32>(b >= vec4<f32>(1.0)), vec4<f32>(1.0));`,Bae="let resultTemp = max(a, b);",zae="let resultTemp = min(a, b);",Vae=`
  let isNaN = b == 0.;
  var resultTemp = a % b;
  resultTemp = select((resultTemp + b) % b, resultTemp,
      (a < 0. && b < 0.) || (a >= 0. && b > 0.));
`,Wae=`
  let isNaN = !vec4<bool>(b);
  var resultTemp = vec4<f32>(a % b);
  if (!((a[0] < 0. && b[0] < 0.) || (a[0] >= 0. && b[0] > 0.))) {
    resultTemp[0] = (resultTemp[0] + b[0]) % b[0];
  }
  if (!((a[1] < 0. && b[1] < 0.) || (a[1] >= 0. && b[1] > 0.))) {
    resultTemp[1] = (resultTemp[1] + b[1]) % b[1];
  }
  if (!((a[2] < 0. && b[2] < 0.) || (a[2] >= 0. && b[2] > 0.))) {
    resultTemp[2] = (resultTemp[2] + b[2]) % b[2];
  }
  if (!((a[3] < 0. && b[3] < 0.) || (a[3] >= 0. && b[3] > 0.))) {
    resultTemp[3] = (resultTemp[3] + b[3]) % b[3];
  }
`,Uae="let resultTemp = a * b;",Gae=`
  var resultTemp = f32(a != b);
  let valueForNaN = 1.0;
`,Hae=`
  var resultTemp = vec4<f32>(a != b);
  let valueForNaN = 1.0;
`,Kae=`
  let isNaN = a < 0.0 && floor(b) < b;
  if (b == 0.0) {
    return 1.0;
  }
  var resultTemp = select(sign(a) * pow(abs(a), b), pow(abs(a), b),
      round(abs(b) % 2.0) != 1.0);
`,qae=`
  let isModRound1Bool = vec4<i32>(round(abs(b) % vec4<f32>(2.0))) == vec4<i32>(1);
  let isModRound1 = vec4<f32>(isModRound1Bool);
  let multiplier = sign(a) * isModRound1 + (vec4<f32>(1.0) - isModRound1);
  var resultTemp = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  let isExpZero = b == vec4<f32>(0.0);
  if (isExpZero.r) {
    resultTemp.r = 1.0;
  }
  if (isExpZero.g) {
    resultTemp.g = 1.0;
  }
  if (isExpZero.b) {
    resultTemp.b = 1.0;
  }
  if (isExpZero.a) {
    resultTemp.a = 1.0;
  }
  let isNaN = (a < vec4<f32>(0.0)) & (floor(b) < b);
`,jae="if (a < 0.0) { return b * a; }  return a;",Xae=`
  let aLessThanZero = vec4<f32>(a < vec4<f32>(0.0));
  return (aLessThanZero * (b * a)) + ((vec4<f32>(1.0) - aLessThanZero) * a);
`,Yae="let resultTemp = (a - b) * (a - b);",Qae="let resultTemp = a - b;",Z$1;function Xc(o,i){let s;do{switch(o){case fe$1.ATAN2:s=vae;break;case fe$1.MAX:s=Bae;break;case fe$1.MIN:s=zae;break;case fe$1.MOD:s=i?Wae:Vae;break;case fe$1.NOT_EQUAL:s=i?Hae:Gae;break;case fe$1.POW:s=i?qae:Kae;break;default:continue}let _,_e,ct;return i?(_="isnanVec4",_e="vec4<f32>",ct="vec4<bool>"):(_="isnan",_e="f32",ct="bool"),`
      let aIsNaN = ${_}(a);
      let aPostLegalization = select(a, ${_e}(42), aIsNaN);
      let bIsNaN = ${_}(b);
      let bPostLegalization = select(b, ${_e}(42), bIsNaN);
      let isNaN = false;
      let valueForNaN = uniforms.NAN;
      {
        let a = aPostLegalization;
        let b = bPostLegalization;
        ${s}
        return select(
            resultTemp, ${_e}(valueForNaN),
            ${ct}(isNaN) | aIsNaN | bIsNaN);
      }
    `}while(!1);switch(o){case fe$1.ADD:s=Iae;break;case fe$1.COMPLEX_MULTIPLY_IMAG:s=Nae;break;case fe$1.COMPLEX_MULTIPLY_REAL:s=kae;break;case fe$1.DIV:s=Tae;break;case fe$1.ELU_DER:s=_ae;break;case fe$1.EQUAL:s=Eae;break;case fe$1.FLOOR_DIV:s=$ae;break;case fe$1.GREATER:s=Rae;break;case fe$1.GREATER_EQUAL:s=Dae;break;case fe$1.LESS:s=Aae;break;case fe$1.LESS_EQUAL:s=Fae;break;case fe$1.LOGICAL_AND:return i?Oae:Pae;case fe$1.LOGICAL_OR:return i?Lae:Mae;case fe$1.MUL:s=Uae;break;case fe$1.PRELU:return i?Xae:jae;case fe$1.SQUARED_DIFFERENCE:s=Yae;break;case fe$1.SUB:s=Qae}return`
    ${s}
    return resultTemp;
  `}(function(o){o[o.ABS=0]="ABS",o[o.ACOS=1]="ACOS",o[o.ACOSH=2]="ACOSH",o[o.ASIN=3]="ASIN",o[o.ASINH=4]="ASINH",o[o.ATAN=5]="ATAN",o[o.ATANH=6]="ATANH",o[o.CEIL=7]="CEIL",o[o.COS=8]="COS",o[o.COSH=9]="COSH",o[o.ELU=10]="ELU",o[o.ERF=11]="ERF",o[o.EXP=12]="EXP",o[o.EXPM1=13]="EXPM1",o[o.FLOOR=14]="FLOOR",o[o.IS_FINITE=15]="IS_FINITE",o[o.IS_INF=16]="IS_INF",o[o.IS_NAN=17]="IS_NAN",o[o.LINEAR=18]="LINEAR",o[o.LOG=19]="LOG",o[o.LOG1P=20]="LOG1P",o[o.LOGICAL_NOT=21]="LOGICAL_NOT",o[o.NEG=22]="NEG",o[o.RELU=23]="RELU",o[o.RELU6=24]="RELU6",o[o.LEAKYRELU=25]="LEAKYRELU",o[o.RECIPROCAL=26]="RECIPROCAL",o[o.ROUND=27]="ROUND",o[o.RSQRT=28]="RSQRT",o[o.SELU=29]="SELU",o[o.SIGMOID=30]="SIGMOID",o[o.SIGN=31]="SIGN",o[o.SIN=32]="SIN",o[o.SINH=33]="SINH",o[o.SOFTPLUS=34]="SOFTPLUS",o[o.SQRT=35]="SQRT",o[o.SQUARE=36]="SQUARE",o[o.STEP=37]="STEP",o[o.TAN=38]="TAN",o[o.TANH=39]="TANH",o[o.TO_INT=40]="TO_INT"})(Z$1||(Z$1={}));var Zae="return abs(a);",Jae=`
  if (abs(a) > 1.) {
    return uniforms.NAN;
  }
  return acos(a);
`,eie=`
  if (a < 1.) {
    return uniforms.NAN;
  }
  return acosh(a);
`,tie=`
  if (abs(a) > 1.) {
    return uniforms.NAN;
  }
  return asin(a);
`,rie="return asinh(a);",oie=`
  if (isnan(a)) {
    return uniforms.NAN;
  }
  return atan(a);
`,nie=`
  if (abs(a) > 1.) {
    return uniforms.NAN;
  }
  if (a == 1.) {
    return uniforms.INFINITY;
  }
  if (a == -1.) {
    return -uniforms.INFINITY;
  }
  return atanh(a);
`,sie="return ceil(a);",aie="return cos(a);",iie=`
  let e2x = exp(-a);
  return (e2x + 1.0 / e2x) / 2.0;
`,uie="return exp(a) - 1.0;",pie="if (a >= 0.0) { return a; }  return (exp(a) - 1.0);",cie=`
  var resFloat = exp(a) - vec4<f32>(1.0);
  if (a.r >= 0.0) {
    resFloat.r = a.r;
  }
  if (a.g >= 0.0) {
    resFloat.g = a.g;
  }
  if (a.b >= 0.0) {
    resFloat.b = a.b;
  }
  if (a.a >= 0.0) {
    resFloat.a = a.a;
  }
  return resFloat;
`,lie=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  let p = ${w.ERF_P};
  let a1 = ${w.ERF_A1};
  let a2 = ${w.ERF_A2};
  let a3 = ${w.ERF_A3};
  let a4 = ${w.ERF_A4};
  let a5 = ${w.ERF_A5};

  let sign = sign(a);
  let absA = abs(a);
  let t = 1.0 / (1.0 + p * absA);
  return sign * (1.0 - (((((a5 * t + a4) * t) + a3) * t + a2) * t + a1) * t * exp(-absA * absA));
`,mie="return exp(a);",die="return floor(a);",fie="return f32(!isnan(a) && !isinf(a));",hie="return f32(isinf(a));",gie="return f32(isnan(a));",xie="return a;",yie=`if (a < 0.0) { return uniforms.NAN; }
  return log(a);`,bie=`
  if (isnan(a)) { return a; }
  return log(1.0 + a);
`,Cie="return f32(!(a >= 1.0));",wie="return -a;",Sie="if (a < 0.0) { return uniforms.alpha * a; } return a;",Iie=`
  let aLessThanZero = vec4<f32>(a < vec4<f32>(0.0));
  return (aLessThanZero * (uniforms.alpha * a)) + ((vec4<f32>(1.0) - aLessThanZero) * a);
`,vie="return 1.0 / a;",kie="return select(a, 0.0, a < 0.0);",Nie="return clamp(a, 0.0, 6.0);",Tie="return clamp(a, vec4<f32>(0.0, 0.0, 0.0, 0.0), vec4<f32>(6.0, 6.0, 6.0, 6.0));",_ie=`
  return select(a, vec4<f32>(0.0), a < vec4<f32>(0.0));
`,Eie="return round(a);",$ie="return inverseSqrt(a);",Rie=`
  if (a >= 0.0) {
    return ${w.SELU_SCALE} * a;
  } else {
    return ${w.SELU_SCALEALPHA} * (exp(a) - 1.0);
  }
`,Die="return 1.0 / (1.0 + exp(-1.0 * a));",Aie="return sign(a);",Fie="return sin(a);",Pie=`
  let e2x = exp(a);
  return (e2x - 1.0 / e2x) / 2.0;
`,Oie=`
  let epsilon = 1.1920928955078125e-7;
  let threshold = log(epsilon) + 2.0;

  let too_large = a > -threshold;
  let too_small = a < threshold;
  let exp_a = exp(a);

  if (too_large) {
    return a;
  } else if (too_small) {
    return exp_a;
  } else {
    return log(exp_a + 1.0);
  }
`,Mie="return sqrt(a);",Lie="return a * a;",Bie=`
  if (isnan(a)) {
    return a;
  }

  return select(uniforms.stepAlpha, 1.0, a > 0.0);
`,zie="return tan(a);",Vie=`
  let e2x = exp(-2.0 * abs(a));
  return sign(a) * (1.0 - e2x) / (1.0 + e2x);
`,Wie="return f32(i32((a)));";function Si(o,i){switch(o){case Z$1.ABS:return Zae;case Z$1.ACOS:return Jae;case Z$1.ACOSH:return eie;case Z$1.ASIN:return tie;case Z$1.ASINH:return rie;case Z$1.ATAN:return oie;case Z$1.ATANH:return nie;case Z$1.COS:return aie;case Z$1.COSH:return iie;case Z$1.CEIL:return sie;case Z$1.ELU:return i?cie:pie;case Z$1.ERF:return lie;case Z$1.EXP:return mie;case Z$1.EXPM1:return uie;case Z$1.FLOOR:return die;case Z$1.IS_FINITE:return fie;case Z$1.IS_INF:return hie;case Z$1.IS_NAN:return gie;case Z$1.LINEAR:return xie;case Z$1.LOG:return yie;case Z$1.LOG1P:return bie;case Z$1.LOGICAL_NOT:return Cie;case Z$1.NEG:return wie;case Z$1.LEAKYRELU:return i?Iie:Sie;case Z$1.RECIPROCAL:return vie;case Z$1.RELU:return i?_ie:kie;case Z$1.RELU6:return i?Tie:Nie;case Z$1.ROUND:return Eie;case Z$1.RSQRT:return $ie;case Z$1.SELU:return Rie;case Z$1.SIGMOID:return Die;case Z$1.SIGN:return Aie;case Z$1.SIN:return Fie;case Z$1.SINH:return Pie;case Z$1.SOFTPLUS:return Oie;case Z$1.SQRT:return Mie;case Z$1.SQUARE:return Lie;case Z$1.STEP:return Bie;case Z$1.TAN:return zie;case Z$1.TANH:return Vie;case Z$1.TO_INT:return Wie;default:throw new Error(`BinaryType ${o} is not implemented!`)}}function dr(o,i=!1,s=!1,_=3){if(o===null)return"";let _e="";if(o==="linear")_e=Si(Z$1.LINEAR);else if(o==="relu")_e=Si(Z$1.RELU,s);else if(o==="elu")_e=Si(Z$1.ELU,s);else if(o==="relu6")_e=Si(Z$1.RELU6,s);else if(o==="prelu")_e=Xc(fe$1.PRELU,s);else if(o==="sigmoid")_e=Si(Z$1.SIGMOID,s);else{if(o!=="leakyrelu")throw new Error(`Activation ${o} has not been implemented for the WebGPU backend.`);_e=Si(Z$1.LEAKYRELU,s)}let ct=Ae(s?4:1),Mt="";return Mt=i?`
      fn activation(a : ${ct}, coords : vec${_}<i32>) -> ${ct} {
        let b = getPreluActivationWeightsByOutputCoords(coords);
        ${_e}
      }`:`
      fn activation(a : ${ct}, coords : vec${_}<i32>) -> ${ct} {
        ${_e}
      }`,Mt}function Zr(o,i){return`
      ${o?"value = value + getBiasByOutputCoords(coords);":""}
      ${i?"value = activation(value, coords);":""}
      `}function Jv(o,i,s=!1,_=!1,_e=!1,ct=1){y.assert(o&&ct===1||!o,()=>`transposeA ${o} is not compatible with component size ${ct}`);let Mt=`
      ${o?"value = getA(batch, col, row);":"value = getA(batch, row, col);"}

    `,Ft=i?"value = getB(batch, col, row);":"value = getB(batch, row, col);";return`
  fn mm_readA(batch: i32, row: i32, col: i32) -> ${Ae(ct)} {
    var value = ${Ae(ct)}(0.0);
    ${s&&_e?Mt:`
    ${o?"if(row < uniforms.dimAOuter && col < uniforms.dimInner)":"if(row < uniforms.aShape[1] && col < uniforms.aShape[2])"}
    {
      ${Mt}
    }
    `}
    return value;
  }

  fn mm_readB(batch: i32, row: i32, col: i32) -> ${Ae(ct)} {
    var value = ${Ae(ct)}(0.0);
    ${Ft}
    return value;
  }
  `}function hm(o,i,s,_,_e=!1,ct=!1,Mt=!1,Ft=1){return`
  ${Jv(s,_,_e,ct,Mt,Ft)}
  fn mm_write(batch: i32, row: i32, col: i32, valueIn: ${Ae(Ft)}) {
    ${_e&&ct?"":"if (row < uniforms.dimAOuter && col < uniforms.dimBOuter)"}
    {
      var value = valueIn;
      let coords = vec3<i32>(batch, row, col);
      ${Zr(o,i)}
      setOutputAtCoords(coords[0], coords[1], coords[2], value);
    }
  }
  `}var Uie=(o,i)=>o?`
        mm_Asub[inputRow][inputCol] = mm_readA(batchA,
          kStart + inputRow,
          globalRowStart + inputCol * ${i});
        `:`
        mm_Asub[inputRow][inputCol] = mm_readA(batchA,
          globalRow + innerRow,
          kStart + inputCol * ${i});
        `,Gie=(o,i,s,_)=>{if(o)return`
      for (var k = 0; k < ${_}; k++) {
        let BCached0 = mm_Bsub[k][tileCol];
        let ACached0 = mm_Asub[k][localRow];
        for (var i = 0; i < ${s}; i++) {
          acc[i] = fma(BCached0, vec4<f32>(ACached0[i]), acc[i]);
        }
      }`;{let _e="",ct="";for(let Mt=0;Mt<i;Mt++)_e+=`let BCached${Mt} = mm_Bsub[k * ${i} + ${Mt}][tileCol];`,ct+=`acc[i] = fma(BCached${Mt}, vec4<f32>(ACached[${Mt}]), acc[i]);`;return`
      for (var k = 0; k < ${_/i}; k++) {
        ${_e}
        for (var i = 0; i < ${s}; i++) {
          let ACached = mm_Asub[tileRow + i][k];
          ${ct}
        }
      }`}};function _p(o,i,s=!1,_=32,_e=!1,ct=32,Mt=!1){let Ft=i[1]*o[1],Ut=i[0]*o[0],Xt=s?Ft:_,Kt=s?_:Ft,nr=Xt/i[0],rr=_/i[1],or=o[1],hr=o[0];return y.assert((s&&nr===4&&o[1]===4||!s&&(nr===3||nr===4))&&Xt%i[0]==0&&_%i[1]==0&&o[0]===4,()=>`If transposeA ${s} is true, innerElementSize ${nr} and workPerThread[1] ${o[1]} must be 4.
          Otherwise, innerElementSize ${nr} must be 3 or 4.
      tileAWidth ${Xt} must be divisible by workgroupSize[0]${i[0]}. tileInner ${_} must be divisible by workgroupSize[1] ${i[1]}. colPerThread ${o[0]} must be 4.`),`
  var<workgroup> mm_Asub : array<array<vec${nr}<f32>, ${Xt/nr}>, ${Kt}>;
  var<workgroup> mm_Bsub : array<array<vec4<f32>, ${Ut/o[0]}>, ${_}>;

  ${G$3()} {
    let localRow = i32(localId.y);
    let tileRow = localRow * ${or};
    let tileCol = i32(localId.x);

    let globalRow = i32(globalId.y) * ${or};
    let globalCol = i32(globalId.x) * ${hr};
    let batch = ${_e?"0":"i32(globalId.z)"};
    let batchA = ${_e||!Mt?"batch":"batch % uniforms.aShape[0]"};
    let batchB = ${_e||!Mt?"batch":"batch % uniforms.bShape[0]"};
    let globalRowStart = i32(workgroupId.y) * ${Ft};

    let numTiles = ${_e?`${Math.ceil(ct/_)}`:`(uniforms.dimInner - 1) / ${_} + 1`};
    var kStart = ${_e?`i32(globalId.z) * ${ct}`:"0"};

    var acc: array<vec4<f32>, ${or}>;

    // Loop over shared dimension.
    let tileRowB = localRow * ${rr};
    for (var t = 0; t < numTiles; t++) {
        // Load one tile of A into local memory.
        for (var innerRow = 0; innerRow < ${or}; innerRow++) {
            let inputRow = tileRow + innerRow;
            let inputCol = tileCol;
            ${Uie(s,nr)}
        }

        // Load one tile of B into local memory.
        for (var innerRow = 0; innerRow < ${rr}; innerRow++) {
            let inputRow = tileRowB + innerRow;
            let inputCol = tileCol;
            mm_Bsub[inputRow][inputCol] = mm_readB(batchB, kStart + inputRow, globalCol);
        }
        kStart = kStart + ${_};
        workgroupBarrier();

        // Compute acc values for a single thread.
        ${Gie(s,nr,or,_)}
        workgroupBarrier();
    }

    for (var innerRow = 0; innerRow < ${or}; innerRow++) {
        mm_write(batch, globalRow + innerRow, globalCol, acc[innerRow]);
    }
  }`}var az=o=>o?`
        mm_Asub[inputRow][inputCol] = mm_readA(batchA,
          kStart + inputRow,
          globalRowStart + inputCol);
        `:`
        mm_Asub[inputRow][inputCol] = mm_readA(batchA,
          globalRowStart + inputRow,
          kStart + inputCol);
        `,Hie=o=>o?"let ACached = mm_Asub[k][tileRow + innerRow];":"let ACached = mm_Asub[tileRow + innerRow][k];";function Ep(o,i,s=!1,_=32,_e=!1,ct=32,Mt=!1,Ft=!1){let Ut=o[1]*i[1],Xt=o[0]*i[0],Kt=s?Ut:_,nr=s?_:Ut;y.assert(nr%i[1]==0&&Kt%i[0]==0&&_%i[1]==0,()=>`tileAHight ${nr} must be divisible by workgroupSize[1]${i[1]}, tileAWidth ${Kt} must be divisible by workgroupSize[0]${i[0]}, tileInner ${_} must be divisible by workgroupSize[1]${i[1]}`);let rr=nr/i[1],or=Kt/i[0],hr=_/i[1],fr=o[1],yr=o[0],Lr=Mt?`
      let localRow = i32(localId.y);
      let localCol = i32(localId.x);
      let globalRowStart = i32(workgroupId.y) * ${Ut};
      let globalColStart = i32(workgroupId.x) * ${Xt};

      // Loop over shared dimension.
      for (var t = 0; t < numTiles; t++) {
        // Load one tile of A into local memory.
        for (var inputRow = localRow; inputRow < ${nr}; inputRow = inputRow + ${i[1]}) {
          for (var inputCol = localCol; inputCol < ${Kt}; inputCol = inputCol + ${i[0]}) {
            ${az(s)}
          }
        }
        // Load one tile of B into local memory.
        for (var inputRow = localRow; inputRow < ${_}; inputRow = inputRow + ${i[1]}) {
              for (var inputCol = localCol; inputCol < ${Xt}; inputCol = inputCol + ${i[0]}) {
            mm_Bsub[inputRow][inputCol] = mm_readB(batchB,
              kStart + inputRow,
              globalColStart + inputCol);
          }
        }
        kStart = kStart + ${_};
        workgroupBarrier();

        // Compute acc values for a single thread.
        var BCached : array<f32, ${yr}>;
        for (var k = 0; k < ${_}; k++) {
          for (var inner = 0; inner < ${yr}; inner++) {
            BCached[inner] = mm_Bsub[k][localCol + inner * ${i[0]}];
          }
          for (var innerRow = 0; innerRow < ${fr}; innerRow++) {
            let ACached = ${s?`mm_Asub[k][localRow + innerRow * ${i[1]}];`:`mm_Asub[localRow + innerRow * ${i[1]}][k];`}
            for (var innerCol = 0; innerCol < ${yr}; innerCol++) {
              acc[innerRow][innerCol] =
                  fma(ACached, BCached[innerCol], acc[innerRow][innerCol]);
            }
          }
        }
        workgroupBarrier();
      }
      for (var innerRow = 0; innerRow < ${fr}; innerRow++) {
        let gRow = globalRowStart + localRow + innerRow * ${i[1]};
        for (var innerCol = 0; innerCol < ${yr}; innerCol++) {
          let gCol = globalColStart + localCol + innerCol * ${i[0]};
          mm_write(batch, gRow, gCol, acc[innerRow][innerCol]);
        }
      }
      `:`
  let tileRow = i32(localId.y) * ${fr};
  let tileCol = i32(localId.x) * ${yr};

  let globalRow = i32(globalId.y) * ${fr};
  let globalCol = i32(globalId.x) * ${yr};
  let globalRowStart = i32(workgroupId.y) * ${Ut};

  let tileRowA = i32(localId.y) * ${rr};
  let tileColA = i32(localId.x) * ${or};
  let tileRowB = i32(localId.y) * ${hr};
  // Loop over shared dimension.
  for (var t = 0; t < numTiles; t++) {
    // Load one tile of A into local memory.
    for (var innerRow = 0; innerRow < ${rr}; innerRow++) {
      for (var innerCol = 0; innerCol < ${or}; innerCol++) {
        let inputRow = tileRowA + innerRow;
        let inputCol = tileColA + innerCol;
        ${az(s)}
      }
    }

    // Load one tile of B into local memory.
    for (var innerRow = 0; innerRow < ${hr}; innerRow++) {
      for (var innerCol = 0; innerCol < ${yr}; innerCol++) {
        let inputRow = tileRowB + innerRow;
        let inputCol = tileCol + innerCol;
        mm_Bsub[inputRow][inputCol] = mm_readB(batchB,
          kStart + inputRow,
          globalCol + innerCol);
      }
    }
    kStart = kStart + ${_};
    workgroupBarrier();

    // Compute acc values for a single thread.
    var BCached : array<f32, ${yr}>;
    for (var k = 0; k < ${_}; k++) {
      for (var inner = 0; inner < ${yr}; inner++) {
        BCached[inner] = mm_Bsub[k][tileCol + inner];
      }

      for (var innerRow = 0; innerRow < ${fr}; innerRow++) {
        ${Hie(s)}
        for (var innerCol = 0; innerCol < ${yr}; innerCol++) {
          acc[innerRow][innerCol] =
              fma(ACached, BCached[innerCol], acc[innerRow][innerCol]);
        }
      }
    }

    workgroupBarrier();
  }

  for (var innerRow = 0; innerRow < ${fr}; innerRow++) {
    for (var innerCol = 0; innerCol < ${yr}; innerCol++) {
      mm_write(batch, globalRow + innerRow, globalCol + innerCol,
          acc[innerRow][innerCol]);
    }
  }
  `;return`
    var<workgroup> mm_Asub : array<array<f32, ${Kt}>, ${nr}>;
    var<workgroup> mm_Bsub : array<array<f32, ${Xt}>, ${_}>;

    ${G$3()} {
      let batch = ${_e?"0":"i32(globalId.z)"};
      let batchA = ${_e||!Ft?"batch":"batch % uniforms.aShape[0]"};
      let batchB = ${_e||!Ft?"batch":"batch % uniforms.bShape[0]"};
      let numTiles = ${_e?`${Math.ceil(ct/_)}`:`(uniforms.dimInner - 1) / ${_} + 1`};
      var kStart = ${_e?`i32(globalId.z) * ${ct}`:"0"};

      var acc : array<array<f32, ${yr}>, ${fr}>;

      // Without this initialization strange values show up in acc.
      for (var innerRow = 0; innerRow < ${fr}; innerRow++) {
        for (var innerCol = 0; innerCol < ${yr}; innerCol++) {
          acc[innerRow][innerCol] = 0.0;
        }
      }
      ${Lr}
    }
  `}var Kie=o=>o?`
      mm_readA(batchA, colA, globalRow),
      mm_readA(batchA, colA + 1, globalRow),
      mm_readA(batchA, colA + 2, globalRow),
      mm_readA(batchA, colA + 3, globalRow)
  `:`
      mm_readA(batchA, globalRow, colA),
      mm_readA(batchA, globalRow, colA + 1),
      mm_readA(batchA, globalRow, colA + 2),
      mm_readA(batchA, globalRow, colA + 3)
  `;function qie(o,i=!1){y.assert(o[1]===1&&o[2]===1,()=>`A linear work group size is required. But got ${o}.`);let s=4*o[0];return`
    var<workgroup> mm_Asub : array<vec4<f32>, ${o[0]}>;

    ${G$3()} {
      let tileCol = i32(localId.x);
      let globalCol = i32(globalId.x);
      let globalRow = i32(globalId.y);

      let numTiles = (uniforms.dimInner - 1) / ${s} + 1;
      let batch = i32(globalId.z);
      let batchA = batch % uniforms.aShape[0];
      let batchB = batch % uniforms.bShape[0];
      // Without this initialization strange values show up in acc.
      var acc = 0.0;

      // Loop over shared dimension.
      for (var t = 0; t < numTiles; t++) {
        // Load one tile of A into local memory.
        let colA = t * ${s} + tileCol * 4;
        mm_Asub[tileCol] = vec4<f32>(${Kie(i)});
        workgroupBarrier();

        // Compute acc values for a single thread.
        for (var k = 0; k < ${s/4}; k++) {
          let rowB = t * ${s} + k * 4;
          let BCached = vec4<f32>(mm_readB(batchB, rowB, globalCol),
                              mm_readB(batchB, rowB + 1, globalCol),
                              mm_readB(batchB, rowB + 2, globalCol),
                              mm_readB(batchB, rowB + 3, globalCol));

          let ACached = mm_Asub[k];
          acc = acc + dot(ACached, BCached);
        }

        workgroupBarrier();
      }

      mm_write(batch, globalRow, globalCol, acc);
    }
  `}var Xg=class{constructor(o,i,s=!1,_=!1,_e=null,ct=null,Mt=null,Ft=!1){this.variableNames=["A","B"],this.uniforms="dimAOuter : i32, dimBOuter : i32, dimInner : i32,",this.outputShape=i,this.dispatchLayout={x:[2],y:[1],z:[0]};let Ut=s?o[1]:o[2];if(this.isVec4=(Ut%4==0&&!s||i[1]%4==0&&s)&&i[2]%4==0&&!_,this.outputComponent=this.isVec4?4:1,this.isVectorA=i[1]===1&&!s,!this.isVec4&&this.isVectorA)this.elementsPerThread=[1,1,1],this.workgroupSize=[32,1,1];else{let nr=Qv(i[1],Ut,i[2],s);this.workgroupSize=nr.workgroupSize,this.elementsPerThread=nr.elementsPerThread}this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize,this.elementsPerThread);let Xt=_e!=null,Kt=Mt!=null;Xt&&this.variableNames.push("bias"),Kt&&this.variableNames.push("preluActivationWeights"),this.sequentialAccessByThreads=Ft,this.transposeA=s,this.transposeB=_,this.addBias=Xt,this.activation=ct,this.hasPreluActivationWeights=Kt,[this.fitAOuter,this.fitBOuter,this.fitInner]=this.getShapeFit(i[1],i[2],Ut),this.shaderKey=`matMulPacked_${this.elementsPerThread}_${s}_${_}_${this.activation}_${this.fitAOuter}_${this.fitBOuter}_${this.fitInner}_${this.isVec4}_${this.isVectorA}_${this.sequentialAccessByThreads}`}getShapeFit(o,i,s){let _=this.workgroupSize[1]*this.elementsPerThread[1],_e=this.workgroupSize[0]*this.elementsPerThread[0];return!this.isVec4&&this.isVectorA?this.tileInner=4*this.workgroupSize[0]:this.tileInner=_e,[o%_==0,i%_e==0,s%this.tileInner==0]}getUserCode(){return`
      ${dr(this.activation,this.hasPreluActivationWeights,this.isVec4)}
      ${hm(this.addBias,this.activation,!1,this.transposeB,this.fitAOuter,this.fitBOuter,this.fitInner,this.isVec4?4:1)}
      ${this.isVec4?_p(this.elementsPerThread,this.workgroupSize,this.transposeA,this.tileInner,!1,null,!0):this.isVectorA?qie(this.workgroupSize,this.transposeA):Ep(this.elementsPerThread,this.workgroupSize,this.transposeA,this.tileInner,!1,null,this.sequentialAccessByThreads,!0)}
    `}};function jie(o){return`
    var<workgroup> sumValues : array<f32, ${o}>;
    ${G$3()} {
      let coords = getOutputCoords();
      let batch = coords[0];
      let batchA = batch % uniforms.aShape[0];
      let batchB = batch % uniforms.bShape[0];
      let row = coords[1];
      let col = coords[2];
      var sum = 0.0;
      let Length = uniforms.dimInner;
      for (var k = i32(localId.x); k < Length; k = k + ${o}) {
        let dataA = mm_readA(batchA, row, k);
        let dataB = mm_readB(batchB, k, col);
        sum = sum + dataA * dataB;
      }
      sumValues[localId.x] = sum;
      workgroupBarrier();

      for(var currentSize = ${o/2}u; currentSize > 1u;
          currentSize = currentSize / 2u) {
        if (localId.x < currentSize)
        {
          sumValues[localId.x] = sumValues[localId.x] + sumValues[localId.x + currentSize];
        }
        workgroupBarrier();
      }

      if (localId.x == 0u) {
        sum = sumValues[0] + sumValues[1];
        mm_write(batch, row, col, sum);
      }
    }
  `}var Yg=class{constructor(o,i=!1,s=!1,_=null,_e=null,ct=null){this.variableNames=["A","B"],this.uniforms="dimAOuter : i32, dimBOuter : i32, dimInner : i32,",this.workgroupSize=[256,1,1],this.outputShape=o,this.dispatchLayout={x:[],y:[1,2],z:[0]},this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize);let Mt=_!=null,Ft=ct!=null;Mt&&this.variableNames.push("bias"),Ft&&this.variableNames.push("preluActivationWeights"),this.transposeA=i,this.transposeB=s,this.addBias=Mt,this.activation=_e,this.hasPreluActivationWeights=Ft,this.shaderKey=`matMulReduce_${this.activation}_${i}_${s}`}getUserCode(){return`
      ${dr(this.activation,this.hasPreluActivationWeights)}
      ${hm(this.addBias,this.activation,this.transposeA,this.transposeB)}
      ${jie(this.workgroupSize[0])}
    `}};function Xie(o){let i=o[1],s=o[0],_=i>s?i:s;return`
  var<workgroup> mm_Asub : array<array<f32, ${_}>, ${i}>;
  var<workgroup> mm_Bsub : array<array<f32, ${s}>, ${_}>;

  // If the output size is small for matrix multiplication, avoid to use vec4
  // and handle some elements per thread to optimally utilize the ALU.
  // Read data from global memory to registers firstly, then store them into
  // shared memory, so it is instruction-Level parallelism for arithmetic
  // operations and others handle IO operations between barrier api, makes ALU
  // and load/store units work simultaneously, could improves the performance.
  ${G$3()} {
    let tileRow = i32(localId.y);
    let tileCol = i32(localId.x);
    let globalRow = i32(globalId.y);
    let globalCol = i32(globalId.x);
    let batch = i32(globalId.z);
    let batchA = batch % uniforms.aShape[0];
    let batchB = batch % uniforms.bShape[0];

    // uniforms.dimInner should be greater than 0.
    let numTiles = (uniforms.dimInner - 1) / ${_} + 1;
    var acc = 0.0;

    var globalColA = tileCol;
    var globalRowB = 0;
    var regA = mm_readA(batchA, globalRow, globalColA);
    var regB0 = mm_readB(batchB, globalRowB + 2 * tileRow, globalCol);
    var regB1 = mm_readB(batchB, globalRowB + 2 * tileRow + 1, globalCol);
    globalColA = globalColA + ${_};
    globalRowB = globalRowB + ${_};

    for (var t = 0; t < numTiles; t = t + 1) {
      mm_Asub[tileRow][tileCol] = regA;
      mm_Bsub[2 * tileRow][tileCol] = regB0;
      mm_Bsub[2 * tileRow + 1][tileCol] = regB1;

      workgroupBarrier();

      regA = mm_readA(batchA, globalRow, globalColA);
      regB0 = mm_readB(batchB, globalRowB + 2 * tileRow, globalCol);
      regB1 = mm_readB(batchB, globalRowB + 2 * tileRow + 1, globalCol);
      globalColA = globalColA + ${_};
      globalRowB = globalRowB + ${_};

      for (var k = 0; k < ${_}; k = k + 1) {
        acc = acc + mm_Asub[tileRow][k] * mm_Bsub[k][tileCol];
      }
      workgroupBarrier();
    }

    mm_write(batch, globalRow, globalCol, acc);
  }
  `}var Qg=class{constructor(o,i,s,_=!1,_e=!1,ct=null,Mt=null,Ft=null){this.variableNames=["A","B"],this.uniforms="dimAOuter : i32, dimBOuter : i32, dimInner : i32,",this.workgroupSize=[16,8,1],this.outputShape=s,this.dispatchLayout={x:[2],y:[1],z:[0]},this.dispatch=[Math.ceil(s[2]/this.workgroupSize[0]),Math.ceil(s[1]/this.workgroupSize[1]),s[0]];let Ut=ct!=null;Ut&&this.variableNames.push("bias");let Xt=Ft!=null;Xt&&this.variableNames.push("preluActivationWeights"),this.transposeA=_,this.transposeB=_e,this.addBias=Ut,this.activation=Mt,this.hasPreluActivationWeights=Xt,this.shaderKey=`matMulSmallOutputSize_${this.activation}_${_}_${_e}`}getUserCode(){return`
      ${dr(this.activation,this.hasPreluActivationWeights)}
      ${hm(this.addBias,this.activation,this.transposeA,this.transposeB)}
      ${Xie(this.workgroupSize)}
    `}},Zg=class{constructor(o,i,s=!1,_=!1){this.variableNames=["A","B"],this.uniforms="dimAOuter : i32, dimBOuter : i32, dimInner : i32,",this.workgroupSize=[8,8,1],this.atomic=!0,this.splitedDimInner=128,y.assert(o[0]===1,()=>"MatMulSplitKProgram only supports batch = 1."),this.outputShape=o,this.dispatchLayout={x:[2],y:[1],z:[0,3]};let _e=(s&&this.outputShape[1]%4==0||!s&&i%4==0)&&this.outputShape[2]%4==0;this.elementsPerThread=[4,4,this.splitedDimInner],this.outputComponent=_e?4:1,_e||(this.outputShape[1]<16&&(this.elementsPerThread[1]=1),this.outputShape[2]<16&&(this.elementsPerThread[0]=1)),this.dispatch=H$2(this.dispatchLayout,[this.outputShape[0],this.outputShape[1],this.outputShape[2],i],this.workgroupSize,this.elementsPerThread),this.transposeA=s,this.transposeB=_,this.shaderKey=`matMulSplitK_${s}_${_}_${this.elementsPerThread}_${this.outputComponent}`}getUserCode(){let o=this.outputComponent;return`
      ${Jv(!1,this.transposeB,!1,!1,!1,o)}
      fn mm_write(batch: i32, row : i32, col : i32, value : ${Ae(o)}) {
        if (row < uniforms.dimAOuter && col < uniforms.dimBOuter) {
          let coords = vec3<i32>(batch, row, col);
          let flatIndex = getOutputIndexFromCoords(coords);
          // The problem is that we should initialize output to zero before using.
          // Otherwise, the original value will be added to the result.
          for (var i = 0; i < ${o}; i = i + 1) {
            ${Qr("&result[flatIndex + i]",o>1?"value[i]":"value","float32")}
          }
        }
      }
      ${o===4?_p(this.elementsPerThread,this.workgroupSize,this.transposeA,32,!0,this.splitedDimInner):Ep(this.elementsPerThread,this.workgroupSize,this.transposeA,32,!0,this.splitedDimInner)}
    `}},Jg=class{constructor(o,i=null,s=null,_=null){this.uniforms="",this.variableNames=["x"],this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=o,this.dispatchLayout=X$3(this.outputShape),this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize),this.addBias=i!=null,this.hasPreluActivationWeights=_!=null,this.activation=s,this.addBias&&this.variableNames.push("bias"),this.hasPreluActivationWeights&&this.variableNames.push("preluActivationWeights"),this.shaderKey=`biasActivation_${s}`}getUserCode(){return`
    ${dr(this.activation,this.hasPreluActivationWeights)}
    ${G$3("index")} {
      if (index < uniforms.size) {
        let coords = getCoordsFromIndex(index);
        var value = getXByOutputIndex(index);
        ${Zr(this.addBias,this.activation)}
        setOutputAtIndex(index, value);
      }
    }
    `}},ex=class{constructor(o){this.variableNames=[],this.outputShape=[],this.uniforms="value : f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=o,this.dispatchLayout=X$3(this.outputShape),this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="fill"}getUserCode(){return`
    ${G$3("index")} {
      if (index < uniforms.size) {
        setOutputAtIndex(index, uniforms.value);
      }
    }
  `}};function vt$2(o){let{backend:i,attrs:s}=o,{shape:_,value:_e}=s,{dtype:ct}=s;if(ct=ct||y.inferDtype(_e),ct==="string"){let Mt=y.getArrayFromDType(ct,y.sizeFromShape(_));return Mt.fill(_e),i.makeTensorInfo(_,ct,Mt)}{let Mt=new ex(_),Ft=[{type:"float32",data:[_e]}];return i.runWebGPUProgram(Mt,[],ct,Ft)}}var iz={kernelName:sa,backendName:"webgpu",kernelFunc:vt$2};function pe$1(o){let{inputs:i,attrs:s}=o,{x:_}=i,{shape:_e}=s,ct=y.sizeFromShape(_.shape),Mt=y.inferFromImplicitShape(_e,ct),Ft=y.sizeFromShape(Mt);return y.assert(ct===Ft,()=>`The new shape (${Mt}) has ${Ft} elements and the old shape (${_.shape}) has ${ct} elements. The new shape and old shape must have the same number of elements.`),o.backend.incRef(_.dataId),{dataId:_.dataId,shape:Mt,dtype:_.dtype}}var uz={kernelName:da,backendName:"webgpu",kernelFunc:pe$1};function $p({a:o,b:i,transposeA:s,transposeB:_,backend:_e,bias:ct=null,preluActivationWeights:Mt=null,leakyreluAlpha:Ft=0,activation:Ut=null}){let Xt=o.shape.length,Kt=i.shape.length,nr=s?o.shape[Xt-2]:o.shape[Xt-1],rr=_?i.shape[Kt-1]:i.shape[Kt-2],or=s?o.shape[Xt-1]:o.shape[Xt-2],hr=_?i.shape[Kt-2]:i.shape[Kt-1],fr=o.shape.slice(0,-2),yr=i.shape.slice(0,-2),Lr=y.sizeFromShape(fr),Br=y.sizeFromShape(yr),Vr=Sr.assertAndGetBroadcastShape(o.shape.slice(0,-2),i.shape.slice(0,-2)).concat([or,hr]);y.assert(nr===rr,()=>`Error in matMul: inner shapes (${nr}) and (${rr}) of Tensors with shapes ${o.shape} and ${i.shape} and transposeA=${s} and transposeB=${_} must match.`);let Wr,ro,no=s?[Lr,nr,or]:[Lr,or,nr],so=_?[Br,hr,rr]:[Br,rr,hr],ko=pe$1({inputs:{x:o},backend:_e,attrs:{shape:no}}),To=pe$1({inputs:{x:i},backend:_e,attrs:{shape:so}}),oo=[ko,To],No=Math.max(Lr,Br),As=[ko,To],Ks=[{type:"int32",data:[or]},{type:"int32",data:[hr]},{type:"int32",data:[nr]}],vu=[No,or,hr],Fu=A().get("WEBGPU_MATMUL_PROGRAM_TYPE");if(Fu<0){let Pp=A().getNumber("WEBGPU_THRESHOLD_TO_INCREASE_WORKGROUPS_FOR_MATMUL"),Lo=Pp>0?Pp:_e.thresholdToIncreaseWorkgroups,Au=No*Math.ceil(or/32)*Math.ceil(hr/32);Fu=Au<=Lo||or<=8&&Au<=2*Lo?No*or*hr<=128?Mo.MatMulReduceProgram:No===1&&rr>=2e3?Mo.MatMulSplitKProgram:Mo.MatMulSmallOutputSizeProgram:Mo.MatMulPackedProgram}switch(Fu){case Mo.MatMulReduceProgram:Wr=new Yg(vu,s,_,ct,Ut,Mt);break;case Mo.MatMulSplitKProgram:if(ro=vt$2({backend:_e,attrs:{shape:vu,value:0,dtype:o.dtype}}),Wr=new Zg(vu,rr,s,_),ct||Ut){ro=_e.runWebGPUProgram(Wr,As,o.dtype,Ks,ro);let Lo=new Jg(ro.shape,ct,Ut,Mt),Au=null,Mp=[ro];ct&&Mp.push(ct),Mt&&Mp.push(Mt),Ut==="leakyrelu"&&(Au=[{type:"float32",data:[Ft]}],Lo.uniforms+=" alpha : f32,");let Lp=_e.runWebGPUProgram(Lo,Mp,ro.dtype,Au);oo.push(ro);let Op=pe$1({inputs:{x:Lp},backend:_e,attrs:{shape:Vr}});oo.push(Lp);for(let Fp of oo)_e.disposeData(Fp.dataId);return Op}break;case Mo.MatMulSmallOutputSizeProgram:Wr=new Qg(no,so,vu,s,_,ct,Ut,Mt);break;case Mo.MatMulPackedProgram:let Pp=_e.adapterInfo.isIntel();Wr=new Xg(no,vu,s,_,ct,Ut,Mt,Pp);break;default:throw new Error(`Unsupported MatMulProgramType ${Fu}.`)}ct&&As.push(ct),Mt&&As.push(Mt),Ut==="leakyrelu"&&(Ks.push({type:"float32",data:[Ft]}),Wr.uniforms+=" alpha : f32,"),ro=_e.runWebGPUProgram(Wr,As,o.dtype,Ks,ro);let Ap=pe$1({inputs:{x:ro},backend:_e,attrs:{shape:Vr}});oo.push(ro);for(let Pp of oo)_e.disposeData(Pp.dataId);return Ap}function Yie(o){let{inputs:i,backend:s,attrs:_}=o,{a:_e,b:ct,bias:Mt,preluActivationWeights:Ft}=i,{transposeA:Ut,transposeB:Xt,activation:Kt,leakyreluAlpha:nr}=_;return $p({a:_e,b:ct,transposeA:Ut,transposeB:Xt,backend:s,bias:Mt,preluActivationWeights:Ft,leakyreluAlpha:nr,activation:Kt})}var pz={kernelName:So,backendName:"webgpu",kernelFunc:Yie},gm=class{constructor(o,i,s){this.variableNames=["AReal","AImag","BReal","BImag"],this.workgroupSize=[128,1,1],this.size=!0,this.outputShape=w.assertAndGetBroadcastShape(i,s),this.dispatchLayout=X$3(this.outputShape),this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey=`binaryOpComplex_${o}`,this.op=o}getUserCode(){return`
      fn binaryOpComplex(
          areal : f32, aimag : f32, breal : f32, bimag : f32) -> f32 {
        ${Xc(this.op,!1)}
      }

      ${G$3("index")} {
        if(index < uniforms.size) {
          let areal = getARealByOutputIndex(index);
          let aimag = getAImagByOutputIndex(index);
          let breal = getBRealByOutputIndex(index);
          let bimag = getBImagByOutputIndex(index);
          setOutputAtIndex(index, binaryOpComplex(areal, aimag, breal, bimag));
        }
      }
    `}},Ii=class{constructor(o,i,s){if(this.size=!0,this.variableNames=["A","B"],this.outputShape=w.assertAndGetBroadcastShape(i,s),this.dispatchLayout=X$3(this.outputShape),this.op=o,this.useSharedMemoryWithA=i.length<=1&&s.length>1&&i[0]<128,this.useSharedMemoryWithB=s.length<=1&&i.length>1&&s[0]<128,this.useSharedMemoryWithA||this.useSharedMemoryWithB)this.outputComponent=1,this.variableComponents=[1,1],this.lastDimensionSize=this.useSharedMemoryWithB?s[0]:i[0],this.shaderKey=`binary_${o}_${this.lastDimensionSize}`,this.type="shared",this.workgroupSize=[256,1,1];else{let _=i.length>0&&i[i.length-1]%4==0,_e=s.length>0&&s[s.length-1]%4==0;_&&_e?(this.outputComponent=4,this.variableComponents=[4,4]):_&&(y.isScalarShape(s)||s[s.length-1]===1)||_e&&(y.isScalarShape(i)||i[i.length-1]===1)?(this.outputComponent=4,this.variableComponents=_?[4,1]:[1,4]):(this.outputComponent=1,this.variableComponents=[1,1]),this.type="nonshared",this.shaderKey=`binary_${o}_${this.variableComponents}`,this.workgroupSize=[128,1,1]}this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize,[this.outputComponent,1,1])}getUserCode(){let o,i=this.outputComponent===4?"vec4<f32>":"f32",s=`
    fn binaryOperation(a : ${i}, b : ${i}) -> ${i} {
      ${Xc(this.op,this.outputComponent===4)}
    };
    `;if(this.type==="shared"){let _=this.lastDimensionSize>1?`coords[${this.outputShape.length-1}]`:"0",_e=this.useSharedMemoryWithB?`let a = getAByOutputIndex(index);
          let b = sharedBuf[${_}];`:`let a = sharedBuf[${_}];
          let b = getBByOutputIndex(index);`;o=`
        ${s}
        var<workgroup> sharedBuf : array<f32, ${this.lastDimensionSize}>;
        ${G$3("index")} {
          // Fill in the shared memory buffer.
          let localIndex = i32(localId.x);
          if(localIndex < ${this.lastDimensionSize}) {
            sharedBuf[localIndex] = f32(${this.useSharedMemoryWithB?"B":"A"}[localIndex]);
          }
          workgroupBarrier();

          if(index < uniforms.size) {
            let coords = getCoordsFromIndex(index);
            ${_e}
            setOutputAtIndex(index, binaryOperation(a, b));
          }
        }
        `}else o=`
       ${s}
       ${G$3("index")} {
         if (index < uniforms.size) {
           let coords = getCoordsFromIndex(index * ${this.outputComponent});
           let a = ${i}(getAByOutputCoords(coords));
           let b = ${i}(getBByOutputCoords(coords));
           setOutputAtIndex(index, binaryOperation(a, b));
         }
       }
       `;return o}};function At$2(o){let{inputs:i}=o,{x:s}=i;return o.backend.incRef(s.dataId),{dataId:s.dataId,shape:s.shape,dtype:s.dtype}}var cz={kernelName:Co,backendName:"webgpu",kernelFunc:At$2};function xo(o){let{inputs:i,backend:s}=o,{real:_,imag:_e}=i,ct=s.makeTensorInfo(_.shape,"complex64"),Mt=s.tensorMap.get(ct.dataId),Ft=At$2({inputs:{x:_},backend:s}),Ut=At$2({inputs:{x:_e},backend:s});return Mt.complexTensorInfos={real:Ft,imag:Ut},ct}var lz={kernelName:Di,backendName:"webgpu",kernelFunc:xo},Jr=class{constructor(o,i,s=""){this.variableNames=["A"],this.size=!0,this.workgroupSize=[128,1,1],this.outputShape=o,this.dispatchLayout=X$3(this.outputShape),this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize),this.op=i,s!==""&&(this.uniforms=s),this.shaderKey=`unary_${i}`}getUserCode(){return`
      fn unaryOperation(a : f32) -> f32 {
        ${Si(this.op,!1)}
      }
      ${G$3("index")} {
        if (index < uniforms.size) {
          let a = getAByOutputIndex(index);
          setOutputAtIndex(index, unaryOperation(a));
        }
      }
      `}};function ye$1({opType:o,cpuKernelImpl:i,dtype:s}){return({inputs:_,backend:_e})=>{let{x:ct}=_,Mt=_e,Ft=s||ct.dtype;if(Mt.shouldExecuteOnCPU([ct])&&i!=null){let Xt=Mt.tensorMap.get(ct.dataId),Kt=i(Xt.values,Ft);return Mt.makeTensorInfo(ct.shape,Ft,Kt)}let Ut=new Jr(ct.shape,o);return Mt.runWebGPUProgram(Ut,[ct],Ft)}}function et({opType:o,cpuKernelImpl:i,supportsComplex:s=!1,dtype:_}){return({inputs:_e,backend:ct})=>{let{a:Mt,b:Ft}=_e,Ut=ct;if(s&&Mt.dtype==="complex64"){let nr,rr,or=Ut.tensorMap.get(Mt.dataId),hr=Ut.tensorMap.get(Ft.dataId);if(o!==fe$1.MUL)[nr,rr]=[[or.complexTensorInfos.real,hr.complexTensorInfos.real],[or.complexTensorInfos.imag,hr.complexTensorInfos.imag]].map(yr=>{let[Lr,Br]=yr,Vr={dataId:Lr.dataId,dtype:Lr.dtype,shape:Mt.shape},Wr={dataId:Br.dataId,dtype:Br.dtype,shape:Ft.shape},ro=new Ii(o,Mt.shape,Ft.shape);return Ut.runWebGPUProgram(ro,[Vr,Wr],dt(Lr.dtype,Br.dtype))});else{let yr=new gm(fe$1.COMPLEX_MULTIPLY_REAL,Mt.shape,Ft.shape),Lr=new gm(fe$1.COMPLEX_MULTIPLY_IMAG,Mt.shape,Ft.shape),Br=[{dataId:or.complexTensorInfos.real.dataId,dtype:or.complexTensorInfos.real.dtype,shape:Mt.shape},{dataId:or.complexTensorInfos.imag.dataId,dtype:or.complexTensorInfos.imag.dtype,shape:Mt.shape},{dataId:hr.complexTensorInfos.real.dataId,dtype:hr.complexTensorInfos.real.dtype,shape:Ft.shape},{dataId:hr.complexTensorInfos.imag.dataId,dtype:hr.complexTensorInfos.imag.dtype,shape:Ft.shape}];nr=Ut.runWebGPUProgram(yr,Br,"float32"),rr=Ut.runWebGPUProgram(Lr,Br,"float32")}let fr=xo({inputs:{real:nr,imag:rr},backend:Ut});return Ut.disposeData(nr.dataId),Ut.disposeData(rr.dataId),fr}let Xt=_||dt(Mt.dtype,Ft.dtype);if((Mt.dtype==="string"||Ft.dtype==="string"||Ut.shouldExecuteOnCPU([Mt,Ft]))&&i!=null){let nr=Ut.tensorMap.get(Mt.dataId).values,rr=Ut.tensorMap.get(Ft.dataId).values,or=Mt.dtype==="string"?w.fromUint8ToStringArray(nr):nr,hr=Mt.dtype==="string"?w.fromUint8ToStringArray(rr):rr,[fr,yr]=i(Mt.shape,Ft.shape,or,hr,Xt);return Ut.makeTensorInfo(yr,Xt,fr)}let Kt=new Ii(o,Mt.shape,Ft.shape);return Ut.runWebGPUProgram(Kt,[Mt,Ft],Xt)}}var{addImpl:mz,castImpl:dz,ceilImpl:fz,concatImpl:hz,equalImpl:gz,expImpl:xz,expm1Impl:yz,floorImpl:bz,floorDivImpl:Cz,gatherNdImpl:wz,gatherV2Impl:Sz,greaterEqualImpl:Iz,greaterImpl:vz,lessEqualImpl:kz,lessImpl:Nz,logImpl:Tz,maxImpl:_z,maximumImpl:Ez,minimumImpl:$z,multiplyImpl:Rz,negImpl:Dz,notEqualImpl:Az,prodImpl:Fz,rangeImpl:Pz,rsqrtImpl:Oz,scatterImpl:Mz,simpleAbsImpl:Lz,sliceImpl:Bz,stridedSliceImpl:zz,stringNGramsImpl:Vz,subImpl:Wz,tileImpl:Uz,topKImpl:Gz,transposeImpl:Hz,uniqueImpl:rOt}=Ic,Qie=ye$1({opType:Z$1.ABS,cpuKernelImpl:Lz}),Kz={kernelName:Xs,backendName:"webgpu",kernelFunc:Qie},Zie=ye$1({opType:Z$1.ACOS}),qz={kernelName:Vo,backendName:"webgpu",kernelFunc:Zie},Jie=ye$1({opType:Z$1.ACOSH}),jz={kernelName:Wo,backendName:"webgpu",kernelFunc:Jie},eue=et({opType:fe$1.ADD,cpuKernelImpl:mz,supportsComplex:!0}),Xz={kernelName:uo,backendName:"webgpu",kernelFunc:eue},tx=class{constructor(o){this.workPerThread=1,this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=o[0],this.variableNames=o.map((i,s)=>`T${s}`),this.dispatchLayout=X$3(this.outputShape),this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize,[this.workPerThread,1,1]),this.shaderKey="addN"}getUserCode(){let o=[];this.variableNames.forEach(s=>{o.push(`let v${s} = get${s}ByOutputCoords(coords);`)});let i=this.variableNames.map(s=>`v${s}`).join(" + ");return`
      ${G$3("index")} {
        for (var i = 0; i < ${this.workPerThread}; i = i + 1) {
          let flatIndex = index * ${this.workPerThread} + i;
          if (flatIndex < uniforms.size) {
            let coords = getCoordsFromIndex(flatIndex);
            ${o.join(`
        `)}
            setOutputAtIndex(flatIndex, ${i});
          }
        }
      }
    `}};function tue(o){let{inputs:i,backend:s}=o,_=i;if(_.length===1)return At$2({inputs:{x:_[0]},backend:s});let _e=_.map(Ft=>Ft.dtype).reduce((Ft,Ut)=>dt(Ft,Ut)),ct=_.map(Ft=>Ft.shape),Mt=new tx(ct);return s.runWebGPUProgram(Mt,_,_e)}var Yz={kernelName:Uo,backendName:"webgpu",kernelFunc:tue},rx=class{constructor(o,i){this.variableNames=["A"],this.workgroupSize=[16,16,1];let s=new Array(o.length);for(let _=0;_<s.length;_++)s[_]=o[i[_]];this.outputShape=s,this.dispatchLayout={x:[0],y:[1]},this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize,[1,1,1]),this.shaderKey="transposeShared"}getUserCode(){y.assert(this.workgroupSize[0]===this.workgroupSize[1],()=>`Must be a square tile, current tile shape is ${this.workgroupSize[0]} x ${this.workgroupSize[1]}`);let o=this.workgroupSize[0];return`
      var<workgroup> tile : array<array<f32, ${this.workgroupSize[0]+1}>, ${this.workgroupSize[0]}>;
      ${G$3()} {
        var x = i32(workgroupId.x) * ${o} + i32(localId.x);
        var y = i32(workgroupId.y) * ${o} + i32(localId.y);
        let width = uniforms.outShape[0];
        let height = uniforms.outShape[1];
        if (x < width && y < height) {
          tile[localId.y][localId.x] = f32(A[y * width + x]);
        }
        workgroupBarrier();

        x = i32(workgroupId.y) * ${o} + i32(localId.x);
        y = i32(workgroupId.x) * ${o} + i32(localId.y);
        if (x < height && y < width) {
          setOutputAtIndex((y * height + x), tile[localId.x]
            [localId.y]);
        }
      }
    `}},ox=class{constructor(o,i){this.variableNames=["A"],this.workPerThread=1,this.workgroupSize=[64,1,1],this.size=!0;let s=new Array(o.length);for(let _=0;_<s.length;_++)s[_]=o[i[_]];this.outputShape=s,this.dispatchLayout=X$3(this.outputShape),this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize,[this.workPerThread,1,1]),this.newDim=i,this.shaderKey=`transpose_${i}`}getUserCode(){let o=ft(this.outputShape.length),i=e0(this.newDim);return`
      ${G$3("index")} {
        for(var i = 0; i < ${this.workPerThread}; i = i + 1) {
          let flatIndex = index * ${this.workPerThread} + i;
          if(flatIndex < uniforms.size) {
            let coords = getCoordsFromIndex(flatIndex);
            setOutputAtIndex(flatIndex, A[getIndexFromCoords${this.outputShape.length}D(
              ${o}(${i}), uniforms.aShape)]);
          }
        }
      }
    `}};function e0(o){let i=o.length;if(i>6)throw Error(`Transpose for rank ${i} is not yet supported`);let s=new Array(i);for(let _=0;_<o.length;_++)s[o[_]]=`coords.${Oo(_)}`;return s.join()}function xr(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{perm:ct}=_,Mt=s,Ft=_e.shape.length,Ut=new Array(Ft);for(let Kt=0;Kt<Ut.length;Kt++)Ut[Kt]=_e.shape[ct[Kt]];if(s.shouldExecuteOnCPU([_e])){let Kt=Mt.tensorMap.get(_e.dataId).values,nr=Hz(Kt,_e.shape,_e.dtype,ct,Ut);return s.makeTensorInfo(Ut,_e.dtype,nr)}if(_e.shape.length===2&&y.arraysEqual(ct,[1,0])){let Kt=new rx(_e.shape,ct);return Mt.runWebGPUProgram(Kt,[_e],_e.dtype)}let Xt=new ox(_e.shape,ct);return Mt.runWebGPUProgram(Xt,[_e],_e.dtype)}var Qz={kernelName:co,backendName:"webgpu",kernelFunc:xr},nx=class{constructor(o,i,s){this.variableNames=["x"],this.uniforms="reduceSize : i32,",this.size=!0,this.inputShape=[o.batchSize,o.inSize];let[_]=w.computeOutAndReduceShapes(this.inputShape,[1]);this.outputShape=_.length===0?[1]:_,o.inSize>=32768&&s>=512?this.workgroupSize=[512,1,1]:o.inSize>=4096?this.workgroupSize=[256,1,1]:this.workgroupSize=[64,1,1],this.dispatchLayout=X$3(this.outputShape),this.dispatch=H$2(this.dispatchLayout,this.outputShape,[1,1,1]),this.reduceType=i,this.shaderKey=`reduce_${i}`}getUserCode(){let o="",i="0.0",s=this.workgroupSize[0];this.reduceType==="min"||this.reduceType==="max"?(o=`
         if (isnan(candidate)) {
          bestValue = uniforms.NAN;
         } else if (!isnan(bestValue) && candidate ${this.reduceType==="min"?"<":">"} bestValue)
           {  bestValue = candidate; }`,i="f32(x[offset])"):this.reduceType==="sum"||this.reduceType==="mean"?o=" bestValue = bestValue + candidate; ":this.reduceType==="prod"?(o=" bestValue = bestValue * candidate; ",i="1.0"):this.reduceType==="all"?(o=" bestValue = f32(bestValue >= 1.0 && candidate >= 1.0); ",i="1.0"):this.reduceType==="any"&&(o=" bestValue = f32(bestValue >= 1.0 || candidate >= 1.0); ",i="0.0");let _=this.reduceType==="mean"?"setOutputAtIndex(outputIndex, bestValue / f32(uniforms.reduceSize));":"setOutputAtIndex(outputIndex, bestValue);";return`
       fn DIV_CEIL(a : u32, b : u32) -> u32 {
        return ((a - 1u) / b + 1u);
       }

       
         var<workgroup> xBestValues : array<f32, ${s}>;
       
       fn getOffset(outputIndex : i32) -> i32 {
         let outputCoords = getCoordsFromIndex(outputIndex);
         let offset = ${this.outputShape.length===1?"outputCoords":"outputCoords[0]"} * uniforms.reduceSize;
          return offset;
       }
       ${G$3("index")} {
         let outputIndex = index / ${s};
         let offset = getOffset(outputIndex);
         var bestValue = ${i};
         let Length = uniforms.reduceSize;
         let WorkPerThread = DIV_CEIL(u32(Length), ${s}u);
         for (var k = i32(localId.x); k < Length && outputIndex < uniforms.size;
             k = k + ${s}) {
           let candidate = f32(x[offset + k]);
           ${o}
         }
         xBestValues[localId.x] = bestValue;
         workgroupBarrier();

         var reduceSize = min(u32(Length), ${s}u);
         for (var currentSize = reduceSize / 2u; reduceSize > 1u;
             currentSize = reduceSize / 2u) {
           let interval = DIV_CEIL(reduceSize, 2u);
           if (localId.x < currentSize) {
            let candidate = xBestValues[localId.x + interval];
            ${o}
            xBestValues[localId.x] = bestValue;
           }
           reduceSize = interval;
           workgroupBarrier();
         }

         if (localId.x == 0u && outputIndex < uniforms.size) {
          ${_}
        }
       }
     `}},rue={mean:"float32",all:"bool",any:"bool"};function eo(o,i,s,_,_e){let ct=o.shape.length,Mt=[],Ft=y.parseAxisParam(i,o.shape),Ut=Ft,Xt=w.getAxesPermutation(Ut,ct),Kt=o;Xt!=null&&(Kt=xr({inputs:{x:o},attrs:{perm:Xt},backend:_e}),Ut=w.getInnerMostAxes(Ut.length,ct),Mt.push(Kt)),w.assertAxesAreInnerMostDims(_,Ut,ct);let nr,[rr,or]=w.computeOutAndReduceShapes(Kt.shape,Ut),hr=rr;if(s&&(hr=w.expandShapeToKeepDim(rr,Ft)),_!=="max"&&_!=="prod"||!_e.shouldExecuteOnCPU([Kt])){let fr=y.sizeFromShape(or),yr={windowSize:fr,inSize:fr,batchSize:y.sizeFromShape(Kt.shape)/fr,outSize:1},Lr=rue[_]||oi(o.dtype),Br=[{type:"int32",data:[fr]}],Vr=new nx(yr,_,_e.device.limits.maxComputeWorkgroupSizeX),Wr=_e.runWebGPUProgram(Vr,[Kt],Lr,Br);Mt.push(Wr),nr=pe$1({inputs:{x:Wr},attrs:{shape:hr},backend:_e})}else{let fr=_e.tensorMap.get(Kt.dataId).values;switch(_){case"max":let yr=_z(fr,y.sizeFromShape(or),hr,o.dtype);nr=_e.makeTensorInfo(hr,o.dtype,yr);break;case"prod":let{outVals:Lr,outShape:Br,outDtype:Vr}=Fz(Kt.shape,Kt.dtype,fr,Ut);nr=_e.makeTensorInfo(Br,Vr,Lr);break;default:throw new Error(`${_} CPU implementation is not yet supported.`)}}return Mt.forEach(fr=>_e.disposeData(fr.dataId)),nr}function oue(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{keepDims:ct,axis:Mt}=_;return eo(_e,Mt,ct,"all",s)}var Zz={kernelName:Go,backendName:"webgpu",kernelFunc:oue};function nue(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{keepDims:ct,axis:Mt}=_;return eo(_e,Mt,ct,"any",s)}var Jz={kernelName:Ho,backendName:"webgpu",kernelFunc:nue},Yc=class{constructor(o,i,s){this.workgroupSize=[64,1,1],this.variableNames=["x"],this.uniforms="infinityValue : f32,",this.size=!0;let _=[i];this.op=s==="min"?"<":">";let[_e,ct]=w.computeOutAndReduceShapes(o,_);this.outputShape=_e.length===0?[1]:_e,this.dispatchLayout=X$3(this.outputShape),y.sizeFromShape(ct)<32?(this.type="plain",this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize)):(this.type="shared",this.dispatch=H$2(this.dispatchLayout,this.outputShape,[1,1,1])),this.inputShape=o,this.shaderKey=`argMinMax_${this.op}_${this.type}`}getUserCode(){let o=this.workgroupSize[0],i=()=>this.inputShape.length===1?"uniforms.xShape":`uniforms.xShape.${Oo(this.inputShape.length-1)}`,s=()=>{let _="";if(this.outputShape.length===1)this.inputShape.length!==1&&(_+="outputCoords,");else for(let _e=0;_e<this.outputShape.length;_e++)_+=`outputCoords.${Oo(_e)},`;return _};return this.type==="shared"?`
      fn DIV_CEIL(a : u32, b : u32) -> u32 {
        return ((a - 1u) / b + 1u);
      }

      
      var<workgroup> xBestIndices : array<i32, ${o}>;
      var<workgroup> xBestValues : array<f32, ${o}>;
    

      ${G$3("index")} {
        let outputIndex = index / ${o};
        let reduceLength = ${i()};

        var bestIndex = i32(localId.x);
        var bestValue = uniforms.infinityValue;
        let outputCoords = getCoordsFromIndex(outputIndex);
        for (var k = i32(localId.x); k < reduceLength && outputIndex < uniforms.size;
            k = k + ${o}) {
          let candidate = getX(${s()} k);
          if (!isnan(candidate) && candidate ${this.op} bestValue) {
            bestValue = candidate;
            bestIndex = k;
          }
        }
        xBestValues[localId.x] = bestValue;
        xBestIndices[localId.x] = bestIndex;
        workgroupBarrier();

        var reduceSize = min(u32(reduceLength), ${o}u);
        for (var currentSize = reduceSize / 2u; reduceSize > 1u;
            currentSize = reduceSize / 2u) {
          let interval = DIV_CEIL(reduceSize, 2u);
          if (localId.x < currentSize) {
            let candidate = xBestValues[localId.x + interval];
            if (candidate ${this.op} bestValue) {
              bestValue = candidate;
              xBestValues[localId.x] = bestValue;
              xBestIndices[localId.x] = xBestIndices[localId.x + interval];
            }
          }
          reduceSize = interval;
          workgroupBarrier();
        }

        if (localId.x == 0u && outputIndex < uniforms.size) {
          setOutputAtIndexI32(outputIndex, xBestIndices[localId.x]);
        }
      }
    `:`
      ${G$3("index")} {
        if (index < uniforms.size) {
          let outputCoords = getCoordsFromIndex(index);
          var bestIndex = 0;
          var bestValue = getX(${s()} 0);
          let reduceLength = ${i()};
          for (var i = 1; i < reduceLength; i++) {
            let candidate = getX(${s()} i);
            if (candidate ${this.op} bestValue) {
              bestValue = candidate;
              bestIndex = i;
            }
          }
          setOutputAtIndexI32(index, bestIndex);
        }
      }
      `}};function sue(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{axis:ct}=_,Mt=y.parseAxisParam(ct,_e.shape),Ft=w.getAxesPermutation(Mt,_e.shape.length),Ut=_e,Xt=[];Ft!=null&&(Ut=xr({inputs:{x:_e},backend:s,attrs:{perm:Ft}}),Xt.push(Ut),Mt=w.getInnerMostAxes(Mt.length,Ut.shape.length)),w.assertAxesAreInnerMostDims("argMax",[Mt[0]],Ut.shape.length);let Kt=new Yc(Ut.shape,Mt[0],"max"),nr=[{type:"float32",data:[Number.NEGATIVE_INFINITY]}],rr=s.runWebGPUProgram(Kt,[Ut],"int32",nr);return Xt.forEach(or=>s.disposeData(or.dataId)),rr}var eV={kernelName:Ys,backendName:"webgpu",kernelFunc:sue};function aue(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{axis:ct}=_,Mt=y.parseAxisParam(ct,_e.shape),Ft=w.getAxesPermutation(Mt,_e.shape.length),Ut=_e,Xt=[];Ft!=null&&(Ut=xr({inputs:{x:_e},backend:s,attrs:{perm:Ft}}),Xt.push(Ut),Mt=w.getInnerMostAxes(Mt.length,Ut.shape.length)),w.assertAxesAreInnerMostDims("argMin",[Mt[0]],Ut.shape.length);let Kt=new Yc(Ut.shape,Mt[0],"min"),nr=[{type:"float32",data:[Number.POSITIVE_INFINITY]}],rr=s.runWebGPUProgram(Kt,[Ut],"int32",nr);return Xt.forEach(or=>s.disposeData(or.dataId)),rr}var tV={kernelName:Qs,backendName:"webgpu",kernelFunc:aue},iue=ye$1({opType:Z$1.ASIN}),rV={kernelName:Ko,backendName:"webgpu",kernelFunc:iue},uue=ye$1({opType:Z$1.ASINH}),oV={kernelName:qo,backendName:"webgpu",kernelFunc:uue},pue=ye$1({opType:Z$1.ATAN}),nV={kernelName:jo,backendName:"webgpu",kernelFunc:pue},cue=et({opType:fe$1.ATAN2}),sV={kernelName:Yo,backendName:"webgpu",kernelFunc:cue},lue=ye$1({opType:Z$1.ATANH}),aV={kernelName:Xo,backendName:"webgpu",kernelFunc:lue},sx=class{constructor(o){this.variableNames=["x"],this.uniforms="strides : vec2<i32>,",this.workgroupSize=[256,1,1],this.size=!0,this.outputShape=o.outShape,this.dispatchLayout=X$3(this.outputShape),this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="poolWithFilterSizeEqualsOne"}getUserCode(){return`
      ${G$3("index")} {
        if (index < uniforms.size) {
          let coords = getCoordsFromIndex(index);
          let batch = coords[0];
          let d = coords[3];

          let xRCCorner = coords.yz * uniforms.strides;
          let xRCorner = xRCCorner.x;
          let xCCorner = xRCCorner.y;

          let value = getX(batch, xRCorner, xCCorner, d);
          setOutputAtIndex(index, value);
        }
      }
    `}},Ba=class{constructor(o,i,s=!1,_=!1,_e=!1){if(this.variableNames=["x"],this.uniforms="strides : vec2<i32>, pads : vec2<i32>, dilations : vec2<i32>, convDims : vec2<i32>, filterDims : vec2<i32>,",this.workgroupSize=[128,1,1],this.size=!0,i==="avg"&&s)throw new Error("Cannot compute positions for average pool.");this.outputShape=o.outShape,this.dispatchLayout=X$3(this.outputShape),this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize),this.poolType=i,this.computePositions=s,this.flattenPositions=_,this.includeBatchIndex=_e,this.shaderKey=`pool2D_${i}_${s}_${_}_${_e}`}getUserCode(){let o;o=this.poolType==="avg"?"resultValue = resultValue + value; count = count + 1.0;":this.computePositions?`let currMaxValue = mix(value, maxValue, maxValueFound);
      if (value >= currMaxValue) {
        maxValue = value;
        maxValueFound = 1.0;
        maxPosition = ${this.flattenPositions?this.includeBatchIndex?"((batch * uniforms.xShape[1] + xR) * uniforms.xShape[2] + xC) * uniforms.xShape[3] + d":"(xR * uniforms.xShape[2] + xC) * uniforms.xShape[3] + d":"wR * uniforms.filterDims.y + wC"};
      }`:"resultValue = max(value, resultValue);";let i="resultValue";return this.poolType==="avg"&&(i="resultValue / max(count, 1.0)"),`
      ${G$3("index")} {
      if (index < uniforms.size) {
        let coords = getCoordsFromIndex(index);
          let batch = coords[0];
          let d = coords[3];
          let xRCCorner = vec2<i32>(coords.yz) * uniforms.strides - uniforms.pads;
          let xRCorner = xRCCorner.x;
          let xCCorner = xRCCorner.y;

          ${this.computePositions?`var maxValue = 0.0;
            var maxValueFound = 0.0;
            var maxPosition = 0;`:`var resultValue = ${this.poolType==="avg"?"0.0":"-1.0 / pow(10.0, -20.0)"};`}

          var count = 0.0;
          for (var wR = 0; wR < uniforms.filterDims.x; wR = wR + uniforms.dilations.x) {
            let xR = xRCorner + wR;

            if (xR < 0 || xR >= uniforms.convDims.x) {
              continue;
            }

            for (var wC = 0; wC < uniforms.filterDims.y; wC = wC + uniforms.dilations.y) {
              let xC = xCCorner + wC;
              if (xC < 0 || xC >= uniforms.convDims.y) {
                continue;
              }

              let value = getX(batch, xR, xC, d);
              ${o}
            }
          }

          ${this.computePositions?"setOutputAtIndexI32(index, maxPosition);":`setOutputAtIndex(index, ${i});`}
        }
      }
    `}},Iu=class{constructor(o,i,s=!1,_=!1,_e=!1){if(this.variableNames=["x"],this.uniforms="strides : vec3<i32>, pads : vec3<i32>, convDims : vec3<i32>, filterDims : vec3<i32>,",this.workgroupSize=[128,1,1],this.size=!0,i==="avg"&&s)throw new Error("Cannot compute positions for average pool.");this.outputShape=o.outShape,this.dispatchLayout=X$3(this.outputShape),this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize),this.poolType=i,this.computePositions=s,this.flattenPositions=_,this.includeBatchIndex=_e,this.shaderKey=`pool3D_${i}_${s}_${_}_${_e}`}getUserCode(){let o;o=this.poolType==="avg"?"resultValue += value; count += 1.0;":this.computePositions?`let currMaxValue = mix(value, maxValue, maxValueFound);
      if (value >= currMaxValue) {
        maxValue = value;
        maxValueFound = 1.0;
        maxPosition = ${this.flattenPositions?this.includeBatchIndex?"(((batch * uniforms.xShape.y + xD) * uniforms.xShape.z + xR) * uniforms.xShape.w + xC) * uniforms.xShape.u + ch":"((xD * uniforms.xShape.z + xR) * uniforms.xShape.w + xC) * uniforms.xShape.u + ch":"wD * uniforms.filterDims.y * uniforms.filterDims.y + wR * uniforms.filterDims.z + wC"};
      }`:"resultValue = max(value, resultValue);";let i="resultValue";return this.poolType==="avg"&&(i="resultValue / max(count, 1.0)"),`
      ${G$3("index")} {
        if (index < uniforms.size) {
          let coords = getCoordsFromIndex(index);
          let batch = coords.x;
          let ch = coords.u;

          let xCorner = vec3<i32>(coords.y, coords.z, coords.w) * uniforms.strides - uniforms.pads;
          let xDCorner = xCorner.x;
          let xRCorner = xCorner.y;
          let xCCorner = xCorner.z;

          ${this.computePositions?`var maxValue = 0.0;
            var maxValueFound = 0.0;
            var maxPosition = 0;`:`var resultValue = ${this.poolType==="avg"?"0.0":"-1.0 / pow(10.0, -20.0)"};`}

          var count = 0.0;
          for (var wD = 0; wD < uniforms.filterDims.x; wD++) {
            let xD = xDCorner + wD;
            if (xD < 0 || xD >= uniforms.convDims.x) {
              continue;
            }

            for (var wR = 0; wR < uniforms.filterDims.y; wR++) {
              let xR = xRCorner + wR;
              if (xR < 0 || xR >= uniforms.convDims.y) {
                continue;
              }

              for (var wC = 0; wC < uniforms.filterDims.z; wC++) {
                let xC = xCCorner + wC;
                if (xC < 0 || xC >= uniforms.convDims.z) {
                  continue;
                }

                let value = getX(batch, xD, xR, xC, ch);
                ${o}
              }
            }
          }

          ${this.computePositions?"setOutputAtIndexI32(index, maxPosition);":`setOutputAtIndex(index, ${i});`}
        }
      }
    `}};function t0(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{reductionIndices:ct,keepDims:Mt}=_;return eo(_e,ct,Mt,"max",s)}var iV={kernelName:zn,backendName:"webgpu",kernelFunc:t0};function r0(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{keepDims:ct,axis:Mt}=_;return eo(_e,Mt,ct,"mean",s)}var uV={kernelName:Un,backendName:"webgpu",kernelFunc:r0};function ax(o,i,s,_){if(i.filterWidth===1&&i.filterHeight===1&&y.arraysEqual(i.inShape,i.outShape))return At$2({inputs:{x:o},backend:_});if(i.filterWidth===i.inWidth&&i.filterHeight===i.inHeight&&i.batchSize===1&&i.padInfo.type==="VALID"){let Mt,Ft=o.shape.length,Ut=pe$1({inputs:{x:o},backend:_,attrs:{shape:[o.shape[Ft-3]*o.shape[Ft-2],o.shape[Ft-1]]}});s==="avg"?Mt=r0({inputs:{x:Ut},backend:_,attrs:{axis:0,keepDims:!1}}):(y.assert(s==="max",()=>`Invalid pool type ${s}`),Mt=t0({inputs:{x:Ut},backend:_,attrs:{reductionIndices:0,keepDims:!1}}));let Xt=pe$1({inputs:{x:Mt},backend:_,attrs:{shape:i.outShape}});return _.disposeData(Ut.dataId),_.disposeData(Mt.dataId),Xt}let _e,ct=[{type:"int32",data:[i.strideHeight,i.strideWidth]}];return i.filterHeight===1&&i.filterWidth===1?_e=new sx(i):(s==="avg"?_e=new Ba(i,"avg"):(y.assert(s==="max",()=>`Invalid pool type ${s}`),_e=new Ba(i,"max")),ct.push({type:"int32",data:[i.padInfo.top,i.padInfo.left]},{type:"int32",data:[i.dilationHeight,i.dilationWidth]},{type:"int32",data:[i.inHeight,i.inWidth]},{type:"int32",data:[i.effectiveFilterHeight,i.effectiveFilterWidth]})),_.runWebGPUProgram(_e,[o],o.dtype,ct)}function mue(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{filterSize:ct,strides:Mt,pad:Ft,dimRoundingMode:Ut}=_;return ax(_e,w.computePool2DInfo(_e.shape,ct,Mt,1,Ft,Ut),"avg",s)}var pV={kernelName:Qo,backendName:"webgpu",kernelFunc:mue};function due(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{filterSize:ct,strides:Mt,pad:Ft,dataFormat:Ut,dimRoundingMode:Xt}=_,Kt=w.computePool3DInfo(_e.shape,ct,Mt,[1,1,1],Ft,Xt,Ut),nr=new Iu(Kt,"avg"),rr=[{type:"int32",data:[Kt.strideDepth,Kt.strideHeight,Kt.strideWidth]},{type:"int32",data:[Kt.padInfo.front,Kt.padInfo.top,Kt.padInfo.left]},{type:"int32",data:[Kt.inDepth,Kt.inHeight,Kt.inWidth]},{type:"int32",data:[Kt.effectiveFilterDepth,Kt.effectiveFilterHeight,Kt.effectiveFilterWidth]}];return s.runWebGPUProgram(nr,[_e],_e.dtype,rr)}var cV={kernelName:Zs,backendName:"webgpu",kernelFunc:due},ix=class{constructor(o){this.variableNames=["dy"],this.uniforms=`strides : vec2<i32>, pads : vec2<i32>, dilations : vec2<i32>, filterDims : vec2<i32>,
       outHeight : i32, outWidth : i32, avgMultiplier : f32,`,this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=o.inShape,this.dispatchLayout=X$3(this.outputShape),this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="avgPool2DBackprop"}getUserCode(){return`
      ${G$3("index")} {
      if (index < uniforms.size) {
        let coords = getCoordsFromIndex(index);
        let batch = coords[0];
        let d = coords[3];

        let dyRCCorner = vec2<i32>(coords.yz) - uniforms.pads;
        let dyRCorner = dyRCCorner.x;
        let dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        var dotProd = 0.0;
        for (var wR = 0; wR < uniforms.filterDims[0]; wR = wR + uniforms.dilations[0]) {
          let dyR = f32(dyRCorner + wR) / f32(uniforms.strides[0]);

          if (dyR < 0.0 || dyR >= f32(uniforms.outHeight) || fract(dyR) > 0.0) {
            continue;
          }
          let idyR = i32(dyR);

          for (var wC = 0; wC < uniforms.filterDims[1]; wC = wC + uniforms.dilations[1]) {
            let dyC = f32(dyCCorner + wC) / f32(uniforms.strides[1]);

            if (dyC < 0.0 || dyC >= f32(uniforms.outWidth) || fract(dyC) > 0.0) {
              continue;
            }
            let idyC = i32(dyC);

            let dyValue = getDy(batch, idyR, idyC, d);

            dotProd = dotProd + dyValue * uniforms.avgMultiplier;
          }
        }
        setOutputAtIndex(index, dotProd);
      }
    }
    `}},ux=class{constructor(o){this.variableNames=["dy"],this.uniforms=`strides : vec3<i32>, pads : vec3<i32>, filterDims : vec3<i32>,
       outDepth : i32, outHeight : i32, outWidth : i32, avgMultiplier : f32,`,this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=o.inShape,this.dispatchLayout=X$3(this.outputShape),this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="avgPool3DBackprop"}getUserCode(){return`
      ${G$3("index")} {
      if (index < uniforms.size) {
        let coords = getCoordsFromIndex(index);
        let batch = coords.x;
        let ch = coords.u;

        let dyCorner = vec3<i32>(coords.y, coords.z, coords.w) - uniforms.pads;
        let dyDCorner = dyCorner.x;
        let dyRCorner = dyCorner.y;
        let dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        var dotProd = 0.0;
        for (var wD = 0; wD < uniforms.filterDims[0]; wD++) {
          let dyD = f32(dyDCorner + wD) / f32(uniforms.strides[0]);

          if (dyD < 0.0 || dyD >= f32(uniforms.outDepth) || fract(dyD) > 0.0) {
            continue;
          }
          let idyD = i32(dyD);

          for (var wR = 0; wR < uniforms.filterDims[1]; wR++) {
            let dyR = f32(dyRCorner + wR) / f32(uniforms.strides[1]);

            if (dyR < 0.0 || dyR >= f32(uniforms.outHeight) || fract(dyR) > 0.0) {
              continue;
            }
            let idyR = i32(dyR);

            for (var wC = 0; wC < uniforms.filterDims[2]; wC++) {
              let dyC = f32(dyCCorner + wC) / f32(uniforms.strides[2]);

              if (dyC < 0.0 || dyC >= f32(uniforms.outWidth) || fract(dyC) > 0.0) {
                continue;
              }
              let idyC = i32(dyC);

              let dyValue = getDy(batch, idyD, idyR, idyC, ch);
              dotProd += dyValue * uniforms.avgMultiplier;
            }
          }
        }
        setOutputAtIndex(index, dotProd);
      }
    }
    `}};function fue(o){let{inputs:i,backend:s,attrs:_}=o,{dy:_e,input:ct}=i,Mt=ct,{filterSize:Ft,strides:Ut,pad:Xt,dimRoundingMode:Kt}=_,nr=w.computePool3DInfo(Mt.shape,Ft,Ut,1,Xt,Kt),rr=new ux(nr),or=1/(nr.filterDepth*nr.filterHeight*nr.filterWidth),hr=[{type:"int32",data:[nr.strideDepth,nr.strideHeight,nr.strideWidth]},{type:"int32",data:[nr.effectiveFilterDepth-1-nr.padInfo.front,nr.effectiveFilterHeight-1-nr.padInfo.top,nr.effectiveFilterWidth-1-nr.padInfo.left]},{type:"int32",data:[nr.effectiveFilterDepth,nr.effectiveFilterHeight,nr.effectiveFilterWidth]},{type:"int32",data:[nr.outDepth]},{type:"int32",data:[nr.outHeight]},{type:"int32",data:[nr.outWidth]},{type:"float32",data:[or]}];return s.runWebGPUProgram(rr,[_e],Mt.dtype,hr)}var lV={kernelName:Ri,backendName:"webgpu",kernelFunc:fue};function hue(o){let{inputs:i,backend:s,attrs:_}=o,{dy:_e,input:ct}=i,Mt=ct;fm([_e,ct],"avgPoolGrad");let{filterSize:Ft,strides:Ut,pad:Xt}=_,Kt=w.computePool2DInfo(Mt.shape,Ft,Ut,1,Xt),nr=new ix(Kt),rr=1/(Kt.filterHeight*Kt.filterWidth),or=[{type:"int32",data:[Kt.strideHeight,Kt.strideWidth]},{type:"int32",data:[Kt.effectiveFilterHeight-1-Kt.padInfo.top,Kt.effectiveFilterWidth-1-Kt.padInfo.left]},{type:"int32",data:[Kt.dilationHeight,Kt.dilationWidth]},{type:"int32",data:[Kt.effectiveFilterHeight,Kt.effectiveFilterWidth]},{type:"int32",data:[Kt.outHeight]},{type:"int32",data:[Kt.outWidth]},{type:"float32",data:[rr]}];return s.runWebGPUProgram(nr,[_e],Mt.dtype,or)}var mV={kernelName:$i,backendName:"webgpu",kernelFunc:hue};function gue(o){let{inputs:i,backend:s,attrs:_}=o,{a:_e,b:ct}=i,{transposeA:Mt,transposeB:Ft}=_;return $p({a:_e,b:ct,transposeA:Mt,transposeB:Ft,backend:s})}var dV={kernelName:Zo,backendName:"webgpu",kernelFunc:gue},px$1=class{constructor(i,s){this.variableNames=["source"],this.workPerThread=1,this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=s,this.rank=s.length,this.dispatchLayout=X$3(this.outputShape),this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize,[this.workPerThread,1,1]),this.start=i,this.uniforms=`start : ${ft(i.length)}, `,this.shaderKey="slice"}getUserCode(){let i,s=ft(this.rank),_=xue(this.rank);return i=this.start.length===1?this.outputShape.map((_e,ct)=>"sourceLoc = uniforms.start + coords;"):this.outputShape.map((_e,ct)=>`sourceLoc.${o0[ct]} = uniforms.start.${Oo(ct)} + coords.${o0[ct]};`),`
      ${G$3("index")} {
        if (index < uniforms.size) {
          var sourceLoc : ${s};
          let coords = getCoordsFromIndex(index);
          ${i.join(`
`)}
          setOutputAtIndex(index, getSource(${_}));
        }
      }
    `}},o0=["x","y","z","w","u","v"];function xue(o){if(o===1)return"sourceLoc";if(o<=6)return o0.slice(0,o).map(i=>`sourceLoc.${i}`).join(",");throw Error(`Slicing for rank ${o} is not yet supported`)}function Hs(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{begin:ct,size:Mt}=_,[Ft,Ut]=pt.parseSliceParams(_e,ct,Mt);if(pt.assertParamsValid(_e,Ft,Ut),s.shouldExecuteOnCPU([_e])||_e.dtype==="string"){let nr=s.tensorMap.get(_e.dataId),rr=Bz(nr.values,Ft,Ut,_e.shape,_e.dtype);return s.makeTensorInfo(Ut,_e.dtype,rr)}if(y.sizeFromShape(Ut)===0)return s.makeTensorInfo(Ut,_e.dtype,[]);let Xt=new px$1(Ft,Ut),Kt=[{type:"int32",data:Ft}];return s.runWebGPUProgram(Xt,[_e],_e.dtype,Kt)}var fV={kernelName:ha,backendName:"webgpu",kernelFunc:Hs},yue=o=>{let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{blockShape:ct,crops:Mt}=_;y.assert(_e.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGPU backend not implemented yet");let Ft=ct.reduce((Br,Vr)=>Br*Vr),Ut=w.getReshaped(_e.shape,ct,Ft),Xt=w.getPermuted(Ut.length,ct.length),Kt=w.getReshapedPermuted(_e.shape,ct,Ft),nr=w.getSliceBeginCoords(Mt,ct.length),rr=w.getSliceSize(Kt,Mt,ct.length),or=[],hr=pe$1({inputs:{x:_e},backend:s,attrs:{shape:Ut}}),fr=xr({inputs:{x:hr},backend:s,attrs:{perm:Xt}}),yr=pe$1({inputs:{x:fr},backend:s,attrs:{shape:Kt}}),Lr=Hs({inputs:{x:yr},backend:s,attrs:{begin:nr,size:rr}});return or.push(hr),or.push(fr),or.push(yr),or.forEach(Br=>s.disposeData(Br.dataId)),Lr},hV={kernelName:Js,backendName:"webgpu",kernelFunc:yue},bue=`
  fn bincount_write(index: i32, value: f32) {
    ${Qr("&result[index]","value","float32")}
  }
`,Cue=`
  fn bincount_write(index: i32, value: f32) {
    atomicStore(&result[index], bitcast<i32>(value));
  }
`,Qc=class{constructor(o,i,s=!1){this.outputShape=[],this.variableNames=["x"],this.uniforms="binCountSize : i32,",this.workgroupSize=[64,1,1],this.atomic=!0,this.hasWeights=!0,this.binaryOutput=!1,this.outputShape=o,this.rank=o.length,this.dispatchLayout=X$3(this.outputShape),this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize),this.binaryOutput=s,s&&(this.atomic=!1),this.hasWeights=i,this.hasWeights&&this.variableNames.push("w"),this.shaderKey=`bincount_${this.hasWeights}_${this.binaryOutput}_${this.rank}`}getUserCode(){return`
    ${this.binaryOutput?Cue:bue}
  ${G$3("index")} {
    ${this.rank===1?`if (index < uniforms.xShape) {
      let indexVal = i32(getX(index));
      if (indexVal < uniforms.binCountSize) {
        let value = ${this.binaryOutput?1:this.hasWeights?"getW(index)":"1."};
        bincount_write(indexVal, value);
      }
    }`:`let coord = getCoordsFromIndex(index);
    if (coordsInBounds2D(coord, uniforms.xShape)) {
      let indexVal = i32(getX(coord[0], coord[1]));
      if (indexVal < uniforms.binCountSize) {
        let value = ${this.binaryOutput?1:this.hasWeights?"getW(coord[0], coord[1])":"1."};
        bincount_write(coord.x * uniforms.binCountSize + indexVal, value);
      }
    }`}
  }
  `}};function wue(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e,weights:ct}=i,{size:Mt}=_,Ft=y.sizeFromShape(_e.shape),Ut=y.sizeFromShape(ct.shape)>0,Xt=[Mt],Kt=ct.dtype,nr=vt$2({backend:s,attrs:{shape:Xt,value:0,dtype:Kt}}),rr=new Qc([Ft],Ut),or=[{type:"int32",data:[Mt]}],hr=Ut?[_e,ct]:[_e];return s.runWebGPUProgram(rr,hr,Kt,or,nr)}var gV={kernelName:Jo,backendName:"webgpu",kernelFunc:wue},cx=class{constructor(o){this.outputShape=[],this.variableNames=["s0","s1"],this.uniforms="s0Size : i32, s1Size : i32, ",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=[o],this.dispatchLayout=X$3(this.outputShape),this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="broadcastArgs"}getUserCode(){return`
  ${G$3("index")} {
    if (index < uniforms.size) {
      var s0 = 1.0;
      var s1 = 1.0;
      let indexS0 = index - uniforms.size + uniforms.s0Size;
      let indexS1 = index - uniforms.size + uniforms.s1Size;
      if (indexS0 >= 0) {
        s0 = getS0(indexS0);
      }
      if (indexS1 >= 0) {
        s1 = getS1(indexS1);
      }

      if (s0 == 1.0) {
        setOutputAtIndex(index, s1);
      } else if (s1 == 1.0) {
        setOutputAtIndex(index, s0);
      } else if (s0 != s1) {
        setOutputAtIndex(index, uniforms.NAN);
      } else {
        setOutputAtIndex(index, s0);
      }
    }
  }
  `}};function Sue(o){let{inputs:i,backend:s}=o,{s0:_,s1:_e}=i;if(s.shouldExecuteOnCPU([_,_e])){let Kt=s.tensorMap.get(_.dataId),nr=s.tensorMap.get(_e.dataId),rr=Kt.values,or=nr.values,hr=w.assertAndGetBroadcastShape(Array.from(rr),Array.from(or));return s.makeTensorInfo([hr.length],"int32",Int32Array.from(hr))}let ct=y.sizeFromShape(_.shape),Mt=y.sizeFromShape(_e.shape),Ft=Math.max(ct,Mt),Ut=new cx(Ft),Xt=[{type:"int32",data:[ct]},{type:"int32",data:[Mt]}];return s.runWebGPUProgram(Ut,[_,_e],"int32",Xt)}var xV={kernelName:ea,backendName:"webgpu",kernelFunc:Sue},n0=et({opType:fe$1.NOT_EQUAL,dtype:"bool",cpuKernelImpl:Az}),yV={kernelName:Yn,backendName:"webgpu",kernelFunc:n0};function vi(o){let{inputs:i,backend:s}=o,{input:_}=i;return At$2({inputs:{x:s.tensorMap.get(_.dataId).complexTensorInfos.real},backend:s})}var bV={kernelName:Hi,backendName:"webgpu",kernelFunc:vi};function CV(o,i){let s=new Jr(o.shape,Z$1.TO_INT),_=i.runWebGPUProgram(s,[o],"int32");return{dataId:_.dataId,shape:_.shape,dtype:_.dtype}}function s0(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{dtype:ct}=_;if(ct==="complex64"){if(_e.dtype==="complex64")return At$2({inputs:{x:_e},backend:s});let Mt=Gr(_e.shape),Ft=s0({inputs:{x:_e},backend:s,attrs:{dtype:"float32"}}),Ut=xo({inputs:{real:Ft,imag:Mt},backend:s});return Mt.dispose(),s.disposeData(Ft.dataId),Ut}if(_e.dtype==="complex64"){let Mt=vi({inputs:{input:_e},backend:s}),Ft=s0({inputs:{x:Mt},backend:s,attrs:{dtype:ct}});return s.disposeData(Mt.dataId),Ft}if(!y.hasEncodingLoss(_e.dtype,ct)){let Mt=At$2({inputs:{x:_e},backend:s});return{dataId:Mt.dataId,shape:Mt.shape,dtype:ct}}if(s.shouldExecuteOnCPU([_e])){let Mt=s.tensorMap.get(_e.dataId).values,[Ft,Ut,Xt]=dz(Mt,_e.shape,_e.dtype,ct);return s.makeTensorInfo(Ft,Ut,Xt)}if(ct==="int32")return CV(_e,s);if(ct==="bool"){let Mt=s.makeTensorInfo([],"bool",y.getTypedArrayFromDType("bool",1)),Ft=n0({inputs:{a:_e,b:Mt},backend:s});return s.disposeData(Mt.dataId),Ft}throw new Error(`Error in Cast: failed to cast ${_e.dtype} to ${ct}`)}var wV={kernelName:yo,backendName:"webgpu",kernelFunc:s0},Iue=ye$1({opType:Z$1.CEIL,cpuKernelImpl:fz}),SV={kernelName:en,backendName:"webgpu",kernelFunc:Iue},lx=class{constructor(o){this.variableNames=["A"],this.uniforms="minVal : f32, maxVal : f32,",this.workPerThread=4,this.workgroupSize=[64,1,1],this.outputComponent=4,this.size=!0,this.outputShape=o,this.dispatchLayout=X$3(this.outputShape),this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize,[this.workPerThread,1,1]),this.shaderKey="clipVec4"}getUserCode(){return`
      ${G$3("index")} {
        if(index < uniforms.size) {
          let value = getAByOutputIndex(index);
          var clampedValue = clamp(
              value, vec4<f32>(uniforms.minVal), vec4<f32>(uniforms.maxVal));
          clampedValue = select(clampedValue, value, isnanVec4(value));
          setOutputAtIndex(index, clampedValue);
        }
      }
    `}},mx=class{constructor(o){this.variableNames=["A"],this.uniforms="minVal : f32, maxVal : f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=o,this.dispatchLayout=X$3(this.outputShape),this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="clip"}getUserCode(){return`
      ${G$3("index")} {
        if(index < uniforms.size) {
          let value = getAByOutputIndex(index);
          if (isnan(value)) {
            setOutputAtIndex(index, value);
            return;
          }
          setOutputAtIndex(index, clamp(value, uniforms.minVal, uniforms.maxVal));
        }
      }
    `}};function vue(o){let i,{inputs:s,backend:_,attrs:_e}=o,{x:ct}=s,{clipValueMin:Mt,clipValueMax:Ft}=_e,Ut=[{type:"float32",data:[Mt]},{type:"float32",data:[Ft]}];return i=y.sizeFromShape(ct.shape)%4==0?new lx(ct.shape):new mx(ct.shape),_.runWebGPUProgram(i,[ct],ct.dtype,Ut)}var IV={kernelName:bo,backendName:"webgpu",kernelFunc:vue},dx=class{constructor(o){this.outputShape=[],this.variableNames=["real","imag"],this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=o,this.dispatchLayout=X$3(this.outputShape),this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="complexAbs"}getUserCode(){return`
    ${G$3("index")} {
      if (index < uniforms.size) {
        let re = abs(getRealByOutputIndex(index));
        let im = abs(getImagByOutputIndex(index));
        let mx = max(re, im);

        // The length function in wgsl may be not underflow-safe on some GPUs.
        // So the safe solution is to ensure underflow-safety in all cases.
        setOutputAtIndex(index, select(mx * length(vec2<f32>(1, min(re, im)/mx)), 0.0, mx == 0.0));
      }
    }
  `}};function vV(o,i){return{dataId:i.dataId,dtype:i.dtype,shape:o.shape}}function kue(o){let{inputs:i,backend:s}=o,{x:_}=i,_e=s.tensorMap.get(_.dataId),ct=new dx(_.shape),Mt=[vV(_,_e.complexTensorInfos.real),vV(_,_e.complexTensorInfos.imag)];return s.runWebGPUProgram(ct,Mt,Mt[0].dtype)}var kV={kernelName:Ai,backendName:"webgpu",kernelFunc:kue},fx=class{constructor(o){this.uniforms="",this.workPerThread=1,this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=w.computeOutShape(o,1),this.variableNames=o.map((i,s)=>`T${s}`),this.dispatchLayout=X$3(this.outputShape),this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize,[this.workPerThread,1,1]),this.offsetLength=o.length-1;for(let i=0;i<this.offsetLength;i++)this.uniforms+=`offset${i} : i32,`;this.shaderKey="concat"}getUserCode(){let o=[];if(this.offsetLength>0){o.push("if (yC < uniforms.offset0){ setOutputAtCoords(coords.x, coords.y, getT0(yR, yC)); }");for(let _=1;_<this.offsetLength;_++)o.push(`else if (yC < uniforms.offset${[_]}){ setOutputAtCoords(coords.x, coords.y, getT${_}(yR, yC - uniforms.offset${_-1})); }`);let i=this.offsetLength,s=this.offsetLength-1;o.push(`else { setOutputAtCoords(coords.x, coords.y, getT${i}(yR, yC - uniforms.offset${s})); }`)}else o.push("setOutputAtCoords(coords.x, coords.y, getT0(yR, yC));");return`
      ${G$3("index")} {
        for(var i = 0; i < ${this.workPerThread}; i = i + 1) {
          let flatIndex = index * ${this.workPerThread} + i;
          if(flatIndex < uniforms.size) {
            let coords = getCoordsFromIndex(flatIndex);
            let yR = coords.x;
            let yC = coords.y;

            ${o.join(`
        `)}
          }
        }
      }
    `}};function Rp(o){let{inputs:i,backend:s}=o,{input:_}=i;return At$2({inputs:{x:s.tensorMap.get(_.dataId).complexTensorInfos.imag},backend:s})}var NV={kernelName:Wi,backendName:"webgpu",kernelFunc:Rp};function Zc(o,i,s){let _=o[0].dtype;if(_==="complex64"){let hr=o.map(Vr=>vi({inputs:{input:Vr},backend:s})),fr=o.map(Vr=>Rp({inputs:{input:Vr},backend:s})),yr=Zc(hr,i,s),Lr=Zc(fr,i,s),Br=xo({inputs:{real:yr,imag:Lr},backend:s});return hr.forEach(Vr=>s.disposeData(Vr.dataId)),fr.forEach(Vr=>s.disposeData(Vr.dataId)),s.disposeData(yr.dataId),s.disposeData(Lr.dataId),Br}let _e=s.shouldExecuteOnCPU(o);if(_==="string"&&(_e=!0),_e){let hr=o.map(ro=>{let no=[-1,y.sizeFromShape(ro.shape.slice(i))];return pe$1({inputs:{x:ro},backend:s,attrs:{shape:no}})}),fr=hr.map(ro=>({vals:s.readSync(ro.dataId),shape:ro.shape})),yr=w.computeOutShape(hr.map(ro=>ro.shape),1),Lr=hr[0].shape[0]===1,Br=hz(fr,yr,_,Lr),Vr=w.computeOutShape(o.map(ro=>ro.shape),i),Wr=s.makeTensorInfo(Vr,_,Br);return hr.forEach(ro=>s.disposeData(ro.dataId)),Wr}let ct=s.device.limits.maxStorageBuffersPerShaderStage-1;if(o.length>ct){let hr=[];for(let yr=0;yr<o.length;yr+=ct){let Lr=o.slice(yr,yr+ct);hr.push(Zc(Lr,i,s))}let fr=Zc(hr,i,s);for(let yr of hr)s.disposeData(yr.dataId);return fr}let{tensors2D:Mt,outShape:Ft}=Nue(o,i,s),Ut=Mt.map(hr=>hr.shape),Xt=new fx(Ut),Kt=[],nr=new Array(Ut.length-1);if(nr.length>0){nr[0]=Ut[0][1],Kt.push({type:"int32",data:[nr[0]]});for(let hr=1;hr<nr.length;hr++)nr[hr]=nr[hr-1]+Ut[hr][1],Kt.push({type:"int32",data:[nr[hr]]})}let rr=s.runWebGPUProgram(Xt,Mt,Mt[0].dtype,Kt);Mt.forEach(hr=>s.disposeData(hr.dataId));let or=pe$1({inputs:{x:rr},backend:s,attrs:{shape:Ft}});return s.disposeData(rr.dataId),or}function Nue(o,i,s){let _=w.computeOutShape(o.map(_e=>_e.shape),i);return{tensors2D:o.map(_e=>pe$1({inputs:{x:_e},backend:s,attrs:{shape:[y.sizeFromShape(_e.shape.slice(0,i)),y.sizeFromShape(_e.shape.slice(i))]}})),outShape:_}}function a0(o){let{inputs:i,backend:s,attrs:_}=o,{axis:_e}=_,ct=y.parseAxisParam(_e,i[0].shape)[0],Mt=i.map(Xt=>Xt.shape);w.assertParamsConsistent(Mt,ct);let Ft=w.computeOutShape(i.map(Xt=>Xt.shape),ct);if(y.sizeFromShape(Ft)===0)return s.makeTensorInfo(Ft,i[0].dtype,[]);let Ut=i.filter(Xt=>y.sizeFromShape(Xt.shape)>0);return Ut.length===1?At$2({inputs:{x:Ut[0]},backend:s}):Zc(Ut,ct,s)}var TV={kernelName:ta,backendName:"webgpu",kernelFunc:a0};function Tue(o,i,s,_,_e=!1,ct=null,Mt=!1,Ft=4,Ut=4,Xt=4){let Kt=o?`
      let coord = vec4<i32>(batch, xRow, xCol, xCh);
      `:`
      let coord = vec4<i32>(batch, xCh, xRow, xCol);
      `,nr=o?`
      let coords = vec4<i32>(
        batch,
        row / outWidth,
        row % outWidth,
        col);
      `:`
      let coords = vec4<i32>(
        batch,
        row,
        col / outWidth,
        col % outWidth);
      `,rr=o?"uniforms.xShape[1]":"uniforms.xShape[2]",or=o?"uniforms.xShape[2]":"uniforms.xShape[3]",hr=o?"row":"col",fr=o?"col":"row",yr=`
      let inChannels = uniforms.wShape[2];
      let outWidth = ${o?"uniforms.outShape[2]":"uniforms.outShape[3]"};
      let outRow = ${hr} / outWidth;
      let outCol = ${hr} % outWidth;

      let WRow = ${fr} / (uniforms.filterDims[1] * inChannels);
      let WCol = ${fr} / inChannels % uniforms.filterDims[1];
      let xRow = outRow * uniforms.strides[0] + uniforms.dilations[0] * WRow - uniforms.pads[0];
      let xCol = outCol * uniforms.strides[1] + uniforms.dilations[1] * WCol - uniforms.pads[1];
      let xCh = ${fr} % inChannels;
      var resData = ${Ae(Ft)}(0.0);
      // The bounds checking is always needed since we use it to pad zero for
      // the 'same' padding type.
      if (xRow >= 0 && xRow < ${rr} && xCol >= 0 && xCol < ${or}) {
        ${Kt}
        let xIndex = getIndexFromCoords4D(coord, uniforms.xShape);
        ${(no=>{switch(no){case 1:return"resData = f32(x[xIndex]);";case 3:return"resData = vec3<f32>(x[xIndex], x[xIndex + 1], x[xIndex + 2]);";case 4:return"resData = vec4<f32>(x[xIndex / 4]);";default:throw new Error(`innerElementSize ${no} is not supported.`)}})(Ft)}
      }
      return resData;`,Lr=o?i&&_?`
      ${yr}`:`
      if (row < uniforms.dimAOuter && col < uniforms.dimInner) {
        ${yr}
      }
      return ${Ae(Ft)}(0.0);`:_&&s?`
      ${yr}`:`
      if (row < uniforms.dimInner && col < uniforms.dimBOuter) {
        ${yr}
      }
      return ${Ae(Ft)}(0.0);`,Br=`${(no=>{switch(no){case 1:return"return f32(W[row * uniforms.wShape[3] + col]);";case 4:return"return vec4<f32>(W[(row * uniforms.wShape[3] + col) / 4]);";default:throw new Error(`innerElementSize ${no} is not supported.`)}})(Ut)}`,Vr=Ae(Xt),Wr=Ae(o?Ft:Ut),ro=Ae(o?Ut:Ft);return`
      ${dr(ct,Mt,Xt===4,4)}
      fn mm_readA(batch: i32, row : i32, col : i32) -> ${Wr} {
        ${o?Lr:Br}
      }

      fn mm_readB(batch: i32, row : i32, col : i32) -> ${ro} {
        ${o?Br:Lr}
      }

      fn mm_write(batch: i32, row : i32, col : i32, valueIn : ${Vr}) {
        if (row < uniforms.dimAOuter && col < uniforms.dimBOuter)
        {
        var value = valueIn;
        let outWidth = ${o?"uniforms.outShape[2]":"uniforms.outShape[3]"};
        ${nr}
        ${Zr(_e,ct)}
        setOutputAtCoords(coords[0], coords[1], coords[2], coords[3], value);
        }
      }`}var hx=class{constructor(o,i,s,_,_e=!1,ct=null,Mt=!1,Ft=!1){this.variableNames=["x","W"],this.uniforms="filterDims : vec2<i32>, pads : vec2<i32>, strides : vec2<i32>, dilations : vec2<i32>, dimAOuter : i32, dimBOuter : i32, dimInner : i32,",this.outputShape=o.outShape,this.isChannelsLast=o.dataFormat==="channelsLast",this.isVec4=((o.inChannels%4==0||o.inChannels%3==0)&&this.isChannelsLast||o.outWidth%4==0&&!this.isChannelsLast)&&o.outChannels%4==0,this.dispatchLayout=this.isChannelsLast?{x:[3],y:[1,2],z:[0]}:{x:[2,3],y:[1],z:[0]},this.workgroupSize=lm(this.dispatchLayout,this.outputShape,this.isVec4),this.elementsPerThread=mm(this.dispatchLayout,this.outputShape,this.isVec4),this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize,this.elementsPerThread),this.isVec4?(this.outputComponent=4,this.isChannelsLast&&o.inChannels%4!=0?(this.innerElementSize=3,this.variableComponents=[1,4]):(this.innerElementSize=4,this.variableComponents=[4,4]),_e&&(this.variableNames.push("bias"),this.variableComponents.push(4)),Mt&&(this.variableNames.push("preluActivationWeights"),this.variableComponents.push(4))):(this.innerElementSize=this.elementsPerThread[0],_e&&this.variableNames.push("bias"),Mt&&this.variableNames.push("preluActivationWeights")),this.sequentialAccessByThreads=Ft,this.addBias=_e,this.activation=ct,this.hasPreluActivationWeights=Mt,this.tileAOuter=this.workgroupSize[1]*this.elementsPerThread[1],this.tileBOuter=this.workgroupSize[0]*this.elementsPerThread[0],this.tileInner=Math.max(this.workgroupSize[0]*this.innerElementSize,this.workgroupSize[1]),this.fitAOuter=i%this.tileAOuter==0,this.fitBOuter=s%this.tileBOuter==0,this.fitInner=_%this.tileInner==0,this.shaderKey=`conv2DMM_${this.elementsPerThread}_${this.activation}}_${this.fitAOuter}_${this.fitBOuter}_${this.fitInner}_${this.isVec4}_${this.innerElementSize}_${this.isChannelsLast}_${this.sequentialAccessByThreads}`}getUserCode(){let o=this.isVec4?_p(this.elementsPerThread,this.workgroupSize,!this.isChannelsLast,this.tileInner):Ep(this.elementsPerThread,this.workgroupSize,!this.isChannelsLast,this.tileInner,!1,null,this.sequentialAccessByThreads),i=this.isVec4?[this.innerElementSize,4,4]:[1,1,1];return`
    ${Tue(this.isChannelsLast,this.fitAOuter,this.fitBOuter,this.fitInner,this.addBias,this.activation,this.hasPreluActivationWeights,i[0],i[1],i[2])}
    ${o}
  `}},gx=class{constructor(o,i=!1,s=null,_=!1){this.variableNames=["x","W"],this.uniforms="filterDims: vec2<i32>, pads: vec2<i32>, strides: vec2<i32>, dilations: vec2<i32>,",this.workgroupSize=[4,4,8],this.outputShape=o.outShape,this.isChannelsLast=o.dataFormat==="channelsLast",this.dispatchLayout=this.isChannelsLast?{x:[2],y:[1],z:[0,3]}:{x:[3],y:[2],z:[0,1]},this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize),this.addBias=i,this.activation=s,this.hasPreluActivationWeights=_,i&&this.variableNames.push("bias"),_&&this.variableNames.push("preluActivationWeights"),this.shaderKey=`conv2dnaive_${this.activation}_${this.isChannelsLast}`}getUserCode(){return`
       ${dr(this.activation,this.hasPreluActivationWeights,!1,4)}
       fn readInp(batch : i32, row : i32, col : i32, chan : i32) -> f32{
         let coords = vec4<i32>(batch, row, col, chan);
         if (coordsInBounds4D(coords, uniforms.xShape)) {
           return  getX(batch, row, col, chan);
         } else {
          return 0.0;
         }
       }
       fn readFilt(row : i32, col : i32, xChannel : i32, outChannel : i32) -> f32{
         let coords = vec4<i32>(row, col, xChannel, outChannel);
         if(coordsInBounds4D(coords, uniforms.wShape)) {
           return getW(row, col, xChannel, outChannel);
          } else {
            return 0.0;
          }
       }
       fn writeResult(batch : i32, row : i32, col : i32, chan : i32, valueIn : f32) {
         let coords = ${this.isChannelsLast?"vec4<i32>(batch, row, col, chan);":"vec4<i32>(batch, chan, row, col);"}
         if (coordsInBounds4D(coords, uniforms.outShape)) {
           var value = valueIn;
           ${Zr(this.addBias,this.activation)}
           setOutputAtCoords(coords.x, coords.y, coords.z, coords.w, value);
         }
       }
       ${G$3("index")} {
         let coords = getOutputCoords();
         let batch = coords[0];
         let outChannel = ${this.isChannelsLast?"coords[3];":"coords[1];"}
         let outRow = ${this.isChannelsLast?"coords[1];":"coords[2];"}
         let outCol = ${this.isChannelsLast?"coords[2];":"coords[3];"}
         var acc : f32 = 0.0;
         for (var row = 0; row < uniforms.filterDims[0]; row = row + 1) {
           for (var col = 0; col < uniforms.filterDims[1]; col = col + 1) {
             let xRow = outRow * uniforms.strides[0] + uniforms.dilations[0] * row - uniforms.pads[0];
             let xCol = outCol * uniforms.strides[1] + uniforms.dilations[1] * col - uniforms.pads[1];
             for (var xChannel = 0; xChannel < ${this.isChannelsLast?"uniforms.xShape[3];":"uniforms.xShape[1];"} xChannel = xChannel + 1) {
               ${this.isChannelsLast?"let v = readInp(batch, xRow, xCol, xChannel);":"let v = readInp(batch, xChannel, xRow, xCol);"}
               let f = readFilt(row, col, xChannel, outChannel);
               acc = acc + v * f;
             }
           }
         }
         writeResult(batch, outRow, outCol, outChannel, acc);
       }
     `}},xx=class{constructor(o,i){this.variableNames=["x"],this.uniforms=`pads : vec2<i32>, strides : vec2<i32>, dilations : vec2<i32>, outWidth : i32, itemsPerBlockRow : i32,
       inChannels : i32,`,this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=o,this.dispatchLayout=X$3(this.outputShape),this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize),this.isChannelsLast=i,this.shaderKey=`im2col_${this.isChannelsLast}`}getUserCode(){let o=this.isChannelsLast?1:2,i=this.isChannelsLast?2:3,s=this.isChannelsLast?"coords[1]":"coords[2]",_=this.isChannelsLast?"coords[2]":"coords[1]",_e=this.isChannelsLast?"getX(batch, xRow, xCol, ch)":"getX(batch, ch, xRow, xCol)";return`
    ${G$3("index")} {
      let coords = getCoordsFromIndex(index);
      if(index < uniforms.size) {
        let batch = coords[0];
        let row = ${s};
        let col = ${_};
        let offsetY = (row / uniforms.outWidth) * uniforms.strides[0] - uniforms.pads[0];
        let xRow = offsetY + uniforms.dilations[0] * (col / uniforms.itemsPerBlockRow);
        var value = 0.0;
        if(xRow < uniforms.xShape[${o}] && xRow >= 0) {
          let offsetX = (row % uniforms.outWidth) * uniforms.strides[1] -
              uniforms.pads[1];
          let xCol = offsetX + uniforms.dilations[1] * ((col %
              uniforms.itemsPerBlockRow) / uniforms.inChannels);
          let ch = col % uniforms.inChannels;
          if(xCol < uniforms.xShape[${i}] && xCol >= 0) {
            value = ${_e};
          }
        }
        setOutputAtIndex(index, value);
      }
    }
   `}};function yx(o,i){let s=o.length;return s>=3?i?[...o.slice(0,-3),o[s-3]*o[s-2],o[s-1]]:[...o.slice(0,-3),o[s-3],o[s-2]*o[s-1]]:!i&&s===1&&o[0]>1?[o[0],1]:null}function _ue({x:o,filter:i,convInfo:s,backend:_,bias:_e=null,preluActivationWeights:ct=null,leakyreluAlpha:Mt=0,activation:Ft=null}){let Ut,Xt,Kt=s.dataFormat==="channelsLast",nr=!Kt,rr=[];if(Kt&&s.filterHeight===s.inHeight&&s.filterWidth===s.inWidth&&s.padInfo.type==="VALID"){let fr=s.inHeight*s.inWidth*s.inChannels;Ut=pe$1({inputs:{x:o},backend:_,attrs:{shape:[1,s.batchSize,fr]}}),Xt=pe$1({inputs:{x:i},backend:_,attrs:{shape:[1,fr,s.outChannels]}})}else Ut=pe$1({inputs:{x:o},backend:_,attrs:{shape:Kt?[s.batchSize,s.inHeight*s.inWidth,s.inChannels]:[s.batchSize,s.inChannels,s.inHeight*s.inWidth]}}),Xt=pe$1({inputs:{x:i},backend:_,attrs:{shape:[1,s.inChannels,s.outChannels]}});if(rr.push(Ut),rr.push(Xt),ct!=null){let fr=yx(ct.shape,Kt);fr!=null&&(ct=pe$1({inputs:{x:ct},backend:_,attrs:{shape:fr}}),rr.push(ct))}if(_e!=null){let fr=yx(_e.shape,Kt);fr!=null&&(_e=pe$1({inputs:{x:_e},backend:_,attrs:{shape:fr}}),rr.push(_e))}let or=$p({a:Kt?Ut:Xt,b:Kt?Xt:Ut,transposeA:nr,transposeB:!1,backend:_,bias:_e,activation:Ft,preluActivationWeights:ct,leakyreluAlpha:Mt}),hr=pe$1({inputs:{x:or},backend:_,attrs:{shape:s.outShape}});rr.push(or);for(let fr of rr)_.disposeData(fr.dataId);return hr}function Eue({x:o,filter:i,convInfo:s,backend:_,bias:_e=null,preluActivationWeights:ct=null,leakyreluAlpha:Mt=0,activation:Ft=null}){let{filterWidth:Ut,filterHeight:Xt,inChannels:Kt,strideWidth:nr,strideHeight:rr,padInfo:or,outWidth:hr,outHeight:fr,dilationWidth:yr,dilationHeight:Lr,dataFormat:Br}=s,Vr=Br==="channelsLast",Wr=Ut*Xt*Kt,ro=fr*hr,no=Vr?[s.batchSize,ro,Wr]:[s.batchSize,Wr,ro],so=new xx(no,Vr),ko=[{type:"int32",data:[or.top,or.left]},{type:"int32",data:[rr,nr]},{type:"int32",data:[Lr,yr]},{type:"int32",data:[hr]},{type:"int32",data:[Kt*Ut]},{type:"int32",data:[Kt]}],To=_.runWebGPUProgram(so,[o],o.dtype,ko),oo=[];oo.push(To);let No=pe$1({inputs:{x:i},backend:_,attrs:{shape:[1,Wr,-1]}});if(oo.push(No),ct!=null){let vu=yx(ct.shape,Vr);vu!=null&&(ct=pe$1({inputs:{x:ct},backend:_,attrs:{shape:vu}}),oo.push(ct))}if(_e!=null){let vu=yx(_e.shape,Vr);vu!=null&&(_e=pe$1({inputs:{x:_e},backend:_,attrs:{shape:vu}}),oo.push(_e))}let As=$p({a:Vr?To:No,b:Vr?No:To,transposeA:!Vr,transposeB:!1,backend:_,bias:_e,activation:Ft,preluActivationWeights:ct,leakyreluAlpha:Mt}),Ks=pe$1({inputs:{x:As},backend:_,attrs:{shape:s.outShape}});oo.push(As);for(let vu of oo)_.disposeData(vu.dataId);return Ks}function bx({x:o,filter:i,convInfo:s,backend:_,bias:_e=null,preluActivationWeights:ct=null,leakyreluAlpha:Mt=0,activation:Ft=null}){let Ut=_e!=null,Xt=ct!=null,Kt=s.dataFormat==="channelsLast",nr=Kt&&s.filterHeight===s.inHeight&&s.filterWidth===s.inWidth&&s.padInfo.type==="VALID",rr=A().getBool("WEBGPU_USE_NAIVE_CONV2D_DEBUG");if(!rr&&(nr||s.filterHeight===1&&s.filterWidth===1&&s.dilationHeight===1&&s.dilationWidth===1&&s.strideHeight===1&&s.strideWidth===1&&(s.padInfo.type==="SAME"||s.padInfo.type==="VALID")))return _ue({x:o,filter:i,convInfo:s,backend:_,bias:_e,activation:Ft,preluActivationWeights:ct,leakyreluAlpha:Mt});let or=A().getNumber("WEBGPU_THRESHOLD_TO_INCREASE_WORKGROUPS_FOR_MATMUL"),hr=or>-1?or:_.thresholdToIncreaseWorkgroups,fr=s.batchSize*Math.ceil(s.outHeight*s.outWidth/32)*Math.ceil(s.outChannels/32);if(A().getBool("WEBGPU_CONV_SEPARATE_IM2COL_SHADER")||fr<=hr)return Eue({x:o,filter:i,convInfo:s,backend:_,bias:_e,preluActivationWeights:ct,leakyreluAlpha:Mt,activation:Ft});let yr,Lr=[s.padInfo.top,s.padInfo.left],Br=[{type:"int32",data:[s.filterHeight,s.filterWidth]},{type:"int32",data:[...Lr]},{type:"int32",data:[s.strideHeight,s.strideWidth]},{type:"int32",data:[s.dilationHeight,s.dilationWidth]}];if(rr)yr=new gx(s,Ut,Ft,Xt);else{let no=Kt?s.outHeight*s.outWidth:s.outChannels,so=Kt?s.outChannels:s.outHeight*s.outWidth,ko=s.filterHeight*s.filterWidth*s.inChannels;Br.push({type:"int32",data:[no]},{type:"int32",data:[so]},{type:"int32",data:[ko]});let To=_.adapterInfo.isIntel();yr=new hx(s,no,so,ko,Ut,Ft,Xt,To)}let Vr=[],Wr=[o,i];Ut&&(!Kt&&_e.shape.length===1&&(_e=pe$1({inputs:{x:_e},backend:_,attrs:{shape:[_e.shape[0],1,1]}}),Vr.push(_e)),Wr.push(_e)),Xt&&(!Kt&&ct.shape.length===1&&(ct=pe$1({inputs:{x:ct},backend:_,attrs:{shape:[ct.shape[0],1,1]}}),Vr.push(ct)),Wr.push(ct)),Ft==="leakyrelu"&&(Br.push({type:"float32",data:[Mt]}),yr.uniforms+=" alpha : f32,");let ro=_.runWebGPUProgram(yr,Wr,o.dtype,Br);for(let no of Vr)_.disposeData(no.dataId);return ro}function $ue(o){let{inputs:i,attrs:s,backend:_}=o,{x:_e,filter:ct}=i,{strides:Mt,pad:Ft,dataFormat:Ut,dilations:Xt,dimRoundingMode:Kt}=s,nr=w.convertConv2DDataFormat(Ut);return bx({x:_e,filter:ct,convInfo:w.computeConv2DInfo(_e.shape,ct.shape,Mt,Xt,Ft,Kt,!1,nr),backend:_})}var _V={kernelName:tn,backendName:"webgpu",kernelFunc:$ue},Cx=class{constructor(o){this.variableNames=["dy","W"],this.uniforms="filterDims : vec2<i32>, pads : vec2<i32>, strides : vec2<i32>, outBackprop : vec4<i32>,",this.workgroupSize=[64,1,1],this.size=!1,this.isVec4=!1,this.workPerThread=1,this.outputShape=o.inShape,this.isChannelsLast=o.dataFormat==="channelsLast",this.isVec4=this.isChannelsLast&&o.outChannels%4==0&&o.inChannels%4==0,this.isVec4?(this.workPerThread=2,this.outputComponent=4,this.workgroupSize=[4,4,4],this.dispatchLayout={x:[3],y:[2],z:[0,1]},this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize,[4,this.workPerThread,1])):(this.size=!0,this.workPerThread=1,this.workgroupSize=[64,1,1],this.dispatchLayout=X$3(this.outputShape),this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize)),this.shaderKey=`conv2DDerInput_${this.isChannelsLast}_${this.isVec4}_${this.workPerThread}`}getUserCode(){let o=this.isChannelsLast?1:2,i=this.isChannelsLast?2:3,s=this.isChannelsLast?3:1,_=`
    ${G$3()} {
      let batch = i32(globalId.z) / uniforms.outShape[1];
      let r = i32(globalId.z) % uniforms.outShape[1];
      let c = i32(globalId.y) * ${this.workPerThread};
      let d1 = i32(globalId.x) * 4;

      let dyCorner = vec2<i32>(r, c) - uniforms.pads;

      // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
      // ? = to be determined. : = across all values in that axis.
      var dotProd: array<vec4<f32>, ${this.workPerThread}>;
      for (var i = 0; i < ${this.workPerThread}; i++) {
        dotProd[i] = vec4<f32>(0.0);
      }
      for (var wR = 0; wR < uniforms.filterDims.x; wR = wR + 1) {
        let dyR = f32(dyCorner.x + wR) / f32(uniforms.strides.x);
        let wRPerm = uniforms.filterDims.x - 1 - wR;
        if (dyR < 0.0 || dyR >= f32(uniforms.outBackprop[1]) ||
            fract(dyR) > 0.0) {
          continue;
        }
        let idyR = i32(dyR);

        for (var wC = 0; wC < uniforms.filterDims.y; wC = wC + 1) {
          let dyC = f32(dyCorner.y + wC) / f32(uniforms.strides.y);
          let dyC2 = f32(dyCorner.y + 1 + wC) / f32(uniforms.strides.y);
          let wCPerm = uniforms.filterDims.y - 1 - wC;
          var bDyCVal = true;
          var bDyCVal2 = true;
          if (dyC < 0.0 || dyC >= f32(uniforms.outBackprop[2]) ||
              fract(dyC) > 0.0) {
            bDyCVal = false;
          }
          if (dyC2 < 0.0 || dyC2 >= f32(uniforms.outBackprop[2]) ||
              fract(dyC2) > 0.0) {
            bDyCVal2 = false;
          }

          let idyC = i32(dyC);
          let idyC2 = i32(dyC2);
          if (bDyCVal && bDyCVal2) {
            let d2Length = uniforms.outBackprop[3];
            for (var d2 = 0; d2 < d2Length; d2 = d2 + 4) {
              let wValue0 = getW(wRPerm, wCPerm, d1, d2);
              let wValue1 = getW(wRPerm, wCPerm, d1 + 1, d2);
              let wValue2 = getW(wRPerm, wCPerm, d1 + 2, d2);
              let wValue3 = getW(wRPerm, wCPerm, d1 + 3, d2);
              var xValue =  getDy(batch, idyR, idyC, d2);
              let tmpval = vec4<f32>(dot(xValue, wValue0),
                                     dot(xValue, wValue1),
                                     dot(xValue, wValue2),
                                     dot(xValue, wValue3));
              dotProd[0] = dotProd[0] + tmpval;
              xValue = getDy(batch, idyR, idyC2, d2);
              dotProd[1] = dotProd[1] + vec4<f32>(dot(xValue, wValue0),
                                                  dot(xValue, wValue1),
                                                  dot(xValue, wValue2),
                                                  dot(xValue, wValue3));
            }
          } else if (bDyCVal) {
            let d2Length = uniforms.outBackprop[3];
            for (var d2 = 0; d2 < d2Length; d2 = d2 + 4) {
              let wValue0 = getW(wRPerm, wCPerm, d1, d2);
              let wValue1 = getW(wRPerm, wCPerm, d1 + 1, d2);
              let wValue2 = getW(wRPerm, wCPerm, d1 + 2, d2);
              let wValue3 = getW(wRPerm, wCPerm, d1 + 3, d2);
              var xValue =  getDy(batch, idyR, idyC, d2);
              let tmpval = vec4<f32>(dot(xValue, wValue0),
                                     dot(xValue, wValue1),
                                     dot(xValue, wValue2),
                                     dot(xValue, wValue3));
              dotProd[0] = dotProd[0] + tmpval;
            }
          } else if (bDyCVal2) {
            let d2Length = uniforms.outBackprop[3];
            for (var d2 = 0; d2 < d2Length; d2 = d2 + 4) {
              let wValue0 = getW(wRPerm, wCPerm, d1, d2);
              let wValue1 = getW(wRPerm, wCPerm, d1 + 1, d2);
              let wValue2 = getW(wRPerm, wCPerm, d1 + 2, d2);
              let wValue3 = getW(wRPerm, wCPerm, d1 + 3, d2);
              var xValue =  getDy(batch, idyR, idyC2, d2);
              let tmpval = vec4<f32>(dot(xValue, wValue0),
                                     dot(xValue, wValue1),
                                     dot(xValue, wValue2),
                                     dot(xValue, wValue3));
              dotProd[1] = dotProd[1] + tmpval;
            }
          }
        }
      }

      for (var i = 0; i < ${this.workPerThread}; i = i + 1) {
        let coords = vec4<i32>(batch, r, c + i, d1);
        if (coordsInBounds4D(coords, uniforms.outShape)) {
          setOutputAtCoords(coords[0], coords[1], coords[2], coords[3], dotProd[i]);
        }
      }
    }
    `;return this.isVec4?`
    ${_}
    `:`
    ${G$3("index")} {
      if(index < uniforms.size) {
        let coords = getCoordsFromIndex(index);
        let batch = coords[0];
        let d1 = coords[${s}];

        let dyCorner = vec2<i32>(coords[${o}], coords[${i}]) - uniforms.pads;
        let dyRCorner = dyCorner.x;
        let dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        var dotProd = 0.0;
        for (var wR = 0; wR < uniforms.filterDims.x; wR = wR + 1) {
          let dyR = (f32(dyRCorner) + f32(wR)) / f32(uniforms.strides.x);
          let wRPerm = uniforms.filterDims.x - 1 - wR;
          if (dyR < 0.0 || dyR >= f32(uniforms.outBackprop[1]) || fract(dyR) > 0.0 ||
              wRPerm < 0) {
            continue;
          }
          let idyR = i32(dyR);

          for (var wC = 0; wC < uniforms.filterDims.y; wC = wC + 1) {
            let dyC = (f32(dyCCorner) + f32(wC)) / f32(uniforms.strides.y);
            let wCPerm = uniforms.filterDims.y - 1 - wC;
            if (dyC < 0.0 || dyC >= f32(uniforms.outBackprop[2]) ||
                fract(dyC) > 0.0 || wCPerm < 0) {
              continue;
            }
            let idyC = i32(dyC);

            for (var d2 = 0; d2 < uniforms.outBackprop[3]; d2 = d2 + 1) {
              let xValue = ${this.isChannelsLast?"getDy(batch, idyR, idyC, d2)":"getDy(batch, d2, idyR, idyC)"};
              let wValue = getW(wRPerm, wCPerm, d1, d2);
              dotProd = dotProd + xValue * wValue;
            }
          }
        }
        setOutputAtIndex(index, dotProd);
      }
    }
  `}},wx=class{constructor(o){this.variableNames=["x","dy"],this.uniforms="pads : vec2<i32>, strides : vec2<i32>, batchSize : i32, outHeight : i32, outWidth : i32, inHeight : i32, inWidth : i32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=o.filterShape,this.dispatchLayout=X$3(this.outputShape),this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize),this.isChannelsLast=o.dataFormat==="channelsLast",this.shaderKey=`conv2DDerFilter_${this.isChannelsLast}`}getUserCode(){return`
    ${G$3("index")} {
      if(index < uniforms.size) {
        let coords = getCoordsFromIndex(index);
        let wR = coords[0];
        let wC = coords[1];
        let d1 = coords[2];
        let d2 = coords[3];

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        var dotProd = 0.0;
        for (var b = 0; b < uniforms.batchSize; b = b + 1) {
          for (var yR = 0; yR < uniforms.outHeight; yR = yR + 1) {
            let xR = wR + yR * uniforms.strides[0] - uniforms.pads[0];
            if (xR < 0 || xR >= uniforms.inHeight) {
              continue;
            }

            for (var yC = 0; yC < uniforms.outWidth; yC = yC + 1) {
              let xC = wC + yC * uniforms.strides[1] - uniforms.pads[1];

              if (xC < 0 || xC >= uniforms.inWidth) {
                continue;
              }

              if (${this.isChannelsLast}) {
                let dyValue = getDy(b, yR, yC, d2);
                let xValue = getX(b, xR, xC, d1);
                dotProd = dotProd + xValue * dyValue;
              } else {
                let dyValue = getDy(b, d2, yR, yC);
                let xValue = getX(b, d1, xR, xC);
                dotProd = dotProd + xValue * dyValue;
              }
            }
          }
        }
        setOutputAtIndex(index, dotProd);
      }
    }
  `}},Sx=class{constructor(o){this.variableNames=["x","dy"],this.uniforms=`pads : vec3<i32>, strides : vec3<i32>, batchSize : i32, outDepth : i32,
       outHeight : i32, outWidth : i32, inDepth : i32, inHeight : i32, inWidth : i32,`,this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=o.filterShape,this.dispatchLayout=X$3(this.outputShape),this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="conv3DDerFilter"}getUserCode(){return`
    ${G$3("index")} {
      if(index < uniforms.size) {
        let coords = getCoordsFromIndex(index);
        let wF = coords.x;
        let wR = coords.y;
        let wC = coords.z;
        let d1 = coords.w;
        let d2 = coords.u;

        var dotProd = 0.0;
        for (var b = 0; b < uniforms.batchSize; b++) {
          for (var yF = 0; yF < uniforms.outDepth; yF++) {
            let xF = wF + yF * uniforms.strides[0] - uniforms.pads[0];
            if (xF < 0 || xF >= uniforms.inDepth) {
              continue;
            }

            for (var yR = 0; yR < uniforms.outHeight; yR++) {
              let xR = wR + yR * uniforms.strides[1] - uniforms.pads[1];
              if (xR < 0 || xR >= uniforms.inHeight) {
                continue;
              }

              for (var yC = 0; yC < uniforms.outWidth; yC++) {
                let xC = wC + yC * uniforms.strides[2] - uniforms.pads[2];
                if (xC < 0 || xC >= uniforms.inWidth) {
                  continue;
                }

                let dyValue = getDy(b, yF, yR, yC, d2);
                let xValue = getX(b, xF, xR, xC, d1);
                dotProd += xValue * dyValue;
              }
            }
          }
        }
        setOutputAtIndex(index, dotProd);
      }
    }
  `}},Ix=class{constructor(o){this.variableNames=["dy","W"],this.uniforms=`filterDims : vec3<i32>, pads : vec3<i32>, strides : vec3<i32>,
      outDepth : i32, outHeight : i32, outWidth : i32, outChannels : i32,`,this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=o.inShape,this.dispatchLayout=X$3(this.outputShape),this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="conv3DDerInput"}getUserCode(){return`
    ${G$3("index")} {
      if(index < uniforms.size) {
        let coords = getCoordsFromIndex(index);
        let batch = coords.x;
        let d1 = coords.u;

        let dyCorner = vec3<i32>(coords.y, coords.z, coords.w) - uniforms.pads;
        let dyFCorner = dyCorner.x;
        let dyRCorner = dyCorner.y;
        let dyCCorner = dyCorner.z;

        var dotProd = 0.0;
        for (var wF = 0; wF < uniforms.filterDims[0]; wF++) {
          let dyF = f32(dyFCorner + wF) / f32(uniforms.strides[0]);
          if (dyF < 0.0 || dyF >= f32(uniforms.outDepth) || fract(dyF) > 0.0) {
            continue;
          }
          let idyF = i32(dyF);

          let wFPerm = uniforms.filterDims[0] - 1 - wF;

          for (var wR = 0; wR < uniforms.filterDims[1]; wR++) {
            let dyR = f32(dyRCorner + wR) / f32(uniforms.strides[1]);

            if (dyR < 0.0 || dyR >= f32(uniforms.outHeight) || fract(dyR) > 0.0) {
              continue;
            }
            let idyR = i32(dyR);

            let wRPerm = uniforms.filterDims[1] - 1 - wR;

            for (var wC = 0; wC < uniforms.filterDims[2]; wC++) {
              let dyC = f32(dyCCorner + wC) / f32(uniforms.strides[2]);

              if (dyC < 0.0 || dyC >= f32(uniforms.outWidth) || fract(dyC) > 0.0) {
                continue;
              }
              let idyC = i32(dyC);

              let wCPerm = uniforms.filterDims[2] - 1 - wC;

              for (var d2 = 0; d2 < uniforms.outChannels; d2++) {
                let xValue = getDy(batch, idyF, idyR, idyC, d2);
                let wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutputAtIndex(index, dotProd);
      }
    }
  `}};function Rue(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e,dy:ct}=i,{strides:Mt,pad:Ft,dataFormat:Ut,dimRoundingMode:Xt,filterShape:Kt}=_,nr=w.convertConv2DDataFormat(Ut),rr=w.computeConv2DInfo(_e.shape,Kt,Mt,1,Ft,Xt,!1,nr),or=new wx(rr),hr=[{type:"int32",data:[rr.padInfo.top,rr.padInfo.left]},{type:"int32",data:[rr.strideHeight,rr.strideWidth]},{type:"int32",data:[rr.batchSize]},{type:"int32",data:[rr.outHeight]},{type:"int32",data:[rr.outWidth]},{type:"int32",data:[rr.inHeight]},{type:"int32",data:[rr.inWidth]}];return s.runWebGPUProgram(or,[_e,ct],_e.dtype,hr)}var EV={kernelName:Fi,backendName:"webgpu",kernelFunc:Rue};function Due(o=4){let i=`if (row < uniforms.dimAOuter && col < uniforms.dimInner) {
        
      let outRow = row / uniforms.outShape[2];
      let outCol = row % uniforms.outShape[2];

      let WRow = col / (uniforms.filterDims[1] * uniforms.outBackprop[3]);
      let WCol = col / uniforms.outBackprop[3] % uniforms.filterDims[1];
      let xR = f32(outRow - uniforms.pads[0] + WRow) / f32(uniforms.strides[0]);
      let xC = f32(outCol - uniforms.pads[1] + WCol) / f32(uniforms.strides[1]);
      if (xR < 0.0 || xR >= f32(uniforms.outBackprop[1]) || fract(xR) > 0.0) {
        return ${Ae(o)}(0.0);
      }
      if (xC < 0.0 || xC >= f32(uniforms.outBackprop[2]) || fract(xC) > 0.0) {
        return ${Ae(o)}(0.0);
      }
      let coord = vec4<i32>(
          batch,
          i32(xR),
          i32(xC),
          col % uniforms.outBackprop[3]);
      return x[getIndexFromCoords4D(coord, uniforms.xShape)/${o}];
      }
      return ${Ae(o)}(0.0);`;return`
  fn mm_readA(batch: i32, row : i32, col : i32) -> ${Ae(o)} {
    ${i}
  }

  fn mm_readB(batch: i32, row : i32, col : i32) -> ${Ae(o)} {
    let coordX = uniforms.filterDims.x - 1 -
        row / (uniforms.filterDims[1] * uniforms.outBackprop[3]);
    let coordY = uniforms.filterDims.y - 1 -
        (row / uniforms.outBackprop[3]) % uniforms.filterDims[1];
    if (row < uniforms.dimInner && col < uniforms.dimBOuter &&
        coordX >= 0 && coordY >= 0) {
      let rowInner = row % uniforms.outBackprop[3];
      let coord = vec4<i32>(coordX, coordY, col, rowInner);
      ${(s=>{switch(s){case 1:return"return W[getIndexFromCoords4D(coord, uniforms.wShape)];";case 4:return`
            let coord1 = vec4<i32>(coordX, coordY, col + 1, rowInner);
            let coord2 = vec4<i32>(coordX, coordY, col + 2, rowInner);
            let coord3 = vec4<i32>(coordX, coordY, col + 3, rowInner);
            let v0 = W[getIndexFromCoords4D(coord, uniforms.wShape)];
            let v1 = W[getIndexFromCoords4D(coord1, uniforms.wShape)];
            let v2 = W[getIndexFromCoords4D(coord2, uniforms.wShape)];
            let v3 = W[getIndexFromCoords4D(coord3, uniforms.wShape)];
            return vec4<f32>(v0, v1, v2, v3);
            `;default:throw new Error(`innerElementSize ${s} is not supported.`)}})(o)}
    }
    return ${Ae(o)}(0.0);
  }

  fn mm_write(batch: i32, row : i32, col : i32, valueInput : ${Ae(o)}) {
    if (row < uniforms.dimAOuter && col < uniforms.dimBOuter) {
      var value = valueInput;
      let outCoord = vec4<i32>(
          batch,
          row / uniforms.outShape[2],
          row % uniforms.outShape[2],
          col);
      result[getIndexFromCoords4D(outCoord, uniforms.outShape)/${o}] = value;
    }
  }`}var vx=class{constructor(o){this.variableNames=["x","W"],this.uniforms="filterDims : vec2<i32>, pads : vec2<i32>, strides : vec2<i32>, outBackprop : vec4<i32>, dimAOuter : i32, dimBOuter : i32, dimInner : i32,",this.outputShape=o.inShape,y.assert(o.dataFormat==="channelsLast",()=>"TODO: NCHW is unimplemented"),this.isVec4=o.inChannels%4==0&&o.outChannels%4==0,this.dispatchLayout={x:[3],y:[1,2],z:[0]},this.workgroupSize=lm(this.dispatchLayout,this.outputShape,this.isVec4),this.elementsPerThread=mm(this.dispatchLayout,this.outputShape,this.isVec4),this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize,this.elementsPerThread),this.isVec4&&(this.outputComponent=4,this.variableComponents=[4,1]),this.shaderKey=`conv2DDerInputMM_${this.isVec4}_${this.elementsPerThread}`}getUserCode(){let o=this.isVec4?_p(this.elementsPerThread,this.workgroupSize):Ep(this.elementsPerThread,this.workgroupSize);return`
    ${Due(this.isVec4?4:1)}
    ${o}
    `}};function Aue(o){let i,{inputs:s,backend:_,attrs:_e}=o,{dy:ct,filter:Mt}=s,{inputShape:Ft,strides:Ut,pad:Xt,dataFormat:Kt,dimRoundingMode:nr}=_e,rr=w.convertConv2DDataFormat(Kt),or=w.computeConv2DInfo(Ft,Mt.shape,Ut,1,Xt,nr,!1,rr),hr=[{type:"int32",data:[or.filterHeight,or.filterWidth]},{type:"int32",data:[or.filterHeight-1-or.padInfo.top,or.filterWidth-1-or.padInfo.left]},{type:"int32",data:[or.strideHeight,or.strideWidth]},{type:"int32",data:[or.batchSize,or.outHeight,or.outWidth,or.outChannels]}];if(A().getBool("WEBGPU_USE_NAIVE_CONV2D_TRANSPOSE")||or.dataFormat!=="channelsLast")i=new Cx(or);else{i=new vx(or);let fr=or.inHeight*or.inWidth,yr=or.inChannels,Lr=or.filterHeight*or.filterWidth*or.outChannels;hr.push({type:"uint32",data:[fr]},{type:"uint32",data:[yr]},{type:"uint32",data:[Lr]})}return _.runWebGPUProgram(i,[ct,Mt],"float32",hr)}var $V={kernelName:rn,backendName:"webgpu",kernelFunc:Aue},kx=class{constructor(o){this.variableNames=["x","W"],this.uniforms="filterDims: vec3<i32>, pads: vec3<i32>, strides: vec3<i32>, dilations: vec3<i32>,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=o.outShape,this.dispatchLayout=X$3(this.outputShape),this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="conv3dnaive"}getUserCode(){return`
    ${G$3("index")} {
      if (index < uniforms.size) {
        let coords = getOutputCoords();
        let batch = coords.x;
        let d2 = coords.u;

        let xFRCCorner = vec3<i32>(coords.y, coords.z, coords.w) * uniforms.strides - uniforms.pads;
        let xFCorner = xFRCCorner.x;
        let xRCorner = xFRCCorner.y;
        let xCCorner = xFRCCorner.z;

        let inputDepthNearestVec4 = (uniforms.xShape.u / 4) * 4;
        let inputDepthVec4Remainder = uniforms.xShape.u % 4;

        var dotProd = 0.0;
        for (var wF = 0; wF < uniforms.filterDims[0]; wF++) {
          let xF = xFCorner + wF * uniforms.dilations[0];
          if (xF < 0 || xF >= uniforms.xShape.y) {
            continue;
          }

          for (var wR = 0; wR < uniforms.filterDims[1]; wR++) {
            let xR = xRCorner + wR * uniforms.dilations[1];
            if (xR < 0 || xR >= uniforms.xShape.z) {
              continue;
            }

            for (var wC = 0; wC < uniforms.filterDims[2]; wC++) {
              let xC = xCCorner + wC * uniforms.dilations[2];
              if (xC < 0 || xC >= uniforms.xShape.w) {
                continue;
              }

              for (var d1 = 0; d1 < inputDepthNearestVec4; d1 += 4) {
                let xValues = vec4<f32>(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                let wValues = vec4<f32>(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (inputDepthVec4Remainder == 1) {
                dotProd += getX(batch, xF, xR, xC, inputDepthNearestVec4) *
                  getW(wF, wR, wC, inputDepthNearestVec4, d2);
              } else if (inputDepthVec4Remainder == 2) {
                let xValues = vec2<f32>(
                  getX(batch, xF, xR, xC, inputDepthNearestVec4),
                  getX(batch, xF, xR, xC, inputDepthNearestVec4 + 1)
                );
                let wValues = vec2<f32>(
                  getW(wF, wR, wC, inputDepthNearestVec4, d2),
                  getW(wF, wR, wC, inputDepthNearestVec4 + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (inputDepthVec4Remainder == 3) {
                let xValues = vec3<f32>(
                  getX(batch, xF, xR, xC, inputDepthNearestVec4),
                  getX(batch, xF, xR, xC, inputDepthNearestVec4 + 1),
                  getX(batch, xF, xR, xC, inputDepthNearestVec4 + 2)
                );
                let wValues = vec3<f32>(
                  getW(wF, wR, wC, inputDepthNearestVec4, d2),
                  getW(wF, wR, wC, inputDepthNearestVec4 + 1, d2),
                  getW(wF, wR, wC, inputDepthNearestVec4 + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutputAtIndex(index, dotProd);
      }
    }`}};function Fue(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e,filter:ct}=i,{strides:Mt,pad:Ft,dilations:Ut}=_,Xt=w.computeConv3DInfo(_e.shape,ct.shape,Mt,Ut,Ft),Kt=[Xt.padInfo.front,Xt.padInfo.top,Xt.padInfo.left],nr=[{type:"int32",data:[Xt.filterDepth,Xt.filterHeight,Xt.filterWidth]},{type:"int32",data:[...Kt]},{type:"int32",data:[Xt.strideDepth,Xt.strideHeight,Xt.strideWidth]},{type:"int32",data:[Xt.dilationDepth,Xt.dilationHeight,Xt.dilationWidth]}],rr=new kx(Xt),or=dt(_e.dtype,ct.dtype);return s.runWebGPUProgram(rr,[_e,ct],or,nr)}var RV={kernelName:on,backendName:"webgpu",kernelFunc:Fue};function Pue(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e,dy:ct}=i,{strides:Mt,pad:Ft,filterShape:Ut}=_,Xt=w.computeConv3DInfo(_e.shape,Ut,Mt,1,Ft),Kt=new Sx(Xt),nr=[{type:"int32",data:[Xt.padInfo.front,Xt.padInfo.top,Xt.padInfo.left]},{type:"int32",data:[Xt.strideDepth,Xt.strideHeight,Xt.strideWidth]},{type:"int32",data:[Xt.batchSize]},{type:"int32",data:[Xt.outDepth]},{type:"int32",data:[Xt.outHeight]},{type:"int32",data:[Xt.outWidth]},{type:"int32",data:[Xt.inDepth]},{type:"int32",data:[Xt.inHeight]},{type:"int32",data:[Xt.inWidth]}];return s.runWebGPUProgram(Kt,[_e,ct],ct.dtype,nr)}var DV={kernelName:ja,backendName:"webgpu",kernelFunc:Pue};function Oue(o){let{inputs:i,backend:s,attrs:_}=o,{dy:_e,filter:ct}=i,{strides:Mt,pad:Ft,inputShape:Ut}=_,Xt=w.computeConv3DInfo(Ut,ct.shape,Mt,1,Ft),Kt=new Ix(Xt),nr=[{type:"int32",data:[Xt.filterDepth,Xt.filterHeight,Xt.filterWidth]},{type:"int32",data:[Xt.filterDepth-1-Xt.padInfo.front,Xt.filterHeight-1-Xt.padInfo.top,Xt.filterWidth-1-Xt.padInfo.left]},{type:"int32",data:[Xt.strideDepth,Xt.strideHeight,Xt.strideWidth]},{type:"int32",data:[Xt.outDepth]},{type:"int32",data:[Xt.outHeight]},{type:"int32",data:[Xt.outWidth]},{type:"int32",data:[Xt.outChannels]}];return s.runWebGPUProgram(Kt,[_e,ct],_e.dtype,nr)}var AV={kernelName:nn,backendName:"webgpu",kernelFunc:Oue},Mue=ye$1({opType:Z$1.COS}),FV={kernelName:sn,backendName:"webgpu",kernelFunc:Mue},Lue=ye$1({opType:Z$1.COSH}),PV={kernelName:an,backendName:"webgpu",kernelFunc:Lue},Nx=class{constructor(o,i,s,_){this.variableNames=["Image","Boxes","BoxInd"],this.uniforms="extrapolationValue : f32,",this.workgroupSize=[64,1,1],this.size=!0;let[_e]=i;this.outputShape=[_e,s[0],s[1],o],this.dispatchLayout=X$3(this.outputShape),this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize),this.methodId=_==="bilinear"?1:0,this.cropHeightBiggerThan1=this.outputShape[1]>1,this.cropWidthBiggerThan1=this.outputShape[2]>1,this.shaderKey=`cropAndResize_${this.methodId}_${this.cropHeightBiggerThan1}_${this.cropWidthBiggerThan1}`}getUserCode(){let[o,i]=["f32(uniforms.imageShape[1] - 1)","f32(uniforms.imageShape[2] - 1)"],[s,_,_e]=this.cropHeightBiggerThan1?[`(${o} / f32(uniforms.outShape[1] - 1))`,"(y2-y1) * height_ratio",`y1*${o} + f32(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${o}`],[ct,Mt,Ft]=this.cropWidthBiggerThan1?[`(${i} / f32(uniforms.outShape[2] - 1))`,"(x2-x1) * width_ratio",`x1*${i} + f32(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${i}`];return`
    ${G$3("index")} {
      if (index < uniforms.size) {
        let coords = getCoordsFromIndex(index);
        let height_ratio = f32(${s});
        let width_ratio = f32(${ct});
        let b = coords[0];
        let y = coords[1];
        let x = coords[2];
        let d = coords[3];
        // get box vals
        let y1 = getBoxes(b, 0);
        let x1 = getBoxes(b, 1);
        let y2 = getBoxes(b, 2);
        let x2 = getBoxes(b, 3);
        // get image in batch index
        let bInd = i32(round(getBoxInd(b)));
        if(bInd < 0 || bInd >= uniforms.outShape[0]) {
          return;
        }
        let height_scale = ${_};
        let width_scale = ${Mt};
        let in_y = ${_e};
        if( in_y < 0.0 || in_y > ${o} ) {
          setOutputAtIndex(index, uniforms.extrapolationValue);
          return;
        }
        let in_x = ${Ft};
        if( in_x < 0.0 || in_x > ${i} ) {
          setOutputAtIndex(index, uniforms.extrapolationValue);
          return;
        }
        let sourceFracIndexCR = vec2<f32>(in_x,in_y);
        if(${this.methodId} == 1) {
          // Compute the four integer indices.
          let sourceFloorCR = vec2<i32>(sourceFracIndexCR);
          let sourceCeilCR = vec2<i32>(ceil(sourceFracIndexCR));
          let topLeft = getImage(bInd, sourceFloorCR.y, sourceFloorCR.x, d);
          let bottomLeft = getImage(bInd, sourceCeilCR.y, sourceFloorCR.x, d);
          let topRight = getImage(bInd, sourceFloorCR.y, sourceCeilCR.x, d);
          let bottomRight = getImage(bInd, sourceCeilCR.y, sourceCeilCR.x, d);
          let fracCR = sourceFracIndexCR - vec2<f32>(sourceFloorCR);
          let top = topLeft + (topRight - topLeft) * fracCR.x;
          let bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          let newValue = top + (bottom - top) * fracCR.y;
          setOutputAtIndex(index, newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          let sourceNearestCR = vec2<i32>(floor(
            sourceFracIndexCR + vec2<f32>(0.5,0.5)));
          let newValue = getImage(
            bInd, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutputAtIndex(index, newValue);
        }
      }
    }
    `}},Bue=o=>{let{inputs:i,backend:s,attrs:_}=o,{image:_e,boxes:ct,boxInd:Mt}=i,{cropSize:Ft,method:Ut,extrapolationValue:Xt}=_,Kt=new Nx(_e.shape[3],ct.shape,Ft,Ut),nr=[{type:"float32",data:[Xt]}];return s.runWebGPUProgram(Kt,[_e,ct,Mt],"float32",nr)},OV={kernelName:cn,backendName:"webgpu",kernelFunc:Bue},Dp;(function(o){o.Prod="*",o.Sum="+"})(Dp||(Dp={}));var xm=class{constructor(o,i,s,_){this.variableNames=["x"],this.uniforms="index : f32,",this.size=!0,this.workgroupSize=[128,1,1],this.outputShape=i,this.dispatchLayout=X$3(this.outputShape),this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize),this.exclusive=s,this.reverse=_,this.op=o,this.shaderKey=`cum_${this.op}_${this.exclusive}_${this.reverse}`}getUserCode(){let o=this.outputShape.length,i=this.op===Dp.Prod?"1.0":"0.0",s=this.exclusive?i:`getX(${MV(o,"coords",this.op)})`,_=this.outputShape[this.outputShape.length-1],_e="",ct="";return this.exclusive?(_e=this.reverse?"end != "+(_-1):"end != 0",ct=this.reverse?"end + 1":"end - 1"):(_e=this.reverse?`end + pow2 < ${_}`:"end >= pow2",ct=this.reverse?"end + pow2":"end - pow2"),`
      ${G$3("index")} {
       if (index < uniforms.size) {
         var coords = getCoordsFromIndex(index);

         let end = ${LV(o,"coords",this.op)};
         var val = ${s};
         let pow2 = i32(pow(2.0, uniforms.index));
         if (${_e}) {
           let idx = ${ct};
           ${LV(o,"coords",this.op)} = idx;
           val ${this.op}= getX(${MV(o,"coords",this.op)});
         }
         setOutputAtIndex(index, val);
       }
      }
    `}};function MV(o,i,s){if(o===1)return`${i}`;if(o===2)return`${i}.x, ${i}.y`;if(o===3)return`${i}.x, ${i}.y, ${i}.z`;if(o===4)return`${i}.x, ${i}.y, ${i}.z, ${i}.w`;throw Error(`Cumulative ${s} for rank ${o} is not yet supported`)}function LV(o,i,s){if(o===1)return`${i}`;if(o===2)return`${i}.y`;if(o===3)return`${i}.z`;if(o===4)return`${i}.w`;throw Error(`Cumulative ${s} for rank ${o} is not yet supported`)}function Tx(o,i,s,_,_e,ct){let Mt=i.shape.length,Ft=w.getAxesPermutation([_],Mt),Ut=i;Ft!=null&&(Ut=xr({inputs:{x:i},backend:s,attrs:{perm:Ft}}));let Xt=w.getInnerMostAxes(1,Mt)[0];if(Xt!==Mt-1)throw new Error(`WebGPU cumprod shader expects an inner-most axis=${i.shape.length-1} but got axis=${_}`);let Kt=Ut.shape[Xt],nr=At$2({inputs:{x:Ut},backend:s});for(let rr=0;rr<=Math.ceil(Math.log2(Kt))-1;rr++){let or=new xm(o,Ut.shape,!1,ct),hr=nr,fr=[{type:"float32",data:[rr]}];nr=s.runWebGPUProgram(or,[nr],nr.dtype,fr),s.disposeData(hr.dataId)}if(_e){let rr=new xm(o,Ut.shape,_e,ct),or=nr,hr=[{type:"float32",data:[0]}];nr=s.runWebGPUProgram(rr,[nr],nr.dtype,hr),s.disposeData(or.dataId)}if(Ft!=null){let rr=xr({inputs:{x:nr},backend:s,attrs:{perm:w.getUndoAxesPermutation(Ft)}});return s.disposeData(nr.dataId),s.disposeData(Ut.dataId),rr}return nr}function zue(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{axis:ct,exclusive:Mt,reverse:Ft}=_;return Tx(Dp.Prod,_e,s,ct,Mt,Ft)}var BV={kernelName:un,backendName:"webgpu",kernelFunc:zue};function Vue(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{axis:ct,exclusive:Mt,reverse:Ft}=_;return Tx(Dp.Sum,_e,s,ct,Mt,Ft)}var zV={kernelName:pn,backendName:"webgpu",kernelFunc:Vue};function Wue(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e,weights:ct}=i,{size:Mt,binaryOutput:Ft}=_,Ut=_e.shape.length===1,Xt=y.sizeFromShape(ct.shape)>0,Kt=ct.dtype,nr=Ut?[_e.shape[0]]:[_e.shape[0],_e.shape[1]],rr=vt$2({backend:s,attrs:{shape:Ut?[Mt]:[_e.shape[0],Mt],value:0,dtype:Kt}}),or=new Qc(nr,Xt,Ft),hr=[{type:"int32",data:[Mt]}],fr=Xt?[_e,ct]:[_e];return s.runWebGPUProgram(or,fr,Kt,hr,rr)}var VV={kernelName:ra,backendName:"webgpu",kernelFunc:Wue},_x=class{constructor(o,i){this.variableNames=["x"],this.workgroupSize=[64,1,1],this.size=!0,this.uniforms="blockSize : i32,",this.outputShape=o,this.dispatchLayout=X$3(this.outputShape),this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey=`depthToSpace_${i}`,this.dataFormat=i}getUserCode(){return`
      ${G$3("index")} {
        if (index < uniforms.size) {
          let coords = getCoordsFromIndex(index);
          let b = coords[0];
          let h = ${this.getHeightCoordString()};
          let w = ${this.getWidthCoordString()};
          let d = ${this.getDepthCoordString()};

          let in_h = h / uniforms.blockSize;
          let offset_h = h % uniforms.blockSize;
          let in_w = w / uniforms.blockSize;
          let offset_w = w % uniforms.blockSize;
          let offset_d = (offset_h * uniforms.blockSize + offset_w) *
            ${this.getOutputDepthSize()};
          let in_d = d + offset_d;

          let rlt = ${this.getInputSamplingString()};
          setOutputAtIndex(index, rlt);
        }
      }`}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?"uniforms.outShape[3]":"uniforms.outShape[1]"}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}};function Uue(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{blockSize:ct,dataFormat:Mt}=_,Ft=_e.shape[0],Ut=(Mt==="NHWC"?_e.shape[1]:_e.shape[2])*ct,Xt=(Mt==="NHWC"?_e.shape[2]:_e.shape[3])*ct,Kt=(Mt==="NHWC"?_e.shape[3]:_e.shape[1])/(ct*ct),nr=[{type:"int32",data:[ct]}],rr=new _x(Mt==="NHWC"?[Ft,Ut,Xt,Kt]:[Ft,Kt,Ut,Xt],Mt);return s.runWebGPUProgram(rr,[_e],_e.dtype,nr)}var WV={kernelName:ln,backendName:"webgpu",kernelFunc:Uue},Ex=class{constructor(o,i,s,_=!1,_e=null,ct=!1){this.variableNames=["x","W"],this.uniforms="pads : vec2<i32>, inDims : vec2<i32>,",this.workgroupSize=[16,16,1],this.outputShape=o,this.dispatchLayout={x:[3],y:[2],z:[0,1]},this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize),_&&this.variableNames.push("bias"),ct&&this.variableNames.push("preluActivationWeights"),this.addBias=_,this.activation=_e,this.hasPreluActivation=ct,this.filterHeight=i,this.filterWidth=s,this.shaderKey=`depthwiseNCHW_${this.activation}_${this.filterHeight}_${this.filterWidth}`}getUserCode(){let o=this.filterWidth*this.filterHeight,i=this.workgroupSize[0]*this.workgroupSize[1]*this.workgroupSize[2],s=this.workgroupSize[1]+this.filterHeight-1,_=this.workgroupSize[0]+this.filterWidth-1;return`
      ${dr(this.activation,this.hasPreluActivation,!1,4)}

      var<workgroup> mm_Asub : array<array<f32, ${_}>, ${s}>;
      var<workgroup> mm_Bsub : array<array<f32, ${this.filterWidth}>, ${this.filterHeight}>;
      fn readX(batch : i32, channel : i32, row : i32, col : i32) -> f32 {
        var value = 0.0;
        if (row >=0 && row < uniforms.inDims[0] && col >=0 && col < uniforms.inDims[1])
        {
          value = getX(batch, channel, row, col);
        }
        return value;
      }

      ${G$3()} {
        let coords = getOutputCoords();
        let batch = coords[0];
        let xRCCorner = vec2<i32>(coords.zw) - uniforms.pads;
        let channelMul = uniforms.wShape[3];
        let d1 = coords[1] / channelMul;
        let q = coords[1] % channelMul;

        let inputRowStart = xRCCorner.x;
        let inputColStart = xRCCorner.y;

        let localRow = i32(localId.y);
        let localCol = i32(localId.x);

        // Load one tile of X into local memory.
        for (var inputRow = localRow; inputRow < ${s}; inputRow = inputRow + ${this.workgroupSize[1]}) {
          for (var inputCol = localCol; inputCol < ${_}; inputCol = inputCol + ${this.workgroupSize[0]}) {
            let rowOffset = inputRow - localRow;
            let colOffset = inputCol - localCol;
            mm_Asub[inputRow][inputCol] = readX(batch, d1, inputRowStart + rowOffset, inputColStart + colOffset);
          }
        }

        // Load one tile of W into local memory.
        var wIndex = i32(localIndex);
        ${o<i?`if (wIndex < ${o})`:`for(; wIndex < ${o}; wIndex = wIndex + ${i})`}

        {
          let wRow = wIndex / ${this.filterWidth};
          let wCol = wIndex % ${this.filterWidth};
          mm_Bsub[wRow][wCol] = getW(wRow, wCol, d1, q);
        }

        workgroupBarrier();

        var value = 0.0;
        for (var wR = 0; wR < ${this.filterHeight}; wR = wR + 1) {
          for (var wC = 0; wC < ${this.filterWidth}; wC = wC + 1) {
            let xVal = mm_Asub[localRow + wR][localCol + wC];
            let wVal = mm_Bsub[wR][wC];
            value = fma(xVal, wVal, value);
          }
        }
        ${Zr(this.addBias,this.activation)}
        if (coordsInBounds4D(coords, uniforms.outShape)) {
          setOutputAtCoords(coords[0], coords[1], coords[2], coords[3], value);
        }
      }
    `}},Jc=class{constructor(o,i=!1,s=null,_=!1){this.variableNames=["x","W"],this.uniforms="pads : vec2<i32>, inDims : vec2<i32>, virtualWidth : i32,",this.workgroupSize=[64,1,1],this.workPerThread=4,this.outputComponent=4,this.outputShape=o.outShape,this.virtualWidth=Math.ceil(this.outputShape[2]/this.workPerThread)*this.workPerThread;let _e=[this.outputShape[0],this.outputShape[1],this.virtualWidth,this.outputShape[3]];this.dispatchLayout=X$3(_e),this.dispatch=H$2(this.dispatchLayout,_e,this.workgroupSize,[this.outputComponent*this.workPerThread,1,1]),y.assert(o.dataFormat==="channelsLast",()=>"TODO: NCHW is unimplemented"),i&&this.variableNames.push("bias"),_&&this.variableNames.push("preluActivationWeights"),this.convInfo=o,this.addBias=i,this.activation=s,this.hasPreluActivation=_,this.shaderKey=`depthwiseVec4_${s}_${this.convInfo.filterHeight}_${this.convInfo.filterWidth}_${this.convInfo.strideHeight}_${this.convInfo.strideWidth}_${this.workPerThread}`}getUserCode(){let o=(this.workPerThread-1)*this.convInfo.strideWidth+this.convInfo.filterWidth,i=this.convInfo.strideHeight,s=this.convInfo.strideWidth;return`
      ${dr(this.activation,this.hasPreluActivation,!0,4)}
      fn readX(batch : i32, row : i32, col : i32, channel : i32) -> vec4<f32> {
        var value = vec4<f32>(0.0);
        if (col >=0 && col < uniforms.inDims[1]) {
          value = getX(batch, row, col, channel);
        }
        return value;
      }

      ${G$3("index")} {
        let width0 = uniforms.outShape[3] / ${this.outputComponent};
        let d1 = (index % width0) * ${this.outputComponent};
        var index1 = index / width0;
        let width1 = uniforms.virtualWidth / ${this.workPerThread};
        let c = (index1 % width1) * ${this.workPerThread};
        index1 = index1 / width1;
        let r = index1 % uniforms.outShape[1];
        let batch = index1 / uniforms.outShape[1];

        let xRCCorner = vec2<i32>(r, c) * vec2<i32>(${i}, ${s}) - uniforms.pads;

        let xRCorner = xRCCorner.x;
        let xCCorner = xRCCorner.y;
        var xVals : array<vec4<f32>, ${o}>;
        var dotProd : array<vec4<f32>, ${this.workPerThread}>;
        for (var i = 0; i < ${this.workPerThread}; i++) {
          dotProd[i] = vec4<f32>(0.0);
        }

        // Use constant instead of uniform can give better performance.
        for (var wR = 0; wR < ${this.convInfo.filterHeight}; wR = wR + 1) {
          let xR = xRCorner + wR;
          if (xR >=0 && xR < uniforms.inDims[0]) {
            for (var i = 0; i < ${o}; i++) {
              xVals[i] = readX(batch, xR, xCCorner + i, d1);
            }
            for (var wC = 0; wC < ${this.convInfo.filterWidth}; wC = wC + 1) {
              let wValue = getW(wR, wC, d1, 0);
              for (var i = 0; i < ${this.workPerThread}; i++) {
                dotProd[i] = fma(xVals[i * ${s} + wC], wValue, dotProd[i]);
              }
            }
          }
        }

        for (var i = 0; i < ${this.workPerThread}; i = i + 1) {
          let coords = vec4<i32>(batch, r, c + i, d1);
          if (coordsInBounds4D(coords, uniforms.outShape)) {
            var value = dotProd[i];
            ${Zr(this.addBias,this.activation)}
            setOutputAtCoords(coords[0], coords[1], coords[2], coords[3], value);
          }
        }
      }
    `}},el=class{constructor(o,i=!1,s=null,_=!1){this.variableNames=["x","W"],this.uniforms=`pads : vec2<i32>, inDims : vec2<i32>, filterHeight : i32,
      filterWidth : i32, strides : vec2<i32>, dilations : vec2<i32>,`,this.workgroupSize=[256,1,1],this.size=!0,this.outputShape=o.outShape,this.dispatchLayout=X$3(this.outputShape),this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize),this.isChannelsLast=o.dataFormat==="channelsLast",i&&this.variableNames.push("bias"),_&&this.variableNames.push("preluActivationWeights"),this.convInfo=o,this.addBias=i,this.activation=s,this.hasPreluActivation=_,this.shaderKey=`depthwise_${this.activation}_${this.isChannelsLast}`}getUserCode(){let o=this.isChannelsLast?"getX(batch, xR, xC, d1);":"getX(batch, d1, xR, xC);";return`
      ${dr(this.activation,this.hasPreluActivation,!1,4)}

      ${G$3("index")} {
        if (index < uniforms.size) {
          let coords = getOutputCoords();
          let batch = coords[0];
          let xRCCorner = vec2<i32>(coords.${this.isChannelsLast?"yz":"zw"}) * uniforms.strides - uniforms.pads;
          let d2 = coords[${this.isChannelsLast?3:1}];
          let channelMul = uniforms.wShape[3];
          let d1 = d2 / channelMul;
          let q = d2 % channelMul;

          let inputRowStart = xRCCorner.x;
          let inputColStart = xRCCorner.y;
          let inputRowEnd = inputRowStart + uniforms.filterHeight *
              uniforms.dilations[0];
          let inputColEnd = inputColStart + uniforms.filterWidth *
              uniforms.dilations[1];

          // Convolve x(?, ?, d1)|x(d1, ?, ?) with w(:, :, d1, q) to get
          // y(yR, yC, d2)|y(d2, yR, yC). ? = to be determined. : = across all
          // values in that axis. x(?, ?, d1) and y(yR, yC, d2) is for NHWC.
          // x(d1, ?, ?) and y(d2, yR, yC) is for NCHW.
          var value = 0.0;

          // Extract if checking out of for loop for performance.
          if (inputRowStart >= 0 && inputColStart >= 0 &&
            inputRowEnd < uniforms.inDims[0] &&
                inputColEnd < uniforms.inDims[1]) {
              for (var wR = 0; wR < uniforms.filterHeight; wR = wR + 1) {
                let xR = inputRowStart + wR * uniforms.dilations[0];

                for (var wC = 0; wC < uniforms.filterWidth; wC = wC + 1) {
                  let xC = inputColStart + wC * uniforms.dilations[1];

                  let xVal = ${o};
                  let wVal = getW(wR, wC, d1, q);
                  value = value + xVal * wVal;
                }
              }
            } else {
              for (var wR = 0; wR < uniforms.filterHeight; wR = wR + 1) {
                let xR = inputRowStart + wR * uniforms.dilations[0];

                if (xR < 0 || xR >= uniforms.inDims[0]) {
                  continue;
                }

                for (var wC = 0; wC < uniforms.filterWidth; wC = wC + 1) {
                  let xC = inputColStart + wC * uniforms.dilations[1];

                  if (xC < 0 || xC >= uniforms.inDims[1]) {
                    continue;
                  }

                  let xVal = ${o};
                  let wVal = getW(wR, wC, d1, q);
                  value = value + xVal * wVal;
                }
              }
            }
            ${Zr(this.addBias,this.activation)}
          setOutputAtCoords(coords[0], coords[1], coords[2], coords[3], value);
        }
      }
    `}};function Gue(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e,filter:ct}=i,{strides:Mt,pad:Ft,dataFormat:Ut,dilations:Xt,dimRoundingMode:Kt}=_,nr=w.convertConv2DDataFormat(Ut),rr=Xt;rr==null&&(rr=[1,1]);let or,hr=w.computeConv2DInfo(_e.shape,ct.shape,Mt,rr,Ft,Kt,!0,nr),fr=[{type:"int32",data:[hr.padInfo.top,hr.padInfo.left]},{type:"int32",data:[hr.inHeight,hr.inWidth]}],yr=hr.dataFormat==="channelsLast";return!yr&&hr.inHeight>16&&hr.inWidth>16&&hr.strideHeight===1&&hr.strideWidth===1&&hr.dilationWidth===1&&hr.dilationHeight===1&&hr.inChannels===hr.outChannels?or=new Ex(hr.outShape,hr.filterHeight,hr.filterWidth):yr&&hr.outHeight>4&&hr.outWidth>4&&hr.strideWidth<=2&&hr.inChannels===hr.outChannels&&hr.dilationHeight===1&&hr.dilationWidth===1&&hr.inChannels%4==0?(or=new Jc(hr),fr.push({type:"int32",data:[or.virtualWidth]})):(or=new el(hr),fr.push({type:"int32",data:[hr.filterHeight]},{type:"int32",data:[hr.filterWidth]},{type:"int32",data:[hr.strideHeight,hr.strideWidth]},{type:"int32",data:[hr.dilationHeight,hr.dilationWidth]})),s.runWebGPUProgram(or,[_e,ct],_e.dtype,fr)}var UV={kernelName:mn,backendName:"webgpu",kernelFunc:Gue},$x=class{constructor(o){this.variableNames=["x","dy"],this.uniforms=`strides : vec2<i32>, pads : vec2<i32>, filterDims : vec2<i32>, outHeight : i32,
      outWidth : i32, inHeight : i32, inWidth : i32, batchSize : i32, channelMul : i32,`,this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=o.filterShape,this.dispatchLayout=X$3(this.outputShape),this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="depthwise_conv2d_backprop_filter"}getUserCode(){return`
      ${G$3("index")} {
      if (index < uniforms.size) {
        let coords = getCoordsFromIndex(index);
        let wR = coords[0];
        let wC = coords[1];
        let d1 = coords[2];
        let dm = coords[3];
        let d2 = d1 * uniforms.channelMul + dm;

        var dotProd = 0.0;
        for (var b = 0; b < uniforms.batchSize; b++) {
          for (var yR = 0; yR < uniforms.outHeight; yR++) {
            let xR = wR + yR * uniforms.strides[0] - uniforms.pads[0];

            if (xR < 0 || xR >= uniforms.inHeight) {
              continue;
            }

            for (var yC = 0; yC < uniforms.outWidth; yC++) {
              let xC = wC + yC * uniforms.strides[1] - uniforms.pads[1];

              if (xC < 0 || xC >= uniforms.inWidth) {
                continue;
              }

              let dyValue = getDy(b, yR, yC, d2);
              let xValue = getX(b, xR, xC, d1);
              dotProd += xValue * dyValue;
            }
          }
        }
        setOutputAtIndex(index, dotProd);
      }
    }
    `}},Rx=class{constructor(o){this.variableNames=["dy","W"],this.uniforms=`strides : vec2<i32>, pads : vec2<i32>, filterDims : vec2<i32>,
       outHeight : i32, outWidth : i32, channelMul : i32,`,this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=o.inShape,this.dispatchLayout=X$3(this.outputShape),this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="depthwise_conv2d_backprop_input"}getUserCode(){return`
      ${G$3("index")} {
      if (index < uniforms.size) {
        let coords = getCoordsFromIndex(index);
        let batch = coords[0];
        let d1 = coords[3];
        let dyCorner = coords.yz - uniforms.pads;
        let dyRCorner = dyCorner.x;
        let dyCCorner = dyCorner.y;

        var dotProd = 0.0;
        for (var wR = 0; wR < uniforms.filterDims[0]; wR++) {
          let dyR = f32(dyRCorner + wR) / f32(uniforms.strides[0]);

          if (dyR < 0.0 || dyR >= f32(uniforms.outHeight) || fract(dyR) > 0.0) {
            continue;
          }

          let idyR = i32(dyR);
          let wRPerm = uniforms.filterDims[0] - 1 - wR;

          for (var wC = 0; wC < uniforms.filterDims[1]; wC++) {
            let dyC = f32(dyCCorner + wC) / f32(uniforms.strides[1]);

            if (dyC < 0.0 || dyC >= f32(uniforms.outWidth) || fract(dyC) > 0.0) {
              continue;
            }

            let idyC = i32(dyC);
            let wCPerm = uniforms.filterDims[1] - 1 - wC;

            for (var dm = 0; dm < uniforms.channelMul; dm++) {
              let d2 = d1 * uniforms.channelMul + dm;
              let xValue = getDy(batch, idyR, idyC, d2);
              let wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutputAtIndex(index, dotProd);
      }
    }
    `}};function Hue(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e,dy:ct}=i,{strides:Mt,dilations:Ft,pad:Ut,dimRoundingMode:Xt,filterShape:Kt}=_,nr=w.computeConv2DInfo(_e.shape,Kt,Mt,Ft,Ut,Xt,!0),rr=new $x(nr),or=[{type:"int32",data:[nr.strideHeight,nr.strideWidth]},{type:"int32",data:[nr.padInfo.top,nr.padInfo.left]},{type:"int32",data:[nr.filterHeight,nr.filterWidth]},{type:"int32",data:[nr.outHeight]},{type:"int32",data:[nr.outWidth]},{type:"int32",data:[nr.inHeight]},{type:"int32",data:[nr.inWidth]},{type:"int32",data:[nr.batchSize]},{type:"int32",data:[nr.outChannels/nr.inChannels]}];return s.runWebGPUProgram(rr,[_e,ct],"float32",or)}var GV={kernelName:Pi,backendName:"webgpu",kernelFunc:Hue};function Kue(o){let{inputs:i,backend:s,attrs:_}=o,{dy:_e,filter:ct}=i,{strides:Mt,dilations:Ft,pad:Ut,dimRoundingMode:Xt,inputShape:Kt}=_,nr=w.computeConv2DInfo(Kt,ct.shape,Mt,Ft,Ut,Xt,!0),rr=new Rx(nr),or=[{type:"int32",data:[nr.strideHeight,nr.strideWidth]},{type:"int32",data:[nr.filterHeight-1-nr.padInfo.top,nr.filterWidth-1-nr.padInfo.left]},{type:"int32",data:[nr.filterHeight,nr.filterWidth]},{type:"int32",data:[nr.outHeight]},{type:"int32",data:[nr.outWidth]},{type:"int32",data:[nr.outChannels/nr.inChannels]}];return s.runWebGPUProgram(rr,[_e,ct],_e.dtype,or)}var HV={kernelName:Oi,backendName:"webgpu",kernelFunc:Kue},Dx=class{constructor(o){this.variableNames=["x"],this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=[o,o],this.dispatchLayout=X$3(this.outputShape),this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="diag"}getUserCode(){return`
      ${G$3("index")} {
        if (index < uniforms.size) {
          let coords = getOutputCoords();
          let value = select(0.0, getX(coords[0]), coords[0] == coords[1]);
          setOutputAtIndex(index, value);
        }
      }
    `}};function que(o){let{inputs:i,backend:s}=o,{x:_}=i,_e=[..._.shape,..._.shape],ct=y.sizeFromShape(_.shape),Mt=pe$1({inputs:{x:_},backend:s,attrs:{shape:[ct]}}),Ft=new Dx(ct),Ut=s.runWebGPUProgram(Ft,[Mt],Mt.dtype),Xt=pe$1({inputs:{x:Ut},backend:s,attrs:{shape:_e}});return s.disposeData(Mt.dataId),s.disposeData(Ut.dataId),Xt}var KV={kernelName:oa,backendName:"webgpu",kernelFunc:que},Ax=class{constructor(o){this.variableNames=["x","w"],this.uniforms="filterDims: vec2<i32>, pads: vec2<i32>, strides: vec2<i32>, dilations: vec2<i32>",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=o.outShape,this.dispatchLayout=X$3(this.outputShape),this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="dilation2d"}getUserCode(){return`
       ${G$3("index")} {
         if (index < uniforms.size) {
           let neg_infinity = -3.4e38;
           let coords = getOutputCoords();
           let batch = coords.x;
           let d1 = coords.w;
           let outTopLeftCorner = coords.yz * uniforms.strides - uniforms.pads;
           let hBeg = outTopLeftCorner.x;
           let wBeg = outTopLeftCorner.y;

           var curVal = neg_infinity;
           for (var h = 0; h < uniforms.filterDims[0]; h = h + 1) {
             let hIn = hBeg + h * uniforms.dilations[0];

             if (hIn >= 0 && hIn < uniforms.xShape[1]) {
               for (var w = 0; w < uniforms.filterDims[1]; w = w + 1) {
                 let wIn = wBeg + w * uniforms.dilations[1];

                 if (wIn >= 0 && wIn < uniforms.xShape[2]) {
                   let val = getX(batch, hIn, wIn, d1) + getW(h, w, d1);
                   if (val > curVal) {
                     curVal = val;
                   }
                 }
               }
             }
           }

           setOutputAtIndex(index, curVal);
         }
       }
     `}};function jue(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e,filter:ct}=i,{strides:Mt,pad:Ft,dilations:Ut}=_,Xt=w.computeDilation2DInfo(_e.shape,ct.shape,Mt,Ft,"NHWC",Ut),Kt=[Xt.padInfo.top,Xt.padInfo.left],nr=[{type:"int32",data:[Xt.filterHeight,Xt.filterWidth]},{type:"int32",data:[...Kt]},{type:"int32",data:[Xt.strideHeight,Xt.strideWidth]},{type:"int32",data:[Xt.dilationHeight,Xt.dilationWidth]}],rr=new Ax(Xt);return s.runWebGPUProgram(rr,[_e,ct],_e.dtype,nr)}var qV={kernelName:dn,backendName:"webgpu",kernelFunc:jue},Fx=class{constructor(o,i){if(this.variableNames=["x","w","dy"],this.uniforms="filterDims: vec2<i32>, pads: vec2<i32>, strides: vec2<i32>, dilations: vec2<i32>, dySize: i32,",this.workgroupSize=[64,1,1],this.atomic=!0,this.outputShape=o.inShape,this.dispatchLayout=X$3(o.outShape),this.dispatch=H$2(this.dispatchLayout,o.outShape,this.workgroupSize),i!=="float32"&&i!=="int32")throw new Error(`Dilation2DBackpropInput only supports float32 and int32
          types, does not support ${i} type.`);this.type=i,this.shaderKey="dilation2DBackpropInput"}getUserCode(){return`
       ${G$3("index")} {
         if (index < uniforms.dySize) {
           let coords = getDyCoordsFromIndex(index);
           let b = coords[0];
           let r = coords[1];
           let c = coords[2];
           let d = coords[3];

           let dyCorner = vec2<i32>(r, c) * uniforms.strides - uniforms.pads;
           var curVal = -3.4e38;  // neg_infinity
           var xRMax = 0;
           var xCMax = 0;

           // In the case of multiple argmax branches, we only back-propagate
           // along the last branch, i.e., the one with largest value of
           // 'wR * uniforms.filterDims[1] + wC', similarly to the max-pooling
           // backward routines.
           for (var wR = 0; wR < uniforms.filterDims[0]; wR++) {
             let xR = dyCorner.x + wR * uniforms.dilations[0];

             if (xR >= 0 && xR < uniforms.xShape[1]) {
               for (var wC = 0; wC < uniforms.filterDims[1]; wC++) {
                 let xC = dyCorner.y + wC * uniforms.dilations[1];

                 if (xC >= 0 && xC < uniforms.xShape[2]) {
                   let val = getX(b, xR, xC, d) + getW(wR, wC, d);
                   if (val > curVal) {
                     curVal = val;
                     xRMax = xR;
                     xCMax = xC;
                   }
                 }
               }
             }
           }

           let flatIndexIn = d + uniforms.xShape[3] *
               (xCMax + uniforms.xShape[2] * (xRMax + uniforms.xShape[1] * b));
           let value = getDy(b, r, c, d);
           ${Qr("&result[flatIndexIn]","value",this.type)}
         }
       }
     `}},Px=class{constructor(o,i,s){if(this.variableNames=["x","w","dy"],this.uniforms="filterDims: vec2<i32>, pads: vec2<i32>, strides: vec2<i32>, dilations: vec2<i32>, dySize: i32,",this.workgroupSize=[64,1,1],this.atomic=!0,this.outputShape=o.filterShape,this.dispatchLayout=X$3(o.outShape),this.dispatch=H$2(this.dispatchLayout,o.outShape,this.workgroupSize),s!=="float32"&&s!=="int32")throw new Error(`Dilation2DBackpropFilter only supports float32 and int32
          types, does not support ${s} type.`);this.type=s,this.shaderKey="dilation2DBackpropFilter"}getUserCode(){return`
       ${G$3("index")} {
         if (index < uniforms.dySize) {
           let coords = getDyCoordsFromIndex(index);
           let b = coords[0];
           let r = coords[1];
           let c = coords[2];
           let d = coords[3];

           let dyCorner = vec2<i32>(r, c) * uniforms.strides - uniforms.pads;
           var curVal = -3.4e38;  // neg_infinity
           var wRMax = 0;
           var wCMax = 0;

           // In the case of multiple argmax branches, we only back-propagate
           // along the last branch, i.e., the one with largest value of
           // 'wR * uniforms.filterDims[1] + wC', similarly to the max-pooling
           // backward routines.
           for (var wR = 0; wR < uniforms.filterDims[0]; wR++) {
             let xR = dyCorner.x + wR * uniforms.dilations[0];

             if (xR >= 0 && xR < uniforms.xShape[1]) {
               for (var wC = 0; wC < uniforms.filterDims[1]; wC++) {
                 let xC = dyCorner.y + wC * uniforms.dilations[1];

                 if (xC >= 0 && xC < uniforms.xShape[2]) {
                   let val = getX(b, xR, xC, d) + getW(wR, wC, d);
                   if (val > curVal) {
                     curVal = val;
                     wRMax = wR;
                     wCMax = wC;
                   }
                 }
               }
             }
           }

           let flatIndexIn = d + uniforms.wShape[2] * (wCMax + wRMax * uniforms.wShape[1]);
           let value = getDy(b, r, c, d);
           ${Qr("&result[flatIndexIn]","value",this.type)}
         }
       }
     `}};function Xue(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e,filter:ct,dy:Mt}=i,{strides:Ft,pad:Ut,dilations:Xt}=_,Kt=w.computeDilation2DInfo(_e.shape,ct.shape,Ft,Ut,"NHWC",Xt),nr=ct.dtype,rr=new Px(Kt,ct.shape,nr),or=[{type:"int32",data:[Kt.filterHeight,Kt.filterWidth]},{type:"int32",data:[Kt.padInfo.top,Kt.padInfo.left]},{type:"int32",data:[Kt.strideHeight,Kt.strideWidth]},{type:"int32",data:[Kt.dilationHeight,Kt.dilationWidth]},{type:"int32",data:[y.sizeFromShape(Kt.outShape)]}],hr=vt$2({backend:s,attrs:{shape:ct.shape,value:0,dtype:nr}});return s.runWebGPUProgram(rr,[_e,ct,Mt],nr,or,hr)}var jV={kernelName:Li,backendName:"webgpu",kernelFunc:Xue};function Yue(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e,filter:ct,dy:Mt}=i,{strides:Ft,pad:Ut,dilations:Xt}=_,Kt=w.computeDilation2DInfo(_e.shape,ct.shape,Ft,Ut,"NHWC",Xt),nr=_e.dtype,rr=new Fx(Kt,nr),or=[{type:"int32",data:[Kt.filterHeight,Kt.filterWidth]},{type:"int32",data:[Kt.padInfo.top,Kt.padInfo.left]},{type:"int32",data:[Kt.strideHeight,Kt.strideWidth]},{type:"int32",data:[Kt.dilationHeight,Kt.dilationWidth]},{type:"int32",data:[y.sizeFromShape(Kt.outShape)]}],hr=vt$2({backend:s,attrs:{shape:Kt.inShape,value:0,dtype:nr}});return s.runWebGPUProgram(rr,[_e,ct,Mt],nr,or,hr)}var XV={kernelName:Mi,backendName:"webgpu",kernelFunc:Yue},Ox=class{constructor(o,i,s){this.variableNames=["Image"],this.uniforms="alpha: f32,",this.workgroupSize=[64,1,1],this.pixelsOpType=wi.DRAW,this.size=!0,this.outputShape=o,this.dispatchLayout=X$3(this.outputShape),this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize),this.type=i,this.textureFormat=s,this.shaderKey=`draw_${i}_${s}`}getUserCode(){let o,i=this.type==="float32"?"value":"value / 255.0";return o=`
      if (uniforms.numChannels == 1) {
        rgba[0] = ${i};
        rgba[1] = ${i};
        rgba[2] = ${i};
      } else {
        rgba[d] = ${i};
      }`,`
       @group(0) @binding(0) var outImage : texture_storage_2d<${this.textureFormat}, write>;
       ${G$3("index")} {
         if (index < uniforms.size) {
           var rgba = vec4<f32>(0.0, 0.0, 0.0, uniforms.alpha);
           for (var d = 0; d < uniforms.numChannels; d = d + 1) {
             let value = f32(inBuf[index * uniforms.numChannels + d]);
             ${o}
           }
           rgba.x = rgba.x * rgba.w;
           rgba.y = rgba.y * rgba.w;
           rgba.z = rgba.z * rgba.w;
           let coords = getCoordsFromIndex(index);
           textureStore(outImage, vec2<i32>(coords.yx), rgba);
         }
       }
      `}};function Que(o){let{inputs:i,backend:s,attrs:_}=o,{image:_e}=i,{canvas:ct,options:Mt}=_,[Ft,Ut]=_e.shape.slice(0,2),{imageOptions:Xt}=Mt||{},Kt=(Xt==null?void 0:Xt.alpha)||1,nr=s.device.features.has("bgra8unorm-storage")?"bgra8unorm":"rgba8unorm",rr=[Ft,Ut],or=new Ox(rr,_e.dtype,nr);ct.width=Ut,ct.height=Ft;let hr,fr="webgpu",yr=ct.getContext(fr);yr||(hr=new OffscreenCanvas(Ut,Ft),yr=hr.getContext(fr));let Lr=_e.shape.length===3?_e.shape[2]:1;yr.configure({device:s.device,format:nr,usage:GPUTextureUsage.STORAGE_BINDING,alphaMode:"premultiplied"});let Br="int32",Vr=s.makeTensorInfo(rr,Br),Wr=s.tensorMap.get(Vr.dataId);Wr.resource=yr.getCurrentTexture(),Wr.external=!0;let ro=[{type:"uint32",data:[Lr]},{type:"float32",data:[Kt]}];if(s.runWebGPUProgram(or,[_e],Br,ro,Vr),hr){let no=ct.getContext("2d");if(!no)throw new Error("Please make sure this canvas has only been used for 2d or webgpu context!");no.drawImage(hr,0,0)}return s.disposeData(Vr.dataId),_e}var YV={kernelName:$u,backendName:"webgpu",kernelFunc:Que},i0=et({opType:fe$1.MUL,cpuKernelImpl:Rz,supportsComplex:!0}),QV={kernelName:Xn,backendName:"webgpu",kernelFunc:i0};function u0(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{axis:ct,keepDims:Mt}=_;return eo(_e,ct,Mt,"sum",s)}var ZV={kernelName:Ss,backendName:"webgpu",kernelFunc:u0};function Zue(o){let{inputs:i,backend:s,attrs:_}=o,{equation:_e}=_,ct=i,{allDims:Mt,summedDims:Ft,idDims:Ut}=w.decodeEinsumEquation(_e,ct.length);w.checkEinsumDimSizes(Mt.length,Ut,ct);let{path:Xt,steps:Kt}=w.getEinsumComputePath(Ft,Ut),nr=Kt.length,rr=null,or=Mt.length,hr=[];for(let fr=0;fr<nr;++fr){for(let yr of Kt[fr]){let Lr,{permutationIndices:Br,expandDims:Vr}=w.getEinsumPermutation(or,Ut[yr]);w.isIdentityPermutation(Br)?Lr=ct[yr]:(Lr=xr({inputs:{x:ct[yr]},backend:s,attrs:{perm:Br}}),hr.push(Lr));let Wr=Lr.shape.slice();for(let ro=0;ro<Vr.length;++ro)Wr.splice(Vr[ro],0,1);y.arraysEqual(Lr.shape,Wr)||(Lr=pe$1({inputs:{x:Lr},backend:s,attrs:{shape:Wr}}),hr.push(Lr)),rr===null?rr=Lr:(rr=i0({inputs:{a:Lr,b:rr},backend:s}),hr.push(rr))}fr<nr-1&&(Xt[fr]>=0&&(rr=u0({inputs:{x:rr},backend:s,attrs:{axis:Xt[fr]-(Mt.length-or),keepDims:!1}}),hr.push(rr)),or--)}for(let fr of hr)fr!==rr&&s.disposeData(fr.dataId);return rr}var JV={kernelName:Bi,backendName:"webgpu",kernelFunc:Zue},Jue=ye$1({opType:Z$1.ELU}),eW={kernelName:hn,backendName:"webgpu",kernelFunc:Jue},epe=o=>{let{inputs:i,backend:s}=o,{dy:_,y:_e}=i,ct=new Ii(fe$1.ELU_DER,_.shape,_e.shape);return s.runWebGPUProgram(ct,[_,_e],_.dtype)},tW={kernelName:Xa,backendName:"webgpu",kernelFunc:epe},tpe=et({opType:fe$1.EQUAL,dtype:"bool",cpuKernelImpl:gz}),rW={kernelName:xn,backendName:"webgpu",kernelFunc:tpe},rpe=ye$1({opType:Z$1.ERF}),oW={kernelName:gn,backendName:"webgpu",kernelFunc:rpe},ope=ye$1({opType:Z$1.EXP,cpuKernelImpl:xz,dtype:"float32"}),nW={kernelName:yn,backendName:"webgpu",kernelFunc:ope};function Mx(o){let{inputs:i,attrs:s,backend:_}=o,{dim:_e}=s,{input:ct}=i,Mt=ct.shape.length,Ft=ct.shape.slice(),Ut=_e;return _e<0&&(y.assert(-(Mt+1)<=_e,()=>`Axis must be in the interval [${-(Mt+1)}, ${Mt}]`),Ut=Mt+_e+1),Ft.splice(Ut,0,1),pe$1({inputs:{x:ct},backend:_,attrs:{shape:Ft}})}var sW={kernelName:na,backendName:"webgpu",kernelFunc:Mx},npe=ye$1({opType:Z$1.EXPM1,cpuKernelImpl:yz}),aW={kernelName:bn,backendName:"webgpu",kernelFunc:npe},ym=class{constructor(o,i){this.variableNames=["real","imag"],this.outputShape=[],this.uniforms="exponentMultiplier : f32, denominator: f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=i,this.dispatchLayout=X$3(this.outputShape),this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize),this.component=o,this.shaderKey=`fft_${o}`}getUserCode(){return`
    fn unaryOpComplex(real: f32, expR: f32, imag: f32, expI: f32) -> f32 {
      ${this.component==="real"?"return real * expR - imag * expI;":"return real * expI + imag * expR;"}
    }

    fn mulMatDFT(batch: i32, index: i32) -> f32 {
      let indexRatio = f32(index) / f32(uniforms.realShape[1]);
      let exponentMultiplierTimesIndexRatio =
          uniforms.exponentMultiplier * indexRatio;

      var result = 0.0;

      for (var i = 0; i < uniforms.realShape[1]; i = i + 1) {
        // x = (-2|2 * PI / N) * index * i;
        let x = exponentMultiplierTimesIndexRatio * f32(i);
        let expR = cos(x);
        let expI = sin(x);
        let real = getReal(batch, i);
        let imag = getImag(batch, i);

        result = result +
            unaryOpComplex(real, expR, imag, expI) / uniforms.denominator;
      }

      return result;
    }

    ${G$3("index")} {
      if (index < uniforms.size) {
        let coords = getOutputCoords();
        setOutputAtIndex(index, mulMatDFT(coords[0], coords[1]));
      }
    }
  `}};function Lx(o,i,s){let _=s.tensorMap.get(o.dataId),_e=y.sizeFromShape(o.shape),ct=o.shape[o.shape.length-1],Mt=[],Ft=pe$1({inputs:{x:o},backend:s,attrs:{shape:[_e/ct,ct]}});Mt.push(Ft);let Ut=Ft.shape,Xt=new ym("real",Ut),Kt=new ym("imag",Ut),nr=[{dataId:_.complexTensorInfos.real.dataId,dtype:_.complexTensorInfos.real.dtype,shape:Ut},{dataId:_.complexTensorInfos.imag.dataId,dtype:_.complexTensorInfos.imag.dtype,shape:Ut}],rr=[{type:"float32",data:[i?2*Math.PI:-2*Math.PI]},{type:"float32",data:[i?Ut[1]:1]}],or=s.runWebGPUProgram(Xt,nr,"float32",rr);Mt.push(or);let hr=s.runWebGPUProgram(Kt,nr,"float32",rr);Mt.push(hr);let fr=xo({inputs:{real:or,imag:hr},backend:s});Mt.push(fr);let yr=pe$1({inputs:{x:fr},backend:s,attrs:{shape:o.shape}});return Mt.forEach(Lr=>s.disposeData(Lr.dataId)),yr}function spe(o){let{inputs:i,backend:s}=o,{input:_}=i;return Lx(_,!1,s)}var iW={kernelName:zi,backendName:"webgpu",kernelFunc:spe},Bx=class{constructor(o){this.outputShape=[],this.variableNames=["x"],this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=o,this.dispatchLayout=X$3(this.outputShape),this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="flipLeftRight"}getUserCode(){return`
      ${G$3("index")} {
        if (index < uniforms.size) {
          let coords = getCoordsFromIndex(index);
          let coordX = uniforms.xShape[2] - coords[2] - 1;
          let outputValue = getX(coords[0], coords[1], coordX, coords[3]);
          setOutputAtIndex(index, outputValue);
        }
      }
    `}},uW={kernelName:Cn,backendName:"webgpu",kernelFunc:({inputs:o,backend:i})=>{let{image:s}=o,_=i,_e=new Bx(s.shape);return _.runWebGPUProgram(_e,[s],s.dtype)}},ape=ye$1({opType:Z$1.FLOOR,cpuKernelImpl:bz}),pW={kernelName:wn,backendName:"webgpu",kernelFunc:ape},ipe=et({opType:fe$1.FLOOR_DIV,cpuKernelImpl:Cz,dtype:"int32"}),cW={kernelName:Sn,backendName:"webgpu",kernelFunc:ipe},zx=class{constructor(o,i,s=!1){this.pixelsOpType=wi.FROM_PIXELS,this.outputShape=[0],this.variableNames=[],this.workgroupSize=[256,1,1],this.outputShape=o,this.dispatchLayout=X$3(this.outputShape),this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize,[i,1,1]),this.importVideo=s,this.shaderKey=`fromPixels_${this.importVideo}`}getUserCode(){let o=this.importVideo?"textureLoad(src, vec2<i32>(coords.yx));":"textureLoad(src, vec2<i32>(coords.yx), 0)";return`
      @binding(1) @group(0) var src: ${this.importVideo?"texture_external":"texture_2d<f32>"};
      ${G$3("index")} {
        let flatIndex = index * uniforms.numChannels;
        if (flatIndex < uniforms.size) {
          let coords = getCoordsFromIndex(flatIndex);
          let values = ${o};
          for (var i = 0; i < uniforms.numChannels; i = i + 1) {
            result[flatIndex + i] = i32(floor(255.0 * values[i]));
          }
        }
      }
  `}},lW={kernelName:Du,backendName:"webgpu",kernelFunc:upe},tl,p0=A().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function upe(o){let{inputs:i,backend:s,attrs:_}=o,{pixels:_e}=i,{numChannels:ct}=_;if(_e==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let Mt=typeof HTMLVideoElement<"u"&&_e instanceof HTMLVideoElement,Ft=typeof HTMLImageElement<"u"&&_e instanceof HTMLImageElement,Ut=typeof HTMLCanvasElement<"u"&&_e instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&_e instanceof OffscreenCanvas,Xt=typeof ImageBitmap<"u"&&_e instanceof ImageBitmap,[Kt,nr]=Mt?[_e.videoWidth,_e.videoHeight]:[_e.width,_e.height],rr=[nr,Kt,ct],or=A().getBool("WEBGPU_IMPORT_EXTERNAL_TEXTURE")&&Mt,hr=Mt||Ft;if(Xt||Ut||hr){let Br;if(or)Br=s.device.importExternalTexture({source:_e});else{if(hr){let No=A().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(tl==null||No!==p0)&&(p0=No,tl=document.createElement("canvas").getContext("2d",{willReadFrequently:p0})),tl.canvas.width=Kt,tl.canvas.height=nr,tl.drawImage(_e,0,0,Kt,nr),_e=tl.canvas}let To=GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING,oo=s.textureManager.acquireTexture(rr[1],rr[0],"rgba8unorm",To);s.queue.copyExternalImageToTexture({source:_e},{texture:oo},[rr[1],rr[0]]),Br=oo}let Vr=y.sizeFromShape(rr),Wr=y.computeStrides(rr),ro=new zx(rr,ct,or),no=[{type:"uint32",data:[Vr]},{type:"uint32",data:[ct]},{type:"uint32",data:[...Wr]}],so=s.makeTensorInfo([nr,Kt],"int32");s.tensorMap.get(so.dataId).resource=Br;let ko=s.runWebGPUProgram(ro,[so],"int32",no);return s.disposeData(so.dataId),ko}let fr=_e.data,yr=fr;if(ct!=null&&ct!==4){yr=new Uint8Array(_e.width*_e.height*ct);let Br=fr.length,Vr=0;for(let Wr=0;Wr<Br;Wr++)Wr%4<ct&&(yr[Vr++]=fr[Wr])}let Lr=s.makeTensorInfo(rr,"int32",new Int32Array(yr));return s.uploadToGPU(Lr.dataId),Lr}var Vx=class{constructor(o,i,s,_,_e){this.uniforms="varianceEpsilon : f32,",this.workgroupSize=[128,1,1],this.size=!0,this.variableNames=["x","mean","variance"],w.assertAndGetBroadcastShape(o,i),w.assertAndGetBroadcastShape(o,s),this.outputShape=o,this.dispatchLayout=X$3(this.outputShape),this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize),_!=null&&(w.assertAndGetBroadcastShape(o,_),this.variableNames.push("offset")),_e!=null&&(w.assertAndGetBroadcastShape(o,_e),this.variableNames.push("scale")),this.offsetShape=_,this.scaleShape=_e,this.shaderKey="batchNorm"}getUserCode(){let o="0.0";this.offsetShape!=null&&(o="getOffsetByOutputIndex(index)");let i="1.0";return this.scaleShape!=null&&(i="getScaleByOutputIndex(index)"),`
      ${G$3("index")} {
        if (index < uniforms.size)
        {
          let xValue = getXByOutputIndex(index);
          let meanValue = getMeanByOutputIndex(index);
          let varianValue = getVarianceByOutputIndex(index);
          let offsetValue = ${o};
          let scaleValue = ${i};
          let inv = scaleValue * inverseSqrt(varianValue + f32(uniforms.varianceEpsilon));
          setOutputAtIndex(index,dot(vec3<f32>(xValue, -meanValue, offsetValue), vec3<f32>(inv, inv, 1.0)));
        }
      }
  `}},mW={kernelName:In,backendName:"webgpu",kernelFunc:({inputs:o,attrs:i,backend:s})=>{let{x:_,scale:_e,offset:ct,mean:Mt,variance:Ft}=o,{varianceEpsilon:Ut}=i,Xt=s,Kt=[_,Mt,Ft],nr=null;ct!=null&&(nr=ct.shape,Kt.push(ct));let rr=null;_e!=null&&(rr=_e.shape,Kt.push(_e));let or=new Vx(_.shape,Mt.shape,Ft.shape,nr,rr),hr=[{type:"float32",data:[Ut]}];return Xt.runWebGPUProgram(or,Kt,_.dtype,hr)}};function ppe(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e,filter:ct,bias:Mt,preluActivationWeights:Ft}=i,{strides:Ut,pad:Xt,dataFormat:Kt,dilations:nr,dimRoundingMode:rr,activation:or,leakyreluAlpha:hr}=_,fr=w.convertConv2DDataFormat(Kt);return bx({x:_e,filter:ct,convInfo:w.computeConv2DInfo(_e.shape,ct.shape,Ut,nr,Xt,rr,!1,fr),backend:s,bias:Mt,preluActivationWeights:Ft,leakyreluAlpha:hr,activation:or})}var dW={kernelName:Io,backendName:"webgpu",kernelFunc:ppe};function cpe(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e,filter:ct,bias:Mt,preluActivationWeights:Ft}=i,{strides:Ut,pad:Xt,dilations:Kt,dimRoundingMode:nr,activation:rr,leakyreluAlpha:or}=_,hr=Kt;hr==null&&(hr=[1,1]),y.assert(w.eitherStridesOrDilationsAreOne(Ut,hr),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${Ut} and dilations '${hr}'`);let fr=w.computeConv2DInfo(_e.shape,ct.shape,Ut,hr,Xt,nr,!0),yr=[_e,ct],Lr=Mt!=null,Br=Ft!=null;Lr&&yr.push(Mt),Br&&yr.push(Ft);let Vr,Wr=[{type:"int32",data:[fr.padInfo.top,fr.padInfo.left]},{type:"int32",data:[fr.inHeight,fr.inWidth]}];return fr.outHeight>4&&fr.outWidth>4&&fr.strideWidth<=2&&fr.inChannels===fr.outChannels&&fr.dilationHeight===1&&fr.dilationWidth===1&&fr.inChannels%4==0?(Vr=new Jc(fr,Lr,rr,Br),Wr.push({type:"int32",data:[Vr.virtualWidth]})):(Vr=new el(fr,Lr,rr,Br),Wr.push({type:"int32",data:[fr.filterHeight]},{type:"int32",data:[fr.filterWidth]},{type:"int32",data:[fr.strideHeight,fr.strideWidth]},{type:"int32",data:[fr.dilationHeight,fr.dilationWidth]})),rr==="leakyrelu"&&(Wr.push({type:"float32",data:[or]}),Vr.uniforms+=" alpha : f32,"),s.runWebGPUProgram(Vr,yr,"float32",Wr)}var fW={kernelName:vo,backendName:"webgpu",kernelFunc:cpe},Wx=class{constructor(o,i){this.variableNames=["A","indices"],this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=i,this.dispatchLayout=X$3(this.outputShape),this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey=`gathernd_${o}`,this.sliceDim=o,this.uniforms=`sliceDim : i32, strides : ${ft(o)},`}getUserCode(){let o;return o=this.sliceDim>1?"uniforms.strides[j]":"uniforms.strides",`
      ${G$3("index")} {
        if (index < uniforms.size) {
          let coords = getCoordsFromIndex(index);
          var flattenIndex = 0;
          for (var j = 0; j < uniforms.sliceDim; j = j + 1) {
            let indexTemp = i32(round(getIndices(coords[0], j)));
            let strideNum = ${o};
            flattenIndex = flattenIndex + indexTemp * strideNum;
          }

          setOutputAtIndex(index, getA(flattenIndex, coords[1]));
        }
      }
      `}};function lpe(o){let{inputs:i,backend:s}=o,{params:_,indices:_e}=i,ct=_e.shape,Mt=ct[ct.length-1],Ft=y.sizeFromShape(_.shape),[Ut,Xt,Kt,nr]=w.prepareAndValidate(_,_e),rr=pe$1({inputs:{x:_e},backend:s,attrs:{shape:[Xt,Mt]}}),or=pe$1({inputs:{x:_},backend:s,attrs:{shape:[y.sizeFromShape(_.shape)/Kt,Kt]}});if(s.shouldExecuteOnCPU([_,_e])||_.dtype==="string"){let Br=s.readSync(_e.dataId),Vr=s.bufferSync(_),Wr=wz(Br,Vr,_.dtype,Xt,Mt,Kt,nr,_.shape,Ft);return s.makeTensorInfo(Ut,_.dtype,Wr.values)}let hr=new Wx(Mt,[Xt,Kt]),fr=[{type:"int32",data:[Mt]},{type:"int32",data:nr}],yr=s.runWebGPUProgram(hr,[or,rr],or.dtype,fr),Lr=pe$1({inputs:{x:yr},backend:s,attrs:{shape:Ut}});return s.disposeData(rr.dataId),s.disposeData(or.dataId),s.disposeData(yr.dataId),Lr}var hW={kernelName:vn,backendName:"webgpu",kernelFunc:lpe},Ux=class{constructor(o,i){this.variableNames=["A","indices"],this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=o.slice(),this.aShape=o,this.outputShape=i,this.dispatchLayout=X$3(this.outputShape),this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="gather"}getUserCode(){let o=mpe(this.aShape);return`
      ${G$3("index")} {
        if (index < uniforms.size) {
          let resRC = getCoordsFromIndex(index);
          let indexZ = i32(getIndices(resRC.x, resRC.z));
          let inBounds = select(0.0, 1.0, indexZ >= 0 && indexZ < uniforms.aShape[2]);
          setOutputAtIndex(index, inBounds * getA(${o}));
        }
      }
    `}};function mpe(o){let i=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[];for(let _=0;_<o.length;_++)_===2?s.push("indexZ"):s.push(`${i[_]}`);return s.join()}function c0(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e,indices:ct}=i,{axis:Mt,batchDims:Ft}=_,Ut=y.parseAxisParam(Mt,_e.shape)[0],Xt=w.segment_util.collectGatherOpShapeInfo(_e,ct,Ut,Ft),Kt=y.sizeFromShape(ct.shape),nr=[],rr=pe$1({inputs:{x:_e},backend:s,attrs:{shape:[Xt.batchSize,Xt.outerSize,Xt.dimSize,Xt.sliceSize]}}),or=pe$1({inputs:{x:ct},backend:s,attrs:{shape:[Xt.batchSize,Kt/Xt.batchSize]}});nr.push(rr),nr.push(or);let hr=[Xt.batchSize,Xt.outerSize,Kt/Xt.batchSize,Xt.sliceSize];if(s.shouldExecuteOnCPU([_e,ct])){let Br=s.tensorMap.get(or.dataId).values,Vr=me$1(or.shape,or.dtype,Br),Wr=s.tensorMap.get(rr.dataId).values,ro=me$1(rr.shape,rr.dtype,Wr),no=Sz(ro,Vr,hr);return nr.forEach(so=>s.disposeData(so.dataId)),s.makeTensorInfo(Xt.outputShape,no.dtype,no.values)}let fr=new Ux(rr.shape,hr),yr=s.runWebGPUProgram(fr,[rr,or],rr.dtype);nr.push(yr);let Lr=pe$1({inputs:{x:yr},backend:s,attrs:{shape:Xt.outputShape}});return nr.forEach(Br=>s.disposeData(Br.dataId)),Lr}var gW={kernelName:aa,backendName:"webgpu",kernelFunc:c0},dpe=et({opType:fe$1.GREATER,cpuKernelImpl:vz,dtype:"bool"}),xW={kernelName:kn,backendName:"webgpu",kernelFunc:dpe},fpe=et({opType:fe$1.GREATER_EQUAL,dtype:"bool",cpuKernelImpl:Iz}),yW={kernelName:Nn,backendName:"webgpu",kernelFunc:fpe};function hpe(o){let{inputs:i,backend:s}=o,{input:_}=i;return Lx(_,!0,s)}var bW={kernelName:Vi,backendName:"webgpu",kernelFunc:hpe},gpe=ye$1({opType:Z$1.IS_FINITE,dtype:"bool"}),CW={kernelName:Tn,backendName:"webgpu",kernelFunc:gpe},xpe=ye$1({opType:Z$1.IS_INF,dtype:"bool"}),wW={kernelName:_n,backendName:"webgpu",kernelFunc:xpe},ype=ye$1({opType:Z$1.IS_NAN,dtype:"bool"}),SW={kernelName:En,backendName:"webgpu",kernelFunc:ype};function bpe(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{alpha:ct}=_,Mt=[{type:"float32",data:[ct]}],Ft=new Jr(_e.shape,Z$1.LEAKYRELU,"alpha : f32,");return s.runWebGPUProgram(Ft,[_e],"float32",Mt)}var IW={kernelName:$n,backendName:"webgpu",kernelFunc:bpe},Cpe=et({opType:fe$1.LESS,dtype:"bool",cpuKernelImpl:Nz}),vW={kernelName:Rn,backendName:"webgpu",kernelFunc:Cpe},wpe=et({opType:fe$1.LESS_EQUAL,dtype:"bool",cpuKernelImpl:kz}),kW={kernelName:Dn,backendName:"webgpu",kernelFunc:wpe},Gx=class{constructor(o){this.variableNames=[],this.outputShape=[],this.uniforms="start : f32, step : f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=[o],this.dispatchLayout=X$3(this.outputShape),this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="linSpace"}getUserCode(){return`
      ${G$3("index")} {
        if (index < uniforms.size) {
          setOutputAtIndex(index, uniforms.start + f32(index) * uniforms.step);
        }
      }
    `}};function Spe(o){let{backend:i,attrs:s}=o,{start:_,stop:_e,num:ct}=s,Mt=(_e-_)/(ct-1),Ft=new Gx(ct),Ut=[{type:"float32",data:[_]},{type:"float32",data:[Mt]}];return i.runWebGPUProgram(Ft,[],"float32",Ut)}var NW={kernelName:An,backendName:"webgpu",kernelFunc:Spe},Ipe=ye$1({opType:Z$1.LOG,cpuKernelImpl:Tz}),TW={kernelName:Fn,backendName:"webgpu",kernelFunc:Ipe},vpe=ye$1({opType:Z$1.LOG1P}),_W={kernelName:Pn,backendName:"webgpu",kernelFunc:vpe},kpe=et({opType:fe$1.LOGICAL_AND,dtype:"bool"}),EW={kernelName:On,backendName:"webgpu",kernelFunc:kpe},Npe=ye$1({opType:Z$1.LOGICAL_NOT}),$W={kernelName:Mn,backendName:"webgpu",kernelFunc:Npe},Tpe=et({opType:fe$1.LOGICAL_OR}),RW={kernelName:Ln,backendName:"webgpu",kernelFunc:Tpe},DW=`
  var powValue = 0.0;
  let basis = uniforms.bias + uniforms.alpha * sum;
  if (uniforms.beta == 0.5) {
    powValue = inverseSqrt(basis);
  } else if (uniforms.beta == 1.0) {
    powValue = 1.0 / basis;
  } else {
    powValue = exp(log(basis) * (-uniforms.beta));
  }
`,Hx=class{constructor(o){this.outputShape=[],this.variableNames=["x"],this.uniforms="radius : i32, bias : f32, alpha : f32, beta : f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=o,this.dispatchLayout=X$3(this.outputShape),this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="lrn"}getUserCode(){return`
    ${G$3("index")} {
      if (index < uniforms.size) {
        let coords = getOutputCoords();
        let b = coords[0];
        let r = coords[1];
        let c = coords[2];
        let d = coords[3];

        let x = getX(b, r, c, d);
        var sum = 0.0;
        for (var i = -uniforms.radius; i <= uniforms.radius; i = i + 1) {
          let idx = d + i;
          if (idx >= 0 && idx < uniforms.xShape[3]) {
            let z = getX(b, r, c, idx);
            sum = sum + z * z;
          }
        }
        ${DW}

        setOutputAtIndex(index, x * powValue);
      }
    }
  `}},Kx=class{constructor(o,i){this.outputShape=[],this.variableNames=["x"],this.uniforms="radius : i32, bias : f32, alpha : f32, beta : f32,",this.workgroupSize=[256,1,1],this.maxAllowRadius=16,y.assert(i<=this.maxAllowRadius,()=>`Radius must be less than or equal to ${this.maxAllowRadius}, current radius is ${i}`),this.outputShape=o,this.elementsPerWorkgroup=this.workgroupSize[0]-2*this.maxAllowRadius,this.dispatchLayout={x:[3],y:[2],z:[0,1]},this.dispatch=H$2(this.dispatchLayout,this.outputShape,[this.elementsPerWorkgroup,this.workgroupSize[1],this.workgroupSize[2]]),this.shaderKey="lrn_shared"}getUserCode(){return`
    var <workgroup>lrnSub: array<f32, ${this.workgroupSize[0]}>;
    const elementsPerWorkgroup = ${this.elementsPerWorkgroup};
    const maxAllowRadius = ${this.maxAllowRadius};

    ${G$3()} {
      let localDepth = i32(localId.x);
      let workgroupDepth = i32(workgroupId.x) * elementsPerWorkgroup;
      let xDepth = workgroupDepth + localDepth - maxAllowRadius;
      let b = i32(globalId.z) / uniforms.xShape[1];
      let r = i32(globalId.z) - b * uniforms.xShape[1];
      let c = i32(globalId.y);
      let d = workgroupDepth + localDepth;

      var x = 0.0;
      if (xDepth >= 0 && xDepth < uniforms.xShape[3]) {
        x = getX(b, r, c, xDepth);
      }
      lrnSub[localDepth] = x;
      workgroupBarrier();

      if (localDepth < elementsPerWorkgroup && d < uniforms.outShape[3]) {
        var sum = 0.0;
        let index = localDepth + maxAllowRadius;
        for (var i = -uniforms.radius; i <= uniforms.radius; i = i + 1) {
          let z = lrnSub[index + i];
          sum = sum + z * z;
        }
        ${DW}

        setOutputAtCoords(b, r, c, d, lrnSub[index] * powValue);
      }
    } `}};function _pe(o){let i,{inputs:s,backend:_,attrs:_e}=o,{x:ct}=s,{depthRadius:Mt,bias:Ft,alpha:Ut,beta:Xt}=_e;i=Mt>16?new Hx(ct.shape):new Kx(ct.shape,Mt);let Kt=[{type:"int32",data:[Mt]},{type:"float32",data:[Ft]},{type:"float32",data:[Ut]},{type:"float32",data:[Xt]}];return _.runWebGPUProgram(i,[ct],ct.dtype,Kt)}var AW={kernelName:Bn,backendName:"webgpu",kernelFunc:_pe},qx=class{constructor(o){this.outputShape=[],this.variableNames=["inputImage","outputImage","dy"],this.uniforms="depthRadius : i32, bias : f32, alpha : f32, beta : f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=o,this.dispatchLayout=X$3(this.outputShape),this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="lrn_grad"}getUserCode(){return`
    ${G$3("index")} {
      if (index < uniforms.size) {
        let coords = getOutputCoords();
        let b = coords[0];
        let r = coords[1];
        let c = coords[2];

        let MIN_DEPTH_BEGIN = 0;
        let MAX_DEPTH_END = uniforms.outShape[3];
        var result = 0.0;
        for (var d = MIN_DEPTH_BEGIN; d < MAX_DEPTH_END; d++) {
          let depthBegin = max(MIN_DEPTH_BEGIN, d - uniforms.depthRadius);
          let depthEnd = min(MAX_DEPTH_END, d + uniforms.depthRadius + 1);

          var norm = 0.0;
          for (var k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; k++) {
            if (k < depthBegin) {
              continue;
            } else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            } else {
              break;
            }
          }

          norm = uniforms.alpha * norm + uniforms.bias;

          for (var k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; k++) {
            if (k < depthBegin) {
              continue;
            } else if (k >= depthBegin && k < depthEnd) {
              var dyi = -2.0 * uniforms.alpha * uniforms.beta
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d) / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * uniforms.beta);
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            } else {
              break;
            }
          }
        }

        setOutputAtIndex(index, result);
      }
    }
  `}};function Epe(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e,y:ct,dy:Mt}=i,{depthRadius:Ft,bias:Ut,alpha:Xt,beta:Kt}=_,nr=new qx(_e.shape),rr=[{type:"int32",data:[Ft]},{type:"float32",data:[Ut]},{type:"float32",data:[Xt]},{type:"float32",data:[Kt]}];return s.runWebGPUProgram(nr,[_e,ct,Mt],_e.dtype,rr)}var FW={kernelName:Ya,backendName:"webgpu",kernelFunc:Epe},$pe=et({opType:fe$1.MAX,cpuKernelImpl:Ez}),PW={kernelName:Vn,backendName:"webgpu",kernelFunc:$pe};function Rpe(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{filterSize:ct,strides:Mt,pad:Ft,dimRoundingMode:Ut}=_;return ax(_e,w.computePool2DInfo(_e.shape,ct,Mt,1,Ft,Ut),"max",s)}var OW={kernelName:Wn,backendName:"webgpu",kernelFunc:Rpe};function Dpe(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{filterSize:ct,strides:Mt,pad:Ft,dataFormat:Ut,dimRoundingMode:Xt}=_,Kt=w.computePool3DInfo(_e.shape,ct,Mt,[1,1,1],Ft,Xt,Ut),nr=new Iu(Kt,"max"),rr=[{type:"int32",data:[Kt.strideDepth,Kt.strideHeight,Kt.strideWidth]},{type:"int32",data:[Kt.padInfo.front,Kt.padInfo.top,Kt.padInfo.left]},{type:"int32",data:[Kt.inDepth,Kt.inHeight,Kt.inWidth]},{type:"int32",data:[Kt.effectiveFilterDepth,Kt.effectiveFilterHeight,Kt.effectiveFilterWidth]}];return s.runWebGPUProgram(nr,[_e],_e.dtype,rr)}var MW={kernelName:ia,backendName:"webgpu",kernelFunc:Dpe},jx=class{constructor(o){this.variableNames=["dy","maxPos"],this.uniforms=`strides : vec2<i32>, pads : vec2<i32>, dilations : vec2<i32>, filterDims : vec2<i32>,
       outHeight : i32, outWidth : i32`,this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=o.inShape,this.dispatchLayout=X$3(this.outputShape),this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="maxPool2DBackprop"}getUserCode(){return`
      ${G$3("index")} {
      if (index < uniforms.size) {
        let coords = getCoordsFromIndex(index);
        let batch = coords[0];
        let d = coords[3];

        let dyRCCorner = vec2<i32>(coords.yz) - uniforms.pads;
        let dyRCorner = dyRCCorner.x;
        let dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        var dotProd = 0.0;
        let lastIndex = uniforms.filterDims[0] * uniforms.filterDims[1] - 1;
        for (var wR = 0; wR < uniforms.filterDims[0]; wR += uniforms.dilations[0]) {
          let dyR = f32(dyRCorner + wR) / f32(uniforms.strides[0]);

          if (dyR < 0.0 || dyR >= f32(uniforms.outHeight) || fract(dyR) > 0.0) {
            continue;
          }
          let idyR = i32(dyR);

          for (var wC = 0; wC < uniforms.filterDims[1]; wC += uniforms.dilations[1]) {
            let dyC = f32(dyCCorner + wC) / f32(uniforms.strides[1]);

            if (dyC < 0.0 || dyC >= f32(uniforms.outWidth) || fract(dyC) > 0.0) {
              continue;
            }
            let idyC = i32(dyC);

            let dyValue = getDy(batch, idyR, idyC, d);
            let maxPosValue = lastIndex - i32(getMaxPos(batch, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            let curPosValue = wR * uniforms.filterDims[1] + wC;
            let mask = select(0.0, 1.0, maxPosValue == curPosValue);
            dotProd += dyValue * mask;
          }
        }
        setOutputAtIndex(index, dotProd);
      }
    }
    `}},Xx=class{constructor(o){this.variableNames=["dy","maxPos"],this.uniforms=`strides : vec3<i32>, pads : vec3<i32>, filterDims : vec3<i32>,
      outDepth : i32, outHeight : i32, outWidth : i32`,this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=o.inShape,this.dispatchLayout=X$3(this.outputShape),this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="maxPool3DBackprop"}getUserCode(){return`
      ${G$3("index")} {
      if (index < uniforms.size) {
        let coords = getCoordsFromIndex(index);
        let batch = coords.x;
        let ch = coords.u;

        let dyCorner = vec3<i32>(coords.y, coords.z, coords.w) - uniforms.pads;
        let dyDCorner = dyCorner.x;
        let dyRCorner = dyCorner.y;
        let dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        var dotProd = 0.0;
        let lastIndex = uniforms.filterDims[0] * uniforms.filterDims[1] * uniforms.filterDims[2] - 1;

        for (var wD = 0; wD < uniforms.filterDims[0]; wD++) {
          let dyD = f32(dyDCorner + wD) / f32(uniforms.strides[0]);

          if (dyD < 0.0 || dyD >= f32(uniforms.outDepth) || fract(dyD) > 0.0) {
            continue;
          }
          let idyD = i32(dyD);

          for (var wR = 0; wR < uniforms.filterDims[1]; wR++) {
            let dyR = f32(dyRCorner + wR) / f32(uniforms.strides[1]);

            if (dyR < 0.0 || dyR >= f32(uniforms.outHeight) || fract(dyR) > 0.0) {
              continue;
            }
            let idyR = i32(dyR);

            for (var wC = 0; wC < uniforms.filterDims[2]; wC++) {
              let dyC = f32(dyCCorner + wC) / f32(uniforms.strides[2]);

              if (dyC < 0.0 || dyC >= f32(uniforms.outWidth) || fract(dyC) > 0.0) {
                continue;
              }
              let idyC = i32(dyC);

              let dyValue = getDy(batch, idyD, idyR, idyC, ch);
              let maxPosValue = lastIndex - i32(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              let curPosValue = wD * uniforms.filterDims[1] * uniforms.filterDims[2] + wR * uniforms.filterDims[2] + wC;
              let mask = select(0.0, 1.0, maxPosValue == curPosValue);
              dotProd += dyValue * mask;
            }
          }
        }

        setOutputAtIndex(index, dotProd);
      }
    }
    `}};function Ape(o){let{inputs:i,backend:s,attrs:_}=o,{dy:_e,input:ct}=i,Mt=ct,{filterSize:Ft,strides:Ut,pad:Xt,dimRoundingMode:Kt}=_,nr=w.computePool3DInfo(Mt.shape,Ft,Ut,[1,1,1],Xt,Kt),rr=new Iu(nr,"max",!0),or=[{type:"int32",data:[nr.strideDepth,nr.strideHeight,nr.strideWidth]},{type:"int32",data:[nr.padInfo.front,nr.padInfo.top,nr.padInfo.left]},{type:"int32",data:[nr.inDepth,nr.inHeight,nr.inWidth]},{type:"int32",data:[nr.effectiveFilterDepth,nr.effectiveFilterHeight,nr.effectiveFilterWidth]}],hr=s.runWebGPUProgram(rr,[Mt],"int32",or),fr=new Xx(nr);or=[{type:"int32",data:[nr.strideDepth,nr.strideHeight,nr.strideWidth]},{type:"int32",data:[nr.effectiveFilterDepth-1-nr.padInfo.front,nr.effectiveFilterHeight-1-nr.padInfo.top,nr.effectiveFilterWidth-1-nr.padInfo.left]},{type:"int32",data:[nr.effectiveFilterDepth,nr.effectiveFilterHeight,nr.effectiveFilterWidth]},{type:"int32",data:[nr.outDepth]},{type:"int32",data:[nr.outHeight]},{type:"int32",data:[nr.outWidth]}];let yr=s.runWebGPUProgram(fr,[_e,hr],Mt.dtype,or);return s.disposeData(hr.dataId),yr}var LW={kernelName:Gi,backendName:"webgpu",kernelFunc:Ape};function Fpe(o){let{inputs:i,backend:s,attrs:_}=o,{dy:_e,input:ct,output:Mt}=i,Ft=ct;fm([ct,Mt],"maxPoolGrad");let{filterSize:Ut,strides:Xt,pad:Kt,dimRoundingMode:nr}=_,rr=w.computePool2DInfo(Ft.shape,Ut,Xt,1,Kt,nr),or=new Ba(rr,"max",!0),hr=[{type:"int32",data:[rr.strideHeight,rr.strideWidth]},{type:"int32",data:[rr.padInfo.top,rr.padInfo.left]},{type:"int32",data:[rr.dilationHeight,rr.dilationWidth]},{type:"int32",data:[rr.inHeight,rr.inWidth]},{type:"int32",data:[rr.effectiveFilterHeight,rr.effectiveFilterWidth]}],fr=s.runWebGPUProgram(or,[Ft],"int32",hr),yr=new jx(rr);hr=[{type:"int32",data:[rr.strideHeight,rr.strideWidth]},{type:"int32",data:[rr.effectiveFilterHeight-1-rr.padInfo.top,rr.effectiveFilterWidth-1-rr.padInfo.left]},{type:"int32",data:[rr.dilationHeight,rr.dilationWidth]},{type:"int32",data:[rr.effectiveFilterHeight,rr.effectiveFilterWidth]},{type:"int32",data:[rr.outHeight]},{type:"int32",data:[rr.outWidth]}];let Lr=s.runWebGPUProgram(yr,[_e,fr],Ft.dtype,hr);return s.disposeData(fr.dataId),Lr}var BW={kernelName:Ui,backendName:"webgpu",kernelFunc:Fpe};function Ppe(o){let{inputs:i,backend:s,attrs:_}=o,{filterSize:_e,strides:ct,pad:Mt,includeBatchInIndex:Ft}=_,{x:Ut}=i;y.assert(Ut.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${Ut.shape.length}.`);let Xt=[1,1];y.assert(w.eitherStridesOrDilationsAreOne(ct,Xt),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${ct} and dilations '${Xt}'`);let Kt=w.computePool2DInfo(Ut.shape,_e,ct,Xt,Mt),nr=[{type:"int32",data:[Kt.strideHeight,Kt.strideWidth]},{type:"int32",data:[Kt.padInfo.top,Kt.padInfo.left]},{type:"int32",data:[Kt.dilationHeight,Kt.dilationWidth]},{type:"int32",data:[Kt.inHeight,Kt.inWidth]},{type:"int32",data:[Kt.effectiveFilterHeight,Kt.effectiveFilterWidth]}],rr=new Ba(Kt,"max",!1),or=s.runWebGPUProgram(rr,[Ut],Ut.dtype,nr);return rr=new Ba(Kt,"max",!0,!0,Ft),[or,s.runWebGPUProgram(rr,[Ut],"int32",nr)]}var zW={kernelName:ua,backendName:"webgpu",kernelFunc:Ppe};function Ope(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{axis:ct,keepDims:Mt}=_;return eo(_e,ct,Mt,"min",s)}var VW={kernelName:Gn,backendName:"webgpu",kernelFunc:Ope},Mpe=et({opType:fe$1.MIN,cpuKernelImpl:$z}),WW={kernelName:Hn,backendName:"webgpu",kernelFunc:Mpe},Yx=class{constructor(o,i,s){this.uniforms="",this.variableNames=["x"],this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=i.map((_,_e)=>_[0]+o[_e]+_[1]),this.dispatchLayout=X$3(this.outputShape),this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize),this.xShape=o,i.map((_,_e)=>{this.uniforms+=` pad${_e} : vec2<i32>,`}),this.offset=s==="reflect"?0:1,this.shaderKey=`mirrorPad_${s}`}getUserCode(){let o=this.xShape.length,i=this.xShape.map((Ut,Xt)=>`uniforms.pad${Xt}[0]`).join(","),s=this.xShape.map((Ut,Xt)=>`uniforms.pad${Xt}[0] + uniforms.xShape${o>1?`[${Xt}]`:""}`).join(","),_=o===1?"start":"start[i]",_e=o===1?"end":"end[i]",ct=o===1?"outC":"outC[i]",Mt=ft(o),Ft=o>1?["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,o):"coords";return`
      ${G$3("index")} {
        if (index < uniforms.size) {
          let start = ${Mt}(${i});
          let end = ${Mt}(${s});
          var outC = getCoordsFromIndex(index);
          for (var i = 0; i < ${o}; i = i + 1) {
            if (${ct} < ${_}) {
              ${ct} = ${_} * 2 - ${ct} - ${this.offset};
            } else if(${ct} >= ${_e}) {
              ${ct} = (${_e} - 1) * 2 - ${ct} + ${this.offset};
            }
          }
          let coords = outC - start;
          setOutputAtIndex(index, getX(${Ft}));
        }
      }
    `}},UW={kernelName:Kn,backendName:"webgpu",kernelFunc:({inputs:o,attrs:i,backend:s})=>{let{x:_}=o,{paddings:_e,mode:ct}=i,Mt=s,Ft=_e.map(Xt=>({type:"int32",data:[Xt[0],Xt[1]]})),Ut=new Yx(_.shape,_e,ct);return Mt.runWebGPUProgram(Ut,[_],_.dtype,Ft)}},Lpe=et({opType:fe$1.MOD}),GW={kernelName:qn,backendName:"webgpu",kernelFunc:Lpe},Qx=class{constructor(o,i){this.variableNames=["probs"],this.outputShape=[],this.uniforms="seed : f32, numOutcomes: i32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=[o,i],this.dispatchLayout=X$3(this.outputShape),this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="multinomial"}getUserCode(){return`
    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    fn random (seed : f32, resultUV : vec2<f32>) -> f32 {
      let HASHSCALE1 = 443.8975;
      let p = resultUV * seed;
      var p3  = fract(vec3<f32>(p.xyx) * HASHSCALE1);
      p3 = p3 + dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${G$3("index")} {
      if (index < uniforms.size) {
        let coords = getOutputCoords();
        let batch = coords[0];

        let resUV = vec2<f32>(f32(coords[1]) / f32(uniforms.outShape[1]),
            f32(coords[0]) / f32(uniforms.outShape[0]));
        let r = random(uniforms.seed, resUV);
        var cdf = 0.0;
        for (var i = 0; i < uniforms.numOutcomes - 1; i = i + 1) {
          cdf = cdf + getProbs(batch, i);

          if (r < cdf) {
            setOutputAtIndexI32(index, i);
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutputAtIndexI32(index, uniforms.numOutcomes - 1);
      }
    }
  `}},Zx=class{constructor(o){this.variableNames=["logits"],this.outputShape=o,this.dispatchLayout=X$3(this.outputShape),this.dispatch=[this.outputShape[0],1,1],this.outputShape[1]>=4096?this.workgroupSize=[256,1,1]:this.workgroupSize=[64,1,1],this.shaderKey="softmax"}getUserCode(){return`
    var<workgroup> buf : array<f32, ${this.workgroupSize[0]}>;
    var<workgroup> rowMaxShared : f32;
    var<workgroup> rowSumShared : f32;
    const blockSize = ${this.workgroupSize[0]};
    ${G$3("index")} {
      let row = index / blockSize;
      let tid = i32(localId.x);
      let cols = uniforms.outShape[1];

      var threadMax = -3.402823e+38f;
      for (var col = tid; col < cols; col += blockSize) {
        let value = getLogits(row, col);
        threadMax = max(threadMax, value);
      }
      if (tid < cols) {
        buf[tid] = threadMax;
      }
      workgroupBarrier();

      var reduceSize = min(cols, blockSize);
      for (var currSize = reduceSize >> 1;  currSize > 0; currSize = reduceSize >> 1) {
        reduceSize = currSize + (reduceSize & 1);
        if (tid < currSize) {
          buf[tid] = max(buf[tid], buf[tid + reduceSize]);
        }
        workgroupBarrier();
      }

      if (tid == 0) {
        rowMaxShared = buf[0];
      }
      workgroupBarrier();

      var threadSum = 0.0;
      for (var col = tid; col < cols; col += blockSize) {
        let subExp = exp(getLogits(row, col) - rowMaxShared);
        threadSum += subExp;
      }
      buf[tid] = threadSum;
      workgroupBarrier();

      for (var currSize = blockSize >> 1;  currSize > 0; currSize = currSize >> 1) {
        if (tid < currSize) {
          buf[tid] = buf[tid] + buf[tid + currSize];
        }
        workgroupBarrier();
      }

      if (tid == 0) {
        rowSumShared = buf[0];
      }
      workgroupBarrier();

      for (var col = tid; col < cols; col += blockSize) {
        let value = exp(getLogits(row, col) - rowMaxShared) / rowSumShared;
        setOutputAtCoords(row, col, value);
      }
  }
    `}};function l0(o){let{inputs:i,backend:s,attrs:_}=o,{logits:_e}=i,{dim:ct}=_,Mt=pe$1({inputs:{x:_e},backend:s,attrs:{shape:[y.sizeFromShape(_e.shape)/_e.shape[ct],_e.shape[ct]]}}),Ft=new Zx(Mt.shape),Ut=s.runWebGPUProgram(Ft,[Mt],_e.dtype),Xt=pe$1({inputs:{x:Ut},backend:s,attrs:{shape:_e.shape}});return s.disposeData(Mt.dataId),s.disposeData(Ut.dataId),Xt}var HW={kernelName:Is,backendName:"webgpu",kernelFunc:l0};function Bpe(o){let{inputs:i,backend:s,attrs:_}=o,{logits:_e}=i,{numSamples:ct,seed:Mt,normalized:Ft}=_,Ut=Ft?_e:l0({inputs:{logits:_e},backend:s,attrs:{dim:_e.shape.length-1}}),Xt=Ut.shape[0],Kt=Ut.shape[1],nr=new Qx(Xt,ct),rr=[{type:"float32",data:[Mt]},{type:"int32",data:[Kt]}],or=s.runWebGPUProgram(nr,[Ut],"int32",rr);return Ft||s.disposeData(Ut.dataId),or}var KW={kernelName:jn,backendName:"webgpu",kernelFunc:Bpe};function zpe(o){let{inputs:i,backend:s}=o,{x:_}=i;if(s.shouldExecuteOnCPU([_])){let ct=s.tensorMap.get(_.dataId),[Mt,Ft]=Dz(ct.values,_.shape,_.dtype);return s.makeTensorInfo(Ft,_.dtype,Mt)}let _e=new Jr(_.shape,Z$1.NEG);return s.runWebGPUProgram(_e,[_],_.dtype)}var qW={kernelName:pa,backendName:"webgpu",kernelFunc:zpe};function Vpe(o){console.warn("tf.nonMaxSuppression() in webgpu locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:i,backend:s,attrs:_}=o,{boxes:_e,scores:ct}=i,{maxOutputSize:Mt,iouThreshold:Ft,scoreThreshold:Ut}=_,Xt=s.readSync(_e.dataId),Kt=s.readSync(ct.dataId),{selectedIndices:nr}=Vt.nonMaxSuppressionV3Impl(Xt,Kt,Mt,Ft,Ut);return s.makeTensorInfo([nr.length],"int32",new Int32Array(nr))}var jW={kernelName:Qn,backendName:"webgpu",kernelFunc:Vpe};function Wpe(o){console.warn("tf.nonMaxSuppression() in webgpu locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:i,backend:s,attrs:_}=o,{boxes:_e,scores:ct}=i,{maxOutputSize:Mt,iouThreshold:Ft,scoreThreshold:Ut,softNmsSigma:Xt}=_,Kt=s.readSync(_e.dataId),nr=s.readSync(ct.dataId),rr=Mt,or=Ft,hr=Ut,fr=Xt,{selectedIndices:yr,selectedScores:Lr}=Vt.nonMaxSuppressionV5Impl(Kt,nr,rr,or,hr,fr);return[s.makeTensorInfo([yr.length],"int32",new Int32Array(yr)),s.makeTensorInfo([Lr.length],"float32",new Float32Array(Lr))]}var XW={kernelName:Zn,backendName:"webgpu",kernelFunc:Wpe},Jx=class{constructor(o,i){this.variableNames=["x"],this.uniforms="onValue : f32, offValue : f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=[o,i],this.dispatchLayout=X$3(this.outputShape),this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="onehot"}getUserCode(){return`
      ${G$3("index")} {
        if(index < uniforms.size) {
          let coords = getCoordsFromIndex(index);
          setOutputAtIndex(index, mix(uniforms.offValue, uniforms.onValue,
                                      f32(i32(round(getX(coords.x))) == coords.y)));
        }
      }
    `}};function Upe(o){let{inputs:i,backend:s,attrs:_}=o,{indices:_e}=i,{dtype:ct,depth:Mt,onValue:Ft,offValue:Ut}=_,Xt=y.sizeFromShape(_e.shape),Kt=new Jx(Xt,Mt),nr=pe$1({inputs:{x:_e},backend:s,attrs:{shape:[Xt]}}),rr=[{type:"float32",data:[Ft]},{type:"float32",data:[Ut]}],or=s.runWebGPUProgram(Kt,[nr],ct,rr);s.disposeData(nr.dataId);let hr=pe$1({inputs:{x:or},backend:s,attrs:{shape:[..._e.shape,Mt]}});return s.disposeData(or.dataId),hr}var YW={kernelName:Jn,backendName:"webgpu",kernelFunc:Upe};function bm(o){let{inputs:i,backend:s}=o,{x:_}=i;if(_.dtype==="complex64"){let _e=vi({inputs:{input:_},backend:s}),ct=bm({inputs:{x:_e},backend:s}),Mt=Rp({inputs:{input:_},backend:s}),Ft=bm({inputs:{x:Mt},backend:s}),Ut=xo({inputs:{real:ct,imag:Ft},backend:s});return s.disposeData(_e.dataId),s.disposeData(ct.dataId),s.disposeData(Mt.dataId),s.disposeData(Ft.dataId),Ut}return vt$2({attrs:{shape:_.shape,dtype:_.dtype,value:_.dtype==="string"?"":0},backend:s})}var QW={kernelName:Sa,backendName:"webgpu",kernelFunc:bm};function ZW(o){let{inputs:i,backend:s}=o,{x:_}=i;if(_.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(_.dtype==="complex64"){let _e=vi({inputs:{input:_},backend:s}),ct=ZW({inputs:{x:_e},backend:s}),Mt=Rp({inputs:{input:_},backend:s}),Ft=bm({inputs:{x:Mt},backend:s}),Ut=xo({inputs:{real:ct,imag:Ft},backend:s});return s.disposeData(_e.dataId),s.disposeData(ct.dataId),s.disposeData(Mt.dataId),s.disposeData(Ft.dataId),Ut}return vt$2({attrs:{shape:_.shape,dtype:_.dtype,value:1},backend:s})}var JW={kernelName:ca,backendName:"webgpu",kernelFunc:ZW};function Gpe(o){let{inputs:i,backend:s,attrs:_}=o,{axis:_e}=_;if(i.length===1)return Mx({inputs:{input:i[0]},backend:s,attrs:{dim:_e}});let ct=i[0].shape,Mt=i[0].dtype;i.forEach(Xt=>{y.assertShapesMatch(ct,Xt.shape,"All tensors passed to stack must have matching shapes"),y.assert(Mt===Xt.dtype,()=>"All tensors passed to stack must have matching dtypes")});let Ft=[],Ut=a0({inputs:i.map(Xt=>{let Kt=Mx({inputs:{input:Xt},backend:s,attrs:{dim:_e}});return Ft.push(Kt),Kt}),backend:s,attrs:{axis:_e}});return Ft.forEach(Xt=>s.disposeData(Xt.dataId)),Ut}var eU={kernelName:la,backendName:"webgpu",kernelFunc:Gpe};function m0(o,i=!1){let s=o.length,_=ft(s),_e=o.map((Mt,Ft)=>`uniforms.pad${Ft}[0]`).join(","),ct=o.map((Mt,Ft)=>`uniforms.pad${Ft}[0] + uniforms.xShape${s>1?`[${Ft}]`:""}`).join(",");return`
        let start = ${s>1?`${_}(${_e})`:`${_e}`};
        let end = ${s>1?`${_}(${ct})`:`${ct}`};
        if (${s>1?"any(paddedCoords < start)":"paddedCoords < start"} || ${s>1?"any(paddedCoords >= end)":"paddedCoords >= end"}) {
          setOutputAtIndex(index, ${i?0:"uniforms.constantValue"});
        } else {
          let coords = paddedCoords - start;
          setOutputAtIndex(index, getX(${s>1?["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,s):"coords"}));
        }
  `}var ey=class{constructor(o,i){this.variableNames=["x"],this.uniforms="constantValue : f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=i.map((s,_)=>s[0]+o[_]+s[1]),this.dispatchLayout=X$3(this.outputShape),this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize),i.map((s,_)=>{this.uniforms+=` pad${_} : vec2<i32>,`}),this.xShape=o,this.shaderKey="pad"}getUserCode(){return`
      ${G$3("index")} {
        if (index < uniforms.size) {
          let paddedCoords = getCoordsFromIndex(index);
          ${m0(this.xShape)}
        }
      }
    `}},Hpe=o=>{let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{paddings:ct,constantValue:Mt}=_;if(ct.every(Xt=>y.arraysEqual(Xt,[0,0])))return At$2({inputs:{x:_e},backend:s});if(y.sizeFromShape(_e.shape)===0)return vt$2({backend:s,attrs:{shape:ct.map((Xt,Kt)=>Xt[0]+_e.shape[Kt]+Xt[1]),value:Mt,dtype:_e.dtype}});let Ft=[{type:"float32",data:[Mt]}];ct.map(Xt=>Ft.push({type:"int32",data:[Xt[0],Xt[1]]}));let Ut=new ey(_e.shape,ct);return s.runWebGPUProgram(Ut,[_e],_e.dtype,Ft)},tU={kernelName:es,backendName:"webgpu",kernelFunc:Hpe},Kpe=et({opType:fe$1.POW}),rU={kernelName:ts,backendName:"webgpu",kernelFunc:Kpe};function qpe(o){let{inputs:i,backend:s}=o,{x:_,alpha:_e}=i,ct=new Ii(fe$1.PRELU,_.shape,_e.shape);return s.runWebGPUProgram(ct,[_,_e],"float32")}var oU={kernelName:rs,backendName:"webgpu",kernelFunc:qpe};function jpe(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{axis:ct,keepDims:Mt}=_;return eo(_e,ct,Mt,"prod",s)}var nU={kernelName:os,backendName:"webgpu",kernelFunc:jpe},Xpe=o=>{let{backend:i,attrs:s}=o,{start:_,stop:_e,step:ct,dtype:Mt}=s,Ft=Pz(_,_e,ct,Mt);return i.makeTensorInfo([Ft.length],Mt,Ft)},sU={kernelName:ma,backendName:"webgpu",kernelFunc:Xpe},Ype=et({opType:fe$1.DIV}),aU={kernelName:fn,backendName:"webgpu",kernelFunc:Ype},Qpe=ye$1({opType:Z$1.RECIPROCAL}),iU={kernelName:ns,backendName:"webgpu",kernelFunc:Qpe},Zpe=ye$1({opType:Z$1.RELU}),uU={kernelName:ss,backendName:"webgpu",kernelFunc:Zpe},Jpe=ye$1({opType:Z$1.RELU6}),pU={kernelName:us,backendName:"webgpu",kernelFunc:Jpe},ty=class{constructor(o,i,s){this.variableNames=["x"],this.uniforms="adjustHeightWidth : vec2<f32>, halfPixelCenters : f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=[o[0],i,s,o[3]],this.dispatchLayout=X$3(this.outputShape),this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="resizeBilinear"}getUserCode(){return`
      ${G$3("index")} {
        if (index < uniforms.size) {
        let coords = getCoordsFromIndex(index);
          let b = coords[0];
          let d = coords[3];
          let rc = coords.yz;

          let effectiveInSize = vec2<f32>(
            f32(uniforms.xShape.y) - uniforms.adjustHeightWidth[0],
            f32(uniforms.xShape.z) - uniforms.adjustHeightWidth[1]);

          let effectiveOutSize = vec2<f32>(
            f32(uniforms.outShape.y) - uniforms.adjustHeightWidth[0],
            f32(uniforms.outShape.z) - uniforms.adjustHeightWidth[1]);

          let effectiveInputOverOutputRatioRC =
              effectiveInSize / effectiveOutSize;

          // Fractional source index
          let sourceFracIndexRC =
            (vec2<f32>(rc) + vec2<f32>(uniforms.halfPixelCenters)) *
            effectiveInputOverOutputRatioRC - vec2<f32>(uniforms.halfPixelCenters);

          // Compute the four integer indices.
          let sourceFloorRC = vec2<i32>(sourceFracIndexRC);
          let sourceCeilRC = vec2<i32>(
            min(vec2<f32>(uniforms.xShape.yz) - vec2<f32>(1.0), ceil(sourceFracIndexRC)));

          let topLeft = getX(b, sourceFloorRC.x, sourceFloorRC.y, d);
          let bottomLeft = getX(b, sourceCeilRC.x, sourceFloorRC.y, d);
          let topRight = getX(b, sourceFloorRC.x, sourceCeilRC.y, d);
          let bottomRight = getX(b, sourceCeilRC.x, sourceCeilRC.y, d);

          let fracRC = sourceFracIndexRC - vec2<f32>(sourceFloorRC);

          let top = topLeft + (topRight - topLeft) * fracRC.y;
          let bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
          let newValue = top + (bottom - top) * fracRC.x;

          setOutputAtIndex(index, newValue);
        }
      }
    `}};function ece(o){let{inputs:i,backend:s,attrs:_}=o,{images:_e}=i,{alignCorners:ct,size:Mt,halfPixelCenters:Ft}=_,[Ut,Xt]=Mt,Kt=[{type:"float32",data:[ct&&Ut>1?1:0,ct&&Xt>1?1:0]},{type:"float32",data:[Ft?.5:0]}],nr=new ty(_e.shape,Ut,Xt);return s.runWebGPUProgram(nr,[_e],"float32",Kt)}var cU={kernelName:is,backendName:"webgpu",kernelFunc:ece},ry=class{constructor(o,i){this.variableNames=["dy"],this.uniforms=`effectiveXSize : vec2<i32>, effectiveYSize : vec2<i32>, heightScale : f32, widthScale : f32,
       invHeightScale : f32, invWidthScale : f32, winHeight : i32, winWidth : i32,`,this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=o,this.dispatchLayout=X$3(this.outputShape),this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize),this.alignCorners=i,this.shaderKey=`resizeBilinearBackprop_${i}`}getUserCode(){return`
      ${G$3("index")} {
        if (index < uniforms.size) {
          let coords = getOutputCoords();
          let b = coords[0];
          let d = coords[3];
          let r = coords[1];
          let c = coords[2];

          var accumulator = 0.0;

          // Compute bounds for where in dy we will look
          let startRLerp = floor(f32(r) * uniforms.invHeightScale);
          let startDyR = i32(startRLerp - f32(uniforms.winHeight / 2));

          let startCLerp = floor(f32(c) * uniforms.invWidthScale);
          let startDyC = i32(startCLerp - f32(uniforms.winWidth / 2));

          // Loop over dy
          for (var dyROffset = 0; dyROffset < uniforms.winHeight; dyROffset++) {
            let dyR = startDyR + dyROffset;

            // Guard against the window exceeding the bounds of dy
            if (dyR < 0 || dyR >= uniforms.dyShape[1]) {
              continue;
            }

            for (var dyCOffset = 0; dyCOffset < uniforms.winWidth; dyCOffset++) {
              let dyC = startDyC + dyCOffset;

              // Guard against the window exceeding the bounds of dy
              if (dyC < 0 || dyC >= uniforms.dyShape[2]) {
                continue;
              }

              let dxR = f32(dyR) * uniforms.heightScale;
              let topDxRIndex = i32(floor(dxR));
              let bottomDxRIndex = i32(min(ceil(dxR), f32(uniforms.outShape[1] - 1)));
              let dxRLerp = dxR - f32(topDxRIndex);
              let inverseDxRLerp = 1.0 - dxRLerp;

              let dxC = f32(dyC) * uniforms.widthScale;
              let leftDxCIndex = i32(floor(dxC));
              let rightDxCIndex = i32(min(ceil(dxC), f32(uniforms.outShape[2] - 1)));
              let dxCLerp = dxC - f32(leftDxCIndex);
              let inverseDxCLerp = 1.0 - dxCLerp;

              if (r == topDxRIndex && c == leftDxCIndex) {
                // topLeft
                accumulator +=
                  getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
              }

              if (r == topDxRIndex && c == rightDxCIndex) {
                // topRight
                accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
              }

              if (r == bottomDxRIndex && c == leftDxCIndex) {
                // bottomLeft
                accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
              }

              if (r == bottomDxRIndex && c == rightDxCIndex) {
                // bottomRight
                accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
              }
            }
          }
          // End loop over dy

          setOutputAtIndex(index, accumulator);
        }
      }
    `}};function tce(o){let{inputs:i,backend:s,attrs:_}=o,{images:_e,dy:ct}=i,{alignCorners:Mt}=_,[,Ft,Ut]=_e.shape,[,Xt,Kt]=ct.shape,nr=[Mt&&Xt>1?Ft-1:Ft,Mt&&Kt>1?Ut-1:Ut],rr=[Mt&&Xt>1?Xt-1:Xt,Mt&&Kt>1?Kt-1:Kt],or=nr[0]/rr[0],hr=nr[1]/rr[1],fr=1/or,yr=1/hr,Lr=2*Math.ceil(fr)+2,Br=2*Math.ceil(yr)+2,Vr=new ry(_e.shape,Mt),Wr=[{type:"int32",data:nr},{type:"int32",data:rr},{type:"float32",data:[or]},{type:"float32",data:[hr]},{type:"float32",data:[fr]},{type:"float32",data:[yr]},{type:"int32",data:[Lr]},{type:"int32",data:[Br]}];return s.runWebGPUProgram(Vr,[ct],ct.dtype,Wr)}var lU={kernelName:Ja,backendName:"webgpu",kernelFunc:tce},oy=class{constructor(o,i,s,_){this.variableNames=["x"],this.uniforms="adjustHeightWidth : vec2<f32>, roundBase : f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=[o[0],i,s,o[3]],this.dispatchLayout=X$3(this.outputShape),this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize),this.halfPixelCenters=_,this.shaderKey=`resizeNearest_${_}`}getUserCode(){let o;return o=this.halfPixelCenters?"max((vec2<f32>(rc) + vec2<f32>(0.5)) * effectiveInputOverOutputRatioRC, vec2<f32>(0.0))":"vec2<f32>(rc) * effectiveInputOverOutputRatioRC",`
      ${G$3("index")} {
        if (index < uniforms.size) {
          let coords = getCoordsFromIndex(index);
          let b = coords[0];
          let d = coords[3];
          let rc = coords.yz;

          let effectiveInSize = vec2<f32>(
            f32(uniforms.xShape.y) - uniforms.adjustHeightWidth[0],
            f32(uniforms.xShape.z) - uniforms.adjustHeightWidth[1]);

          let effectiveOutSize = vec2<f32>(
            f32(uniforms.outShape.y) - uniforms.adjustHeightWidth[0],
            f32(uniforms.outShape.z) - uniforms.adjustHeightWidth[1]);

          let effectiveInputOverOutputRatioRC =
              effectiveInSize / effectiveOutSize;

          // Fractional source index
          let sourceFracIndexRC = ${o};

          // Compute the coordinators of nearest neighbor point.
          let inputShapeRC = vec2<f32>(f32(uniforms.xShape.y), f32(uniforms.xShape.z));
          let sourceNearestRC = vec2<i32>(
            min(inputShapeRC - 1.0, floor(sourceFracIndexRC + uniforms.roundBase)));
          let newValue = getX(b, sourceNearestRC.x, sourceNearestRC.y, d);

          setOutputAtIndex(index, newValue);
        }
      }
    `}};function rce(o){let{inputs:i,backend:s,attrs:_}=o,{images:_e}=i,{alignCorners:ct,halfPixelCenters:Mt,size:Ft}=_,[Ut,Xt]=Ft,Kt=[{type:"float32",data:[ct&&Ut>1?1:0,ct&&Xt>1?1:0]},{type:"float32",data:[ct?.5:0]}],nr=new oy(_e.shape,Ut,Xt,Mt);return s.runWebGPUProgram(nr,[_e],_e.dtype,Kt)}var mU={kernelName:as,backendName:"webgpu",kernelFunc:rce},ny=class{constructor(o,i){this.variableNames=["dy"],this.uniforms=`effectiveXSize : vec2<i32>, effectiveYSize : vec2<i32>, invHeightScale : f32, invWidthScale : f32,
       winHeight : i32, winWidth : i32,`,this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=o,this.dispatchLayout=X$3(this.outputShape),this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize),this.alignCorners=i,this.shaderKey=`resizeNearestNeigborBackprop_${i}`}getUserCode(){return`
      ${G$3("index")} {
        if (index < uniforms.size) {
          let coords = getOutputCoords();
          let b = coords[0];
          let d = coords[3];
          let r = coords[1];
          let c = coords[2];

          var accumulator = 0.0;

          // Compute bounds for where in dy we will look
          let startRLerp = floor(f32(r) * uniforms.invHeightScale);
          let startDyR = i32(floor(startRLerp - f32(uniforms.winHeight / 2)));

          let startCLerp = floor(f32(c) * uniforms.invWidthScale);
          let startDyC = i32(floor(startCLerp - f32(uniforms.winWidth / 2)));

          // Loop over dy
          for (var dyROffset = 0; dyROffset < uniforms.winHeight; dyROffset++) {
            let dyR = startDyR + dyROffset;

            // Guard against the window exceeding the bounds of dy
            if (dyR < 0 || dyR >= uniforms.dyShape[1]) {
              continue;
            }

            for (var dyCOffset = 0; dyCOffset < uniforms.winWidth; dyCOffset++) {
              let dyC = startDyC + dyCOffset;

              // Guard against the window exceeding the bounds of dy
              if (dyC < 0 || dyC >= uniforms.dyShape[2]) {
                continue;
              }

              let sourceFracRow = f32(uniforms.effectiveXSize[0]) *
                  (f32(dyR) / f32(uniforms.effectiveYSize[0]));

              let sourceFracCol = f32(uniforms.effectiveXSize[1]) *
                  (f32(dyC) / f32(uniforms.effectiveYSize[1]));

              let sourceNearestRow =
                  i32(min(f32(uniforms.outShape[1] - 1),
                  ${this.alignCorners?"floor(sourceFracRow + 0.5)":"floor(sourceFracRow)"}));

              let sourceNearestCol =
                  i32(min(f32(uniforms.outShape[2] - 1),
                  ${this.alignCorners?"floor(sourceFracCol + 0.5)":"floor(sourceFracCol)"}));

              if (r == sourceNearestRow && c == sourceNearestCol) {
                accumulator += getDy(b, dyR, dyC, d);
              }
            }
          }
          // End loop over dy

          setOutputAtIndex(index, accumulator);
        }
      }
    `}};function oce(o){let{inputs:i,backend:s,attrs:_}=o,{images:_e,dy:ct}=i,{alignCorners:Mt}=_,[,Ft,Ut]=_e.shape,[,Xt,Kt]=ct.shape,nr=[Mt&&Xt>1?Ft-1:Ft,Mt&&Kt>1?Ut-1:Ut],rr=[Mt&&Xt>1?Xt-1:Xt,Mt&&Kt>1?Kt-1:Kt],or=1/(nr[0]/rr[0]),hr=1/(nr[1]/rr[1]),fr=2*Math.ceil(or)+2,yr=2*Math.ceil(hr)+2,Lr=new ny(_e.shape,Mt),Br=[{type:"int32",data:nr},{type:"int32",data:rr},{type:"float32",data:[or]},{type:"float32",data:[hr]},{type:"int32",data:[fr]},{type:"int32",data:[yr]}];return s.runWebGPUProgram(Lr,[ct],ct.dtype,Br)}var dU={kernelName:Za,backendName:"webgpu",kernelFunc:oce},sy=class{constructor(o){this.variableNames=["x"],this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=o,this.dispatchLayout=X$3(this.outputShape),this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize),this.uniforms=" axis : vec4<i32>,",this.shaderKey="reverse"}getUserCode(){return`
      
      // Using uniform variables as judging conditions, so the function has
      // coherent execution within all threads.
      fn getReverseCoords(coords : vec4<i32>) -> vec4<i32> {
        var reverseCoords = coords;
        if (uniforms.axis[0] == 1) {
          reverseCoords[0] = uniforms.xShape[0] - coords[0] - 1;
        }
        if (uniforms.axis[1] == 1) {
          reverseCoords[1] = uniforms.xShape[1] - coords[1] - 1;
        }
        if (uniforms.axis[2] == 1) {
          reverseCoords[2] = uniforms.xShape[2] - coords[2] - 1;
        }
        if (uniforms.axis[3] == 1) {
          reverseCoords[3] = uniforms.xShape[3] - coords[3] - 1;
        }

        return reverseCoords;
      }
    
      ${G$3("index")} {
        if (index < uniforms.size) {
          let coords = getCoordsFromIndex(index);
          let reverseCoords = getReverseCoords(coords);
          setOutputAtIndex(index, getX(reverseCoords[0],
              reverseCoords[1], reverseCoords[2], reverseCoords[3]));
        }
      }
    `}};function nce(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{dims:ct}=_,Mt=_e.shape.length;if(Mt===0)return At$2({inputs:{x:_e},backend:s});let Ft=_e.shape,Ut=[1,1,1,1];Ft.forEach((yr,Lr)=>{Ut[Lr+4-Mt]=yr});let Xt=y.parseAxisParam(ct,_e.shape),Kt=[0,0,0,0];Xt.forEach(yr=>{Kt[yr+4-Mt]=1});let nr=[{type:"int32",data:Kt}],rr=pe$1({inputs:{x:_e},backend:s,attrs:{shape:Ut}}),or=new sy(Ut),hr=s.runWebGPUProgram(or,[rr],rr.dtype,nr);s.disposeData(rr.dataId);let fr=pe$1({inputs:{x:hr},backend:s,attrs:{shape:Ft}});return s.disposeData(hr.dataId),fr}var fU={kernelName:ps,backendName:"webgpu",kernelFunc:nce},ay=class{constructor(o,i){this.outputShape=[],this.variableNames=["x"],this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=o,this.dispatchLayout=X$3(this.outputShape),this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize),this.uniforms=`centerX : f32, centerY : f32, sinRadians : f32,
          cosRadians : f32,`,this.shaderKey="rotate",this.outputShape=o,typeof i=="number"?(this.uniforms+=" fillValue : f32,",this.fillSnippet="var outputValue = uniforms.fillValue;",this.shaderKey+="_float"):(this.uniforms+=" fillValue : vec3<f32>,",this.fillSnippet="var outputValue = uniforms.fillValue[coords[3]];",this.shaderKey+="_vec3")}getUserCode(){return`
        ${G$3("index")} {
          if (index < uniforms.size) {
            let coords = getCoordsFromIndex(index);
            let coordXFloat = (f32(coords[2]) - uniforms.centerX) *
                uniforms.cosRadians - (f32(coords[1]) - uniforms.centerY) *
                uniforms.sinRadians;
            let coordYFloat = (f32(coords[2]) - uniforms.centerX) *
                uniforms.sinRadians + (f32(coords[1]) - uniforms.centerY) *
                uniforms.cosRadians;
            let coordX = i32(round(coordXFloat + uniforms.centerX));
            let coordY = i32(round(coordYFloat + uniforms.centerY));
            ${this.fillSnippet}
            if(coordX >= 0 && coordX < uniforms.xShape[2] && coordY >= 0 &&
                coordY < uniforms.xShape[1]) {
              outputValue = getX(coords[0], coordY, coordX, coords[3]);
            }
            setOutputAtIndex(index, outputValue);
          }
        }
      `}},hU={kernelName:Ds,backendName:"webgpu",kernelFunc:({inputs:o,attrs:i,backend:s})=>{let{image:_}=o,{radians:_e,fillValue:ct,center:Mt}=i,Ft=s,Ut=new ay(_.shape,ct),[Xt,Kt]=w.getImageCenter(Mt,_.shape[1],_.shape[2]),nr=[{type:"float32",data:[Xt]},{type:"float32",data:[Kt]},{type:"float32",data:[Math.sin(_e)]},{type:"float32",data:[Math.cos(_e)]}];return typeof ct=="number"?nr.push({type:"float32",data:[Number.parseFloat(ct.toFixed(2))]}):nr.push({type:"float32",data:ct}),Ft.runWebGPUProgram(Ut,[_],_.dtype,nr)}},sce=ye$1({opType:Z$1.ROUND}),gU={kernelName:cs,backendName:"webgpu",kernelFunc:sce},ace=ye$1({opType:Z$1.RSQRT,cpuKernelImpl:Oz}),xU={kernelName:ls,backendName:"webgpu",kernelFunc:ace},za=class{constructor(o,i,s,_,_e,ct,Mt,Ft=!0){this.variableNames=["updates","indices"],this.workgroupSize=[64,1,1],this.atomic=!0,this.outputShape=ct,this.type=Mt,this.sumDupeIndices=Ft,this.dispatchLayout=X$3(o),this.dispatch=H$2(this.dispatchLayout,o,this.workgroupSize),this.sliceDimGreaterThanOne=i>1,this.shaderKey=`scatter_${s}_${_}_${this.sliceDimGreaterThanOne}_${Mt}_${Ft}_${_e.length}`;let Ut=ft(_e.length);this.uniforms=`sliceDim : i32, strides: ${Ut}, updatesSize: i32,`,this.updatesRank=_,this.indicesRank=s}getUserCode(){let o="";this.indicesRank===1?o="coords[0]":this.indicesRank===2&&(o="coords[0], j");let i=`getIndices(${o})`,s=this.sliceDimGreaterThanOne?"uniforms.strides[j]":"uniforms.strides",_="",_e="";this.dispatchLayout.x.length===1?(_="flattenedIndex",_e=`
      fn getUpdatesCoordsFromFlatIndex(index : i32) -> i32 {
        return index;
      }
      `):this.dispatchLayout.x.length===2&&(_="vec2<i32>(flattenedIndex, coords[1])",_e=`
      fn getUpdatesCoordsFromFlatIndex(index : i32) -> vec2<i32> {
        // N.B. |updates| could be a scalar tensor, conceptually representing a
        // 2D tensor with all values equal to that. By design, its size must be
        // the same as |outShape[1]| in one dimension, and |indicesShape[0]|
        // gives the other.
        let sliceSize = uniforms.outShape[1];
        let d0 = index / sliceSize;
        let d1 = index - d0 * sliceSize;
        return vec2<i32>(d0, d1);
      }
      `);let ct=`getUpdates(${Array.from({length:this.updatesRank},(Mt,Ft)=>`coords[${Ft}]`).join(", ")})`;return`
    ${_e}
      ${G$3("index")} {
        if (index < uniforms.updatesSize) {
          let coords = getUpdatesCoordsFromFlatIndex(index);
          var flattenedIndex = 0;
          for (var j = 0; j < uniforms.sliceDim; j = j + 1) {
            let indexInside = i32(round(${i}));
            flattenedIndex = flattenedIndex + indexInside * ${s};
          }
          let updateValue =
              ${Su(this.type)}(${ct});
          let flatIndex = getOutputIndexFromCoords(${_});

          ${this.sumDupeIndices?Qr("&result[flatIndex]","updateValue",this.type):"atomicStore(&result[flatIndex], bitcast<i32>(updateValue));"}
        }
      }`}};function ice(o){let{inputs:i,backend:s,attrs:_}=o,{indices:_e,updates:ct}=i,{shape:Mt}=_,{sliceRank:Ft,numUpdates:Ut,sliceSize:Xt,strides:Kt,outputSize:nr}=w.calculateShapes(ct,_e,Mt),rr=[nr/Xt,Xt];if(nr===0)return s.makeTensorInfo(Mt,_e.dtype);let or=pe$1({inputs:{x:_e},backend:s,attrs:{shape:[Ut,Ft]}}),hr=pe$1({inputs:{x:ct},backend:s,attrs:{shape:[Ut,Xt]}}),fr=hr.dtype,yr=vt$2({backend:s,attrs:{shape:rr,value:0,dtype:fr}}),Lr=[{type:"int32",data:[Ft]},{type:"int32",data:Kt},{type:"int32",data:[y.sizeFromShape(hr.shape)]}],Br=new za(hr.shape,Ft,or.shape.length,hr.shape.length,Kt,rr,fr),Vr=s.runWebGPUProgram(Br,[hr,or],fr,Lr,yr),Wr=pe$1({inputs:{x:Vr},backend:s,attrs:{shape:Mt}});return s.disposeData(or.dataId),s.disposeData(hr.dataId),s.disposeData(Vr.dataId),Wr}var yU={kernelName:ms,backendName:"webgpu",kernelFunc:ice},iy=class{constructor(o,i){this.outputShape=[],this.variableNames=["sortedSequence","values"],this.uniforms="numInputs : i32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=o,this.dispatchLayout=X$3(this.outputShape),this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize),this.side=i,this.shaderKey=`search_sorted_${i}`}getUserCode(){return`
      fn findBound(batch: i32, value: f32) -> i32 {
        var left = i32(0);
        var right = uniforms.numInputs;
        while (left < right) {
          var mid = (left + right) / 2;
          if (getSortedSequence(batch, mid) ${this.side==="left"?"<":"<="} value) {
            left = mid + 1;
          } else {
            right = mid;
          }
        }
        return right;
      }

      ${G$3("index")} {
        if (index < uniforms.size) {
          let coords = getCoordsFromIndex(index);
          let value = getValuesByOutputIndex(index);
          setOutputAtIndexI32(index, findBound(coords[0], value));
        }
      }
    `}};function uce(o){let{inputs:i,backend:s,attrs:_}=o,{sortedSequence:_e,values:ct}=i,{side:Mt}=_,Ft=new iy([ct.shape[0],ct.shape[1]],Mt),Ut=[{type:"int32",data:[_e.shape[1]]}];return s.runWebGPUProgram(Ft,[_e,ct],"int32",Ut)}var bU={kernelName:fs,backendName:"webgpu",kernelFunc:uce},uy=class{constructor(o,i,s){this.variableNames=["c","a","b"],this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=i,this.dispatchLayout=X$3(this.outputShape),this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize),this.cRank=o,this.rank=s,this.shaderKey="select"}getUserCode(){let o,i;if(this.rank>4)throw Error(`Where for rank ${this.rank} is not yet supported`);if(this.rank===1)i="resRC",o="resRC";else{let s=["resRC.x","resRC.y","resRC.z","resRC.w"],_=[],_e=[];for(let ct=0;ct<this.outputShape.length;ct++)_e.push(`${s[ct]}`),ct<this.cRank&&_.push(`${s[ct]}`);o=_.join(),i=_e.join()}return`
      ${G$3("index")} {
        if (index < uniforms.size) {
          let resRC = getCoordsFromIndex(index);
          let cVal = getC(${o});
          if (cVal >= 1.0) {
            setOutputAtIndex(index, getA(${i}));
          } else {
            setOutputAtIndex(index, getB(${i}));
          }
        }
      }
    `}};function pce(o){let{inputs:i,backend:s}=o,{condition:_,t:_e,e:ct}=i,Mt=new uy(_.shape.length,_e.shape,_e.shape.length);return s.runWebGPUProgram(Mt,[_,_e,ct],dt(_e.dtype,ct.dtype))}var CU={kernelName:fa,backendName:"webgpu",kernelFunc:pce},cce=ye$1({opType:Z$1.SELU}),wU={kernelName:hs,backendName:"webgpu",kernelFunc:cce},lce=ye$1({opType:Z$1.SIGMOID}),SU={kernelName:bs,backendName:"webgpu",kernelFunc:lce},mce=ye$1({opType:Z$1.SIGN}),IU={kernelName:ys,backendName:"webgpu",kernelFunc:mce},dce=ye$1({opType:Z$1.SIN}),vU={kernelName:gs,backendName:"webgpu",kernelFunc:dce},fce=ye$1({opType:Z$1.SINH}),kU={kernelName:xs,backendName:"webgpu",kernelFunc:fce},hce=ye$1({opType:Z$1.SOFTPLUS}),NU={kernelName:Cs,backendName:"webgpu",kernelFunc:hce},py=class{constructor(o,i,s,_,_e,ct){this.variableNames=["x"],this.outputShape=[],this.uniforms="",this.workgroupSize=[64,1,1],this.size=!0;let Mt=new Array(_.length);for(let Ft=0;Ft<Mt.length;Ft++)Mt[Ft]=_[_e[Ft]];this.outputShape=Mt,this.newDim=_e,this.dispatchLayout=X$3(this.outputShape),this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize),this.xShape=o,this.paddedXShape=i,this.uniforms+=`reshapedPaddedXShape : ${ft(_.length)}, paddedXShapeStrides : ${ft(ct)}, `,s.map((Ft,Ut)=>{this.uniforms+=` pad${Ut} : vec2<i32>,`}),this.shaderKey=`spaceToBatchND_${_e}`}getUserCode(){let o=ft(this.outputShape.length),i=e0(this.newDim);return`
      ${cm(this.paddedXShape,"PaddedX")}
      ${G$3("index")} {
        if(index < uniforms.size) {
          let coords = getCoordsFromIndex(index);
          let switchedIndex = getIndexFromCoords${this.outputShape.length}D(${o}(${i}), uniforms.reshapedPaddedXShape);
          let paddedCoords = getPaddedXCoordsFromIndex(switchedIndex);
          ${m0(this.xShape,!0)}
        }
      }
    `}},gce=o=>{let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{blockShape:ct,paddings:Mt}=_;y.assert(_e.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGPU backend not implemented yet");let Ft=ct.reduce((Br,Vr)=>Br*Vr),Ut=[[0,0]];Ut.push(...Mt);for(let Br=1+ct.length;Br<_e.shape.length;++Br)Ut.push([0,0]);let Xt=Ut.map((Br,Vr)=>Br[0]+_e.shape[Vr]+Br[1]),Kt=w.getReshaped(Xt,ct,Ft,!1),nr=w.getPermuted(Kt.length,ct.length,!1),rr=w.getReshapedPermuted(Xt,ct,Ft,!1),or=y.computeStrides(Xt),hr=new py(_e.shape,Xt,Ut,Kt,nr,or.length),fr=[{type:"int32",data:Kt},{type:"int32",data:or}];Ut.map(Br=>fr.push({type:"int32",data:[Br[0],Br[1]]}));let yr=s.runWebGPUProgram(hr,[_e],_e.dtype,fr),Lr=pe$1({inputs:{x:yr},backend:s,attrs:{shape:rr}});return s.disposeData(yr.dataId),Lr},TU={kernelName:ga,backendName:"webgpu",kernelFunc:gce},cy=class{constructor(o,i,s){this.variableNames=["input","indices","segmentIds"],this.outputShape=[],this.uniforms="segmentSize : i32, sparseSize : i32,",this.workgroupSize=[64,1,1],this.atomic=!0,this.outputShape=o,this.type=s,this.dispatchLayout=X$3([i]),this.dispatch=H$2(this.dispatchLayout,[i],this.workgroupSize),this.shaderKey="sparseSegmentSum"}getUserCode(){return`
    ${G$3("index")} {
      if (index < uniforms.sparseSize) {
        let indexInSegmentIds = index / uniforms.segmentSize;
        let indexInSegment = index % uniforms.segmentSize;
        let indexInInput = indices[indexInSegmentIds];
        let segmentId = segmentIds[indexInSegmentIds];

        let value = input[indexInInput * uniforms.segmentSize + indexInSegment];
        let outIndex = segmentId * uniforms.segmentSize + indexInSegment;
        ${Qr("&result[outIndex]","value",this.type)}
      }
    }
  `}},ly=class{constructor(o,i){this.variableNames=["segmentIds"],this.outputShape=[],this.workgroupSize=[64,1,1],this.atomic=!0,this.outputShape=[o],this.dispatchLayout=X$3(i),this.dispatch=H$2(this.dispatchLayout,i,this.workgroupSize),this.shaderKey="sparseSegmentIdCountProgram"}getUserCode(){return`
    ${G$3("index")} {
      if (index < uniforms.segmentIdsShape) {
        let segmentId = segmentIds[index];
        ${Qr("&result[segmentId]","1","int32")}
      }
    }
  `}},my=class{constructor(o,i){this.variableNames=["segmentSum","sameSegmentIdCount"],this.outputShape=[],this.uniforms="segmentSize : i32",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=o,this.type=i,this.dispatchLayout=X$3(o),this.dispatch=H$2(this.dispatchLayout,o,this.workgroupSize),this.shaderKey="sparseSegmentMean"}getUserCode(){return`
    ${G$3("index")} {
      if (index < uniforms.size) {
        let segmentId = index / uniforms.segmentSize;
        let count = sameSegmentIdCount[segmentId];
        if (count != 0) {
          ${this.type==="float32"?"setOutputAtIndex(index, segmentSum[index] / f32(count));":"setOutputAtIndexI32(index, segmentSum[index] / count);"}
        }
      }
    }
  `}};function dy(o,i,s,_=!1,_e){let ct,Mt=y.sizeFromShape(o.shape)/o.shape[0],Ft=o.dtype,Ut=y.sizeFromShape(i.shape),Xt=_e.readSync(s.dataId),Kt=Ut>0?Xt[Ut-1]+1:0,nr=o.shape.slice();nr[0]=Kt;let rr=Ut*Mt,or=vt$2({backend:_e,attrs:{shape:nr,value:0,dtype:Ft}});ct=new cy(nr,rr,Ft);let hr=[{type:"int32",data:[Mt]},{type:"int32",data:[rr]}],fr=_e.runWebGPUProgram(ct,[o,i,s],Ft,hr,or);if(_)return fr;let yr=vt$2({backend:_e,attrs:{shape:[Kt],value:0,dtype:"int32"}});ct=new ly(Kt,s.shape);let Lr=_e.runWebGPUProgram(ct,[s],"int32",null,yr),Br=vt$2({backend:_e,attrs:{shape:nr,value:0,dtype:Ft}});ct=new my(nr,Ft),hr=[{type:"int32",data:[Mt]}];let Vr=_e.runWebGPUProgram(ct,[fr,Lr],Ft,hr,Br);return _e.disposeData(fr.dataId),_e.disposeData(Lr.dataId),Vr}function xce(o){let{inputs:i,backend:s}=o,{data:_,indices:_e,segmentIds:ct}=i;return dy(_,_e,ct,!1,s)}var _U={kernelName:ya,backendName:"webgpu",kernelFunc:xce};function yce(o){let{inputs:i,backend:s}=o,{data:_,indices:_e,segmentIds:ct}=i;return dy(_,_e,ct,!0,s)}var EU={kernelName:ba,backendName:"webgpu",kernelFunc:yce},fy=class{constructor(o,i){this.variableNames=["A"],this.workgroupSize=[64,1,1],this.size=!0;let s=new Array(o.length);for(let _=0;_<s.length;_++)s[_]=o[_]*i[_];this.outputShape=s,this.dispatchLayout=X$3(this.outputShape),this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize),this.rank=this.outputShape.length,this.shaderKey="tile"}getUserCode(){let o=bce(this.rank,"uniforms.");return`
      ${G$3("index")} {
        if (index < uniforms.size) {
          let resRC = getCoordsFromIndex(index);
          setOutputAtIndex(index, getA(${o}));
        }
      }
    `}};function bce(o,i=""){if(o>=5)throw Error(`Tile for rank ${o} is not yet supported`);if(o===1)return`(resRC % ${i}aShape)`;let s=["resRC.x","resRC.y","resRC.z","resRC.w"],_=[];for(let _e=0;_e<o;_e++)_.push(`(${s[_e]} % ${i}aShape[${_e}])`);return _.join()}function Cm(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{reps:ct}=_;if(s.shouldExecuteOnCPU([_e])||_e.dtype==="string"||_e.shape.length>=5){let Ft=s.readSync(_e.dataId),Ut=_e.dtype==="string"?Ft.map(nr=>y.decodeString(nr)):Ft,Xt=me$1(_e.shape,_e.dtype,Ut),Kt=Uz(Xt,ct);return s.makeTensorInfo(Kt.shape,Kt.dtype,Kt.values)}let Mt=new fy(_e.shape,ct);return s.runWebGPUProgram(Mt,[_e],_e.dtype)}var $U={kernelName:po,backendName:"webgpu",kernelFunc:Cm};function Cce(o){let{inputs:i,backend:s,attrs:_}=o,{sparseIndices:_e,sparseValues:ct,defaultValue:Mt}=i,{outputShape:Ft}=_,{sliceRank:Ut,numUpdates:Xt,sliceSize:Kt,strides:nr,outputSize:rr}=w.calculateShapes(ct,_e,Ft),or=!1;if(ct.dtype==="string"){let so=s.bufferSync(_e),ko=s.bufferSync(ct),To=y.decodeString(s.readSync(Mt.dataId)[0]),oo=Mz(so,ko,Ft,rr,Kt,Xt,Ut,nr,To,or);return s.makeTensorInfo(Ft,oo.dtype,oo.values)}let hr=[rr/Kt,Kt],fr=pe$1({inputs:{x:_e},backend:s,attrs:{shape:[Xt,Ut]}}),yr=ct.shape.length?pe$1({inputs:{x:ct},backend:s,attrs:{shape:[Xt,Kt]}}):At$2({inputs:{x:ct},backend:s}),Lr=yr.dtype,Br=s.makeTensorInfo([],Lr,y.makeZerosTypedArray(1,Lr)),Vr=pe$1({inputs:{x:Mt},backend:s,attrs:{shape:Array(hr.length).fill(1)}}),Wr=Cm({inputs:{x:Vr},backend:s,attrs:{reps:hr}}),ro=[{type:"int32",data:[Ut]},{type:"int32",data:nr},{type:"int32",data:[y.sizeFromShape([Xt,Kt])]}];switch(Xt){case 0:break;case 1:{let so=new za([Xt,Kt],Ut,fr.shape.length,yr.shape.length,nr,hr,Lr,or);s.runWebGPUProgram(so,[yr,fr],Lr,ro,Wr)}break;default:{let so=new za([Xt,Kt],Ut,fr.shape.length,Br.shape.length,nr,hr,Lr,or);s.runWebGPUProgram(so,[Br,fr],Lr,ro,Wr)}{let so=new za([Xt,Kt],Ut,fr.shape.length,yr.shape.length,nr,hr,Lr);s.runWebGPUProgram(so,[yr,fr],Lr,ro,Wr)}}let no=pe$1({inputs:{x:Wr},backend:s,attrs:{shape:Ft}});return s.disposeData(fr.dataId),s.disposeData(yr.dataId),s.disposeData(Vr.dataId),s.disposeData(Br.dataId),s.disposeData(Wr.dataId),no}var RU={kernelName:vs,backendName:"webgpu",kernelFunc:Cce};function wce(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{numOrSizeSplits:ct,axis:Mt}=_,Ft=y.parseAxisParam(Mt,_e.shape)[0],Ut=w.prepareSplitSize(_e,ct,Ft),Xt=_e.shape.length,Kt=new Array(Xt).fill(0),nr=_e.shape.slice();return Ut.map(rr=>{let or=[...nr];or[Ft]=rr;let hr=Hs({inputs:{x:_e},backend:s,attrs:{begin:Kt,size:or}});return Kt[Ft]+=rr,hr})}var DU={kernelName:xa,backendName:"webgpu",kernelFunc:wce},Sce=ye$1({opType:Z$1.SQRT}),AU={kernelName:ws,backendName:"webgpu",kernelFunc:Sce},FU={kernelName:qi,backendName:"webgpu",kernelFunc:({inputs:o,backend:i})=>{let{x:s}=o,_=i,_e=new Jr(s.shape,Z$1.SQUARE);return _.runWebGPUProgram(_e,[s],s.dtype)}},Ice=et({opType:fe$1.SQUARED_DIFFERENCE}),PU={kernelName:ks,backendName:"webgpu",kernelFunc:Ice};function vce({inputs:o,attrs:i,backend:s}){let{x:_}=o,_e=new Jr(_.shape,Z$1.STEP,"stepAlpha : f32,"),ct=[{type:"float32",data:[i.alpha]}];return s.runWebGPUProgram(_e,[_],_.dtype,ct)}var OU={kernelName:wo,backendName:"webgpu",kernelFunc:vce},hy=class{constructor(o){this.variableNames=["x"],this.workPerThread=1,this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=o,this.dispatchLayout=X$3(this.outputShape),this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize,[this.workPerThread,1,1]);let i=ft(this.outputShape.length);this.uniforms=`begin : ${i},  strides : ${i}, `,this.shaderKey="stridedSlice"}getUserCode(){let o="";if(this.outputShape.length===1)o="coords * uniforms.strides + uniforms.begin";else{let i=0;o=this.outputShape.map((s,_)=>(i++,this.outputShape.length===1?`coords * uniforms.strides[${_}] + uniforms.begin[${_}]`:`coords[${i-1}] * uniforms.strides[${_}] + uniforms.begin[${_}]`)).join(",")}return`
       ${G$3("index")} {
         if (index < uniforms.size) {
           let coords = getCoordsFromIndex(index);
           setOutputAtIndex(index, getX(${o}));
         }
       }
     `}};function kce(o){let i,{inputs:s,backend:_,attrs:_e}=o,{x:ct}=s,{begin:Mt,end:Ft,strides:Ut,beginMask:Xt,endMask:Kt,ellipsisMask:nr,newAxisMask:rr,shrinkAxisMask:or}=_e,{finalShapeSparse:hr,finalShape:fr,isIdentity:yr,sliceDim0:Lr,isSimpleSlice:Br,begin:Vr,end:Wr,strides:ro}=pt.sliceInfo(ct.shape,Mt,Ft,Ut,Xt,Kt,nr,rr,or);if(yr)i=pe$1({inputs:{x:ct},backend:_,attrs:{shape:fr}});else if(Lr||Br){y.assert(ct.shape.length>=1,()=>`Input must have rank at least 1, got: ${ct.shape.length}`);let no=pt.computeOutShape(Vr,Wr,ro),so=Hs({inputs:{x:ct},backend:_,attrs:{begin:Vr,size:no}});i=pe$1({inputs:{x:so},backend:_,attrs:{shape:fr}}),_.disposeData(so.dataId)}else if(_.shouldExecuteOnCPU([ct])){let no=_.readSync(ct.dataId),so=me$1(ct.shape,ct.dtype,no),ko=zz(hr,so,ro,Vr);i=_.makeTensorInfo(fr,ct.dtype,ko.values)}else{let no=new hy(hr),so=[{type:"int32",data:Vr},{type:"int32",data:ro}],ko=_.runWebGPUProgram(no,[ct],ct.dtype,so);i=pe$1({inputs:{x:ko},backend:_,attrs:{shape:fr}}),_.disposeData(ko.dataId)}return i}var MU={kernelName:Ns,backendName:"webgpu",kernelFunc:kce};function Nce(o){let{inputs:i,backend:s,attrs:_}=o,{separator:_e,nGramWidths:ct,leftPad:Mt,rightPad:Ft,padWidth:Ut,preserveShortSequences:Xt}=_,{data:Kt,dataSplits:nr}=i,rr=s.readSync(Kt.dataId),or=s.readSync(nr.dataId),[hr,fr]=Vz(rr,or,_e,ct,Mt,Ft,Ut,Xt);return[s.makeTensorInfo([hr.length],"string",hr),s.makeTensorInfo(nr.shape,"int32",fr)]}var LU={kernelName:Ca,backendName:"webgpu",kernelFunc:Nce},Tce=et({opType:fe$1.SUB,cpuKernelImpl:Wz,supportsComplex:!0}),BU={kernelName:Ts,backendName:"webgpu",kernelFunc:Tce},_ce=ye$1({opType:Z$1.TAN}),zU={kernelName:_s,backendName:"webgpu",kernelFunc:_ce},Ece=ye$1({opType:Z$1.TANH}),VU={kernelName:Es,backendName:"webgpu",kernelFunc:Ece};function $ce(o){let{inputs:i,backend:s,attrs:_}=o,{tensor:_e,indices:ct,updates:Mt}=i,{sliceRank:Ft,numUpdates:Ut,sliceSize:Xt,strides:Kt,outputSize:nr}=w.calculateShapes(Mt,ct,_e.shape),rr=[nr/Xt,Xt];if(nr===0)return s.makeTensorInfo(_e.shape,ct.dtype);let or=[],hr=pe$1({inputs:{x:ct},backend:s,attrs:{shape:[Ut,Ft]}});or.push(hr);let fr=pe$1({inputs:{x:Mt},backend:s,attrs:{shape:[Ut,Xt]}});or.push(fr);let yr=pe$1({inputs:{x:_e},backend:s,attrs:{shape:rr}});or.push(yr);let Lr=Cm({inputs:{x:yr},backend:s,attrs:{reps:Array(rr.length).fill(1)}}),Br=new za([Ut,Xt],Ft,hr.shape.length,fr.shape.length,Kt,rr,_e.dtype,!1),Vr=[{type:"int32",data:[Ft]},{type:"int32",data:Kt},{type:"int32",data:[y.sizeFromShape([Ut,Xt])]}],Wr=s.runWebGPUProgram(Br,[fr,hr],yr.dtype,Vr,Lr);or.push(Wr);let ro=pe$1({inputs:{x:Wr},backend:s,attrs:{shape:_e.shape}});return or.forEach(no=>s.disposeData(no.dataId)),ro}var WU={kernelName:ds,backendName:"webgpu",kernelFunc:$ce},gy=class{constructor(o){this.variableNames=["x","indices"],this.workgroupSize=[256,1,1],this.size=!0,this.outputShape=o,this.dispatchLayout=X$3(this.outputShape),this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize),this.uniforms=`inputSize : i32, firstPass : i32, negativeInf : f32,
        dir : i32, inc : i32,`,this.shaderKey="swap"}getUserCode(){return`
        ${G$3("index")} {
          if (index < uniforms.size) {
            let outC = getCoordsFromIndex(index);
            let batch = outC[0];
            let elemIdx = outC[1];
            // We compare elements pair-wise within a group of size 2 * inc.
            // The comparing rule for each group alternates between ascending
            // and descending. Within each group, we compare each pair at
            // positions i and i+inc. To decide whether an element at position i
            // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
            // inc, it is in the first half of the group, we denote it as x0,
            // otherwise we denote it as x1.
            // For example, as shown in the Bitonic top K paper referenced
            // above, Figure5(a) shows that element[1] is in the second half of
            // the group when group size is 2, but it is in the first half of
            // the group when group size is 4.
            let isFirstInPair = elemIdx % (2 * uniforms.inc) < uniforms.inc;
            var i = 0;
            if (isFirstInPair) {
              i = elemIdx;
            } else {
              i = elemIdx - uniforms.inc;
            }

            var i0 = 0;
            if (uniforms.firstPass == 1) {
              i0 = i;
            } else {
              i0 = i32(getIndices(batch, i));
            }

            var i1 = 0;
            if (uniforms.firstPass == 1) {
              i1 = i + uniforms.inc;
            } else {
              i1 = i32(getIndices(batch, i + uniforms.inc));
            }

            var x0 = f32(0.0);
            var x1 = f32(0.0);
            if (i0 < uniforms.inputSize) {
              x0 = getX(batch, i0);
            } else {
              x0 = uniforms.negativeInf;
            }
            if (i1 < uniforms.inputSize) {
              x1 = getX(batch, i1);
            } else {
              x1 = uniforms.negativeInf;
            }

            let reverse = elemIdx % (2 * uniforms.dir) >= uniforms.dir;
            let isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
            if (reverse == isGreater) {
              // Elements in opposite order of direction
              let iTemp = i0;
              i0 = i1;
              i1 = iTemp;
            }
            if (isFirstInPair) {
              setOutputAtIndex(index, f32(i0));
            } else {
              setOutputAtIndex(index, f32(i1));
            }
          }
        }
      `}},xy=class{constructor(o){this.variableNames=["x","indices"],this.workgroupSize=[256,1,1],this.size=!0,this.outputShape=o,this.dispatchLayout=X$3(this.outputShape),this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize),this.uniforms="inputSize : i32, firstPass : i32, k : i32,",this.shaderKey="merge"}getUserCode(){return`
        ${G$3("index")} {
          if (index < uniforms.size) {
            let outC = getCoordsFromIndex(index);
            let batch = outC[0];
            let elemIdx = outC[1];
            // The output size is half of the previous size.
            // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _
            // (k=4), we only need to output the indices at positions |, the
            // indices at positions _ can be thrown away, see Figure5(b) After
            // Phase 2 (Merge phase) in the Bitonic Top K paper referenced
            // above.
            // For example, the paper shows we only need to output the orange
            // bars. The output sequence should look like this | | | | | | | |.
            // Because the sequence is halved, to map the output index back to
            // the previous sequence to find the corresponding value, we need
            // to double the index. When we double the index, we basically
            // interpolate a position, so 2i looks like
            // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k
            // position of each 2k positions by - elemIdx % k. E.g. for output
            // at index 4,5,6,7, we want to get the corresponding element at
            // original index 8,9,10,11, for output at index 8,9,10,11,
            // we want to get the corresponding element at original index
            // 16,17,18,19, so on and so forth.

            var i = 0;
            if (elemIdx < uniforms.k) {
              i = elemIdx;
            } else {
              i = elemIdx * 2 - elemIdx % uniforms.k;
            }
            var i0 = 0;
            if (uniforms.firstPass == 1) {
              i0 = i;
            } else {
              i0 = i32(getIndices(batch, i));
            }
            var i1 = 0;
            if (uniforms.firstPass == 1) {
              i1 = i + uniforms.k;
            } else {
              i1 = i32(getIndices(batch, i + uniforms.k));
            }

            let x0 = getX(batch, i0);
            var x1 = f32(0.0);
            if (i1 < uniforms.inputSize) {
              x1 = getX(batch, i1);
            } else {
              x1 = x0;
            }

            if (x0 >= x1) {
              setOutputAtIndex(index, f32(i0));
            } else {
              setOutputAtIndex(index, f32(i1));
            }
          }
        }
      `}};function rl(o,i){i!==null&&o.disposeData(i.dataId)}function UU(o){let i=1;for(;i<o;)i*=2;return i}function Rce(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e}=i,{k:ct,sorted:Mt}=_,Ft=_e.shape,Ut=Ft[Ft.length-1];if(s.shouldExecuteOnCPU([_e])){let Wr=s.readSync(_e.dataId),[ro,no]=Gz(Wr,Ft,_e.dtype,ct,Mt);return[s.makeTensorInfo(ro.shape,ro.dtype,ro.values),s.makeTensorInfo(no.shape,no.dtype,no.values)]}if(ct===0)return Ft[Ft.length-1]=0,[s.makeTensorInfo(Ft,_e.dtype,[]),s.makeTensorInfo(Ft,"int32",[])];if(Ut===1)return[_e,vt$2({attrs:{shape:Ft,dtype:"int32",value:0},backend:s})];let Xt=y.sizeFromShape(Ft)/Ut,Kt=pe$1({inputs:{x:_e},attrs:{shape:[Xt,Ut]},backend:s}),nr=UU(ct),rr=UU(Ut),or=null,hr=()=>or===null?[Kt,Kt]:[Kt,or],fr=(Wr,ro,no)=>{let so=hr(),ko=new gy(no),To=[{type:"int32",data:[Ut]},{type:"int32",data:[or===null?1:0]},{type:"float32",data:[Number.NEGATIVE_INFINITY]},{type:"int32",data:[Wr]},{type:"int32",data:[ro]}],oo=or;or=s.runWebGPUProgram(ko,so,"int32",To),rl(s,oo)};for(let Wr=1;Wr<nr;Wr*=2){let ro=2*Wr;for(let no=Wr;no>=1;no/=2)fr(ro,no,[Xt,rr])}for(let Wr=rr;Wr>nr;Wr/=2){let ro=hr(),no=new xy([Xt,Wr/2]),so=[{type:"int32",data:[Ut]},{type:"int32",data:[or===null?1:0]},{type:"int32",data:[nr]}],ko=or;or=s.runWebGPUProgram(no,ro,"int32",so),rl(s,ko);let To=nr/2,oo=2*To;for(let No=To;No>=1;No/=2)fr(oo,No,or.shape)}let yr=or;or=Hs({inputs:{x:or},backend:s,attrs:{begin:0,size:[Xt,ct]}}),rl(s,yr);let Lr=c0({inputs:{x:Kt,indices:or},backend:s,attrs:{axis:1,batchDims:1}});rl(s,Kt);let Br=Ft.slice(0,-1);Br.push(ct),yr=or,or=pe$1({inputs:{x:or},attrs:{shape:Br},backend:s}),rl(s,yr);let Vr=Lr;return Lr=pe$1({inputs:{x:Lr},attrs:{shape:Br},backend:s}),rl(s,Vr),[Lr,or]}var GU={kernelName:$s,backendName:"webgpu",kernelFunc:Rce},yy=class{constructor(o){this.variableNames=["Image","Transforms"],this.uniforms="interpolationModeId : i32, fillModeId : i32, fillValue : f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=o,this.dispatchLayout=X$3(this.outputShape),this.dispatch=H$2(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="transform"}getUserCode(){return`
          fn mapCoord(outCoord : f32, len : f32) -> f32{
            var inCoord = outCoord;
            if(uniforms.fillModeId == 2) {
              if (inCoord < 0.0) {
                if (len <= 1.0) {
                  inCoord = 0.0;
                } else {
                  let sz2 = 2.0 * len;
                  if (inCoord < sz2) {
                    inCoord = sz2 * f32(i32(f32(-inCoord / sz2))) +
                    inCoord;
                  }
                  if (inCoord < -len) {
                    inCoord = inCoord + sz2;
                  } else {
                    inCoord = -inCoord - 1.0;
                  }
                }
              } else if (inCoord > len - 1.0) {
                if (len <= 1.0) {
                  inCoord = 0.0;
                } else {
                  let sz2 = 2.0 * len;
                  inCoord = inCoord - sz2 * f32(i32(f32(inCoord / sz2)));
                  if (inCoord >= len) {
                    inCoord = sz2 - inCoord - 1.0;
                  }
                }
              }
              return clamp(inCoord, 0.0, len - 1.0);
            } else if (uniforms.fillModeId == 3) {
              if (inCoord < 0.0) {
                if (len <= 1.0) {
                  inCoord = 0.0;
                } else {
                  let sz = len - 1.0;
                  inCoord = inCoord + len * (f32(i32(f32(-inCoord / sz))) + 1.0);
                }
              } else if (inCoord > len - 1.0) {
                if (len <= 1.0) {
                  inCoord = 0.0;
                } else {
                  let sz = len - 1.0;
                  inCoord = inCoord - len * f32(i32(f32(inCoord / sz)));
                }
              }
              return clamp(inCoord, 0.0, len - 1.0);
            } else if (uniforms.fillModeId == 4) {
              return clamp(outCoord, 0.0, len - 1.0);
            }
            return outCoord;
          }
          fn readWithFillValue(batch : i32, coordY : i32, coordX : i32,
            channel : i32) -> f32 {
            var outputValue : f32;
            if (0 <= coordY && coordY < uniforms.imageShape[1] && 0 <= coordX && coordX < uniforms.imageShape[2]) {
                outputValue = getImage(batch, coordY, coordX, channel);
            } else {
              outputValue = uniforms.fillValue;
            }
            return outputValue;
          }

          ${G$3("index")} {
            if (index < uniforms.size) {
              let coords = getCoordsFromIndex(index);
              var outputValue : f32;
              let batch = coords[0];
              let x = coords[2];
              let y = coords[1];
              let channel = coords[3];
              let xf = f32(x);
              let yf = f32(y);
              let a1 = getTransforms(batch, 0);
              let a2 = getTransforms(batch, 1);
              let a3 = getTransforms(batch, 2);
              let b1 = getTransforms(batch, 3);
              let b2 = getTransforms(batch, 4);
              let b3 = getTransforms(batch, 5);
              let c1 = getTransforms(batch, 6);
              let c2 = getTransforms(batch, 7);
              let projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = uniforms.fillValue;
              } else {
                let inX = (a1 * xf + a2 * yf + a3) / projection;
                let inY = (b1 * xf + b2 * yf + b3) / projection;
                let mapX = mapCoord(inX, f32(uniforms.imageShape[2]));
                let mapY = mapCoord(inY, f32(uniforms.imageShape[1]));

                if (uniforms.interpolationModeId == 1) {
                  let coordY = i32(round(mapY));
                  let coordX = i32(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  let yFloor = floor(mapY);
                  let xFloor = floor(mapX);
                  let yCeil = yFloor + 1.0;
                  let xCeil = xFloor + 1.0;
                  let valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, i32(yFloor), i32(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, i32(yFloor), i32(xCeil), channel);
                  let valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, i32(yCeil), i32(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, i32(yCeil), i32(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutputAtIndex(index, outputValue);
            }
          }
        `}};function Dce(o){let i,{inputs:s,backend:_,attrs:_e}=o,{image:ct,transforms:Mt}=s,{interpolation:Ft,fillMode:Ut,fillValue:Xt,outputShape:Kt}=_e,[nr,rr,or,hr]=ct.shape,[fr,yr]=Kt??[rr,or],Lr=new yy([nr,fr,yr,hr]),Br=Ft==="nearest"?1:2;switch(Ut){case"constant":default:i=1;break;case"reflect":i=2;break;case"wrap":i=3;break;case"nearest":i=4}let Vr=[{type:"int32",data:[Br]},{type:"int32",data:[i]},{type:"float32",data:[Xt]}];return _.runWebGPUProgram(Lr,[ct,Mt],"float32",Vr)}var HU={kernelName:Rs,backendName:"webgpu",kernelFunc:Dce};function Ace(o){let{inputs:i,backend:s,attrs:_}=o,{value:_e}=i,{axis:ct}=_;ct<0&&(ct+=_e.shape.length);let Mt=_e,Ft=Mt.shape.length,Ut=_e.shape[ct],Xt=new Array(Ft-1),Kt=0;for(let fr=0;fr<Ft;fr++)fr!==ct&&(Xt[Kt++]=Mt.shape[fr]);let nr=[],rr=new Array(Ft).fill(0),or=Mt.shape.slice();or[ct]=1;let hr=new Array(Ut);for(let fr=0;fr<hr.length;fr++){rr[ct]=fr;let yr=Hs({inputs:{x:Mt},backend:s,attrs:{begin:rr,size:or}}),Lr=pe$1({inputs:{x:yr},backend:s,attrs:{shape:Xt}});hr[fr]=Lr,nr.push(yr)}return nr.forEach(fr=>s.disposeData(fr.dataId)),hr}var KU={kernelName:wa,backendName:"webgpu",kernelFunc:Ace},by=class{constructor(o,i,s){if(this.outputShape=[],this.variableNames=["x","segmentIds"],this.uniforms="numSegments : i32, xSize: i32,",this.workgroupSize=[64,1,1],this.atomic=!0,this.outputShape=i,this.dispatchLayout=X$3(o),this.dispatch=H$2(this.dispatchLayout,o,this.workgroupSize),s!=="float32"&&s!=="int32")throw new Error(`UnsortedSegmentSum only supports float32 and int32
              types, does not support ${s} type.`);this.type=s,this.shaderKey="unsortedSegmentSum"}getUserCode(){return`
    ${G$3("index")} {
      if (index < uniforms.xSize) {
        let coords = getXCoordsFromIndex(index);
        let b = coords[0];
        let inCol = coords[1];

        let segmentId = i32(getSegmentIds(inCol));
        if (segmentId >= 0) {
          let flatIndex = b * uniforms.numSegments + segmentId % uniforms.numSegments;
          let value = getX(b, inCol);

          ${Qr("&result[flatIndex]","value",this.type)}
        }
      }
    }
  `}};function Fce(o){let{inputs:i,backend:s,attrs:_}=o,{x:_e,segmentIds:ct}=i,{numSegments:Mt}=_,Ft=_e.shape.length,Ut=[],Xt=0,Kt=w.getAxesPermutation([Xt],Ft),nr=_e;Kt!=null&&(nr=xr({inputs:{x:_e},backend:s,attrs:{perm:Kt}}),Ut.push(nr),Xt=w.getInnerMostAxes(1,Ft)[0]);let rr=w.segment_util.computeOutShape(nr.shape,Xt,Mt),or=y.sizeFromShape([nr.shape[Xt]]),hr=pe$1({inputs:{x:nr},backend:s,attrs:{shape:[-1,or]}});Ut.push(hr);let fr=_e.dtype,yr=[hr.shape[0],Mt],Lr=vt$2({backend:s,attrs:{shape:yr,value:0,dtype:fr}}),Br=new by(hr.shape,yr,fr),Vr=[{type:"int32",data:[Mt]},{type:"int32",data:[y.sizeFromShape(hr.shape)]}],Wr=s.runWebGPUProgram(Br,[hr,ct],fr,Vr,Lr),ro=pe$1({inputs:{x:Wr},backend:s,attrs:{shape:rr}});Ut.push(Wr);let no=ro;if(Kt!=null){Ut.push(ro);let so=w.getUndoAxesPermutation(Kt);no=xr({inputs:{x:no},backend:s,attrs:{perm:so}})}return Ut.forEach(so=>s.disposeData(so.dataId)),no}var qU={kernelName:Qi,backendName:"webgpu",kernelFunc:Fce},Pce=[pz,Kz,qz,jz,Xz,Yz,Zz,Jz,eV,tV,rV,oV,nV,sV,aV,pV,cV,lV,mV,dV,hV,gV,xV,wV,SV,IV,lz,kV,TV,_V,EV,$V,RV,DV,AV,FV,PV,OV,BV,zV,VV,WV,GV,HV,UV,KV,qV,jV,XV,YV,JV,eW,tW,rW,oW,nW,sW,aW,iW,iz,uW,lW,pW,cW,mW,dW,fW,hW,gW,xW,yW,cz,bW,NV,CW,wW,SW,IW,vW,kW,NW,_W,TW,EW,$W,RW,AW,FW,iV,PW,OW,BW,MW,LW,zW,uV,VW,WW,UW,GW,KW,QV,qW,jW,XW,yV,YW,JW,eU,tU,rU,oU,nU,sU,bV,aU,iU,uU,pU,uz,cU,lU,mU,dU,fU,hU,gU,xU,yU,bU,CU,wU,SU,IU,vU,kU,fV,OU,MU,LU,HW,NU,TU,_U,EU,RU,DU,AU,FU,PU,BU,ZV,zU,VU,WU,$U,GU,HU,Qz,KU,qU,QW];for(let o of Pce)ti(o);var jU="4.17.0",Oce="4.17.0",Mce="4.17.0",Lce="4.17.0",Bce="4.17.0",zce="4.17.0",Vce={tfjs:jU,"tfjs-core":jU,"tfjs-converter":Oce,"tfjs-backend-cpu":Mce,"tfjs-backend-webgl":Lce,"tfjs-backend-wasm":Bce,"tfjs-backend-webgpu":zce},E7t=void 0;function log(...o){const i=new Date,s=`${i.getHours().toString().padStart(2,"0")}:${i.getMinutes().toString().padStart(2,"0")}:${i.getSeconds().toString().padStart(2,"0")}.${i.getMilliseconds().toString().padStart(3,"0")}`;o&&console.log(s,"Human:",...o)}function join(o,i){const s=o.endsWith("/")?"":"/",_=i.startsWith(".")||i.startsWith("/")||i.startsWith("http:")||i.startsWith("https:")||i.startsWith("file:")?`${i}`:`${o}${s}${i}`;if(!_.toLocaleLowerCase().includes(".json"))throw new Error(`modelpath error: expecting json file: ${_}`);return _}var now=()=>typeof performance<"u"?performance.now():parseInt((Number(process.hrtime.bigint())/1e3/1e3).toString());function mergeDeep(...o){const i=s=>s&&typeof s=="object";return o.reduce((s,_)=>(Object.keys(_||{}).forEach(_e=>{const ct=s[_e],Mt=_[_e];Array.isArray(ct)&&Array.isArray(Mt)?s[_e]=ct.concat(...Mt):i(ct)&&i(Mt)?s[_e]=mergeDeep(ct,Mt):s[_e]=Mt}),s),{})}var _canvas,_image,_imageData;function canvas(o,i){let s;if(env.browser)if(env.worker){if(typeof OffscreenCanvas>"u")throw new Error("canvas error: attempted to run in web worker but OffscreenCanvas is not supported");s=new OffscreenCanvas(o,i)}else if(typeof document<"u")s=document.createElement("canvas"),s.width=o,s.height=i;else{if(typeof navigator>"u"||navigator.product!=="ReactNative")throw new Error("canvas error: attempted to run in browser but DOM is not defined");if(env.Canvas!==void 0)s=new env.Canvas(o,i);else{if(globalThis.Canvas===void 0)throw new Error("canvas error: attempted to use canvas in react-native without canvas support installed");s=new globalThis.Canvas(o,i)}}else env.Canvas!==void 0?s=new env.Canvas(o,i):globalThis.Canvas!==void 0&&(s=new globalThis.Canvas(o,i));return s}var Env=class{constructor(){if(__publicField(this,"browser"),__publicField(this,"node"),__publicField(this,"worker"),__publicField(this,"platform",""),__publicField(this,"agent",""),__publicField(this,"backends",[]),__publicField(this,"initial"),__publicField(this,"filter"),__publicField(this,"tfjs"),__publicField(this,"offscreen"),__publicField(this,"perfadd",!1),__publicField(this,"tensorflow",{version:void 0,gpu:void 0}),__publicField(this,"wasm",{supported:void 0,backend:void 0,simd:void 0,multithread:void 0}),__publicField(this,"webgl",{supported:void 0,backend:void 0,version:void 0,renderer:void 0,shader:void 0,vendor:void 0}),__publicField(this,"webgpu",{supported:void 0,backend:void 0,adapter:void 0}),__publicField(this,"cpu",{model:void 0,flags:[]}),__publicField(this,"kernels",[]),__privateAdd(this,_canvas,void 0),__privateAdd(this,_image,void 0),__privateAdd(this,_imageData,void 0),this.browser=typeof navigator<"u"&&navigator.appVersion!==void 0,this.node=typeof process<"u"&&process.versions!==void 0&&process.versions.node!==void 0,this.tfjs={version:Vce["tfjs-core"]},this.offscreen=typeof OffscreenCanvas<"u",this.initial=!0,this.worker=this.browser&&this.offscreen?typeof WorkerGlobalScope<"u":void 0,typeof navigator<"u"&&navigator.userAgent!==void 0){const o=navigator.userAgent||"",i=o.match(/\(([^()]+)\)/g);if(i!=null&&i[0]){const s=i[0].match(/\(([^()]+)\)/g);this.platform=s!=null&&s[0]?s[0].replace(/\(|\)/g,""):"",this.agent=o.replace(i[0],""),this.platform[1]&&(this.agent=this.agent.replace(i[1],"")),this.agent=this.agent.replace(/  /g," ")}}else typeof process<"u"&&(this.platform=`${process.platform} ${process.arch}`,this.agent=`NodeJS ${process.version}`)}get Canvas(){return __privateGet(this,_canvas)}set Canvas(o){__privateSet(this,_canvas,o),globalThis.Canvas=o}get Image(){return __privateGet(this,_image)}set Image(o){__privateSet(this,_image,o),globalThis.Image=o}get ImageData(){return __privateGet(this,_imageData)}set ImageData(o){__privateSet(this,_imageData,o),globalThis.ImageData=o}async updateBackend(){this.backends=Object.keys(ur().registryFactory);try{this.tensorflow={version:ak().binding?ak().binding.TF_Version:void 0,gpu:ak().binding?ak().binding.isUsingGpuDevice():void 0}}catch{}this.wasm.supported=typeof WebAssembly<"u",this.wasm.backend=this.backends.includes("wasm"),this.wasm.supported&&this.wasm.backend&&(this.wasm.simd=await A().getAsync("WASM_HAS_SIMD_SUPPORT"),this.wasm.multithread=await A().getAsync("WASM_HAS_MULTITHREAD_SUPPORT"));const o=canvas(100,100),i=o?o.getContext("webgl2"):void 0;this.webgl.supported=i!==void 0,this.webgl.backend=this.backends.includes("webgl"),this.webgl.supported&&this.webgl.backend&&i&&(this.webgl.version=i.getParameter(i.VERSION),this.webgl.vendor=i.getParameter(i.VENDOR),this.webgl.renderer=i.getParameter(i.RENDERER),this.webgl.shader=i.getParameter(i.SHADING_LANGUAGE_VERSION)),this.webgpu.supported=this.browser&&typeof navigator<"u"&&navigator.gpu!==void 0,this.webgpu.backend=this.backends.includes("webgpu");try{if(this.webgpu.supported){const s=await navigator.gpu.requestAdapter();this.webgpu.adapter=await(s==null?void 0:s.requestAdapterInfo())}}catch{this.webgpu.supported=!1}try{this.kernels=Ym(sk()).map(s=>s.kernelName.toLowerCase())}catch{}}updateCPU(){const o={model:"",flags:[]};this.node&&this.platform.startsWith("linux"),this.cpu?this.cpu=o:Object.defineProperty(this,"cpu",{value:o})}};_canvas=new WeakMap,_image=new WeakMap,_imageData=new WeakMap;var env=new Env,models_exports={};__export(models_exports,{"affectnet-mobilenet":()=>affectnet_mobilenet,age:()=>age,"anti-spoofing":()=>anti_spoofing,antispoof:()=>antispoof,blazeface:()=>blazeface,"blazeface-back":()=>blazeface_back,"blazeface-front":()=>blazeface_front,"blazepose-detector":()=>blazepose_detector,"blazepose-full":()=>blazepose_full,"blazepose-heavy":()=>blazepose_heavy,"blazepose-lite":()=>blazepose_lite,centernet:()=>centernet,default:()=>models_default,efficientpose:()=>efficientpose,"efficientpose-i-lite":()=>efficientpose_i_lite,"efficientpose-ii-lite":()=>efficientpose_ii_lite,"efficientpose-iv":()=>efficientpose_iv,emotion:()=>emotion,faceboxes:()=>faceboxes,facemesh:()=>facemesh,"facemesh-attention":()=>facemesh_attention,"facemesh-attention-pinto":()=>facemesh_attention_pinto,"facemesh-detection-full":()=>facemesh_detection_full,"facemesh-detection-short":()=>facemesh_detection_short,faceres:()=>faceres,"faceres-deep":()=>faceres_deep,gear:()=>gear,"gear-e1":()=>gear_e1,"gear-e2":()=>gear_e2,gender:()=>gender,"gender-ssrnet-imdb":()=>gender_ssrnet_imdb,handdetect:()=>handdetect,"handlandmark-full":()=>handlandmark_full,"handlandmark-lite":()=>handlandmark_lite,"handlandmark-sparse":()=>handlandmark_sparse,handskeleton:()=>handskeleton,handtrack:()=>handtrack,"insightface-efficientnet-b0":()=>insightface_efficientnet_b0,"insightface-ghostnet-strides1":()=>insightface_ghostnet_strides1,"insightface-ghostnet-strides2":()=>insightface_ghostnet_strides2,"insightface-mobilenet-emore":()=>insightface_mobilenet_emore,"insightface-mobilenet-swish":()=>insightface_mobilenet_swish,iris:()=>iris,liveness:()=>liveness,meet:()=>meet,mobileface:()=>mobileface,mobilefacenet:()=>mobilefacenet,models:()=>models,"movenet-lightning":()=>movenet_lightning,"movenet-multipose":()=>movenet_multipose,"movenet-thunder":()=>movenet_thunder,nanodet:()=>nanodet,"nanodet-e":()=>nanodet_e,"nanodet-g":()=>nanodet_g,"nanodet-m":()=>nanodet_m,"nanodet-t":()=>nanodet_t,posenet:()=>posenet,rvm:()=>rvm,selfie:()=>selfie});var antispoof=853098,blazeface=538928,centernet=4030290,emotion=820516,facemesh=1477958,faceres=6978814,handlandmark_lite=2023432,handtrack=2964837,iris=2599092,liveness=592976,models=0,movenet_lightning=4650216,affectnet_mobilenet=6920630,age=161240,blazeface_back=538928,blazeface_front=402048,blazepose_detector=5928856,blazepose_full=6339202,blazepose_heavy=27502466,blazepose_lite=2726402,efficientpose=5651240,faceboxes=2013002,facemesh_attention_pinto=2387598,facemesh_attention=2382414,facemesh_detection_full=1026192,facemesh_detection_short=201268,faceres_deep=13957620,gear_e1=112438,gear_e2=112438,gear=1498916,gender_ssrnet_imdb=161236,gender=201808,handdetect=3515612,handlandmark_full=5431368,handlandmark_sparse=5286322,handskeleton=5502280,meet=372228,mobileface=2183192,mobilefacenet=5171976,movenet_multipose=9448838,movenet_thunder=12477112,nanodet=7574558,posenet=5032780,rvm=3739355,selfie=212886,anti_spoofing=853098,efficientpose_i_lite=2269064,efficientpose_ii_lite=5651240,efficientpose_iv=25643252,insightface_efficientnet_b0=13013224,insightface_ghostnet_strides1=8093408,insightface_ghostnet_strides2=8049584,insightface_mobilenet_emore=6938536,insightface_mobilenet_swish=12168584,nanodet_e=12319156,nanodet_g=7574558,nanodet_m=1887474,nanodet_t=5294216,models_default={antispoof,blazeface,centernet,emotion,facemesh,faceres,"handlandmark-lite":handlandmark_lite,handtrack,iris,liveness,models,"movenet-lightning":movenet_lightning,"affectnet-mobilenet":affectnet_mobilenet,age,"blazeface-back":blazeface_back,"blazeface-front":blazeface_front,"blazepose-detector":blazepose_detector,"blazepose-full":blazepose_full,"blazepose-heavy":blazepose_heavy,"blazepose-lite":blazepose_lite,efficientpose,faceboxes,"facemesh-attention-pinto":facemesh_attention_pinto,"facemesh-attention":facemesh_attention,"facemesh-detection-full":facemesh_detection_full,"facemesh-detection-short":facemesh_detection_short,"faceres-deep":faceres_deep,"gear-e1":gear_e1,"gear-e2":gear_e2,gear,"gender-ssrnet-imdb":gender_ssrnet_imdb,gender,handdetect,"handlandmark-full":handlandmark_full,"handlandmark-sparse":handlandmark_sparse,handskeleton,meet,mobileface,mobilefacenet,"movenet-multipose":movenet_multipose,"movenet-thunder":movenet_thunder,nanodet,posenet,rvm,selfie,"anti-spoofing":anti_spoofing,"efficientpose-i-lite":efficientpose_i_lite,"efficientpose-ii-lite":efficientpose_ii_lite,"efficientpose-iv":efficientpose_iv,"insightface-efficientnet-b0":insightface_efficientnet_b0,"insightface-ghostnet-strides1":insightface_ghostnet_strides1,"insightface-ghostnet-strides2":insightface_ghostnet_strides2,"insightface-mobilenet-emore":insightface_mobilenet_emore,"insightface-mobilenet-swish":insightface_mobilenet_swish,"nanodet-e":nanodet_e,"nanodet-g":nanodet_g,"nanodet-m":nanodet_m,"nanodet-t":nanodet_t},options$3={cacheModels:!0,cacheSupported:!0,verbose:!0,debug:!1,modelBasePath:""},modelStats={};async function httpHandler(o,i){return fetch(o,i)}async function loadModel(o){var i,s,_,_e;let ct=join(options$3.modelBasePath,o||"");ct.toLowerCase().endsWith(".json")||(ct+=".json");const Mt=ct.includes("/")?ct.split("/"):ct.split("\\"),Ft=Mt[Mt.length-1].replace(".json",""),Ut="indexeddb://"+Ft;modelStats[Ft]={name:Ft,sizeFromManifest:0,sizeLoadedWeights:0,sizeDesired:models_exports[Ft],inCache:!1,url:""},options$3.cacheSupported=typeof indexedDB<"u";let Xt={};try{Xt=options$3.cacheSupported&&options$3.cacheModels?await di.listModels():{}}catch{options$3.cacheSupported=!1}modelStats[Ft].inCache=options$3.cacheSupported&&options$3.cacheModels&&Object.keys(Xt).includes(Ut),modelStats[Ft].url=modelStats[Ft].inCache?Ut:ct;const Kt=typeof fetch>"u"?{}:{fetchFunc:(or,hr)=>httpHandler(or,hr)};let nr=new Bl(modelStats[Ft].url,Kt),rr=!1;try{nr.findIOHandler(),options$3.debug}catch(or){log("error finding model i/o handler:",ct,or)}try{const or=await((i=nr.handler)==null?void 0:i.load())||null;modelStats[Ft].sizeFromManifest=((s=or==null?void 0:or.weightData)==null?void 0:s.byteLength)||0,or?nr.loadSync(or):nr=await M8(modelStats[Ft].inCache?Ut:ct,Kt),modelStats[Ft].sizeLoadedWeights=((_e=(_=nr.artifacts)==null?void 0:_.weightData)==null?void 0:_e.byteLength)||0,options$3.verbose&&log("load:",{model:Ft,url:nr.modelUrl,bytes:modelStats[Ft].sizeLoadedWeights}),rr=!0}catch(or){log("error loading model:",ct,or)}if(rr&&options$3.cacheModels&&options$3.cacheSupported&&!modelStats[Ft].inCache)try{await nr.save(Ut),options$3.debug}catch(or){log("error saving model:",ct,or)}return nr}function fakeOps(o,i){for(const s of o){const _={kernelName:s,backendName:i.backend,kernelFunc:_e=>{var ct;return i.debug&&log("kernelFunc",s,i.backend,_e),(ct=_e==null?void 0:_e.inputs)==null?void 0:ct.info}};ti(_)}env.kernels=Ym(sk()).map(s=>s.kernelName.toLowerCase())}var draw_exports={};__export(draw_exports,{all:()=>all,body:()=>body,canvas:()=>canvas2,face:()=>face,gesture:()=>gesture,hand:()=>hand,init:()=>init2,object:()=>object,options:()=>options2,person:()=>person});var getCanvasContext=o=>{if(o)if(o.getContext){const i=o.getContext("2d",{willReadFrequently:!0});if(i)return i;log("draw error: cannot get canvas context")}else log("draw error: canvas context not defined");else log("draw error: invalid canvas");return null},rad2deg=o=>Math.round(180*o/Math.PI),replace=(o,i,s)=>o.replace(i,typeof s=="number"?s.toFixed(1):s),colorDepth=(o,i)=>{if(!i.useDepth||o===void 0)return i.color;const s=Uint8ClampedArray.from([127+2*o,127-2*o,255]);return`rgba(${s[0]}, ${s[1]}, ${s[2]}, ${i.alpha})`};function labels(o,i,s,_,_e){const ct=i.replace(/\[.*\]/g,"").split(`
`).map(Ft=>Ft.trim()),Mt=Math.max(0,s);for(let Ft=ct.length-1;Ft>=0;Ft--){const Ut=Ft*_e.lineHeight+_;_e.shadowColor&&_e.shadowColor!==""&&(o.fillStyle=_e.shadowColor,o.fillText(ct[Ft],Mt+5,Ut+16)),o.fillStyle=_e.labelColor,o.fillText(ct[Ft],Mt+4,Ut+15)}}function point(o,i,s,_,_e){o.fillStyle=colorDepth(_,_e),o.beginPath(),o.arc(i,s,_e.pointSize,0,2*Math.PI),o.fill()}function rect(o,i,s,_,_e,ct){if(o.beginPath(),o.lineWidth=ct.lineWidth,ct.useCurves){const Mt=(i+i+_)/2,Ft=(s+s+_e)/2;o.ellipse(Mt,Ft,_/2,_e/2,0,0,2*Math.PI)}else o.moveTo(i+ct.roundRect,s),o.lineTo(i+_-ct.roundRect,s),o.quadraticCurveTo(i+_,s,i+_,s+ct.roundRect),o.lineTo(i+_,s+_e-ct.roundRect),o.quadraticCurveTo(i+_,s+_e,i+_-ct.roundRect,s+_e),o.lineTo(i+ct.roundRect,s+_e),o.quadraticCurveTo(i,s+_e,i,s+_e-ct.roundRect),o.lineTo(i,s+ct.roundRect),o.quadraticCurveTo(i,s,i+ct.roundRect,s),o.closePath();o.stroke()}function lines(o,i,s){if(!(i.length<2)){o.beginPath(),o.moveTo(i[0][0],i[0][1]);for(const _ of i)o.strokeStyle=colorDepth(_[2]||0,s),o.lineTo(Math.trunc(_[0]),Math.trunc(_[1]));o.stroke(),s.fillPolygons&&(o.closePath(),o.fill())}}function curves(o,i,s){if(!(i.length<2))if(o.lineWidth=s.lineWidth,!s.useCurves||i.length<=2)lines(o,i,s);else{o.moveTo(i[0][0],i[0][1]);for(let _=0;_<i.length-2;_++){const _e=(i[_][0]+i[_+1][0])/2,ct=(i[_][1]+i[_+1][1])/2;o.quadraticCurveTo(i[_][0],i[_][1],_e,ct)}o.quadraticCurveTo(i[i.length-2][0],i[i.length-2][1],i[i.length-1][0],i[i.length-1][1]),o.stroke(),s.fillPolygons&&(o.closePath(),o.fill())}}function arrow$3(o,i,s,_=5){let _e,ct,Mt;o.beginPath(),o.moveTo(i[0],i[1]),o.lineTo(s[0],s[1]),_e=Math.atan2(s[1]-i[1],s[0]-i[0]),ct=_*Math.cos(_e)+s[0],Mt=_*Math.sin(_e)+s[1],o.moveTo(ct,Mt),_e+=1/3*(2*Math.PI),ct=_*Math.cos(_e)+s[0],Mt=_*Math.sin(_e)+s[1],o.lineTo(ct,Mt),_e+=1/3*(2*Math.PI),ct=_*Math.cos(_e)+s[0],Mt=_*Math.sin(_e)+s[1],o.lineTo(ct,Mt),o.closePath(),o.stroke(),o.fill()}var options2={color:"rgba(173, 216, 230, 0.6)",labelColor:"rgba(173, 216, 230, 1)",shadowColor:"black",alpha:.5,font:'small-caps 16px "Segoe UI"',lineHeight:18,lineWidth:4,pointSize:2,roundRect:8,drawPoints:!1,drawLabels:!0,drawBoxes:!0,drawAttention:!0,drawGestures:!0,drawPolygons:!0,drawGaze:!0,fillPolygons:!1,useDepth:!0,useCurves:!1,faceLabels:"",bodyLabels:"",bodyPartLabels:"",objectLabels:"",handLabels:"",fingerLabels:"",gestureLabels:""},TRI468=[127,34,139,11,0,37,232,231,120,72,37,39,128,121,47,232,121,128,104,69,67,175,171,148,157,154,155,118,50,101,73,39,40,9,151,108,48,115,131,194,204,211,74,40,185,80,42,183,40,92,186,230,229,118,202,212,214,83,18,17,76,61,146,160,29,30,56,157,173,106,204,194,135,214,192,203,165,98,21,71,68,51,45,4,144,24,23,77,146,91,205,50,187,201,200,18,91,106,182,90,91,181,85,84,17,206,203,36,148,171,140,92,40,39,193,189,244,159,158,28,247,246,161,236,3,196,54,68,104,193,168,8,117,228,31,189,193,55,98,97,99,126,47,100,166,79,218,155,154,26,209,49,131,135,136,150,47,126,217,223,52,53,45,51,134,211,170,140,67,69,108,43,106,91,230,119,120,226,130,247,63,53,52,238,20,242,46,70,156,78,62,96,46,53,63,143,34,227,173,155,133,123,117,111,44,125,19,236,134,51,216,206,205,154,153,22,39,37,167,200,201,208,36,142,100,57,212,202,20,60,99,28,158,157,35,226,113,160,159,27,204,202,210,113,225,46,43,202,204,62,76,77,137,123,116,41,38,72,203,129,142,64,98,240,49,102,64,41,73,74,212,216,207,42,74,184,169,170,211,170,149,176,105,66,69,122,6,168,123,147,187,96,77,90,65,55,107,89,90,180,101,100,120,63,105,104,93,137,227,15,86,85,129,102,49,14,87,86,55,8,9,100,47,121,145,23,22,88,89,179,6,122,196,88,95,96,138,172,136,215,58,172,115,48,219,42,80,81,195,3,51,43,146,61,171,175,199,81,82,38,53,46,225,144,163,110,246,33,7,52,65,66,229,228,117,34,127,234,107,108,69,109,108,151,48,64,235,62,78,191,129,209,126,111,35,143,163,161,246,117,123,50,222,65,52,19,125,141,221,55,65,3,195,197,25,7,33,220,237,44,70,71,139,122,193,245,247,130,33,71,21,162,153,158,159,170,169,150,188,174,196,216,186,92,144,160,161,2,97,167,141,125,241,164,167,37,72,38,12,145,159,160,38,82,13,63,68,71,226,35,111,158,153,154,101,50,205,206,92,165,209,198,217,165,167,97,220,115,218,133,112,243,239,238,241,214,135,169,190,173,133,171,208,32,125,44,237,86,87,178,85,86,179,84,85,180,83,84,181,201,83,182,137,93,132,76,62,183,61,76,184,57,61,185,212,57,186,214,207,187,34,143,156,79,239,237,123,137,177,44,1,4,201,194,32,64,102,129,213,215,138,59,166,219,242,99,97,2,94,141,75,59,235,24,110,228,25,130,226,23,24,229,22,23,230,26,22,231,112,26,232,189,190,243,221,56,190,28,56,221,27,28,222,29,27,223,30,29,224,247,30,225,238,79,20,166,59,75,60,75,240,147,177,215,20,79,166,187,147,213,112,233,244,233,128,245,128,114,188,114,217,174,131,115,220,217,198,236,198,131,134,177,132,58,143,35,124,110,163,7,228,110,25,356,389,368,11,302,267,452,350,349,302,303,269,357,343,277,452,453,357,333,332,297,175,152,377,384,398,382,347,348,330,303,304,270,9,336,337,278,279,360,418,262,431,304,408,409,310,415,407,270,409,410,450,348,347,422,430,434,313,314,17,306,307,375,387,388,260,286,414,398,335,406,418,364,367,416,423,358,327,251,284,298,281,5,4,373,374,253,307,320,321,425,427,411,421,313,18,321,405,406,320,404,405,315,16,17,426,425,266,377,400,369,322,391,269,417,465,464,386,257,258,466,260,388,456,399,419,284,332,333,417,285,8,346,340,261,413,441,285,327,460,328,355,371,329,392,439,438,382,341,256,429,420,360,364,394,379,277,343,437,443,444,283,275,440,363,431,262,369,297,338,337,273,375,321,450,451,349,446,342,467,293,334,282,458,461,462,276,353,383,308,324,325,276,300,293,372,345,447,382,398,362,352,345,340,274,1,19,456,248,281,436,427,425,381,256,252,269,391,393,200,199,428,266,330,329,287,273,422,250,462,328,258,286,384,265,353,342,387,259,257,424,431,430,342,353,276,273,335,424,292,325,307,366,447,345,271,303,302,423,266,371,294,455,460,279,278,294,271,272,304,432,434,427,272,407,408,394,430,431,395,369,400,334,333,299,351,417,168,352,280,411,325,319,320,295,296,336,319,403,404,330,348,349,293,298,333,323,454,447,15,16,315,358,429,279,14,15,316,285,336,9,329,349,350,374,380,252,318,402,403,6,197,419,318,319,325,367,364,365,435,367,397,344,438,439,272,271,311,195,5,281,273,287,291,396,428,199,311,271,268,283,444,445,373,254,339,263,466,249,282,334,296,449,347,346,264,447,454,336,296,299,338,10,151,278,439,455,292,407,415,358,371,355,340,345,372,390,249,466,346,347,280,442,443,282,19,94,370,441,442,295,248,419,197,263,255,359,440,275,274,300,383,368,351,412,465,263,467,466,301,368,389,380,374,386,395,378,379,412,351,419,436,426,322,373,390,388,2,164,393,370,462,461,164,0,267,302,11,12,374,373,387,268,12,13,293,300,301,446,261,340,385,384,381,330,266,425,426,423,391,429,355,437,391,327,326,440,457,438,341,382,362,459,457,461,434,430,394,414,463,362,396,369,262,354,461,457,316,403,402,315,404,403,314,405,404,313,406,405,421,418,406,366,401,361,306,408,407,291,409,408,287,410,409,432,436,410,434,416,411,264,368,383,309,438,457,352,376,401,274,275,4,421,428,262,294,327,358,433,416,367,289,455,439,462,370,326,2,326,370,305,460,455,254,449,448,255,261,446,253,450,449,252,451,450,256,452,451,341,453,452,413,464,463,441,413,414,258,442,441,257,443,442,259,444,443,260,445,444,467,342,445,459,458,250,289,392,290,290,328,460,376,433,435,250,290,392,411,416,433,341,463,464,453,464,465,357,465,412,343,412,399,360,363,440,437,399,456,420,456,363,401,435,288,372,383,353,339,255,249,448,261,255,133,243,190,133,155,112,33,246,247,33,130,25,398,384,286,362,398,414,362,463,341,263,359,467,263,249,255,466,467,260,75,60,166,238,239,79,162,127,139,72,11,37,121,232,120,73,72,39,114,128,47,233,232,128,103,104,67,152,175,148,173,157,155,119,118,101,74,73,40,107,9,108,49,48,131,32,194,211,184,74,185,191,80,183,185,40,186,119,230,118,210,202,214,84,83,17,77,76,146,161,160,30,190,56,173,182,106,194,138,135,192,129,203,98,54,21,68,5,51,4,145,144,23,90,77,91,207,205,187,83,201,18,181,91,182,180,90,181,16,85,17,205,206,36,176,148,140,165,92,39,245,193,244,27,159,28,30,247,161,174,236,196,103,54,104,55,193,8,111,117,31,221,189,55,240,98,99,142,126,100,219,166,218,112,155,26,198,209,131,169,135,150,114,47,217,224,223,53,220,45,134,32,211,140,109,67,108,146,43,91,231,230,120,113,226,247,105,63,52,241,238,242,124,46,156,95,78,96,70,46,63,116,143,227,116,123,111,1,44,19,3,236,51,207,216,205,26,154,22,165,39,167,199,200,208,101,36,100,43,57,202,242,20,99,56,28,157,124,35,113,29,160,27,211,204,210,124,113,46,106,43,204,96,62,77,227,137,116,73,41,72,36,203,142,235,64,240,48,49,64,42,41,74,214,212,207,183,42,184,210,169,211,140,170,176,104,105,69,193,122,168,50,123,187,89,96,90,66,65,107,179,89,180,119,101,120,68,63,104,234,93,227,16,15,85,209,129,49,15,14,86,107,55,9,120,100,121,153,145,22,178,88,179,197,6,196,89,88,96,135,138,136,138,215,172,218,115,219,41,42,81,5,195,51,57,43,61,208,171,199,41,81,38,224,53,225,24,144,110,105,52,66,118,229,117,227,34,234,66,107,69,10,109,151,219,48,235,183,62,191,142,129,126,116,111,143,7,163,246,118,117,50,223,222,52,94,19,141,222,221,65,196,3,197,45,220,44,156,70,139,188,122,245,139,71,162,145,153,159,149,170,150,122,188,196,206,216,92,163,144,161,164,2,167,242,141,241,0,164,37,11,72,12,144,145,160,12,38,13,70,63,71,31,226,111,157,158,154,36,101,205,203,206,165,126,209,217,98,165,97,237,220,218,237,239,241,210,214,169,140,171,32,241,125,237,179,86,178,180,85,179,181,84,180,182,83,181,194,201,182,177,137,132,184,76,183,185,61,184,186,57,185,216,212,186,192,214,187,139,34,156,218,79,237,147,123,177,45,44,4,208,201,32,98,64,129,192,213,138,235,59,219,141,242,97,97,2,141,240,75,235,229,24,228,31,25,226,230,23,229,231,22,230,232,26,231,233,112,232,244,189,243,189,221,190,222,28,221,223,27,222,224,29,223,225,30,224,113,247,225,99,60,240,213,147,215,60,20,166,192,187,213,243,112,244,244,233,245,245,128,188,188,114,174,134,131,220,174,217,236,236,198,134,215,177,58,156,143,124,25,110,7,31,228,25,264,356,368,0,11,267,451,452,349,267,302,269,350,357,277,350,452,357,299,333,297,396,175,377,381,384,382,280,347,330,269,303,270,151,9,337,344,278,360,424,418,431,270,304,409,272,310,407,322,270,410,449,450,347,432,422,434,18,313,17,291,306,375,259,387,260,424,335,418,434,364,416,391,423,327,301,251,298,275,281,4,254,373,253,375,307,321,280,425,411,200,421,18,335,321,406,321,320,405,314,315,17,423,426,266,396,377,369,270,322,269,413,417,464,385,386,258,248,456,419,298,284,333,168,417,8,448,346,261,417,413,285,326,327,328,277,355,329,309,392,438,381,382,256,279,429,360,365,364,379,355,277,437,282,443,283,281,275,363,395,431,369,299,297,337,335,273,321,348,450,349,359,446,467,283,293,282,250,458,462,300,276,383,292,308,325,283,276,293,264,372,447,346,352,340,354,274,19,363,456,281,426,436,425,380,381,252,267,269,393,421,200,428,371,266,329,432,287,422,290,250,328,385,258,384,446,265,342,386,387,257,422,424,430,445,342,276,422,273,424,306,292,307,352,366,345,268,271,302,358,423,371,327,294,460,331,279,294,303,271,304,436,432,427,304,272,408,395,394,431,378,395,400,296,334,299,6,351,168,376,352,411,307,325,320,285,295,336,320,319,404,329,330,349,334,293,333,366,323,447,316,15,315,331,358,279,317,14,316,8,285,9,277,329,350,253,374,252,319,318,403,351,6,419,324,318,325,397,367,365,288,435,397,278,344,439,310,272,311,248,195,281,375,273,291,175,396,199,312,311,268,276,283,445,390,373,339,295,282,296,448,449,346,356,264,454,337,336,299,337,338,151,294,278,455,308,292,415,429,358,355,265,340,372,388,390,466,352,346,280,295,442,282,354,19,370,285,441,295,195,248,197,457,440,274,301,300,368,417,351,465,251,301,389,385,380,386,394,395,379,399,412,419,410,436,322,387,373,388,326,2,393,354,370,461,393,164,267,268,302,12,386,374,387,312,268,13,298,293,301,265,446,340,380,385,381,280,330,425,322,426,391,420,429,437,393,391,326,344,440,438,458,459,461,364,434,394,428,396,262,274,354,457,317,316,402,316,315,403,315,314,404,314,313,405,313,421,406,323,366,361,292,306,407,306,291,408,291,287,409,287,432,410,427,434,411,372,264,383,459,309,457,366,352,401,1,274,4,418,421,262,331,294,358,435,433,367,392,289,439,328,462,326,94,2,370,289,305,455,339,254,448,359,255,446,254,253,449,253,252,450,252,256,451,256,341,452,414,413,463,286,441,414,286,258,441,258,257,442,257,259,443,259,260,444,260,467,445,309,459,250,305,289,290,305,290,460,401,376,435,309,250,392,376,411,433,453,341,464,357,453,465,343,357,412,437,343,399,344,360,440,420,437,456,360,420,363,361,401,288,265,372,353,390,339,249,339,448,255];function connectionsToIndices(o){const i=o.map(s=>s[0]);return i.push(o[o.length-1][1]),i}var pairsLips=[[61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]],pairsLeftEye=[[263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]],pairsLeftEyebrow=[[276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]],pairsLeftIris=[[474,475],[475,476],[476,477],[477,474]],pairsRightEye=[[33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]],pairsRightEyebrow=[[46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]],pairsRightIris=[[469,470],[470,471],[471,472],[472,469]],pairsFaceContour=[[10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]];connectionsToIndices(pairsLips),connectionsToIndices(pairsLeftEye),connectionsToIndices(pairsLeftEyebrow),connectionsToIndices(pairsLeftIris),connectionsToIndices(pairsRightEye),connectionsToIndices(pairsRightEyebrow),connectionsToIndices(pairsRightIris),connectionsToIndices(pairsFaceContour);var LIPS_CONNECTIONS=[[61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]],LEFT_EYE_CONNECTIONS=[[263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]],LEFT_EYEBROW_CONNECTIONS=[[276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]],LEFT_IRIS_CONNECTIONS=[[474,475],[475,476],[476,477],[477,474]],RIGHT_EYE_CONNECTIONS=[[33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]],RIGHT_EYEBROW_CONNECTIONS=[[46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]],RIGHT_IRIS_CONNECTIONS=[[469,470],[470,471],[471,472],[472,469]],FACE_OVAL_CONNECTIONS=[[10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]];function connectionsToIndices2(o){const i=o.map(s=>s[0]);return i.push(o[o.length-1][1]),i}var MEDIAPIPE_FACE_MESH_KEYPOINTS_BY_CONTOUR={lips:connectionsToIndices2(LIPS_CONNECTIONS),leftEye:connectionsToIndices2(LEFT_EYE_CONNECTIONS),leftEyebrow:connectionsToIndices2(LEFT_EYEBROW_CONNECTIONS),leftIris:connectionsToIndices2(LEFT_IRIS_CONNECTIONS),rightEye:connectionsToIndices2(RIGHT_EYE_CONNECTIONS),rightEyebrow:connectionsToIndices2(RIGHT_EYEBROW_CONNECTIONS),rightIris:connectionsToIndices2(RIGHT_IRIS_CONNECTIONS),faceOval:connectionsToIndices2(FACE_OVAL_CONNECTIONS)},indexLabelPairs=Object.entries(MEDIAPIPE_FACE_MESH_KEYPOINTS_BY_CONTOUR).map(([o,i])=>i.map(s=>[s,o])).flat();new Map(indexLabelPairs);var LANDMARKS_REFINEMENT_LIPS_CONFIG=[61,146,91,181,84,17,314,405,321,375,291,185,40,39,37,0,267,269,270,409,78,95,88,178,87,14,317,402,318,324,308,191,80,81,82,13,312,311,310,415,76,77,90,180,85,16,315,404,320,307,306,184,74,73,72,11,302,303,304,408,62,96,89,179,86,15,316,403,319,325,292,183,42,41,38,12,268,271,272,407],LANDMARKS_REFINEMENT_LEFT_EYE_CONFIG=[33,7,163,144,145,153,154,155,133,246,161,160,159,158,157,173,130,25,110,24,23,22,26,112,243,247,30,29,27,28,56,190,226,31,228,229,230,231,232,233,244,113,225,224,223,222,221,189,35,124,46,53,52,65,143,111,117,118,119,120,121,128,245,156,70,63,105,66,107,55,193],LANDMARKS_REFINEMENT_RIGHT_EYE_CONFIG=[263,249,390,373,374,380,381,382,362,466,388,387,386,385,384,398,359,255,339,254,253,252,256,341,463,467,260,259,257,258,286,414,446,261,448,449,450,451,452,453,464,342,445,444,443,442,441,413,265,353,276,283,282,295,372,340,346,347,348,349,350,357,465,383,300,293,334,296,336,285,417],localOptions;function drawLabels(o,i){var s,_,_e,ct,Mt,Ft,Ut,Xt,Kt;if(!localOptions.drawLabels||((s=localOptions.faceLabels)==null?void 0:s.length)===0)return;let nr=localOptions.faceLabels.slice();if(nr=replace(nr,"[id]",o.id.toFixed(0)),o.score&&(nr=replace(nr,"[score]",100*o.score)),o.gender&&(nr=replace(nr,"[gender]",o.gender)),o.genderScore&&(nr=replace(nr,"[genderScore]",100*o.genderScore)),o.age&&(nr=replace(nr,"[age]",o.age)),o.distance&&(nr=replace(nr,"[distance]",100*o.distance)),o.real&&(nr=replace(nr,"[real]",100*o.real)),o.live&&(nr=replace(nr,"[live]",100*o.live)),o.emotion&&o.emotion.length>0){const rr=o.emotion.map(or=>`${Math.trunc(100*or.score)}% ${or.emotion}`);rr.length>3&&(rr.length=3),nr=replace(nr,"[emotions]",rr.join(" "))}(_e=(_=o.rotation)==null?void 0:_.angle)!=null&&_e.roll&&(nr=replace(nr,"[roll]",rad2deg(o.rotation.angle.roll))),(Mt=(ct=o.rotation)==null?void 0:ct.angle)!=null&&Mt.yaw&&(nr=replace(nr,"[yaw]",rad2deg(o.rotation.angle.yaw))),(Ut=(Ft=o.rotation)==null?void 0:Ft.angle)!=null&&Ut.pitch&&(nr=replace(nr,"[pitch]",rad2deg(o.rotation.angle.pitch))),(Kt=(Xt=o.rotation)==null?void 0:Xt.gaze)!=null&&Kt.bearing&&(nr=replace(nr,"[gaze]",rad2deg(o.rotation.gaze.bearing))),labels(i,nr,o.box[0],o.box[1],localOptions)}function drawIrisElipse(o,i){var s,_,_e,ct;if((s=o.annotations)!=null&&s.leftEyeIris&&((_=o.annotations)!=null&&_.leftEyeIris[0])){i.strokeStyle=localOptions.useDepth?"rgba(255, 200, 255, 0.3)":localOptions.color,i.beginPath();const Mt=Math.abs(o.annotations.leftEyeIris[3][0]-o.annotations.leftEyeIris[1][0])/2,Ft=Math.abs(o.annotations.leftEyeIris[4][1]-o.annotations.leftEyeIris[2][1])/2;i.ellipse(o.annotations.leftEyeIris[0][0],o.annotations.leftEyeIris[0][1],Mt,Ft,0,0,2*Math.PI),i.stroke(),localOptions.fillPolygons&&(i.fillStyle=localOptions.useDepth?"rgba(255, 255, 200, 0.3)":localOptions.color,i.fill())}if((_e=o.annotations)!=null&&_e.rightEyeIris&&((ct=o.annotations)!=null&&ct.rightEyeIris[0])){i.strokeStyle=localOptions.useDepth?"rgba(255, 200, 255, 0.3)":localOptions.color,i.beginPath();const Mt=Math.abs(o.annotations.rightEyeIris[3][0]-o.annotations.rightEyeIris[1][0])/2,Ft=Math.abs(o.annotations.rightEyeIris[4][1]-o.annotations.rightEyeIris[2][1])/2;i.ellipse(o.annotations.rightEyeIris[0][0],o.annotations.rightEyeIris[0][1],Mt,Ft,0,0,2*Math.PI),i.stroke(),localOptions.fillPolygons&&(i.fillStyle=localOptions.useDepth?"rgba(255, 255, 200, 0.3)":localOptions.color,i.fill())}}function drawGazeSpheres(o,i){var s;if(localOptions.drawGaze&&((s=o.rotation)!=null&&s.angle)&&typeof Path2D<"u"){i.strokeStyle="pink";const _=o.box[0]+o.box[2]/2-o.box[3]*rad2deg(o.rotation.angle.yaw)/90,_e=o.box[1]+o.box[3]/2+o.box[2]*rad2deg(o.rotation.angle.pitch)/90,ct=new Path2D(`
      M ${o.box[0]+o.box[2]/2} ${o.box[1]}
      C
        ${_} ${o.box[1]},
        ${_} ${o.box[1]+o.box[3]},
        ${o.box[0]+o.box[2]/2} ${o.box[1]+o.box[3]}
    `),Mt=new Path2D(`
      M ${o.box[0]} ${o.box[1]+o.box[3]/2}
      C 
        ${o.box[0]} ${_e},
        ${o.box[0]+o.box[2]} ${_e},
        ${o.box[0]+o.box[2]} ${o.box[1]+o.box[3]/2}
    `);i.stroke(Mt),i.stroke(ct)}}function drawGazeArrows(o,i){var s;if(localOptions.drawGaze&&((s=o.rotation)!=null&&s.gaze.strength)&&o.rotation.gaze.bearing&&o.annotations.leftEyeIris&&o.annotations.rightEyeIris&&o.annotations.leftEyeIris[0]&&o.annotations.rightEyeIris[0]){i.strokeStyle="pink",i.fillStyle="pink";const _=[o.annotations.leftEyeIris[0][0]+Math.sin(o.rotation.gaze.bearing)*o.rotation.gaze.strength*o.box[3],o.annotations.leftEyeIris[0][1]+Math.cos(o.rotation.gaze.bearing)*o.rotation.gaze.strength*o.box[2]];arrow$3(i,[o.annotations.leftEyeIris[0][0],o.annotations.leftEyeIris[0][1]],[_[0],_[1]],4);const _e=[o.annotations.rightEyeIris[0][0]+Math.sin(o.rotation.gaze.bearing)*o.rotation.gaze.strength*o.box[3],o.annotations.rightEyeIris[0][1]+Math.cos(o.rotation.gaze.bearing)*o.rotation.gaze.strength*o.box[2]];arrow$3(i,[o.annotations.rightEyeIris[0][0],o.annotations.rightEyeIris[0][1]],[_e[0],_e[1]],4)}}function drawFacePolygons(o,i){if(localOptions.drawPolygons&&o.mesh.length>=468){i.lineWidth=1;for(let s=0;s<TRI468.length/3;s++)lines(i,[TRI468[3*s+0],TRI468[3*s+1],TRI468[3*s+2]].map(_=>o.mesh[_]),localOptions);drawIrisElipse(o,i)}}function drawFacePoints(o,i){if(localOptions.drawPoints)if((o==null?void 0:o.mesh.length)>=468)for(let s=0;s<o.mesh.length;s++)point(i,o.mesh[s][0],o.mesh[s][1],o.mesh[s][2],localOptions),localOptions.drawAttention&&(LANDMARKS_REFINEMENT_LIPS_CONFIG.includes(s)&&point(i,o.mesh[s][0],o.mesh[s][1],o.mesh[s][2]+127,localOptions),LANDMARKS_REFINEMENT_LEFT_EYE_CONFIG.includes(s)&&point(i,o.mesh[s][0],o.mesh[s][1],o.mesh[s][2]-127,localOptions),LANDMARKS_REFINEMENT_RIGHT_EYE_CONFIG.includes(s)&&point(i,o.mesh[s][0],o.mesh[s][1],o.mesh[s][2]-127,localOptions));else for(const[s,_]of Object.entries((o==null?void 0:o.annotations)||{})){if(!(_!=null&&_[0]))continue;const _e=_[0];point(i,_e[0],_e[1],0,localOptions),localOptions.drawLabels&&labels(i,s,_e[0],_e[1],localOptions)}}function drawFaceBoxes(o,i){localOptions.drawBoxes&&rect(i,o.box[0],o.box[1],o.box[2],o.box[3],localOptions)}function face(o,i,s){if(localOptions=mergeDeep(options2,s),!i||!o)return;const _=getCanvasContext(o);if(_){_.font=localOptions.font,_.strokeStyle=localOptions.color,_.fillStyle=localOptions.color;for(const _e of i)drawFaceBoxes(_e,_),drawLabels(_e,_),_e.mesh&&_e.mesh.length>0&&(drawFacePoints(_e,_),drawFacePolygons(_e,_),drawGazeSpheres(_e,_),drawGazeArrows(_e,_))}}function body(o,i,s){var _,_e;const ct=mergeDeep(options2,s);if(!i||!o)return;const Mt=getCanvasContext(o);if(Mt){Mt.lineJoin="round";for(let Ft=0;Ft<i.length;Ft++){if(Mt.strokeStyle=ct.color,Mt.fillStyle=ct.color,Mt.lineWidth=ct.lineWidth,Mt.font=ct.font,ct.drawBoxes&&i[Ft].box&&i[Ft].box.length===4&&(rect(Mt,i[Ft].box[0],i[Ft].box[1],i[Ft].box[2],i[Ft].box[3],ct),ct.drawLabels&&((_=ct.bodyLabels)==null?void 0:_.length)>0)){let Ut=ct.bodyLabels.slice();Ut=replace(Ut,"[id]",i[Ft].id.toFixed(0)),Ut=replace(Ut,"[score]",100*i[Ft].score),labels(Mt,Ut,i[Ft].box[0],i[Ft].box[1],ct)}if(ct.drawPoints&&i[Ft].keypoints)for(let Ut=0;Ut<i[Ft].keypoints.length;Ut++)i[Ft].keypoints[Ut].score&&i[Ft].keypoints[Ut].score!==0&&(Mt.fillStyle=colorDepth(i[Ft].keypoints[Ut].position[2],ct),point(Mt,i[Ft].keypoints[Ut].position[0],i[Ft].keypoints[Ut].position[1],0,ct));if(ct.drawLabels&&((_e=ct.bodyPartLabels)==null?void 0:_e.length)>0&&i[Ft].keypoints){Mt.font=ct.font;for(const Ut of i[Ft].keypoints){if(!Ut.score||Ut.score===0)continue;let Xt=ct.bodyPartLabels.slice();Xt=replace(Xt,"[label]",Ut.part),Xt=replace(Xt,"[score]",100*Ut.score),labels(Mt,Xt,Ut.position[0],Ut.position[1],ct)}}if(ct.drawPolygons&&i[Ft].keypoints&&i[Ft].annotations)for(const Ut of Object.values(i[Ft].annotations))for(const Xt of Ut)curves(Mt,Xt,ct)}}}function hand(o,i,s){var _,_e;const ct=mergeDeep(options2,s);if(!i||!o)return;const Mt=getCanvasContext(o);if(Mt){Mt.lineJoin="round",Mt.font=ct.font;for(const Ft of i){if(ct.drawBoxes){if(Mt.strokeStyle=ct.color,Mt.fillStyle=ct.color,rect(Mt,Ft.box[0],Ft.box[1],Ft.box[2],Ft.box[3],ct),ct.drawLabels&&((_=ct.handLabels)==null?void 0:_.length)>0){let Ut=ct.handLabels.slice();Ut=replace(Ut,"[id]",Ft.id.toFixed(0)),Ut=replace(Ut,"[label]",Ft.label),Ut=replace(Ut,"[score]",100*Ft.score),labels(Mt,Ut,Ft.box[0],Ft.box[1],ct)}Mt.stroke()}if(ct.drawPoints&&Ft.keypoints&&Ft.keypoints.length>0)for(const Ut of Ft.keypoints)Mt.fillStyle=colorDepth(Ut[2],ct),point(Mt,Ut[0],Ut[1],0,ct);if(ct.drawLabels&&Ft.annotations&&((_e=ct.fingerLabels)==null?void 0:_e.length)>0)for(const[Ut,Xt]of Object.entries(Ft.annotations)){let Kt=ct.fingerLabels.slice();Kt=replace(Kt,"[label]",Ut),labels(Mt,Kt,Xt[Xt.length-1][0],Xt[Xt.length-1][1],ct)}if(ct.drawPolygons&&Ft.annotations){const Ut=Xt=>{if(Xt&&Xt.length!==0&&Xt[0])for(let Kt=0;Kt<Xt.length;Kt++){Mt.beginPath();const nr=Xt[Kt][2]||0;Mt.strokeStyle=colorDepth(Kt*nr,ct),Mt.moveTo(Xt[Kt>0?Kt-1:0][0],Xt[Kt>0?Kt-1:0][1]),Mt.lineTo(Xt[Kt][0],Xt[Kt][1]),Mt.stroke()}};Mt.lineWidth=ct.lineWidth,Ut(Ft.annotations.index),Ut(Ft.annotations.middle),Ut(Ft.annotations.ring),Ut(Ft.annotations.pinky),Ut(Ft.annotations.thumb)}}}}function object(o,i,s){var _;const _e=mergeDeep(options2,s);if(!i||!o)return;const ct=getCanvasContext(o);if(ct){ct.lineJoin="round",ct.font=_e.font;for(const Mt of i)if(_e.drawBoxes){if(ct.strokeStyle=_e.color,ct.fillStyle=_e.color,rect(ct,Mt.box[0],Mt.box[1],Mt.box[2],Mt.box[3],_e),_e.drawLabels&&((_=_e.objectLabels)==null?void 0:_.length)>0){let Ft=_e.objectLabels.slice();Ft=replace(Ft,"[id]",Mt.id.toFixed(0)),Ft=replace(Ft,"[label]",Mt.label),Ft=replace(Ft,"[score]",100*Mt.score),labels(ct,Ft,Mt.box[0],Mt.box[1],_e)}ct.stroke()}}}function gesture(o,i,s){var _;const _e=mergeDeep(options2,s);if(i&&o&&_e.drawGestures&&((_=_e.gestureLabels)==null?void 0:_.length)>0){const ct=getCanvasContext(o);if(!ct)return;ct.font=_e.font,ct.fillStyle=_e.color;let Mt=1;for(let Ft=0;Ft<i.length;Ft++){const[Ut,Xt]=Object.entries(i[Ft]);if(Xt.length>1&&Xt[1].length>0){const Kt=Ut[1]>0?`#${Ut[1]}`:"";let nr=_e.gestureLabels.slice();nr=replace(nr,"[where]",Ut[0]),nr=replace(nr,"[who]",Kt),nr=replace(nr,"[what]",Xt[1]),labels(ct,nr,8,2+Mt*_e.lineHeight,_e),Mt+=1}}}}var defaultLabels={face:`face
    confidence: [score]%
    [gender] [genderScore]%
    age: [age] years
    distance: [distance]cm
    real: [real]%
    live: [live]%
    [emotions]
    roll: [roll]° yaw:[yaw]° pitch:[pitch]°
    gaze: [gaze]°`,body:"body [score]%",bodyPart:"[label] [score]%",object:"[label] [score]%",hand:"[label] [score]%",finger:"[label]",gesture:"[where] [who]: [what]"},drawTime=0;function person(o,i,s){const _=mergeDeep(options2,s);if(!i||!o)return;const _e=getCanvasContext(o);if(_e){_e.lineJoin="round",_e.font=_.font;for(let ct=0;ct<i.length;ct++)if(_.drawBoxes){if(_e.strokeStyle=_.color,_e.fillStyle=_.color,rect(_e,i[ct].box[0],i[ct].box[1],i[ct].box[2],i[ct].box[3],_),_.drawLabels){const Mt=`person #${ct}`;_.shadowColor&&_.shadowColor!==""&&(_e.fillStyle=_.shadowColor,_e.fillText(Mt,i[ct].box[0]+3,1+i[ct].box[1]+_.lineHeight,i[ct].box[2])),_e.fillStyle=_.labelColor,_e.fillText(Mt,i[ct].box[0]+2,0+i[ct].box[1]+_.lineHeight,i[ct].box[2])}_e.stroke()}}}function canvas2(o,i){if(!o||!i)return;const s=getCanvasContext(i);s&&s.drawImage(o,0,0)}async function all(o,i,s){if(!(i!=null&&i.performance)||!o)return null;const _=now(),_e=mergeDeep(options2,s),ct=Promise.all([face(o,i.face,_e),body(o,i.body,_e),hand(o,i.hand,_e),object(o,i.object,_e),gesture(o,i.gesture,_e)]);return drawTime=env.perfadd?drawTime+Math.round(now()-_):Math.round(now()-_),i.performance.draw=drawTime,ct}function init2(){options2.faceLabels=defaultLabels.face,options2.bodyLabels=defaultLabels.body,options2.bodyPartLabels=defaultLabels.bodyPart,options2.handLabels=defaultLabels.hand,options2.fingerLabels=defaultLabels.finger,options2.objectLabels=defaultLabels.object,options2.gestureLabels=defaultLabels.gesture}var blazeposecoords_exports={};__export(blazeposecoords_exports,{connected:()=>connected,kpt:()=>kpt});var kpt=["nose","leftEyeInside","leftEye","leftEyeOutside","rightEyeInside","rightEye","rightEyeOutside","leftEar","rightEar","leftMouth","rightMouth","leftShoulder","rightShoulder","leftElbow","rightElbow","leftWrist","rightWrist","leftPinky","rightPinky","leftIndex","rightIndex","leftThumb","rightThumb","leftHip","rightHip","leftKnee","rightKnee","leftAnkle","rightAnkle","leftHeel","rightHeel","leftFoot","rightFoot","bodyCenter","bodyTop","leftPalm","leftHand","rightPalm","rightHand"],connected={shoulders:["leftShoulder","rightShoulder"],hips:["rightHip","leftHip"],mouth:["leftMouth","rightMouth"],leftLegUpper:["leftHip","leftKnee"],leftLegLower:["leftKnee","leftAnkle"],leftFoot:["leftAnkle","leftHeel","leftFoot"],leftTorso:["leftShoulder","leftHip"],leftArmUpper:["leftShoulder","leftElbow"],leftArmLower:["leftElbow","leftWrist"],leftHand:["leftWrist","leftPalm"],leftHandPinky:["leftPalm","leftPinky"],leftHandIndex:["leftPalm","leftIndex"],leftHandThumb:["leftPalm","leftThumb"],leftEyeOutline:["leftEyeInside","leftEyeOutside"],rightLegUpper:["rightHip","rightKnee"],rightLegLower:["rightKnee","rightAnkle"],rightFoot:["rightAnkle","rightHeel","rightFoot"],rightTorso:["rightShoulder","rightHip"],rightArmUpper:["rightShoulder","rightElbow"],rightArmLower:["rightElbow","rightWrist"],rightHand:["rightWrist","rightPalm"],rightHandPinky:["rightPalm","rightPinky"],rightHandIndex:["rightPalm","rightIndex"],rightHandThumb:["rightPalm","rightThumb"],rightEyeOutline:["rightEyeInside","rightEyeOutside"]},model,inputSize=224,numLayers=5,strides=[8,16,32,32,32];function createAnchors(){const o=[];let i=0;for(;i<numLayers;){let s=0,_=i;for(;_<strides.length&&strides[_]===strides[i];)s+=2,_++;const _e=strides[i],ct=Math.ceil(inputSize/_e),Mt=Math.ceil(inputSize/_e);for(let Ft=0;Ft<ct;++Ft)for(let Ut=0;Ut<Mt;++Ut)for(let Xt=0;Xt<s;++Xt)o.push({x:(Ut+.5)/Mt,y:(Ft+.5)/ct});i=_}Jt(o.map(s=>s.x)),Jt(o.map(s=>s.y))}async function loadDetector(o){if(env.initial&&(model=null),!model&&o.body.detector&&o.body.detector.modelPath){const i=(model=await loadModel(o.body.detector.modelPath))!=null&&model.executor?Object.values(model.modelSignature.inputs):void 0;inputSize=Array.isArray(i)?parseInt(i[0].tensorShape.dim[1].size):0}else o.debug&&model&&log("cached model:",model.modelUrl);return createAnchors(),model}var model2,loadDetect=o=>loadDetector(o);async function loadPose(o){if(env.initial&&(model2=null),model2)o.debug&&log("cached model:",model2.modelUrl);else{const i=(model2=await loadModel(o.body.modelPath))!=null&&model2.executor?Object.values(model2.modelSignature.inputs):void 0;Array.isArray(i)&&parseInt(i[0].tensorShape.dim[1].size)}return model2}var model3;async function load(o){if(env.initial&&(model3=null),model3)o.debug&&log("cached model:",model3.modelUrl);else{const i=(model3=await loadModel(o.object.modelPath))!=null&&model3.executor?Object.values(model3.modelSignature.inputs):void 0;Array.isArray(i)&&parseInt(i[0].tensorShape.dim[2].size)}return model3}var efficientposecoords_exports={};__export(efficientposecoords_exports,{connected:()=>connected2,kpt:()=>kpt2});var kpt2=["head","neck","rightShoulder","rightElbow","rightWrist","chest","leftShoulder","leftElbow","leftWrist","bodyCenter","rightHip","rightKnee","rightAnkle","leftHip","leftKnee","leftAnkle"],connected2={leftLeg:["leftHip","leftKnee","leftAnkle"],rightLeg:["rightHip","rightKnee","rightAnkle"],torso:["leftShoulder","rightShoulder","rightHip","leftHip","leftShoulder"],leftArm:["leftShoulder","leftElbow","leftWrist"],rightArm:["rightShoulder","rightElbow","rightWrist"],head:[]},model4;async function load2(o){return env.initial&&(model4=null),model4?o.debug&&log("cached model:",model4.modelUrl):model4=await loadModel(o.body.modelPath),model4}function generateAnchors(o){const i=o===192?{strides:[4],anchors:[1]}:{strides:[o/16,o/8],anchors:[2,6]},s=[];for(let _=0;_<i.strides.length;_++){const _e=i.strides[_],ct=Math.floor((o+_e-1)/_e),Mt=Math.floor((o+_e-1)/_e),Ft=i.anchors[_];for(let Ut=0;Ut<ct;Ut++){const Xt=_e*(Ut+.5);for(let Kt=0;Kt<Mt;Kt++){const nr=_e*(Kt+.5);for(let rr=0;rr<Ft;rr++)s.push([nr,Xt])}}}return s}var model5,inputSize4=0,model6;async function load3(o){var i;return env.initial&&(model5=null),model5?o.debug&&log("cached model:",model5.modelUrl):model5=await loadModel((i=o.face.detector)==null?void 0:i.modelPath),inputSize4=model5.executor&&model5.inputs[0].shape?model5.inputs[0].shape[2]:256,ke(inputSize4,"int32"),mu(generateAnchors(inputSize4)),model5}async function load4(o){var i,s;return env.initial&&(model6=null),model6?o.debug&&log("cached model:",model6.modelUrl):model6=await loadModel((i=o.face.iris)==null?void 0:i.modelPath),model6!=null&&model6.executor&&((s=model6.inputs)!=null&&s[0].shape)&&model6.inputs[0].shape[2],model6}var model7=null;async function load5(o){var i,s,_,_e,ct,Mt;return env.initial&&(model7=null),(i=o.face.attention)!=null&&i.enabled&&(model7!=null&&model7.signature)&&Object.keys(((s=model7==null?void 0:model7.signature)==null?void 0:s.outputs)||{}).length<6&&(model7=null),model7?o.debug&&log("cached model:",model7.modelUrl):model7=(_=o.face.attention)!=null&&_.enabled?await loadModel(o.face.attention.modelPath):await loadModel((_e=o.face.mesh)==null?void 0:_e.modelPath),model7.executor&&((ct=model7==null?void 0:model7.inputs)!=null&&ct[0].shape)&&((Mt=model7==null?void 0:model7.inputs)==null||Mt[0].shape[2]),model7}var model8,rgb=!1,model9;async function load6(o){var i,s,_;return env.initial&&(model8=null),model8?o.debug&&log("cached model:",model8.modelUrl):(model8=await loadModel((i=o.face.emotion)==null?void 0:i.modelPath),rgb=((_=(s=model8==null?void 0:model8.inputs)==null?void 0:s[0].shape)==null?void 0:_[3])===3),model8}async function load7(o){var i;return env.initial&&(model9=null),model9?o.debug&&log("cached model:",model9.modelUrl):model9=await loadModel((i=o.face.description)==null?void 0:i.modelPath),model9}var model10,model11;async function load8(o){var i;return env.initial&&(model10=null),model10?o.debug&&log("cached model:",model10.modelUrl):model10=await loadModel((i=o.face.antispoof)==null?void 0:i.modelPath),model10}var model12;async function load9(o){var i;return env.initial&&(model11=null),model11?o.debug&&log("cached model:",model11.modelUrl):model11=await loadModel((i=o.face.liveness)==null?void 0:i.modelPath),model11}var model13;async function load10(o){var i;return env.initial&&(model12=null),model12?o.debug&&log("cached model:",model12.modelUrl):model12=await loadModel((i=o.face.gear)==null?void 0:i.modelPath),model12}var model14;async function load11(o){return env.initial&&(model13=null),model13?o.debug&&log("cached model:",model13.modelUrl):model13=await loadModel(o.face.ssrnet.modelPathAge),model13}var model15;async function load12(o){var i;return env.initial&&(model14=null),model14?o.debug&&log("cached model:",model14.modelUrl):model14=await loadModel((i=o.face.ssrnet)==null?void 0:i.modelPathGender),model14}var model16;async function load13(o){var i;return env.initial&&(model15=null),model15?o.debug&&log("cached model:",model15.modelUrl):model15=await loadModel((i=o.face.mobilefacenet)==null?void 0:i.modelPath),model15}async function load14(o){return env.initial&&(model16=null),model16?o.debug&&log("cached model:",model16.modelUrl):model16=await loadModel(o.face.insightface.modelPath),model16}var Finger={thumb:0,index:1,middle:2,ring:3,pinky:4,all:[0,1,2,3,4],nameMapping:{0:"thumb",1:"index",2:"middle",3:"ring",4:"pinky"},pointsMapping:{0:[[0,1],[1,2],[2,3],[3,4]],1:[[0,5],[5,6],[6,7],[7,8]],2:[[0,9],[9,10],[10,11],[11,12]],3:[[0,13],[13,14],[14,15],[15,16]],4:[[0,17],[17,18],[18,19],[19,20]]},getName:o=>Finger.nameMapping[o],getPoints:o=>Finger.pointsMapping[o]},FingerCurl={none:0,half:1,full:2,nameMapping:{0:"none",1:"half",2:"full"},getName:o=>FingerCurl.nameMapping[o]},FingerDirection={verticalUp:0,verticalDown:1,horizontalLeft:2,horizontalRight:3,diagonalUpRight:4,diagonalUpLeft:5,diagonalDownRight:6,diagonalDownLeft:7,nameMapping:{0:"verticalUp",1:"verticalDown",2:"horizontalLeft",3:"horizontalRight",4:"diagonalUpRight",5:"diagonalUpLeft",6:"diagonalDownRight",7:"diagonalDownLeft"},getName:o=>FingerDirection.nameMapping[o]},FingerGesture=class{constructor(o){__publicField(this,"name"),__publicField(this,"curls"),__publicField(this,"directions"),__publicField(this,"weights"),__publicField(this,"weightsRelative"),this.name=o,this.curls={},this.directions={},this.weights=[1,1,1,1,1],this.weightsRelative=[1,1,1,1,1]}curl(o,i,s){this.curls[o]===void 0&&(this.curls[o]=[]),this.curls[o].push([i,s])}direction(o,i,s){this.directions[o]||(this.directions[o]=[]),this.directions[o].push([i,s])}weight(o,i){this.weights[o]=i;const s=this.weights.reduce((_,_e)=>_+_e,0);this.weightsRelative=this.weights.map(_=>5*_/s)}matchAgainst(o,i){let s=0;for(const _ in o){const _e=o[_],ct=this.curls[_];if(ct!==void 0){for(const[Mt,Ft]of ct)if(_e===Mt){s+=Ft*this.weightsRelative[_];break}}else s+=this.weightsRelative[_]}for(const _ in i){const _e=i[_],ct=this.directions[_];if(ct!==void 0){for(const[Mt,Ft]of ct)if(_e===Mt){s+=Ft*this.weightsRelative[_];break}}else s+=this.weightsRelative[_]}return s/10}},{thumb,index:index$1,middle,ring,pinky}=Finger,{none,half,full}=FingerCurl,{verticalUp,verticalDown,horizontalLeft,horizontalRight,diagonalUpRight,diagonalUpLeft,diagonalDownRight,diagonalDownLeft}=FingerDirection,ThumbsUp=new FingerGesture("thumbs up");ThumbsUp.curl(thumb,none,1),ThumbsUp.direction(thumb,verticalUp,1),ThumbsUp.direction(thumb,diagonalUpLeft,.25),ThumbsUp.direction(thumb,diagonalUpRight,.25);for(const o of[Finger.index,Finger.middle,Finger.ring,Finger.pinky])ThumbsUp.curl(o,full,1),ThumbsUp.direction(o,horizontalLeft,1),ThumbsUp.direction(o,horizontalRight,1);var Victory=new FingerGesture("victory");Victory.curl(thumb,half,.5),Victory.curl(thumb,none,.5),Victory.direction(thumb,verticalUp,1),Victory.direction(thumb,diagonalUpLeft,1),Victory.curl(index$1,none,1),Victory.direction(index$1,verticalUp,.75),Victory.direction(index$1,diagonalUpLeft,1),Victory.curl(middle,none,1),Victory.direction(middle,verticalUp,1),Victory.direction(middle,diagonalUpLeft,.75),Victory.curl(ring,full,1),Victory.direction(ring,verticalUp,.2),Victory.direction(ring,diagonalUpLeft,1),Victory.direction(ring,horizontalLeft,.2),Victory.curl(pinky,full,1),Victory.direction(pinky,verticalUp,.2),Victory.direction(pinky,diagonalUpLeft,1),Victory.direction(pinky,horizontalLeft,.2),Victory.weight(index$1,2),Victory.weight(middle,2);var Point$1=new FingerGesture("point");Point$1.curl(thumb,full,1),Point$1.curl(index$1,none,.5),Point$1.curl(middle,full,.5),Point$1.curl(ring,full,.5),Point$1.curl(pinky,full,.5),Point$1.weight(index$1,2),Point$1.weight(middle,2);var MiddleFinger=new FingerGesture("middle finger");MiddleFinger.curl(thumb,none,1),MiddleFinger.curl(index$1,full,.5),MiddleFinger.curl(middle,full,.5),MiddleFinger.curl(ring,full,.5),MiddleFinger.curl(pinky,full,.5),MiddleFinger.weight(index$1,2),MiddleFinger.weight(middle,2);var OpenPalm=new FingerGesture("open palm");OpenPalm.curl(thumb,none,.75),OpenPalm.curl(index$1,none,.75),OpenPalm.curl(middle,none,.75),OpenPalm.curl(ring,none,.75),OpenPalm.curl(pinky,none,.75);var handDetectorModel,handPoseModel;async function loadDetect2(o){var i;return env.initial&&(handDetectorModel=null),handDetectorModel?o.debug&&log("cached model:",handDetectorModel.modelUrl):handDetectorModel=await loadModel((i=o.hand.detector)==null?void 0:i.modelPath),handDetectorModel}async function loadSkeleton(o){var i;return env.initial&&(handPoseModel=null),handPoseModel?o.debug&&log("cached model:",handPoseModel.modelUrl):handPoseModel=await loadModel((i=o.hand.skeleton)==null?void 0:i.modelPath),handPoseModel}var models2=[null,null];async function loadDetect3(o){var i;if(env.initial&&(models2[0]=null),models2[0])o.debug&&log("cached model:",models2[0].modelUrl);else{fakeOps(["tensorlistreserve","enter","tensorlistfromtensor","merge","loopcond","switch","exit","tensorliststack","nextiteration","tensorlistsetitem","tensorlistgetitem","reciprocal","shape","split","where"],o),models2[0]=await loadModel((i=o.hand.detector)==null?void 0:i.modelPath);const s=models2[0].executor?Object.values(models2[0].modelSignature.inputs):void 0;Array.isArray(s)&&parseInt(s[0].tensorShape.dim[1].size),Array.isArray(s)&&parseInt(s[0].tensorShape.dim[2].size)}return models2[0]}async function loadSkeleton2(o){var i;if(env.initial&&(models2[1]=null),models2[1])o.debug&&log("cached model:",models2[1].modelUrl);else{models2[1]=await loadModel((i=o.hand.skeleton)==null?void 0:i.modelPath);const s=models2[1].executor?Object.values(models2[1].modelSignature.inputs):void 0;Array.isArray(s)&&parseInt(s[0].tensorShape.dim[1].size),Array.isArray(s)&&parseInt(s[0].tensorShape.dim[2].size)}return models2[1]}var movenetcoords_exports={};__export(movenetcoords_exports,{connected:()=>connected3,horizontal:()=>horizontal,kpt:()=>kpt3,relative:()=>relative,vertical:()=>vertical});var kpt3=["nose","leftEye","rightEye","leftEar","rightEar","leftShoulder","rightShoulder","leftElbow","rightElbow","leftWrist","rightWrist","leftHip","rightHip","leftKnee","rightKnee","leftAnkle","rightAnkle"],horizontal=[["leftEye","rightEye"],["leftEar","rightEar"],["leftShoulder","rightShoulder"],["leftElbow","rightElbow"],["leftWrist","rightWrist"],["leftHip","rightHip"],["leftKnee","rightKnee"],["leftAnkle","rightAnkle"]],vertical=[["leftKnee","leftShoulder"],["rightKnee","rightShoulder"],["leftAnkle","leftKnee"],["rightAnkle","rightKnee"]],relative=[[["leftHip","rightHip"],["leftShoulder","rightShoulder"]],[["leftElbow","rightElbow"],["leftShoulder","rightShoulder"]]],connected3={leftLeg:["leftHip","leftKnee","leftAnkle"],rightLeg:["rightHip","rightKnee","rightAnkle"],torso:["leftShoulder","rightShoulder","rightHip","leftHip","leftShoulder"],leftArm:["leftShoulder","leftElbow","leftWrist"],rightArm:["rightShoulder","rightElbow","rightWrist"],head:[]},model17;async function load15(o){return!model17||env.initial?model17=await loadModel(o.segmentation.modelPath):o.debug&&log("cached model:",model17.modelUrl),model17}var match_exports={};function distance(o,i,s={order:2,multiplier:25}){if(!o||!o)return Number.MAX_SAFE_INTEGER;let _=0;for(let _e=0;_e<o.length;_e++){const ct=s.order&&s.order!==2?Math.abs(o[_e]-i[_e]):o[_e]-i[_e];_+=s.order&&s.order!==2?ct**s.order:ct*ct}return(s.multiplier||20)*_}__export(match_exports,{distance:()=>distance,find:()=>find$1,similarity:()=>similarity});var normalizeDistance=(o,i,s,_)=>{if(o===0)return 1;const _e=(1-(i===2?Math.sqrt(o):o**(1/i))/100-s)/(_-s);return Math.max(Math.min(_e,1),0)};function similarity(o,i,s={order:2,multiplier:25,min:.2,max:.8}){const _=distance(o,i,s);return normalizeDistance(_,s.order||2,s.min||0,s.max||1)}function find$1(o,i,s={order:2,multiplier:25,threshold:0,min:.2,max:.8}){if(!Array.isArray(o)||!Array.isArray(i)||o.length<64||i.length===0)return{index:-1,distance:Number.POSITIVE_INFINITY,similarity:0};let _=Number.MAX_SAFE_INTEGER,_e=-1;for(let ct=0;ct<i.length;ct++){const Mt=i[ct].length===o.length?distance(o,i[ct],s):Number.MAX_SAFE_INTEGER;if(Mt<_&&(_=Mt,_e=ct),_<(s.threshold||0))break}return{index:_e,distance:_,similarity:normalizeDistance(_,s.order||2,s.min||0,s.max||1)}}var models_exports2={};__export(models_exports2,{Models:()=>Models,validateModel:()=>validateModel});var model18,model19;async function load16(o){var i;return env.initial&&(model18=null),model18?o.debug&&log("cached model:",model18.modelUrl):(fakeOps(["size"],o),model18=await loadModel(o.body.modelPath)),(model18!=null&&model18.executor&&((i=model18==null?void 0:model18.inputs)!=null&&i[0].shape)?model18.inputs[0].shape[2]:0)<64,A().flagRegistry.WEBGL_USE_SHAPES_UNIFORMS&&A().set("WEBGL_USE_SHAPES_UNIFORMS",!1),model18}async function load17(o){if(!model19||env.initial){const i=(model19=await loadModel(o.object.modelPath))!=null&&model19.executor?Object.values(model19.modelSignature.inputs):void 0;Array.isArray(i)&&parseInt(i[0].tensorShape.dim[2].size)}else o.debug&&log("cached model:",model19.modelUrl);return model19}var partNames=["nose","leftEye","rightEye","leftEar","rightEar","leftShoulder","rightShoulder","leftElbow","rightElbow","leftWrist","rightWrist","leftHip","rightHip","leftKnee","rightKnee","leftAnkle","rightAnkle"],partIds=partNames.reduce((o,i,s)=>(o[i]=s,o),{}),connectedPartNames=[["leftHip","leftShoulder"],["leftElbow","leftShoulder"],["leftElbow","leftWrist"],["leftHip","leftKnee"],["leftKnee","leftAnkle"],["rightHip","rightShoulder"],["rightElbow","rightShoulder"],["rightElbow","rightWrist"],["rightHip","rightKnee"],["rightKnee","rightAnkle"],["leftShoulder","rightShoulder"],["leftHip","rightHip"]];connectedPartNames.map(([o,i])=>[partIds[o],partIds[i]]);var model20,model21;async function load18(o){return!model20||env.initial?model20=await loadModel(o.body.modelPath):o.debug&&log("cached model:",model20.modelUrl),model20}var t={},ratio=0;function init3(o){Ot$1([t.r1i,t.r2i,t.r3i,t.r4i,t.downsample_ratio]),t.r1i=ar(0),t.r2i=ar(0),t.r3i=ar(0),t.r4i=ar(0),ratio=o.segmentation.ratio||.5,t.downsample_ratio=ar(ratio)}async function load19(o){return!model21||env.initial?model21=await loadModel(o.segmentation.modelPath):o.debug&&log("cached model:",model21.modelUrl),init3(o),model21}var model22;async function load20(o){return!model22||env.initial?model22=await loadModel(o.segmentation.modelPath):o.debug&&log("cached model:",model22.modelUrl),model22}function validateModel(o,i,s){var _,_e;if(!i||!((_=o==null?void 0:o.config)!=null&&_.validateModels))return null;const ct=["const","placeholder","noop","pad","squeeze","add","sub","mul","div"],Mt=["biasadd","fusedbatchnormv3","matmul","switch","shape","merge","split","broadcastto"],Ft=[],Ut=[],Xt=i.modelUrl,Kt=i.executor;if((_e=Kt==null?void 0:Kt.graph)!=null&&_e.nodes)for(const nr of Object.values(Kt.graph.nodes)){const rr=nr.op.toLowerCase();Ft.includes(rr)||Ft.push(rr)}else!Kt&&o.config.debug&&log("model not loaded",s);for(const nr of Ft)ct.includes(nr)||Mt.includes(nr)||o.env.kernels.includes(nr)||o.env.kernels.includes(nr.replace("_",""))||o.env.kernels.includes(nr.replace("native",""))||o.env.kernels.includes(nr.replace("v2",""))||Ut.push(nr);return o.config.debug&&Ut.length>0&&log("model validation failed:",s,Ut),Ut.length>0?{name:s,missing:Ut,ops:Ft,url:Xt}:null}var Models=class{constructor(o){__publicField(this,"instance"),__publicField(this,"models",{}),this.models={},this.instance=o}stats(){let o=0,i=0,s=0;for(const _e of Object.values(modelStats))o+=_e.sizeFromManifest,i+=_e.sizeLoadedWeights,s+=_e.sizeDesired;const _=s>0?i/s:0;return{numLoadedModels:Object.values(modelStats).length,numDefinedModels:Object.keys(this.models).length,percentageLoaded:_,totalSizeFromManifest:o,totalSizeWeights:i,totalSizeLoading:s,modelStats:Object.values(modelStats)}}reset(){for(const o of Object.keys(this.models))this.models[o]=null}async load(o){var i,s,_,_e,ct,Mt,Ft,Ut,Xt,Kt,nr,rr,or,hr,fr,yr,Lr,Br,Vr,Wr,ro,no,so,ko,To,oo,No;env.initial&&this.reset(),o&&(this.instance=o);const As={};As.blazeface=this.instance.config.face.enabled&&!this.models.blazeface?load3(this.instance.config):null,As.antispoof=this.instance.config.face.enabled&&((i=this.instance.config.face.antispoof)!=null&&i.enabled)&&!this.models.antispoof?load8(this.instance.config):null,As.liveness=this.instance.config.face.enabled&&((s=this.instance.config.face.liveness)!=null&&s.enabled)&&!this.models.liveness?load9(this.instance.config):null,As.faceres=this.instance.config.face.enabled&&((_=this.instance.config.face.description)!=null&&_.enabled)&&!this.models.faceres?load7(this.instance.config):null,As.emotion=this.instance.config.face.enabled&&((_e=this.instance.config.face.emotion)!=null&&_e.enabled)&&!this.models.emotion?load6(this.instance.config):null,As.iris=this.instance.config.face.enabled&&((ct=this.instance.config.face.iris)!=null&&ct.enabled)&&!((Mt=this.instance.config.face.attention)!=null&&Mt.enabled)&&!this.models.iris?load4(this.instance.config):null,As.facemesh=this.instance.config.face.enabled&&((Ft=this.instance.config.face.mesh)!=null&&Ft.enabled)&&!this.models.facemesh?load5(this.instance.config):null,As.gear=this.instance.config.face.enabled&&((Ut=this.instance.config.face.gear)!=null&&Ut.enabled)&&!this.models.gear?load10(this.instance.config):null,As.ssrnetage=this.instance.config.face.enabled&&((Xt=this.instance.config.face.ssrnet)!=null&&Xt.enabled)&&!this.models.ssrnetage?load11(this.instance.config):null,As.ssrnetgender=this.instance.config.face.enabled&&((Kt=this.instance.config.face.ssrnet)!=null&&Kt.enabled)&&!this.models.ssrnetgender?load12(this.instance.config):null,As.mobilefacenet=this.instance.config.face.enabled&&((nr=this.instance.config.face.mobilefacenet)!=null&&nr.enabled)&&!this.models.mobilefacenet?load13(this.instance.config):null,As.insightface=this.instance.config.face.enabled&&((rr=this.instance.config.face.insightface)!=null&&rr.enabled)&&!this.models.insightface?load14(this.instance.config):null,As.blazepose=this.instance.config.body.enabled&&!this.models.blazepose&&((or=this.instance.config.body.modelPath)!=null&&or.includes("blazepose"))?loadPose(this.instance.config):null,As.blazeposedetect=this.instance.config.body.enabled&&!this.models.blazeposedetect&&this.instance.config.body.detector&&this.instance.config.body.detector.modelPath?loadDetect(this.instance.config):null,As.efficientpose=this.instance.config.body.enabled&&!this.models.efficientpose&&((hr=this.instance.config.body.modelPath)!=null&&hr.includes("efficientpose"))?load2(this.instance.config):null,As.movenet=this.instance.config.body.enabled&&!this.models.movenet&&((fr=this.instance.config.body.modelPath)!=null&&fr.includes("movenet"))?load16(this.instance.config):null,As.posenet=this.instance.config.body.enabled&&!this.models.posenet&&((yr=this.instance.config.body.modelPath)!=null&&yr.includes("posenet"))?load18(this.instance.config):null,As.handtrack=this.instance.config.hand.enabled&&!this.models.handtrack&&((Br=(Lr=this.instance.config.hand.detector)==null?void 0:Lr.modelPath)!=null&&Br.includes("handtrack"))?loadDetect3(this.instance.config):null,As.handskeleton=this.instance.config.hand.enabled&&this.instance.config.hand.landmarks&&!this.models.handskeleton&&((Wr=(Vr=this.instance.config.hand.detector)==null?void 0:Vr.modelPath)!=null&&Wr.includes("handtrack"))?loadSkeleton2(this.instance.config):null,this.instance.config.hand.enabled&&!this.models.handdetect&&((no=(ro=this.instance.config.hand.detector)==null?void 0:ro.modelPath)!=null&&no.includes("handdetect"))&&(As.handdetect=loadDetect2(this.instance.config),As.handskeleton=loadSkeleton(this.instance.config)),As.centernet=this.instance.config.object.enabled&&!this.models.centernet&&((so=this.instance.config.object.modelPath)!=null&&so.includes("centernet"))?load(this.instance.config):null,As.nanodet=this.instance.config.object.enabled&&!this.models.nanodet&&((ko=this.instance.config.object.modelPath)!=null&&ko.includes("nanodet"))?load17(this.instance.config):null,As.selfie=this.instance.config.segmentation.enabled&&!this.models.selfie&&((To=this.instance.config.segmentation.modelPath)!=null&&To.includes("selfie"))?load20(this.instance.config):null,As.meet=this.instance.config.segmentation.enabled&&!this.models.meet&&((oo=this.instance.config.segmentation.modelPath)!=null&&oo.includes("meet"))?load15(this.instance.config):null,As.rvm=this.instance.config.segmentation.enabled&&!this.models.rvm&&((No=this.instance.config.segmentation.modelPath)!=null&&No.includes("rvm"))?load19(this.instance.config):null;for(const[Ks,vu]of Object.entries(As))vu!=null&&vu.then&&vu.then(Fu=>this.models[Ks]=Fu);await Promise.all(Object.values(As))}list(){const o=Object.keys(this.models).map(i=>{var s;return{name:i,loaded:this.models[i]!==null,size:0,url:this.models[i]?(s=this.models[i])==null?void 0:s.modelUrl:null}});for(const i of o){const s=Object.keys(modelStats).find(_=>_.startsWith(i.name));s&&(i.size=modelStats[s].sizeLoadedWeights,i.url=modelStats[s].url)}return o}loaded(){return this.list().filter(o=>o.loaded).map(o=>o.name)}validate(){const o=[];for(const i of Object.keys(this.models)){const s=this.models[i];if(!s)continue;const _=validateModel(this.instance,s,i);_&&o.push(_)}return o}};const $d7bdfb9eb0fdf311$var$ENTRY_FOCUS="rovingFocusGroup.onEntryFocus",$d7bdfb9eb0fdf311$var$EVENT_OPTIONS={bubbles:!1,cancelable:!0},$d7bdfb9eb0fdf311$var$GROUP_NAME="RovingFocusGroup",[$d7bdfb9eb0fdf311$var$Collection,$d7bdfb9eb0fdf311$var$useCollection,$d7bdfb9eb0fdf311$var$createCollectionScope]=$e02a7d9cb1dc128c$export$c74125a8e3af6bb2($d7bdfb9eb0fdf311$var$GROUP_NAME),[$d7bdfb9eb0fdf311$var$createRovingFocusGroupContext,$d7bdfb9eb0fdf311$export$c7109489551a4f4]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($d7bdfb9eb0fdf311$var$GROUP_NAME,[$d7bdfb9eb0fdf311$var$createCollectionScope]),[$d7bdfb9eb0fdf311$var$RovingFocusProvider,$d7bdfb9eb0fdf311$var$useRovingFocusContext]=$d7bdfb9eb0fdf311$var$createRovingFocusGroupContext($d7bdfb9eb0fdf311$var$GROUP_NAME),$d7bdfb9eb0fdf311$export$8699f7c8af148338=reactExports.forwardRef((o,i)=>reactExports.createElement($d7bdfb9eb0fdf311$var$Collection.Provider,{scope:o.__scopeRovingFocusGroup},reactExports.createElement($d7bdfb9eb0fdf311$var$Collection.Slot,{scope:o.__scopeRovingFocusGroup},reactExports.createElement($d7bdfb9eb0fdf311$var$RovingFocusGroupImpl,_extends({},o,{ref:i}))))),$d7bdfb9eb0fdf311$var$RovingFocusGroupImpl=reactExports.forwardRef((o,i)=>{const{__scopeRovingFocusGroup:s,orientation:_,loop:_e=!1,dir:ct,currentTabStopId:Mt,defaultCurrentTabStopId:Ft,onCurrentTabStopIdChange:Ut,onEntryFocus:Xt,...Kt}=o,nr=reactExports.useRef(null),rr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(i,nr),or=$f631663db3294ace$export$b39126d51d94e6f3(ct),[hr=null,fr]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:Mt,defaultProp:Ft,onChange:Ut}),[yr,Lr]=reactExports.useState(!1),Br=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(Xt),Vr=$d7bdfb9eb0fdf311$var$useCollection(s),Wr=reactExports.useRef(!1),[ro,no]=reactExports.useState(0);return reactExports.useEffect(()=>{const so=nr.current;if(so)return so.addEventListener($d7bdfb9eb0fdf311$var$ENTRY_FOCUS,Br),()=>so.removeEventListener($d7bdfb9eb0fdf311$var$ENTRY_FOCUS,Br)},[Br]),reactExports.createElement($d7bdfb9eb0fdf311$var$RovingFocusProvider,{scope:s,orientation:_,dir:or,loop:_e,currentTabStopId:hr,onItemFocus:reactExports.useCallback(so=>fr(so),[fr]),onItemShiftTab:reactExports.useCallback(()=>Lr(!0),[]),onFocusableItemAdd:reactExports.useCallback(()=>no(so=>so+1),[]),onFocusableItemRemove:reactExports.useCallback(()=>no(so=>so-1),[])},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends({tabIndex:yr||ro===0?-1:0,"data-orientation":_},Kt,{ref:rr,style:{outline:"none",...o.style},onMouseDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(o.onMouseDown,()=>{Wr.current=!0}),onFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(o.onFocus,so=>{const ko=!Wr.current;if(so.target===so.currentTarget&&ko&&!yr){const To=new CustomEvent($d7bdfb9eb0fdf311$var$ENTRY_FOCUS,$d7bdfb9eb0fdf311$var$EVENT_OPTIONS);if(so.currentTarget.dispatchEvent(To),!To.defaultPrevented){const oo=Vr().filter(No=>No.focusable);$d7bdfb9eb0fdf311$var$focusFirst([oo.find(No=>No.active),oo.find(No=>No.id===hr),...oo].filter(Boolean).map(No=>No.ref.current))}}Wr.current=!1}),onBlur:$e42e1063c40fb3ef$export$b9ecd428b558ff10(o.onBlur,()=>Lr(!1))})))}),$d7bdfb9eb0fdf311$var$ITEM_NAME="RovingFocusGroupItem",$d7bdfb9eb0fdf311$export$ab9df7c53fe8454=reactExports.forwardRef((o,i)=>{const{__scopeRovingFocusGroup:s,focusable:_=!0,active:_e=!1,tabStopId:ct,...Mt}=o,Ft=$1746a345f3d73bb7$export$f680877a34711e37(),Ut=ct||Ft,Xt=$d7bdfb9eb0fdf311$var$useRovingFocusContext($d7bdfb9eb0fdf311$var$ITEM_NAME,s),Kt=Xt.currentTabStopId===Ut,nr=$d7bdfb9eb0fdf311$var$useCollection(s),{onFocusableItemAdd:rr,onFocusableItemRemove:or}=Xt;return reactExports.useEffect(()=>{if(_)return rr(),()=>or()},[_,rr,or]),reactExports.createElement($d7bdfb9eb0fdf311$var$Collection.ItemSlot,{scope:s,id:Ut,focusable:_,active:_e},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.span,_extends({tabIndex:Kt?0:-1,"data-orientation":Xt.orientation},Mt,{ref:i,onMouseDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(o.onMouseDown,hr=>{_?Xt.onItemFocus(Ut):hr.preventDefault()}),onFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(o.onFocus,()=>Xt.onItemFocus(Ut)),onKeyDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(o.onKeyDown,hr=>{if(hr.key==="Tab"&&hr.shiftKey)return void Xt.onItemShiftTab();if(hr.target!==hr.currentTarget)return;const fr=$d7bdfb9eb0fdf311$var$getFocusIntent(hr,Xt.orientation,Xt.dir);if(fr!==void 0){hr.preventDefault();let yr=nr().filter(Lr=>Lr.focusable).map(Lr=>Lr.ref.current);if(fr==="last")yr.reverse();else if(fr==="prev"||fr==="next"){fr==="prev"&&yr.reverse();const Lr=yr.indexOf(hr.currentTarget);yr=Xt.loop?$d7bdfb9eb0fdf311$var$wrapArray(yr,Lr+1):yr.slice(Lr+1)}setTimeout(()=>$d7bdfb9eb0fdf311$var$focusFirst(yr))}})})))}),$d7bdfb9eb0fdf311$var$MAP_KEY_TO_FOCUS_INTENT={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function $d7bdfb9eb0fdf311$var$getDirectionAwareKey(o,i){return i!=="rtl"?o:o==="ArrowLeft"?"ArrowRight":o==="ArrowRight"?"ArrowLeft":o}function $d7bdfb9eb0fdf311$var$getFocusIntent(o,i,s){const _=$d7bdfb9eb0fdf311$var$getDirectionAwareKey(o.key,s);if(!(i==="vertical"&&["ArrowLeft","ArrowRight"].includes(_)||i==="horizontal"&&["ArrowUp","ArrowDown"].includes(_)))return $d7bdfb9eb0fdf311$var$MAP_KEY_TO_FOCUS_INTENT[_]}function $d7bdfb9eb0fdf311$var$focusFirst(o){const i=document.activeElement;for(const s of o)if(s===i||(s.focus(),document.activeElement!==i))return}function $d7bdfb9eb0fdf311$var$wrapArray(o,i){return o.map((s,_)=>o[(i+_)%o.length])}const $d7bdfb9eb0fdf311$export$be92b6f5f03c0fe9=$d7bdfb9eb0fdf311$export$8699f7c8af148338,$d7bdfb9eb0fdf311$export$6d08773d2e66f8f2=$d7bdfb9eb0fdf311$export$ab9df7c53fe8454;function $db6c3485150b8e66$export$1ab7ae714698c4b8(o){const[i,s]=reactExports.useState(void 0);return $9f79659886946c16$export$e5c5a5f917a5871c(()=>{if(o){s({width:o.offsetWidth,height:o.offsetHeight});const _=new ResizeObserver(_e=>{if(!Array.isArray(_e)||!_e.length)return;const ct=_e[0];let Mt,Ft;if("borderBoxSize"in ct){const Ut=ct.borderBoxSize,Xt=Array.isArray(Ut)?Ut[0]:Ut;Mt=Xt.inlineSize,Ft=Xt.blockSize}else Mt=o.offsetWidth,Ft=o.offsetHeight;s({width:Mt,height:Ft})});return _.observe(o,{box:"border-box"}),()=>_.unobserve(o)}s(void 0)},[o]),i}function $010c2913dbd2fe3d$export$5cae361ad82dce8b(o){const i=reactExports.useRef({value:o,previous:o});return reactExports.useMemo(()=>(i.current.value!==o&&(i.current.previous=i.current.value,i.current.value=o),i.current.previous),[o])}const $ce77a8961b41be9e$var$RADIO_NAME="Radio",[$ce77a8961b41be9e$var$createRadioContext,$ce77a8961b41be9e$export$67d2296460f1b002]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($ce77a8961b41be9e$var$RADIO_NAME),[$ce77a8961b41be9e$var$RadioProvider,$ce77a8961b41be9e$var$useRadioContext]=$ce77a8961b41be9e$var$createRadioContext($ce77a8961b41be9e$var$RADIO_NAME),$ce77a8961b41be9e$export$d7b12c4107be0d61=reactExports.forwardRef((o,i)=>{const{__scopeRadio:s,name:_,checked:_e=!1,required:ct,disabled:Mt,value:Ft="on",onCheck:Ut,...Xt}=o,[Kt,nr]=reactExports.useState(null),rr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(i,fr=>nr(fr)),or=reactExports.useRef(!1),hr=!Kt||!!Kt.closest("form");return reactExports.createElement($ce77a8961b41be9e$var$RadioProvider,{scope:s,checked:_e,disabled:Mt},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.button,_extends({type:"button",role:"radio","aria-checked":_e,"data-state":$ce77a8961b41be9e$var$getState(_e),"data-disabled":Mt?"":void 0,disabled:Mt,value:Ft},Xt,{ref:rr,onClick:$e42e1063c40fb3ef$export$b9ecd428b558ff10(o.onClick,fr=>{_e||Ut==null||Ut(),hr&&(or.current=fr.isPropagationStopped(),or.current||fr.stopPropagation())})})),hr&&reactExports.createElement($ce77a8961b41be9e$var$BubbleInput,{control:Kt,bubbles:!or.current,name:_,value:Ft,checked:_e,required:ct,disabled:Mt,style:{transform:"translateX(-100%)"}}))}),$ce77a8961b41be9e$var$INDICATOR_NAME="RadioIndicator",$ce77a8961b41be9e$export$d35a9ffa9a04f9e7=reactExports.forwardRef((o,i)=>{const{__scopeRadio:s,forceMount:_,..._e}=o,ct=$ce77a8961b41be9e$var$useRadioContext($ce77a8961b41be9e$var$INDICATOR_NAME,s);return reactExports.createElement($921a889cee6df7e8$export$99c2b779aa4e8b8b,{present:_||ct.checked},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.span,_extends({"data-state":$ce77a8961b41be9e$var$getState(ct.checked),"data-disabled":ct.disabled?"":void 0},_e,{ref:i})))}),$ce77a8961b41be9e$var$BubbleInput=o=>{const{control:i,checked:s,bubbles:_=!0,..._e}=o,ct=reactExports.useRef(null),Mt=$010c2913dbd2fe3d$export$5cae361ad82dce8b(s),Ft=$db6c3485150b8e66$export$1ab7ae714698c4b8(i);return reactExports.useEffect(()=>{const Ut=ct.current,Xt=window.HTMLInputElement.prototype,Kt=Object.getOwnPropertyDescriptor(Xt,"checked").set;if(Mt!==s&&Kt){const nr=new Event("click",{bubbles:_});Kt.call(Ut,s),Ut.dispatchEvent(nr)}},[Mt,s,_]),reactExports.createElement("input",_extends({type:"radio","aria-hidden":!0,defaultChecked:s},_e,{tabIndex:-1,ref:ct,style:{...o.style,...Ft,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function $ce77a8961b41be9e$var$getState(o){return o?"checked":"unchecked"}const $f99a8c78507165f7$var$ARROW_KEYS=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],$f99a8c78507165f7$var$RADIO_GROUP_NAME="RadioGroup",[$f99a8c78507165f7$var$createRadioGroupContext,$f99a8c78507165f7$export$c547093f11b76da2]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($f99a8c78507165f7$var$RADIO_GROUP_NAME,[$d7bdfb9eb0fdf311$export$c7109489551a4f4,$ce77a8961b41be9e$export$67d2296460f1b002]),$f99a8c78507165f7$var$useRovingFocusGroupScope=$d7bdfb9eb0fdf311$export$c7109489551a4f4(),$f99a8c78507165f7$var$useRadioScope=$ce77a8961b41be9e$export$67d2296460f1b002(),[$f99a8c78507165f7$var$RadioGroupProvider,$f99a8c78507165f7$var$useRadioGroupContext]=$f99a8c78507165f7$var$createRadioGroupContext($f99a8c78507165f7$var$RADIO_GROUP_NAME),$f99a8c78507165f7$export$a98f0dcb43a68a25=reactExports.forwardRef((o,i)=>{const{__scopeRadioGroup:s,name:_,defaultValue:_e,value:ct,required:Mt=!1,disabled:Ft=!1,orientation:Ut,dir:Xt,loop:Kt=!0,onValueChange:nr,...rr}=o,or=$f99a8c78507165f7$var$useRovingFocusGroupScope(s),hr=$f631663db3294ace$export$b39126d51d94e6f3(Xt),[fr,yr]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:ct,defaultProp:_e,onChange:nr});return reactExports.createElement($f99a8c78507165f7$var$RadioGroupProvider,{scope:s,name:_,required:Mt,disabled:Ft,value:fr,onValueChange:yr},reactExports.createElement($d7bdfb9eb0fdf311$export$be92b6f5f03c0fe9,_extends({asChild:!0},or,{orientation:Ut,dir:hr,loop:Kt}),reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends({role:"radiogroup","aria-required":Mt,"aria-orientation":Ut,"data-disabled":Ft?"":void 0,dir:hr},rr,{ref:i}))))}),$f99a8c78507165f7$var$ITEM_NAME="RadioGroupItem",$f99a8c78507165f7$export$9f866c100ef519e4=reactExports.forwardRef((o,i)=>{const{__scopeRadioGroup:s,disabled:_,..._e}=o,ct=$f99a8c78507165f7$var$useRadioGroupContext($f99a8c78507165f7$var$ITEM_NAME,s),Mt=ct.disabled||_,Ft=$f99a8c78507165f7$var$useRovingFocusGroupScope(s),Ut=$f99a8c78507165f7$var$useRadioScope(s),Xt=reactExports.useRef(null),Kt=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(i,Xt),nr=ct.value===_e.value,rr=reactExports.useRef(!1);return reactExports.useEffect(()=>{const or=fr=>{$f99a8c78507165f7$var$ARROW_KEYS.includes(fr.key)&&(rr.current=!0)},hr=()=>rr.current=!1;return document.addEventListener("keydown",or),document.addEventListener("keyup",hr),()=>{document.removeEventListener("keydown",or),document.removeEventListener("keyup",hr)}},[]),reactExports.createElement($d7bdfb9eb0fdf311$export$6d08773d2e66f8f2,_extends({asChild:!0},Ft,{focusable:!Mt,active:nr}),reactExports.createElement($ce77a8961b41be9e$export$d7b12c4107be0d61,_extends({disabled:Mt,required:ct.required,checked:nr},Ut,_e,{name:ct.name,ref:Kt,onCheck:()=>ct.onValueChange(_e.value),onKeyDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(or=>{or.key==="Enter"&&or.preventDefault()}),onFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(_e.onFocus,()=>{var or;rr.current&&((or=Xt.current)===null||or===void 0||or.click())})})))}),$f99a8c78507165f7$export$5fb54c671a65c88=reactExports.forwardRef((o,i)=>{const{__scopeRadioGroup:s,..._}=o,_e=$f99a8c78507165f7$var$useRadioScope(s);return reactExports.createElement($ce77a8961b41be9e$export$d35a9ffa9a04f9e7,_extends({},_e,_,{ref:i}))}),$f99a8c78507165f7$export$be92b6f5f03c0fe9=$f99a8c78507165f7$export$a98f0dcb43a68a25,$f99a8c78507165f7$export$6d08773d2e66f8f2=$f99a8c78507165f7$export$9f866c100ef519e4,$f99a8c78507165f7$export$adb584737d712b70=$f99a8c78507165f7$export$5fb54c671a65c88,SCRadioGroup=reactExports.forwardRef(({className:o,...i},s)=>{const _=i.orientation==="horizontal"?"ns-flex ns-flex-row ns-gap-5":"ns-grid ns-gap-2";return reactExports.createElement($f99a8c78507165f7$export$be92b6f5f03c0fe9,{className:cn$1(_,o),...i,ref:s})});SCRadioGroup.displayName=$f99a8c78507165f7$export$be92b6f5f03c0fe9.displayName;const SCRadioGroupItem=reactExports.forwardRef((o,i)=>{const{variant:s="normal",className:_}=o,_e=cn$1("ns-aspect-square ns-h-6 ns-w-6 ns-rounded-full ns-border ns-border-black ns-text-neutral-900 ns-ring-black focus:ns-outline-none focus-visible:ns-ring-2 focus-visible:ns-ring-black focus-visible:ns-ring-offset-2 disabled:ns-cursor-not-allowed disabled:ns-opacity-50 dark:ns-border-neutral-50 dark:ns-ring-neutral-200 dark:focus-visible:ns-ring-neutral-300",_,{"ns-hidden":s==="image"});return reactExports.createElement($f99a8c78507165f7$export$6d08773d2e66f8f2,{ref:i,className:_e,...o},reactExports.createElement($f99a8c78507165f7$export$adb584737d712b70,{className:"ns-flex ns-items-center ns-justify-center"},s==="normal"&&reactExports.createElement(Circle,{className:"ns-h-5 ns-w-5 ns-fill-current ns-text-current"})))});SCRadioGroupItem.displayName=$f99a8c78507165f7$export$6d08773d2e66f8f2.displayName;const $b73a6c6685e72184$export$b04be29aa201d4f5=reactExports.forwardRef((o,i)=>reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.label,_extends({},o,{ref:i,onMouseDown:s=>{var _;(_=o.onMouseDown)===null||_===void 0||_.call(o,s),!s.defaultPrevented&&s.detail>1&&s.preventDefault()}}))),$b73a6c6685e72184$export$be92b6f5f03c0fe9=$b73a6c6685e72184$export$b04be29aa201d4f5,labelVariants=cva("ns-text-sm ns-font-medium ns-leading-none peer-disabled:ns-cursor-not-allowed peer-disabled:ns-opacity-70"),Label=reactExports.forwardRef(({className:o,...i},s)=>{const _=cn$1({"ns-flex ns-items-center ns-space-x-2 ns-gap-x-2":!0,"has-[:aria-checked]:ns-bg-red-600 ns-flex ns-flex-col ns-gap-y-2 ns-max-w-[190px] ns-w-full ns-rounded-3xl ns-p-6 ns-border ns-border-solid ns-border-grey-200 ns-cursor-pointer":i.variant==="image","ns-border-4 ns-border-solid !ns-border-blue-600":i.active===i.id&&i.variant==="image","!ns-cursor-not-allowed ns-opacity-50":i.disabled});return reactExports.createElement($b73a6c6685e72184$export$be92b6f5f03c0fe9,{ref:s,className:cn$1(labelVariants(),_,o),...i})});Label.displayName=$b73a6c6685e72184$export$be92b6f5f03c0fe9.displayName;const $69cb30bb0017df05$var$TABS_NAME="Tabs",[$69cb30bb0017df05$var$createTabsContext,$69cb30bb0017df05$export$355f5bd209d7b13a]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($69cb30bb0017df05$var$TABS_NAME,[$d7bdfb9eb0fdf311$export$c7109489551a4f4]),$69cb30bb0017df05$var$useRovingFocusGroupScope=$d7bdfb9eb0fdf311$export$c7109489551a4f4(),[$69cb30bb0017df05$var$TabsProvider,$69cb30bb0017df05$var$useTabsContext]=$69cb30bb0017df05$var$createTabsContext($69cb30bb0017df05$var$TABS_NAME),$69cb30bb0017df05$export$b2539bed5023c21c=reactExports.forwardRef((o,i)=>{const{__scopeTabs:s,value:_,onValueChange:_e,defaultValue:ct,orientation:Mt="horizontal",dir:Ft,activationMode:Ut="automatic",...Xt}=o,Kt=$f631663db3294ace$export$b39126d51d94e6f3(Ft),[nr,rr]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:_,onChange:_e,defaultProp:ct});return reactExports.createElement($69cb30bb0017df05$var$TabsProvider,{scope:s,baseId:$1746a345f3d73bb7$export$f680877a34711e37(),value:nr,onValueChange:rr,orientation:Mt,dir:Kt,activationMode:Ut},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends({dir:Kt,"data-orientation":Mt},Xt,{ref:i})))}),$69cb30bb0017df05$var$TAB_LIST_NAME="TabsList",$69cb30bb0017df05$export$9712d22edc0d78c1=reactExports.forwardRef((o,i)=>{const{__scopeTabs:s,loop:_=!0,..._e}=o,ct=$69cb30bb0017df05$var$useTabsContext($69cb30bb0017df05$var$TAB_LIST_NAME,s),Mt=$69cb30bb0017df05$var$useRovingFocusGroupScope(s);return reactExports.createElement($d7bdfb9eb0fdf311$export$be92b6f5f03c0fe9,_extends({asChild:!0},Mt,{orientation:ct.orientation,dir:ct.dir,loop:_}),reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends({role:"tablist","aria-orientation":ct.orientation},_e,{ref:i})))}),$69cb30bb0017df05$var$TRIGGER_NAME="TabsTrigger",$69cb30bb0017df05$export$8114b9fdfdf9f3ba=reactExports.forwardRef((o,i)=>{const{__scopeTabs:s,value:_,disabled:_e=!1,...ct}=o,Mt=$69cb30bb0017df05$var$useTabsContext($69cb30bb0017df05$var$TRIGGER_NAME,s),Ft=$69cb30bb0017df05$var$useRovingFocusGroupScope(s),Ut=$69cb30bb0017df05$var$makeTriggerId(Mt.baseId,_),Xt=$69cb30bb0017df05$var$makeContentId(Mt.baseId,_),Kt=_===Mt.value;return reactExports.createElement($d7bdfb9eb0fdf311$export$6d08773d2e66f8f2,_extends({asChild:!0},Ft,{focusable:!_e,active:Kt}),reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.button,_extends({type:"button",role:"tab","aria-selected":Kt,"aria-controls":Xt,"data-state":Kt?"active":"inactive","data-disabled":_e?"":void 0,disabled:_e,id:Ut},ct,{ref:i,onMouseDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(o.onMouseDown,nr=>{_e||nr.button!==0||nr.ctrlKey!==!1?nr.preventDefault():Mt.onValueChange(_)}),onKeyDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(o.onKeyDown,nr=>{[" ","Enter"].includes(nr.key)&&Mt.onValueChange(_)}),onFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(o.onFocus,()=>{const nr=Mt.activationMode!=="manual";Kt||_e||!nr||Mt.onValueChange(_)})})))}),$69cb30bb0017df05$var$CONTENT_NAME="TabsContent",$69cb30bb0017df05$export$bd905d70e8fd2ebb=reactExports.forwardRef((o,i)=>{const{__scopeTabs:s,value:_,forceMount:_e,children:ct,...Mt}=o,Ft=$69cb30bb0017df05$var$useTabsContext($69cb30bb0017df05$var$CONTENT_NAME,s),Ut=$69cb30bb0017df05$var$makeTriggerId(Ft.baseId,_),Xt=$69cb30bb0017df05$var$makeContentId(Ft.baseId,_),Kt=_===Ft.value,nr=reactExports.useRef(Kt);return reactExports.useEffect(()=>{const rr=requestAnimationFrame(()=>nr.current=!1);return()=>cancelAnimationFrame(rr)},[]),reactExports.createElement($921a889cee6df7e8$export$99c2b779aa4e8b8b,{present:_e||Kt},({present:rr})=>reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends({"data-state":Kt?"active":"inactive","data-orientation":Ft.orientation,role:"tabpanel","aria-labelledby":Ut,hidden:!rr,id:Xt,tabIndex:0},Mt,{ref:i,style:{...o.style,animationDuration:nr.current?"0s":void 0}}),rr&&ct))});function $69cb30bb0017df05$var$makeTriggerId(o,i){return`${o}-trigger-${i}`}function $69cb30bb0017df05$var$makeContentId(o,i){return`${o}-content-${i}`}const $69cb30bb0017df05$export$be92b6f5f03c0fe9=$69cb30bb0017df05$export$b2539bed5023c21c,$69cb30bb0017df05$export$54c2e3dc7acea9f5=$69cb30bb0017df05$export$9712d22edc0d78c1,$69cb30bb0017df05$export$41fb9f06171c75f4=$69cb30bb0017df05$export$8114b9fdfdf9f3ba,$69cb30bb0017df05$export$7c6e2c02157bb7d2=$69cb30bb0017df05$export$bd905d70e8fd2ebb,SCTabs=$69cb30bb0017df05$export$be92b6f5f03c0fe9,SCTabsList=reactExports.forwardRef(({className:o,...i},s)=>reactExports.createElement($69cb30bb0017df05$export$54c2e3dc7acea9f5,{ref:s,className:cn$1("ns-inline-flex ns-h-10 ns-items-center ns-justify-center ns-rounded-md ns-bg-neutral-100 ns-p-1 ns-text-neutral-500 dark:ns-bg-neutral-800 dark:ns-text-neutral-400",o),...i}));SCTabsList.displayName=$69cb30bb0017df05$export$54c2e3dc7acea9f5.displayName;const SCTabsTrigger=reactExports.forwardRef(({className:o,...i},s)=>reactExports.createElement($69cb30bb0017df05$export$41fb9f06171c75f4,{ref:s,className:cn$1("ns-inline-flex ns-items-center ns-justify-center ns-whitespace-nowrap ns-rounded-sm ns-px-3 ns-py-1.5 ns-text-sm ns-font-medium ns-ring-offset-white ns-transition-all focus-visible:ns-outline-none focus-visible:ns-ring-2 focus-visible:ns-ring-neutral-950 focus-visible:ns-ring-offset-2 disabled:ns-pointer-events-none disabled:ns-opacity-50 data-[state=active]:ns-bg-white data-[state=active]:ns-text-neutral-950 data-[state=active]:ns-shadow-sm dark:ns-ring-offset-neutral-950 dark:focus-visible:ns-ring-neutral-300 dark:data-[state=active]:ns-bg-neutral-950 dark:data-[state=active]:ns-text-neutral-50",o),...i}));SCTabsTrigger.displayName=$69cb30bb0017df05$export$41fb9f06171c75f4.displayName;const SCTabsContent=reactExports.forwardRef(({className:o,...i},s)=>reactExports.createElement($69cb30bb0017df05$export$7c6e2c02157bb7d2,{ref:s,className:cn$1("ns-mt-2 ns-ring-offset-white focus-visible:ns-outline-none focus-visible:ns-ring-2 focus-visible:ns-ring-neutral-950 focus-visible:ns-ring-offset-2 dark:ns-ring-offset-neutral-950 dark:focus-visible:ns-ring-neutral-300",o),...i}));SCTabsContent.displayName=$69cb30bb0017df05$export$7c6e2c02157bb7d2.displayName;const tabsVariants=cva("ns-text-grey-500 ns-bg-transparent",{variants:{theme:{light:"",dark:"",revamp:""},variant:{plain:"[&_.tablist]:ns-gap-2 [&_.tablist>button]:ns-px-0 [&_.tablist>button]:ns-rounded-0 [&_.tablist>button]:ns-border-b-grey-500 [&_.tablist>button]:ns-border-b-1 [&_.tablist>[data-state=active]]:ns-font-bold [&_.tablist>[data-state=active]]:ns-shadow-none [&_.tablist>[data-state=active]]:ns-border-b-black [&_.tablist>[data-state=active]]:ns-bg-transparent [&_.tablist]:ns-bg-transparent [&_.tablist]:ns-text-grey-500 [&_.tablist]:ns-text-base [&_.tablist>[data-state=active]]:ns-text-black",segmented:"[&_.tablist>[data-state=active]]:ns-bg-red-600 [&_.tablist>[data-state=active]]:ns-rounded-5 [&_.tablist>[data-state=active]]:ns-shadow-none [&_.tablist>[data-state=active]]:ns-text-white"}},compoundVariants:[{theme:"light",variant:"plain",class:""},{theme:"light",variant:"segmented",class:""},{theme:"dark",variant:"plain",className:"ns-bg-white-50 ns-text-black hover:ns-bg-grey-300 active:ns-bg-grey-400"},{theme:"dark",variant:"segmented",className:""}],defaultVariants:{theme:"light",variant:"plain"}}),Tabs=React__default.forwardRef(({tabs:o,className:i,variant:s,children:_,defaultValue:_e,onValueChange:ct},Mt)=>{const{theme:Ft}=React__default.useContext(ThemeContext);return o.length?React__default.createElement(SCTabs,{defaultValue:_e||"0",className:cn$1(tabsVariants({theme:Ft,variant:s,className:i})),onValueChange:ct,ref:Mt},React__default.createElement(SCTabsList,{className:"tablist"},o.map((Ut,Xt)=>React__default.createElement(SCTabsTrigger,{key:Xt,value:Xt.toString()},Ut))),React__default.Children.map(_,(Ut,Xt)=>React__default.createElement(SCTabsContent,{key:Xt,value:Xt.toString()},Ut))):null});Tabs.displayName="Tabs";function $addc16e1bbe58fd0$export$3a72a57244d6e765(o,i=globalThis==null?void 0:globalThis.document){const s=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(o);reactExports.useEffect(()=>{const _=_e=>{_e.key==="Escape"&&s(_e)};return i.addEventListener("keydown",_),()=>i.removeEventListener("keydown",_)},[s,i])}const $5cb92bef7577960e$var$CONTEXT_UPDATE="dismissableLayer.update",$5cb92bef7577960e$var$POINTER_DOWN_OUTSIDE="dismissableLayer.pointerDownOutside",$5cb92bef7577960e$var$FOCUS_OUTSIDE="dismissableLayer.focusOutside";let $5cb92bef7577960e$var$originalBodyPointerEvents;const $5cb92bef7577960e$var$DismissableLayerContext=reactExports.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),$5cb92bef7577960e$export$177fb62ff3ec1f22=reactExports.forwardRef((o,i)=>{var s;const{disableOutsidePointerEvents:_=!1,onEscapeKeyDown:_e,onPointerDownOutside:ct,onFocusOutside:Mt,onInteractOutside:Ft,onDismiss:Ut,...Xt}=o,Kt=reactExports.useContext($5cb92bef7577960e$var$DismissableLayerContext),[nr,rr]=reactExports.useState(null),or=(s=nr==null?void 0:nr.ownerDocument)!==null&&s!==void 0?s:globalThis==null?void 0:globalThis.document,[,hr]=reactExports.useState({}),fr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(i,ko=>rr(ko)),yr=Array.from(Kt.layers),[Lr]=[...Kt.layersWithOutsidePointerEventsDisabled].slice(-1),Br=yr.indexOf(Lr),Vr=nr?yr.indexOf(nr):-1,Wr=Kt.layersWithOutsidePointerEventsDisabled.size>0,ro=Vr>=Br,no=$5cb92bef7577960e$var$usePointerDownOutside(ko=>{const To=ko.target,oo=[...Kt.branches].some(No=>No.contains(To));ro&&!oo&&(ct==null||ct(ko),Ft==null||Ft(ko),ko.defaultPrevented||Ut==null||Ut())},or),so=$5cb92bef7577960e$var$useFocusOutside(ko=>{const To=ko.target;[...Kt.branches].some(oo=>oo.contains(To))||(Mt==null||Mt(ko),Ft==null||Ft(ko),ko.defaultPrevented||Ut==null||Ut())},or);return $addc16e1bbe58fd0$export$3a72a57244d6e765(ko=>{Vr===Kt.layers.size-1&&(_e==null||_e(ko),!ko.defaultPrevented&&Ut&&(ko.preventDefault(),Ut()))},or),reactExports.useEffect(()=>{if(nr)return _&&(Kt.layersWithOutsidePointerEventsDisabled.size===0&&($5cb92bef7577960e$var$originalBodyPointerEvents=or.body.style.pointerEvents,or.body.style.pointerEvents="none"),Kt.layersWithOutsidePointerEventsDisabled.add(nr)),Kt.layers.add(nr),$5cb92bef7577960e$var$dispatchUpdate(),()=>{_&&Kt.layersWithOutsidePointerEventsDisabled.size===1&&(or.body.style.pointerEvents=$5cb92bef7577960e$var$originalBodyPointerEvents)}},[nr,or,_,Kt]),reactExports.useEffect(()=>()=>{nr&&(Kt.layers.delete(nr),Kt.layersWithOutsidePointerEventsDisabled.delete(nr),$5cb92bef7577960e$var$dispatchUpdate())},[nr,Kt]),reactExports.useEffect(()=>{const ko=()=>hr({});return document.addEventListener($5cb92bef7577960e$var$CONTEXT_UPDATE,ko),()=>document.removeEventListener($5cb92bef7577960e$var$CONTEXT_UPDATE,ko)},[]),reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends({},Xt,{ref:fr,style:{pointerEvents:Wr?ro?"auto":"none":void 0,...o.style},onFocusCapture:$e42e1063c40fb3ef$export$b9ecd428b558ff10(o.onFocusCapture,so.onFocusCapture),onBlurCapture:$e42e1063c40fb3ef$export$b9ecd428b558ff10(o.onBlurCapture,so.onBlurCapture),onPointerDownCapture:$e42e1063c40fb3ef$export$b9ecd428b558ff10(o.onPointerDownCapture,no.onPointerDownCapture)}))});function $5cb92bef7577960e$var$usePointerDownOutside(o,i=globalThis==null?void 0:globalThis.document){const s=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(o),_=reactExports.useRef(!1),_e=reactExports.useRef(()=>{});return reactExports.useEffect(()=>{const ct=Ft=>{if(Ft.target&&!_.current){let Ut=function(){$5cb92bef7577960e$var$handleAndDispatchCustomEvent($5cb92bef7577960e$var$POINTER_DOWN_OUTSIDE,s,Xt,{discrete:!0})};const Xt={originalEvent:Ft};Ft.pointerType==="touch"?(i.removeEventListener("click",_e.current),_e.current=Ut,i.addEventListener("click",_e.current,{once:!0})):Ut()}else i.removeEventListener("click",_e.current);_.current=!1},Mt=window.setTimeout(()=>{i.addEventListener("pointerdown",ct)},0);return()=>{window.clearTimeout(Mt),i.removeEventListener("pointerdown",ct),i.removeEventListener("click",_e.current)}},[i,s]),{onPointerDownCapture:()=>_.current=!0}}function $5cb92bef7577960e$var$useFocusOutside(o,i=globalThis==null?void 0:globalThis.document){const s=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(o),_=reactExports.useRef(!1);return reactExports.useEffect(()=>{const _e=ct=>{ct.target&&!_.current&&$5cb92bef7577960e$var$handleAndDispatchCustomEvent($5cb92bef7577960e$var$FOCUS_OUTSIDE,s,{originalEvent:ct},{discrete:!1})};return i.addEventListener("focusin",_e),()=>i.removeEventListener("focusin",_e)},[i,s]),{onFocusCapture:()=>_.current=!0,onBlurCapture:()=>_.current=!1}}function $5cb92bef7577960e$var$dispatchUpdate(){const o=new CustomEvent($5cb92bef7577960e$var$CONTEXT_UPDATE);document.dispatchEvent(o)}function $5cb92bef7577960e$var$handleAndDispatchCustomEvent(o,i,s,{discrete:_}){const _e=s.originalEvent.target,ct=new CustomEvent(o,{bubbles:!1,cancelable:!0,detail:s});i&&_e.addEventListener(o,i,{once:!0}),_?$8927f6f2acc4f386$export$6d1a0317bde7de7f(_e,ct):_e.dispatchEvent(ct)}const $d3863c46a17e8a28$var$AUTOFOCUS_ON_MOUNT="focusScope.autoFocusOnMount",$d3863c46a17e8a28$var$AUTOFOCUS_ON_UNMOUNT="focusScope.autoFocusOnUnmount",$d3863c46a17e8a28$var$EVENT_OPTIONS={bubbles:!1,cancelable:!0},$d3863c46a17e8a28$export$20e40289641fbbb6=reactExports.forwardRef((o,i)=>{const{loop:s=!1,trapped:_=!1,onMountAutoFocus:_e,onUnmountAutoFocus:ct,...Mt}=o,[Ft,Ut]=reactExports.useState(null),Xt=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(_e),Kt=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(ct),nr=reactExports.useRef(null),rr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(i,fr=>Ut(fr)),or=reactExports.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;reactExports.useEffect(()=>{if(_){let fr=function(Vr){if(or.paused||!Ft)return;const Wr=Vr.target;Ft.contains(Wr)?nr.current=Wr:$d3863c46a17e8a28$var$focus(nr.current,{select:!0})},yr=function(Vr){if(or.paused||!Ft)return;const Wr=Vr.relatedTarget;Wr!==null&&(Ft.contains(Wr)||$d3863c46a17e8a28$var$focus(nr.current,{select:!0}))},Lr=function(Vr){if(document.activeElement===document.body)for(const Wr of Vr)Wr.removedNodes.length>0&&$d3863c46a17e8a28$var$focus(Ft)};document.addEventListener("focusin",fr),document.addEventListener("focusout",yr);const Br=new MutationObserver(Lr);return Ft&&Br.observe(Ft,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",fr),document.removeEventListener("focusout",yr),Br.disconnect()}}},[_,Ft,or.paused]),reactExports.useEffect(()=>{if(Ft){$d3863c46a17e8a28$var$focusScopesStack.add(or);const fr=document.activeElement;if(!Ft.contains(fr)){const yr=new CustomEvent($d3863c46a17e8a28$var$AUTOFOCUS_ON_MOUNT,$d3863c46a17e8a28$var$EVENT_OPTIONS);Ft.addEventListener($d3863c46a17e8a28$var$AUTOFOCUS_ON_MOUNT,Xt),Ft.dispatchEvent(yr),yr.defaultPrevented||($d3863c46a17e8a28$var$focusFirst($d3863c46a17e8a28$var$removeLinks($d3863c46a17e8a28$var$getTabbableCandidates(Ft)),{select:!0}),document.activeElement===fr&&$d3863c46a17e8a28$var$focus(Ft))}return()=>{Ft.removeEventListener($d3863c46a17e8a28$var$AUTOFOCUS_ON_MOUNT,Xt),setTimeout(()=>{const yr=new CustomEvent($d3863c46a17e8a28$var$AUTOFOCUS_ON_UNMOUNT,$d3863c46a17e8a28$var$EVENT_OPTIONS);Ft.addEventListener($d3863c46a17e8a28$var$AUTOFOCUS_ON_UNMOUNT,Kt),Ft.dispatchEvent(yr),yr.defaultPrevented||$d3863c46a17e8a28$var$focus(fr??document.body,{select:!0}),Ft.removeEventListener($d3863c46a17e8a28$var$AUTOFOCUS_ON_UNMOUNT,Kt),$d3863c46a17e8a28$var$focusScopesStack.remove(or)},0)}}},[Ft,Xt,Kt,or]);const hr=reactExports.useCallback(fr=>{if(!s&&!_||or.paused)return;const yr=fr.key==="Tab"&&!fr.altKey&&!fr.ctrlKey&&!fr.metaKey,Lr=document.activeElement;if(yr&&Lr){const Br=fr.currentTarget,[Vr,Wr]=$d3863c46a17e8a28$var$getTabbableEdges(Br);Vr&&Wr?fr.shiftKey||Lr!==Wr?fr.shiftKey&&Lr===Vr&&(fr.preventDefault(),s&&$d3863c46a17e8a28$var$focus(Wr,{select:!0})):(fr.preventDefault(),s&&$d3863c46a17e8a28$var$focus(Vr,{select:!0})):Lr===Br&&fr.preventDefault()}},[s,_,or.paused]);return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends({tabIndex:-1},Mt,{ref:rr,onKeyDown:hr}))});function $d3863c46a17e8a28$var$focusFirst(o,{select:i=!1}={}){const s=document.activeElement;for(const _ of o)if($d3863c46a17e8a28$var$focus(_,{select:i}),document.activeElement!==s)return}function $d3863c46a17e8a28$var$getTabbableEdges(o){const i=$d3863c46a17e8a28$var$getTabbableCandidates(o);return[$d3863c46a17e8a28$var$findVisible(i,o),$d3863c46a17e8a28$var$findVisible(i.reverse(),o)]}function $d3863c46a17e8a28$var$getTabbableCandidates(o){const i=[],s=document.createTreeWalker(o,NodeFilter.SHOW_ELEMENT,{acceptNode:_=>{const _e=_.tagName==="INPUT"&&_.type==="hidden";return _.disabled||_.hidden||_e?NodeFilter.FILTER_SKIP:_.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)i.push(s.currentNode);return i}function $d3863c46a17e8a28$var$findVisible(o,i){for(const s of o)if(!$d3863c46a17e8a28$var$isHidden(s,{upTo:i}))return s}function $d3863c46a17e8a28$var$isHidden(o,{upTo:i}){if(getComputedStyle(o).visibility==="hidden")return!0;for(;o;){if(i!==void 0&&o===i)return!1;if(getComputedStyle(o).display==="none")return!0;o=o.parentElement}return!1}function $d3863c46a17e8a28$var$isSelectableInput(o){return o instanceof HTMLInputElement&&"select"in o}function $d3863c46a17e8a28$var$focus(o,{select:i=!1}={}){if(o&&o.focus){const s=document.activeElement;o.focus({preventScroll:!0}),o!==s&&$d3863c46a17e8a28$var$isSelectableInput(o)&&i&&o.select()}}const $d3863c46a17e8a28$var$focusScopesStack=$d3863c46a17e8a28$var$createFocusScopesStack();function $d3863c46a17e8a28$var$createFocusScopesStack(){let o=[];return{add(i){const s=o[0];i!==s&&(s==null||s.pause()),o=$d3863c46a17e8a28$var$arrayRemove(o,i),o.unshift(i)},remove(i){var s;o=$d3863c46a17e8a28$var$arrayRemove(o,i),(s=o[0])===null||s===void 0||s.resume()}}}function $d3863c46a17e8a28$var$arrayRemove(o,i){const s=[...o],_=s.indexOf(i);return _!==-1&&s.splice(_,1),s}function $d3863c46a17e8a28$var$removeLinks(o){return o.filter(i=>i.tagName!=="A")}const $f1701beae083dbae$export$602eac185826482c=reactExports.forwardRef((o,i)=>{var s;const{container:_=globalThis==null||(s=globalThis.document)===null||s===void 0?void 0:s.body,..._e}=o;return _?ReactDOM__default.createPortal(reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends({},_e,{ref:i})),_):null});let $3db38b7d1fb3fe6a$var$count=0;function $3db38b7d1fb3fe6a$export$b7ece24a22aeda8c(){reactExports.useEffect(()=>{var o,i;const s=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(o=s[0])!==null&&o!==void 0?o:$3db38b7d1fb3fe6a$var$createFocusGuard()),document.body.insertAdjacentElement("beforeend",(i=s[1])!==null&&i!==void 0?i:$3db38b7d1fb3fe6a$var$createFocusGuard()),$3db38b7d1fb3fe6a$var$count++,()=>{$3db38b7d1fb3fe6a$var$count===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(_=>_.remove()),$3db38b7d1fb3fe6a$var$count--}},[])}function $3db38b7d1fb3fe6a$var$createFocusGuard(){const o=document.createElement("span");return o.setAttribute("data-radix-focus-guard",""),o.tabIndex=0,o.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",o}var __assign=function(){return __assign=Object.assign||function(o){for(var i,s=1,_=arguments.length;s<_;s++)for(var _e in i=arguments[s])Object.prototype.hasOwnProperty.call(i,_e)&&(o[_e]=i[_e]);return o},__assign.apply(this,arguments)};function __rest$2(o,i){var s={};for(var _ in o)Object.prototype.hasOwnProperty.call(o,_)&&i.indexOf(_)<0&&(s[_]=o[_]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function"){var _e=0;for(_=Object.getOwnPropertySymbols(o);_e<_.length;_e++)i.indexOf(_[_e])<0&&Object.prototype.propertyIsEnumerable.call(o,_[_e])&&(s[_[_e]]=o[_[_e]])}return s}function __spreadArray$1(o,i,s){for(var _,_e=0,ct=i.length;_e<ct;_e++)!_&&_e in i||(_||(_=Array.prototype.slice.call(i,0,_e)),_[_e]=i[_e]);return o.concat(_||Array.prototype.slice.call(i))}var zeroRightClassName="right-scroll-bar-position",fullWidthClassName="width-before-scroll-bar",noScrollbarsClassName="with-scroll-bars-hidden",removedBarSizeVariable="--removed-body-scroll-bar-size";function assignRef(o,i){return typeof o=="function"?o(i):o&&(o.current=i),o}function useCallbackRef$5(o,i){var s=reactExports.useState(function(){return{value:o,callback:i,facade:{get current(){return s.value},set current(_){var _e=s.value;_e!==_&&(s.value=_,s.callback(_,_e))}}}})[0];return s.callback=i,s.facade}var useIsomorphicLayoutEffect$1=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect,currentValues=new WeakMap;function useMergeRefs(o,i){var s=useCallbackRef$5(null,function(_){return o.forEach(function(_e){return assignRef(_e,_)})});return useIsomorphicLayoutEffect$1(function(){var _=currentValues.get(s);if(_){var _e=new Set(_),ct=new Set(o),Mt=s.current;_e.forEach(function(Ft){ct.has(Ft)||assignRef(Ft,null)}),ct.forEach(function(Ft){_e.has(Ft)||assignRef(Ft,Mt)})}currentValues.set(s,o)},[o]),s}function ItoI(o){return o}function innerCreateMedium(o,i){i===void 0&&(i=ItoI);var s=[],_=!1;return{read:function(){if(_)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return s.length?s[s.length-1]:o},useMedium:function(_e){var ct=i(_e,_);return s.push(ct),function(){s=s.filter(function(Mt){return Mt!==ct})}},assignSyncMedium:function(_e){for(_=!0;s.length;){var ct=s;s=[],ct.forEach(_e)}s={push:function(Mt){return _e(Mt)},filter:function(){return s}}},assignMedium:function(_e){_=!0;var ct=[];if(s.length){var Mt=s;s=[],Mt.forEach(_e),ct=s}var Ft=function(){var Xt=ct;ct=[],Xt.forEach(_e)},Ut=function(){return Promise.resolve().then(Ft)};Ut(),s={push:function(Xt){ct.push(Xt),Ut()},filter:function(Xt){return ct=ct.filter(Xt),s}}}}}function createSidecarMedium(o){o===void 0&&(o={});var i=innerCreateMedium(null);return i.options=__assign({async:!0,ssr:!1},o),i}var SideCar$2=function(o){var i=o.sideCar,s=__rest$2(o,["sideCar"]);if(!i)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var _=i.read();if(!_)throw new Error("Sidecar medium not found");return reactExports.createElement(_,__assign({},s))};function exportSidecar(o,i){return o.useMedium(i),SideCar$2}SideCar$2.isSideCarExport=!0;var effectCar$1=createSidecarMedium(),nothing$1=function(){},RemoveScroll$1=reactExports.forwardRef(function(o,i){var s=reactExports.useRef(null),_=reactExports.useState({onScrollCapture:nothing$1,onWheelCapture:nothing$1,onTouchMoveCapture:nothing$1}),_e=_[0],ct=_[1],Mt=o.forwardProps,Ft=o.children,Ut=o.className,Xt=o.removeScrollBar,Kt=o.enabled,nr=o.shards,rr=o.sideCar,or=o.noIsolation,hr=o.inert,fr=o.allowPinchZoom,yr=o.as,Lr=yr===void 0?"div":yr,Br=__rest$2(o,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),Vr=rr,Wr=useMergeRefs([s,i]),ro=__assign(__assign({},Br),_e);return reactExports.createElement(reactExports.Fragment,null,Kt&&reactExports.createElement(Vr,{sideCar:effectCar$1,removeScrollBar:Xt,shards:nr,noIsolation:or,inert:hr,setCallbacks:ct,allowPinchZoom:!!fr,lockRef:s}),Mt?reactExports.cloneElement(reactExports.Children.only(Ft),__assign(__assign({},ro),{ref:Wr})):reactExports.createElement(Lr,__assign({},ro,{className:Ut,ref:Wr}),Ft))});RemoveScroll$1.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},RemoveScroll$1.classNames={fullWidth:fullWidthClassName,zeroRight:zeroRightClassName};var getNonce=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function makeStyleTag(){if(!document)return null;var o=document.createElement("style");o.type="text/css";var i=getNonce();return i&&o.setAttribute("nonce",i),o}function injectStyles(o,i){o.styleSheet?o.styleSheet.cssText=i:o.appendChild(document.createTextNode(i))}function insertStyleTag(o){(document.head||document.getElementsByTagName("head")[0]).appendChild(o)}var stylesheetSingleton=function(){var o=0,i=null;return{add:function(s){o==0&&(i=makeStyleTag())&&(injectStyles(i,s),insertStyleTag(i)),o++},remove:function(){!--o&&i&&(i.parentNode&&i.parentNode.removeChild(i),i=null)}}},styleHookSingleton=function(){var o=stylesheetSingleton();return function(i,s){reactExports.useEffect(function(){return o.add(i),function(){o.remove()}},[i&&s])}},styleSingleton=function(){var o=styleHookSingleton();return function(i){var s=i.styles,_=i.dynamic;return o(s,_),null}},zeroGap={left:0,top:0,right:0,gap:0},parse=function(o){return parseInt(o||"",10)||0},getOffset=function(o){var i=window.getComputedStyle(document.body),s=i[o==="padding"?"paddingLeft":"marginLeft"],_=i[o==="padding"?"paddingTop":"marginTop"],_e=i[o==="padding"?"paddingRight":"marginRight"];return[parse(s),parse(_),parse(_e)]},getGapWidth=function(o){if(o===void 0&&(o="margin"),typeof window>"u")return zeroGap;var i=getOffset(o),s=document.documentElement.clientWidth,_=window.innerWidth;return{left:i[0],top:i[1],right:i[2],gap:Math.max(0,_-s+i[2]-i[0])}},Style=styleSingleton(),lockAttribute="data-scroll-locked",getStyles=function(o,i,s,_){var _e=o.left,ct=o.top,Mt=o.right,Ft=o.gap;return s===void 0&&(s="margin"),`
  .`.concat(noScrollbarsClassName,` {
   overflow: hidden `).concat(_,`;
   padding-right: `).concat(Ft,"px ").concat(_,`;
  }
  body[`).concat(lockAttribute,`] {
    overflow: hidden `).concat(_,`;
    overscroll-behavior: contain;
    `).concat([i&&"position: relative ".concat(_,";"),s==="margin"&&`
    padding-left: `.concat(_e,`px;
    padding-top: `).concat(ct,`px;
    padding-right: `).concat(Mt,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(Ft,"px ").concat(_,`;
    `),s==="padding"&&"padding-right: ".concat(Ft,"px ").concat(_,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(zeroRightClassName,` {
    right: `).concat(Ft,"px ").concat(_,`;
  }
  
  .`).concat(fullWidthClassName,` {
    margin-right: `).concat(Ft,"px ").concat(_,`;
  }
  
  .`).concat(zeroRightClassName," .").concat(zeroRightClassName,` {
    right: 0 `).concat(_,`;
  }
  
  .`).concat(fullWidthClassName," .").concat(fullWidthClassName,` {
    margin-right: 0 `).concat(_,`;
  }
  
  body[`).concat(lockAttribute,`] {
    `).concat(removedBarSizeVariable,": ").concat(Ft,`px;
  }
`)},getCurrentUseCounter=function(){var o=parseInt(document.body.getAttribute(lockAttribute)||"0",10);return isFinite(o)?o:0},useLockAttribute=function(){reactExports.useEffect(function(){return document.body.setAttribute(lockAttribute,(getCurrentUseCounter()+1).toString()),function(){var o=getCurrentUseCounter()-1;o<=0?document.body.removeAttribute(lockAttribute):document.body.setAttribute(lockAttribute,o.toString())}},[])},RemoveScrollBar=function(o){var i=o.noRelative,s=o.noImportant,_=o.gapMode,_e=_===void 0?"margin":_;useLockAttribute();var ct=reactExports.useMemo(function(){return getGapWidth(_e)},[_e]);return reactExports.createElement(Style,{styles:getStyles(ct,!i,_e,s?"":"!important")})},passiveSupported$1=!1;if(typeof window<"u")try{var options$2=Object.defineProperty({},"passive",{get:function(){return passiveSupported$1=!0,!0}});window.addEventListener("test",options$2,options$2),window.removeEventListener("test",options$2,options$2)}catch{passiveSupported$1=!1}var nonPassive$1=!!passiveSupported$1&&{passive:!1},alwaysContainsScroll$1=function(o){return o.tagName==="TEXTAREA"},elementCanBeScrolled$1=function(o,i){var s=window.getComputedStyle(o);return s[i]!=="hidden"&&!(s.overflowY===s.overflowX&&!alwaysContainsScroll$1(o)&&s[i]==="visible")},elementCouldBeVScrolled$1=function(o){return elementCanBeScrolled$1(o,"overflowY")},elementCouldBeHScrolled$1=function(o){return elementCanBeScrolled$1(o,"overflowX")},locationCouldBeScrolled$1=function(o,i){var s=i;do{if(typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host),elementCouldBeScrolled$1(o,s)){var _=getScrollVariables$1(o,s);if(_[1]>_[2])return!0}s=s.parentNode}while(s&&s!==document.body);return!1},getVScrollVariables$1=function(o){return[o.scrollTop,o.scrollHeight,o.clientHeight]},getHScrollVariables$1=function(o){return[o.scrollLeft,o.scrollWidth,o.clientWidth]},elementCouldBeScrolled$1=function(o,i){return o==="v"?elementCouldBeVScrolled$1(i):elementCouldBeHScrolled$1(i)},getScrollVariables$1=function(o,i){return o==="v"?getVScrollVariables$1(i):getHScrollVariables$1(i)},getDirectionFactor$1=function(o,i){return o==="h"&&i==="rtl"?-1:1},handleScroll$1=function(o,i,s,_,_e){var ct=getDirectionFactor$1(o,window.getComputedStyle(i).direction),Mt=ct*_,Ft=s.target,Ut=i.contains(Ft),Xt=!1,Kt=Mt>0,nr=0,rr=0;do{var or=getScrollVariables$1(o,Ft),hr=or[0],fr=or[1]-or[2]-ct*hr;(hr||fr)&&elementCouldBeScrolled$1(o,Ft)&&(nr+=fr,rr+=hr),Ft=Ft.parentNode}while(!Ut&&Ft!==document.body||Ut&&(i.contains(Ft)||i===Ft));return(!Kt||nr!==0&&_e)&&(Kt||rr!==0&&_e)||(Xt=!0),Xt},getTouchXY$1=function(o){return"changedTouches"in o?[o.changedTouches[0].clientX,o.changedTouches[0].clientY]:[0,0]},getDeltaXY$1=function(o){return[o.deltaX,o.deltaY]},extractRef$1=function(o){return o&&"current"in o?o.current:o},deltaCompare$1=function(o,i){return o[0]===i[0]&&o[1]===i[1]},generateStyle$1=function(o){return`
  .block-interactivity-`.concat(o,` {pointer-events: none;}
  .allow-interactivity-`).concat(o,` {pointer-events: all;}
`)},idCounter$1=0,lockStack$1=[];function RemoveScrollSideCar$1(o){var i=reactExports.useRef([]),s=reactExports.useRef([0,0]),_=reactExports.useRef(),_e=reactExports.useState(idCounter$1++)[0],ct=reactExports.useState(function(){return styleSingleton()})[0],Mt=reactExports.useRef(o);reactExports.useEffect(function(){Mt.current=o},[o]),reactExports.useEffect(function(){if(o.inert){document.body.classList.add("block-interactivity-".concat(_e));var fr=__spreadArray$1([o.lockRef.current],(o.shards||[]).map(extractRef$1)).filter(Boolean);return fr.forEach(function(yr){return yr.classList.add("allow-interactivity-".concat(_e))}),function(){document.body.classList.remove("block-interactivity-".concat(_e)),fr.forEach(function(yr){return yr.classList.remove("allow-interactivity-".concat(_e))})}}},[o.inert,o.lockRef.current,o.shards]);var Ft=reactExports.useCallback(function(fr,yr){if("touches"in fr&&fr.touches.length===2)return!Mt.current.allowPinchZoom;var Lr,Br=getTouchXY$1(fr),Vr=s.current,Wr="deltaX"in fr?fr.deltaX:Vr[0]-Br[0],ro="deltaY"in fr?fr.deltaY:Vr[1]-Br[1],no=fr.target,so=Math.abs(Wr)>Math.abs(ro)?"h":"v";if("touches"in fr&&so==="h"&&no.type==="range")return!1;var ko=locationCouldBeScrolled$1(so,no);if(!ko)return!0;if(ko?Lr=so:(Lr=so==="v"?"h":"v",ko=locationCouldBeScrolled$1(so,no)),!ko)return!1;if(!_.current&&"changedTouches"in fr&&(Wr||ro)&&(_.current=Lr),!Lr)return!0;var To=_.current||Lr;return handleScroll$1(To,yr,fr,To==="h"?Wr:ro,!0)},[]),Ut=reactExports.useCallback(function(fr){var yr=fr;if(lockStack$1.length&&lockStack$1[lockStack$1.length-1]===ct){var Lr="deltaY"in yr?getDeltaXY$1(yr):getTouchXY$1(yr),Br=i.current.filter(function(Wr){return Wr.name===yr.type&&Wr.target===yr.target&&deltaCompare$1(Wr.delta,Lr)})[0];if(Br&&Br.should)yr.cancelable&&yr.preventDefault();else if(!Br){var Vr=(Mt.current.shards||[]).map(extractRef$1).filter(Boolean).filter(function(Wr){return Wr.contains(yr.target)});(Vr.length>0?Ft(yr,Vr[0]):!Mt.current.noIsolation)&&yr.cancelable&&yr.preventDefault()}}},[]),Xt=reactExports.useCallback(function(fr,yr,Lr,Br){var Vr={name:fr,delta:yr,target:Lr,should:Br};i.current.push(Vr),setTimeout(function(){i.current=i.current.filter(function(Wr){return Wr!==Vr})},1)},[]),Kt=reactExports.useCallback(function(fr){s.current=getTouchXY$1(fr),_.current=void 0},[]),nr=reactExports.useCallback(function(fr){Xt(fr.type,getDeltaXY$1(fr),fr.target,Ft(fr,o.lockRef.current))},[]),rr=reactExports.useCallback(function(fr){Xt(fr.type,getTouchXY$1(fr),fr.target,Ft(fr,o.lockRef.current))},[]);reactExports.useEffect(function(){return lockStack$1.push(ct),o.setCallbacks({onScrollCapture:nr,onWheelCapture:nr,onTouchMoveCapture:rr}),document.addEventListener("wheel",Ut,nonPassive$1),document.addEventListener("touchmove",Ut,nonPassive$1),document.addEventListener("touchstart",Kt,nonPassive$1),function(){lockStack$1=lockStack$1.filter(function(fr){return fr!==ct}),document.removeEventListener("wheel",Ut,nonPassive$1),document.removeEventListener("touchmove",Ut,nonPassive$1),document.removeEventListener("touchstart",Kt,nonPassive$1)}},[]);var or=o.removeScrollBar,hr=o.inert;return reactExports.createElement(reactExports.Fragment,null,hr?reactExports.createElement(ct,{styles:generateStyle$1(_e)}):null,or?reactExports.createElement(RemoveScrollBar,{gapMode:"margin"}):null)}var SideCar$1=exportSidecar(effectCar$1,RemoveScrollSideCar$1),ReactRemoveScroll$1=reactExports.forwardRef(function(o,i){return reactExports.createElement(RemoveScroll$1,__assign({},o,{ref:i,sideCar:SideCar$1}))});ReactRemoveScroll$1.classNames=RemoveScroll$1.classNames;var getDefaultParent=function(o){return typeof document>"u"?null:(Array.isArray(o)?o[0]:o).ownerDocument.body},counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={},lockCount=0,unwrapHost=function(o){return o&&(o.host||unwrapHost(o.parentNode))},correctTargets=function(o,i){return i.map(function(s){if(o.contains(s))return s;var _=unwrapHost(s);return _&&o.contains(_)?_:(console.error("aria-hidden",s,"in not contained inside",o,". Doing nothing"),null)}).filter(function(s){return!!s})},applyAttributeToOthers=function(o,i,s,_){var _e=correctTargets(i,Array.isArray(o)?o:[o]);markerMap[s]||(markerMap[s]=new WeakMap);var ct=markerMap[s],Mt=[],Ft=new Set,Ut=new Set(_e),Xt=function(nr){nr&&!Ft.has(nr)&&(Ft.add(nr),Xt(nr.parentNode))};_e.forEach(Xt);var Kt=function(nr){nr&&!Ut.has(nr)&&Array.prototype.forEach.call(nr.children,function(rr){if(Ft.has(rr))Kt(rr);else try{var or=rr.getAttribute(_),hr=or!==null&&or!=="false",fr=(counterMap.get(rr)||0)+1,yr=(ct.get(rr)||0)+1;counterMap.set(rr,fr),ct.set(rr,yr),Mt.push(rr),fr===1&&hr&&uncontrolledNodes.set(rr,!0),yr===1&&rr.setAttribute(s,"true"),hr||rr.setAttribute(_,"true")}catch(Lr){console.error("aria-hidden: cannot operate on ",rr,Lr)}})};return Kt(i),Ft.clear(),lockCount++,function(){Mt.forEach(function(nr){var rr=counterMap.get(nr)-1,or=ct.get(nr)-1;counterMap.set(nr,rr),ct.set(nr,or),rr||(uncontrolledNodes.has(nr)||nr.removeAttribute(_),uncontrolledNodes.delete(nr)),or||nr.removeAttribute(s)}),--lockCount||(counterMap=new WeakMap,counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={})}},hideOthers=function(o,i,s){s===void 0&&(s="data-aria-hidden");var _=Array.from(Array.isArray(o)?o:[o]),_e=getDefaultParent(o);return _e?(_.push.apply(_,Array.from(_e.querySelectorAll("[aria-live]"))),applyAttributeToOthers(_,_e,s,"aria-hidden")):function(){return null}};const $5d3850c4d0b4e6c7$var$DIALOG_NAME="Dialog",[$5d3850c4d0b4e6c7$var$createDialogContext,$5d3850c4d0b4e6c7$export$cc702773b8ea3e41]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($5d3850c4d0b4e6c7$var$DIALOG_NAME),[$5d3850c4d0b4e6c7$var$DialogProvider,$5d3850c4d0b4e6c7$var$useDialogContext]=$5d3850c4d0b4e6c7$var$createDialogContext($5d3850c4d0b4e6c7$var$DIALOG_NAME),$5d3850c4d0b4e6c7$export$3ddf2d174ce01153=o=>{const{__scopeDialog:i,children:s,open:_,defaultOpen:_e,onOpenChange:ct,modal:Mt=!0}=o,Ft=reactExports.useRef(null),Ut=reactExports.useRef(null),[Xt=!1,Kt]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:_,defaultProp:_e,onChange:ct});return reactExports.createElement($5d3850c4d0b4e6c7$var$DialogProvider,{scope:i,triggerRef:Ft,contentRef:Ut,contentId:$1746a345f3d73bb7$export$f680877a34711e37(),titleId:$1746a345f3d73bb7$export$f680877a34711e37(),descriptionId:$1746a345f3d73bb7$export$f680877a34711e37(),open:Xt,onOpenChange:Kt,onOpenToggle:reactExports.useCallback(()=>Kt(nr=>!nr),[Kt]),modal:Mt},s)},$5d3850c4d0b4e6c7$var$TRIGGER_NAME="DialogTrigger",$5d3850c4d0b4e6c7$export$2e1e1122cf0cba88=reactExports.forwardRef((o,i)=>{const{__scopeDialog:s,..._}=o,_e=$5d3850c4d0b4e6c7$var$useDialogContext($5d3850c4d0b4e6c7$var$TRIGGER_NAME,s),ct=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(i,_e.triggerRef);return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.button,_extends({type:"button","aria-haspopup":"dialog","aria-expanded":_e.open,"aria-controls":_e.contentId,"data-state":$5d3850c4d0b4e6c7$var$getState(_e.open)},_,{ref:ct,onClick:$e42e1063c40fb3ef$export$b9ecd428b558ff10(o.onClick,_e.onOpenToggle)}))}),$5d3850c4d0b4e6c7$var$PORTAL_NAME="DialogPortal",[$5d3850c4d0b4e6c7$var$PortalProvider,$5d3850c4d0b4e6c7$var$usePortalContext]=$5d3850c4d0b4e6c7$var$createDialogContext($5d3850c4d0b4e6c7$var$PORTAL_NAME,{forceMount:void 0}),$5d3850c4d0b4e6c7$export$dad7c95542bacce0=o=>{const{__scopeDialog:i,forceMount:s,children:_,container:_e}=o,ct=$5d3850c4d0b4e6c7$var$useDialogContext($5d3850c4d0b4e6c7$var$PORTAL_NAME,i);return reactExports.createElement($5d3850c4d0b4e6c7$var$PortalProvider,{scope:i,forceMount:s},reactExports.Children.map(_,Mt=>reactExports.createElement($921a889cee6df7e8$export$99c2b779aa4e8b8b,{present:s||ct.open},reactExports.createElement($f1701beae083dbae$export$602eac185826482c,{asChild:!0,container:_e},Mt))))},$5d3850c4d0b4e6c7$var$OVERLAY_NAME="DialogOverlay",$5d3850c4d0b4e6c7$export$bd1d06c79be19e17=reactExports.forwardRef((o,i)=>{const s=$5d3850c4d0b4e6c7$var$usePortalContext($5d3850c4d0b4e6c7$var$OVERLAY_NAME,o.__scopeDialog),{forceMount:_=s.forceMount,..._e}=o,ct=$5d3850c4d0b4e6c7$var$useDialogContext($5d3850c4d0b4e6c7$var$OVERLAY_NAME,o.__scopeDialog);return ct.modal?reactExports.createElement($921a889cee6df7e8$export$99c2b779aa4e8b8b,{present:_||ct.open},reactExports.createElement($5d3850c4d0b4e6c7$var$DialogOverlayImpl,_extends({},_e,{ref:i}))):null}),$5d3850c4d0b4e6c7$var$DialogOverlayImpl=reactExports.forwardRef((o,i)=>{const{__scopeDialog:s,..._}=o,_e=$5d3850c4d0b4e6c7$var$useDialogContext($5d3850c4d0b4e6c7$var$OVERLAY_NAME,s);return reactExports.createElement(ReactRemoveScroll$1,{as:$5e63c961fc1ce211$export$8c6ed5c666ac1360,allowPinchZoom:!0,shards:[_e.contentRef]},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends({"data-state":$5d3850c4d0b4e6c7$var$getState(_e.open)},_,{ref:i,style:{pointerEvents:"auto",..._.style}})))}),$5d3850c4d0b4e6c7$var$CONTENT_NAME="DialogContent",$5d3850c4d0b4e6c7$export$b6d9565de1e068cf=reactExports.forwardRef((o,i)=>{const s=$5d3850c4d0b4e6c7$var$usePortalContext($5d3850c4d0b4e6c7$var$CONTENT_NAME,o.__scopeDialog),{forceMount:_=s.forceMount,..._e}=o,ct=$5d3850c4d0b4e6c7$var$useDialogContext($5d3850c4d0b4e6c7$var$CONTENT_NAME,o.__scopeDialog);return reactExports.createElement($921a889cee6df7e8$export$99c2b779aa4e8b8b,{present:_||ct.open},ct.modal?reactExports.createElement($5d3850c4d0b4e6c7$var$DialogContentModal,_extends({},_e,{ref:i})):reactExports.createElement($5d3850c4d0b4e6c7$var$DialogContentNonModal,_extends({},_e,{ref:i})))}),$5d3850c4d0b4e6c7$var$DialogContentModal=reactExports.forwardRef((o,i)=>{const s=$5d3850c4d0b4e6c7$var$useDialogContext($5d3850c4d0b4e6c7$var$CONTENT_NAME,o.__scopeDialog),_=reactExports.useRef(null),_e=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(i,s.contentRef,_);return reactExports.useEffect(()=>{const ct=_.current;if(ct)return hideOthers(ct)},[]),reactExports.createElement($5d3850c4d0b4e6c7$var$DialogContentImpl,_extends({},o,{ref:_e,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(o.onCloseAutoFocus,ct=>{var Mt;ct.preventDefault(),(Mt=s.triggerRef.current)===null||Mt===void 0||Mt.focus()}),onPointerDownOutside:$e42e1063c40fb3ef$export$b9ecd428b558ff10(o.onPointerDownOutside,ct=>{const Mt=ct.detail.originalEvent,Ft=Mt.button===0&&Mt.ctrlKey===!0;(Mt.button===2||Ft)&&ct.preventDefault()}),onFocusOutside:$e42e1063c40fb3ef$export$b9ecd428b558ff10(o.onFocusOutside,ct=>ct.preventDefault())}))}),$5d3850c4d0b4e6c7$var$DialogContentNonModal=reactExports.forwardRef((o,i)=>{const s=$5d3850c4d0b4e6c7$var$useDialogContext($5d3850c4d0b4e6c7$var$CONTENT_NAME,o.__scopeDialog),_=reactExports.useRef(!1),_e=reactExports.useRef(!1);return reactExports.createElement($5d3850c4d0b4e6c7$var$DialogContentImpl,_extends({},o,{ref:i,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:ct=>{var Mt,Ft;(Mt=o.onCloseAutoFocus)===null||Mt===void 0||Mt.call(o,ct),ct.defaultPrevented||(_.current||(Ft=s.triggerRef.current)===null||Ft===void 0||Ft.focus(),ct.preventDefault()),_.current=!1,_e.current=!1},onInteractOutside:ct=>{var Mt,Ft;(Mt=o.onInteractOutside)===null||Mt===void 0||Mt.call(o,ct),ct.defaultPrevented||(_.current=!0,ct.detail.originalEvent.type==="pointerdown"&&(_e.current=!0));const Ut=ct.target;!((Ft=s.triggerRef.current)===null||Ft===void 0)&&Ft.contains(Ut)&&ct.preventDefault(),ct.detail.originalEvent.type==="focusin"&&_e.current&&ct.preventDefault()}}))}),$5d3850c4d0b4e6c7$var$DialogContentImpl=reactExports.forwardRef((o,i)=>{const{__scopeDialog:s,trapFocus:_,onOpenAutoFocus:_e,onCloseAutoFocus:ct,...Mt}=o,Ft=$5d3850c4d0b4e6c7$var$useDialogContext($5d3850c4d0b4e6c7$var$CONTENT_NAME,s),Ut=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(i,reactExports.useRef(null));return $3db38b7d1fb3fe6a$export$b7ece24a22aeda8c(),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement($d3863c46a17e8a28$export$20e40289641fbbb6,{asChild:!0,loop:!0,trapped:_,onMountAutoFocus:_e,onUnmountAutoFocus:ct},reactExports.createElement($5cb92bef7577960e$export$177fb62ff3ec1f22,_extends({role:"dialog",id:Ft.contentId,"aria-describedby":Ft.descriptionId,"aria-labelledby":Ft.titleId,"data-state":$5d3850c4d0b4e6c7$var$getState(Ft.open)},Mt,{ref:Ut,onDismiss:()=>Ft.onOpenChange(!1)}))),!1)}),$5d3850c4d0b4e6c7$var$TITLE_NAME="DialogTitle",$5d3850c4d0b4e6c7$export$16f7638e4a34b909=reactExports.forwardRef((o,i)=>{const{__scopeDialog:s,..._}=o,_e=$5d3850c4d0b4e6c7$var$useDialogContext($5d3850c4d0b4e6c7$var$TITLE_NAME,s);return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.h2,_extends({id:_e.titleId},_,{ref:i}))}),$5d3850c4d0b4e6c7$var$DESCRIPTION_NAME="DialogDescription",$5d3850c4d0b4e6c7$export$94e94c2ec2c954d5=reactExports.forwardRef((o,i)=>{const{__scopeDialog:s,..._}=o,_e=$5d3850c4d0b4e6c7$var$useDialogContext($5d3850c4d0b4e6c7$var$DESCRIPTION_NAME,s);return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.p,_extends({id:_e.descriptionId},_,{ref:i}))}),$5d3850c4d0b4e6c7$var$CLOSE_NAME="DialogClose",$5d3850c4d0b4e6c7$export$fba2fb7cd781b7ac=reactExports.forwardRef((o,i)=>{const{__scopeDialog:s,..._}=o,_e=$5d3850c4d0b4e6c7$var$useDialogContext($5d3850c4d0b4e6c7$var$CLOSE_NAME,s);return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.button,_extends({type:"button"},_,{ref:i,onClick:$e42e1063c40fb3ef$export$b9ecd428b558ff10(o.onClick,()=>_e.onOpenChange(!1))}))});function $5d3850c4d0b4e6c7$var$getState(o){return o?"open":"closed"}const $5d3850c4d0b4e6c7$export$be92b6f5f03c0fe9=$5d3850c4d0b4e6c7$export$3ddf2d174ce01153,$5d3850c4d0b4e6c7$export$41fb9f06171c75f4=$5d3850c4d0b4e6c7$export$2e1e1122cf0cba88,$5d3850c4d0b4e6c7$export$602eac185826482c=$5d3850c4d0b4e6c7$export$dad7c95542bacce0,$5d3850c4d0b4e6c7$export$c6fdb837b070b4ff=$5d3850c4d0b4e6c7$export$bd1d06c79be19e17,$5d3850c4d0b4e6c7$export$7c6e2c02157bb7d2=$5d3850c4d0b4e6c7$export$b6d9565de1e068cf,$5d3850c4d0b4e6c7$export$f99233281efd08a0=$5d3850c4d0b4e6c7$export$16f7638e4a34b909,$5d3850c4d0b4e6c7$export$393edc798c47379d=$5d3850c4d0b4e6c7$export$94e94c2ec2c954d5,$5d3850c4d0b4e6c7$export$f39c2d165cd861fe=$5d3850c4d0b4e6c7$export$fba2fb7cd781b7ac,SCSheetPortal=$5d3850c4d0b4e6c7$export$602eac185826482c,SCSheetOverlay=reactExports.forwardRef(({className:o,...i},s)=>reactExports.createElement($5d3850c4d0b4e6c7$export$c6fdb837b070b4ff,{className:cn$1("ns-fixed ns-inset-0 ns-z-50 ns-bg-black/80 ns- data-[state=open]:ns-animate-in data-[state=closed]:ns-animate-out data-[state=closed]:ns-fade-out-0 data-[state=open]:ns-fade-in-0",o),...i,ref:s}));SCSheetOverlay.displayName=$5d3850c4d0b4e6c7$export$c6fdb837b070b4ff.displayName;const sheetVariants=cva("ns-fixed ns-z-50 ns-gap-4 ns-bg-white ns-py-4 ns-px-2 sm:ns-p-6 ns-shadow-lg ns-transition ns-ease-in-out data-[state=open]:ns-animate-in data-[state=closed]:ns-animate-out data-[state=closed]:ns-duration-300 data-[state=open]:ns-duration-500 dark:ns-bg-neutral-950",{variants:{side:{top:"ns-inset-x-0 ns-top-0 ns-border-b data-[state=closed]:ns-slide-out-to-top data-[state=open]:ns-slide-in-from-top",bottom:"ns-inset-x-0 ns-bottom-0 ns-border-t data-[state=closed]:ns-slide-out-to-bottom data-[state=open]:ns-slide-in-from-bottom",left:"ns-inset-y-0 ns-left-0 ns-h-full ns-w-3/4 ns-border-r data-[state=closed]:ns-slide-out-to-left data-[state=open]:ns-slide-in-from-left sm:ns-max-w-150",right:"ns-inset-y-0 ns-right-0 ns-h-full ns-w-3/4 ns-border-l data-[state=closed]:ns-slide-out-to-right data-[state=open]:ns-slide-in-from-right sm:ns-max-w-150"}},defaultVariants:{side:"right"}}),SCSheetContent=reactExports.forwardRef(({side:o="right",className:i,children:s,..._},_e)=>reactExports.createElement(SCSheetPortal,null,reactExports.createElement(SCSheetOverlay,null),reactExports.createElement($5d3850c4d0b4e6c7$export$7c6e2c02157bb7d2,{ref:_e,className:cn$1(sheetVariants({side:o}),i),..._},s,reactExports.createElement($5d3850c4d0b4e6c7$export$f39c2d165cd861fe,{className:"ns-absolute ns-right-4 ns-top-4 ns-rounded-sm ns-opacity-70 ns-ring-offset-white ns-transition-opacity hover:ns-opacity-100 focus:ns-outline-none focus:ns-ring-2 focus:ns-ring-neutral-950 focus:ns-ring-offset-2 disabled:ns-pointer-events-none data-[state=open]:ns-bg-neutral-100 dark:ns-ring-offset-neutral-950 dark:focus:ns-ring-neutral-300 dark:data-[state=open]:ns-bg-neutral-800"},reactExports.createElement("svg",{className:"ns-h-10 ns-w-10 ns-hidden md:ns-block",width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},reactExports.createElement("g",{clipPath:"url(#clip0_9426_40880)"},reactExports.createElement("path",{d:"M9.16668 30.8332L30.8333 9.1665",stroke:"#08081B",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),reactExports.createElement("path",{d:"M30.8333 30.8332L9.16668 9.1665",stroke:"#08081B",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})),reactExports.createElement("defs",null,reactExports.createElement("clipPath",{id:"clip0_9426_40880"},reactExports.createElement("rect",{width:"40",height:"40",fill:"white"})))),reactExports.createElement("span",{className:"ns-sr-only"},"Close")))));SCSheetContent.displayName=$5d3850c4d0b4e6c7$export$7c6e2c02157bb7d2.displayName;const SCSheetTitle=reactExports.forwardRef(({className:o,...i},s)=>reactExports.createElement($5d3850c4d0b4e6c7$export$f99233281efd08a0,{ref:s,className:cn$1("ns-text-lg ns-font-semibold ns-text-black dark:ns-text-white",o),...i}));SCSheetTitle.displayName=$5d3850c4d0b4e6c7$export$f99233281efd08a0.displayName;const SCSheetDescription=reactExports.forwardRef(({className:o,...i},s)=>reactExports.createElement($5d3850c4d0b4e6c7$export$393edc798c47379d,{ref:s,className:cn$1("ns-text-sm ns-text-neutral-500 dark:ns-text-neutral-400",o),...i}));function useTheme(){return React__default.useContext(ThemeContext)}SCSheetDescription.displayName=$5d3850c4d0b4e6c7$export$393edc798c47379d.displayName;var CartSummaryCardItemType;function fixProto(o,i){var s=Object.setPrototypeOf;s?s(o,i):o.__proto__=i}function fixStack(o,i){i===void 0&&(i=o.constructor);var s=Error.captureStackTrace;s&&s(o,i)}(function(o){o.ONCE_OFF="ONCE_OFF",o.MONTHLY="MONTHLY",o.FREE="FREE"})(CartSummaryCardItemType||(CartSummaryCardItemType={}));var __extends$19=(_extendStatics=function(o,i){return _extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,_){s.__proto__=_}||function(s,_){for(var _e in _)Object.prototype.hasOwnProperty.call(_,_e)&&(s[_e]=_[_e])},_extendStatics(o,i)},function(o,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function s(){this.constructor=o}_extendStatics(o,i),o.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)}),_extendStatics,CustomError=function(o){function i(s,_){var _e=this.constructor,ct=o.call(this,s,_)||this;return Object.defineProperty(ct,"name",{value:_e.name,enumerable:!1,configurable:!0}),fixProto(ct,_e.prototype),fixStack(ct),ct}return __extends$19(i,o),i}(Error),__extends$18=(extendStatics=function(o,i){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,_){s.__proto__=_}||function(s,_){for(var _e in _)_.hasOwnProperty(_e)&&(s[_e]=_[_e])},extendStatics(o,i)},function(o,i){function s(){this.constructor=o}extendStatics(o,i),o.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)}),extendStatics,Exception=function(o){function i(s){s===void 0&&(s=void 0);var _=o.call(this,s)||this;return _.message=s,_}return __extends$18(i,o),i.prototype.getKind=function(){return this.constructor.kind},i.kind="Exception",i}(CustomError),__extends$17=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}(),ArgumentException=function(o){function i(){return o!==null&&o.apply(this,arguments)||this}return __extends$17(i,o),i.kind="ArgumentException",i}(Exception),__extends$16=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}(),IllegalArgumentException=function(o){function i(){return o!==null&&o.apply(this,arguments)||this}return __extends$16(i,o),i.kind="IllegalArgumentException",i}(Exception),BinaryBitmap=function(){function o(i){if(this.binarizer=i,i===null)throw new IllegalArgumentException("Binarizer must be non-null.")}return o.prototype.getWidth=function(){return this.binarizer.getWidth()},o.prototype.getHeight=function(){return this.binarizer.getHeight()},o.prototype.getBlackRow=function(i,s){return this.binarizer.getBlackRow(i,s)},o.prototype.getBlackMatrix=function(){return this.matrix!==null&&this.matrix!==void 0||(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},o.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},o.prototype.crop=function(i,s,_,_e){var ct=this.binarizer.getLuminanceSource().crop(i,s,_,_e);return new o(this.binarizer.createBinarizer(ct))},o.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},o.prototype.rotateCounterClockwise=function(){var i=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new o(this.binarizer.createBinarizer(i))},o.prototype.rotateCounterClockwise45=function(){var i=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new o(this.binarizer.createBinarizer(i))},o.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},o}(),__extends$15=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}(),ChecksumException=function(o){function i(){return o!==null&&o.apply(this,arguments)||this}return __extends$15(i,o),i.getChecksumInstance=function(){return new i},i.kind="ChecksumException",i}(Exception),Binarizer=function(){function o(i){this.source=i}return o.prototype.getLuminanceSource=function(){return this.source},o.prototype.getWidth=function(){return this.source.getWidth()},o.prototype.getHeight=function(){return this.source.getHeight()},o}(),System=function(){function o(){}return o.arraycopy=function(i,s,_,_e,ct){for(;ct--;)_[_e++]=i[s++]},o.currentTimeMillis=function(){return Date.now()},o}(),__extends$14=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}(),IndexOutOfBoundsException=function(o){function i(){return o!==null&&o.apply(this,arguments)||this}return __extends$14(i,o),i.kind="IndexOutOfBoundsException",i}(Exception),__extends$13=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}(),ArrayIndexOutOfBoundsException=function(o){function i(s,_){s===void 0&&(s=void 0),_===void 0&&(_=void 0);var _e=o.call(this,_)||this;return _e.index=s,_e.message=_,_e}return __extends$13(i,o),i.kind="ArrayIndexOutOfBoundsException",i}(IndexOutOfBoundsException),__values$J=function(o){var i=typeof Symbol=="function"&&Symbol.iterator,s=i&&o[i],_=0;if(s)return s.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&_>=o.length&&(o=void 0),{value:o&&o[_++],done:!o}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},Arrays=function(){function o(){}return o.fill=function(i,s){for(var _=0,_e=i.length;_<_e;_++)i[_]=s},o.fillWithin=function(i,s,_,_e){o.rangeCheck(i.length,s,_);for(var ct=s;ct<_;ct++)i[ct]=_e},o.rangeCheck=function(i,s,_){if(s>_)throw new IllegalArgumentException("fromIndex("+s+") > toIndex("+_+")");if(s<0)throw new ArrayIndexOutOfBoundsException(s);if(_>i)throw new ArrayIndexOutOfBoundsException(_)},o.asList=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return i},o.create=function(i,s,_){return Array.from({length:i}).map(function(_e){return Array.from({length:s}).fill(_)})},o.createInt32Array=function(i,s,_){return Array.from({length:i}).map(function(_e){return Int32Array.from({length:s}).fill(_)})},o.equals=function(i,s){if(!i||!s||!i.length||!s.length||i.length!==s.length)return!1;for(var _=0,_e=i.length;_<_e;_++)if(i[_]!==s[_])return!1;return!0},o.hashCode=function(i){var s,_;if(i===null)return 0;var _e=1;try{for(var ct=__values$J(i),Mt=ct.next();!Mt.done;Mt=ct.next())_e=31*_e+Mt.value}catch(Ft){s={error:Ft}}finally{try{Mt&&!Mt.done&&(_=ct.return)&&_.call(ct)}finally{if(s)throw s.error}}return _e},o.fillUint8Array=function(i,s){for(var _=0;_!==i.length;_++)i[_]=s},o.copyOf=function(i,s){return i.slice(0,s)},o.copyOfUint8Array=function(i,s){if(i.length<=s){var _=new Uint8Array(s);return _.set(i),_}return i.slice(0,s)},o.copyOfRange=function(i,s,_){var _e=_-s,ct=new Int32Array(_e);return System.arraycopy(i,s,ct,0,_e),ct},o.binarySearch=function(i,s,_){_===void 0&&(_=o.numberComparator);for(var _e=0,ct=i.length-1;_e<=ct;){var Mt=ct+_e>>1,Ft=_(s,i[Mt]);if(Ft>0)_e=Mt+1;else{if(!(Ft<0))return Mt;ct=Mt-1}}return-_e-1},o.numberComparator=function(i,s){return i-s},o}(),Integer=function(){function o(){}return o.numberOfTrailingZeros=function(i){var s;if(i===0)return 32;var _=31;return(s=i<<16)!==0&&(_-=16,i=s),(s=i<<8)!==0&&(_-=8,i=s),(s=i<<4)!==0&&(_-=4,i=s),(s=i<<2)!==0&&(_-=2,i=s),_-(i<<1>>>31)},o.numberOfLeadingZeros=function(i){if(i===0)return 32;var s=1;return!(i>>>16)&&(s+=16,i<<=16),!(i>>>24)&&(s+=8,i<<=8),!(i>>>28)&&(s+=4,i<<=4),!(i>>>30)&&(s+=2,i<<=2),s-=i>>>31},o.toHexString=function(i){return i.toString(16)},o.toBinaryString=function(i){return String(parseInt(String(i),2))},o.bitCount=function(i){return i=(i=(858993459&(i-=i>>>1&1431655765))+(i>>>2&858993459))+(i>>>4)&252645135,i+=i>>>8,63&(i+=i>>>16)},o.truncDivision=function(i,s){return Math.trunc(i/s)},o.parseInt=function(i,s){return s===void 0&&(s=void 0),parseInt(i,s)},o.MIN_VALUE_32_BITS=-2147483648,o.MAX_VALUE=Number.MAX_SAFE_INTEGER,o}(),BitArray=function(){function o(i,s){i===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=i,this.bits=s??o.makeArray(i))}return o.prototype.getSize=function(){return this.size},o.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},o.prototype.ensureCapacity=function(i){if(i>32*this.bits.length){var s=o.makeArray(i);System.arraycopy(this.bits,0,s,0,this.bits.length),this.bits=s}},o.prototype.get=function(i){return!!(this.bits[Math.floor(i/32)]&1<<(31&i))},o.prototype.set=function(i){this.bits[Math.floor(i/32)]|=1<<(31&i)},o.prototype.flip=function(i){this.bits[Math.floor(i/32)]^=1<<(31&i)},o.prototype.getNextSet=function(i){var s=this.size;if(i>=s)return s;var _=this.bits,_e=Math.floor(i/32),ct=_[_e];ct&=~((1<<(31&i))-1);for(var Mt=_.length;ct===0;){if(++_e===Mt)return s;ct=_[_e]}var Ft=32*_e+Integer.numberOfTrailingZeros(ct);return Ft>s?s:Ft},o.prototype.getNextUnset=function(i){var s=this.size;if(i>=s)return s;var _=this.bits,_e=Math.floor(i/32),ct=~_[_e];ct&=~((1<<(31&i))-1);for(var Mt=_.length;ct===0;){if(++_e===Mt)return s;ct=~_[_e]}var Ft=32*_e+Integer.numberOfTrailingZeros(ct);return Ft>s?s:Ft},o.prototype.setBulk=function(i,s){this.bits[Math.floor(i/32)]=s},o.prototype.setRange=function(i,s){if(s<i||i<0||s>this.size)throw new IllegalArgumentException;if(s!==i){s--;for(var _=Math.floor(i/32),_e=Math.floor(s/32),ct=this.bits,Mt=_;Mt<=_e;Mt++){var Ft=(2<<(Mt<_e?31:31&s))-(1<<(Mt>_?0:31&i));ct[Mt]|=Ft}}},o.prototype.clear=function(){for(var i=this.bits.length,s=this.bits,_=0;_<i;_++)s[_]=0},o.prototype.isRange=function(i,s,_){if(s<i||i<0||s>this.size)throw new IllegalArgumentException;if(s===i)return!0;s--;for(var _e=Math.floor(i/32),ct=Math.floor(s/32),Mt=this.bits,Ft=_e;Ft<=ct;Ft++){var Ut=(2<<(Ft<ct?31:31&s))-(1<<(Ft>_e?0:31&i))&4294967295;if((Mt[Ft]&Ut)!==(_?Ut:0))return!1}return!0},o.prototype.appendBit=function(i){this.ensureCapacity(this.size+1),i&&(this.bits[Math.floor(this.size/32)]|=1<<(31&this.size)),this.size++},o.prototype.appendBits=function(i,s){if(s<0||s>32)throw new IllegalArgumentException("Num bits must be between 0 and 32");this.ensureCapacity(this.size+s);for(var _=s;_>0;_--)this.appendBit((i>>_-1&1)==1)},o.prototype.appendBitArray=function(i){var s=i.size;this.ensureCapacity(this.size+s);for(var _=0;_<s;_++)this.appendBit(i.get(_))},o.prototype.xor=function(i){if(this.size!==i.size)throw new IllegalArgumentException("Sizes don't match");for(var s=this.bits,_=0,_e=s.length;_<_e;_++)s[_]^=i.bits[_]},o.prototype.toBytes=function(i,s,_,_e){for(var ct=0;ct<_e;ct++){for(var Mt=0,Ft=0;Ft<8;Ft++)this.get(i)&&(Mt|=1<<7-Ft),i++;s[_+ct]=Mt}},o.prototype.getBitArray=function(){return this.bits},o.prototype.reverse=function(){for(var i=new Int32Array(this.bits.length),s=Math.floor((this.size-1)/32),_=s+1,_e=this.bits,ct=0;ct<_;ct++){var Mt=_e[ct];Mt=(Mt=(Mt=(Mt=(Mt=Mt>>1&1431655765|(1431655765&Mt)<<1)>>2&858993459|(858993459&Mt)<<2)>>4&252645135|(252645135&Mt)<<4)>>8&16711935|(16711935&Mt)<<8)>>16&65535|(65535&Mt)<<16,i[s-ct]=Mt}if(this.size!==32*_){var Ft=32*_-this.size,Ut=i[0]>>>Ft;for(ct=1;ct<_;ct++){var Xt=i[ct];Ut|=Xt<<32-Ft,i[ct-1]=Ut,Ut=Xt>>>Ft}i[_-1]=Ut}this.bits=i},o.makeArray=function(i){return new Int32Array(Math.floor((i+31)/32))},o.prototype.equals=function(i){if(!(i instanceof o))return!1;var s=i;return this.size===s.size&&Arrays.equals(this.bits,s.bits)},o.prototype.hashCode=function(){return 31*this.size+Arrays.hashCode(this.bits)},o.prototype.toString=function(){for(var i="",s=0,_=this.size;s<_;s++)7&s||(i+=" "),i+=this.get(s)?"X":".";return i},o.prototype.clone=function(){return new o(this.size,this.bits.slice())},o.prototype.toArray=function(){for(var i=[],s=0,_=this.size;s<_;s++)i.push(this.get(s));return i},o}(),DecodeHintType;(function(o){o[o.OTHER=0]="OTHER",o[o.PURE_BARCODE=1]="PURE_BARCODE",o[o.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",o[o.TRY_HARDER=3]="TRY_HARDER",o[o.CHARACTER_SET=4]="CHARACTER_SET",o[o.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",o[o.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",o[o.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",o[o.ASSUME_GS1=8]="ASSUME_GS1",o[o.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",o[o.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",o[o.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(DecodeHintType||(DecodeHintType={}));var DecodeHintType$1=DecodeHintType,__extends$12=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}(),FormatException=function(o){function i(){return o!==null&&o.apply(this,arguments)||this}return __extends$12(i,o),i.getFormatInstance=function(){return new i},i.kind="FormatException",i}(Exception),__values$I=function(o){var i=typeof Symbol=="function"&&Symbol.iterator,s=i&&o[i],_=0;if(s)return s.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&_>=o.length&&(o=void 0),{value:o&&o[_++],done:!o}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},CharacterSetValueIdentifiers;(function(o){o[o.Cp437=0]="Cp437",o[o.ISO8859_1=1]="ISO8859_1",o[o.ISO8859_2=2]="ISO8859_2",o[o.ISO8859_3=3]="ISO8859_3",o[o.ISO8859_4=4]="ISO8859_4",o[o.ISO8859_5=5]="ISO8859_5",o[o.ISO8859_6=6]="ISO8859_6",o[o.ISO8859_7=7]="ISO8859_7",o[o.ISO8859_8=8]="ISO8859_8",o[o.ISO8859_9=9]="ISO8859_9",o[o.ISO8859_10=10]="ISO8859_10",o[o.ISO8859_11=11]="ISO8859_11",o[o.ISO8859_13=12]="ISO8859_13",o[o.ISO8859_14=13]="ISO8859_14",o[o.ISO8859_15=14]="ISO8859_15",o[o.ISO8859_16=15]="ISO8859_16",o[o.SJIS=16]="SJIS",o[o.Cp1250=17]="Cp1250",o[o.Cp1251=18]="Cp1251",o[o.Cp1252=19]="Cp1252",o[o.Cp1256=20]="Cp1256",o[o.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",o[o.UTF8=22]="UTF8",o[o.ASCII=23]="ASCII",o[o.Big5=24]="Big5",o[o.GB18030=25]="GB18030",o[o.EUC_KR=26]="EUC_KR"})(CharacterSetValueIdentifiers||(CharacterSetValueIdentifiers={}));var CharacterSetECI=function(){function o(i,s,_){for(var _e,ct,Mt=[],Ft=3;Ft<arguments.length;Ft++)Mt[Ft-3]=arguments[Ft];this.valueIdentifier=i,this.name=_,this.values=typeof s=="number"?Int32Array.from([s]):s,this.otherEncodingNames=Mt,o.VALUE_IDENTIFIER_TO_ECI.set(i,this),o.NAME_TO_ECI.set(_,this);for(var Ut=this.values,Xt=0,Kt=Ut.length;Xt!==Kt;Xt++){var nr=Ut[Xt];o.VALUES_TO_ECI.set(nr,this)}try{for(var rr=__values$I(Mt),or=rr.next();!or.done;or=rr.next()){var hr=or.value;o.NAME_TO_ECI.set(hr,this)}}catch(fr){_e={error:fr}}finally{try{or&&!or.done&&(ct=rr.return)&&ct.call(rr)}finally{if(_e)throw _e.error}}}return o.prototype.getValueIdentifier=function(){return this.valueIdentifier},o.prototype.getName=function(){return this.name},o.prototype.getValue=function(){return this.values[0]},o.getCharacterSetECIByValue=function(i){if(i<0||i>=900)throw new FormatException("incorect value");var s=o.VALUES_TO_ECI.get(i);if(s===void 0)throw new FormatException("incorect value");return s},o.getCharacterSetECIByName=function(i){var s=o.NAME_TO_ECI.get(i);if(s===void 0)throw new FormatException("incorect value");return s},o.prototype.equals=function(i){if(!(i instanceof o))return!1;var s=i;return this.getName()===s.getName()},o.VALUE_IDENTIFIER_TO_ECI=new Map,o.VALUES_TO_ECI=new Map,o.NAME_TO_ECI=new Map,o.Cp437=new o(CharacterSetValueIdentifiers.Cp437,Int32Array.from([0,2]),"Cp437"),o.ISO8859_1=new o(CharacterSetValueIdentifiers.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),o.ISO8859_2=new o(CharacterSetValueIdentifiers.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),o.ISO8859_3=new o(CharacterSetValueIdentifiers.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),o.ISO8859_4=new o(CharacterSetValueIdentifiers.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),o.ISO8859_5=new o(CharacterSetValueIdentifiers.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),o.ISO8859_6=new o(CharacterSetValueIdentifiers.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),o.ISO8859_7=new o(CharacterSetValueIdentifiers.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),o.ISO8859_8=new o(CharacterSetValueIdentifiers.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),o.ISO8859_9=new o(CharacterSetValueIdentifiers.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),o.ISO8859_10=new o(CharacterSetValueIdentifiers.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),o.ISO8859_11=new o(CharacterSetValueIdentifiers.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),o.ISO8859_13=new o(CharacterSetValueIdentifiers.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),o.ISO8859_14=new o(CharacterSetValueIdentifiers.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),o.ISO8859_15=new o(CharacterSetValueIdentifiers.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),o.ISO8859_16=new o(CharacterSetValueIdentifiers.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),o.SJIS=new o(CharacterSetValueIdentifiers.SJIS,20,"SJIS","Shift_JIS"),o.Cp1250=new o(CharacterSetValueIdentifiers.Cp1250,21,"Cp1250","windows-1250"),o.Cp1251=new o(CharacterSetValueIdentifiers.Cp1251,22,"Cp1251","windows-1251"),o.Cp1252=new o(CharacterSetValueIdentifiers.Cp1252,23,"Cp1252","windows-1252"),o.Cp1256=new o(CharacterSetValueIdentifiers.Cp1256,24,"Cp1256","windows-1256"),o.UnicodeBigUnmarked=new o(CharacterSetValueIdentifiers.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),o.UTF8=new o(CharacterSetValueIdentifiers.UTF8,26,"UTF8","UTF-8"),o.ASCII=new o(CharacterSetValueIdentifiers.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),o.Big5=new o(CharacterSetValueIdentifiers.Big5,28,"Big5"),o.GB18030=new o(CharacterSetValueIdentifiers.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),o.EUC_KR=new o(CharacterSetValueIdentifiers.EUC_KR,30,"EUC_KR","EUC-KR"),o}(),__extends$11=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}(),UnsupportedOperationException=function(o){function i(){return o!==null&&o.apply(this,arguments)||this}return __extends$11(i,o),i.kind="UnsupportedOperationException",i}(Exception),StringEncoding=function(){function o(){}return o.decode=function(i,s){var _=this.encodingName(s);return this.customDecoder?this.customDecoder(i,_):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(_)?this.decodeFallback(i,_):new TextDecoder(_).decode(i)},o.shouldDecodeOnFallback=function(i){return!o.isBrowser()&&i==="ISO-8859-1"},o.encode=function(i,s){var _=this.encodingName(s);return this.customEncoder?this.customEncoder(i,_):typeof TextEncoder>"u"?this.encodeFallback(i):new TextEncoder().encode(i)},o.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},o.encodingName=function(i){return typeof i=="string"?i:i.getName()},o.encodingCharacterSet=function(i){return i instanceof CharacterSetECI?i:CharacterSetECI.getCharacterSetECIByName(i)},o.decodeFallback=function(i,s){var _=this.encodingCharacterSet(s);if(o.isDecodeFallbackSupported(_)){for(var _e="",ct=0,Mt=i.length;ct<Mt;ct++){var Ft=i[ct].toString(16);Ft.length<2&&(Ft="0"+Ft),_e+="%"+Ft}return decodeURIComponent(_e)}if(_.equals(CharacterSetECI.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(i.buffer));throw new UnsupportedOperationException("Encoding "+this.encodingName(s)+" not supported by fallback.")},o.isDecodeFallbackSupported=function(i){return i.equals(CharacterSetECI.UTF8)||i.equals(CharacterSetECI.ISO8859_1)||i.equals(CharacterSetECI.ASCII)},o.encodeFallback=function(i){for(var s=btoa(unescape(encodeURIComponent(i))).split(""),_=[],_e=0;_e<s.length;_e++)_.push(s[_e].charCodeAt(0));return new Uint8Array(_)},o}(),StringUtils=function(){function o(){}return o.castAsNonUtf8Char=function(i,s){s===void 0&&(s=null);var _=s?s.getName():this.ISO88591;return StringEncoding.decode(new Uint8Array([i]),_)},o.guessEncoding=function(i,s){if(s!=null&&s.get(DecodeHintType$1.CHARACTER_SET)!==void 0)return s.get(DecodeHintType$1.CHARACTER_SET).toString();for(var _=i.length,_e=!0,ct=!0,Mt=!0,Ft=0,Ut=0,Xt=0,Kt=0,nr=0,rr=0,or=0,hr=0,fr=0,yr=0,Lr=0,Br=i.length>3&&i[0]===239&&i[1]===187&&i[2]===191,Vr=0;Vr<_&&(_e||ct||Mt);Vr++){var Wr=255&i[Vr];Mt&&(Ft>0?128&Wr?Ft--:Mt=!1:128&Wr&&(64&Wr?(Ft++,32&Wr?(Ft++,16&Wr?(Ft++,8&Wr?Mt=!1:Kt++):Xt++):Ut++):Mt=!1)),_e&&(Wr>127&&Wr<160?_e=!1:Wr>159&&(Wr<192||Wr===215||Wr===247)&&Lr++),ct&&(nr>0?Wr<64||Wr===127||Wr>252?ct=!1:nr--:Wr===128||Wr===160||Wr>239?ct=!1:Wr>160&&Wr<224?(rr++,hr=0,++or>fr&&(fr=or)):Wr>127?(nr++,or=0,++hr>yr&&(yr=hr)):(or=0,hr=0))}return Mt&&Ft>0&&(Mt=!1),ct&&nr>0&&(ct=!1),Mt&&(Br||Ut+Xt+Kt>0)?o.UTF8:ct&&(o.ASSUME_SHIFT_JIS||fr>=3||yr>=3)?o.SHIFT_JIS:_e&&ct?fr===2&&rr===2||10*Lr>=_?o.SHIFT_JIS:o.ISO88591:_e?o.ISO88591:ct?o.SHIFT_JIS:Mt?o.UTF8:o.PLATFORM_DEFAULT_ENCODING},o.format=function(i){for(var s=[],_=1;_<arguments.length;_++)s[_-1]=arguments[_];var _e=-1;return i.replace(/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g,function(ct,Mt,Ft,Ut,Xt,Kt){if(ct==="%%")return"%";if(s[++_e]!==void 0){ct=Ut?parseInt(Ut.substr(1)):void 0;var nr,rr=Xt?parseInt(Xt.substr(1)):void 0;switch(Kt){case"s":nr=s[_e];break;case"c":nr=s[_e][0];break;case"f":nr=parseFloat(s[_e]).toFixed(ct);break;case"p":nr=parseFloat(s[_e]).toPrecision(ct);break;case"e":nr=parseFloat(s[_e]).toExponential(ct);break;case"x":nr=parseInt(s[_e]).toString(rr||16);break;case"d":nr=parseFloat(parseInt(s[_e],rr||10).toPrecision(ct)).toFixed(0)}nr=typeof nr=="object"?JSON.stringify(nr):(+nr).toString(rr);for(var or=parseInt(Ft),hr=Ft&&Ft[0]+""=="0"?"0":" ";nr.length<or;)nr=Mt!==void 0?nr+hr:hr+nr;return nr}})},o.getBytes=function(i,s){return StringEncoding.encode(i,s)},o.getCharCode=function(i,s){return s===void 0&&(s=0),i.charCodeAt(s)},o.getCharAt=function(i){return String.fromCharCode(i)},o.SHIFT_JIS=CharacterSetECI.SJIS.getName(),o.GB2312="GB2312",o.ISO88591=CharacterSetECI.ISO8859_1.getName(),o.EUC_JP="EUC_JP",o.UTF8=CharacterSetECI.UTF8.getName(),o.PLATFORM_DEFAULT_ENCODING=o.UTF8,o.ASSUME_SHIFT_JIS=!1,o}(),StringBuilder=function(){function o(i){i===void 0&&(i=""),this.value=i}return o.prototype.enableDecoding=function(i){return this.encoding=i,this},o.prototype.append=function(i){return typeof i=="string"?this.value+=i.toString():this.encoding?this.value+=StringUtils.castAsNonUtf8Char(i,this.encoding):this.value+=String.fromCharCode(i),this},o.prototype.appendChars=function(i,s,_){for(var _e=s;s<s+_;_e++)this.append(i[_e]);return this},o.prototype.length=function(){return this.value.length},o.prototype.charAt=function(i){return this.value.charAt(i)},o.prototype.deleteCharAt=function(i){this.value=this.value.substr(0,i)+this.value.substring(i+1)},o.prototype.setCharAt=function(i,s){this.value=this.value.substr(0,i)+s+this.value.substr(i+1)},o.prototype.substring=function(i,s){return this.value.substring(i,s)},o.prototype.setLengthToZero=function(){this.value=""},o.prototype.toString=function(){return this.value},o.prototype.insert=function(i,s){this.value=this.value.substring(0,i)+s+this.value.substring(i)},o}(),BitMatrix=function(){function o(i,s,_,_e){if(this.width=i,this.height=s,this.rowSize=_,this.bits=_e,s==null&&(s=i),this.height=s,i<1||s<1)throw new IllegalArgumentException("Both dimensions must be greater than 0");_==null&&(_=Math.floor((i+31)/32)),this.rowSize=_,_e==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return o.parseFromBooleanArray=function(i){for(var s=i.length,_=i[0].length,_e=new o(_,s),ct=0;ct<s;ct++)for(var Mt=i[ct],Ft=0;Ft<_;Ft++)Mt[Ft]&&_e.set(Ft,ct);return _e},o.parseFromString=function(i,s,_){if(i===null)throw new IllegalArgumentException("stringRepresentation cannot be null");for(var _e=new Array(i.length),ct=0,Mt=0,Ft=-1,Ut=0,Xt=0;Xt<i.length;)if(i.charAt(Xt)===`
`||i.charAt(Xt)==="\r"){if(ct>Mt){if(Ft===-1)Ft=ct-Mt;else if(ct-Mt!==Ft)throw new IllegalArgumentException("row lengths do not match");Mt=ct,Ut++}Xt++}else if(i.substring(Xt,Xt+s.length)===s)Xt+=s.length,_e[ct]=!0,ct++;else{if(i.substring(Xt,Xt+_.length)!==_)throw new IllegalArgumentException("illegal character encountered: "+i.substring(Xt));Xt+=_.length,_e[ct]=!1,ct++}if(ct>Mt){if(Ft===-1)Ft=ct-Mt;else if(ct-Mt!==Ft)throw new IllegalArgumentException("row lengths do not match");Ut++}for(var Kt=new o(Ft,Ut),nr=0;nr<ct;nr++)_e[nr]&&Kt.set(Math.floor(nr%Ft),Math.floor(nr/Ft));return Kt},o.prototype.get=function(i,s){var _=s*this.rowSize+Math.floor(i/32);return!!(this.bits[_]>>>(31&i)&1)},o.prototype.set=function(i,s){var _=s*this.rowSize+Math.floor(i/32);this.bits[_]|=1<<(31&i)&4294967295},o.prototype.unset=function(i,s){var _=s*this.rowSize+Math.floor(i/32);this.bits[_]&=~(1<<(31&i)&4294967295)},o.prototype.flip=function(i,s){var _=s*this.rowSize+Math.floor(i/32);this.bits[_]^=1<<(31&i)&4294967295},o.prototype.xor=function(i){if(this.width!==i.getWidth()||this.height!==i.getHeight()||this.rowSize!==i.getRowSize())throw new IllegalArgumentException("input matrix dimensions do not match");for(var s=new BitArray(Math.floor(this.width/32)+1),_=this.rowSize,_e=this.bits,ct=0,Mt=this.height;ct<Mt;ct++)for(var Ft=ct*_,Ut=i.getRow(ct,s).getBitArray(),Xt=0;Xt<_;Xt++)_e[Ft+Xt]^=Ut[Xt]},o.prototype.clear=function(){for(var i=this.bits,s=i.length,_=0;_<s;_++)i[_]=0},o.prototype.setRegion=function(i,s,_,_e){if(s<0||i<0)throw new IllegalArgumentException("Left and top must be nonnegative");if(_e<1||_<1)throw new IllegalArgumentException("Height and width must be at least 1");var ct=i+_,Mt=s+_e;if(Mt>this.height||ct>this.width)throw new IllegalArgumentException("The region must fit inside the matrix");for(var Ft=this.rowSize,Ut=this.bits,Xt=s;Xt<Mt;Xt++)for(var Kt=Xt*Ft,nr=i;nr<ct;nr++)Ut[Kt+Math.floor(nr/32)]|=1<<(31&nr)&4294967295},o.prototype.getRow=function(i,s){s==null||s.getSize()<this.width?s=new BitArray(this.width):s.clear();for(var _=this.rowSize,_e=this.bits,ct=i*_,Mt=0;Mt<_;Mt++)s.setBulk(32*Mt,_e[ct+Mt]);return s},o.prototype.setRow=function(i,s){System.arraycopy(s.getBitArray(),0,this.bits,i*this.rowSize,this.rowSize)},o.prototype.rotate180=function(){for(var i=this.getWidth(),s=this.getHeight(),_=new BitArray(i),_e=new BitArray(i),ct=0,Mt=Math.floor((s+1)/2);ct<Mt;ct++)_=this.getRow(ct,_),_e=this.getRow(s-1-ct,_e),_.reverse(),_e.reverse(),this.setRow(ct,_e),this.setRow(s-1-ct,_)},o.prototype.getEnclosingRectangle=function(){for(var i=this.width,s=this.height,_=this.rowSize,_e=this.bits,ct=i,Mt=s,Ft=-1,Ut=-1,Xt=0;Xt<s;Xt++)for(var Kt=0;Kt<_;Kt++){var nr=_e[Xt*_+Kt];if(nr!==0){if(Xt<Mt&&(Mt=Xt),Xt>Ut&&(Ut=Xt),32*Kt<ct){for(var rr=0;!(nr<<31-rr&4294967295);)rr++;32*Kt+rr<ct&&(ct=32*Kt+rr)}if(32*Kt+31>Ft){for(rr=31;!(nr>>>rr);)rr--;32*Kt+rr>Ft&&(Ft=32*Kt+rr)}}}return Ft<ct||Ut<Mt?null:Int32Array.from([ct,Mt,Ft-ct+1,Ut-Mt+1])},o.prototype.getTopLeftOnBit=function(){for(var i=this.rowSize,s=this.bits,_=0;_<s.length&&s[_]===0;)_++;if(_===s.length)return null;for(var _e=_/i,ct=_%i*32,Mt=s[_],Ft=0;!(Mt<<31-Ft&4294967295);)Ft++;return ct+=Ft,Int32Array.from([ct,_e])},o.prototype.getBottomRightOnBit=function(){for(var i=this.rowSize,s=this.bits,_=s.length-1;_>=0&&s[_]===0;)_--;if(_<0)return null;for(var _e=Math.floor(_/i),ct=32*Math.floor(_%i),Mt=s[_],Ft=31;!(Mt>>>Ft);)Ft--;return ct+=Ft,Int32Array.from([ct,_e])},o.prototype.getWidth=function(){return this.width},o.prototype.getHeight=function(){return this.height},o.prototype.getRowSize=function(){return this.rowSize},o.prototype.equals=function(i){if(!(i instanceof o))return!1;var s=i;return this.width===s.width&&this.height===s.height&&this.rowSize===s.rowSize&&Arrays.equals(this.bits,s.bits)},o.prototype.hashCode=function(){var i=this.width;return i=31*(i=31*(i=31*(i=31*i+this.width)+this.height)+this.rowSize)+Arrays.hashCode(this.bits)},o.prototype.toString=function(i,s,_){return i===void 0&&(i="X "),s===void 0&&(s="  "),_===void 0&&(_=`
`),this.buildToString(i,s,_)},o.prototype.buildToString=function(i,s,_){for(var _e=new StringBuilder,ct=0,Mt=this.height;ct<Mt;ct++){for(var Ft=0,Ut=this.width;Ft<Ut;Ft++)_e.append(this.get(Ft,ct)?i:s);_e.append(_)}return _e.toString()},o.prototype.clone=function(){return new o(this.width,this.height,this.rowSize,this.bits.slice())},o}(),__extends$10=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}(),NotFoundException=function(o){function i(){return o!==null&&o.apply(this,arguments)||this}return __extends$10(i,o),i.getNotFoundInstance=function(){return new i},i.kind="NotFoundException",i}(Exception),__extends$$=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}(),GlobalHistogramBinarizer=function(o){function i(s){var _=o.call(this,s)||this;return _.luminances=i.EMPTY,_.buckets=new Int32Array(i.LUMINANCE_BUCKETS),_}return __extends$$(i,o),i.prototype.getBlackRow=function(s,_){var _e=this.getLuminanceSource(),ct=_e.getWidth();_==null||_.getSize()<ct?_=new BitArray(ct):_.clear(),this.initArrays(ct);for(var Mt=_e.getRow(s,this.luminances),Ft=this.buckets,Ut=0;Ut<ct;Ut++)Ft[(255&Mt[Ut])>>i.LUMINANCE_SHIFT]++;var Xt=i.estimateBlackPoint(Ft);if(ct<3)for(Ut=0;Ut<ct;Ut++)(255&Mt[Ut])<Xt&&_.set(Ut);else{var Kt=255&Mt[0],nr=255&Mt[1];for(Ut=1;Ut<ct-1;Ut++){var rr=255&Mt[Ut+1];(4*nr-Kt-rr)/2<Xt&&_.set(Ut),Kt=nr,nr=rr}}return _},i.prototype.getBlackMatrix=function(){var s=this.getLuminanceSource(),_=s.getWidth(),_e=s.getHeight(),ct=new BitMatrix(_,_e);this.initArrays(_);for(var Mt=this.buckets,Ft=1;Ft<5;Ft++)for(var Ut=Math.floor(_e*Ft/5),Xt=s.getRow(Ut,this.luminances),Kt=Math.floor(4*_/5),nr=Math.floor(_/5);nr<Kt;nr++)Mt[(255&Xt[nr])>>i.LUMINANCE_SHIFT]++;var rr=i.estimateBlackPoint(Mt),or=s.getMatrix();for(Ft=0;Ft<_e;Ft++){var hr=Ft*_;for(nr=0;nr<_;nr++)(255&or[hr+nr])<rr&&ct.set(nr,Ft)}return ct},i.prototype.createBinarizer=function(s){return new i(s)},i.prototype.initArrays=function(s){this.luminances.length<s&&(this.luminances=new Uint8ClampedArray(s));for(var _=this.buckets,_e=0;_e<i.LUMINANCE_BUCKETS;_e++)_[_e]=0},i.estimateBlackPoint=function(s){for(var _=s.length,_e=0,ct=0,Mt=0,Ft=0;Ft<_;Ft++)s[Ft]>Mt&&(ct=Ft,Mt=s[Ft]),s[Ft]>_e&&(_e=s[Ft]);var Ut=0,Xt=0;for(Ft=0;Ft<_;Ft++){var Kt=Ft-ct;(hr=s[Ft]*Kt*Kt)>Xt&&(Ut=Ft,Xt=hr)}if(ct>Ut){var nr=ct;ct=Ut,Ut=nr}if(Ut-ct<=_/16)throw new NotFoundException;var rr=Ut-1,or=-1;for(Ft=Ut-1;Ft>ct;Ft--){var hr,fr=Ft-ct;(hr=fr*fr*(Ut-Ft)*(_e-s[Ft]))>or&&(rr=Ft,or=hr)}return rr<<i.LUMINANCE_SHIFT},i.LUMINANCE_BITS=5,i.LUMINANCE_SHIFT=8-i.LUMINANCE_BITS,i.LUMINANCE_BUCKETS=1<<i.LUMINANCE_BITS,i.EMPTY=Uint8ClampedArray.from([0]),i}(Binarizer),__extends$_=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}(),HybridBinarizer=function(o){function i(s){var _=o.call(this,s)||this;return _.matrix=null,_}return __extends$_(i,o),i.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var s=this.getLuminanceSource(),_=s.getWidth(),_e=s.getHeight();if(_>=i.MINIMUM_DIMENSION&&_e>=i.MINIMUM_DIMENSION){var ct=s.getMatrix(),Mt=_>>i.BLOCK_SIZE_POWER;_&i.BLOCK_SIZE_MASK&&Mt++;var Ft=_e>>i.BLOCK_SIZE_POWER;_e&i.BLOCK_SIZE_MASK&&Ft++;var Ut=i.calculateBlackPoints(ct,Mt,Ft,_,_e),Xt=new BitMatrix(_,_e);i.calculateThresholdForBlock(ct,Mt,Ft,_,_e,Ut,Xt),this.matrix=Xt}else this.matrix=o.prototype.getBlackMatrix.call(this);return this.matrix},i.prototype.createBinarizer=function(s){return new i(s)},i.calculateThresholdForBlock=function(s,_,_e,ct,Mt,Ft,Ut){for(var Xt=Mt-i.BLOCK_SIZE,Kt=ct-i.BLOCK_SIZE,nr=0;nr<_e;nr++){var rr=nr<<i.BLOCK_SIZE_POWER;rr>Xt&&(rr=Xt);for(var or=i.cap(nr,2,_e-3),hr=0;hr<_;hr++){var fr=hr<<i.BLOCK_SIZE_POWER;fr>Kt&&(fr=Kt);for(var yr=i.cap(hr,2,_-3),Lr=0,Br=-2;Br<=2;Br++){var Vr=Ft[or+Br];Lr+=Vr[yr-2]+Vr[yr-1]+Vr[yr]+Vr[yr+1]+Vr[yr+2]}var Wr=Lr/25;i.thresholdBlock(s,fr,rr,Wr,ct,Ut)}}},i.cap=function(s,_,_e){return s<_?_:s>_e?_e:s},i.thresholdBlock=function(s,_,_e,ct,Mt,Ft){for(var Ut=0,Xt=_e*Mt+_;Ut<i.BLOCK_SIZE;Ut++,Xt+=Mt)for(var Kt=0;Kt<i.BLOCK_SIZE;Kt++)(255&s[Xt+Kt])<=ct&&Ft.set(_+Kt,_e+Ut)},i.calculateBlackPoints=function(s,_,_e,ct,Mt){for(var Ft=Mt-i.BLOCK_SIZE,Ut=ct-i.BLOCK_SIZE,Xt=new Array(_e),Kt=0;Kt<_e;Kt++){Xt[Kt]=new Int32Array(_);var nr=Kt<<i.BLOCK_SIZE_POWER;nr>Ft&&(nr=Ft);for(var rr=0;rr<_;rr++){var or=rr<<i.BLOCK_SIZE_POWER;or>Ut&&(or=Ut);for(var hr=0,fr=255,yr=0,Lr=0,Br=nr*ct+or;Lr<i.BLOCK_SIZE;Lr++,Br+=ct){for(var Vr=0;Vr<i.BLOCK_SIZE;Vr++){var Wr=255&s[Br+Vr];hr+=Wr,Wr<fr&&(fr=Wr),Wr>yr&&(yr=Wr)}if(yr-fr>i.MIN_DYNAMIC_RANGE)for(Lr++,Br+=ct;Lr<i.BLOCK_SIZE;Lr++,Br+=ct)for(Vr=0;Vr<i.BLOCK_SIZE;Vr++)hr+=255&s[Br+Vr]}var ro=hr>>2*i.BLOCK_SIZE_POWER;if(yr-fr<=i.MIN_DYNAMIC_RANGE&&(ro=fr/2,Kt>0&&rr>0)){var no=(Xt[Kt-1][rr]+2*Xt[Kt][rr-1]+Xt[Kt-1][rr-1])/4;fr<no&&(ro=no)}Xt[Kt][rr]=ro}}return Xt},i.BLOCK_SIZE_POWER=3,i.BLOCK_SIZE=1<<i.BLOCK_SIZE_POWER,i.BLOCK_SIZE_MASK=i.BLOCK_SIZE-1,i.MINIMUM_DIMENSION=5*i.BLOCK_SIZE,i.MIN_DYNAMIC_RANGE=24,i}(GlobalHistogramBinarizer),LuminanceSource=function(){function o(i,s){this.width=i,this.height=s}return o.prototype.getWidth=function(){return this.width},o.prototype.getHeight=function(){return this.height},o.prototype.isCropSupported=function(){return!1},o.prototype.crop=function(i,s,_,_e){throw new UnsupportedOperationException("This luminance source does not support cropping.")},o.prototype.isRotateSupported=function(){return!1},o.prototype.rotateCounterClockwise=function(){throw new UnsupportedOperationException("This luminance source does not support rotation by 90 degrees.")},o.prototype.rotateCounterClockwise45=function(){throw new UnsupportedOperationException("This luminance source does not support rotation by 45 degrees.")},o.prototype.toString=function(){for(var i=new Uint8ClampedArray(this.width),s=new StringBuilder,_=0;_<this.height;_++){for(var _e=this.getRow(_,i),ct=0;ct<this.width;ct++){var Mt=255&_e[ct],Ft=void 0;Ft=Mt<64?"#":Mt<128?"+":Mt<192?".":" ",s.append(Ft)}s.append(`
`)}return s.toString()},o}(),__extends$Z=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}(),InvertedLuminanceSource=function(o){function i(s){var _=o.call(this,s.getWidth(),s.getHeight())||this;return _.delegate=s,_}return __extends$Z(i,o),i.prototype.getRow=function(s,_){for(var _e=this.delegate.getRow(s,_),ct=this.getWidth(),Mt=0;Mt<ct;Mt++)_e[Mt]=255-(255&_e[Mt]);return _e},i.prototype.getMatrix=function(){for(var s=this.delegate.getMatrix(),_=this.getWidth()*this.getHeight(),_e=new Uint8ClampedArray(_),ct=0;ct<_;ct++)_e[ct]=255-(255&s[ct]);return _e},i.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},i.prototype.crop=function(s,_,_e,ct){return new i(this.delegate.crop(s,_,_e,ct))},i.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},i.prototype.invert=function(){return this.delegate},i.prototype.rotateCounterClockwise=function(){return new i(this.delegate.rotateCounterClockwise())},i.prototype.rotateCounterClockwise45=function(){return new i(this.delegate.rotateCounterClockwise45())},i}(LuminanceSource),__extends$Y=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}(),HTMLCanvasElementLuminanceSource=function(o){function i(s){var _=o.call(this,s.width,s.height)||this;return _.canvas=s,_.tempCanvasElement=null,_.buffer=i.makeBufferFromCanvasImageData(s),_}return __extends$Y(i,o),i.makeBufferFromCanvasImageData=function(s){var _=s.getContext("2d").getImageData(0,0,s.width,s.height);return i.toGrayscaleBuffer(_.data,s.width,s.height)},i.toGrayscaleBuffer=function(s,_,_e){var ct=new Uint8ClampedArray(_*_e);if(i.FRAME_INDEX=!i.FRAME_INDEX,i.FRAME_INDEX)for(var Mt=0,Ft=0,Ut=s.length;Mt<Ut;Mt+=4,Ft++){var Xt=void 0;s[Mt+3]===0?Xt=255:Xt=306*s[Mt]+601*s[Mt+1]+117*s[Mt+2]+512>>10,ct[Ft]=Xt}else{Mt=0,Ft=0;for(var Kt=s.length;Mt<Kt;Mt+=4,Ft++)Xt=void 0,s[Mt+3]===0?Xt=255:Xt=306*s[Mt]+601*s[Mt+1]+117*s[Mt+2]+512>>10,ct[Ft]=255-Xt}return ct},i.prototype.getRow=function(s,_){if(s<0||s>=this.getHeight())throw new IllegalArgumentException("Requested row is outside the image: "+s);var _e=this.getWidth(),ct=s*_e;return _===null?_=this.buffer.slice(ct,ct+_e):(_.length<_e&&(_=new Uint8ClampedArray(_e)),_.set(this.buffer.slice(ct,ct+_e))),_},i.prototype.getMatrix=function(){return this.buffer},i.prototype.isCropSupported=function(){return!0},i.prototype.crop=function(s,_,_e,ct){return o.prototype.crop.call(this,s,_,_e,ct),this},i.prototype.isRotateSupported=function(){return!0},i.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},i.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},i.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var s=this.canvas.ownerDocument.createElement("canvas");s.width=this.canvas.width,s.height=this.canvas.height,this.tempCanvasElement=s}return this.tempCanvasElement},i.prototype.rotate=function(s){var _=this.getTempCanvasElement(),_e=_.getContext("2d"),ct=s*i.DEGREE_TO_RADIANS,Mt=this.canvas.width,Ft=this.canvas.height,Ut=Math.ceil(Math.abs(Math.cos(ct))*Mt+Math.abs(Math.sin(ct))*Ft),Xt=Math.ceil(Math.abs(Math.sin(ct))*Mt+Math.abs(Math.cos(ct))*Ft);return _.width=Ut,_.height=Xt,_e.translate(Ut/2,Xt/2),_e.rotate(ct),_e.drawImage(this.canvas,Mt/-2,Ft/-2),this.buffer=i.makeBufferFromCanvasImageData(_),this},i.prototype.invert=function(){return new InvertedLuminanceSource(this)},i.DEGREE_TO_RADIANS=Math.PI/180,i.FRAME_INDEX=!0,i}(LuminanceSource),VideoInputDevice=function(){function o(i,s,_){this.deviceId=i,this.label=s,this.kind="videoinput",this.groupId=_||void 0}return o.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},o}(),__awaiter$1=function(o,i,s,_){return new(s||(s=Promise))(function(_e,ct){function Mt(Xt){try{Ut(_.next(Xt))}catch(Kt){ct(Kt)}}function Ft(Xt){try{Ut(_.throw(Xt))}catch(Kt){ct(Kt)}}function Ut(Xt){var Kt;Xt.done?_e(Xt.value):(Kt=Xt.value,Kt instanceof s?Kt:new s(function(nr){nr(Kt)})).then(Mt,Ft)}Ut((_=_.apply(o,[])).next())})},__generator=function(o,i){var s,_,_e,ct,Mt={label:0,sent:function(){if(1&_e[0])throw _e[1];return _e[1]},trys:[],ops:[]};return ct={next:Ft(0),throw:Ft(1),return:Ft(2)},typeof Symbol=="function"&&(ct[Symbol.iterator]=function(){return this}),ct;function Ft(Ut){return function(Xt){return function(Kt){if(s)throw new TypeError("Generator is already executing.");for(;Mt;)try{if(s=1,_&&(_e=2&Kt[0]?_.return:Kt[0]?_.throw||((_e=_.return)&&_e.call(_),0):_.next)&&!(_e=_e.call(_,Kt[1])).done)return _e;switch(_=0,_e&&(Kt=[2&Kt[0],_e.value]),Kt[0]){case 0:case 1:_e=Kt;break;case 4:return Mt.label++,{value:Kt[1],done:!1};case 5:Mt.label++,_=Kt[1],Kt=[0];continue;case 7:Kt=Mt.ops.pop(),Mt.trys.pop();continue;default:if(_e=Mt.trys,!((_e=_e.length>0&&_e[_e.length-1])||Kt[0]!==6&&Kt[0]!==2)){Mt=0;continue}if(Kt[0]===3&&(!_e||Kt[1]>_e[0]&&Kt[1]<_e[3])){Mt.label=Kt[1];break}if(Kt[0]===6&&Mt.label<_e[1]){Mt.label=_e[1],_e=Kt;break}if(_e&&Mt.label<_e[2]){Mt.label=_e[2],Mt.ops.push(Kt);break}_e[2]&&Mt.ops.pop(),Mt.trys.pop();continue}Kt=i.call(o,Mt)}catch(nr){Kt=[6,nr],_=0}finally{s=_e=0}if(5&Kt[0])throw Kt[1];return{value:Kt[0]?Kt[1]:void 0,done:!0}}([Ut,Xt])}}},__values$H=function(o){var i=typeof Symbol=="function"&&Symbol.iterator,s=i&&o[i],_=0;if(s)return s.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&_>=o.length&&(o=void 0),{value:o&&o[_++],done:!o}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},BrowserCodeReader=function(){function o(i,s,_){s===void 0&&(s=500),this.reader=i,this.timeBetweenScansMillis=s,this._hints=_,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(o.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"canEnumerateDevices",{get:function(){return!(!this.isMediaDevicesSuported||!navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(i){this._timeBetweenDecodingAttempts=i<0?0:i},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"hints",{get:function(){return this._hints},set:function(i){this._hints=i||null},enumerable:!1,configurable:!0}),o.prototype.listVideoInputDevices=function(){return __awaiter$1(this,void 0,void 0,function(){var i,s,_,_e,ct,Mt,Ft,Ut,Xt,Kt,nr,rr;return __generator(this,function(or){switch(or.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:i=or.sent(),s=[];try{for(_=__values$H(i),_e=_.next();!_e.done;_e=_.next())ct=_e.value,(Mt=ct.kind==="video"?"videoinput":ct.kind)==="videoinput"&&(Ft=ct.deviceId||ct.id,Ut=ct.label||"Video device "+(s.length+1),Xt=ct.groupId,Kt={deviceId:Ft,label:Ut,kind:Mt,groupId:Xt},s.push(Kt))}catch(hr){nr={error:hr}}finally{try{_e&&!_e.done&&(rr=_.return)&&rr.call(_)}finally{if(nr)throw nr.error}}return[2,s]}})})},o.prototype.getVideoInputDevices=function(){return __awaiter$1(this,void 0,void 0,function(){return __generator(this,function(i){switch(i.label){case 0:return[4,this.listVideoInputDevices()];case 1:return[2,i.sent().map(function(s){return new VideoInputDevice(s.deviceId,s.label)})]}})})},o.prototype.findDeviceById=function(i){return __awaiter$1(this,void 0,void 0,function(){var s;return __generator(this,function(_){switch(_.label){case 0:return[4,this.listVideoInputDevices()];case 1:return(s=_.sent())?[2,s.find(function(_e){return _e.deviceId===i})]:[2,null]}})})},o.prototype.decodeFromInputVideoDevice=function(i,s){return __awaiter$1(this,void 0,void 0,function(){return __generator(this,function(_){switch(_.label){case 0:return[4,this.decodeOnceFromVideoDevice(i,s)];case 1:return[2,_.sent()]}})})},o.prototype.decodeOnceFromVideoDevice=function(i,s){return __awaiter$1(this,void 0,void 0,function(){var _;return __generator(this,function(_e){switch(_e.label){case 0:return this.reset(),_={video:i?{deviceId:{exact:i}}:{facingMode:"environment"}},[4,this.decodeOnceFromConstraints(_,s)];case 1:return[2,_e.sent()]}})})},o.prototype.decodeOnceFromConstraints=function(i,s){return __awaiter$1(this,void 0,void 0,function(){var _;return __generator(this,function(_e){switch(_e.label){case 0:return[4,navigator.mediaDevices.getUserMedia(i)];case 1:return _=_e.sent(),[4,this.decodeOnceFromStream(_,s)];case 2:return[2,_e.sent()]}})})},o.prototype.decodeOnceFromStream=function(i,s){return __awaiter$1(this,void 0,void 0,function(){var _;return __generator(this,function(_e){switch(_e.label){case 0:return this.reset(),[4,this.attachStreamToVideo(i,s)];case 1:return _=_e.sent(),[4,this.decodeOnce(_)];case 2:return[2,_e.sent()]}})})},o.prototype.decodeFromInputVideoDeviceContinuously=function(i,s,_){return __awaiter$1(this,void 0,void 0,function(){return __generator(this,function(_e){switch(_e.label){case 0:return[4,this.decodeFromVideoDevice(i,s,_)];case 1:return[2,_e.sent()]}})})},o.prototype.decodeFromVideoDevice=function(i,s,_){return __awaiter$1(this,void 0,void 0,function(){var _e;return __generator(this,function(ct){switch(ct.label){case 0:return _e={video:i?{deviceId:{exact:i}}:{facingMode:"environment"}},[4,this.decodeFromConstraints(_e,s,_)];case 1:return[2,ct.sent()]}})})},o.prototype.decodeFromConstraints=function(i,s,_){return __awaiter$1(this,void 0,void 0,function(){var _e;return __generator(this,function(ct){switch(ct.label){case 0:return[4,navigator.mediaDevices.getUserMedia(i)];case 1:return _e=ct.sent(),[4,this.decodeFromStream(_e,s,_)];case 2:return[2,ct.sent()]}})})},o.prototype.decodeFromStream=function(i,s,_){return __awaiter$1(this,void 0,void 0,function(){var _e;return __generator(this,function(ct){switch(ct.label){case 0:return this.reset(),[4,this.attachStreamToVideo(i,s)];case 1:return _e=ct.sent(),[4,this.decodeContinuously(_e,_)];case 2:return[2,ct.sent()]}})})},o.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},o.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},o.prototype.attachStreamToVideo=function(i,s){return __awaiter$1(this,void 0,void 0,function(){var _;return __generator(this,function(_e){switch(_e.label){case 0:return _=this.prepareVideoElement(s),this.addVideoSource(_,i),this.videoElement=_,this.stream=i,[4,this.playVideoOnLoadAsync(_)];case 1:return _e.sent(),[2,_]}})})},o.prototype.playVideoOnLoadAsync=function(i){var s=this;return new Promise(function(_,_e){return s.playVideoOnLoad(i,function(){return _()})})},o.prototype.playVideoOnLoad=function(i,s){var _=this;this.videoEndedListener=function(){return _.stopStreams()},this.videoCanPlayListener=function(){return _.tryPlayVideo(i)},i.addEventListener("ended",this.videoEndedListener),i.addEventListener("canplay",this.videoCanPlayListener),i.addEventListener("playing",s),this.tryPlayVideo(i)},o.prototype.isVideoPlaying=function(i){return i.currentTime>0&&!i.paused&&!i.ended&&i.readyState>2},o.prototype.tryPlayVideo=function(i){return __awaiter$1(this,void 0,void 0,function(){return __generator(this,function(s){switch(s.label){case 0:if(this.isVideoPlaying(i))return console.warn("Trying to play video that is already playing."),[2];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,i.play()];case 2:return s.sent(),[3,4];case 3:return s.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},o.prototype.getMediaElement=function(i,s){var _=document.getElementById(i);if(!_)throw new ArgumentException("element with id '"+i+"' not found");if(_.nodeName.toLowerCase()!==s.toLowerCase())throw new ArgumentException("element with id '"+i+"' must be an "+s+" element");return _},o.prototype.decodeFromImage=function(i,s){if(!i&&!s)throw new ArgumentException("either imageElement with a src set or an url must be provided");return s&&!i?this.decodeFromImageUrl(s):this.decodeFromImageElement(i)},o.prototype.decodeFromVideo=function(i,s){if(!i&&!s)throw new ArgumentException("Either an element with a src set or an URL must be provided");return s&&!i?this.decodeFromVideoUrl(s):this.decodeFromVideoElement(i)},o.prototype.decodeFromVideoContinuously=function(i,s,_){if(i===void 0&&s===void 0)throw new ArgumentException("Either an element with a src set or an URL must be provided");return s&&!i?this.decodeFromVideoUrlContinuously(s,_):this.decodeFromVideoElementContinuously(i,_)},o.prototype.decodeFromImageElement=function(i){if(!i)throw new ArgumentException("An image element must be provided.");this.reset();var s=this.prepareImageElement(i);return this.imageElement=s,this.isImageLoaded(s)?this.decodeOnce(s,!1,!0):this._decodeOnLoadImage(s)},o.prototype.decodeFromVideoElement=function(i){var s=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideo(s)},o.prototype.decodeFromVideoElementContinuously=function(i,s){var _=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideoContinuously(_,s)},o.prototype._decodeFromVideoElementSetup=function(i){if(!i)throw new ArgumentException("A video element must be provided.");this.reset();var s=this.prepareVideoElement(i);return this.videoElement=s,s},o.prototype.decodeFromImageUrl=function(i){if(!i)throw new ArgumentException("An URL must be provided.");this.reset();var s=this.prepareImageElement();this.imageElement=s;var _=this._decodeOnLoadImage(s);return s.src=i,_},o.prototype.decodeFromVideoUrl=function(i){if(!i)throw new ArgumentException("An URL must be provided.");this.reset();var s=this.prepareVideoElement(),_=this.decodeFromVideoElement(s);return s.src=i,_},o.prototype.decodeFromVideoUrlContinuously=function(i,s){if(!i)throw new ArgumentException("An URL must be provided.");this.reset();var _=this.prepareVideoElement(),_e=this.decodeFromVideoElementContinuously(_,s);return _.src=i,_e},o.prototype._decodeOnLoadImage=function(i){var s=this;return new Promise(function(_,_e){s.imageLoadedListener=function(){return s.decodeOnce(i,!1,!0).then(_,_e)},i.addEventListener("load",s.imageLoadedListener)})},o.prototype._decodeOnLoadVideo=function(i){return __awaiter$1(this,void 0,void 0,function(){return __generator(this,function(s){switch(s.label){case 0:return[4,this.playVideoOnLoadAsync(i)];case 1:return s.sent(),[4,this.decodeOnce(i)];case 2:return[2,s.sent()]}})})},o.prototype._decodeOnLoadVideoContinuously=function(i,s){return __awaiter$1(this,void 0,void 0,function(){return __generator(this,function(_){switch(_.label){case 0:return[4,this.playVideoOnLoadAsync(i)];case 1:return _.sent(),this.decodeContinuously(i,s),[2]}})})},o.prototype.isImageLoaded=function(i){return!!i.complete&&i.naturalWidth!==0},o.prototype.prepareImageElement=function(i){var s;return i===void 0&&((s=document.createElement("img")).width=200,s.height=200),typeof i=="string"&&(s=this.getMediaElement(i,"img")),i instanceof HTMLImageElement&&(s=i),s},o.prototype.prepareVideoElement=function(i){var s;return i||typeof document>"u"||((s=document.createElement("video")).width=200,s.height=200),typeof i=="string"&&(s=this.getMediaElement(i,"video")),i instanceof HTMLVideoElement&&(s=i),s.setAttribute("autoplay","true"),s.setAttribute("muted","true"),s.setAttribute("playsinline","true"),s},o.prototype.decodeOnce=function(i,s,_){var _e=this;s===void 0&&(s=!0),_===void 0&&(_=!0),this._stopAsyncDecode=!1;var ct=function(Mt,Ft){if(_e._stopAsyncDecode)return Ft(new NotFoundException("Video stream has ended before any code could be detected.")),void(_e._stopAsyncDecode=void 0);try{Mt(_e.decode(i))}catch(Ut){if(s&&Ut instanceof NotFoundException||(Ut instanceof ChecksumException||Ut instanceof FormatException)&&_)return setTimeout(ct,_e._timeBetweenDecodingAttempts,Mt,Ft);Ft(Ut)}};return new Promise(function(Mt,Ft){return ct(Mt,Ft)})},o.prototype.decodeContinuously=function(i,s){var _=this;this._stopContinuousDecode=!1;var _e=function(){if(_._stopContinuousDecode)_._stopContinuousDecode=void 0;else try{var ct=_.decode(i);s(ct,null),setTimeout(_e,_.timeBetweenScansMillis)}catch(Mt){s(null,Mt),(Mt instanceof ChecksumException||Mt instanceof FormatException||Mt instanceof NotFoundException)&&setTimeout(_e,_._timeBetweenDecodingAttempts)}};_e()},o.prototype.decode=function(i){var s=this.createBinaryBitmap(i);return this.decodeBitmap(s)},o.prototype.createBinaryBitmap=function(i){this.getCaptureCanvasContext(i),i instanceof HTMLVideoElement?this.drawFrameOnCanvas(i):this.drawImageOnCanvas(i);var s=this.getCaptureCanvas(i),_=new HTMLCanvasElementLuminanceSource(s),_e=new HybridBinarizer(_);return new BinaryBitmap(_e)},o.prototype.getCaptureCanvasContext=function(i){if(!this.captureCanvasContext){var s=this.getCaptureCanvas(i),_=void 0;try{_=s.getContext("2d",{willReadFrequently:!0})}catch{_=s.getContext("2d")}this.captureCanvasContext=_}return this.captureCanvasContext},o.prototype.getCaptureCanvas=function(i){if(!this.captureCanvas){var s=this.createCaptureCanvas(i);this.captureCanvas=s}return this.captureCanvas},o.prototype.drawFrameOnCanvas=function(i,s,_){s===void 0&&(s={sx:0,sy:0,sWidth:i.videoWidth,sHeight:i.videoHeight,dx:0,dy:0,dWidth:i.videoWidth,dHeight:i.videoHeight}),_===void 0&&(_=this.captureCanvasContext),_.drawImage(i,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)},o.prototype.drawImageOnCanvas=function(i,s,_){s===void 0&&(s={sx:0,sy:0,sWidth:i.naturalWidth,sHeight:i.naturalHeight,dx:0,dy:0,dWidth:i.naturalWidth,dHeight:i.naturalHeight}),_===void 0&&(_=this.captureCanvasContext),_.drawImage(i,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)},o.prototype.decodeBitmap=function(i){return this.reader.decode(i,this._hints)},o.prototype.createCaptureCanvas=function(i){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var s,_,_e=document.createElement("canvas");return i!==void 0&&(i instanceof HTMLVideoElement?(s=i.videoWidth,_=i.videoHeight):i instanceof HTMLImageElement&&(s=i.naturalWidth||i.width,_=i.naturalHeight||i.height)),_e.style.width=s+"px",_e.style.height=_+"px",_e.width=s,_e.height=_,_e},o.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(i){return i.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},o.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},o.prototype._destroyVideoElement=function(){this.videoElement&&(this.videoEndedListener!==void 0&&this.videoElement.removeEventListener("ended",this.videoEndedListener),this.videoPlayingEventListener!==void 0&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),this.videoCanPlayListener!==void 0&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},o.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},o.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},o.prototype.addVideoSource=function(i,s){try{i.srcObject=s}catch{i.src=URL.createObjectURL(s)}},o.prototype.cleanVideoSource=function(i){try{i.srcObject=null}catch{i.src=""}this.videoElement.removeAttribute("src")},o}(),Result=function(){function o(i,s,_,_e,ct,Mt){_===void 0&&(_=s==null?0:8*s.length),Mt===void 0&&(Mt=System.currentTimeMillis()),this.text=i,this.rawBytes=s,this.numBits=_,this.resultPoints=_e,this.format=ct,this.timestamp=Mt,this.text=i,this.rawBytes=s,this.numBits=_??(s==null?0:8*s.length),this.resultPoints=_e,this.format=ct,this.resultMetadata=null,this.timestamp=Mt??System.currentTimeMillis()}return o.prototype.getText=function(){return this.text},o.prototype.getRawBytes=function(){return this.rawBytes},o.prototype.getNumBits=function(){return this.numBits},o.prototype.getResultPoints=function(){return this.resultPoints},o.prototype.getBarcodeFormat=function(){return this.format},o.prototype.getResultMetadata=function(){return this.resultMetadata},o.prototype.putMetadata=function(i,s){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(i,s)},o.prototype.putAllMetadata=function(i){i!==null&&(this.resultMetadata===null?this.resultMetadata=i:this.resultMetadata=new Map(i))},o.prototype.addResultPoints=function(i){var s=this.resultPoints;if(s===null)this.resultPoints=i;else if(i!==null&&i.length>0){var _=new Array(s.length+i.length);System.arraycopy(s,0,_,0,s.length),System.arraycopy(i,0,_,s.length,i.length),this.resultPoints=_}},o.prototype.getTimestamp=function(){return this.timestamp},o.prototype.toString=function(){return this.text},o}(),BarcodeFormat;(function(o){o[o.AZTEC=0]="AZTEC",o[o.CODABAR=1]="CODABAR",o[o.CODE_39=2]="CODE_39",o[o.CODE_93=3]="CODE_93",o[o.CODE_128=4]="CODE_128",o[o.DATA_MATRIX=5]="DATA_MATRIX",o[o.EAN_8=6]="EAN_8",o[o.EAN_13=7]="EAN_13",o[o.ITF=8]="ITF",o[o.MAXICODE=9]="MAXICODE",o[o.PDF_417=10]="PDF_417",o[o.QR_CODE=11]="QR_CODE",o[o.RSS_14=12]="RSS_14",o[o.RSS_EXPANDED=13]="RSS_EXPANDED",o[o.UPC_A=14]="UPC_A",o[o.UPC_E=15]="UPC_E",o[o.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(BarcodeFormat||(BarcodeFormat={}));var BarcodeFormat$1=BarcodeFormat,ResultMetadataType;(function(o){o[o.OTHER=0]="OTHER",o[o.ORIENTATION=1]="ORIENTATION",o[o.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",o[o.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",o[o.ISSUE_NUMBER=4]="ISSUE_NUMBER",o[o.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",o[o.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",o[o.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",o[o.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",o[o.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",o[o.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(ResultMetadataType||(ResultMetadataType={}));var ResultMetadataType$1=ResultMetadataType,DecoderResult=function(){function o(i,s,_,_e,ct,Mt){ct===void 0&&(ct=-1),Mt===void 0&&(Mt=-1),this.rawBytes=i,this.text=s,this.byteSegments=_,this.ecLevel=_e,this.structuredAppendSequenceNumber=ct,this.structuredAppendParity=Mt,this.numBits=i==null?0:8*i.length}return o.prototype.getRawBytes=function(){return this.rawBytes},o.prototype.getNumBits=function(){return this.numBits},o.prototype.setNumBits=function(i){this.numBits=i},o.prototype.getText=function(){return this.text},o.prototype.getByteSegments=function(){return this.byteSegments},o.prototype.getECLevel=function(){return this.ecLevel},o.prototype.getErrorsCorrected=function(){return this.errorsCorrected},o.prototype.setErrorsCorrected=function(i){this.errorsCorrected=i},o.prototype.getErasures=function(){return this.erasures},o.prototype.setErasures=function(i){this.erasures=i},o.prototype.getOther=function(){return this.other},o.prototype.setOther=function(i){this.other=i},o.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},o.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},o.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},o}(),AbstractGenericGF=function(){function o(){}return o.prototype.exp=function(i){return this.expTable[i]},o.prototype.log=function(i){if(i===0)throw new IllegalArgumentException;return this.logTable[i]},o.addOrSubtract=function(i,s){return i^s},o}(),GenericGFPoly=function(){function o(i,s){if(s.length===0)throw new IllegalArgumentException;this.field=i;var _=s.length;if(_>1&&s[0]===0){for(var _e=1;_e<_&&s[_e]===0;)_e++;_e===_?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(_-_e),System.arraycopy(s,_e,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}return o.prototype.getCoefficients=function(){return this.coefficients},o.prototype.getDegree=function(){return this.coefficients.length-1},o.prototype.isZero=function(){return this.coefficients[0]===0},o.prototype.getCoefficient=function(i){return this.coefficients[this.coefficients.length-1-i]},o.prototype.evaluateAt=function(i){if(i===0)return this.getCoefficient(0);var s,_=this.coefficients;if(i===1){s=0;for(var _e=0,ct=_.length;_e!==ct;_e++){var Mt=_[_e];s=AbstractGenericGF.addOrSubtract(s,Mt)}return s}s=_[0];var Ft=_.length,Ut=this.field;for(_e=1;_e<Ft;_e++)s=AbstractGenericGF.addOrSubtract(Ut.multiply(i,s),_[_e]);return s},o.prototype.addOrSubtract=function(i){if(!this.field.equals(i.field))throw new IllegalArgumentException("GenericGFPolys do not have same GenericGF field");if(this.isZero())return i;if(i.isZero())return this;var s=this.coefficients,_=i.coefficients;if(s.length>_.length){var _e=s;s=_,_=_e}var ct=new Int32Array(_.length),Mt=_.length-s.length;System.arraycopy(_,0,ct,0,Mt);for(var Ft=Mt;Ft<_.length;Ft++)ct[Ft]=AbstractGenericGF.addOrSubtract(s[Ft-Mt],_[Ft]);return new o(this.field,ct)},o.prototype.multiply=function(i){if(!this.field.equals(i.field))throw new IllegalArgumentException("GenericGFPolys do not have same GenericGF field");if(this.isZero()||i.isZero())return this.field.getZero();for(var s=this.coefficients,_=s.length,_e=i.coefficients,ct=_e.length,Mt=new Int32Array(_+ct-1),Ft=this.field,Ut=0;Ut<_;Ut++)for(var Xt=s[Ut],Kt=0;Kt<ct;Kt++)Mt[Ut+Kt]=AbstractGenericGF.addOrSubtract(Mt[Ut+Kt],Ft.multiply(Xt,_e[Kt]));return new o(Ft,Mt)},o.prototype.multiplyScalar=function(i){if(i===0)return this.field.getZero();if(i===1)return this;for(var s=this.coefficients.length,_=this.field,_e=new Int32Array(s),ct=this.coefficients,Mt=0;Mt<s;Mt++)_e[Mt]=_.multiply(ct[Mt],i);return new o(_,_e)},o.prototype.multiplyByMonomial=function(i,s){if(i<0)throw new IllegalArgumentException;if(s===0)return this.field.getZero();for(var _=this.coefficients,_e=_.length,ct=new Int32Array(_e+i),Mt=this.field,Ft=0;Ft<_e;Ft++)ct[Ft]=Mt.multiply(_[Ft],s);return new o(Mt,ct)},o.prototype.divide=function(i){if(!this.field.equals(i.field))throw new IllegalArgumentException("GenericGFPolys do not have same GenericGF field");if(i.isZero())throw new IllegalArgumentException("Divide by 0");for(var s=this.field,_=s.getZero(),_e=this,ct=i.getCoefficient(i.getDegree()),Mt=s.inverse(ct);_e.getDegree()>=i.getDegree()&&!_e.isZero();){var Ft=_e.getDegree()-i.getDegree(),Ut=s.multiply(_e.getCoefficient(_e.getDegree()),Mt),Xt=i.multiplyByMonomial(Ft,Ut),Kt=s.buildMonomial(Ft,Ut);_=_.addOrSubtract(Kt),_e=_e.addOrSubtract(Xt)}return[_,_e]},o.prototype.toString=function(){for(var i="",s=this.getDegree();s>=0;s--){var _=this.getCoefficient(s);if(_!==0){if(_<0?(i+=" - ",_=-_):i.length>0&&(i+=" + "),s===0||_!==1){var _e=this.field.log(_);_e===0?i+="1":_e===1?i+="a":(i+="a^",i+=_e)}s!==0&&(s===1?i+="x":(i+="x^",i+=s))}}return i},o}(),__extends$X=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}(),ArithmeticException=function(o){function i(){return o!==null&&o.apply(this,arguments)||this}return __extends$X(i,o),i.kind="ArithmeticException",i}(Exception),__extends$W=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}(),GenericGF=function(o){function i(s,_,_e){var ct=o.call(this)||this;ct.primitive=s,ct.size=_,ct.generatorBase=_e;for(var Mt=new Int32Array(_),Ft=1,Ut=0;Ut<_;Ut++)Mt[Ut]=Ft,(Ft*=2)>=_&&(Ft^=s,Ft&=_-1);ct.expTable=Mt;var Xt=new Int32Array(_);for(Ut=0;Ut<_-1;Ut++)Xt[Mt[Ut]]=Ut;return ct.logTable=Xt,ct.zero=new GenericGFPoly(ct,Int32Array.from([0])),ct.one=new GenericGFPoly(ct,Int32Array.from([1])),ct}return __extends$W(i,o),i.prototype.getZero=function(){return this.zero},i.prototype.getOne=function(){return this.one},i.prototype.buildMonomial=function(s,_){if(s<0)throw new IllegalArgumentException;if(_===0)return this.zero;var _e=new Int32Array(s+1);return _e[0]=_,new GenericGFPoly(this,_e)},i.prototype.inverse=function(s){if(s===0)throw new ArithmeticException;return this.expTable[this.size-this.logTable[s]-1]},i.prototype.multiply=function(s,_){return s===0||_===0?0:this.expTable[(this.logTable[s]+this.logTable[_])%(this.size-1)]},i.prototype.getSize=function(){return this.size},i.prototype.getGeneratorBase=function(){return this.generatorBase},i.prototype.toString=function(){return"GF(0x"+Integer.toHexString(this.primitive)+","+this.size+")"},i.prototype.equals=function(s){return s===this},i.AZTEC_DATA_12=new i(4201,4096,1),i.AZTEC_DATA_10=new i(1033,1024,1),i.AZTEC_DATA_6=new i(67,64,1),i.AZTEC_PARAM=new i(19,16,1),i.QR_CODE_FIELD_256=new i(285,256,0),i.DATA_MATRIX_FIELD_256=new i(301,256,1),i.AZTEC_DATA_8=i.DATA_MATRIX_FIELD_256,i.MAXICODE_FIELD_64=i.AZTEC_DATA_6,i}(AbstractGenericGF),__extends$V=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}(),ReedSolomonException=function(o){function i(){return o!==null&&o.apply(this,arguments)||this}return __extends$V(i,o),i.kind="ReedSolomonException",i}(Exception),__extends$U=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}(),IllegalStateException=function(o){function i(){return o!==null&&o.apply(this,arguments)||this}return __extends$U(i,o),i.kind="IllegalStateException",i}(Exception),ReedSolomonDecoder=function(){function o(i){this.field=i}return o.prototype.decode=function(i,s){for(var _=this.field,_e=new GenericGFPoly(_,i),ct=new Int32Array(s),Mt=!0,Ft=0;Ft<s;Ft++){var Ut=_e.evaluateAt(_.exp(Ft+_.getGeneratorBase()));ct[ct.length-1-Ft]=Ut,Ut!==0&&(Mt=!1)}if(!Mt){var Xt=new GenericGFPoly(_,ct),Kt=this.runEuclideanAlgorithm(_.buildMonomial(s,1),Xt,s),nr=Kt[0],rr=Kt[1],or=this.findErrorLocations(nr),hr=this.findErrorMagnitudes(rr,or);for(Ft=0;Ft<or.length;Ft++){var fr=i.length-1-_.log(or[Ft]);if(fr<0)throw new ReedSolomonException("Bad error location");i[fr]=GenericGF.addOrSubtract(i[fr],hr[Ft])}}},o.prototype.runEuclideanAlgorithm=function(i,s,_){if(i.getDegree()<s.getDegree()){var _e=i;i=s,s=_e}for(var ct=this.field,Mt=i,Ft=s,Ut=ct.getZero(),Xt=ct.getOne();Ft.getDegree()>=(_/2|0);){var Kt=Mt,nr=Ut;if(Ut=Xt,(Mt=Ft).isZero())throw new ReedSolomonException("r_{i-1} was zero");Ft=Kt;for(var rr=ct.getZero(),or=Mt.getCoefficient(Mt.getDegree()),hr=ct.inverse(or);Ft.getDegree()>=Mt.getDegree()&&!Ft.isZero();){var fr=Ft.getDegree()-Mt.getDegree(),yr=ct.multiply(Ft.getCoefficient(Ft.getDegree()),hr);rr=rr.addOrSubtract(ct.buildMonomial(fr,yr)),Ft=Ft.addOrSubtract(Mt.multiplyByMonomial(fr,yr))}if(Xt=rr.multiply(Ut).addOrSubtract(nr),Ft.getDegree()>=Mt.getDegree())throw new IllegalStateException("Division algorithm failed to reduce polynomial?")}var Lr=Xt.getCoefficient(0);if(Lr===0)throw new ReedSolomonException("sigmaTilde(0) was zero");var Br=ct.inverse(Lr);return[Xt.multiplyScalar(Br),Ft.multiplyScalar(Br)]},o.prototype.findErrorLocations=function(i){var s=i.getDegree();if(s===1)return Int32Array.from([i.getCoefficient(1)]);for(var _=new Int32Array(s),_e=0,ct=this.field,Mt=1;Mt<ct.getSize()&&_e<s;Mt++)i.evaluateAt(Mt)===0&&(_[_e]=ct.inverse(Mt),_e++);if(_e!==s)throw new ReedSolomonException("Error locator degree does not match number of roots");return _},o.prototype.findErrorMagnitudes=function(i,s){for(var _=s.length,_e=new Int32Array(_),ct=this.field,Mt=0;Mt<_;Mt++){for(var Ft=ct.inverse(s[Mt]),Ut=1,Xt=0;Xt<_;Xt++)if(Mt!==Xt){var Kt=ct.multiply(s[Xt],Ft),nr=1&Kt?-2&Kt:1|Kt;Ut=ct.multiply(Ut,nr)}_e[Mt]=ct.multiply(i.evaluateAt(Ft),ct.inverse(Ut)),ct.getGeneratorBase()!==0&&(_e[Mt]=ct.multiply(_e[Mt],Ft))}return _e},o}(),Table;(function(o){o[o.UPPER=0]="UPPER",o[o.LOWER=1]="LOWER",o[o.MIXED=2]="MIXED",o[o.DIGIT=3]="DIGIT",o[o.PUNCT=4]="PUNCT",o[o.BINARY=5]="BINARY"})(Table||(Table={}));var Decoder$2=function(){function o(){}return o.prototype.decode=function(i){this.ddata=i;var s=i.getBits(),_=this.extractBits(s),_e=this.correctBits(_),ct=o.convertBoolArrayToByteArray(_e),Mt=o.getEncodedData(_e),Ft=new DecoderResult(ct,Mt,null,null);return Ft.setNumBits(_e.length),Ft},o.highLevelDecode=function(i){return this.getEncodedData(i)},o.getEncodedData=function(i){for(var s=i.length,_=Table.UPPER,_e=Table.UPPER,ct="",Mt=0;Mt<s;)if(_e===Table.BINARY){if(s-Mt<5)break;var Ft=o.readCode(i,Mt,5);if(Mt+=5,Ft===0){if(s-Mt<11)break;Ft=o.readCode(i,Mt,11)+31,Mt+=11}for(var Ut=0;Ut<Ft;Ut++){if(s-Mt<8){Mt=s;break}var Xt=o.readCode(i,Mt,8);ct+=StringUtils.castAsNonUtf8Char(Xt),Mt+=8}_e=_}else{var Kt=_e===Table.DIGIT?4:5;if(s-Mt<Kt)break;Xt=o.readCode(i,Mt,Kt),Mt+=Kt;var nr=o.getCharacter(_e,Xt);nr.startsWith("CTRL_")?(_=_e,_e=o.getTable(nr.charAt(5)),nr.charAt(6)==="L"&&(_=_e)):(ct+=nr,_e=_)}return ct},o.getTable=function(i){switch(i){case"L":return Table.LOWER;case"P":return Table.PUNCT;case"M":return Table.MIXED;case"D":return Table.DIGIT;case"B":return Table.BINARY;default:return Table.UPPER}},o.getCharacter=function(i,s){switch(i){case Table.UPPER:return o.UPPER_TABLE[s];case Table.LOWER:return o.LOWER_TABLE[s];case Table.MIXED:return o.MIXED_TABLE[s];case Table.PUNCT:return o.PUNCT_TABLE[s];case Table.DIGIT:return o.DIGIT_TABLE[s];default:throw new IllegalStateException("Bad table")}},o.prototype.correctBits=function(i){var s,_;this.ddata.getNbLayers()<=2?(_=6,s=GenericGF.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(_=8,s=GenericGF.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(_=10,s=GenericGF.AZTEC_DATA_10):(_=12,s=GenericGF.AZTEC_DATA_12);var _e=this.ddata.getNbDatablocks(),ct=i.length/_;if(ct<_e)throw new FormatException;for(var Mt=i.length%_,Ft=new Int32Array(ct),Ut=0;Ut<ct;Ut++,Mt+=_)Ft[Ut]=o.readCode(i,Mt,_);try{new ReedSolomonDecoder(s).decode(Ft,ct-_e)}catch(fr){throw new FormatException(fr)}var Xt=(1<<_)-1,Kt=0;for(Ut=0;Ut<_e;Ut++){if((or=Ft[Ut])===0||or===Xt)throw new FormatException;or!==1&&or!==Xt-1||Kt++}var nr=new Array(_e*_-Kt),rr=0;for(Ut=0;Ut<_e;Ut++){var or;if((or=Ft[Ut])===1||or===Xt-1)nr.fill(or>1,rr,rr+_-1),rr+=_-1;else for(var hr=_-1;hr>=0;--hr)nr[rr++]=!!(or&1<<hr)}return nr},o.prototype.extractBits=function(i){var s=this.ddata.isCompact(),_=this.ddata.getNbLayers(),_e=(s?11:14)+4*_,ct=new Int32Array(_e),Mt=new Array(this.totalBitsInLayer(_,s));if(s)for(var Ft=0;Ft<ct.length;Ft++)ct[Ft]=Ft;else{var Ut=_e+1+2*Integer.truncDivision(Integer.truncDivision(_e,2)-1,15),Xt=_e/2,Kt=Integer.truncDivision(Ut,2);for(Ft=0;Ft<Xt;Ft++){var nr=Ft+Integer.truncDivision(Ft,15);ct[Xt-Ft-1]=Kt-nr-1,ct[Xt+Ft]=Kt+nr+1}}Ft=0;for(var rr=0;Ft<_;Ft++){for(var or=4*(_-Ft)+(s?9:12),hr=2*Ft,fr=_e-1-hr,yr=0;yr<or;yr++)for(var Lr=2*yr,Br=0;Br<2;Br++)Mt[rr+Lr+Br]=i.get(ct[hr+Br],ct[hr+yr]),Mt[rr+2*or+Lr+Br]=i.get(ct[hr+yr],ct[fr-Br]),Mt[rr+4*or+Lr+Br]=i.get(ct[fr-Br],ct[fr-yr]),Mt[rr+6*or+Lr+Br]=i.get(ct[fr-yr],ct[hr+Br]);rr+=8*or}return Mt},o.readCode=function(i,s,_){for(var _e=0,ct=s;ct<s+_;ct++)_e<<=1,i[ct]&&(_e|=1);return _e},o.readByte=function(i,s){var _=i.length-s;return _>=8?o.readCode(i,s,8):o.readCode(i,s,_)<<8-_},o.convertBoolArrayToByteArray=function(i){for(var s=new Uint8Array((i.length+7)/8),_=0;_<s.length;_++)s[_]=o.readByte(i,8*_);return s},o.prototype.totalBitsInLayer=function(i,s){return((s?88:112)+16*i)*i},o.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],o.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],o.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],o.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],o.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],o}(),MathUtils=function(){function o(){}return o.round=function(i){return isNaN(i)?0:i<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:i>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:i+(i<0?-.5:.5)|0},o.distance=function(i,s,_,_e){var ct=i-_,Mt=s-_e;return Math.sqrt(ct*ct+Mt*Mt)},o.sum=function(i){for(var s=0,_=0,_e=i.length;_!==_e;_++)s+=i[_];return s},o}(),Float=function(){function o(){}return o.floatToIntBits=function(i){return i},o.MAX_VALUE=Number.MAX_SAFE_INTEGER,o}(),ResultPoint=function(){function o(i,s){this.x=i,this.y=s}return o.prototype.getX=function(){return this.x},o.prototype.getY=function(){return this.y},o.prototype.equals=function(i){if(i instanceof o){var s=i;return this.x===s.x&&this.y===s.y}return!1},o.prototype.hashCode=function(){return 31*Float.floatToIntBits(this.x)+Float.floatToIntBits(this.y)},o.prototype.toString=function(){return"("+this.x+","+this.y+")"},o.orderBestPatterns=function(i){var s,_,_e,ct=this.distance(i[0],i[1]),Mt=this.distance(i[1],i[2]),Ft=this.distance(i[0],i[2]);if(Mt>=ct&&Mt>=Ft?(_=i[0],s=i[1],_e=i[2]):Ft>=Mt&&Ft>=ct?(_=i[1],s=i[0],_e=i[2]):(_=i[2],s=i[0],_e=i[1]),this.crossProductZ(s,_,_e)<0){var Ut=s;s=_e,_e=Ut}i[0]=s,i[1]=_,i[2]=_e},o.distance=function(i,s){return MathUtils.distance(i.x,i.y,s.x,s.y)},o.crossProductZ=function(i,s,_){var _e=s.x,ct=s.y;return(_.x-_e)*(i.y-ct)-(_.y-ct)*(i.x-_e)},o}(),DetectorResult=function(){function o(i,s){this.bits=i,this.points=s}return o.prototype.getBits=function(){return this.bits},o.prototype.getPoints=function(){return this.points},o}(),__extends$T=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}(),AztecDetectorResult=function(o){function i(s,_,_e,ct,Mt){var Ft=o.call(this,s,_)||this;return Ft.compact=_e,Ft.nbDatablocks=ct,Ft.nbLayers=Mt,Ft}return __extends$T(i,o),i.prototype.getNbLayers=function(){return this.nbLayers},i.prototype.getNbDatablocks=function(){return this.nbDatablocks},i.prototype.isCompact=function(){return this.compact},i}(DetectorResult),WhiteRectangleDetector=function(){function o(i,s,_,_e){this.image=i,this.height=i.getHeight(),this.width=i.getWidth(),s==null&&(s=o.INIT_SIZE),_==null&&(_=i.getWidth()/2|0),_e==null&&(_e=i.getHeight()/2|0);var ct=s/2|0;if(this.leftInit=_-ct,this.rightInit=_+ct,this.upInit=_e-ct,this.downInit=_e+ct,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new NotFoundException}return o.prototype.detect=function(){for(var i=this.leftInit,s=this.rightInit,_=this.upInit,_e=this.downInit,ct=!1,Mt=!0,Ft=!1,Ut=!1,Xt=!1,Kt=!1,nr=!1,rr=this.width,or=this.height;Mt;){Mt=!1;for(var hr=!0;(hr||!Ut)&&s<rr;)(hr=this.containsBlackPoint(_,_e,s,!1))?(s++,Mt=!0,Ut=!0):Ut||s++;if(s>=rr){ct=!0;break}for(var fr=!0;(fr||!Xt)&&_e<or;)(fr=this.containsBlackPoint(i,s,_e,!0))?(_e++,Mt=!0,Xt=!0):Xt||_e++;if(_e>=or){ct=!0;break}for(var yr=!0;(yr||!Kt)&&i>=0;)(yr=this.containsBlackPoint(_,_e,i,!1))?(i--,Mt=!0,Kt=!0):Kt||i--;if(i<0){ct=!0;break}for(var Lr=!0;(Lr||!nr)&&_>=0;)(Lr=this.containsBlackPoint(i,s,_,!0))?(_--,Mt=!0,nr=!0):nr||_--;if(_<0){ct=!0;break}Mt&&(Ft=!0)}if(!ct&&Ft){for(var Br=s-i,Vr=null,Wr=1;Vr===null&&Wr<Br;Wr++)Vr=this.getBlackPointOnSegment(i,_e-Wr,i+Wr,_e);if(Vr==null)throw new NotFoundException;var ro=null;for(Wr=1;ro===null&&Wr<Br;Wr++)ro=this.getBlackPointOnSegment(i,_+Wr,i+Wr,_);if(ro==null)throw new NotFoundException;var no=null;for(Wr=1;no===null&&Wr<Br;Wr++)no=this.getBlackPointOnSegment(s,_+Wr,s-Wr,_);if(no==null)throw new NotFoundException;var so=null;for(Wr=1;so===null&&Wr<Br;Wr++)so=this.getBlackPointOnSegment(s,_e-Wr,s-Wr,_e);if(so==null)throw new NotFoundException;return this.centerEdges(so,Vr,no,ro)}throw new NotFoundException},o.prototype.getBlackPointOnSegment=function(i,s,_,_e){for(var ct=MathUtils.round(MathUtils.distance(i,s,_,_e)),Mt=(_-i)/ct,Ft=(_e-s)/ct,Ut=this.image,Xt=0;Xt<ct;Xt++){var Kt=MathUtils.round(i+Xt*Mt),nr=MathUtils.round(s+Xt*Ft);if(Ut.get(Kt,nr))return new ResultPoint(Kt,nr)}return null},o.prototype.centerEdges=function(i,s,_,_e){var ct=i.getX(),Mt=i.getY(),Ft=s.getX(),Ut=s.getY(),Xt=_.getX(),Kt=_.getY(),nr=_e.getX(),rr=_e.getY(),or=o.CORR;return ct<this.width/2?[new ResultPoint(nr-or,rr+or),new ResultPoint(Ft+or,Ut+or),new ResultPoint(Xt-or,Kt-or),new ResultPoint(ct+or,Mt-or)]:[new ResultPoint(nr+or,rr+or),new ResultPoint(Ft+or,Ut-or),new ResultPoint(Xt-or,Kt+or),new ResultPoint(ct-or,Mt-or)]},o.prototype.containsBlackPoint=function(i,s,_,_e){var ct=this.image;if(_e){for(var Mt=i;Mt<=s;Mt++)if(ct.get(Mt,_))return!0}else for(var Ft=i;Ft<=s;Ft++)if(ct.get(_,Ft))return!0;return!1},o.INIT_SIZE=10,o.CORR=1,o}(),GridSampler=function(){function o(){}return o.checkAndNudgePoints=function(i,s){for(var _=i.getWidth(),_e=i.getHeight(),ct=!0,Mt=0;Mt<s.length&&ct;Mt+=2){var Ft=Math.floor(s[Mt]),Ut=Math.floor(s[Mt+1]);if(Ft<-1||Ft>_||Ut<-1||Ut>_e)throw new NotFoundException;ct=!1,Ft===-1?(s[Mt]=0,ct=!0):Ft===_&&(s[Mt]=_-1,ct=!0),Ut===-1?(s[Mt+1]=0,ct=!0):Ut===_e&&(s[Mt+1]=_e-1,ct=!0)}for(ct=!0,Mt=s.length-2;Mt>=0&&ct;Mt-=2){if(Ft=Math.floor(s[Mt]),Ut=Math.floor(s[Mt+1]),Ft<-1||Ft>_||Ut<-1||Ut>_e)throw new NotFoundException;ct=!1,Ft===-1?(s[Mt]=0,ct=!0):Ft===_&&(s[Mt]=_-1,ct=!0),Ut===-1?(s[Mt+1]=0,ct=!0):Ut===_e&&(s[Mt+1]=_e-1,ct=!0)}},o}(),PerspectiveTransform=function(){function o(i,s,_,_e,ct,Mt,Ft,Ut,Xt){this.a11=i,this.a21=s,this.a31=_,this.a12=_e,this.a22=ct,this.a32=Mt,this.a13=Ft,this.a23=Ut,this.a33=Xt}return o.quadrilateralToQuadrilateral=function(i,s,_,_e,ct,Mt,Ft,Ut,Xt,Kt,nr,rr,or,hr,fr,yr){var Lr=o.quadrilateralToSquare(i,s,_,_e,ct,Mt,Ft,Ut);return o.squareToQuadrilateral(Xt,Kt,nr,rr,or,hr,fr,yr).times(Lr)},o.prototype.transformPoints=function(i){for(var s=i.length,_=this.a11,_e=this.a12,ct=this.a13,Mt=this.a21,Ft=this.a22,Ut=this.a23,Xt=this.a31,Kt=this.a32,nr=this.a33,rr=0;rr<s;rr+=2){var or=i[rr],hr=i[rr+1],fr=ct*or+Ut*hr+nr;i[rr]=(_*or+Mt*hr+Xt)/fr,i[rr+1]=(_e*or+Ft*hr+Kt)/fr}},o.prototype.transformPointsWithValues=function(i,s){for(var _=this.a11,_e=this.a12,ct=this.a13,Mt=this.a21,Ft=this.a22,Ut=this.a23,Xt=this.a31,Kt=this.a32,nr=this.a33,rr=i.length,or=0;or<rr;or++){var hr=i[or],fr=s[or],yr=ct*hr+Ut*fr+nr;i[or]=(_*hr+Mt*fr+Xt)/yr,s[or]=(_e*hr+Ft*fr+Kt)/yr}},o.squareToQuadrilateral=function(i,s,_,_e,ct,Mt,Ft,Ut){var Xt=i-_+ct-Ft,Kt=s-_e+Mt-Ut;if(Xt===0&&Kt===0)return new o(_-i,ct-_,i,_e-s,Mt-_e,s,0,0,1);var nr=_-ct,rr=Ft-ct,or=_e-Mt,hr=Ut-Mt,fr=nr*hr-rr*or,yr=(Xt*hr-rr*Kt)/fr,Lr=(nr*Kt-Xt*or)/fr;return new o(_-i+yr*_,Ft-i+Lr*Ft,i,_e-s+yr*_e,Ut-s+Lr*Ut,s,yr,Lr,1)},o.quadrilateralToSquare=function(i,s,_,_e,ct,Mt,Ft,Ut){return o.squareToQuadrilateral(i,s,_,_e,ct,Mt,Ft,Ut).buildAdjoint()},o.prototype.buildAdjoint=function(){return new o(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},o.prototype.times=function(i){return new o(this.a11*i.a11+this.a21*i.a12+this.a31*i.a13,this.a11*i.a21+this.a21*i.a22+this.a31*i.a23,this.a11*i.a31+this.a21*i.a32+this.a31*i.a33,this.a12*i.a11+this.a22*i.a12+this.a32*i.a13,this.a12*i.a21+this.a22*i.a22+this.a32*i.a23,this.a12*i.a31+this.a22*i.a32+this.a32*i.a33,this.a13*i.a11+this.a23*i.a12+this.a33*i.a13,this.a13*i.a21+this.a23*i.a22+this.a33*i.a23,this.a13*i.a31+this.a23*i.a32+this.a33*i.a33)},o}(),__extends$S=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}(),DefaultGridSampler=function(o){function i(){return o!==null&&o.apply(this,arguments)||this}return __extends$S(i,o),i.prototype.sampleGrid=function(s,_,_e,ct,Mt,Ft,Ut,Xt,Kt,nr,rr,or,hr,fr,yr,Lr,Br,Vr,Wr){var ro=PerspectiveTransform.quadrilateralToQuadrilateral(ct,Mt,Ft,Ut,Xt,Kt,nr,rr,or,hr,fr,yr,Lr,Br,Vr,Wr);return this.sampleGridWithTransform(s,_,_e,ro)},i.prototype.sampleGridWithTransform=function(s,_,_e,ct){if(_<=0||_e<=0)throw new NotFoundException;for(var Mt=new BitMatrix(_,_e),Ft=new Float32Array(2*_),Ut=0;Ut<_e;Ut++){for(var Xt=Ft.length,Kt=Ut+.5,nr=0;nr<Xt;nr+=2)Ft[nr]=nr/2+.5,Ft[nr+1]=Kt;ct.transformPoints(Ft),GridSampler.checkAndNudgePoints(s,Ft);try{for(nr=0;nr<Xt;nr+=2)s.get(Math.floor(Ft[nr]),Math.floor(Ft[nr+1]))&&Mt.set(nr/2,Ut)}catch{throw new NotFoundException}}return Mt},i}(GridSampler),GridSamplerInstance=function(){function o(){}return o.setGridSampler=function(i){o.gridSampler=i},o.getInstance=function(){return o.gridSampler},o.gridSampler=new DefaultGridSampler,o}(),Point=function(){function o(i,s){this.x=i,this.y=s}return o.prototype.toResultPoint=function(){return new ResultPoint(this.getX(),this.getY())},o.prototype.getX=function(){return this.x},o.prototype.getY=function(){return this.y},o}(),Detector$3=function(){function o(i){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=i}return o.prototype.detect=function(){return this.detectMirror(!1)},o.prototype.detectMirror=function(i){var s=this.getMatrixCenter(),_=this.getBullsEyeCorners(s);if(i){var _e=_[0];_[0]=_[2],_[2]=_e}this.extractParameters(_);var ct=this.sampleGrid(this.image,_[this.shift%4],_[(this.shift+1)%4],_[(this.shift+2)%4],_[(this.shift+3)%4]),Mt=this.getMatrixCornerPoints(_);return new AztecDetectorResult(ct,Mt,this.compact,this.nbDataBlocks,this.nbLayers)},o.prototype.extractParameters=function(i){if(!(this.isValidPoint(i[0])&&this.isValidPoint(i[1])&&this.isValidPoint(i[2])&&this.isValidPoint(i[3])))throw new NotFoundException;var s=2*this.nbCenterLayers,_=new Int32Array([this.sampleLine(i[0],i[1],s),this.sampleLine(i[1],i[2],s),this.sampleLine(i[2],i[3],s),this.sampleLine(i[3],i[0],s)]);this.shift=this.getRotation(_,s);for(var _e=0,ct=0;ct<4;ct++){var Mt=_[(this.shift+ct)%4];this.compact?(_e<<=7,_e+=Mt>>1&127):(_e<<=10,_e+=(Mt>>2&992)+(Mt>>1&31))}var Ft=this.getCorrectedParameterData(_e,this.compact);this.compact?(this.nbLayers=1+(Ft>>6),this.nbDataBlocks=1+(63&Ft)):(this.nbLayers=1+(Ft>>11),this.nbDataBlocks=1+(2047&Ft))},o.prototype.getRotation=function(i,s){var _=0;i.forEach(function(ct,Mt,Ft){_=(_<<3)+((ct>>s-2<<1)+(1&ct))}),_=((1&_)<<11)+(_>>1);for(var _e=0;_e<4;_e++)if(Integer.bitCount(_^this.EXPECTED_CORNER_BITS[_e])<=2)return _e;throw new NotFoundException},o.prototype.getCorrectedParameterData=function(i,s){var _,_e;s?(_=7,_e=2):(_=10,_e=4);for(var ct=_-_e,Mt=new Int32Array(_),Ft=_-1;Ft>=0;--Ft)Mt[Ft]=15&i,i>>=4;try{new ReedSolomonDecoder(GenericGF.AZTEC_PARAM).decode(Mt,ct)}catch{throw new NotFoundException}var Ut=0;for(Ft=0;Ft<_e;Ft++)Ut=(Ut<<4)+Mt[Ft];return Ut},o.prototype.getBullsEyeCorners=function(i){var s=i,_=i,_e=i,ct=i,Mt=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var Ft=this.getFirstDifferent(s,Mt,1,-1),Ut=this.getFirstDifferent(_,Mt,1,1),Xt=this.getFirstDifferent(_e,Mt,-1,1),Kt=this.getFirstDifferent(ct,Mt,-1,-1);if(this.nbCenterLayers>2){var nr=this.distancePoint(Kt,Ft)*this.nbCenterLayers/(this.distancePoint(ct,s)*(this.nbCenterLayers+2));if(nr<.75||nr>1.25||!this.isWhiteOrBlackRectangle(Ft,Ut,Xt,Kt))break}s=Ft,_=Ut,_e=Xt,ct=Kt,Mt=!Mt}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new NotFoundException;this.compact=this.nbCenterLayers===5;var rr=new ResultPoint(s.getX()+.5,s.getY()-.5),or=new ResultPoint(_.getX()+.5,_.getY()+.5),hr=new ResultPoint(_e.getX()-.5,_e.getY()+.5),fr=new ResultPoint(ct.getX()-.5,ct.getY()-.5);return this.expandSquare([rr,or,hr,fr],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},o.prototype.getMatrixCenter=function(){var i,s,_,_e;try{i=(Xt=new WhiteRectangleDetector(this.image).detect())[0],s=Xt[1],_=Xt[2],_e=Xt[3]}catch{var ct=this.image.getWidth()/2,Mt=this.image.getHeight()/2;i=this.getFirstDifferent(new Point(ct+7,Mt-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new Point(ct+7,Mt+7),!1,1,1).toResultPoint(),_=this.getFirstDifferent(new Point(ct-7,Mt+7),!1,-1,1).toResultPoint(),_e=this.getFirstDifferent(new Point(ct-7,Mt-7),!1,-1,-1).toResultPoint()}var Ft=MathUtils.round((i.getX()+_e.getX()+s.getX()+_.getX())/4),Ut=MathUtils.round((i.getY()+_e.getY()+s.getY()+_.getY())/4);try{var Xt;i=(Xt=new WhiteRectangleDetector(this.image,15,Ft,Ut).detect())[0],s=Xt[1],_=Xt[2],_e=Xt[3]}catch{i=this.getFirstDifferent(new Point(Ft+7,Ut-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new Point(Ft+7,Ut+7),!1,1,1).toResultPoint(),_=this.getFirstDifferent(new Point(Ft-7,Ut+7),!1,-1,1).toResultPoint(),_e=this.getFirstDifferent(new Point(Ft-7,Ut-7),!1,-1,-1).toResultPoint()}return Ft=MathUtils.round((i.getX()+_e.getX()+s.getX()+_.getX())/4),Ut=MathUtils.round((i.getY()+_e.getY()+s.getY()+_.getY())/4),new Point(Ft,Ut)},o.prototype.getMatrixCornerPoints=function(i){return this.expandSquare(i,2*this.nbCenterLayers,this.getDimension())},o.prototype.sampleGrid=function(i,s,_,_e,ct){var Mt=GridSamplerInstance.getInstance(),Ft=this.getDimension(),Ut=Ft/2-this.nbCenterLayers,Xt=Ft/2+this.nbCenterLayers;return Mt.sampleGrid(i,Ft,Ft,Ut,Ut,Xt,Ut,Xt,Xt,Ut,Xt,s.getX(),s.getY(),_.getX(),_.getY(),_e.getX(),_e.getY(),ct.getX(),ct.getY())},o.prototype.sampleLine=function(i,s,_){for(var _e=0,ct=this.distanceResultPoint(i,s),Mt=ct/_,Ft=i.getX(),Ut=i.getY(),Xt=Mt*(s.getX()-i.getX())/ct,Kt=Mt*(s.getY()-i.getY())/ct,nr=0;nr<_;nr++)this.image.get(MathUtils.round(Ft+nr*Xt),MathUtils.round(Ut+nr*Kt))&&(_e|=1<<_-nr-1);return _e},o.prototype.isWhiteOrBlackRectangle=function(i,s,_,_e){i=new Point(i.getX()-3,i.getY()+3),s=new Point(s.getX()-3,s.getY()-3),_=new Point(_.getX()+3,_.getY()-3),_e=new Point(_e.getX()+3,_e.getY()+3);var ct=this.getColor(_e,i);if(ct===0)return!1;var Mt=this.getColor(i,s);return Mt===ct&&(Mt=this.getColor(s,_))===ct&&(Mt=this.getColor(_,_e))===ct},o.prototype.getColor=function(i,s){for(var _=this.distancePoint(i,s),_e=(s.getX()-i.getX())/_,ct=(s.getY()-i.getY())/_,Mt=0,Ft=i.getX(),Ut=i.getY(),Xt=this.image.get(i.getX(),i.getY()),Kt=Math.ceil(_),nr=0;nr<Kt;nr++)Ft+=_e,Ut+=ct,this.image.get(MathUtils.round(Ft),MathUtils.round(Ut))!==Xt&&Mt++;var rr=Mt/_;return rr>.1&&rr<.9?0:rr<=.1===Xt?1:-1},o.prototype.getFirstDifferent=function(i,s,_,_e){for(var ct=i.getX()+_,Mt=i.getY()+_e;this.isValid(ct,Mt)&&this.image.get(ct,Mt)===s;)ct+=_,Mt+=_e;for(ct-=_,Mt-=_e;this.isValid(ct,Mt)&&this.image.get(ct,Mt)===s;)ct+=_;for(ct-=_;this.isValid(ct,Mt)&&this.image.get(ct,Mt)===s;)Mt+=_e;return new Point(ct,Mt-=_e)},o.prototype.expandSquare=function(i,s,_){var _e=_/(2*s),ct=i[0].getX()-i[2].getX(),Mt=i[0].getY()-i[2].getY(),Ft=(i[0].getX()+i[2].getX())/2,Ut=(i[0].getY()+i[2].getY())/2,Xt=new ResultPoint(Ft+_e*ct,Ut+_e*Mt),Kt=new ResultPoint(Ft-_e*ct,Ut-_e*Mt);return ct=i[1].getX()-i[3].getX(),Mt=i[1].getY()-i[3].getY(),Ft=(i[1].getX()+i[3].getX())/2,Ut=(i[1].getY()+i[3].getY())/2,[Xt,new ResultPoint(Ft+_e*ct,Ut+_e*Mt),Kt,new ResultPoint(Ft-_e*ct,Ut-_e*Mt)]},o.prototype.isValid=function(i,s){return i>=0&&i<this.image.getWidth()&&s>0&&s<this.image.getHeight()},o.prototype.isValidPoint=function(i){var s=MathUtils.round(i.getX()),_=MathUtils.round(i.getY());return this.isValid(s,_)},o.prototype.distancePoint=function(i,s){return MathUtils.distance(i.getX(),i.getY(),s.getX(),s.getY())},o.prototype.distanceResultPoint=function(i,s){return MathUtils.distance(i.getX(),i.getY(),s.getX(),s.getY())},o.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(Integer.truncDivision(this.nbLayers-4,8)+1)+15},o}(),AztecReader=function(){function o(){}return o.prototype.decode=function(i,s){s===void 0&&(s=null);var _=null,_e=new Detector$3(i.getBlackMatrix()),ct=null,Mt=null;try{ct=(Ft=_e.detectMirror(!1)).getPoints(),this.reportFoundResultPoints(s,ct),Mt=new Decoder$2().decode(Ft)}catch(nr){_=nr}if(Mt==null)try{var Ft;ct=(Ft=_e.detectMirror(!0)).getPoints(),this.reportFoundResultPoints(s,ct),Mt=new Decoder$2().decode(Ft)}catch(nr){throw _??nr}var Ut=new Result(Mt.getText(),Mt.getRawBytes(),Mt.getNumBits(),ct,BarcodeFormat$1.AZTEC,System.currentTimeMillis()),Xt=Mt.getByteSegments();Xt!=null&&Ut.putMetadata(ResultMetadataType$1.BYTE_SEGMENTS,Xt);var Kt=Mt.getECLevel();return Kt!=null&&Ut.putMetadata(ResultMetadataType$1.ERROR_CORRECTION_LEVEL,Kt),Ut},o.prototype.reportFoundResultPoints=function(i,s){if(i!=null){var _=i.get(DecodeHintType$1.NEED_RESULT_POINT_CALLBACK);_!=null&&s.forEach(function(_e,ct,Mt){_.foundPossibleResultPoint(_e)})}},o.prototype.reset=function(){},o}(),__extends$R=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}();(function(o){function i(s){return s===void 0&&(s=500),o.call(this,new AztecReader,s)||this}__extends$R(i,o)})(BrowserCodeReader);var OneDReader=function(){function o(){}return o.prototype.decode=function(i,s){try{return this.doDecode(i,s)}catch{if(s&&s.get(DecodeHintType$1.TRY_HARDER)===!0&&i.isRotateSupported()){var _=i.rotateCounterClockwise(),_e=this.doDecode(_,s),ct=_e.getResultMetadata(),Mt=270;ct!==null&&ct.get(ResultMetadataType$1.ORIENTATION)===!0&&(Mt+=ct.get(ResultMetadataType$1.ORIENTATION)%360),_e.putMetadata(ResultMetadataType$1.ORIENTATION,Mt);var Ft=_e.getResultPoints();if(Ft!==null)for(var Ut=_.getHeight(),Xt=0;Xt<Ft.length;Xt++)Ft[Xt]=new ResultPoint(Ut-Ft[Xt].getY()-1,Ft[Xt].getX());return _e}throw new NotFoundException}},o.prototype.reset=function(){},o.prototype.doDecode=function(i,s){var _,_e=i.getWidth(),ct=i.getHeight(),Mt=new BitArray(_e),Ft=s&&s.get(DecodeHintType$1.TRY_HARDER)===!0,Ut=Math.max(1,ct>>(Ft?8:5));_=Ft?ct:15;for(var Xt=Math.trunc(ct/2),Kt=0;Kt<_;Kt++){var nr=Math.trunc((Kt+1)/2),rr=Xt+Ut*(1&Kt?-nr:nr);if(rr<0||rr>=ct)break;try{Mt=i.getBlackRow(rr,Mt)}catch{continue}for(var or=function(Lr){if(Lr===1&&(Mt.reverse(),s&&s.get(DecodeHintType$1.NEED_RESULT_POINT_CALLBACK)===!0)){var Br=new Map;s.forEach(function(ro,no){return Br.set(no,ro)}),Br.delete(DecodeHintType$1.NEED_RESULT_POINT_CALLBACK),s=Br}try{var Vr=hr.decodeRow(rr,Mt,s);if(Lr===1){Vr.putMetadata(ResultMetadataType$1.ORIENTATION,180);var Wr=Vr.getResultPoints();Wr!==null&&(Wr[0]=new ResultPoint(_e-Wr[0].getX()-1,Wr[0].getY()),Wr[1]=new ResultPoint(_e-Wr[1].getX()-1,Wr[1].getY()))}return{value:Vr}}catch{}},hr=this,fr=0;fr<2;fr++){var yr=or(fr);if(typeof yr=="object")return yr.value}}throw new NotFoundException},o.recordPattern=function(i,s,_){for(var _e=_.length,ct=0;ct<_e;ct++)_[ct]=0;var Mt=i.getSize();if(s>=Mt)throw new NotFoundException;for(var Ft=!i.get(s),Ut=0,Xt=s;Xt<Mt;){if(i.get(Xt)!==Ft)_[Ut]++;else{if(++Ut===_e)break;_[Ut]=1,Ft=!Ft}Xt++}if(Ut!==_e&&(Ut!==_e-1||Xt!==Mt))throw new NotFoundException},o.recordPatternInReverse=function(i,s,_){for(var _e=_.length,ct=i.get(s);s>0&&_e>=0;)i.get(--s)!==ct&&(_e--,ct=!ct);if(_e>=0)throw new NotFoundException;o.recordPattern(i,s+1,_)},o.patternMatchVariance=function(i,s,_){for(var _e=i.length,ct=0,Mt=0,Ft=0;Ft<_e;Ft++)ct+=i[Ft],Mt+=s[Ft];if(ct<Mt)return Number.POSITIVE_INFINITY;var Ut=ct/Mt;_*=Ut;for(var Xt=0,Kt=0;Kt<_e;Kt++){var nr=i[Kt],rr=s[Kt]*Ut,or=nr>rr?nr-rr:rr-nr;if(or>_)return Number.POSITIVE_INFINITY;Xt+=or}return Xt/ct},o}(),__extends$Q=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}(),Code128Reader=function(o){function i(){return o!==null&&o.apply(this,arguments)||this}return __extends$Q(i,o),i.findStartPattern=function(s){for(var _=s.getSize(),_e=s.getNextSet(0),ct=0,Mt=Int32Array.from([0,0,0,0,0,0]),Ft=_e,Ut=!1,Xt=_e;Xt<_;Xt++)if(s.get(Xt)!==Ut)Mt[ct]++;else{if(ct===5){for(var Kt=i.MAX_AVG_VARIANCE,nr=-1,rr=i.CODE_START_A;rr<=i.CODE_START_C;rr++){var or=OneDReader.patternMatchVariance(Mt,i.CODE_PATTERNS[rr],i.MAX_INDIVIDUAL_VARIANCE);or<Kt&&(Kt=or,nr=rr)}if(nr>=0&&s.isRange(Math.max(0,Ft-(Xt-Ft)/2),Ft,!1))return Int32Array.from([Ft,Xt,nr]);Ft+=Mt[0]+Mt[1],(Mt=Mt.slice(2,Mt.length))[ct-1]=0,Mt[ct]=0,ct--}else ct++;Mt[ct]=1,Ut=!Ut}throw new NotFoundException},i.decodeCode=function(s,_,_e){OneDReader.recordPattern(s,_e,_);for(var ct=i.MAX_AVG_VARIANCE,Mt=-1,Ft=0;Ft<i.CODE_PATTERNS.length;Ft++){var Ut=i.CODE_PATTERNS[Ft],Xt=this.patternMatchVariance(_,Ut,i.MAX_INDIVIDUAL_VARIANCE);Xt<ct&&(ct=Xt,Mt=Ft)}if(Mt>=0)return Mt;throw new NotFoundException},i.prototype.decodeRow=function(s,_,_e){var ct,Mt=_e&&_e.get(DecodeHintType$1.ASSUME_GS1)===!0,Ft=i.findStartPattern(_),Ut=Ft[2],Xt=0,Kt=new Uint8Array(20);switch(Kt[Xt++]=Ut,Ut){case i.CODE_START_A:ct=i.CODE_CODE_A;break;case i.CODE_START_B:ct=i.CODE_CODE_B;break;case i.CODE_START_C:ct=i.CODE_CODE_C;break;default:throw new FormatException}for(var nr=!1,rr=!1,or="",hr=Ft[0],fr=Ft[1],yr=Int32Array.from([0,0,0,0,0,0]),Lr=0,Br=0,Vr=Ut,Wr=0,ro=!0,no=!1,so=!1;!nr;){var ko=rr;switch(rr=!1,Lr=Br,Br=i.decodeCode(_,yr,fr),Kt[Xt++]=Br,Br!==i.CODE_STOP&&(ro=!0),Br!==i.CODE_STOP&&(Vr+=++Wr*Br),hr=fr,fr+=yr.reduce(function(Pp,Lo){return Pp+Lo},0),Br){case i.CODE_START_A:case i.CODE_START_B:case i.CODE_START_C:throw new FormatException}switch(ct){case i.CODE_CODE_A:if(Br<64)or+=so===no?String.fromCharCode(32+Br):String.fromCharCode(32+Br+128),so=!1;else if(Br<96)or+=so===no?String.fromCharCode(Br-64):String.fromCharCode(Br+64),so=!1;else switch(Br!==i.CODE_STOP&&(ro=!1),Br){case i.CODE_FNC_1:Mt&&(or.length===0?or+="]C1":or+="");break;case i.CODE_FNC_2:case i.CODE_FNC_3:break;case i.CODE_FNC_4_A:!no&&so?(no=!0,so=!1):no&&so?(no=!1,so=!1):so=!0;break;case i.CODE_SHIFT:rr=!0,ct=i.CODE_CODE_B;break;case i.CODE_CODE_B:ct=i.CODE_CODE_B;break;case i.CODE_CODE_C:ct=i.CODE_CODE_C;break;case i.CODE_STOP:nr=!0}break;case i.CODE_CODE_B:if(Br<96)or+=so===no?String.fromCharCode(32+Br):String.fromCharCode(32+Br+128),so=!1;else switch(Br!==i.CODE_STOP&&(ro=!1),Br){case i.CODE_FNC_1:Mt&&(or.length===0?or+="]C1":or+="");break;case i.CODE_FNC_2:case i.CODE_FNC_3:break;case i.CODE_FNC_4_B:!no&&so?(no=!0,so=!1):no&&so?(no=!1,so=!1):so=!0;break;case i.CODE_SHIFT:rr=!0,ct=i.CODE_CODE_A;break;case i.CODE_CODE_A:ct=i.CODE_CODE_A;break;case i.CODE_CODE_C:ct=i.CODE_CODE_C;break;case i.CODE_STOP:nr=!0}break;case i.CODE_CODE_C:if(Br<100)Br<10&&(or+="0"),or+=Br;else switch(Br!==i.CODE_STOP&&(ro=!1),Br){case i.CODE_FNC_1:Mt&&(or.length===0?or+="]C1":or+="");break;case i.CODE_CODE_A:ct=i.CODE_CODE_A;break;case i.CODE_CODE_B:ct=i.CODE_CODE_B;break;case i.CODE_STOP:nr=!0}}ko&&(ct=ct===i.CODE_CODE_A?i.CODE_CODE_B:i.CODE_CODE_A)}var To=fr-hr;if(fr=_.getNextUnset(fr),!_.isRange(fr,Math.min(_.getSize(),fr+(fr-hr)/2),!1))throw new NotFoundException;if((Vr-=Wr*Lr)%103!==Lr)throw new ChecksumException;var oo=or.length;if(oo===0)throw new NotFoundException;oo>0&&ro&&(or=ct===i.CODE_CODE_C?or.substring(0,oo-2):or.substring(0,oo-1));for(var No=(Ft[1]+Ft[0])/2,As=hr+To/2,Ks=Kt.length,vu=new Uint8Array(Ks),Fu=0;Fu<Ks;Fu++)vu[Fu]=Kt[Fu];var Ap=[new ResultPoint(No,s),new ResultPoint(As,s)];return new Result(or,vu,0,Ap,BarcodeFormat$1.CODE_128,new Date().getTime())},i.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],i.MAX_AVG_VARIANCE=.25,i.MAX_INDIVIDUAL_VARIANCE=.7,i.CODE_SHIFT=98,i.CODE_CODE_C=99,i.CODE_CODE_B=100,i.CODE_CODE_A=101,i.CODE_FNC_1=102,i.CODE_FNC_2=97,i.CODE_FNC_3=96,i.CODE_FNC_4_A=101,i.CODE_FNC_4_B=100,i.CODE_START_A=103,i.CODE_START_B=104,i.CODE_START_C=105,i.CODE_STOP=106,i}(OneDReader),__extends$P=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}(),__values$G=function(o){var i=typeof Symbol=="function"&&Symbol.iterator,s=i&&o[i],_=0;if(s)return s.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&_>=o.length&&(o=void 0),{value:o&&o[_++],done:!o}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},Code39Reader=function(o){function i(s,_){s===void 0&&(s=!1),_===void 0&&(_=!1);var _e=o.call(this)||this;return _e.usingCheckDigit=s,_e.extendedMode=_,_e.decodeRowResult="",_e.counters=new Int32Array(9),_e}return __extends$P(i,o),i.prototype.decodeRow=function(s,_,_e){var ct,Mt,Ft,Ut,Xt=this.counters;Xt.fill(0),this.decodeRowResult="";var Kt,nr,rr=i.findAsteriskPattern(_,Xt),or=_.getNextSet(rr[1]),hr=_.getSize();do{i.recordPattern(_,or,Xt);var fr=i.toNarrowWidePattern(Xt);if(fr<0)throw new NotFoundException;Kt=i.patternToChar(fr),this.decodeRowResult+=Kt,nr=or;try{for(var yr=(ct=void 0,__values$G(Xt)),Lr=yr.next();!Lr.done;Lr=yr.next())or+=Lr.value}catch(No){ct={error:No}}finally{try{Lr&&!Lr.done&&(Mt=yr.return)&&Mt.call(yr)}finally{if(ct)throw ct.error}}or=_.getNextSet(or)}while(Kt!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var Br,Vr=0;try{for(var Wr=__values$G(Xt),ro=Wr.next();!ro.done;ro=Wr.next())Vr+=ro.value}catch(No){Ft={error:No}}finally{try{ro&&!ro.done&&(Ut=Wr.return)&&Ut.call(Wr)}finally{if(Ft)throw Ft.error}}if(or!==hr&&2*(or-nr-Vr)<Vr)throw new NotFoundException;if(this.usingCheckDigit){for(var no=this.decodeRowResult.length-1,so=0,ko=0;ko<no;ko++)so+=i.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(ko));if(this.decodeRowResult.charAt(no)!==i.ALPHABET_STRING.charAt(so%43))throw new ChecksumException;this.decodeRowResult=this.decodeRowResult.substring(0,no)}if(this.decodeRowResult.length===0)throw new NotFoundException;Br=this.extendedMode?i.decodeExtended(this.decodeRowResult):this.decodeRowResult;var To=(rr[1]+rr[0])/2,oo=nr+Vr/2;return new Result(Br,null,0,[new ResultPoint(To,s),new ResultPoint(oo,s)],BarcodeFormat$1.CODE_39,new Date().getTime())},i.findAsteriskPattern=function(s,_){for(var _e=s.getSize(),ct=s.getNextSet(0),Mt=0,Ft=ct,Ut=!1,Xt=_.length,Kt=ct;Kt<_e;Kt++)if(s.get(Kt)!==Ut)_[Mt]++;else{if(Mt===Xt-1){if(this.toNarrowWidePattern(_)===i.ASTERISK_ENCODING&&s.isRange(Math.max(0,Ft-Math.floor((Kt-Ft)/2)),Ft,!1))return[Ft,Kt];Ft+=_[0]+_[1],_.copyWithin(0,2,2+Mt-1),_[Mt-1]=0,_[Mt]=0,Mt--}else Mt++;_[Mt]=1,Ut=!Ut}throw new NotFoundException},i.toNarrowWidePattern=function(s){var _,_e,ct,Mt=s.length,Ft=0;do{var Ut=2147483647;try{for(var Xt=(_=void 0,__values$G(s)),Kt=Xt.next();!Kt.done;Kt=Xt.next())(hr=Kt.value)<Ut&&hr>Ft&&(Ut=hr)}catch(fr){_={error:fr}}finally{try{Kt&&!Kt.done&&(_e=Xt.return)&&_e.call(Xt)}finally{if(_)throw _.error}}Ft=Ut,ct=0;for(var nr=0,rr=0,or=0;or<Mt;or++)(hr=s[or])>Ft&&(rr|=1<<Mt-1-or,ct++,nr+=hr);if(ct===3){for(or=0;or<Mt&&ct>0;or++){var hr;if((hr=s[or])>Ft&&(ct--,2*hr>=nr))return-1}return rr}}while(ct>3);return-1},i.patternToChar=function(s){for(var _=0;_<i.CHARACTER_ENCODINGS.length;_++)if(i.CHARACTER_ENCODINGS[_]===s)return i.ALPHABET_STRING.charAt(_);if(s===i.ASTERISK_ENCODING)return"*";throw new NotFoundException},i.decodeExtended=function(s){for(var _=s.length,_e="",ct=0;ct<_;ct++){var Mt=s.charAt(ct);if(Mt==="+"||Mt==="$"||Mt==="%"||Mt==="/"){var Ft=s.charAt(ct+1),Ut="\0";switch(Mt){case"+":if(!(Ft>="A"&&Ft<="Z"))throw new FormatException;Ut=String.fromCharCode(Ft.charCodeAt(0)+32);break;case"$":if(!(Ft>="A"&&Ft<="Z"))throw new FormatException;Ut=String.fromCharCode(Ft.charCodeAt(0)-64);break;case"%":if(Ft>="A"&&Ft<="E")Ut=String.fromCharCode(Ft.charCodeAt(0)-38);else if(Ft>="F"&&Ft<="J")Ut=String.fromCharCode(Ft.charCodeAt(0)-11);else if(Ft>="K"&&Ft<="O")Ut=String.fromCharCode(Ft.charCodeAt(0)+16);else if(Ft>="P"&&Ft<="T")Ut=String.fromCharCode(Ft.charCodeAt(0)+43);else if(Ft==="U")Ut="\0";else if(Ft==="V")Ut="@";else if(Ft==="W")Ut="`";else{if(Ft!=="X"&&Ft!=="Y"&&Ft!=="Z")throw new FormatException;Ut=""}break;case"/":if(Ft>="A"&&Ft<="O")Ut=String.fromCharCode(Ft.charCodeAt(0)-32);else{if(Ft!=="Z")throw new FormatException;Ut=":"}}_e+=Ut,ct++}else _e+=Mt}return _e},i.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",i.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],i.ASTERISK_ENCODING=148,i}(OneDReader),__extends$O=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}(),__values$F=function(o){var i=typeof Symbol=="function"&&Symbol.iterator,s=i&&o[i],_=0;if(s)return s.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&_>=o.length&&(o=void 0),{value:o&&o[_++],done:!o}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},Code93Reader=function(o){function i(){var s=o.call(this)||this;return s.decodeRowResult="",s.counters=new Int32Array(6),s}return __extends$O(i,o),i.prototype.decodeRow=function(s,_,_e){var ct,Mt,Ft,Ut,Xt,Kt,nr=this.findAsteriskPattern(_),rr=_.getNextSet(nr[1]),or=_.getSize(),hr=this.counters;hr.fill(0),this.decodeRowResult="";do{i.recordPattern(_,rr,hr);var fr=this.toPattern(hr);if(fr<0)throw new NotFoundException;Xt=this.patternToChar(fr),this.decodeRowResult+=Xt,Kt=rr;try{for(var yr=(ct=void 0,__values$F(hr)),Lr=yr.next();!Lr.done;Lr=yr.next())rr+=Lr.value}catch(ko){ct={error:ko}}finally{try{Lr&&!Lr.done&&(Mt=yr.return)&&Mt.call(yr)}finally{if(ct)throw ct.error}}rr=_.getNextSet(rr)}while(Xt!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var Br=0;try{for(var Vr=__values$F(hr),Wr=Vr.next();!Wr.done;Wr=Vr.next())Br+=Wr.value}catch(ko){Ft={error:ko}}finally{try{Wr&&!Wr.done&&(Ut=Vr.return)&&Ut.call(Vr)}finally{if(Ft)throw Ft.error}}if(rr===or||!_.get(rr))throw new NotFoundException;if(this.decodeRowResult.length<2)throw new NotFoundException;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var ro=this.decodeExtended(this.decodeRowResult),no=(nr[1]+nr[0])/2,so=Kt+Br/2;return new Result(ro,null,0,[new ResultPoint(no,s),new ResultPoint(so,s)],BarcodeFormat$1.CODE_93,new Date().getTime())},i.prototype.findAsteriskPattern=function(s){var _=s.getSize(),_e=s.getNextSet(0);this.counters.fill(0);for(var ct=this.counters,Mt=_e,Ft=!1,Ut=ct.length,Xt=0,Kt=_e;Kt<_;Kt++)if(s.get(Kt)!==Ft)ct[Xt]++;else{if(Xt===Ut-1){if(this.toPattern(ct)===i.ASTERISK_ENCODING)return new Int32Array([Mt,Kt]);Mt+=ct[0]+ct[1],ct.copyWithin(0,2,2+Xt-1),ct[Xt-1]=0,ct[Xt]=0,Xt--}else Xt++;ct[Xt]=1,Ft=!Ft}throw new NotFoundException},i.prototype.toPattern=function(s){var _,_e,ct=0;try{for(var Mt=__values$F(s),Ft=Mt.next();!Ft.done;Ft=Mt.next())ct+=Ft.value}catch(or){_={error:or}}finally{try{Ft&&!Ft.done&&(_e=Mt.return)&&_e.call(Mt)}finally{if(_)throw _.error}}for(var Ut=0,Xt=s.length,Kt=0;Kt<Xt;Kt++){var nr=Math.round(9*s[Kt]/ct);if(nr<1||nr>4)return-1;if(1&Kt)Ut<<=nr;else for(var rr=0;rr<nr;rr++)Ut=Ut<<1|1}return Ut},i.prototype.patternToChar=function(s){for(var _=0;_<i.CHARACTER_ENCODINGS.length;_++)if(i.CHARACTER_ENCODINGS[_]===s)return i.ALPHABET_STRING.charAt(_);throw new NotFoundException},i.prototype.decodeExtended=function(s){for(var _=s.length,_e="",ct=0;ct<_;ct++){var Mt=s.charAt(ct);if(Mt>="a"&&Mt<="d"){if(ct>=_-1)throw new FormatException;var Ft=s.charAt(ct+1),Ut="\0";switch(Mt){case"d":if(!(Ft>="A"&&Ft<="Z"))throw new FormatException;Ut=String.fromCharCode(Ft.charCodeAt(0)+32);break;case"a":if(!(Ft>="A"&&Ft<="Z"))throw new FormatException;Ut=String.fromCharCode(Ft.charCodeAt(0)-64);break;case"b":if(Ft>="A"&&Ft<="E")Ut=String.fromCharCode(Ft.charCodeAt(0)-38);else if(Ft>="F"&&Ft<="J")Ut=String.fromCharCode(Ft.charCodeAt(0)-11);else if(Ft>="K"&&Ft<="O")Ut=String.fromCharCode(Ft.charCodeAt(0)+16);else if(Ft>="P"&&Ft<="T")Ut=String.fromCharCode(Ft.charCodeAt(0)+43);else if(Ft==="U")Ut="\0";else if(Ft==="V")Ut="@";else if(Ft==="W")Ut="`";else{if(!(Ft>="X"&&Ft<="Z"))throw new FormatException;Ut=""}break;case"c":if(Ft>="A"&&Ft<="O")Ut=String.fromCharCode(Ft.charCodeAt(0)-32);else{if(Ft!=="Z")throw new FormatException;Ut=":"}}_e+=Ut,ct++}else _e+=Mt}return _e},i.prototype.checkChecksums=function(s){var _=s.length;this.checkOneChecksum(s,_-2,20),this.checkOneChecksum(s,_-1,15)},i.prototype.checkOneChecksum=function(s,_,_e){for(var ct=1,Mt=0,Ft=_-1;Ft>=0;Ft--)Mt+=ct*i.ALPHABET_STRING.indexOf(s.charAt(Ft)),++ct>_e&&(ct=1);if(s.charAt(_)!==i.ALPHABET_STRING[Mt%47])throw new ChecksumException},i.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",i.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],i.ASTERISK_ENCODING=i.CHARACTER_ENCODINGS[47],i}(OneDReader),__extends$N=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}(),__values$E=function(o){var i=typeof Symbol=="function"&&Symbol.iterator,s=i&&o[i],_=0;if(s)return s.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&_>=o.length&&(o=void 0),{value:o&&o[_++],done:!o}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},ITFReader=function(o){function i(){var s=o!==null&&o.apply(this,arguments)||this;return s.narrowLineWidth=-1,s}return __extends$N(i,o),i.prototype.decodeRow=function(s,_,_e){var ct,Mt,Ft=this.decodeStart(_),Ut=this.decodeEnd(_),Xt=new StringBuilder;i.decodeMiddle(_,Ft[1],Ut[0],Xt);var Kt=Xt.toString(),nr=null;_e!=null&&(nr=_e.get(DecodeHintType$1.ALLOWED_LENGTHS)),nr==null&&(nr=i.DEFAULT_ALLOWED_LENGTHS);var rr=Kt.length,or=!1,hr=0;try{for(var fr=__values$E(nr),yr=fr.next();!yr.done;yr=fr.next()){var Lr=yr.value;if(rr===Lr){or=!0;break}Lr>hr&&(hr=Lr)}}catch(Vr){ct={error:Vr}}finally{try{yr&&!yr.done&&(Mt=fr.return)&&Mt.call(fr)}finally{if(ct)throw ct.error}}if(!or&&rr>hr&&(or=!0),!or)throw new FormatException;var Br=[new ResultPoint(Ft[1],s),new ResultPoint(Ut[0],s)];return new Result(Kt,null,0,Br,BarcodeFormat$1.ITF,new Date().getTime())},i.decodeMiddle=function(s,_,_e,ct){var Mt=new Int32Array(10),Ft=new Int32Array(5),Ut=new Int32Array(5);for(Mt.fill(0),Ft.fill(0),Ut.fill(0);_<_e;){OneDReader.recordPattern(s,_,Mt);for(var Xt=0;Xt<5;Xt++){var Kt=2*Xt;Ft[Xt]=Mt[Kt],Ut[Xt]=Mt[Kt+1]}var nr=i.decodeDigit(Ft);ct.append(nr.toString()),nr=this.decodeDigit(Ut),ct.append(nr.toString()),Mt.forEach(function(rr){_+=rr})}},i.prototype.decodeStart=function(s){var _=i.skipWhiteSpace(s),_e=i.findGuardPattern(s,_,i.START_PATTERN);return this.narrowLineWidth=(_e[1]-_e[0])/4,this.validateQuietZone(s,_e[0]),_e},i.prototype.validateQuietZone=function(s,_){var _e=10*this.narrowLineWidth;_e=_e<_?_e:_;for(var ct=_-1;_e>0&&ct>=0&&!s.get(ct);ct--)_e--;if(_e!==0)throw new NotFoundException},i.skipWhiteSpace=function(s){var _=s.getSize(),_e=s.getNextSet(0);if(_e===_)throw new NotFoundException;return _e},i.prototype.decodeEnd=function(s){s.reverse();try{var _=i.skipWhiteSpace(s),_e=void 0;try{_e=i.findGuardPattern(s,_,i.END_PATTERN_REVERSED[0])}catch(Mt){Mt instanceof NotFoundException&&(_e=i.findGuardPattern(s,_,i.END_PATTERN_REVERSED[1]))}this.validateQuietZone(s,_e[0]);var ct=_e[0];return _e[0]=s.getSize()-_e[1],_e[1]=s.getSize()-ct,_e}finally{s.reverse()}},i.findGuardPattern=function(s,_,_e){var ct=_e.length,Mt=new Int32Array(ct),Ft=s.getSize(),Ut=!1,Xt=0,Kt=_;Mt.fill(0);for(var nr=_;nr<Ft;nr++)if(s.get(nr)!==Ut)Mt[Xt]++;else{if(Xt===ct-1){if(OneDReader.patternMatchVariance(Mt,_e,i.MAX_INDIVIDUAL_VARIANCE)<i.MAX_AVG_VARIANCE)return[Kt,nr];Kt+=Mt[0]+Mt[1],System.arraycopy(Mt,2,Mt,0,Xt-1),Mt[Xt-1]=0,Mt[Xt]=0,Xt--}else Xt++;Mt[Xt]=1,Ut=!Ut}throw new NotFoundException},i.decodeDigit=function(s){for(var _=i.MAX_AVG_VARIANCE,_e=-1,ct=i.PATTERNS.length,Mt=0;Mt<ct;Mt++){var Ft=i.PATTERNS[Mt],Ut=OneDReader.patternMatchVariance(s,Ft,i.MAX_INDIVIDUAL_VARIANCE);Ut<_?(_=Ut,_e=Mt):Ut===_&&(_e=-1)}if(_e>=0)return _e%10;throw new NotFoundException},i.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],i.MAX_AVG_VARIANCE=.38,i.MAX_INDIVIDUAL_VARIANCE=.5,i.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],i.START_PATTERN=Int32Array.from([1,1,1,1]),i.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],i}(OneDReader),__extends$M=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}(),AbstractUPCEANReader=function(o){function i(){var s=o!==null&&o.apply(this,arguments)||this;return s.decodeRowStringBuffer="",s}return __extends$M(i,o),i.findStartGuardPattern=function(s){for(var _,_e=!1,ct=0,Mt=Int32Array.from([0,0,0]);!_e;){Mt=Int32Array.from([0,0,0]);var Ft=(_=i.findGuardPattern(s,ct,!1,this.START_END_PATTERN,Mt))[0],Ut=Ft-((ct=_[1])-Ft);Ut>=0&&(_e=s.isRange(Ut,Ft,!1))}return _},i.checkChecksum=function(s){return i.checkStandardUPCEANChecksum(s)},i.checkStandardUPCEANChecksum=function(s){var _=s.length;if(_===0)return!1;var _e=parseInt(s.charAt(_-1),10);return i.getStandardUPCEANChecksum(s.substring(0,_-1))===_e},i.getStandardUPCEANChecksum=function(s){for(var _=s.length,_e=0,ct=_-1;ct>=0;ct-=2){if((Mt=s.charAt(ct).charCodeAt(0)-48)<0||Mt>9)throw new FormatException;_e+=Mt}for(_e*=3,ct=_-2;ct>=0;ct-=2){var Mt;if((Mt=s.charAt(ct).charCodeAt(0)-48)<0||Mt>9)throw new FormatException;_e+=Mt}return(1e3-_e)%10},i.decodeEnd=function(s,_){return i.findGuardPattern(s,_,!1,i.START_END_PATTERN,new Int32Array(i.START_END_PATTERN.length).fill(0))},i.findGuardPatternWithoutCounters=function(s,_,_e,ct){return this.findGuardPattern(s,_,_e,ct,new Int32Array(ct.length))},i.findGuardPattern=function(s,_,_e,ct,Mt){for(var Ft=s.getSize(),Ut=0,Xt=_=_e?s.getNextUnset(_):s.getNextSet(_),Kt=ct.length,nr=_e,rr=_;rr<Ft;rr++)if(s.get(rr)!==nr)Mt[Ut]++;else{if(Ut===Kt-1){if(OneDReader.patternMatchVariance(Mt,ct,i.MAX_INDIVIDUAL_VARIANCE)<i.MAX_AVG_VARIANCE)return Int32Array.from([Xt,rr]);Xt+=Mt[0]+Mt[1];for(var or=Mt.slice(2,Mt.length),hr=0;hr<Ut-1;hr++)Mt[hr]=or[hr];Mt[Ut-1]=0,Mt[Ut]=0,Ut--}else Ut++;Mt[Ut]=1,nr=!nr}throw new NotFoundException},i.decodeDigit=function(s,_,_e,ct){this.recordPattern(s,_e,_);for(var Mt=this.MAX_AVG_VARIANCE,Ft=-1,Ut=ct.length,Xt=0;Xt<Ut;Xt++){var Kt=ct[Xt],nr=OneDReader.patternMatchVariance(_,Kt,i.MAX_INDIVIDUAL_VARIANCE);nr<Mt&&(Mt=nr,Ft=Xt)}if(Ft>=0)return Ft;throw new NotFoundException},i.MAX_AVG_VARIANCE=.48,i.MAX_INDIVIDUAL_VARIANCE=.7,i.START_END_PATTERN=Int32Array.from([1,1,1]),i.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),i.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),i.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],i}(OneDReader),__values$D=function(o){var i=typeof Symbol=="function"&&Symbol.iterator,s=i&&o[i],_=0;if(s)return s.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&_>=o.length&&(o=void 0),{value:o&&o[_++],done:!o}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},UPCEANExtension5Support=function(){function o(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return o.prototype.decodeRow=function(i,s,_){var _e=this.decodeRowStringBuffer,ct=this.decodeMiddle(s,_,_e),Mt=_e.toString(),Ft=o.parseExtensionString(Mt),Ut=[new ResultPoint((_[0]+_[1])/2,i),new ResultPoint(ct,i)],Xt=new Result(Mt,null,0,Ut,BarcodeFormat$1.UPC_EAN_EXTENSION,new Date().getTime());return Ft!=null&&Xt.putAllMetadata(Ft),Xt},o.prototype.decodeMiddle=function(i,s,_){var _e,ct,Mt=this.decodeMiddleCounters;Mt[0]=0,Mt[1]=0,Mt[2]=0,Mt[3]=0;for(var Ft=i.getSize(),Ut=s[1],Xt=0,Kt=0;Kt<5&&Ut<Ft;Kt++){var nr=AbstractUPCEANReader.decodeDigit(i,Mt,Ut,AbstractUPCEANReader.L_AND_G_PATTERNS);_+=String.fromCharCode(48+nr%10);try{for(var rr=(_e=void 0,__values$D(Mt)),or=rr.next();!or.done;or=rr.next())Ut+=or.value}catch(fr){_e={error:fr}}finally{try{or&&!or.done&&(ct=rr.return)&&ct.call(rr)}finally{if(_e)throw _e.error}}nr>=10&&(Xt|=1<<4-Kt),Kt!==4&&(Ut=i.getNextSet(Ut),Ut=i.getNextUnset(Ut))}if(_.length!==5)throw new NotFoundException;var hr=this.determineCheckDigit(Xt);if(o.extensionChecksum(_.toString())!==hr)throw new NotFoundException;return Ut},o.extensionChecksum=function(i){for(var s=i.length,_=0,_e=s-2;_e>=0;_e-=2)_+=i.charAt(_e).charCodeAt(0)-48;for(_*=3,_e=s-1;_e>=0;_e-=2)_+=i.charAt(_e).charCodeAt(0)-48;return(_*=3)%10},o.prototype.determineCheckDigit=function(i){for(var s=0;s<10;s++)if(i===this.CHECK_DIGIT_ENCODINGS[s])return s;throw new NotFoundException},o.parseExtensionString=function(i){if(i.length!==5)return null;var s=o.parseExtension5String(i);return s==null?null:new Map([[ResultMetadataType$1.SUGGESTED_PRICE,s]])},o.parseExtension5String=function(i){var s;switch(i.charAt(0)){case"0":s="£";break;case"5":s="$";break;case"9":switch(i){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}s="";break;default:s=""}var _=parseInt(i.substring(1)),_e=_%100;return s+(_/100).toString()+"."+(_e<10?"0"+_e:_e.toString())},o}(),__values$C=function(o){var i=typeof Symbol=="function"&&Symbol.iterator,s=i&&o[i],_=0;if(s)return s.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&_>=o.length&&(o=void 0),{value:o&&o[_++],done:!o}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},UPCEANExtension2Support=function(){function o(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return o.prototype.decodeRow=function(i,s,_){var _e=this.decodeRowStringBuffer,ct=this.decodeMiddle(s,_,_e),Mt=_e.toString(),Ft=o.parseExtensionString(Mt),Ut=[new ResultPoint((_[0]+_[1])/2,i),new ResultPoint(ct,i)],Xt=new Result(Mt,null,0,Ut,BarcodeFormat$1.UPC_EAN_EXTENSION,new Date().getTime());return Ft!=null&&Xt.putAllMetadata(Ft),Xt},o.prototype.decodeMiddle=function(i,s,_){var _e,ct,Mt=this.decodeMiddleCounters;Mt[0]=0,Mt[1]=0,Mt[2]=0,Mt[3]=0;for(var Ft=i.getSize(),Ut=s[1],Xt=0,Kt=0;Kt<2&&Ut<Ft;Kt++){var nr=AbstractUPCEANReader.decodeDigit(i,Mt,Ut,AbstractUPCEANReader.L_AND_G_PATTERNS);_+=String.fromCharCode(48+nr%10);try{for(var rr=(_e=void 0,__values$C(Mt)),or=rr.next();!or.done;or=rr.next())Ut+=or.value}catch(hr){_e={error:hr}}finally{try{or&&!or.done&&(ct=rr.return)&&ct.call(rr)}finally{if(_e)throw _e.error}}nr>=10&&(Xt|=1<<1-Kt),Kt!==1&&(Ut=i.getNextSet(Ut),Ut=i.getNextUnset(Ut))}if(_.length!==2)throw new NotFoundException;if(parseInt(_.toString())%4!==Xt)throw new NotFoundException;return Ut},o.parseExtensionString=function(i){return i.length!==2?null:new Map([[ResultMetadataType$1.ISSUE_NUMBER,parseInt(i)]])},o}(),UPCEANExtensionSupport=function(){function o(){}return o.decodeRow=function(i,s,_){var _e=AbstractUPCEANReader.findGuardPattern(s,_,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new UPCEANExtension5Support().decodeRow(i,s,_e)}catch{return new UPCEANExtension2Support().decodeRow(i,s,_e)}},o.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),o}(),__extends$L=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}(),UPCEANReader=function(o){function i(){var s=o.call(this)||this;s.decodeRowStringBuffer="",i.L_AND_G_PATTERNS=i.L_PATTERNS.map(function(Ft){return Int32Array.from(Ft)});for(var _=10;_<20;_++){for(var _e=i.L_PATTERNS[_-10],ct=new Int32Array(_e.length),Mt=0;Mt<_e.length;Mt++)ct[Mt]=_e[_e.length-Mt-1];i.L_AND_G_PATTERNS[_]=ct}return s}return __extends$L(i,o),i.prototype.decodeRow=function(s,_,_e){var ct=i.findStartGuardPattern(_),Mt=_e==null?null:_e.get(DecodeHintType$1.NEED_RESULT_POINT_CALLBACK);if(Mt!=null){var Ft=new ResultPoint((ct[0]+ct[1])/2,s);Mt.foundPossibleResultPoint(Ft)}var Ut=this.decodeMiddle(_,ct,this.decodeRowStringBuffer),Xt=Ut.rowOffset,Kt=Ut.resultString;if(Mt!=null){var nr=new ResultPoint(Xt,s);Mt.foundPossibleResultPoint(nr)}var rr=i.decodeEnd(_,Xt);if(Mt!=null){var or=new ResultPoint((rr[0]+rr[1])/2,s);Mt.foundPossibleResultPoint(or)}var hr=rr[1],fr=hr+(hr-rr[0]);if(fr>=_.getSize()||!_.isRange(hr,fr,!1))throw new NotFoundException;var yr=Kt.toString();if(yr.length<8)throw new FormatException;if(!i.checkChecksum(yr))throw new ChecksumException;var Lr=(ct[1]+ct[0])/2,Br=(rr[1]+rr[0])/2,Vr=this.getBarcodeFormat(),Wr=[new ResultPoint(Lr,s),new ResultPoint(Br,s)],ro=new Result(yr,null,0,Wr,Vr,new Date().getTime()),no=0;try{var so=UPCEANExtensionSupport.decodeRow(s,_,rr[1]);ro.putMetadata(ResultMetadataType$1.UPC_EAN_EXTENSION,so.getText()),ro.putAllMetadata(so.getResultMetadata()),ro.addResultPoints(so.getResultPoints()),no=so.getText().length}catch{}var ko=_e==null?null:_e.get(DecodeHintType$1.ALLOWED_EAN_EXTENSIONS);if(ko!=null){var To=!1;for(var oo in ko)if(no.toString()===oo){To=!0;break}if(!To)throw new NotFoundException}return Vr===BarcodeFormat$1.EAN_13||BarcodeFormat$1.UPC_A,ro},i.checkChecksum=function(s){return i.checkStandardUPCEANChecksum(s)},i.checkStandardUPCEANChecksum=function(s){var _=s.length;if(_===0)return!1;var _e=parseInt(s.charAt(_-1),10);return i.getStandardUPCEANChecksum(s.substring(0,_-1))===_e},i.getStandardUPCEANChecksum=function(s){for(var _=s.length,_e=0,ct=_-1;ct>=0;ct-=2){if((Mt=s.charAt(ct).charCodeAt(0)-48)<0||Mt>9)throw new FormatException;_e+=Mt}for(_e*=3,ct=_-2;ct>=0;ct-=2){var Mt;if((Mt=s.charAt(ct).charCodeAt(0)-48)<0||Mt>9)throw new FormatException;_e+=Mt}return(1e3-_e)%10},i.decodeEnd=function(s,_){return i.findGuardPattern(s,_,!1,i.START_END_PATTERN,new Int32Array(i.START_END_PATTERN.length).fill(0))},i}(AbstractUPCEANReader),__extends$K=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}(),__values$B=function(o){var i=typeof Symbol=="function"&&Symbol.iterator,s=i&&o[i],_=0;if(s)return s.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&_>=o.length&&(o=void 0),{value:o&&o[_++],done:!o}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},EAN13Reader=function(o){function i(){var s=o.call(this)||this;return s.decodeMiddleCounters=Int32Array.from([0,0,0,0]),s}return __extends$K(i,o),i.prototype.decodeMiddle=function(s,_,_e){var ct,Mt,Ft,Ut,Xt=this.decodeMiddleCounters;Xt[0]=0,Xt[1]=0,Xt[2]=0,Xt[3]=0;for(var Kt=s.getSize(),nr=_[1],rr=0,or=0;or<6&&nr<Kt;or++){var hr=UPCEANReader.decodeDigit(s,Xt,nr,UPCEANReader.L_AND_G_PATTERNS);_e+=String.fromCharCode(48+hr%10);try{for(var fr=(ct=void 0,__values$B(Xt)),yr=fr.next();!yr.done;yr=fr.next())nr+=yr.value}catch(Vr){ct={error:Vr}}finally{try{yr&&!yr.done&&(Mt=fr.return)&&Mt.call(fr)}finally{if(ct)throw ct.error}}hr>=10&&(rr|=1<<5-or)}for(_e=i.determineFirstDigit(_e,rr),nr=UPCEANReader.findGuardPattern(s,nr,!0,UPCEANReader.MIDDLE_PATTERN,new Int32Array(UPCEANReader.MIDDLE_PATTERN.length).fill(0))[1],or=0;or<6&&nr<Kt;or++){hr=UPCEANReader.decodeDigit(s,Xt,nr,UPCEANReader.L_PATTERNS),_e+=String.fromCharCode(48+hr);try{for(var Lr=(Ft=void 0,__values$B(Xt)),Br=Lr.next();!Br.done;Br=Lr.next())nr+=Br.value}catch(Vr){Ft={error:Vr}}finally{try{Br&&!Br.done&&(Ut=Lr.return)&&Ut.call(Lr)}finally{if(Ft)throw Ft.error}}}return{rowOffset:nr,resultString:_e}},i.prototype.getBarcodeFormat=function(){return BarcodeFormat$1.EAN_13},i.determineFirstDigit=function(s,_){for(var _e=0;_e<10;_e++)if(_===this.FIRST_DIGIT_ENCODINGS[_e])return s=String.fromCharCode(48+_e)+s;throw new NotFoundException},i.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],i}(UPCEANReader),__extends$J=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}(),__values$A=function(o){var i=typeof Symbol=="function"&&Symbol.iterator,s=i&&o[i],_=0;if(s)return s.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&_>=o.length&&(o=void 0),{value:o&&o[_++],done:!o}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},EAN8Reader=function(o){function i(){var s=o.call(this)||this;return s.decodeMiddleCounters=Int32Array.from([0,0,0,0]),s}return __extends$J(i,o),i.prototype.decodeMiddle=function(s,_,_e){var ct,Mt,Ft,Ut,Xt=this.decodeMiddleCounters;Xt[0]=0,Xt[1]=0,Xt[2]=0,Xt[3]=0;for(var Kt=s.getSize(),nr=_[1],rr=0;rr<4&&nr<Kt;rr++){var or=UPCEANReader.decodeDigit(s,Xt,nr,UPCEANReader.L_PATTERNS);_e+=String.fromCharCode(48+or);try{for(var hr=(ct=void 0,__values$A(Xt)),fr=hr.next();!fr.done;fr=hr.next())nr+=fr.value}catch(Br){ct={error:Br}}finally{try{fr&&!fr.done&&(Mt=hr.return)&&Mt.call(hr)}finally{if(ct)throw ct.error}}}for(nr=UPCEANReader.findGuardPattern(s,nr,!0,UPCEANReader.MIDDLE_PATTERN,new Int32Array(UPCEANReader.MIDDLE_PATTERN.length).fill(0))[1],rr=0;rr<4&&nr<Kt;rr++){or=UPCEANReader.decodeDigit(s,Xt,nr,UPCEANReader.L_PATTERNS),_e+=String.fromCharCode(48+or);try{for(var yr=(Ft=void 0,__values$A(Xt)),Lr=yr.next();!Lr.done;Lr=yr.next())nr+=Lr.value}catch(Br){Ft={error:Br}}finally{try{Lr&&!Lr.done&&(Ut=yr.return)&&Ut.call(yr)}finally{if(Ft)throw Ft.error}}}return{rowOffset:nr,resultString:_e}},i.prototype.getBarcodeFormat=function(){return BarcodeFormat$1.EAN_8},i}(UPCEANReader),__extends$I=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}(),UPCAReader=function(o){function i(){var s=o!==null&&o.apply(this,arguments)||this;return s.ean13Reader=new EAN13Reader,s}return __extends$I(i,o),i.prototype.getBarcodeFormat=function(){return BarcodeFormat$1.UPC_A},i.prototype.decode=function(s,_){return this.maybeReturnResult(this.ean13Reader.decode(s))},i.prototype.decodeRow=function(s,_,_e){return this.maybeReturnResult(this.ean13Reader.decodeRow(s,_,_e))},i.prototype.decodeMiddle=function(s,_,_e){return this.ean13Reader.decodeMiddle(s,_,_e)},i.prototype.maybeReturnResult=function(s){var _=s.getText();if(_.charAt(0)==="0"){var _e=new Result(_.substring(1),null,null,s.getResultPoints(),BarcodeFormat$1.UPC_A);return s.getResultMetadata()!=null&&_e.putAllMetadata(s.getResultMetadata()),_e}throw new NotFoundException},i.prototype.reset=function(){this.ean13Reader.reset()},i}(UPCEANReader),__extends$H=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}(),__values$z=function(o){var i=typeof Symbol=="function"&&Symbol.iterator,s=i&&o[i],_=0;if(s)return s.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&_>=o.length&&(o=void 0),{value:o&&o[_++],done:!o}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},UPCEReader=function(o){function i(){var s=o.call(this)||this;return s.decodeMiddleCounters=new Int32Array(4),s}return __extends$H(i,o),i.prototype.decodeMiddle=function(s,_,_e){var ct,Mt,Ft=this.decodeMiddleCounters.map(function(fr){return fr});Ft[0]=0,Ft[1]=0,Ft[2]=0,Ft[3]=0;for(var Ut=s.getSize(),Xt=_[1],Kt=0,nr=0;nr<6&&Xt<Ut;nr++){var rr=i.decodeDigit(s,Ft,Xt,i.L_AND_G_PATTERNS);_e+=String.fromCharCode(48+rr%10);try{for(var or=(ct=void 0,__values$z(Ft)),hr=or.next();!hr.done;hr=or.next())Xt+=hr.value}catch(fr){ct={error:fr}}finally{try{hr&&!hr.done&&(Mt=or.return)&&Mt.call(or)}finally{if(ct)throw ct.error}}rr>=10&&(Kt|=1<<5-nr)}return i.determineNumSysAndCheckDigit(new StringBuilder(_e),Kt),Xt},i.prototype.decodeEnd=function(s,_){return i.findGuardPatternWithoutCounters(s,_,!0,i.MIDDLE_END_PATTERN)},i.prototype.checkChecksum=function(s){return UPCEANReader.checkChecksum(i.convertUPCEtoUPCA(s))},i.determineNumSysAndCheckDigit=function(s,_){for(var _e=0;_e<=1;_e++)for(var ct=0;ct<10;ct++)if(_===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[_e][ct])return s.insert(0,"0"+_e),void s.append("0"+ct);throw NotFoundException.getNotFoundInstance()},i.prototype.getBarcodeFormat=function(){return BarcodeFormat$1.UPC_E},i.convertUPCEtoUPCA=function(s){var _=s.slice(1,7).split("").map(function(Mt){return Mt.charCodeAt(0)}),_e=new StringBuilder;_e.append(s.charAt(0));var ct=_[5];switch(ct){case 0:case 1:case 2:_e.appendChars(_,0,2),_e.append(ct),_e.append("0000"),_e.appendChars(_,2,3);break;case 3:_e.appendChars(_,0,3),_e.append("00000"),_e.appendChars(_,3,2);break;case 4:_e.appendChars(_,0,4),_e.append("00000"),_e.append(_[4]);break;default:_e.appendChars(_,0,5),_e.append("0000"),_e.append(ct)}return s.length>=8&&_e.append(s.charAt(7)),_e.toString()},i.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),i.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],i}(UPCEANReader),__extends$G=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}(),__values$y=function(o){var i=typeof Symbol=="function"&&Symbol.iterator,s=i&&o[i],_=0;if(s)return s.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&_>=o.length&&(o=void 0),{value:o&&o[_++],done:!o}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},MultiFormatUPCEANReader=function(o){function i(s){var _=o.call(this)||this,_e=s==null?null:s.get(DecodeHintType$1.POSSIBLE_FORMATS),ct=[];return _e!=null&&(_e.indexOf(BarcodeFormat$1.EAN_13)>-1&&ct.push(new EAN13Reader),_e.indexOf(BarcodeFormat$1.UPC_A)>-1&&ct.push(new UPCAReader),_e.indexOf(BarcodeFormat$1.EAN_8)>-1&&ct.push(new EAN8Reader),_e.indexOf(BarcodeFormat$1.UPC_E)>-1&&ct.push(new UPCEReader)),ct.length===0&&(ct.push(new EAN13Reader),ct.push(new UPCAReader),ct.push(new EAN8Reader),ct.push(new UPCEReader)),_.readers=ct,_}return __extends$G(i,o),i.prototype.decodeRow=function(s,_,_e){var ct,Mt;try{for(var Ft=__values$y(this.readers),Ut=Ft.next();!Ut.done;Ut=Ft.next()){var Xt=Ut.value;try{var Kt=Xt.decodeRow(s,_,_e),nr=Kt.getBarcodeFormat()===BarcodeFormat$1.EAN_13&&Kt.getText().charAt(0)==="0",rr=_e==null?null:_e.get(DecodeHintType$1.POSSIBLE_FORMATS),or=rr==null||rr.includes(BarcodeFormat$1.UPC_A);if(nr&&or){var hr=Kt.getRawBytes(),fr=new Result(Kt.getText().substring(1),hr,hr?hr.length:null,Kt.getResultPoints(),BarcodeFormat$1.UPC_A);return fr.putAllMetadata(Kt.getResultMetadata()),fr}return Kt}catch{}}}catch(yr){ct={error:yr}}finally{try{Ut&&!Ut.done&&(Mt=Ft.return)&&Mt.call(Ft)}finally{if(ct)throw ct.error}}throw new NotFoundException},i.prototype.reset=function(){var s,_;try{for(var _e=__values$y(this.readers),ct=_e.next();!ct.done;ct=_e.next())ct.value.reset()}catch(Mt){s={error:Mt}}finally{try{ct&&!ct.done&&(_=_e.return)&&_.call(_e)}finally{if(s)throw s.error}}},i}(OneDReader),__extends$F=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}(),CodaBarReader=function(o){function i(){var s=o!==null&&o.apply(this,arguments)||this;return s.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},s}return __extends$F(i,o),i.prototype.decodeRow=function(s,_,_e){var ct=this.getValidRowData(_);if(!ct)throw new NotFoundException;var Mt=this.codaBarDecodeRow(ct.row);if(!Mt)throw new NotFoundException;return new Result(Mt,null,0,[new ResultPoint(ct.left,s),new ResultPoint(ct.right,s)],BarcodeFormat$1.CODABAR,new Date().getTime())},i.prototype.getValidRowData=function(s){var _=s.toArray(),_e=_.indexOf(!0);if(_e===-1)return null;var ct=_.lastIndexOf(!0);if(ct<=_e)return null;for(var Mt=[],Ft=(_=_.slice(_e,ct+1))[0],Ut=1,Xt=1;Xt<_.length;Xt++)_[Xt]===Ft?Ut++:(Ft=_[Xt],Mt.push(Ut),Ut=1);return Mt.push(Ut),Mt.length<23&&(Mt.length+1)%8!=0?null:{row:Mt,left:_e,right:ct}},i.prototype.codaBarDecodeRow=function(s){for(var _=[],_e=Math.ceil(s.reduce(function(Ft,Ut){return(Ft+Ut)/2},0));s.length>0;){var ct=s.splice(0,8).splice(0,7).map(function(Ft){return Ft<_e?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[ct]===void 0)return null;_.push(this.CODA_BAR_CHAR_SET[ct])}var Mt=_.join("");return this.validCodaBarString(Mt)?Mt:null},i.prototype.validCodaBarString=function(s){return/^[A-D].{1,}[A-D]$/.test(s)},i}(OneDReader),__extends$E=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}(),__values$x=function(o){var i=typeof Symbol=="function"&&Symbol.iterator,s=i&&o[i],_=0;if(s)return s.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&_>=o.length&&(o=void 0),{value:o&&o[_++],done:!o}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},AbstractRSSReader=function(o){function i(){var s=o.call(this)||this;return s.decodeFinderCounters=new Int32Array(4),s.dataCharacterCounters=new Int32Array(8),s.oddRoundingErrors=new Array(4),s.evenRoundingErrors=new Array(4),s.oddCounts=new Array(s.dataCharacterCounters.length/2),s.evenCounts=new Array(s.dataCharacterCounters.length/2),s}return __extends$E(i,o),i.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},i.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},i.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},i.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},i.prototype.getOddCounts=function(){return this.oddCounts},i.prototype.getEvenCounts=function(){return this.evenCounts},i.prototype.parseFinderValue=function(s,_){for(var _e=0;_e<_.length;_e++)if(OneDReader.patternMatchVariance(s,_[_e],i.MAX_INDIVIDUAL_VARIANCE)<i.MAX_AVG_VARIANCE)return _e;throw new NotFoundException},i.count=function(s){return MathUtils.sum(new Int32Array(s))},i.increment=function(s,_){for(var _e=0,ct=_[0],Mt=1;Mt<s.length;Mt++)_[Mt]>ct&&(ct=_[Mt],_e=Mt);s[_e]++},i.decrement=function(s,_){for(var _e=0,ct=_[0],Mt=1;Mt<s.length;Mt++)_[Mt]<ct&&(ct=_[Mt],_e=Mt);s[_e]--},i.isFinderPattern=function(s){var _,_e,ct=s[0]+s[1],Mt=ct/(ct+s[2]+s[3]);if(Mt>=i.MIN_FINDER_PATTERN_RATIO&&Mt<=i.MAX_FINDER_PATTERN_RATIO){var Ft=Number.MAX_SAFE_INTEGER,Ut=Number.MIN_SAFE_INTEGER;try{for(var Xt=__values$x(s),Kt=Xt.next();!Kt.done;Kt=Xt.next()){var nr=Kt.value;nr>Ut&&(Ut=nr),nr<Ft&&(Ft=nr)}}catch(rr){_={error:rr}}finally{try{Kt&&!Kt.done&&(_e=Xt.return)&&_e.call(Xt)}finally{if(_)throw _.error}}return Ut<10*Ft}return!1},i.MAX_AVG_VARIANCE=.2,i.MAX_INDIVIDUAL_VARIANCE=.45,i.MIN_FINDER_PATTERN_RATIO=9.5/12,i.MAX_FINDER_PATTERN_RATIO=12.5/14,i}(OneDReader),DataCharacter=function(){function o(i,s){this.value=i,this.checksumPortion=s}return o.prototype.getValue=function(){return this.value},o.prototype.getChecksumPortion=function(){return this.checksumPortion},o.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},o.prototype.equals=function(i){if(!(i instanceof o))return!1;var s=i;return this.value===s.value&&this.checksumPortion===s.checksumPortion},o.prototype.hashCode=function(){return this.value^this.checksumPortion},o}(),FinderPattern$1=function(){function o(i,s,_,_e,ct){this.value=i,this.startEnd=s,this.value=i,this.startEnd=s,this.resultPoints=new Array,this.resultPoints.push(new ResultPoint(_,ct)),this.resultPoints.push(new ResultPoint(_e,ct))}return o.prototype.getValue=function(){return this.value},o.prototype.getStartEnd=function(){return this.startEnd},o.prototype.getResultPoints=function(){return this.resultPoints},o.prototype.equals=function(i){if(!(i instanceof o))return!1;var s=i;return this.value===s.value},o.prototype.hashCode=function(){return this.value},o}(),__values$w=function(o){var i=typeof Symbol=="function"&&Symbol.iterator,s=i&&o[i],_=0;if(s)return s.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&_>=o.length&&(o=void 0),{value:o&&o[_++],done:!o}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},RSSUtils=function(){function o(){}return o.getRSSvalue=function(i,s,_){var _e,ct,Mt=0;try{for(var Ft=__values$w(i),Ut=Ft.next();!Ut.done;Ut=Ft.next())Mt+=Ut.value}catch(Lr){_e={error:Lr}}finally{try{Ut&&!Ut.done&&(ct=Ft.return)&&ct.call(Ft)}finally{if(_e)throw _e.error}}for(var Xt=0,Kt=0,nr=i.length,rr=0;rr<nr-1;rr++){var or=void 0;for(or=1,Kt|=1<<rr;or<i[rr];or++,Kt&=~(1<<rr)){var hr=o.combins(Mt-or-1,nr-rr-2);if(_&&Kt===0&&Mt-or-(nr-rr-1)>=nr-rr-1&&(hr-=o.combins(Mt-or-(nr-rr),nr-rr-2)),nr-rr-1>1){for(var fr=0,yr=Mt-or-(nr-rr-2);yr>s;yr--)fr+=o.combins(Mt-or-yr-1,nr-rr-3);hr-=fr*(nr-1-rr)}else Mt-or>s&&hr--;Xt+=hr}Mt-=or}return Xt},o.combins=function(i,s){var _,_e;i-s>s?(_e=s,_=i-s):(_e=i-s,_=s);for(var ct=1,Mt=1,Ft=i;Ft>_;Ft--)ct*=Ft,Mt<=_e&&(ct/=Mt,Mt++);for(;Mt<=_e;)ct/=Mt,Mt++;return ct},o}(),BitArrayBuilder=function(){function o(){}return o.buildBitArray=function(i){var s=2*i.length-1;i[i.length-1].getRightChar()==null&&(s-=1);for(var _=new BitArray(12*s),_e=0,ct=i[0].getRightChar().getValue(),Mt=11;Mt>=0;--Mt)ct&1<<Mt&&_.set(_e),_e++;for(Mt=1;Mt<i.length;++Mt){for(var Ft=i[Mt],Ut=Ft.getLeftChar().getValue(),Xt=11;Xt>=0;--Xt)Ut&1<<Xt&&_.set(_e),_e++;if(Ft.getRightChar()!==null){var Kt=Ft.getRightChar().getValue();for(Xt=11;Xt>=0;--Xt)Kt&1<<Xt&&_.set(_e),_e++}}return _},o}(),BlockParsedResult=function(){function o(i,s){s?this.decodedInformation=null:(this.finished=i,this.decodedInformation=s)}return o.prototype.getDecodedInformation=function(){return this.decodedInformation},o.prototype.isFinished=function(){return this.finished},o}(),DecodedObject=function(){function o(i){this.newPosition=i}return o.prototype.getNewPosition=function(){return this.newPosition},o}(),__extends$D=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}(),DecodedChar=function(o){function i(s,_){var _e=o.call(this,s)||this;return _e.value=_,_e}return __extends$D(i,o),i.prototype.getValue=function(){return this.value},i.prototype.isFNC1=function(){return this.value===i.FNC1},i.FNC1="$",i}(DecodedObject),__extends$C=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}(),DecodedInformation=function(o){function i(s,_,_e){var ct=o.call(this,s)||this;return _e?(ct.remaining=!0,ct.remainingValue=ct.remainingValue):(ct.remaining=!1,ct.remainingValue=0),ct.newString=_,ct}return __extends$C(i,o),i.prototype.getNewString=function(){return this.newString},i.prototype.isRemaining=function(){return this.remaining},i.prototype.getRemainingValue=function(){return this.remainingValue},i}(DecodedObject),__extends$B=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}(),DecodedNumeric=function(o){function i(s,_,_e){var ct=o.call(this,s)||this;if(_<0||_>10||_e<0||_e>10)throw new FormatException;return ct.firstDigit=_,ct.secondDigit=_e,ct}return __extends$B(i,o),i.prototype.getFirstDigit=function(){return this.firstDigit},i.prototype.getSecondDigit=function(){return this.secondDigit},i.prototype.getValue=function(){return 10*this.firstDigit+this.secondDigit},i.prototype.isFirstDigitFNC1=function(){return this.firstDigit===i.FNC1},i.prototype.isSecondDigitFNC1=function(){return this.secondDigit===i.FNC1},i.prototype.isAnyFNC1=function(){return this.firstDigit===i.FNC1||this.secondDigit===i.FNC1},i.FNC1=10,i}(DecodedObject),__values$v=function(o){var i=typeof Symbol=="function"&&Symbol.iterator,s=i&&o[i],_=0;if(s)return s.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&_>=o.length&&(o=void 0),{value:o&&o[_++],done:!o}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},FieldParser=function(){function o(){}return o.parseFieldsInGeneralPurpose=function(i){var s,_,_e,ct,Mt,Ft,Ut,Xt;if(!i)return null;if(i.length<2)throw new NotFoundException;var Kt=i.substring(0,2);try{for(var nr=__values$v(o.TWO_DIGIT_DATA_LENGTH),rr=nr.next();!rr.done;rr=nr.next())if((ro=rr.value)[0]===Kt)return ro[1]===o.VARIABLE_LENGTH?o.processVariableAI(2,ro[2],i):o.processFixedAI(2,ro[1],i)}catch(no){s={error:no}}finally{try{rr&&!rr.done&&(_=nr.return)&&_.call(nr)}finally{if(s)throw s.error}}if(i.length<3)throw new NotFoundException;var or=i.substring(0,3);try{for(var hr=__values$v(o.THREE_DIGIT_DATA_LENGTH),fr=hr.next();!fr.done;fr=hr.next())if((ro=fr.value)[0]===or)return ro[1]===o.VARIABLE_LENGTH?o.processVariableAI(3,ro[2],i):o.processFixedAI(3,ro[1],i)}catch(no){_e={error:no}}finally{try{fr&&!fr.done&&(ct=hr.return)&&ct.call(hr)}finally{if(_e)throw _e.error}}try{for(var yr=__values$v(o.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),Lr=yr.next();!Lr.done;Lr=yr.next())if((ro=Lr.value)[0]===or)return ro[1]===o.VARIABLE_LENGTH?o.processVariableAI(4,ro[2],i):o.processFixedAI(4,ro[1],i)}catch(no){Mt={error:no}}finally{try{Lr&&!Lr.done&&(Ft=yr.return)&&Ft.call(yr)}finally{if(Mt)throw Mt.error}}if(i.length<4)throw new NotFoundException;var Br=i.substring(0,4);try{for(var Vr=__values$v(o.FOUR_DIGIT_DATA_LENGTH),Wr=Vr.next();!Wr.done;Wr=Vr.next()){var ro;if((ro=Wr.value)[0]===Br)return ro[1]===o.VARIABLE_LENGTH?o.processVariableAI(4,ro[2],i):o.processFixedAI(4,ro[1],i)}}catch(no){Ut={error:no}}finally{try{Wr&&!Wr.done&&(Xt=Vr.return)&&Xt.call(Vr)}finally{if(Ut)throw Ut.error}}throw new NotFoundException},o.processFixedAI=function(i,s,_){if(_.length<i)throw new NotFoundException;var _e=_.substring(0,i);if(_.length<i+s)throw new NotFoundException;var ct=_.substring(i,i+s),Mt=_.substring(i+s),Ft="("+_e+")"+ct,Ut=o.parseFieldsInGeneralPurpose(Mt);return Ut==null?Ft:Ft+Ut},o.processVariableAI=function(i,s,_){var _e,ct=_.substring(0,i);_e=_.length<i+s?_.length:i+s;var Mt=_.substring(i,_e),Ft=_.substring(_e),Ut="("+ct+")"+Mt,Xt=o.parseFieldsInGeneralPurpose(Ft);return Xt==null?Ut:Ut+Xt},o.VARIABLE_LENGTH=[],o.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",o.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",o.VARIABLE_LENGTH,20],["22",o.VARIABLE_LENGTH,29],["30",o.VARIABLE_LENGTH,8],["37",o.VARIABLE_LENGTH,8],["90",o.VARIABLE_LENGTH,30],["91",o.VARIABLE_LENGTH,30],["92",o.VARIABLE_LENGTH,30],["93",o.VARIABLE_LENGTH,30],["94",o.VARIABLE_LENGTH,30],["95",o.VARIABLE_LENGTH,30],["96",o.VARIABLE_LENGTH,30],["97",o.VARIABLE_LENGTH,3],["98",o.VARIABLE_LENGTH,30],["99",o.VARIABLE_LENGTH,30]],o.THREE_DIGIT_DATA_LENGTH=[["240",o.VARIABLE_LENGTH,30],["241",o.VARIABLE_LENGTH,30],["242",o.VARIABLE_LENGTH,6],["250",o.VARIABLE_LENGTH,30],["251",o.VARIABLE_LENGTH,30],["253",o.VARIABLE_LENGTH,17],["254",o.VARIABLE_LENGTH,20],["400",o.VARIABLE_LENGTH,30],["401",o.VARIABLE_LENGTH,30],["402",17],["403",o.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",o.VARIABLE_LENGTH,20],["421",o.VARIABLE_LENGTH,15],["422",3],["423",o.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],o.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",o.VARIABLE_LENGTH,15],["391",o.VARIABLE_LENGTH,18],["392",o.VARIABLE_LENGTH,15],["393",o.VARIABLE_LENGTH,18],["703",o.VARIABLE_LENGTH,30]],o.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",o.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",o.VARIABLE_LENGTH,20],["8003",o.VARIABLE_LENGTH,30],["8004",o.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",o.VARIABLE_LENGTH,30],["8008",o.VARIABLE_LENGTH,12],["8018",18],["8020",o.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",o.VARIABLE_LENGTH,70],["8200",o.VARIABLE_LENGTH,70]],o}(),GeneralAppIdDecoder=function(){function o(i){this.buffer=new StringBuilder,this.information=i}return o.prototype.decodeAllCodes=function(i,s){for(var _=s,_e=null;;){var ct=this.decodeGeneralPurposeField(_,_e),Mt=FieldParser.parseFieldsInGeneralPurpose(ct.getNewString());if(Mt!=null&&i.append(Mt),_e=ct.isRemaining()?""+ct.getRemainingValue():null,_===ct.getNewPosition())break;_=ct.getNewPosition()}return i.toString()},o.prototype.isStillNumeric=function(i){if(i+7>this.information.getSize())return i+4<=this.information.getSize();for(var s=i;s<i+3;++s)if(this.information.get(s))return!0;return this.information.get(i+3)},o.prototype.decodeNumeric=function(i){if(i+7>this.information.getSize()){var s=this.extractNumericValueFromBitArray(i,4);return new DecodedNumeric(this.information.getSize(),s===0?DecodedNumeric.FNC1:s-1,DecodedNumeric.FNC1)}var _=this.extractNumericValueFromBitArray(i,7);return new DecodedNumeric(i+7,(_-8)/11,(_-8)%11)},o.prototype.extractNumericValueFromBitArray=function(i,s){return o.extractNumericValueFromBitArray(this.information,i,s)},o.extractNumericValueFromBitArray=function(i,s,_){for(var _e=0,ct=0;ct<_;++ct)i.get(s+ct)&&(_e|=1<<_-ct-1);return _e},o.prototype.decodeGeneralPurposeField=function(i,s){this.buffer.setLengthToZero(),s!=null&&this.buffer.append(s),this.current.setPosition(i);var _=this.parseBlocks();return _!=null&&_.isRemaining()?new DecodedInformation(this.current.getPosition(),this.buffer.toString(),_.getRemainingValue()):new DecodedInformation(this.current.getPosition(),this.buffer.toString())},o.prototype.parseBlocks=function(){var i,s;do{var _=this.current.getPosition();if(i=this.current.isAlpha()?(s=this.parseAlphaBlock()).isFinished():this.current.isIsoIec646()?(s=this.parseIsoIec646Block()).isFinished():(s=this.parseNumericBlock()).isFinished(),_===this.current.getPosition()&&!i)break}while(!i);return s.getDecodedInformation()},o.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var i=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFirstDigitFNC1()){var s=void 0;return s=i.isSecondDigitFNC1()?new DecodedInformation(this.current.getPosition(),this.buffer.toString()):new DecodedInformation(this.current.getPosition(),this.buffer.toString(),i.getSecondDigit()),new BlockParsedResult(!0,s)}if(this.buffer.append(i.getFirstDigit()),i.isSecondDigitFNC1())return s=new DecodedInformation(this.current.getPosition(),this.buffer.toString()),new BlockParsedResult(!0,s);this.buffer.append(i.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new BlockParsedResult(!1)},o.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var i=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){var s=new DecodedInformation(this.current.getPosition(),this.buffer.toString());return new BlockParsedResult(!0,s)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new BlockParsedResult(!1)},o.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var i=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){var s=new DecodedInformation(this.current.getPosition(),this.buffer.toString());return new BlockParsedResult(!0,s)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new BlockParsedResult(!1)},o.prototype.isStillIsoIec646=function(i){if(i+5>this.information.getSize())return!1;var s=this.extractNumericValueFromBitArray(i,5);if(s>=5&&s<16)return!0;if(i+7>this.information.getSize())return!1;var _=this.extractNumericValueFromBitArray(i,7);if(_>=64&&_<116)return!0;if(i+8>this.information.getSize())return!1;var _e=this.extractNumericValueFromBitArray(i,8);return _e>=232&&_e<253},o.prototype.decodeIsoIec646=function(i){var s=this.extractNumericValueFromBitArray(i,5);if(s===15)return new DecodedChar(i+5,DecodedChar.FNC1);if(s>=5&&s<15)return new DecodedChar(i+5,"0"+(s-5));var _,_e=this.extractNumericValueFromBitArray(i,7);if(_e>=64&&_e<90)return new DecodedChar(i+7,""+(_e+1));if(_e>=90&&_e<116)return new DecodedChar(i+7,""+(_e+7));switch(this.extractNumericValueFromBitArray(i,8)){case 232:_="!";break;case 233:_='"';break;case 234:_="%";break;case 235:_="&";break;case 236:_="'";break;case 237:_="(";break;case 238:_=")";break;case 239:_="*";break;case 240:_="+";break;case 241:_=",";break;case 242:_="-";break;case 243:_=".";break;case 244:_="/";break;case 245:_=":";break;case 246:_=";";break;case 247:_="<";break;case 248:_="=";break;case 249:_=">";break;case 250:_="?";break;case 251:_="_";break;case 252:_=" ";break;default:throw new FormatException}return new DecodedChar(i+8,_)},o.prototype.isStillAlpha=function(i){if(i+5>this.information.getSize())return!1;var s=this.extractNumericValueFromBitArray(i,5);if(s>=5&&s<16)return!0;if(i+6>this.information.getSize())return!1;var _=this.extractNumericValueFromBitArray(i,6);return _>=16&&_<63},o.prototype.decodeAlphanumeric=function(i){var s=this.extractNumericValueFromBitArray(i,5);if(s===15)return new DecodedChar(i+5,DecodedChar.FNC1);if(s>=5&&s<15)return new DecodedChar(i+5,"0"+(s-5));var _,_e=this.extractNumericValueFromBitArray(i,6);if(_e>=32&&_e<58)return new DecodedChar(i+6,""+(_e+33));switch(_e){case 58:_="*";break;case 59:_=",";break;case 60:_="-";break;case 61:_=".";break;case 62:_="/";break;default:throw new IllegalStateException("Decoding invalid alphanumeric value: "+_e)}return new DecodedChar(i+6,_)},o.prototype.isAlphaTo646ToAlphaLatch=function(i){if(i+1>this.information.getSize())return!1;for(var s=0;s<5&&s+i<this.information.getSize();++s)if(s===2){if(!this.information.get(i+2))return!1}else if(this.information.get(i+s))return!1;return!0},o.prototype.isAlphaOr646ToNumericLatch=function(i){if(i+3>this.information.getSize())return!1;for(var s=i;s<i+3;++s)if(this.information.get(s))return!1;return!0},o.prototype.isNumericToAlphaNumericLatch=function(i){if(i+1>this.information.getSize())return!1;for(var s=0;s<4&&s+i<this.information.getSize();++s)if(this.information.get(i+s))return!1;return!0},o}(),AbstractExpandedDecoder=function(){function o(i){this.information=i,this.generalDecoder=new GeneralAppIdDecoder(i)}return o.prototype.getInformation=function(){return this.information},o.prototype.getGeneralDecoder=function(){return this.generalDecoder},o}(),__extends$A=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}(),AI01decoder=function(o){function i(s){return o.call(this,s)||this}return __extends$A(i,o),i.prototype.encodeCompressedGtin=function(s,_){s.append("(01)");var _e=s.length();s.append("9"),this.encodeCompressedGtinWithoutAI(s,_,_e)},i.prototype.encodeCompressedGtinWithoutAI=function(s,_,_e){for(var ct=0;ct<4;++ct){var Mt=this.getGeneralDecoder().extractNumericValueFromBitArray(_+10*ct,10);Mt/100==0&&s.append("0"),Mt/10==0&&s.append("0"),s.append(Mt)}i.appendCheckDigit(s,_e)},i.appendCheckDigit=function(s,_){for(var _e=0,ct=0;ct<13;ct++){var Mt=s.charAt(ct+_).charCodeAt(0)-48;_e+=1&ct?Mt:3*Mt}(_e=10-_e%10)===10&&(_e=0),s.append(_e)},i.GTIN_SIZE=40,i}(AbstractExpandedDecoder),__extends$z=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}(),AI01AndOtherAIs=function(o){function i(s){return o.call(this,s)||this}return __extends$z(i,o),i.prototype.parseInformation=function(){var s=new StringBuilder;s.append("(01)");var _=s.length(),_e=this.getGeneralDecoder().extractNumericValueFromBitArray(i.HEADER_SIZE,4);return s.append(_e),this.encodeCompressedGtinWithoutAI(s,i.HEADER_SIZE+4,_),this.getGeneralDecoder().decodeAllCodes(s,i.HEADER_SIZE+44)},i.HEADER_SIZE=4,i}(AI01decoder),__extends$y=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}(),AnyAIDecoder=function(o){function i(s){return o.call(this,s)||this}return __extends$y(i,o),i.prototype.parseInformation=function(){var s=new StringBuilder;return this.getGeneralDecoder().decodeAllCodes(s,i.HEADER_SIZE)},i.HEADER_SIZE=5,i}(AbstractExpandedDecoder),__extends$x=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}(),AI01weightDecoder=function(o){function i(s){return o.call(this,s)||this}return __extends$x(i,o),i.prototype.encodeCompressedWeight=function(s,_,_e){var ct=this.getGeneralDecoder().extractNumericValueFromBitArray(_,_e);this.addWeightCode(s,ct);for(var Mt=this.checkWeight(ct),Ft=1e5,Ut=0;Ut<5;++Ut)Mt/Ft==0&&s.append("0"),Ft/=10;s.append(Mt)},i}(AI01decoder),__extends$w=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}(),AI013x0xDecoder=function(o){function i(s){return o.call(this,s)||this}return __extends$w(i,o),i.prototype.parseInformation=function(){if(this.getInformation().getSize()!==i.HEADER_SIZE+AI01weightDecoder.GTIN_SIZE+i.WEIGHT_SIZE)throw new NotFoundException;var s=new StringBuilder;return this.encodeCompressedGtin(s,i.HEADER_SIZE),this.encodeCompressedWeight(s,i.HEADER_SIZE+AI01weightDecoder.GTIN_SIZE,i.WEIGHT_SIZE),s.toString()},i.HEADER_SIZE=5,i.WEIGHT_SIZE=15,i}(AI01weightDecoder),__extends$v=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}(),AI013103decoder=function(o){function i(s){return o.call(this,s)||this}return __extends$v(i,o),i.prototype.addWeightCode=function(s,_){s.append("(3103)")},i.prototype.checkWeight=function(s){return s},i}(AI013x0xDecoder),__extends$u=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}(),AI01320xDecoder=function(o){function i(s){return o.call(this,s)||this}return __extends$u(i,o),i.prototype.addWeightCode=function(s,_){_<1e4?s.append("(3202)"):s.append("(3203)")},i.prototype.checkWeight=function(s){return s<1e4?s:s-1e4},i}(AI013x0xDecoder),__extends$t=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}(),AI01392xDecoder=function(o){function i(s){return o.call(this,s)||this}return __extends$t(i,o),i.prototype.parseInformation=function(){if(this.getInformation().getSize()<i.HEADER_SIZE+AI01decoder.GTIN_SIZE)throw new NotFoundException;var s=new StringBuilder;this.encodeCompressedGtin(s,i.HEADER_SIZE);var _=this.getGeneralDecoder().extractNumericValueFromBitArray(i.HEADER_SIZE+AI01decoder.GTIN_SIZE,i.LAST_DIGIT_SIZE);s.append("(392"),s.append(_),s.append(")");var _e=this.getGeneralDecoder().decodeGeneralPurposeField(i.HEADER_SIZE+AI01decoder.GTIN_SIZE+i.LAST_DIGIT_SIZE,null);return s.append(_e.getNewString()),s.toString()},i.HEADER_SIZE=8,i.LAST_DIGIT_SIZE=2,i}(AI01decoder),__extends$s=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}(),AI01393xDecoder=function(o){function i(s){return o.call(this,s)||this}return __extends$s(i,o),i.prototype.parseInformation=function(){if(this.getInformation().getSize()<i.HEADER_SIZE+AI01decoder.GTIN_SIZE)throw new NotFoundException;var s=new StringBuilder;this.encodeCompressedGtin(s,i.HEADER_SIZE);var _=this.getGeneralDecoder().extractNumericValueFromBitArray(i.HEADER_SIZE+AI01decoder.GTIN_SIZE,i.LAST_DIGIT_SIZE);s.append("(393"),s.append(_),s.append(")");var _e=this.getGeneralDecoder().extractNumericValueFromBitArray(i.HEADER_SIZE+AI01decoder.GTIN_SIZE+i.LAST_DIGIT_SIZE,i.FIRST_THREE_DIGITS_SIZE);_e/100==0&&s.append("0"),_e/10==0&&s.append("0"),s.append(_e);var ct=this.getGeneralDecoder().decodeGeneralPurposeField(i.HEADER_SIZE+AI01decoder.GTIN_SIZE+i.LAST_DIGIT_SIZE+i.FIRST_THREE_DIGITS_SIZE,null);return s.append(ct.getNewString()),s.toString()},i.HEADER_SIZE=8,i.LAST_DIGIT_SIZE=2,i.FIRST_THREE_DIGITS_SIZE=10,i}(AI01decoder),__extends$r=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}(),AI013x0x1xDecoder=function(o){function i(s,_,_e){var ct=o.call(this,s)||this;return ct.dateCode=_e,ct.firstAIdigits=_,ct}return __extends$r(i,o),i.prototype.parseInformation=function(){if(this.getInformation().getSize()!==i.HEADER_SIZE+i.GTIN_SIZE+i.WEIGHT_SIZE+i.DATE_SIZE)throw new NotFoundException;var s=new StringBuilder;return this.encodeCompressedGtin(s,i.HEADER_SIZE),this.encodeCompressedWeight(s,i.HEADER_SIZE+i.GTIN_SIZE,i.WEIGHT_SIZE),this.encodeCompressedDate(s,i.HEADER_SIZE+i.GTIN_SIZE+i.WEIGHT_SIZE),s.toString()},i.prototype.encodeCompressedDate=function(s,_){var _e=this.getGeneralDecoder().extractNumericValueFromBitArray(_,i.DATE_SIZE);if(_e!==38400){s.append("("),s.append(this.dateCode),s.append(")");var ct=_e%32,Mt=(_e/=32)%12+1,Ft=_e/=12;Ft/10==0&&s.append("0"),s.append(Ft),Mt/10==0&&s.append("0"),s.append(Mt),ct/10==0&&s.append("0"),s.append(ct)}},i.prototype.addWeightCode=function(s,_){s.append("("),s.append(this.firstAIdigits),s.append(_/1e5),s.append(")")},i.prototype.checkWeight=function(s){return s%1e5},i.HEADER_SIZE=8,i.WEIGHT_SIZE=20,i.DATE_SIZE=16,i}(AI01weightDecoder);function createDecoder(o){try{if(o.get(1))return new AI01AndOtherAIs(o);if(!o.get(2))return new AnyAIDecoder(o);switch(GeneralAppIdDecoder.extractNumericValueFromBitArray(o,1,4)){case 4:return new AI013103decoder(o);case 5:return new AI01320xDecoder(o)}switch(GeneralAppIdDecoder.extractNumericValueFromBitArray(o,1,5)){case 12:return new AI01392xDecoder(o);case 13:return new AI01393xDecoder(o)}switch(GeneralAppIdDecoder.extractNumericValueFromBitArray(o,1,7)){case 56:return new AI013x0x1xDecoder(o,"310","11");case 57:return new AI013x0x1xDecoder(o,"320","11");case 58:return new AI013x0x1xDecoder(o,"310","13");case 59:return new AI013x0x1xDecoder(o,"320","13");case 60:return new AI013x0x1xDecoder(o,"310","15");case 61:return new AI013x0x1xDecoder(o,"320","15");case 62:return new AI013x0x1xDecoder(o,"310","17");case 63:return new AI013x0x1xDecoder(o,"320","17")}}catch(i){throw console.log(i),new IllegalStateException("unknown decoder: "+o)}}var ExpandedPair=function(){function o(i,s,_,_e){this.leftchar=i,this.rightchar=s,this.finderpattern=_,this.maybeLast=_e}return o.prototype.mayBeLast=function(){return this.maybeLast},o.prototype.getLeftChar=function(){return this.leftchar},o.prototype.getRightChar=function(){return this.rightchar},o.prototype.getFinderPattern=function(){return this.finderpattern},o.prototype.mustBeLast=function(){return this.rightchar==null},o.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},o.equals=function(i,s){return i instanceof o&&o.equalsOrNull(i.leftchar,s.leftchar)&&o.equalsOrNull(i.rightchar,s.rightchar)&&o.equalsOrNull(i.finderpattern,s.finderpattern)},o.equalsOrNull=function(i,s){return i===null?s===null:o.equals(i,s)},o.prototype.hashCode=function(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()},o}(),ExpandedRow=function(){function o(i,s,_){this.pairs=i,this.rowNumber=s,this.wasReversed=_}return o.prototype.getPairs=function(){return this.pairs},o.prototype.getRowNumber=function(){return this.rowNumber},o.prototype.isReversed=function(){return this.wasReversed},o.prototype.isEquivalent=function(i){return this.checkEqualitity(this,i)},o.prototype.toString=function(){return"{ "+this.pairs+" }"},o.prototype.equals=function(i,s){return i instanceof o&&this.checkEqualitity(i,s)&&i.wasReversed===s.wasReversed},o.prototype.checkEqualitity=function(i,s){var _;if(i&&s)return i.forEach(function(_e,ct){s.forEach(function(Mt){_e.getLeftChar().getValue()===Mt.getLeftChar().getValue()&&_e.getRightChar().getValue()===Mt.getRightChar().getValue()&&_e.getFinderPatter().getValue()===Mt.getFinderPatter().getValue()&&(_=!0)})}),_},o}(),__extends$q=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}(),__values$u=function(o){var i=typeof Symbol=="function"&&Symbol.iterator,s=i&&o[i],_=0;if(s)return s.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&_>=o.length&&(o=void 0),{value:o&&o[_++],done:!o}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},RSSExpandedReader=function(o){function i(){var s=o!==null&&o.apply(this,arguments)||this;return s.pairs=new Array(i.MAX_PAIRS),s.rows=new Array,s.startEnd=[2],s}return __extends$q(i,o),i.prototype.decodeRow=function(s,_,_e){this.pairs.length=0,this.startFromEven=!1;try{return i.constructResult(this.decodeRow2pairs(s,_))}catch{}return this.pairs.length=0,this.startFromEven=!0,i.constructResult(this.decodeRow2pairs(s,_))},i.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},i.prototype.decodeRow2pairs=function(s,_){for(var _e,ct=!1;!ct;)try{this.pairs.push(this.retrieveNextPair(_,this.pairs,s))}catch(Ft){if(Ft instanceof NotFoundException){if(!this.pairs.length)throw new NotFoundException;ct=!0}}if(this.checkChecksum())return this.pairs;if(_e=!!this.rows.length,this.storeRow(s,!1),_e){var Mt=this.checkRowsBoolean(!1);if(Mt!=null||(Mt=this.checkRowsBoolean(!0))!=null)return Mt}throw new NotFoundException},i.prototype.checkRowsBoolean=function(s){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,s&&(this.rows=this.rows.reverse());var _=null;try{_=this.checkRows(new Array,0)}catch(_e){console.log(_e)}return s&&(this.rows=this.rows.reverse()),_},i.prototype.checkRows=function(s,_){for(var _e,ct,Mt=_;Mt<this.rows.length;Mt++){var Ft=this.rows[Mt];this.pairs.length=0;try{for(var Ut=(_e=void 0,__values$u(s)),Xt=Ut.next();!Xt.done;Xt=Ut.next()){var Kt=Xt.value;this.pairs.push(Kt.getPairs())}}catch(rr){_e={error:rr}}finally{try{Xt&&!Xt.done&&(ct=Ut.return)&&ct.call(Ut)}finally{if(_e)throw _e.error}}if(this.pairs.push(Ft.getPairs()),i.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var nr=new Array(s);nr.push(Ft);try{return this.checkRows(nr,Mt+1)}catch(rr){console.log(rr)}}}throw new NotFoundException},i.isValidSequence=function(s){var _,_e;try{for(var ct=__values$u(i.FINDER_PATTERN_SEQUENCES),Mt=ct.next();!Mt.done;Mt=ct.next()){var Ft=Mt.value;if(!(s.length>Ft.length)){for(var Ut=!0,Xt=0;Xt<s.length;Xt++)if(s[Xt].getFinderPattern().getValue()!==Ft[Xt]){Ut=!1;break}if(Ut)return!0}}}catch(Kt){_={error:Kt}}finally{try{Mt&&!Mt.done&&(_e=ct.return)&&_e.call(ct)}finally{if(_)throw _.error}}return!1},i.prototype.storeRow=function(s,_){for(var _e=0,ct=!1,Mt=!1;_e<this.rows.length;){var Ft=this.rows[_e];if(Ft.getRowNumber()>s){Mt=Ft.isEquivalent(this.pairs);break}ct=Ft.isEquivalent(this.pairs),_e++}Mt||ct||i.isPartialRow(this.pairs,this.rows)||(this.rows.push(_e,new ExpandedRow(this.pairs,s,_)),this.removePartialRows(this.pairs,this.rows))},i.prototype.removePartialRows=function(s,_){var _e,ct,Mt,Ft,Ut,Xt;try{for(var Kt=__values$u(_),nr=Kt.next();!nr.done;nr=Kt.next()){var rr=nr.value;if(rr.getPairs().length!==s.length)try{for(var or=(Mt=void 0,__values$u(rr.getPairs())),hr=or.next();!hr.done;hr=or.next()){var fr=hr.value,yr=!1;try{for(var Lr=(Ut=void 0,__values$u(s)),Br=Lr.next();!Br.done;Br=Lr.next()){var Vr=Br.value;if(ExpandedPair.equals(fr,Vr)){yr=!0;break}}}catch(Wr){Ut={error:Wr}}finally{try{Br&&!Br.done&&(Xt=Lr.return)&&Xt.call(Lr)}finally{if(Ut)throw Ut.error}}}}catch(Wr){Mt={error:Wr}}finally{try{hr&&!hr.done&&(Ft=or.return)&&Ft.call(or)}finally{if(Mt)throw Mt.error}}}}catch(Wr){_e={error:Wr}}finally{try{nr&&!nr.done&&(ct=Kt.return)&&ct.call(Kt)}finally{if(_e)throw _e.error}}},i.isPartialRow=function(s,_){var _e,ct,Mt,Ft,Ut,Xt;try{for(var Kt=__values$u(_),nr=Kt.next();!nr.done;nr=Kt.next()){var rr=nr.value,or=!0;try{for(var hr=(Mt=void 0,__values$u(s)),fr=hr.next();!fr.done;fr=hr.next()){var yr=fr.value,Lr=!1;try{for(var Br=(Ut=void 0,__values$u(rr.getPairs())),Vr=Br.next();!Vr.done;Vr=Br.next()){var Wr=Vr.value;if(yr.equals(Wr)){Lr=!0;break}}}catch(ro){Ut={error:ro}}finally{try{Vr&&!Vr.done&&(Xt=Br.return)&&Xt.call(Br)}finally{if(Ut)throw Ut.error}}if(!Lr){or=!1;break}}}catch(ro){Mt={error:ro}}finally{try{fr&&!fr.done&&(Ft=hr.return)&&Ft.call(hr)}finally{if(Mt)throw Mt.error}}if(or)return!0}}catch(ro){_e={error:ro}}finally{try{nr&&!nr.done&&(ct=Kt.return)&&ct.call(Kt)}finally{if(_e)throw _e.error}}return!1},i.prototype.getRows=function(){return this.rows},i.constructResult=function(s){var _=createDecoder(BitArrayBuilder.buildBitArray(s)).parseInformation(),_e=s[0].getFinderPattern().getResultPoints(),ct=s[s.length-1].getFinderPattern().getResultPoints(),Mt=[_e[0],_e[1],ct[0],ct[1]];return new Result(_,null,null,Mt,BarcodeFormat$1.RSS_EXPANDED,null)},i.prototype.checkChecksum=function(){var s=this.pairs.get(0),_=s.getLeftChar(),_e=s.getRightChar();if(_e===null)return!1;for(var ct=_e.getChecksumPortion(),Mt=2,Ft=1;Ft<this.pairs.size();++Ft){var Ut=this.pairs.get(Ft);ct+=Ut.getLeftChar().getChecksumPortion(),Mt++;var Xt=Ut.getRightChar();Xt!=null&&(ct+=Xt.getChecksumPortion(),Mt++)}return 211*(Mt-4)+(ct%=211)===_.getValue()},i.getNextSecondBar=function(s,_){var _e;return s.get(_)?(_e=s.getNextUnset(_),_e=s.getNextSet(_e)):(_e=s.getNextSet(_),_e=s.getNextUnset(_e)),_e},i.prototype.retrieveNextPair=function(s,_,_e){var ct,Mt=_.length%2==0;this.startFromEven&&(Mt=!Mt);var Ft=!0,Ut=-1;do this.findNextPair(s,_,Ut),(ct=this.parseFoundFinderPattern(s,_e,Mt))===null?Ut=i.getNextSecondBar(s,this.startEnd[0]):Ft=!1;while(Ft);var Xt,Kt=this.decodeDataCharacter(s,ct,Mt,!0);if(!this.isEmptyPair(_)&&_[_.length-1].mustBeLast())throw new NotFoundException;try{Xt=this.decodeDataCharacter(s,ct,Mt,!1)}catch(nr){Xt=null,console.log(nr)}return new ExpandedPair(Kt,Xt,ct,!0)},i.prototype.isEmptyPair=function(s){return s.length===0},i.prototype.findNextPair=function(s,_,_e){var ct=this.getDecodeFinderCounters();ct[0]=0,ct[1]=0,ct[2]=0,ct[3]=0;var Mt,Ft=s.getSize();_e>=0?Mt=_e:this.isEmptyPair(_)?Mt=0:Mt=_[_.length-1].getFinderPattern().getStartEnd()[1];var Ut=_.length%2!=0;this.startFromEven&&(Ut=!Ut);for(var Xt=!1;Mt<Ft&&(Xt=!s.get(Mt));)Mt++;for(var Kt=0,nr=Mt,rr=Mt;rr<Ft;rr++)if(s.get(rr)!==Xt)ct[Kt]++;else{if(Kt===3){if(Ut&&i.reverseCounters(ct),i.isFinderPattern(ct))return this.startEnd[0]=nr,void(this.startEnd[1]=rr);Ut&&i.reverseCounters(ct),nr+=ct[0]+ct[1],ct[0]=ct[2],ct[1]=ct[3],ct[2]=0,ct[3]=0,Kt--}else Kt++;ct[Kt]=1,Xt=!Xt}throw new NotFoundException},i.reverseCounters=function(s){for(var _=s.length,_e=0;_e<_/2;++_e){var ct=s[_e];s[_e]=s[_-_e-1],s[_-_e-1]=ct}},i.prototype.parseFoundFinderPattern=function(s,_,_e){var ct,Mt,Ft;if(_e){for(var Ut=this.startEnd[0]-1;Ut>=0&&!s.get(Ut);)Ut--;Ut++,ct=this.startEnd[0]-Ut,Mt=Ut,Ft=this.startEnd[1]}else Mt=this.startEnd[0],ct=(Ft=s.getNextUnset(this.startEnd[1]+1))-this.startEnd[1];var Xt,Kt=this.getDecodeFinderCounters();System.arraycopy(Kt,0,Kt,1,Kt.length-1),Kt[0]=ct;try{Xt=this.parseFinderValue(Kt,i.FINDER_PATTERNS)}catch{return null}return new FinderPattern$1(Xt,[Mt,Ft],Mt,Ft,_)},i.prototype.decodeDataCharacter=function(s,_,_e,ct){for(var Mt=this.getDataCharacterCounters(),Ft=0;Ft<Mt.length;Ft++)Mt[Ft]=0;if(ct)i.recordPatternInReverse(s,_.getStartEnd()[0],Mt);else{i.recordPattern(s,_.getStartEnd()[1],Mt);for(var Ut=0,Xt=Mt.length-1;Ut<Xt;Ut++,Xt--){var Kt=Mt[Ut];Mt[Ut]=Mt[Xt],Mt[Xt]=Kt}}var nr=MathUtils.sum(new Int32Array(Mt))/17,rr=(_.getStartEnd()[1]-_.getStartEnd()[0])/15;if(Math.abs(nr-rr)/rr>.3)throw new NotFoundException;var or=this.getOddCounts(),hr=this.getEvenCounts(),fr=this.getOddRoundingErrors(),yr=this.getEvenRoundingErrors();for(Ut=0;Ut<Mt.length;Ut++){var Lr=1*Mt[Ut]/nr,Br=Lr+.5;if(Br<1){if(Lr<.3)throw new NotFoundException;Br=1}else if(Br>8){if(Lr>8.7)throw new NotFoundException;Br=8}var Vr=Ut/2;1&Ut?(hr[Vr]=Br,yr[Vr]=Lr-Br):(or[Vr]=Br,fr[Vr]=Lr-Br)}this.adjustOddEvenCounts(17);var Wr=4*_.getValue()+(_e?0:2)+(ct?0:1)-1,ro=0,no=0;for(Ut=or.length-1;Ut>=0;Ut--){if(i.isNotA1left(_,_e,ct)){var so=i.WEIGHTS[Wr][2*Ut];no+=or[Ut]*so}ro+=or[Ut]}var ko=0;for(Ut=hr.length-1;Ut>=0;Ut--)i.isNotA1left(_,_e,ct)&&(so=i.WEIGHTS[Wr][2*Ut+1],ko+=hr[Ut]*so);var To=no+ko;if(1&ro||ro>13||ro<4)throw new NotFoundException;var oo=(13-ro)/2,No=i.SYMBOL_WIDEST[oo],As=9-No,Ks=RSSUtils.getRSSvalue(or,No,!0),vu=RSSUtils.getRSSvalue(hr,As,!1),Fu=i.EVEN_TOTAL_SUBSET[oo],Ap=i.GSUM[oo];return new DataCharacter(Ks*Fu+vu+Ap,To)},i.isNotA1left=function(s,_,_e){return!(s.getValue()===0&&_&&_e)},i.prototype.adjustOddEvenCounts=function(s){var _=MathUtils.sum(new Int32Array(this.getOddCounts())),_e=MathUtils.sum(new Int32Array(this.getEvenCounts())),ct=!1,Mt=!1;_>13?Mt=!0:_<4&&(ct=!0);var Ft=!1,Ut=!1;_e>13?Ut=!0:_e<4&&(Ft=!0);var Xt=_+_e-s,Kt=!(1&~_),nr=!(1&_e);if(Xt===1)if(Kt){if(nr)throw new NotFoundException;Mt=!0}else{if(!nr)throw new NotFoundException;Ut=!0}else if(Xt===-1)if(Kt){if(nr)throw new NotFoundException;ct=!0}else{if(!nr)throw new NotFoundException;Ft=!0}else{if(Xt!==0)throw new NotFoundException;if(Kt){if(!nr)throw new NotFoundException;_<_e?(ct=!0,Ut=!0):(Mt=!0,Ft=!0)}else if(nr)throw new NotFoundException}if(ct){if(Mt)throw new NotFoundException;i.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(Mt&&i.decrement(this.getOddCounts(),this.getOddRoundingErrors()),Ft){if(Ut)throw new NotFoundException;i.increment(this.getEvenCounts(),this.getOddRoundingErrors())}Ut&&i.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},i.SYMBOL_WIDEST=[7,5,4,3,1],i.EVEN_TOTAL_SUBSET=[4,20,52,104,204],i.GSUM=[0,348,1388,2948,3988],i.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],i.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],i.FINDER_PAT_A=0,i.FINDER_PAT_B=1,i.FINDER_PAT_C=2,i.FINDER_PAT_D=3,i.FINDER_PAT_E=4,i.FINDER_PAT_F=5,i.FINDER_PATTERN_SEQUENCES=[[i.FINDER_PAT_A,i.FINDER_PAT_A],[i.FINDER_PAT_A,i.FINDER_PAT_B,i.FINDER_PAT_B],[i.FINDER_PAT_A,i.FINDER_PAT_C,i.FINDER_PAT_B,i.FINDER_PAT_D],[i.FINDER_PAT_A,i.FINDER_PAT_E,i.FINDER_PAT_B,i.FINDER_PAT_D,i.FINDER_PAT_C],[i.FINDER_PAT_A,i.FINDER_PAT_E,i.FINDER_PAT_B,i.FINDER_PAT_D,i.FINDER_PAT_D,i.FINDER_PAT_F],[i.FINDER_PAT_A,i.FINDER_PAT_E,i.FINDER_PAT_B,i.FINDER_PAT_D,i.FINDER_PAT_E,i.FINDER_PAT_F,i.FINDER_PAT_F],[i.FINDER_PAT_A,i.FINDER_PAT_A,i.FINDER_PAT_B,i.FINDER_PAT_B,i.FINDER_PAT_C,i.FINDER_PAT_C,i.FINDER_PAT_D,i.FINDER_PAT_D],[i.FINDER_PAT_A,i.FINDER_PAT_A,i.FINDER_PAT_B,i.FINDER_PAT_B,i.FINDER_PAT_C,i.FINDER_PAT_C,i.FINDER_PAT_D,i.FINDER_PAT_E,i.FINDER_PAT_E],[i.FINDER_PAT_A,i.FINDER_PAT_A,i.FINDER_PAT_B,i.FINDER_PAT_B,i.FINDER_PAT_C,i.FINDER_PAT_C,i.FINDER_PAT_D,i.FINDER_PAT_E,i.FINDER_PAT_F,i.FINDER_PAT_F],[i.FINDER_PAT_A,i.FINDER_PAT_A,i.FINDER_PAT_B,i.FINDER_PAT_B,i.FINDER_PAT_C,i.FINDER_PAT_D,i.FINDER_PAT_D,i.FINDER_PAT_E,i.FINDER_PAT_E,i.FINDER_PAT_F,i.FINDER_PAT_F]],i.MAX_PAIRS=11,i}(AbstractRSSReader),__extends$p=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}(),Pair=function(o){function i(s,_,_e){var ct=o.call(this,s,_)||this;return ct.count=0,ct.finderPattern=_e,ct}return __extends$p(i,o),i.prototype.getFinderPattern=function(){return this.finderPattern},i.prototype.getCount=function(){return this.count},i.prototype.incrementCount=function(){this.count++},i}(DataCharacter),__extends$o=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}(),__values$t=function(o){var i=typeof Symbol=="function"&&Symbol.iterator,s=i&&o[i],_=0;if(s)return s.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&_>=o.length&&(o=void 0),{value:o&&o[_++],done:!o}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},RSS14Reader=function(o){function i(){var s=o!==null&&o.apply(this,arguments)||this;return s.possibleLeftPairs=[],s.possibleRightPairs=[],s}return __extends$o(i,o),i.prototype.decodeRow=function(s,_,_e){var ct,Mt,Ft,Ut,Xt=this.decodePair(_,!1,s,_e);i.addOrTally(this.possibleLeftPairs,Xt),_.reverse();var Kt=this.decodePair(_,!0,s,_e);i.addOrTally(this.possibleRightPairs,Kt),_.reverse();try{for(var nr=__values$t(this.possibleLeftPairs),rr=nr.next();!rr.done;rr=nr.next()){var or=rr.value;if(or.getCount()>1)try{for(var hr=(Ft=void 0,__values$t(this.possibleRightPairs)),fr=hr.next();!fr.done;fr=hr.next()){var yr=fr.value;if(yr.getCount()>1&&i.checkChecksum(or,yr))return i.constructResult(or,yr)}}catch(Lr){Ft={error:Lr}}finally{try{fr&&!fr.done&&(Ut=hr.return)&&Ut.call(hr)}finally{if(Ft)throw Ft.error}}}}catch(Lr){ct={error:Lr}}finally{try{rr&&!rr.done&&(Mt=nr.return)&&Mt.call(nr)}finally{if(ct)throw ct.error}}throw new NotFoundException},i.addOrTally=function(s,_){var _e,ct;if(_!=null){var Mt=!1;try{for(var Ft=__values$t(s),Ut=Ft.next();!Ut.done;Ut=Ft.next()){var Xt=Ut.value;if(Xt.getValue()===_.getValue()){Xt.incrementCount(),Mt=!0;break}}}catch(Kt){_e={error:Kt}}finally{try{Ut&&!Ut.done&&(ct=Ft.return)&&ct.call(Ft)}finally{if(_e)throw _e.error}}Mt||s.push(_)}},i.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},i.constructResult=function(s,_){for(var _e=4537077*s.getValue()+_.getValue(),ct=new String(_e).toString(),Mt=new StringBuilder,Ft=13-ct.length;Ft>0;Ft--)Mt.append("0");Mt.append(ct);var Ut=0;for(Ft=0;Ft<13;Ft++){var Xt=Mt.charAt(Ft).charCodeAt(0)-48;Ut+=1&Ft?Xt:3*Xt}(Ut=10-Ut%10)===10&&(Ut=0),Mt.append(Ut.toString());var Kt=s.getFinderPattern().getResultPoints(),nr=_.getFinderPattern().getResultPoints();return new Result(Mt.toString(),null,0,[Kt[0],Kt[1],nr[0],nr[1]],BarcodeFormat$1.RSS_14,new Date().getTime())},i.checkChecksum=function(s,_){var _e=(s.getChecksumPortion()+16*_.getChecksumPortion())%79,ct=9*s.getFinderPattern().getValue()+_.getFinderPattern().getValue();return ct>72&&ct--,ct>8&&ct--,_e===ct},i.prototype.decodePair=function(s,_,_e,ct){try{var Mt=this.findFinderPattern(s,_),Ft=this.parseFoundFinderPattern(s,_e,_,Mt),Ut=ct==null?null:ct.get(DecodeHintType$1.NEED_RESULT_POINT_CALLBACK);if(Ut!=null){var Xt=(Mt[0]+Mt[1])/2;_&&(Xt=s.getSize()-1-Xt),Ut.foundPossibleResultPoint(new ResultPoint(Xt,_e))}var Kt=this.decodeDataCharacter(s,Ft,!0),nr=this.decodeDataCharacter(s,Ft,!1);return new Pair(1597*Kt.getValue()+nr.getValue(),Kt.getChecksumPortion()+4*nr.getChecksumPortion(),Ft)}catch{return null}},i.prototype.decodeDataCharacter=function(s,_,_e){for(var ct=this.getDataCharacterCounters(),Mt=0;Mt<ct.length;Mt++)ct[Mt]=0;if(_e)OneDReader.recordPatternInReverse(s,_.getStartEnd()[0],ct);else{OneDReader.recordPattern(s,_.getStartEnd()[1]+1,ct);for(var Ft=0,Ut=ct.length-1;Ft<Ut;Ft++,Ut--){var Xt=ct[Ft];ct[Ft]=ct[Ut],ct[Ut]=Xt}}var Kt=_e?16:15,nr=MathUtils.sum(new Int32Array(ct))/Kt,rr=this.getOddCounts(),or=this.getEvenCounts(),hr=this.getOddRoundingErrors(),fr=this.getEvenRoundingErrors();for(Ft=0;Ft<ct.length;Ft++){var yr=ct[Ft]/nr,Lr=Math.floor(yr+.5);Lr<1?Lr=1:Lr>8&&(Lr=8);var Br=Math.floor(Ft/2);1&Ft?(or[Br]=Lr,fr[Br]=yr-Lr):(rr[Br]=Lr,hr[Br]=yr-Lr)}this.adjustOddEvenCounts(_e,Kt);var Vr=0,Wr=0;for(Ft=rr.length-1;Ft>=0;Ft--)Wr*=9,Wr+=rr[Ft],Vr+=rr[Ft];var ro=0,no=0;for(Ft=or.length-1;Ft>=0;Ft--)ro*=9,ro+=or[Ft],no+=or[Ft];var so=Wr+3*ro;if(_e){if(1&Vr||Vr>12||Vr<4)throw new NotFoundException;var ko=(12-Vr)/2,To=9-(vu=i.OUTSIDE_ODD_WIDEST[ko]),oo=RSSUtils.getRSSvalue(rr,vu,!1),No=RSSUtils.getRSSvalue(or,To,!0),As=i.OUTSIDE_EVEN_TOTAL_SUBSET[ko],Ks=i.OUTSIDE_GSUM[ko];return new DataCharacter(oo*As+No+Ks,so)}if(1&no||no>10||no<4)throw new NotFoundException;ko=(10-no)/2,To=9-(vu=i.INSIDE_ODD_WIDEST[ko]),oo=RSSUtils.getRSSvalue(rr,vu,!0),No=RSSUtils.getRSSvalue(or,To,!1);var vu,Fu=i.INSIDE_ODD_TOTAL_SUBSET[ko];return Ks=i.INSIDE_GSUM[ko],new DataCharacter(No*Fu+oo+Ks,so)},i.prototype.findFinderPattern=function(s,_){var _e=this.getDecodeFinderCounters();_e[0]=0,_e[1]=0,_e[2]=0,_e[3]=0;for(var ct=s.getSize(),Mt=!1,Ft=0;Ft<ct&&_!==(Mt=!s.get(Ft));)Ft++;for(var Ut=0,Xt=Ft,Kt=Ft;Kt<ct;Kt++)if(s.get(Kt)!==Mt)_e[Ut]++;else{if(Ut===3){if(AbstractRSSReader.isFinderPattern(_e))return[Xt,Kt];Xt+=_e[0]+_e[1],_e[0]=_e[2],_e[1]=_e[3],_e[2]=0,_e[3]=0,Ut--}else Ut++;_e[Ut]=1,Mt=!Mt}throw new NotFoundException},i.prototype.parseFoundFinderPattern=function(s,_,_e,ct){for(var Mt=s.get(ct[0]),Ft=ct[0]-1;Ft>=0&&Mt!==s.get(Ft);)Ft--;Ft++;var Ut=ct[0]-Ft,Xt=this.getDecodeFinderCounters(),Kt=new Int32Array(Xt.length);System.arraycopy(Xt,0,Kt,1,Xt.length-1),Kt[0]=Ut;var nr=this.parseFinderValue(Kt,i.FINDER_PATTERNS),rr=Ft,or=ct[1];return _e&&(rr=s.getSize()-1-rr,or=s.getSize()-1-or),new FinderPattern$1(nr,[Ft,ct[1]],rr,or,_)},i.prototype.adjustOddEvenCounts=function(s,_){var _e=MathUtils.sum(new Int32Array(this.getOddCounts())),ct=MathUtils.sum(new Int32Array(this.getEvenCounts())),Mt=!1,Ft=!1,Ut=!1,Xt=!1;s?(_e>12?Ft=!0:_e<4&&(Mt=!0),ct>12?Xt=!0:ct<4&&(Ut=!0)):(_e>11?Ft=!0:_e<5&&(Mt=!0),ct>10?Xt=!0:ct<4&&(Ut=!0));var Kt=_e+ct-_,nr=(1&_e)==(s?1:0),rr=!(1&~ct);if(Kt===1)if(nr){if(rr)throw new NotFoundException;Ft=!0}else{if(!rr)throw new NotFoundException;Xt=!0}else if(Kt===-1)if(nr){if(rr)throw new NotFoundException;Mt=!0}else{if(!rr)throw new NotFoundException;Ut=!0}else{if(Kt!==0)throw new NotFoundException;if(nr){if(!rr)throw new NotFoundException;_e<ct?(Mt=!0,Xt=!0):(Ft=!0,Ut=!0)}else if(rr)throw new NotFoundException}if(Mt){if(Ft)throw new NotFoundException;AbstractRSSReader.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(Ft&&AbstractRSSReader.decrement(this.getOddCounts(),this.getOddRoundingErrors()),Ut){if(Xt)throw new NotFoundException;AbstractRSSReader.increment(this.getEvenCounts(),this.getOddRoundingErrors())}Xt&&AbstractRSSReader.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},i.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],i.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],i.OUTSIDE_GSUM=[0,161,961,2015,2715],i.INSIDE_GSUM=[0,336,1036,1516],i.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],i.INSIDE_ODD_WIDEST=[2,4,6,8],i.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],i}(AbstractRSSReader),__extends$n=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}(),MultiFormatOneDReader=function(o){function i(s){var _=o.call(this)||this;_.readers=[];var _e=s?s.get(DecodeHintType$1.POSSIBLE_FORMATS):null,ct=s&&s.get(DecodeHintType$1.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,Mt=s&&s.get(DecodeHintType$1.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return _e&&((_e.includes(BarcodeFormat$1.EAN_13)||_e.includes(BarcodeFormat$1.UPC_A)||_e.includes(BarcodeFormat$1.EAN_8)||_e.includes(BarcodeFormat$1.UPC_E))&&_.readers.push(new MultiFormatUPCEANReader(s)),_e.includes(BarcodeFormat$1.CODE_39)&&_.readers.push(new Code39Reader(ct,Mt)),_e.includes(BarcodeFormat$1.CODE_93)&&_.readers.push(new Code93Reader),_e.includes(BarcodeFormat$1.CODE_128)&&_.readers.push(new Code128Reader),_e.includes(BarcodeFormat$1.ITF)&&_.readers.push(new ITFReader),_e.includes(BarcodeFormat$1.CODABAR)&&_.readers.push(new CodaBarReader),_e.includes(BarcodeFormat$1.RSS_14)&&_.readers.push(new RSS14Reader),_e.includes(BarcodeFormat$1.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),_.readers.push(new RSSExpandedReader))),_.readers.length===0&&(_.readers.push(new MultiFormatUPCEANReader(s)),_.readers.push(new Code39Reader),_.readers.push(new Code93Reader),_.readers.push(new MultiFormatUPCEANReader(s)),_.readers.push(new Code128Reader),_.readers.push(new ITFReader),_.readers.push(new RSS14Reader)),_}return __extends$n(i,o),i.prototype.decodeRow=function(s,_,_e){for(var ct=0;ct<this.readers.length;ct++)try{return this.readers[ct].decodeRow(s,_,_e)}catch{}throw new NotFoundException},i.prototype.reset=function(){this.readers.forEach(function(s){return s.reset()})},i}(OneDReader),__extends$m=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}();(function(o){function i(s,_){return s===void 0&&(s=500),o.call(this,new MultiFormatOneDReader(_),s,_)||this}__extends$m(i,o)})(BrowserCodeReader);var __values$s=function(o){var i=typeof Symbol=="function"&&Symbol.iterator,s=i&&o[i],_=0;if(s)return s.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&_>=o.length&&(o=void 0),{value:o&&o[_++],done:!o}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},ECBlocks$1=function(){function o(i,s,_){this.ecCodewords=i,this.ecBlocks=[s],_&&this.ecBlocks.push(_)}return o.prototype.getECCodewords=function(){return this.ecCodewords},o.prototype.getECBlocks=function(){return this.ecBlocks},o}(),ECB$1=function(){function o(i,s){this.count=i,this.dataCodewords=s}return o.prototype.getCount=function(){return this.count},o.prototype.getDataCodewords=function(){return this.dataCodewords},o}(),Version$1=function(){function o(i,s,_,_e,ct,Mt){var Ft,Ut;this.versionNumber=i,this.symbolSizeRows=s,this.symbolSizeColumns=_,this.dataRegionSizeRows=_e,this.dataRegionSizeColumns=ct,this.ecBlocks=Mt;var Xt=0,Kt=Mt.getECCodewords(),nr=Mt.getECBlocks();try{for(var rr=__values$s(nr),or=rr.next();!or.done;or=rr.next()){var hr=or.value;Xt+=hr.getCount()*(hr.getDataCodewords()+Kt)}}catch(fr){Ft={error:fr}}finally{try{or&&!or.done&&(Ut=rr.return)&&Ut.call(rr)}finally{if(Ft)throw Ft.error}}this.totalCodewords=Xt}return o.prototype.getVersionNumber=function(){return this.versionNumber},o.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},o.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},o.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},o.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},o.prototype.getTotalCodewords=function(){return this.totalCodewords},o.prototype.getECBlocks=function(){return this.ecBlocks},o.getVersionForDimensions=function(i,s){var _,_e;if(1&i||1&s)throw new FormatException;try{for(var ct=__values$s(o.VERSIONS),Mt=ct.next();!Mt.done;Mt=ct.next()){var Ft=Mt.value;if(Ft.symbolSizeRows===i&&Ft.symbolSizeColumns===s)return Ft}}catch(Ut){_={error:Ut}}finally{try{Mt&&!Mt.done&&(_e=ct.return)&&_e.call(ct)}finally{if(_)throw _.error}}throw new FormatException},o.prototype.toString=function(){return""+this.versionNumber},o.buildVersions=function(){return[new o(1,10,10,8,8,new ECBlocks$1(5,new ECB$1(1,3))),new o(2,12,12,10,10,new ECBlocks$1(7,new ECB$1(1,5))),new o(3,14,14,12,12,new ECBlocks$1(10,new ECB$1(1,8))),new o(4,16,16,14,14,new ECBlocks$1(12,new ECB$1(1,12))),new o(5,18,18,16,16,new ECBlocks$1(14,new ECB$1(1,18))),new o(6,20,20,18,18,new ECBlocks$1(18,new ECB$1(1,22))),new o(7,22,22,20,20,new ECBlocks$1(20,new ECB$1(1,30))),new o(8,24,24,22,22,new ECBlocks$1(24,new ECB$1(1,36))),new o(9,26,26,24,24,new ECBlocks$1(28,new ECB$1(1,44))),new o(10,32,32,14,14,new ECBlocks$1(36,new ECB$1(1,62))),new o(11,36,36,16,16,new ECBlocks$1(42,new ECB$1(1,86))),new o(12,40,40,18,18,new ECBlocks$1(48,new ECB$1(1,114))),new o(13,44,44,20,20,new ECBlocks$1(56,new ECB$1(1,144))),new o(14,48,48,22,22,new ECBlocks$1(68,new ECB$1(1,174))),new o(15,52,52,24,24,new ECBlocks$1(42,new ECB$1(2,102))),new o(16,64,64,14,14,new ECBlocks$1(56,new ECB$1(2,140))),new o(17,72,72,16,16,new ECBlocks$1(36,new ECB$1(4,92))),new o(18,80,80,18,18,new ECBlocks$1(48,new ECB$1(4,114))),new o(19,88,88,20,20,new ECBlocks$1(56,new ECB$1(4,144))),new o(20,96,96,22,22,new ECBlocks$1(68,new ECB$1(4,174))),new o(21,104,104,24,24,new ECBlocks$1(56,new ECB$1(6,136))),new o(22,120,120,18,18,new ECBlocks$1(68,new ECB$1(6,175))),new o(23,132,132,20,20,new ECBlocks$1(62,new ECB$1(8,163))),new o(24,144,144,22,22,new ECBlocks$1(62,new ECB$1(8,156),new ECB$1(2,155))),new o(25,8,18,6,16,new ECBlocks$1(7,new ECB$1(1,5))),new o(26,8,32,6,14,new ECBlocks$1(11,new ECB$1(1,10))),new o(27,12,26,10,24,new ECBlocks$1(14,new ECB$1(1,16))),new o(28,12,36,10,16,new ECBlocks$1(18,new ECB$1(1,22))),new o(29,16,36,14,16,new ECBlocks$1(24,new ECB$1(1,32))),new o(30,16,48,14,22,new ECBlocks$1(28,new ECB$1(1,49)))]},o.VERSIONS=o.buildVersions(),o}(),BitMatrixParser$1=function(){function o(i){var s=i.getHeight();if(s<8||s>144||1&s)throw new FormatException;this.version=o.readVersion(i),this.mappingBitMatrix=this.extractDataRegion(i),this.readMappingMatrix=new BitMatrix(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return o.prototype.getVersion=function(){return this.version},o.readVersion=function(i){var s=i.getHeight(),_=i.getWidth();return Version$1.getVersionForDimensions(s,_)},o.prototype.readCodewords=function(){var i=new Int8Array(this.version.getTotalCodewords()),s=0,_=4,_e=0,ct=this.mappingBitMatrix.getHeight(),Mt=this.mappingBitMatrix.getWidth(),Ft=!1,Ut=!1,Xt=!1,Kt=!1;do if(_!==ct||_e!==0||Ft)if(_===ct-2&&_e===0&&3&Mt&&!Ut)i[s++]=255&this.readCorner2(ct,Mt),_-=2,_e+=2,Ut=!0;else if(_!==ct+4||_e!==2||7&Mt||Xt)if(_!==ct-2||_e!==0||(7&Mt)!=4||Kt){do _<ct&&_e>=0&&!this.readMappingMatrix.get(_e,_)&&(i[s++]=255&this.readUtah(_,_e,ct,Mt)),_-=2,_e+=2;while(_>=0&&_e<Mt);_+=1,_e+=3;do _>=0&&_e<Mt&&!this.readMappingMatrix.get(_e,_)&&(i[s++]=255&this.readUtah(_,_e,ct,Mt)),_+=2,_e-=2;while(_<ct&&_e>=0);_+=3,_e+=1}else i[s++]=255&this.readCorner4(ct,Mt),_-=2,_e+=2,Kt=!0;else i[s++]=255&this.readCorner3(ct,Mt),_-=2,_e+=2,Xt=!0;else i[s++]=255&this.readCorner1(ct,Mt),_-=2,_e+=2,Ft=!0;while(_<ct||_e<Mt);if(s!==this.version.getTotalCodewords())throw new FormatException;return i},o.prototype.readModule=function(i,s,_,_e){return i<0&&(i+=_,s+=4-(_+4&7)),s<0&&(s+=_e,i+=4-(_e+4&7)),this.readMappingMatrix.set(s,i),this.mappingBitMatrix.get(s,i)},o.prototype.readUtah=function(i,s,_,_e){var ct=0;return this.readModule(i-2,s-2,_,_e)&&(ct|=1),ct<<=1,this.readModule(i-2,s-1,_,_e)&&(ct|=1),ct<<=1,this.readModule(i-1,s-2,_,_e)&&(ct|=1),ct<<=1,this.readModule(i-1,s-1,_,_e)&&(ct|=1),ct<<=1,this.readModule(i-1,s,_,_e)&&(ct|=1),ct<<=1,this.readModule(i,s-2,_,_e)&&(ct|=1),ct<<=1,this.readModule(i,s-1,_,_e)&&(ct|=1),ct<<=1,this.readModule(i,s,_,_e)&&(ct|=1),ct},o.prototype.readCorner1=function(i,s){var _=0;return this.readModule(i-1,0,i,s)&&(_|=1),_<<=1,this.readModule(i-1,1,i,s)&&(_|=1),_<<=1,this.readModule(i-1,2,i,s)&&(_|=1),_<<=1,this.readModule(0,s-2,i,s)&&(_|=1),_<<=1,this.readModule(0,s-1,i,s)&&(_|=1),_<<=1,this.readModule(1,s-1,i,s)&&(_|=1),_<<=1,this.readModule(2,s-1,i,s)&&(_|=1),_<<=1,this.readModule(3,s-1,i,s)&&(_|=1),_},o.prototype.readCorner2=function(i,s){var _=0;return this.readModule(i-3,0,i,s)&&(_|=1),_<<=1,this.readModule(i-2,0,i,s)&&(_|=1),_<<=1,this.readModule(i-1,0,i,s)&&(_|=1),_<<=1,this.readModule(0,s-4,i,s)&&(_|=1),_<<=1,this.readModule(0,s-3,i,s)&&(_|=1),_<<=1,this.readModule(0,s-2,i,s)&&(_|=1),_<<=1,this.readModule(0,s-1,i,s)&&(_|=1),_<<=1,this.readModule(1,s-1,i,s)&&(_|=1),_},o.prototype.readCorner3=function(i,s){var _=0;return this.readModule(i-1,0,i,s)&&(_|=1),_<<=1,this.readModule(i-1,s-1,i,s)&&(_|=1),_<<=1,this.readModule(0,s-3,i,s)&&(_|=1),_<<=1,this.readModule(0,s-2,i,s)&&(_|=1),_<<=1,this.readModule(0,s-1,i,s)&&(_|=1),_<<=1,this.readModule(1,s-3,i,s)&&(_|=1),_<<=1,this.readModule(1,s-2,i,s)&&(_|=1),_<<=1,this.readModule(1,s-1,i,s)&&(_|=1),_},o.prototype.readCorner4=function(i,s){var _=0;return this.readModule(i-3,0,i,s)&&(_|=1),_<<=1,this.readModule(i-2,0,i,s)&&(_|=1),_<<=1,this.readModule(i-1,0,i,s)&&(_|=1),_<<=1,this.readModule(0,s-2,i,s)&&(_|=1),_<<=1,this.readModule(0,s-1,i,s)&&(_|=1),_<<=1,this.readModule(1,s-1,i,s)&&(_|=1),_<<=1,this.readModule(2,s-1,i,s)&&(_|=1),_<<=1,this.readModule(3,s-1,i,s)&&(_|=1),_},o.prototype.extractDataRegion=function(i){var s=this.version.getSymbolSizeRows(),_=this.version.getSymbolSizeColumns();if(i.getHeight()!==s)throw new IllegalArgumentException("Dimension of bitMatrix must match the version size");for(var _e=this.version.getDataRegionSizeRows(),ct=this.version.getDataRegionSizeColumns(),Mt=s/_e|0,Ft=_/ct|0,Ut=new BitMatrix(Ft*ct,Mt*_e),Xt=0;Xt<Mt;++Xt)for(var Kt=Xt*_e,nr=0;nr<Ft;++nr)for(var rr=nr*ct,or=0;or<_e;++or)for(var hr=Xt*(_e+2)+1+or,fr=Kt+or,yr=0;yr<ct;++yr){var Lr=nr*(ct+2)+1+yr;if(i.get(Lr,hr)){var Br=rr+yr;Ut.set(Br,fr)}}return Ut},o}(),__values$r=function(o){var i=typeof Symbol=="function"&&Symbol.iterator,s=i&&o[i],_=0;if(s)return s.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&_>=o.length&&(o=void 0),{value:o&&o[_++],done:!o}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},DataBlock$1=function(){function o(i,s){this.numDataCodewords=i,this.codewords=s}return o.getDataBlocks=function(i,s){var _,_e,ct,Mt,Ft=s.getECBlocks(),Ut=0,Xt=Ft.getECBlocks();try{for(var Kt=__values$r(Xt),nr=Kt.next();!nr.done;nr=Kt.next())Ut+=(yr=nr.value).getCount()}catch(Ks){_={error:Ks}}finally{try{nr&&!nr.done&&(_e=Kt.return)&&_e.call(Kt)}finally{if(_)throw _.error}}var rr=new Array(Ut),or=0;try{for(var hr=__values$r(Xt),fr=hr.next();!fr.done;fr=hr.next())for(var yr=fr.value,Lr=0;Lr<yr.getCount();Lr++){var Br=yr.getDataCodewords(),Vr=Ft.getECCodewords()+Br;rr[or++]=new o(Br,new Uint8Array(Vr))}}catch(Ks){ct={error:Ks}}finally{try{fr&&!fr.done&&(Mt=hr.return)&&Mt.call(hr)}finally{if(ct)throw ct.error}}var Wr=rr[0].codewords.length-Ft.getECCodewords(),ro=Wr-1,no=0;for(Lr=0;Lr<ro;Lr++)for(var so=0;so<or;so++)rr[so].codewords[Lr]=i[no++];var ko=s.getVersionNumber()===24,To=ko?8:or;for(so=0;so<To;so++)rr[so].codewords[Wr-1]=i[no++];var oo=rr[0].codewords.length;for(Lr=Wr;Lr<oo;Lr++)for(so=0;so<or;so++){var No=ko?(so+8)%or:so,As=ko&&No>7?Lr-1:Lr;rr[No].codewords[As]=i[no++]}if(no!==i.length)throw new IllegalArgumentException;return rr},o.prototype.getNumDataCodewords=function(){return this.numDataCodewords},o.prototype.getCodewords=function(){return this.codewords},o}(),BitSource=function(){function o(i){this.bytes=i,this.byteOffset=0,this.bitOffset=0}return o.prototype.getBitOffset=function(){return this.bitOffset},o.prototype.getByteOffset=function(){return this.byteOffset},o.prototype.readBits=function(i){if(i<1||i>32||i>this.available())throw new IllegalArgumentException(""+i);var s=0,_=this.bitOffset,_e=this.byteOffset,ct=this.bytes;if(_>0){var Mt=8-_,Ft=i<Mt?i:Mt,Ut=255>>8-Ft<<(Xt=Mt-Ft);s=(ct[_e]&Ut)>>Xt,i-=Ft,(_+=Ft)===8&&(_=0,_e++)}if(i>0){for(;i>=8;)s=s<<8|255&ct[_e],_e++,i-=8;if(i>0){var Xt;Ut=255>>(Xt=8-i)<<Xt,s=s<<i|(ct[_e]&Ut)>>Xt,_+=i}}return this.bitOffset=_,this.byteOffset=_e,s},o.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},o}(),Mode$3;(function(o){o[o.PAD_ENCODE=0]="PAD_ENCODE",o[o.ASCII_ENCODE=1]="ASCII_ENCODE",o[o.C40_ENCODE=2]="C40_ENCODE",o[o.TEXT_ENCODE=3]="TEXT_ENCODE",o[o.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",o[o.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",o[o.BASE256_ENCODE=6]="BASE256_ENCODE"})(Mode$3||(Mode$3={}));var DecodedBitStreamParser$2=function(){function o(){}return o.decode=function(i){var s=new BitSource(i),_=new StringBuilder,_e=new StringBuilder,ct=new Array,Mt=Mode$3.ASCII_ENCODE;do if(Mt===Mode$3.ASCII_ENCODE)Mt=this.decodeAsciiSegment(s,_,_e);else{switch(Mt){case Mode$3.C40_ENCODE:this.decodeC40Segment(s,_);break;case Mode$3.TEXT_ENCODE:this.decodeTextSegment(s,_);break;case Mode$3.ANSIX12_ENCODE:this.decodeAnsiX12Segment(s,_);break;case Mode$3.EDIFACT_ENCODE:this.decodeEdifactSegment(s,_);break;case Mode$3.BASE256_ENCODE:this.decodeBase256Segment(s,_,ct);break;default:throw new FormatException}Mt=Mode$3.ASCII_ENCODE}while(Mt!==Mode$3.PAD_ENCODE&&s.available()>0);return _e.length()>0&&_.append(_e.toString()),new DecoderResult(i,_.toString(),ct.length===0?null:ct,null)},o.decodeAsciiSegment=function(i,s,_){var _e=!1;do{var ct=i.readBits(8);if(ct===0)throw new FormatException;if(ct<=128)return _e&&(ct+=128),s.append(String.fromCharCode(ct-1)),Mode$3.ASCII_ENCODE;if(ct===129)return Mode$3.PAD_ENCODE;if(ct<=229){var Mt=ct-130;Mt<10&&s.append("0"),s.append(""+Mt)}else switch(ct){case 230:return Mode$3.C40_ENCODE;case 231:return Mode$3.BASE256_ENCODE;case 232:s.append("");break;case 233:case 234:case 241:break;case 235:_e=!0;break;case 236:s.append("[)>05"),_.insert(0,"");break;case 237:s.append("[)>06"),_.insert(0,"");break;case 238:return Mode$3.ANSIX12_ENCODE;case 239:return Mode$3.TEXT_ENCODE;case 240:return Mode$3.EDIFACT_ENCODE;default:if(ct!==254||i.available()!==0)throw new FormatException}}while(i.available()>0);return Mode$3.ASCII_ENCODE},o.decodeC40Segment=function(i,s){var _=!1,_e=[],ct=0;do{if(i.available()===8)return;var Mt=i.readBits(8);if(Mt===254)return;this.parseTwoBytes(Mt,i.readBits(8),_e);for(var Ft=0;Ft<3;Ft++){var Ut=_e[Ft];switch(ct){case 0:if(Ut<3)ct=Ut+1;else{if(!(Ut<this.C40_BASIC_SET_CHARS.length))throw new FormatException;var Xt=this.C40_BASIC_SET_CHARS[Ut];_?(s.append(String.fromCharCode(Xt.charCodeAt(0)+128)),_=!1):s.append(Xt)}break;case 1:_?(s.append(String.fromCharCode(Ut+128)),_=!1):s.append(String.fromCharCode(Ut)),ct=0;break;case 2:if(Ut<this.C40_SHIFT2_SET_CHARS.length)Xt=this.C40_SHIFT2_SET_CHARS[Ut],_?(s.append(String.fromCharCode(Xt.charCodeAt(0)+128)),_=!1):s.append(Xt);else switch(Ut){case 27:s.append("");break;case 30:_=!0;break;default:throw new FormatException}ct=0;break;case 3:_?(s.append(String.fromCharCode(Ut+224)),_=!1):s.append(String.fromCharCode(Ut+96)),ct=0;break;default:throw new FormatException}}}while(i.available()>0)},o.decodeTextSegment=function(i,s){var _=!1,_e=[],ct=0;do{if(i.available()===8)return;var Mt=i.readBits(8);if(Mt===254)return;this.parseTwoBytes(Mt,i.readBits(8),_e);for(var Ft=0;Ft<3;Ft++){var Ut=_e[Ft];switch(ct){case 0:if(Ut<3)ct=Ut+1;else{if(!(Ut<this.TEXT_BASIC_SET_CHARS.length))throw new FormatException;var Xt=this.TEXT_BASIC_SET_CHARS[Ut];_?(s.append(String.fromCharCode(Xt.charCodeAt(0)+128)),_=!1):s.append(Xt)}break;case 1:_?(s.append(String.fromCharCode(Ut+128)),_=!1):s.append(String.fromCharCode(Ut)),ct=0;break;case 2:if(Ut<this.TEXT_SHIFT2_SET_CHARS.length)Xt=this.TEXT_SHIFT2_SET_CHARS[Ut],_?(s.append(String.fromCharCode(Xt.charCodeAt(0)+128)),_=!1):s.append(Xt);else switch(Ut){case 27:s.append("");break;case 30:_=!0;break;default:throw new FormatException}ct=0;break;case 3:if(!(Ut<this.TEXT_SHIFT3_SET_CHARS.length))throw new FormatException;Xt=this.TEXT_SHIFT3_SET_CHARS[Ut],_?(s.append(String.fromCharCode(Xt.charCodeAt(0)+128)),_=!1):s.append(Xt),ct=0;break;default:throw new FormatException}}}while(i.available()>0)},o.decodeAnsiX12Segment=function(i,s){var _=[];do{if(i.available()===8)return;var _e=i.readBits(8);if(_e===254)return;this.parseTwoBytes(_e,i.readBits(8),_);for(var ct=0;ct<3;ct++){var Mt=_[ct];switch(Mt){case 0:s.append("\r");break;case 1:s.append("*");break;case 2:s.append(">");break;case 3:s.append(" ");break;default:if(Mt<14)s.append(String.fromCharCode(Mt+44));else{if(!(Mt<40))throw new FormatException;s.append(String.fromCharCode(Mt+51))}}}}while(i.available()>0)},o.parseTwoBytes=function(i,s,_){var _e=(i<<8)+s-1,ct=Math.floor(_e/1600);_[0]=ct,_e-=1600*ct,ct=Math.floor(_e/40),_[1]=ct,_[2]=_e-40*ct},o.decodeEdifactSegment=function(i,s){do{if(i.available()<=16)return;for(var _=0;_<4;_++){var _e=i.readBits(6);if(_e===31){var ct=8-i.getBitOffset();return void(ct!==8&&i.readBits(ct))}32&_e||(_e|=64),s.append(String.fromCharCode(_e))}}while(i.available()>0)},o.decodeBase256Segment=function(i,s,_){var _e,ct=1+i.getByteOffset(),Mt=this.unrandomize255State(i.readBits(8),ct++);if((_e=Mt===0?i.available()/8|0:Mt<250?Mt:250*(Mt-249)+this.unrandomize255State(i.readBits(8),ct++))<0)throw new FormatException;for(var Ft=new Uint8Array(_e),Ut=0;Ut<_e;Ut++){if(i.available()<8)throw new FormatException;Ft[Ut]=this.unrandomize255State(i.readBits(8),ct++)}_.push(Ft);try{s.append(StringEncoding.decode(Ft,StringUtils.ISO88591))}catch(Xt){throw new IllegalStateException("Platform does not support required encoding: "+Xt.message)}},o.unrandomize255State=function(i,s){var _=i-(149*s%255+1);return _>=0?_:_+256},o.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],o.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],o.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],o.TEXT_SHIFT2_SET_CHARS=o.C40_SHIFT2_SET_CHARS,o.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],o}(),__values$q=function(o){var i=typeof Symbol=="function"&&Symbol.iterator,s=i&&o[i],_=0;if(s)return s.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&_>=o.length&&(o=void 0),{value:o&&o[_++],done:!o}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},Decoder$1=function(){function o(){this.rsDecoder=new ReedSolomonDecoder(GenericGF.DATA_MATRIX_FIELD_256)}return o.prototype.decode=function(i){var s,_,_e=new BitMatrixParser$1(i),ct=_e.getVersion(),Mt=_e.readCodewords(),Ft=DataBlock$1.getDataBlocks(Mt,ct),Ut=0;try{for(var Xt=__values$q(Ft),Kt=Xt.next();!Kt.done;Kt=Xt.next())Ut+=Kt.value.getNumDataCodewords()}catch(Br){s={error:Br}}finally{try{Kt&&!Kt.done&&(_=Xt.return)&&_.call(Xt)}finally{if(s)throw s.error}}for(var nr=new Uint8Array(Ut),rr=Ft.length,or=0;or<rr;or++){var hr=Ft[or],fr=hr.getCodewords(),yr=hr.getNumDataCodewords();this.correctErrors(fr,yr);for(var Lr=0;Lr<yr;Lr++)nr[Lr*rr+or]=fr[Lr]}return DecodedBitStreamParser$2.decode(nr)},o.prototype.correctErrors=function(i,s){var _=new Int32Array(i);try{this.rsDecoder.decode(_,i.length-s)}catch{throw new ChecksumException}for(var _e=0;_e<s;_e++)i[_e]=_[_e]},o}(),Detector$2=function(){function o(i){this.image=i,this.rectangleDetector=new WhiteRectangleDetector(this.image)}return o.prototype.detect=function(){var i=this.rectangleDetector.detect(),s=this.detectSolid1(i);if((s=this.detectSolid2(s))[3]=this.correctTopRight(s),!s[3])throw new NotFoundException;var _=(s=this.shiftToModuleCenter(s))[0],_e=s[1],ct=s[2],Mt=s[3],Ft=this.transitionsBetween(_,Mt)+1,Ut=this.transitionsBetween(ct,Mt)+1;1&~Ft||(Ft+=1),1&~Ut||(Ut+=1),4*Ft<7*Ut&&4*Ut<7*Ft&&(Ft=Ut=Math.max(Ft,Ut));var Xt=o.sampleGrid(this.image,_,_e,ct,Mt,Ft,Ut);return new DetectorResult(Xt,[_,_e,ct,Mt])},o.shiftPoint=function(i,s,_){var _e=(s.getX()-i.getX())/(_+1),ct=(s.getY()-i.getY())/(_+1);return new ResultPoint(i.getX()+_e,i.getY()+ct)},o.moveAway=function(i,s,_){var _e=i.getX(),ct=i.getY();return _e<s?_e-=1:_e+=1,ct<_?ct-=1:ct+=1,new ResultPoint(_e,ct)},o.prototype.detectSolid1=function(i){var s=i[0],_=i[1],_e=i[3],ct=i[2],Mt=this.transitionsBetween(s,_),Ft=this.transitionsBetween(_,_e),Ut=this.transitionsBetween(_e,ct),Xt=this.transitionsBetween(ct,s),Kt=Mt,nr=[ct,s,_,_e];return Kt>Ft&&(Kt=Ft,nr[0]=s,nr[1]=_,nr[2]=_e,nr[3]=ct),Kt>Ut&&(Kt=Ut,nr[0]=_,nr[1]=_e,nr[2]=ct,nr[3]=s),Kt>Xt&&(nr[0]=_e,nr[1]=ct,nr[2]=s,nr[3]=_),nr},o.prototype.detectSolid2=function(i){var s=i[0],_=i[1],_e=i[2],ct=i[3],Mt=this.transitionsBetween(s,ct),Ft=o.shiftPoint(_,_e,4*(Mt+1)),Ut=o.shiftPoint(_e,_,4*(Mt+1));return this.transitionsBetween(Ft,s)<this.transitionsBetween(Ut,ct)?(i[0]=s,i[1]=_,i[2]=_e,i[3]=ct):(i[0]=_,i[1]=_e,i[2]=ct,i[3]=s),i},o.prototype.correctTopRight=function(i){var s=i[0],_=i[1],_e=i[2],ct=i[3],Mt=this.transitionsBetween(s,ct),Ft=this.transitionsBetween(_,ct),Ut=o.shiftPoint(s,_,4*(Ft+1)),Xt=o.shiftPoint(_e,_,4*(Mt+1));Mt=this.transitionsBetween(Ut,ct),Ft=this.transitionsBetween(Xt,ct);var Kt=new ResultPoint(ct.getX()+(_e.getX()-_.getX())/(Mt+1),ct.getY()+(_e.getY()-_.getY())/(Mt+1)),nr=new ResultPoint(ct.getX()+(s.getX()-_.getX())/(Ft+1),ct.getY()+(s.getY()-_.getY())/(Ft+1));return this.isValid(Kt)?this.isValid(nr)?this.transitionsBetween(Ut,Kt)+this.transitionsBetween(Xt,Kt)>this.transitionsBetween(Ut,nr)+this.transitionsBetween(Xt,nr)?Kt:nr:Kt:this.isValid(nr)?nr:null},o.prototype.shiftToModuleCenter=function(i){var s=i[0],_=i[1],_e=i[2],ct=i[3],Mt=this.transitionsBetween(s,ct)+1,Ft=this.transitionsBetween(_e,ct)+1,Ut=o.shiftPoint(s,_,4*Ft),Xt=o.shiftPoint(_e,_,4*Mt);1&~(Mt=this.transitionsBetween(Ut,ct)+1)||(Mt+=1),1&~(Ft=this.transitionsBetween(Xt,ct)+1)||(Ft+=1);var Kt,nr,rr=(s.getX()+_.getX()+_e.getX()+ct.getX())/4,or=(s.getY()+_.getY()+_e.getY()+ct.getY())/4;return s=o.moveAway(s,rr,or),_=o.moveAway(_,rr,or),_e=o.moveAway(_e,rr,or),ct=o.moveAway(ct,rr,or),Ut=o.shiftPoint(s,_,4*Ft),Ut=o.shiftPoint(Ut,ct,4*Mt),Kt=o.shiftPoint(_,s,4*Ft),Kt=o.shiftPoint(Kt,_e,4*Mt),Xt=o.shiftPoint(_e,ct,4*Ft),Xt=o.shiftPoint(Xt,_,4*Mt),nr=o.shiftPoint(ct,_e,4*Ft),[Ut,Kt,Xt,nr=o.shiftPoint(nr,s,4*Mt)]},o.prototype.isValid=function(i){return i.getX()>=0&&i.getX()<this.image.getWidth()&&i.getY()>0&&i.getY()<this.image.getHeight()},o.sampleGrid=function(i,s,_,_e,ct,Mt,Ft){return GridSamplerInstance.getInstance().sampleGrid(i,Mt,Ft,.5,.5,Mt-.5,.5,Mt-.5,Ft-.5,.5,Ft-.5,s.getX(),s.getY(),ct.getX(),ct.getY(),_e.getX(),_e.getY(),_.getX(),_.getY())},o.prototype.transitionsBetween=function(i,s){var _=Math.trunc(i.getX()),_e=Math.trunc(i.getY()),ct=Math.trunc(s.getX()),Mt=Math.trunc(s.getY()),Ft=Math.abs(Mt-_e)>Math.abs(ct-_);if(Ft){var Ut=_;_=_e,_e=Ut,Ut=ct,ct=Mt,Mt=Ut}for(var Xt=Math.abs(ct-_),Kt=Math.abs(Mt-_e),nr=-Xt/2,rr=_e<Mt?1:-1,or=_<ct?1:-1,hr=0,fr=this.image.get(Ft?_e:_,Ft?_:_e),yr=_,Lr=_e;yr!==ct;yr+=or){var Br=this.image.get(Ft?Lr:yr,Ft?yr:Lr);if(Br!==fr&&(hr++,fr=Br),(nr+=Kt)>0){if(Lr===Mt)break;Lr+=rr,nr-=Xt}}return hr},o}(),DataMatrixReader=function(){function o(){this.decoder=new Decoder$1}return o.prototype.decode=function(i,s){var _,_e;if(s===void 0&&(s=null),s!=null&&s.has(DecodeHintType$1.PURE_BARCODE)){var ct=o.extractPureBits(i.getBlackMatrix());_=this.decoder.decode(ct),_e=o.NO_POINTS}else{var Mt=new Detector$2(i.getBlackMatrix()).detect();_=this.decoder.decode(Mt.getBits()),_e=Mt.getPoints()}var Ft=_.getRawBytes(),Ut=new Result(_.getText(),Ft,8*Ft.length,_e,BarcodeFormat$1.DATA_MATRIX,System.currentTimeMillis()),Xt=_.getByteSegments();Xt!=null&&Ut.putMetadata(ResultMetadataType$1.BYTE_SEGMENTS,Xt);var Kt=_.getECLevel();return Kt!=null&&Ut.putMetadata(ResultMetadataType$1.ERROR_CORRECTION_LEVEL,Kt),Ut},o.prototype.reset=function(){},o.extractPureBits=function(i){var s=i.getTopLeftOnBit(),_=i.getBottomRightOnBit();if(s==null||_==null)throw new NotFoundException;var _e=this.moduleSize(s,i),ct=s[1],Mt=_[1],Ft=s[0],Ut=(_[0]-Ft+1)/_e,Xt=(Mt-ct+1)/_e;if(Ut<=0||Xt<=0)throw new NotFoundException;var Kt=_e/2;ct+=Kt,Ft+=Kt;for(var nr=new BitMatrix(Ut,Xt),rr=0;rr<Xt;rr++)for(var or=ct+rr*_e,hr=0;hr<Ut;hr++)i.get(Ft+hr*_e,or)&&nr.set(hr,rr);return nr},o.moduleSize=function(i,s){for(var _=s.getWidth(),_e=i[0],ct=i[1];_e<_&&s.get(_e,ct);)_e++;if(_e===_)throw new NotFoundException;var Mt=_e-i[0];if(Mt===0)throw new NotFoundException;return Mt},o.NO_POINTS=[],o}(),__extends$l=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}(),ErrorCorrectionLevelValues;(function(o){function i(s){return s===void 0&&(s=500),o.call(this,new DataMatrixReader,s)||this}__extends$l(i,o)})(BrowserCodeReader),function(o){o[o.L=0]="L",o[o.M=1]="M",o[o.Q=2]="Q",o[o.H=3]="H"}(ErrorCorrectionLevelValues||(ErrorCorrectionLevelValues={}));var ErrorCorrectionLevel=function(){function o(i,s,_){this.value=i,this.stringValue=s,this.bits=_,o.FOR_BITS.set(_,this),o.FOR_VALUE.set(i,this)}return o.prototype.getValue=function(){return this.value},o.prototype.getBits=function(){return this.bits},o.fromString=function(i){switch(i){case"L":return o.L;case"M":return o.M;case"Q":return o.Q;case"H":return o.H;default:throw new ArgumentException(i+"not available")}},o.prototype.toString=function(){return this.stringValue},o.prototype.equals=function(i){if(!(i instanceof o))return!1;var s=i;return this.value===s.value},o.forBits=function(i){if(i<0||i>=o.FOR_BITS.size)throw new IllegalArgumentException;return o.FOR_BITS.get(i)},o.FOR_BITS=new Map,o.FOR_VALUE=new Map,o.L=new o(ErrorCorrectionLevelValues.L,"L",1),o.M=new o(ErrorCorrectionLevelValues.M,"M",0),o.Q=new o(ErrorCorrectionLevelValues.Q,"Q",3),o.H=new o(ErrorCorrectionLevelValues.H,"H",2),o}(),__values$p=function(o){var i=typeof Symbol=="function"&&Symbol.iterator,s=i&&o[i],_=0;if(s)return s.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&_>=o.length&&(o=void 0),{value:o&&o[_++],done:!o}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},FormatInformation=function(){function o(i){this.errorCorrectionLevel=ErrorCorrectionLevel.forBits(i>>3&3),this.dataMask=7&i}return o.numBitsDiffering=function(i,s){return Integer.bitCount(i^s)},o.decodeFormatInformation=function(i,s){var _=o.doDecodeFormatInformation(i,s);return _!==null?_:o.doDecodeFormatInformation(i^o.FORMAT_INFO_MASK_QR,s^o.FORMAT_INFO_MASK_QR)},o.doDecodeFormatInformation=function(i,s){var _,_e,ct=Number.MAX_SAFE_INTEGER,Mt=0;try{for(var Ft=__values$p(o.FORMAT_INFO_DECODE_LOOKUP),Ut=Ft.next();!Ut.done;Ut=Ft.next()){var Xt=Ut.value,Kt=Xt[0];if(Kt===i||Kt===s)return new o(Xt[1]);var nr=o.numBitsDiffering(i,Kt);nr<ct&&(Mt=Xt[1],ct=nr),i!==s&&(nr=o.numBitsDiffering(s,Kt))<ct&&(Mt=Xt[1],ct=nr)}}catch(rr){_={error:rr}}finally{try{Ut&&!Ut.done&&(_e=Ft.return)&&_e.call(Ft)}finally{if(_)throw _.error}}return ct<=3?new o(Mt):null},o.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},o.prototype.getDataMask=function(){return this.dataMask},o.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},o.prototype.equals=function(i){if(!(i instanceof o))return!1;var s=i;return this.errorCorrectionLevel===s.errorCorrectionLevel&&this.dataMask===s.dataMask},o.FORMAT_INFO_MASK_QR=21522,o.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],o}(),__values$o=function(o){var i=typeof Symbol=="function"&&Symbol.iterator,s=i&&o[i],_=0;if(s)return s.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&_>=o.length&&(o=void 0),{value:o&&o[_++],done:!o}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},ECBlocks=function(){function o(i){for(var s=[],_=1;_<arguments.length;_++)s[_-1]=arguments[_];this.ecCodewordsPerBlock=i,this.ecBlocks=s}return o.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},o.prototype.getNumBlocks=function(){var i,s,_=0,_e=this.ecBlocks;try{for(var ct=__values$o(_e),Mt=ct.next();!Mt.done;Mt=ct.next())_+=Mt.value.getCount()}catch(Ft){i={error:Ft}}finally{try{Mt&&!Mt.done&&(s=ct.return)&&s.call(ct)}finally{if(i)throw i.error}}return _},o.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},o.prototype.getECBlocks=function(){return this.ecBlocks},o}(),ECB=function(){function o(i,s){this.count=i,this.dataCodewords=s}return o.prototype.getCount=function(){return this.count},o.prototype.getDataCodewords=function(){return this.dataCodewords},o}(),__values$n=function(o){var i=typeof Symbol=="function"&&Symbol.iterator,s=i&&o[i],_=0;if(s)return s.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&_>=o.length&&(o=void 0),{value:o&&o[_++],done:!o}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},Version=function(){function o(i,s){for(var _,_e,ct=[],Mt=2;Mt<arguments.length;Mt++)ct[Mt-2]=arguments[Mt];this.versionNumber=i,this.alignmentPatternCenters=s,this.ecBlocks=ct;var Ft=0,Ut=ct[0].getECCodewordsPerBlock(),Xt=ct[0].getECBlocks();try{for(var Kt=__values$n(Xt),nr=Kt.next();!nr.done;nr=Kt.next()){var rr=nr.value;Ft+=rr.getCount()*(rr.getDataCodewords()+Ut)}}catch(or){_={error:or}}finally{try{nr&&!nr.done&&(_e=Kt.return)&&_e.call(Kt)}finally{if(_)throw _.error}}this.totalCodewords=Ft}return o.prototype.getVersionNumber=function(){return this.versionNumber},o.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},o.prototype.getTotalCodewords=function(){return this.totalCodewords},o.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},o.prototype.getECBlocksForLevel=function(i){return this.ecBlocks[i.getValue()]},o.getProvisionalVersionForDimension=function(i){if(i%4!=1)throw new FormatException;try{return this.getVersionForNumber((i-17)/4)}catch{throw new FormatException}},o.getVersionForNumber=function(i){if(i<1||i>40)throw new IllegalArgumentException;return o.VERSIONS[i-1]},o.decodeVersionInformation=function(i){for(var s=Number.MAX_SAFE_INTEGER,_=0,_e=0;_e<o.VERSION_DECODE_INFO.length;_e++){var ct=o.VERSION_DECODE_INFO[_e];if(ct===i)return o.getVersionForNumber(_e+7);var Mt=FormatInformation.numBitsDiffering(i,ct);Mt<s&&(_=_e+7,s=Mt)}return s<=3?o.getVersionForNumber(_):null},o.prototype.buildFunctionPattern=function(){var i=this.getDimensionForVersion(),s=new BitMatrix(i);s.setRegion(0,0,9,9),s.setRegion(i-8,0,8,9),s.setRegion(0,i-8,9,8);for(var _=this.alignmentPatternCenters.length,_e=0;_e<_;_e++)for(var ct=this.alignmentPatternCenters[_e]-2,Mt=0;Mt<_;Mt++)_e===0&&(Mt===0||Mt===_-1)||_e===_-1&&Mt===0||s.setRegion(this.alignmentPatternCenters[Mt]-2,ct,5,5);return s.setRegion(6,9,1,i-17),s.setRegion(9,6,i-17,1),this.versionNumber>6&&(s.setRegion(i-11,0,3,6),s.setRegion(0,i-11,6,3)),s},o.prototype.toString=function(){return""+this.versionNumber},o.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),o.VERSIONS=[new o(1,new Int32Array(0),new ECBlocks(7,new ECB(1,19)),new ECBlocks(10,new ECB(1,16)),new ECBlocks(13,new ECB(1,13)),new ECBlocks(17,new ECB(1,9))),new o(2,Int32Array.from([6,18]),new ECBlocks(10,new ECB(1,34)),new ECBlocks(16,new ECB(1,28)),new ECBlocks(22,new ECB(1,22)),new ECBlocks(28,new ECB(1,16))),new o(3,Int32Array.from([6,22]),new ECBlocks(15,new ECB(1,55)),new ECBlocks(26,new ECB(1,44)),new ECBlocks(18,new ECB(2,17)),new ECBlocks(22,new ECB(2,13))),new o(4,Int32Array.from([6,26]),new ECBlocks(20,new ECB(1,80)),new ECBlocks(18,new ECB(2,32)),new ECBlocks(26,new ECB(2,24)),new ECBlocks(16,new ECB(4,9))),new o(5,Int32Array.from([6,30]),new ECBlocks(26,new ECB(1,108)),new ECBlocks(24,new ECB(2,43)),new ECBlocks(18,new ECB(2,15),new ECB(2,16)),new ECBlocks(22,new ECB(2,11),new ECB(2,12))),new o(6,Int32Array.from([6,34]),new ECBlocks(18,new ECB(2,68)),new ECBlocks(16,new ECB(4,27)),new ECBlocks(24,new ECB(4,19)),new ECBlocks(28,new ECB(4,15))),new o(7,Int32Array.from([6,22,38]),new ECBlocks(20,new ECB(2,78)),new ECBlocks(18,new ECB(4,31)),new ECBlocks(18,new ECB(2,14),new ECB(4,15)),new ECBlocks(26,new ECB(4,13),new ECB(1,14))),new o(8,Int32Array.from([6,24,42]),new ECBlocks(24,new ECB(2,97)),new ECBlocks(22,new ECB(2,38),new ECB(2,39)),new ECBlocks(22,new ECB(4,18),new ECB(2,19)),new ECBlocks(26,new ECB(4,14),new ECB(2,15))),new o(9,Int32Array.from([6,26,46]),new ECBlocks(30,new ECB(2,116)),new ECBlocks(22,new ECB(3,36),new ECB(2,37)),new ECBlocks(20,new ECB(4,16),new ECB(4,17)),new ECBlocks(24,new ECB(4,12),new ECB(4,13))),new o(10,Int32Array.from([6,28,50]),new ECBlocks(18,new ECB(2,68),new ECB(2,69)),new ECBlocks(26,new ECB(4,43),new ECB(1,44)),new ECBlocks(24,new ECB(6,19),new ECB(2,20)),new ECBlocks(28,new ECB(6,15),new ECB(2,16))),new o(11,Int32Array.from([6,30,54]),new ECBlocks(20,new ECB(4,81)),new ECBlocks(30,new ECB(1,50),new ECB(4,51)),new ECBlocks(28,new ECB(4,22),new ECB(4,23)),new ECBlocks(24,new ECB(3,12),new ECB(8,13))),new o(12,Int32Array.from([6,32,58]),new ECBlocks(24,new ECB(2,92),new ECB(2,93)),new ECBlocks(22,new ECB(6,36),new ECB(2,37)),new ECBlocks(26,new ECB(4,20),new ECB(6,21)),new ECBlocks(28,new ECB(7,14),new ECB(4,15))),new o(13,Int32Array.from([6,34,62]),new ECBlocks(26,new ECB(4,107)),new ECBlocks(22,new ECB(8,37),new ECB(1,38)),new ECBlocks(24,new ECB(8,20),new ECB(4,21)),new ECBlocks(22,new ECB(12,11),new ECB(4,12))),new o(14,Int32Array.from([6,26,46,66]),new ECBlocks(30,new ECB(3,115),new ECB(1,116)),new ECBlocks(24,new ECB(4,40),new ECB(5,41)),new ECBlocks(20,new ECB(11,16),new ECB(5,17)),new ECBlocks(24,new ECB(11,12),new ECB(5,13))),new o(15,Int32Array.from([6,26,48,70]),new ECBlocks(22,new ECB(5,87),new ECB(1,88)),new ECBlocks(24,new ECB(5,41),new ECB(5,42)),new ECBlocks(30,new ECB(5,24),new ECB(7,25)),new ECBlocks(24,new ECB(11,12),new ECB(7,13))),new o(16,Int32Array.from([6,26,50,74]),new ECBlocks(24,new ECB(5,98),new ECB(1,99)),new ECBlocks(28,new ECB(7,45),new ECB(3,46)),new ECBlocks(24,new ECB(15,19),new ECB(2,20)),new ECBlocks(30,new ECB(3,15),new ECB(13,16))),new o(17,Int32Array.from([6,30,54,78]),new ECBlocks(28,new ECB(1,107),new ECB(5,108)),new ECBlocks(28,new ECB(10,46),new ECB(1,47)),new ECBlocks(28,new ECB(1,22),new ECB(15,23)),new ECBlocks(28,new ECB(2,14),new ECB(17,15))),new o(18,Int32Array.from([6,30,56,82]),new ECBlocks(30,new ECB(5,120),new ECB(1,121)),new ECBlocks(26,new ECB(9,43),new ECB(4,44)),new ECBlocks(28,new ECB(17,22),new ECB(1,23)),new ECBlocks(28,new ECB(2,14),new ECB(19,15))),new o(19,Int32Array.from([6,30,58,86]),new ECBlocks(28,new ECB(3,113),new ECB(4,114)),new ECBlocks(26,new ECB(3,44),new ECB(11,45)),new ECBlocks(26,new ECB(17,21),new ECB(4,22)),new ECBlocks(26,new ECB(9,13),new ECB(16,14))),new o(20,Int32Array.from([6,34,62,90]),new ECBlocks(28,new ECB(3,107),new ECB(5,108)),new ECBlocks(26,new ECB(3,41),new ECB(13,42)),new ECBlocks(30,new ECB(15,24),new ECB(5,25)),new ECBlocks(28,new ECB(15,15),new ECB(10,16))),new o(21,Int32Array.from([6,28,50,72,94]),new ECBlocks(28,new ECB(4,116),new ECB(4,117)),new ECBlocks(26,new ECB(17,42)),new ECBlocks(28,new ECB(17,22),new ECB(6,23)),new ECBlocks(30,new ECB(19,16),new ECB(6,17))),new o(22,Int32Array.from([6,26,50,74,98]),new ECBlocks(28,new ECB(2,111),new ECB(7,112)),new ECBlocks(28,new ECB(17,46)),new ECBlocks(30,new ECB(7,24),new ECB(16,25)),new ECBlocks(24,new ECB(34,13))),new o(23,Int32Array.from([6,30,54,78,102]),new ECBlocks(30,new ECB(4,121),new ECB(5,122)),new ECBlocks(28,new ECB(4,47),new ECB(14,48)),new ECBlocks(30,new ECB(11,24),new ECB(14,25)),new ECBlocks(30,new ECB(16,15),new ECB(14,16))),new o(24,Int32Array.from([6,28,54,80,106]),new ECBlocks(30,new ECB(6,117),new ECB(4,118)),new ECBlocks(28,new ECB(6,45),new ECB(14,46)),new ECBlocks(30,new ECB(11,24),new ECB(16,25)),new ECBlocks(30,new ECB(30,16),new ECB(2,17))),new o(25,Int32Array.from([6,32,58,84,110]),new ECBlocks(26,new ECB(8,106),new ECB(4,107)),new ECBlocks(28,new ECB(8,47),new ECB(13,48)),new ECBlocks(30,new ECB(7,24),new ECB(22,25)),new ECBlocks(30,new ECB(22,15),new ECB(13,16))),new o(26,Int32Array.from([6,30,58,86,114]),new ECBlocks(28,new ECB(10,114),new ECB(2,115)),new ECBlocks(28,new ECB(19,46),new ECB(4,47)),new ECBlocks(28,new ECB(28,22),new ECB(6,23)),new ECBlocks(30,new ECB(33,16),new ECB(4,17))),new o(27,Int32Array.from([6,34,62,90,118]),new ECBlocks(30,new ECB(8,122),new ECB(4,123)),new ECBlocks(28,new ECB(22,45),new ECB(3,46)),new ECBlocks(30,new ECB(8,23),new ECB(26,24)),new ECBlocks(30,new ECB(12,15),new ECB(28,16))),new o(28,Int32Array.from([6,26,50,74,98,122]),new ECBlocks(30,new ECB(3,117),new ECB(10,118)),new ECBlocks(28,new ECB(3,45),new ECB(23,46)),new ECBlocks(30,new ECB(4,24),new ECB(31,25)),new ECBlocks(30,new ECB(11,15),new ECB(31,16))),new o(29,Int32Array.from([6,30,54,78,102,126]),new ECBlocks(30,new ECB(7,116),new ECB(7,117)),new ECBlocks(28,new ECB(21,45),new ECB(7,46)),new ECBlocks(30,new ECB(1,23),new ECB(37,24)),new ECBlocks(30,new ECB(19,15),new ECB(26,16))),new o(30,Int32Array.from([6,26,52,78,104,130]),new ECBlocks(30,new ECB(5,115),new ECB(10,116)),new ECBlocks(28,new ECB(19,47),new ECB(10,48)),new ECBlocks(30,new ECB(15,24),new ECB(25,25)),new ECBlocks(30,new ECB(23,15),new ECB(25,16))),new o(31,Int32Array.from([6,30,56,82,108,134]),new ECBlocks(30,new ECB(13,115),new ECB(3,116)),new ECBlocks(28,new ECB(2,46),new ECB(29,47)),new ECBlocks(30,new ECB(42,24),new ECB(1,25)),new ECBlocks(30,new ECB(23,15),new ECB(28,16))),new o(32,Int32Array.from([6,34,60,86,112,138]),new ECBlocks(30,new ECB(17,115)),new ECBlocks(28,new ECB(10,46),new ECB(23,47)),new ECBlocks(30,new ECB(10,24),new ECB(35,25)),new ECBlocks(30,new ECB(19,15),new ECB(35,16))),new o(33,Int32Array.from([6,30,58,86,114,142]),new ECBlocks(30,new ECB(17,115),new ECB(1,116)),new ECBlocks(28,new ECB(14,46),new ECB(21,47)),new ECBlocks(30,new ECB(29,24),new ECB(19,25)),new ECBlocks(30,new ECB(11,15),new ECB(46,16))),new o(34,Int32Array.from([6,34,62,90,118,146]),new ECBlocks(30,new ECB(13,115),new ECB(6,116)),new ECBlocks(28,new ECB(14,46),new ECB(23,47)),new ECBlocks(30,new ECB(44,24),new ECB(7,25)),new ECBlocks(30,new ECB(59,16),new ECB(1,17))),new o(35,Int32Array.from([6,30,54,78,102,126,150]),new ECBlocks(30,new ECB(12,121),new ECB(7,122)),new ECBlocks(28,new ECB(12,47),new ECB(26,48)),new ECBlocks(30,new ECB(39,24),new ECB(14,25)),new ECBlocks(30,new ECB(22,15),new ECB(41,16))),new o(36,Int32Array.from([6,24,50,76,102,128,154]),new ECBlocks(30,new ECB(6,121),new ECB(14,122)),new ECBlocks(28,new ECB(6,47),new ECB(34,48)),new ECBlocks(30,new ECB(46,24),new ECB(10,25)),new ECBlocks(30,new ECB(2,15),new ECB(64,16))),new o(37,Int32Array.from([6,28,54,80,106,132,158]),new ECBlocks(30,new ECB(17,122),new ECB(4,123)),new ECBlocks(28,new ECB(29,46),new ECB(14,47)),new ECBlocks(30,new ECB(49,24),new ECB(10,25)),new ECBlocks(30,new ECB(24,15),new ECB(46,16))),new o(38,Int32Array.from([6,32,58,84,110,136,162]),new ECBlocks(30,new ECB(4,122),new ECB(18,123)),new ECBlocks(28,new ECB(13,46),new ECB(32,47)),new ECBlocks(30,new ECB(48,24),new ECB(14,25)),new ECBlocks(30,new ECB(42,15),new ECB(32,16))),new o(39,Int32Array.from([6,26,54,82,110,138,166]),new ECBlocks(30,new ECB(20,117),new ECB(4,118)),new ECBlocks(28,new ECB(40,47),new ECB(7,48)),new ECBlocks(30,new ECB(43,24),new ECB(22,25)),new ECBlocks(30,new ECB(10,15),new ECB(67,16))),new o(40,Int32Array.from([6,30,58,86,114,142,170]),new ECBlocks(30,new ECB(19,118),new ECB(6,119)),new ECBlocks(28,new ECB(18,47),new ECB(31,48)),new ECBlocks(30,new ECB(34,24),new ECB(34,25)),new ECBlocks(30,new ECB(20,15),new ECB(61,16)))],o}(),DataMaskValues;(function(o){o[o.DATA_MASK_000=0]="DATA_MASK_000",o[o.DATA_MASK_001=1]="DATA_MASK_001",o[o.DATA_MASK_010=2]="DATA_MASK_010",o[o.DATA_MASK_011=3]="DATA_MASK_011",o[o.DATA_MASK_100=4]="DATA_MASK_100",o[o.DATA_MASK_101=5]="DATA_MASK_101",o[o.DATA_MASK_110=6]="DATA_MASK_110",o[o.DATA_MASK_111=7]="DATA_MASK_111"})(DataMaskValues||(DataMaskValues={}));var DataMask=function(){function o(i,s){this.value=i,this.isMasked=s}return o.prototype.unmaskBitMatrix=function(i,s){for(var _=0;_<s;_++)for(var _e=0;_e<s;_e++)this.isMasked(_,_e)&&i.flip(_e,_)},o.values=new Map([[DataMaskValues.DATA_MASK_000,new o(DataMaskValues.DATA_MASK_000,function(i,s){return!(i+s&1)})],[DataMaskValues.DATA_MASK_001,new o(DataMaskValues.DATA_MASK_001,function(i,s){return!(1&i)})],[DataMaskValues.DATA_MASK_010,new o(DataMaskValues.DATA_MASK_010,function(i,s){return s%3==0})],[DataMaskValues.DATA_MASK_011,new o(DataMaskValues.DATA_MASK_011,function(i,s){return(i+s)%3==0})],[DataMaskValues.DATA_MASK_100,new o(DataMaskValues.DATA_MASK_100,function(i,s){return!(Math.floor(i/2)+Math.floor(s/3)&1)})],[DataMaskValues.DATA_MASK_101,new o(DataMaskValues.DATA_MASK_101,function(i,s){return i*s%6==0})],[DataMaskValues.DATA_MASK_110,new o(DataMaskValues.DATA_MASK_110,function(i,s){return i*s%6<3})],[DataMaskValues.DATA_MASK_111,new o(DataMaskValues.DATA_MASK_111,function(i,s){return!(i+s+i*s%3&1)})]]),o}(),BitMatrixParser=function(){function o(i){var s=i.getHeight();if(s<21||(3&s)!=1)throw new FormatException;this.bitMatrix=i}return o.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var i=0,s=0;s<6;s++)i=this.copyBit(s,8,i);i=this.copyBit(7,8,i),i=this.copyBit(8,8,i),i=this.copyBit(8,7,i);for(var _=5;_>=0;_--)i=this.copyBit(8,_,i);var _e=this.bitMatrix.getHeight(),ct=0,Mt=_e-7;for(_=_e-1;_>=Mt;_--)ct=this.copyBit(8,_,ct);for(s=_e-8;s<_e;s++)ct=this.copyBit(s,8,ct);if(this.parsedFormatInfo=FormatInformation.decodeFormatInformation(i,ct),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new FormatException},o.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var i=this.bitMatrix.getHeight(),s=Math.floor((i-17)/4);if(s<=6)return Version.getVersionForNumber(s);for(var _=0,_e=i-11,ct=5;ct>=0;ct--)for(var Mt=i-9;Mt>=_e;Mt--)_=this.copyBit(Mt,ct,_);var Ft=Version.decodeVersionInformation(_);if(Ft!==null&&Ft.getDimensionForVersion()===i)return this.parsedVersion=Ft,Ft;for(_=0,Mt=5;Mt>=0;Mt--)for(ct=i-9;ct>=_e;ct--)_=this.copyBit(Mt,ct,_);if((Ft=Version.decodeVersionInformation(_))!==null&&Ft.getDimensionForVersion()===i)return this.parsedVersion=Ft,Ft;throw new FormatException},o.prototype.copyBit=function(i,s,_){return(this.isMirror?this.bitMatrix.get(s,i):this.bitMatrix.get(i,s))?_<<1|1:_<<1},o.prototype.readCodewords=function(){var i=this.readFormatInformation(),s=this.readVersion(),_=DataMask.values.get(i.getDataMask()),_e=this.bitMatrix.getHeight();_.unmaskBitMatrix(this.bitMatrix,_e);for(var ct=s.buildFunctionPattern(),Mt=!0,Ft=new Uint8Array(s.getTotalCodewords()),Ut=0,Xt=0,Kt=0,nr=_e-1;nr>0;nr-=2){nr===6&&nr--;for(var rr=0;rr<_e;rr++)for(var or=Mt?_e-1-rr:rr,hr=0;hr<2;hr++)ct.get(nr-hr,or)||(Kt++,Xt<<=1,this.bitMatrix.get(nr-hr,or)&&(Xt|=1),Kt===8&&(Ft[Ut++]=Xt,Kt=0,Xt=0));Mt=!Mt}if(Ut!==s.getTotalCodewords())throw new FormatException;return Ft},o.prototype.remask=function(){if(this.parsedFormatInfo!==null){var i=DataMask.values[this.parsedFormatInfo.getDataMask()],s=this.bitMatrix.getHeight();i.unmaskBitMatrix(this.bitMatrix,s)}},o.prototype.setMirror=function(i){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=i},o.prototype.mirror=function(){for(var i=this.bitMatrix,s=0,_=i.getWidth();s<_;s++)for(var _e=s+1,ct=i.getHeight();_e<ct;_e++)i.get(s,_e)!==i.get(_e,s)&&(i.flip(_e,s),i.flip(s,_e))},o}(),__values$m=function(o){var i=typeof Symbol=="function"&&Symbol.iterator,s=i&&o[i],_=0;if(s)return s.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&_>=o.length&&(o=void 0),{value:o&&o[_++],done:!o}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},DataBlock=function(){function o(i,s){this.numDataCodewords=i,this.codewords=s}return o.getDataBlocks=function(i,s,_){var _e,ct,Mt,Ft;if(i.length!==s.getTotalCodewords())throw new IllegalArgumentException;var Ut=s.getECBlocksForLevel(_),Xt=0,Kt=Ut.getECBlocks();try{for(var nr=__values$m(Kt),rr=nr.next();!rr.done;rr=nr.next())Xt+=(Lr=rr.value).getCount()}catch(As){_e={error:As}}finally{try{rr&&!rr.done&&(ct=nr.return)&&ct.call(nr)}finally{if(_e)throw _e.error}}var or=new Array(Xt),hr=0;try{for(var fr=__values$m(Kt),yr=fr.next();!yr.done;yr=fr.next())for(var Lr=yr.value,Br=0;Br<Lr.getCount();Br++){var Vr=Lr.getDataCodewords(),Wr=Ut.getECCodewordsPerBlock()+Vr;or[hr++]=new o(Vr,new Uint8Array(Wr))}}catch(As){Mt={error:As}}finally{try{yr&&!yr.done&&(Ft=fr.return)&&Ft.call(fr)}finally{if(Mt)throw Mt.error}}for(var ro=or[0].codewords.length,no=or.length-1;no>=0&&or[no].codewords.length!==ro;)no--;no++;var so=ro-Ut.getECCodewordsPerBlock(),ko=0;for(Br=0;Br<so;Br++)for(var To=0;To<hr;To++)or[To].codewords[Br]=i[ko++];for(To=no;To<hr;To++)or[To].codewords[so]=i[ko++];var oo=or[0].codewords.length;for(Br=so;Br<oo;Br++)for(To=0;To<hr;To++){var No=To<no?Br:Br+1;or[To].codewords[No]=i[ko++]}return or},o.prototype.getNumDataCodewords=function(){return this.numDataCodewords},o.prototype.getCodewords=function(){return this.codewords},o}(),ModeValues;(function(o){o[o.TERMINATOR=0]="TERMINATOR",o[o.NUMERIC=1]="NUMERIC",o[o.ALPHANUMERIC=2]="ALPHANUMERIC",o[o.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",o[o.BYTE=4]="BYTE",o[o.ECI=5]="ECI",o[o.KANJI=6]="KANJI",o[o.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",o[o.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",o[o.HANZI=9]="HANZI"})(ModeValues||(ModeValues={}));var Mode$2=function(){function o(i,s,_,_e){this.value=i,this.stringValue=s,this.characterCountBitsForVersions=_,this.bits=_e,o.FOR_BITS.set(_e,this),o.FOR_VALUE.set(i,this)}return o.forBits=function(i){var s=o.FOR_BITS.get(i);if(s===void 0)throw new IllegalArgumentException;return s},o.prototype.getCharacterCountBits=function(i){var s,_=i.getVersionNumber();return s=_<=9?0:_<=26?1:2,this.characterCountBitsForVersions[s]},o.prototype.getValue=function(){return this.value},o.prototype.getBits=function(){return this.bits},o.prototype.equals=function(i){if(!(i instanceof o))return!1;var s=i;return this.value===s.value},o.prototype.toString=function(){return this.stringValue},o.FOR_BITS=new Map,o.FOR_VALUE=new Map,o.TERMINATOR=new o(ModeValues.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),o.NUMERIC=new o(ModeValues.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),o.ALPHANUMERIC=new o(ModeValues.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),o.STRUCTURED_APPEND=new o(ModeValues.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),o.BYTE=new o(ModeValues.BYTE,"BYTE",Int32Array.from([8,16,16]),4),o.ECI=new o(ModeValues.ECI,"ECI",Int32Array.from([0,0,0]),7),o.KANJI=new o(ModeValues.KANJI,"KANJI",Int32Array.from([8,10,12]),8),o.FNC1_FIRST_POSITION=new o(ModeValues.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),o.FNC1_SECOND_POSITION=new o(ModeValues.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),o.HANZI=new o(ModeValues.HANZI,"HANZI",Int32Array.from([8,10,12]),13),o}(),DecodedBitStreamParser$1=function(){function o(){}return o.decode=function(i,s,_,_e){var ct=new BitSource(i),Mt=new StringBuilder,Ft=new Array,Ut=-1,Xt=-1;try{var Kt=null,nr=!1,rr=void 0;do{if(ct.available()<4)rr=Mode$2.TERMINATOR;else{var or=ct.readBits(4);rr=Mode$2.forBits(or)}switch(rr){case Mode$2.TERMINATOR:break;case Mode$2.FNC1_FIRST_POSITION:case Mode$2.FNC1_SECOND_POSITION:nr=!0;break;case Mode$2.STRUCTURED_APPEND:if(ct.available()<16)throw new FormatException;Ut=ct.readBits(8),Xt=ct.readBits(8);break;case Mode$2.ECI:var hr=o.parseECIValue(ct);if((Kt=CharacterSetECI.getCharacterSetECIByValue(hr))===null)throw new FormatException;break;case Mode$2.HANZI:var fr=ct.readBits(4),yr=ct.readBits(rr.getCharacterCountBits(s));fr===o.GB2312_SUBSET&&o.decodeHanziSegment(ct,Mt,yr);break;default:var Lr=ct.readBits(rr.getCharacterCountBits(s));switch(rr){case Mode$2.NUMERIC:o.decodeNumericSegment(ct,Mt,Lr);break;case Mode$2.ALPHANUMERIC:o.decodeAlphanumericSegment(ct,Mt,Lr,nr);break;case Mode$2.BYTE:o.decodeByteSegment(ct,Mt,Lr,Kt,Ft,_e);break;case Mode$2.KANJI:o.decodeKanjiSegment(ct,Mt,Lr);break;default:throw new FormatException}}}while(rr!==Mode$2.TERMINATOR)}catch{throw new FormatException}return new DecoderResult(i,Mt.toString(),Ft.length===0?null:Ft,_===null?null:_.toString(),Ut,Xt)},o.decodeHanziSegment=function(i,s,_){if(13*_>i.available())throw new FormatException;for(var _e=new Uint8Array(2*_),ct=0;_>0;){var Mt=i.readBits(13),Ft=Mt/96<<8&4294967295|Mt%96;Ft+=Ft<959?41377:42657,_e[ct]=Ft>>8&255,_e[ct+1]=255&Ft,ct+=2,_--}try{s.append(StringEncoding.decode(_e,StringUtils.GB2312))}catch(Ut){throw new FormatException(Ut)}},o.decodeKanjiSegment=function(i,s,_){if(13*_>i.available())throw new FormatException;for(var _e=new Uint8Array(2*_),ct=0;_>0;){var Mt=i.readBits(13),Ft=Mt/192<<8&4294967295|Mt%192;Ft+=Ft<7936?33088:49472,_e[ct]=Ft>>8,_e[ct+1]=Ft,ct+=2,_--}try{s.append(StringEncoding.decode(_e,StringUtils.SHIFT_JIS))}catch(Ut){throw new FormatException(Ut)}},o.decodeByteSegment=function(i,s,_,_e,ct,Mt){if(8*_>i.available())throw new FormatException;for(var Ft,Ut=new Uint8Array(_),Xt=0;Xt<_;Xt++)Ut[Xt]=i.readBits(8);Ft=_e===null?StringUtils.guessEncoding(Ut,Mt):_e.getName();try{s.append(StringEncoding.decode(Ut,Ft))}catch(Kt){throw new FormatException(Kt)}ct.push(Ut)},o.toAlphaNumericChar=function(i){if(i>=o.ALPHANUMERIC_CHARS.length)throw new FormatException;return o.ALPHANUMERIC_CHARS[i]},o.decodeAlphanumericSegment=function(i,s,_,_e){for(var ct=s.length();_>1;){if(i.available()<11)throw new FormatException;var Mt=i.readBits(11);s.append(o.toAlphaNumericChar(Math.floor(Mt/45))),s.append(o.toAlphaNumericChar(Mt%45)),_-=2}if(_===1){if(i.available()<6)throw new FormatException;s.append(o.toAlphaNumericChar(i.readBits(6)))}if(_e)for(var Ft=ct;Ft<s.length();Ft++)s.charAt(Ft)==="%"&&(Ft<s.length()-1&&s.charAt(Ft+1)==="%"?s.deleteCharAt(Ft+1):s.setCharAt(Ft,""))},o.decodeNumericSegment=function(i,s,_){for(;_>=3;){if(i.available()<10)throw new FormatException;var _e=i.readBits(10);if(_e>=1e3)throw new FormatException;s.append(o.toAlphaNumericChar(Math.floor(_e/100))),s.append(o.toAlphaNumericChar(Math.floor(_e/10)%10)),s.append(o.toAlphaNumericChar(_e%10)),_-=3}if(_===2){if(i.available()<7)throw new FormatException;var ct=i.readBits(7);if(ct>=100)throw new FormatException;s.append(o.toAlphaNumericChar(Math.floor(ct/10))),s.append(o.toAlphaNumericChar(ct%10))}else if(_===1){if(i.available()<4)throw new FormatException;var Mt=i.readBits(4);if(Mt>=10)throw new FormatException;s.append(o.toAlphaNumericChar(Mt))}},o.parseECIValue=function(i){var s=i.readBits(8);if(!(128&s))return 127&s;if((192&s)==128)return(63&s)<<8&4294967295|i.readBits(8);if((224&s)==192)return(31&s)<<16&4294967295|i.readBits(16);throw new FormatException},o.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",o.GB2312_SUBSET=1,o}(),QRCodeDecoderMetaData=function(){function o(i){this.mirrored=i}return o.prototype.isMirrored=function(){return this.mirrored},o.prototype.applyMirroredCorrection=function(i){if(this.mirrored&&i!==null&&!(i.length<3)){var s=i[0];i[0]=i[2],i[2]=s}},o}(),__values$l=function(o){var i=typeof Symbol=="function"&&Symbol.iterator,s=i&&o[i],_=0;if(s)return s.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&_>=o.length&&(o=void 0),{value:o&&o[_++],done:!o}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},Decoder=function(){function o(){this.rsDecoder=new ReedSolomonDecoder(GenericGF.QR_CODE_FIELD_256)}return o.prototype.decodeBooleanArray=function(i,s){return this.decodeBitMatrix(BitMatrix.parseFromBooleanArray(i),s)},o.prototype.decodeBitMatrix=function(i,s){var _=new BitMatrixParser(i),_e=null;try{return this.decodeBitMatrixParser(_,s)}catch(Mt){_e=Mt}try{_.remask(),_.setMirror(!0),_.readVersion(),_.readFormatInformation(),_.mirror();var ct=this.decodeBitMatrixParser(_,s);return ct.setOther(new QRCodeDecoderMetaData(!0)),ct}catch(Mt){throw _e!==null?_e:Mt}},o.prototype.decodeBitMatrixParser=function(i,s){var _,_e,ct,Mt,Ft=i.readVersion(),Ut=i.readFormatInformation().getErrorCorrectionLevel(),Xt=i.readCodewords(),Kt=DataBlock.getDataBlocks(Xt,Ft,Ut),nr=0;try{for(var rr=__values$l(Kt),or=rr.next();!or.done;or=rr.next())nr+=(Br=or.value).getNumDataCodewords()}catch(no){_={error:no}}finally{try{or&&!or.done&&(_e=rr.return)&&_e.call(rr)}finally{if(_)throw _.error}}var hr=new Uint8Array(nr),fr=0;try{for(var yr=__values$l(Kt),Lr=yr.next();!Lr.done;Lr=yr.next()){var Br,Vr=(Br=Lr.value).getCodewords(),Wr=Br.getNumDataCodewords();this.correctErrors(Vr,Wr);for(var ro=0;ro<Wr;ro++)hr[fr++]=Vr[ro]}}catch(no){ct={error:no}}finally{try{Lr&&!Lr.done&&(Mt=yr.return)&&Mt.call(yr)}finally{if(ct)throw ct.error}}return DecodedBitStreamParser$1.decode(hr,Ft,Ut,s)},o.prototype.correctErrors=function(i,s){var _=new Int32Array(i);try{this.rsDecoder.decode(_,i.length-s)}catch{throw new ChecksumException}for(var _e=0;_e<s;_e++)i[_e]=_[_e]},o}(),__extends$k=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}(),AlignmentPattern=function(o){function i(s,_,_e){var ct=o.call(this,s,_)||this;return ct.estimatedModuleSize=_e,ct}return __extends$k(i,o),i.prototype.aboutEquals=function(s,_,_e){if(Math.abs(_-this.getY())<=s&&Math.abs(_e-this.getX())<=s){var ct=Math.abs(s-this.estimatedModuleSize);return ct<=1||ct<=this.estimatedModuleSize}return!1},i.prototype.combineEstimate=function(s,_,_e){return new i((this.getX()+_)/2,(this.getY()+s)/2,(this.estimatedModuleSize+_e)/2)},i}(ResultPoint),__values$k=function(o){var i=typeof Symbol=="function"&&Symbol.iterator,s=i&&o[i],_=0;if(s)return s.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&_>=o.length&&(o=void 0),{value:o&&o[_++],done:!o}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},AlignmentPatternFinder=function(){function o(i,s,_,_e,ct,Mt,Ft){this.image=i,this.startX=s,this.startY=_,this.width=_e,this.height=ct,this.moduleSize=Mt,this.resultPointCallback=Ft,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return o.prototype.find=function(){for(var i=this.startX,s=this.height,_=i+this.width,_e=this.startY+s/2,ct=new Int32Array(3),Mt=this.image,Ft=0;Ft<s;Ft++){var Ut=_e+(1&Ft?-Math.floor((Ft+1)/2):Math.floor((Ft+1)/2));ct[0]=0,ct[1]=0,ct[2]=0;for(var Xt=i;Xt<_&&!Mt.get(Xt,Ut);)Xt++;for(var Kt=0;Xt<_;){if(Mt.get(Xt,Ut))if(Kt===1)ct[1]++;else if(Kt===2){var nr;if(this.foundPatternCross(ct)&&(nr=this.handlePossibleCenter(ct,Ut,Xt))!==null)return nr;ct[0]=ct[2],ct[1]=1,ct[2]=0,Kt=1}else ct[++Kt]++;else Kt===1&&Kt++,ct[Kt]++;Xt++}if(this.foundPatternCross(ct)&&(nr=this.handlePossibleCenter(ct,Ut,_))!==null)return nr}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new NotFoundException},o.centerFromEnd=function(i,s){return s-i[2]-i[1]/2},o.prototype.foundPatternCross=function(i){for(var s=this.moduleSize,_=s/2,_e=0;_e<3;_e++)if(Math.abs(s-i[_e])>=_)return!1;return!0},o.prototype.crossCheckVertical=function(i,s,_,_e){var ct=this.image,Mt=ct.getHeight(),Ft=this.crossCheckStateCount;Ft[0]=0,Ft[1]=0,Ft[2]=0;for(var Ut=i;Ut>=0&&ct.get(s,Ut)&&Ft[1]<=_;)Ft[1]++,Ut--;if(Ut<0||Ft[1]>_)return NaN;for(;Ut>=0&&!ct.get(s,Ut)&&Ft[0]<=_;)Ft[0]++,Ut--;if(Ft[0]>_)return NaN;for(Ut=i+1;Ut<Mt&&ct.get(s,Ut)&&Ft[1]<=_;)Ft[1]++,Ut++;if(Ut===Mt||Ft[1]>_)return NaN;for(;Ut<Mt&&!ct.get(s,Ut)&&Ft[2]<=_;)Ft[2]++,Ut++;if(Ft[2]>_)return NaN;var Xt=Ft[0]+Ft[1]+Ft[2];return 5*Math.abs(Xt-_e)>=2*_e?NaN:this.foundPatternCross(Ft)?o.centerFromEnd(Ft,Ut):NaN},o.prototype.handlePossibleCenter=function(i,s,_){var _e,ct,Mt=i[0]+i[1]+i[2],Ft=o.centerFromEnd(i,_),Ut=this.crossCheckVertical(s,Ft,2*i[1],Mt);if(!isNaN(Ut)){var Xt=(i[0]+i[1]+i[2])/3;try{for(var Kt=__values$k(this.possibleCenters),nr=Kt.next();!nr.done;nr=Kt.next()){var rr=nr.value;if(rr.aboutEquals(Xt,Ut,Ft))return rr.combineEstimate(Ut,Ft,Xt)}}catch(hr){_e={error:hr}}finally{try{nr&&!nr.done&&(ct=Kt.return)&&ct.call(Kt)}finally{if(_e)throw _e.error}}var or=new AlignmentPattern(Ft,Ut,Xt);this.possibleCenters.push(or),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(or)}return null},o}(),__extends$j=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}(),FinderPattern=function(o){function i(s,_,_e,ct){var Mt=o.call(this,s,_)||this;return Mt.estimatedModuleSize=_e,Mt.count=ct,ct===void 0&&(Mt.count=1),Mt}return __extends$j(i,o),i.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},i.prototype.getCount=function(){return this.count},i.prototype.aboutEquals=function(s,_,_e){if(Math.abs(_-this.getY())<=s&&Math.abs(_e-this.getX())<=s){var ct=Math.abs(s-this.estimatedModuleSize);return ct<=1||ct<=this.estimatedModuleSize}return!1},i.prototype.combineEstimate=function(s,_,_e){var ct=this.count+1;return new i((this.count*this.getX()+_)/ct,(this.count*this.getY()+s)/ct,(this.count*this.estimatedModuleSize+_e)/ct,ct)},i}(ResultPoint),FinderPatternInfo=function(){function o(i){this.bottomLeft=i[0],this.topLeft=i[1],this.topRight=i[2]}return o.prototype.getBottomLeft=function(){return this.bottomLeft},o.prototype.getTopLeft=function(){return this.topLeft},o.prototype.getTopRight=function(){return this.topRight},o}(),__values$j=function(o){var i=typeof Symbol=="function"&&Symbol.iterator,s=i&&o[i],_=0;if(s)return s.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&_>=o.length&&(o=void 0),{value:o&&o[_++],done:!o}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},FinderPatternFinder=function(){function o(i,s){this.image=i,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=s}return o.prototype.getImage=function(){return this.image},o.prototype.getPossibleCenters=function(){return this.possibleCenters},o.prototype.find=function(i){var s=i!=null&&i.get(DecodeHintType$1.TRY_HARDER)!==void 0,_=i!=null&&i.get(DecodeHintType$1.PURE_BARCODE)!==void 0,_e=this.image,ct=_e.getHeight(),Mt=_e.getWidth(),Ft=Math.floor(3*ct/(4*o.MAX_MODULES));(Ft<o.MIN_SKIP||s)&&(Ft=o.MIN_SKIP);for(var Ut=!1,Xt=new Int32Array(5),Kt=Ft-1;Kt<ct&&!Ut;Kt+=Ft){Xt[0]=0,Xt[1]=0,Xt[2]=0,Xt[3]=0,Xt[4]=0;for(var nr=0,rr=0;rr<Mt;rr++)if(_e.get(rr,Kt))1&~nr||nr++,Xt[nr]++;else if(1&nr)Xt[nr]++;else if(nr===4)if(o.foundPatternCross(Xt)){if(this.handlePossibleCenter(Xt,Kt,rr,_)!==!0){Xt[0]=Xt[2],Xt[1]=Xt[3],Xt[2]=Xt[4],Xt[3]=1,Xt[4]=0,nr=3;continue}if(Ft=2,this.hasSkipped===!0)Ut=this.haveMultiplyConfirmedCenters();else{var or=this.findRowSkip();or>Xt[2]&&(Kt+=or-Xt[2]-Ft,rr=Mt-1)}nr=0,Xt[0]=0,Xt[1]=0,Xt[2]=0,Xt[3]=0,Xt[4]=0}else Xt[0]=Xt[2],Xt[1]=Xt[3],Xt[2]=Xt[4],Xt[3]=1,Xt[4]=0,nr=3;else Xt[++nr]++;o.foundPatternCross(Xt)&&this.handlePossibleCenter(Xt,Kt,Mt,_)===!0&&(Ft=Xt[0],this.hasSkipped&&(Ut=this.haveMultiplyConfirmedCenters()))}var hr=this.selectBestPatterns();return ResultPoint.orderBestPatterns(hr),new FinderPatternInfo(hr)},o.centerFromEnd=function(i,s){return s-i[4]-i[3]-i[2]/2},o.foundPatternCross=function(i){for(var s=0,_=0;_<5;_++){var _e=i[_];if(_e===0)return!1;s+=_e}if(s<7)return!1;var ct=s/7,Mt=ct/2;return Math.abs(ct-i[0])<Mt&&Math.abs(ct-i[1])<Mt&&Math.abs(3*ct-i[2])<3*Mt&&Math.abs(ct-i[3])<Mt&&Math.abs(ct-i[4])<Mt},o.prototype.getCrossCheckStateCount=function(){var i=this.crossCheckStateCount;return i[0]=0,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i},o.prototype.crossCheckDiagonal=function(i,s,_,_e){for(var ct=this.getCrossCheckStateCount(),Mt=0,Ft=this.image;i>=Mt&&s>=Mt&&Ft.get(s-Mt,i-Mt);)ct[2]++,Mt++;if(i<Mt||s<Mt)return!1;for(;i>=Mt&&s>=Mt&&!Ft.get(s-Mt,i-Mt)&&ct[1]<=_;)ct[1]++,Mt++;if(i<Mt||s<Mt||ct[1]>_)return!1;for(;i>=Mt&&s>=Mt&&Ft.get(s-Mt,i-Mt)&&ct[0]<=_;)ct[0]++,Mt++;if(ct[0]>_)return!1;var Ut=Ft.getHeight(),Xt=Ft.getWidth();for(Mt=1;i+Mt<Ut&&s+Mt<Xt&&Ft.get(s+Mt,i+Mt);)ct[2]++,Mt++;if(i+Mt>=Ut||s+Mt>=Xt)return!1;for(;i+Mt<Ut&&s+Mt<Xt&&!Ft.get(s+Mt,i+Mt)&&ct[3]<_;)ct[3]++,Mt++;if(i+Mt>=Ut||s+Mt>=Xt||ct[3]>=_)return!1;for(;i+Mt<Ut&&s+Mt<Xt&&Ft.get(s+Mt,i+Mt)&&ct[4]<_;)ct[4]++,Mt++;if(ct[4]>=_)return!1;var Kt=ct[0]+ct[1]+ct[2]+ct[3]+ct[4];return Math.abs(Kt-_e)<2*_e&&o.foundPatternCross(ct)},o.prototype.crossCheckVertical=function(i,s,_,_e){for(var ct=this.image,Mt=ct.getHeight(),Ft=this.getCrossCheckStateCount(),Ut=i;Ut>=0&&ct.get(s,Ut);)Ft[2]++,Ut--;if(Ut<0)return NaN;for(;Ut>=0&&!ct.get(s,Ut)&&Ft[1]<=_;)Ft[1]++,Ut--;if(Ut<0||Ft[1]>_)return NaN;for(;Ut>=0&&ct.get(s,Ut)&&Ft[0]<=_;)Ft[0]++,Ut--;if(Ft[0]>_)return NaN;for(Ut=i+1;Ut<Mt&&ct.get(s,Ut);)Ft[2]++,Ut++;if(Ut===Mt)return NaN;for(;Ut<Mt&&!ct.get(s,Ut)&&Ft[3]<_;)Ft[3]++,Ut++;if(Ut===Mt||Ft[3]>=_)return NaN;for(;Ut<Mt&&ct.get(s,Ut)&&Ft[4]<_;)Ft[4]++,Ut++;if(Ft[4]>=_)return NaN;var Xt=Ft[0]+Ft[1]+Ft[2]+Ft[3]+Ft[4];return 5*Math.abs(Xt-_e)>=2*_e?NaN:o.foundPatternCross(Ft)?o.centerFromEnd(Ft,Ut):NaN},o.prototype.crossCheckHorizontal=function(i,s,_,_e){for(var ct=this.image,Mt=ct.getWidth(),Ft=this.getCrossCheckStateCount(),Ut=i;Ut>=0&&ct.get(Ut,s);)Ft[2]++,Ut--;if(Ut<0)return NaN;for(;Ut>=0&&!ct.get(Ut,s)&&Ft[1]<=_;)Ft[1]++,Ut--;if(Ut<0||Ft[1]>_)return NaN;for(;Ut>=0&&ct.get(Ut,s)&&Ft[0]<=_;)Ft[0]++,Ut--;if(Ft[0]>_)return NaN;for(Ut=i+1;Ut<Mt&&ct.get(Ut,s);)Ft[2]++,Ut++;if(Ut===Mt)return NaN;for(;Ut<Mt&&!ct.get(Ut,s)&&Ft[3]<_;)Ft[3]++,Ut++;if(Ut===Mt||Ft[3]>=_)return NaN;for(;Ut<Mt&&ct.get(Ut,s)&&Ft[4]<_;)Ft[4]++,Ut++;if(Ft[4]>=_)return NaN;var Xt=Ft[0]+Ft[1]+Ft[2]+Ft[3]+Ft[4];return 5*Math.abs(Xt-_e)>=_e?NaN:o.foundPatternCross(Ft)?o.centerFromEnd(Ft,Ut):NaN},o.prototype.handlePossibleCenter=function(i,s,_,_e){var ct=i[0]+i[1]+i[2]+i[3]+i[4],Mt=o.centerFromEnd(i,_),Ft=this.crossCheckVertical(s,Math.floor(Mt),i[2],ct);if(!isNaN(Ft)&&(Mt=this.crossCheckHorizontal(Math.floor(Mt),Math.floor(Ft),i[2],ct),!isNaN(Mt)&&(!_e||this.crossCheckDiagonal(Math.floor(Ft),Math.floor(Mt),i[2],ct)))){for(var Ut=ct/7,Xt=!1,Kt=this.possibleCenters,nr=0,rr=Kt.length;nr<rr;nr++){var or=Kt[nr];if(or.aboutEquals(Ut,Ft,Mt)){Kt[nr]=or.combineEstimate(Ft,Mt,Ut),Xt=!0;break}}if(!Xt){var hr=new FinderPattern(Mt,Ft,Ut);Kt.push(hr),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(hr)}return!0}return!1},o.prototype.findRowSkip=function(){var i,s;if(this.possibleCenters.length<=1)return 0;var _=null;try{for(var _e=__values$j(this.possibleCenters),ct=_e.next();!ct.done;ct=_e.next()){var Mt=ct.value;if(Mt.getCount()>=o.CENTER_QUORUM){if(_!=null)return this.hasSkipped=!0,Math.floor((Math.abs(_.getX()-Mt.getX())-Math.abs(_.getY()-Mt.getY()))/2);_=Mt}}}catch(Ft){i={error:Ft}}finally{try{ct&&!ct.done&&(s=_e.return)&&s.call(_e)}finally{if(i)throw i.error}}return 0},o.prototype.haveMultiplyConfirmedCenters=function(){var i,s,_,_e,ct=0,Mt=0,Ft=this.possibleCenters.length;try{for(var Ut=__values$j(this.possibleCenters),Xt=Ut.next();!Xt.done;Xt=Ut.next())(hr=Xt.value).getCount()>=o.CENTER_QUORUM&&(ct++,Mt+=hr.getEstimatedModuleSize())}catch(fr){i={error:fr}}finally{try{Xt&&!Xt.done&&(s=Ut.return)&&s.call(Ut)}finally{if(i)throw i.error}}if(ct<3)return!1;var Kt=Mt/Ft,nr=0;try{for(var rr=__values$j(this.possibleCenters),or=rr.next();!or.done;or=rr.next()){var hr=or.value;nr+=Math.abs(hr.getEstimatedModuleSize()-Kt)}}catch(fr){_={error:fr}}finally{try{or&&!or.done&&(_e=rr.return)&&_e.call(rr)}finally{if(_)throw _.error}}return nr<=.05*Mt},o.prototype.selectBestPatterns=function(){var i,s,_,_e,ct=this.possibleCenters.length;if(ct<3)throw new NotFoundException;var Mt,Ft=this.possibleCenters;if(ct>3){var Ut=0,Xt=0;try{for(var Kt=__values$j(this.possibleCenters),nr=Kt.next();!nr.done;nr=Kt.next()){var rr=nr.value.getEstimatedModuleSize();Ut+=rr,Xt+=rr*rr}}catch(Vr){i={error:Vr}}finally{try{nr&&!nr.done&&(s=Kt.return)&&s.call(Kt)}finally{if(i)throw i.error}}Mt=Ut/ct;var or=Math.sqrt(Xt/ct-Mt*Mt);Ft.sort(function(Vr,Wr){var ro=Math.abs(Wr.getEstimatedModuleSize()-Mt),no=Math.abs(Vr.getEstimatedModuleSize()-Mt);return ro<no?-1:ro>no?1:0});for(var hr=Math.max(.2*Mt,or),fr=0;fr<Ft.length&&Ft.length>3;fr++){var yr=Ft[fr];Math.abs(yr.getEstimatedModuleSize()-Mt)>hr&&(Ft.splice(fr,1),fr--)}}if(Ft.length>3){Ut=0;try{for(var Lr=__values$j(Ft),Br=Lr.next();!Br.done;Br=Lr.next())Ut+=Br.value.getEstimatedModuleSize()}catch(Vr){_={error:Vr}}finally{try{Br&&!Br.done&&(_e=Lr.return)&&_e.call(Lr)}finally{if(_)throw _.error}}Mt=Ut/Ft.length,Ft.sort(function(Vr,Wr){if(Wr.getCount()===Vr.getCount()){var ro=Math.abs(Wr.getEstimatedModuleSize()-Mt),no=Math.abs(Vr.getEstimatedModuleSize()-Mt);return ro<no?1:ro>no?-1:0}return Wr.getCount()-Vr.getCount()}),Ft.splice(3)}return[Ft[0],Ft[1],Ft[2]]},o.CENTER_QUORUM=2,o.MIN_SKIP=3,o.MAX_MODULES=57,o}(),Detector$1=function(){function o(i){this.image=i}return o.prototype.getImage=function(){return this.image},o.prototype.getResultPointCallback=function(){return this.resultPointCallback},o.prototype.detect=function(i){this.resultPointCallback=i==null?null:i.get(DecodeHintType$1.NEED_RESULT_POINT_CALLBACK);var s=new FinderPatternFinder(this.image,this.resultPointCallback).find(i);return this.processFinderPatternInfo(s)},o.prototype.processFinderPatternInfo=function(i){var s=i.getTopLeft(),_=i.getTopRight(),_e=i.getBottomLeft(),ct=this.calculateModuleSize(s,_,_e);if(ct<1)throw new NotFoundException("No pattern found in proccess finder.");var Mt=o.computeDimension(s,_,_e,ct),Ft=Version.getProvisionalVersionForDimension(Mt),Ut=Ft.getDimensionForVersion()-7,Xt=null;if(Ft.getAlignmentPatternCenters().length>0)for(var Kt=_.getX()-s.getX()+_e.getX(),nr=_.getY()-s.getY()+_e.getY(),rr=1-3/Ut,or=Math.floor(s.getX()+rr*(Kt-s.getX())),hr=Math.floor(s.getY()+rr*(nr-s.getY())),fr=4;fr<=16;fr<<=1)try{Xt=this.findAlignmentInRegion(ct,or,hr,fr);break}catch(Br){if(!(Br instanceof NotFoundException))throw Br}var yr=o.createTransform(s,_,_e,Xt,Mt),Lr=o.sampleGrid(this.image,yr,Mt);return new DetectorResult(Lr,Xt===null?[_e,s,_]:[_e,s,_,Xt])},o.createTransform=function(i,s,_,_e,ct){var Mt,Ft,Ut,Xt,Kt=ct-3.5;return _e!==null?(Mt=_e.getX(),Ft=_e.getY(),Xt=Ut=Kt-3):(Mt=s.getX()-i.getX()+_.getX(),Ft=s.getY()-i.getY()+_.getY(),Ut=Kt,Xt=Kt),PerspectiveTransform.quadrilateralToQuadrilateral(3.5,3.5,Kt,3.5,Ut,Xt,3.5,Kt,i.getX(),i.getY(),s.getX(),s.getY(),Mt,Ft,_.getX(),_.getY())},o.sampleGrid=function(i,s,_){return GridSamplerInstance.getInstance().sampleGridWithTransform(i,_,_,s)},o.computeDimension=function(i,s,_,_e){var ct=MathUtils.round(ResultPoint.distance(i,s)/_e),Mt=MathUtils.round(ResultPoint.distance(i,_)/_e),Ft=Math.floor((ct+Mt)/2)+7;switch(3&Ft){case 0:Ft++;break;case 2:Ft--;break;case 3:throw new NotFoundException("Dimensions could be not found.")}return Ft},o.prototype.calculateModuleSize=function(i,s,_){return(this.calculateModuleSizeOneWay(i,s)+this.calculateModuleSizeOneWay(i,_))/2},o.prototype.calculateModuleSizeOneWay=function(i,s){var _=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(i.getX()),Math.floor(i.getY()),Math.floor(s.getX()),Math.floor(s.getY())),_e=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(i.getX()),Math.floor(i.getY()));return isNaN(_)?_e/7:isNaN(_e)?_/7:(_+_e)/14},o.prototype.sizeOfBlackWhiteBlackRunBothWays=function(i,s,_,_e){var ct=this.sizeOfBlackWhiteBlackRun(i,s,_,_e),Mt=1,Ft=i-(_-i);Ft<0?(Mt=i/(i-Ft),Ft=0):Ft>=this.image.getWidth()&&(Mt=(this.image.getWidth()-1-i)/(Ft-i),Ft=this.image.getWidth()-1);var Ut=Math.floor(s-(_e-s)*Mt);return Mt=1,Ut<0?(Mt=s/(s-Ut),Ut=0):Ut>=this.image.getHeight()&&(Mt=(this.image.getHeight()-1-s)/(Ut-s),Ut=this.image.getHeight()-1),Ft=Math.floor(i+(Ft-i)*Mt),(ct+=this.sizeOfBlackWhiteBlackRun(i,s,Ft,Ut))-1},o.prototype.sizeOfBlackWhiteBlackRun=function(i,s,_,_e){var ct=Math.abs(_e-s)>Math.abs(_-i);if(ct){var Mt=i;i=s,s=Mt,Mt=_,_=_e,_e=Mt}for(var Ft=Math.abs(_-i),Ut=Math.abs(_e-s),Xt=-Ft/2,Kt=i<_?1:-1,nr=s<_e?1:-1,rr=0,or=_+Kt,hr=i,fr=s;hr!==or;hr+=Kt){var yr=ct?fr:hr,Lr=ct?hr:fr;if(rr===1===this.image.get(yr,Lr)){if(rr===2)return MathUtils.distance(hr,fr,i,s);rr++}if((Xt+=Ut)>0){if(fr===_e)break;fr+=nr,Xt-=Ft}}return rr===2?MathUtils.distance(_+Kt,_e,i,s):NaN},o.prototype.findAlignmentInRegion=function(i,s,_,_e){var ct=Math.floor(_e*i),Mt=Math.max(0,s-ct),Ft=Math.min(this.image.getWidth()-1,s+ct);if(Ft-Mt<3*i)throw new NotFoundException("Alignment top exceeds estimated module size.");var Ut=Math.max(0,_-ct),Xt=Math.min(this.image.getHeight()-1,_+ct);if(Xt-Ut<3*i)throw new NotFoundException("Alignment bottom exceeds estimated module size.");return new AlignmentPatternFinder(this.image,Mt,Ut,Ft-Mt,Xt-Ut,i,this.resultPointCallback).find()},o}(),QRCodeReader=function(){function o(){this.decoder=new Decoder}return o.prototype.getDecoder=function(){return this.decoder},o.prototype.decode=function(i,s){var _,_e;if(s!=null&&s.get(DecodeHintType$1.PURE_BARCODE)!==void 0){var ct=o.extractPureBits(i.getBlackMatrix());_=this.decoder.decodeBitMatrix(ct,s),_e=o.NO_POINTS}else{var Mt=new Detector$1(i.getBlackMatrix()).detect(s);_=this.decoder.decodeBitMatrix(Mt.getBits(),s),_e=Mt.getPoints()}_.getOther()instanceof QRCodeDecoderMetaData&&_.getOther().applyMirroredCorrection(_e);var Ft=new Result(_.getText(),_.getRawBytes(),void 0,_e,BarcodeFormat$1.QR_CODE,void 0),Ut=_.getByteSegments();Ut!==null&&Ft.putMetadata(ResultMetadataType$1.BYTE_SEGMENTS,Ut);var Xt=_.getECLevel();return Xt!==null&&Ft.putMetadata(ResultMetadataType$1.ERROR_CORRECTION_LEVEL,Xt),_.hasStructuredAppend()&&(Ft.putMetadata(ResultMetadataType$1.STRUCTURED_APPEND_SEQUENCE,_.getStructuredAppendSequenceNumber()),Ft.putMetadata(ResultMetadataType$1.STRUCTURED_APPEND_PARITY,_.getStructuredAppendParity())),Ft},o.prototype.reset=function(){},o.extractPureBits=function(i){var s=i.getTopLeftOnBit(),_=i.getBottomRightOnBit();if(s===null||_===null)throw new NotFoundException;var _e=this.moduleSize(s,i),ct=s[1],Mt=_[1],Ft=s[0],Ut=_[0];if(Ft>=Ut||ct>=Mt)throw new NotFoundException;if(Mt-ct!=Ut-Ft&&(Ut=Ft+(Mt-ct))>=i.getWidth())throw new NotFoundException;var Xt=Math.round((Ut-Ft+1)/_e),Kt=Math.round((Mt-ct+1)/_e);if(Xt<=0||Kt<=0)throw new NotFoundException;if(Kt!==Xt)throw new NotFoundException;var nr=Math.floor(_e/2);ct+=nr;var rr=(Ft+=nr)+Math.floor((Xt-1)*_e)-Ut;if(rr>0){if(rr>nr)throw new NotFoundException;Ft-=rr}var or=ct+Math.floor((Kt-1)*_e)-Mt;if(or>0){if(or>nr)throw new NotFoundException;ct-=or}for(var hr=new BitMatrix(Xt,Kt),fr=0;fr<Kt;fr++)for(var yr=ct+Math.floor(fr*_e),Lr=0;Lr<Xt;Lr++)i.get(Ft+Math.floor(Lr*_e),yr)&&hr.set(Lr,fr);return hr},o.moduleSize=function(i,s){for(var _=s.getHeight(),_e=s.getWidth(),ct=i[0],Mt=i[1],Ft=!0,Ut=0;ct<_e&&Mt<_;){if(Ft!==s.get(ct,Mt)){if(++Ut==5)break;Ft=!Ft}ct++,Mt++}if(ct===_e||Mt===_)throw new NotFoundException;return(ct-i[0])/7},o.NO_POINTS=new Array,o}(),__values$i=function(o){var i=typeof Symbol=="function"&&Symbol.iterator,s=i&&o[i],_=0;if(s)return s.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&_>=o.length&&(o=void 0),{value:o&&o[_++],done:!o}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},PDF417Common=function(){function o(){}return o.prototype.PDF417Common=function(){},o.getBitCountSum=function(i){return MathUtils.sum(i)},o.toIntArray=function(i){var s,_;if(i==null||!i.length)return o.EMPTY_INT_ARRAY;var _e=new Int32Array(i.length),ct=0;try{for(var Mt=__values$i(i),Ft=Mt.next();!Ft.done;Ft=Mt.next()){var Ut=Ft.value;_e[ct++]=Ut}}catch(Xt){s={error:Xt}}finally{try{Ft&&!Ft.done&&(_=Mt.return)&&_.call(Mt)}finally{if(s)throw s.error}}return _e},o.getCodeword=function(i){var s=Arrays.binarySearch(o.SYMBOL_TABLE,262143&i);return s<0?-1:(o.CODEWORD_TABLE[s]-1)%o.NUMBER_OF_CODEWORDS},o.NUMBER_OF_CODEWORDS=929,o.MAX_CODEWORDS_IN_BARCODE=o.NUMBER_OF_CODEWORDS-1,o.MIN_ROWS_IN_BARCODE=3,o.MAX_ROWS_IN_BARCODE=90,o.MODULES_IN_CODEWORD=17,o.MODULES_IN_STOP_PATTERN=18,o.BARS_IN_MODULE=8,o.EMPTY_INT_ARRAY=new Int32Array([]),o.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),o.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),o}(),PDF417DetectorResult=function(){function o(i,s){this.bits=i,this.points=s}return o.prototype.getBits=function(){return this.bits},o.prototype.getPoints=function(){return this.points},o}(),__values$h=function(o){var i=typeof Symbol=="function"&&Symbol.iterator,s=i&&o[i],_=0;if(s)return s.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&_>=o.length&&(o=void 0),{value:o&&o[_++],done:!o}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},Detector=function(){function o(){}return o.detectMultiple=function(i,s,_){var _e=i.getBlackMatrix(),ct=o.detect(_,_e);return ct.length||((_e=_e.clone()).rotate180(),ct=o.detect(_,_e)),new PDF417DetectorResult(_e,ct)},o.detect=function(i,s){for(var _,_e,ct=new Array,Mt=0,Ft=0,Ut=!1;Mt<s.getHeight();){var Xt=o.findVertices(s,Mt,Ft);if(Xt[0]!=null||Xt[3]!=null){if(Ut=!0,ct.push(Xt),!i)break;Xt[2]!=null?(Ft=Math.trunc(Xt[2].getX()),Mt=Math.trunc(Xt[2].getY())):(Ft=Math.trunc(Xt[4].getX()),Mt=Math.trunc(Xt[4].getY()))}else{if(!Ut)break;Ut=!1,Ft=0;try{for(var Kt=(_=void 0,__values$h(ct)),nr=Kt.next();!nr.done;nr=Kt.next()){var rr=nr.value;rr[1]!=null&&(Mt=Math.trunc(Math.max(Mt,rr[1].getY()))),rr[3]!=null&&(Mt=Math.max(Mt,Math.trunc(rr[3].getY())))}}catch(or){_={error:or}}finally{try{nr&&!nr.done&&(_e=Kt.return)&&_e.call(Kt)}finally{if(_)throw _.error}}Mt+=o.ROW_STEP}}return ct},o.findVertices=function(i,s,_){var _e=i.getHeight(),ct=i.getWidth(),Mt=new Array(8);return o.copyToResult(Mt,o.findRowsWithPattern(i,_e,ct,s,_,o.START_PATTERN),o.INDEXES_START_PATTERN),Mt[4]!=null&&(_=Math.trunc(Mt[4].getX()),s=Math.trunc(Mt[4].getY())),o.copyToResult(Mt,o.findRowsWithPattern(i,_e,ct,s,_,o.STOP_PATTERN),o.INDEXES_STOP_PATTERN),Mt},o.copyToResult=function(i,s,_){for(var _e=0;_e<_.length;_e++)i[_[_e]]=s[_e]},o.findRowsWithPattern=function(i,s,_,_e,ct,Mt){for(var Ft=new Array(4),Ut=!1,Xt=new Int32Array(Mt.length);_e<s;_e+=o.ROW_STEP)if((or=o.findGuardPattern(i,ct,_e,_,!1,Mt,Xt))!=null){for(;_e>0;){if((rr=o.findGuardPattern(i,ct,--_e,_,!1,Mt,Xt))==null){_e++;break}or=rr}Ft[0]=new ResultPoint(or[0],_e),Ft[1]=new ResultPoint(or[1],_e),Ut=!0;break}var Kt=_e+1;if(Ut){for(var nr=0,rr=Int32Array.from([Math.trunc(Ft[0].getX()),Math.trunc(Ft[1].getX())]);Kt<s;Kt++){var or;if((or=o.findGuardPattern(i,rr[0],Kt,_,!1,Mt,Xt))!=null&&Math.abs(rr[0]-or[0])<o.MAX_PATTERN_DRIFT&&Math.abs(rr[1]-or[1])<o.MAX_PATTERN_DRIFT)rr=or,nr=0;else{if(nr>o.SKIPPED_ROW_COUNT_MAX)break;nr++}}Kt-=nr+1,Ft[2]=new ResultPoint(rr[0],Kt),Ft[3]=new ResultPoint(rr[1],Kt)}return Kt-_e<o.BARCODE_MIN_HEIGHT&&Arrays.fill(Ft,null),Ft},o.findGuardPattern=function(i,s,_,_e,ct,Mt,Ft){Arrays.fillWithin(Ft,0,Ft.length,0);for(var Ut=s,Xt=0;i.get(Ut,_)&&Ut>0&&Xt++<o.MAX_PIXEL_DRIFT;)Ut--;for(var Kt=Ut,nr=0,rr=Mt.length,or=ct;Kt<_e;Kt++)if(i.get(Kt,_)!==or)Ft[nr]++;else{if(nr===rr-1){if(o.patternMatchVariance(Ft,Mt,o.MAX_INDIVIDUAL_VARIANCE)<o.MAX_AVG_VARIANCE)return new Int32Array([Ut,Kt]);Ut+=Ft[0]+Ft[1],System.arraycopy(Ft,2,Ft,0,nr-1),Ft[nr-1]=0,Ft[nr]=0,nr--}else nr++;Ft[nr]=1,or=!or}return nr===rr-1&&o.patternMatchVariance(Ft,Mt,o.MAX_INDIVIDUAL_VARIANCE)<o.MAX_AVG_VARIANCE?new Int32Array([Ut,Kt-1]):null},o.patternMatchVariance=function(i,s,_){for(var _e=i.length,ct=0,Mt=0,Ft=0;Ft<_e;Ft++)ct+=i[Ft],Mt+=s[Ft];if(ct<Mt)return 1/0;var Ut=ct/Mt;_*=Ut;for(var Xt=0,Kt=0;Kt<_e;Kt++){var nr=i[Kt],rr=s[Kt]*Ut,or=nr>rr?nr-rr:rr-nr;if(or>_)return 1/0;Xt+=or}return Xt/ct},o.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),o.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),o.MAX_AVG_VARIANCE=.42,o.MAX_INDIVIDUAL_VARIANCE=.8,o.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),o.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),o.MAX_PIXEL_DRIFT=3,o.MAX_PATTERN_DRIFT=5,o.SKIPPED_ROW_COUNT_MAX=25,o.ROW_STEP=5,o.BARCODE_MIN_HEIGHT=10,o}(),__values$g=function(o){var i=typeof Symbol=="function"&&Symbol.iterator,s=i&&o[i],_=0;if(s)return s.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&_>=o.length&&(o=void 0),{value:o&&o[_++],done:!o}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},ModulusPoly=function(){function o(i,s){if(s.length===0)throw new IllegalArgumentException;this.field=i;var _=s.length;if(_>1&&s[0]===0){for(var _e=1;_e<_&&s[_e]===0;)_e++;_e===_?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(_-_e),System.arraycopy(s,_e,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}return o.prototype.getCoefficients=function(){return this.coefficients},o.prototype.getDegree=function(){return this.coefficients.length-1},o.prototype.isZero=function(){return this.coefficients[0]===0},o.prototype.getCoefficient=function(i){return this.coefficients[this.coefficients.length-1-i]},o.prototype.evaluateAt=function(i){var s,_;if(i===0)return this.getCoefficient(0);if(i===1){var _e=0;try{for(var ct=__values$g(this.coefficients),Mt=ct.next();!Mt.done;Mt=ct.next()){var Ft=Mt.value;_e=this.field.add(_e,Ft)}}catch(nr){s={error:nr}}finally{try{Mt&&!Mt.done&&(_=ct.return)&&_.call(ct)}finally{if(s)throw s.error}}return _e}for(var Ut=this.coefficients[0],Xt=this.coefficients.length,Kt=1;Kt<Xt;Kt++)Ut=this.field.add(this.field.multiply(i,Ut),this.coefficients[Kt]);return Ut},o.prototype.add=function(i){if(!this.field.equals(i.field))throw new IllegalArgumentException("ModulusPolys do not have same ModulusGF field");if(this.isZero())return i;if(i.isZero())return this;var s=this.coefficients,_=i.coefficients;if(s.length>_.length){var _e=s;s=_,_=_e}var ct=new Int32Array(_.length),Mt=_.length-s.length;System.arraycopy(_,0,ct,0,Mt);for(var Ft=Mt;Ft<_.length;Ft++)ct[Ft]=this.field.add(s[Ft-Mt],_[Ft]);return new o(this.field,ct)},o.prototype.subtract=function(i){if(!this.field.equals(i.field))throw new IllegalArgumentException("ModulusPolys do not have same ModulusGF field");return i.isZero()?this:this.add(i.negative())},o.prototype.multiply=function(i){return i instanceof o?this.multiplyOther(i):this.multiplyScalar(i)},o.prototype.multiplyOther=function(i){if(!this.field.equals(i.field))throw new IllegalArgumentException("ModulusPolys do not have same ModulusGF field");if(this.isZero()||i.isZero())return new o(this.field,new Int32Array([0]));for(var s=this.coefficients,_=s.length,_e=i.coefficients,ct=_e.length,Mt=new Int32Array(_+ct-1),Ft=0;Ft<_;Ft++)for(var Ut=s[Ft],Xt=0;Xt<ct;Xt++)Mt[Ft+Xt]=this.field.add(Mt[Ft+Xt],this.field.multiply(Ut,_e[Xt]));return new o(this.field,Mt)},o.prototype.negative=function(){for(var i=this.coefficients.length,s=new Int32Array(i),_=0;_<i;_++)s[_]=this.field.subtract(0,this.coefficients[_]);return new o(this.field,s)},o.prototype.multiplyScalar=function(i){if(i===0)return new o(this.field,new Int32Array([0]));if(i===1)return this;for(var s=this.coefficients.length,_=new Int32Array(s),_e=0;_e<s;_e++)_[_e]=this.field.multiply(this.coefficients[_e],i);return new o(this.field,_)},o.prototype.multiplyByMonomial=function(i,s){if(i<0)throw new IllegalArgumentException;if(s===0)return new o(this.field,new Int32Array([0]));for(var _=this.coefficients.length,_e=new Int32Array(_+i),ct=0;ct<_;ct++)_e[ct]=this.field.multiply(this.coefficients[ct],s);return new o(this.field,_e)},o.prototype.toString=function(){for(var i=new StringBuilder,s=this.getDegree();s>=0;s--){var _=this.getCoefficient(s);_!==0&&(_<0?(i.append(" - "),_=-_):i.length()>0&&i.append(" + "),s!==0&&_===1||i.append(_),s!==0&&(s===1?i.append("x"):(i.append("x^"),i.append(s))))}return i.toString()},o}(),ModulusBase=function(){function o(){}return o.prototype.add=function(i,s){return(i+s)%this.modulus},o.prototype.subtract=function(i,s){return(this.modulus+i-s)%this.modulus},o.prototype.exp=function(i){return this.expTable[i]},o.prototype.log=function(i){if(i===0)throw new IllegalArgumentException;return this.logTable[i]},o.prototype.inverse=function(i){if(i===0)throw new ArithmeticException;return this.expTable[this.modulus-this.logTable[i]-1]},o.prototype.multiply=function(i,s){return i===0||s===0?0:this.expTable[(this.logTable[i]+this.logTable[s])%(this.modulus-1)]},o.prototype.getSize=function(){return this.modulus},o.prototype.equals=function(i){return i===this},o}(),__extends$i=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}(),ModulusGF=function(o){function i(s,_){var _e=o.call(this)||this;_e.modulus=s,_e.expTable=new Int32Array(s),_e.logTable=new Int32Array(s);for(var ct=1,Mt=0;Mt<s;Mt++)_e.expTable[Mt]=ct,ct=ct*_%s;for(Mt=0;Mt<s-1;Mt++)_e.logTable[_e.expTable[Mt]]=Mt;return _e.zero=new ModulusPoly(_e,new Int32Array([0])),_e.one=new ModulusPoly(_e,new Int32Array([1])),_e}return __extends$i(i,o),i.prototype.getZero=function(){return this.zero},i.prototype.getOne=function(){return this.one},i.prototype.buildMonomial=function(s,_){if(s<0)throw new IllegalArgumentException;if(_===0)return this.zero;var _e=new Int32Array(s+1);return _e[0]=_,new ModulusPoly(this,_e)},i.PDF417_GF=new i(PDF417Common.NUMBER_OF_CODEWORDS,3),i}(ModulusBase),__values$f=function(o){var i=typeof Symbol=="function"&&Symbol.iterator,s=i&&o[i],_=0;if(s)return s.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&_>=o.length&&(o=void 0),{value:o&&o[_++],done:!o}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},ErrorCorrection=function(){function o(){this.field=ModulusGF.PDF417_GF}return o.prototype.decode=function(i,s,_){for(var _e,ct,Mt=new ModulusPoly(this.field,i),Ft=new Int32Array(s),Ut=!1,Xt=s;Xt>0;Xt--){var Kt=Mt.evaluateAt(this.field.exp(Xt));Ft[s-Xt]=Kt,Kt!==0&&(Ut=!0)}if(!Ut)return 0;var nr=this.field.getOne();if(_!=null)try{for(var rr=__values$f(_),or=rr.next();!or.done;or=rr.next()){var hr=or.value,fr=this.field.exp(i.length-1-hr),yr=new ModulusPoly(this.field,new Int32Array([this.field.subtract(0,fr),1]));nr=nr.multiply(yr)}}catch(ko){_e={error:ko}}finally{try{or&&!or.done&&(ct=rr.return)&&ct.call(rr)}finally{if(_e)throw _e.error}}var Lr=new ModulusPoly(this.field,Ft),Br=this.runEuclideanAlgorithm(this.field.buildMonomial(s,1),Lr,s),Vr=Br[0],Wr=Br[1],ro=this.findErrorLocations(Vr),no=this.findErrorMagnitudes(Wr,Vr,ro);for(Xt=0;Xt<ro.length;Xt++){var so=i.length-1-this.field.log(ro[Xt]);if(so<0)throw ChecksumException.getChecksumInstance();i[so]=this.field.subtract(i[so],no[Xt])}return ro.length},o.prototype.runEuclideanAlgorithm=function(i,s,_){if(i.getDegree()<s.getDegree()){var _e=i;i=s,s=_e}for(var ct=i,Mt=s,Ft=this.field.getZero(),Ut=this.field.getOne();Mt.getDegree()>=Math.round(_/2);){var Xt=ct,Kt=Ft;if(Ft=Ut,(ct=Mt).isZero())throw ChecksumException.getChecksumInstance();Mt=Xt;for(var nr=this.field.getZero(),rr=ct.getCoefficient(ct.getDegree()),or=this.field.inverse(rr);Mt.getDegree()>=ct.getDegree()&&!Mt.isZero();){var hr=Mt.getDegree()-ct.getDegree(),fr=this.field.multiply(Mt.getCoefficient(Mt.getDegree()),or);nr=nr.add(this.field.buildMonomial(hr,fr)),Mt=Mt.subtract(ct.multiplyByMonomial(hr,fr))}Ut=nr.multiply(Ft).subtract(Kt).negative()}var yr=Ut.getCoefficient(0);if(yr===0)throw ChecksumException.getChecksumInstance();var Lr=this.field.inverse(yr);return[Ut.multiply(Lr),Mt.multiply(Lr)]},o.prototype.findErrorLocations=function(i){for(var s=i.getDegree(),_=new Int32Array(s),_e=0,ct=1;ct<this.field.getSize()&&_e<s;ct++)i.evaluateAt(ct)===0&&(_[_e]=this.field.inverse(ct),_e++);if(_e!==s)throw ChecksumException.getChecksumInstance();return _},o.prototype.findErrorMagnitudes=function(i,s,_){for(var _e=s.getDegree(),ct=new Int32Array(_e),Mt=1;Mt<=_e;Mt++)ct[_e-Mt]=this.field.multiply(Mt,s.getCoefficient(Mt));var Ft=new ModulusPoly(this.field,ct),Ut=_.length,Xt=new Int32Array(Ut);for(Mt=0;Mt<Ut;Mt++){var Kt=this.field.inverse(_[Mt]),nr=this.field.subtract(0,i.evaluateAt(Kt)),rr=this.field.inverse(Ft.evaluateAt(Kt));Xt[Mt]=this.field.multiply(nr,rr)}return Xt},o}(),BoundingBox=function(){function o(i,s,_,_e,ct){i instanceof o?this.constructor_2(i):this.constructor_1(i,s,_,_e,ct)}return o.prototype.constructor_1=function(i,s,_,_e,ct){var Mt=s==null||_==null,Ft=_e==null||ct==null;if(Mt&&Ft)throw new NotFoundException;Mt?(s=new ResultPoint(0,_e.getY()),_=new ResultPoint(0,ct.getY())):Ft&&(_e=new ResultPoint(i.getWidth()-1,s.getY()),ct=new ResultPoint(i.getWidth()-1,_.getY())),this.image=i,this.topLeft=s,this.bottomLeft=_,this.topRight=_e,this.bottomRight=ct,this.minX=Math.trunc(Math.min(s.getX(),_.getX())),this.maxX=Math.trunc(Math.max(_e.getX(),ct.getX())),this.minY=Math.trunc(Math.min(s.getY(),_e.getY())),this.maxY=Math.trunc(Math.max(_.getY(),ct.getY()))},o.prototype.constructor_2=function(i){this.image=i.image,this.topLeft=i.getTopLeft(),this.bottomLeft=i.getBottomLeft(),this.topRight=i.getTopRight(),this.bottomRight=i.getBottomRight(),this.minX=i.getMinX(),this.maxX=i.getMaxX(),this.minY=i.getMinY(),this.maxY=i.getMaxY()},o.merge=function(i,s){return i==null?s:s==null?i:new o(i.image,i.topLeft,i.bottomLeft,s.topRight,s.bottomRight)},o.prototype.addMissingRows=function(i,s,_){var _e=this.topLeft,ct=this.bottomLeft,Mt=this.topRight,Ft=this.bottomRight;if(i>0){var Ut=_?this.topLeft:this.topRight,Xt=Math.trunc(Ut.getY()-i);Xt<0&&(Xt=0);var Kt=new ResultPoint(Ut.getX(),Xt);_?_e=Kt:Mt=Kt}if(s>0){var nr=_?this.bottomLeft:this.bottomRight,rr=Math.trunc(nr.getY()+s);rr>=this.image.getHeight()&&(rr=this.image.getHeight()-1);var or=new ResultPoint(nr.getX(),rr);_?ct=or:Ft=or}return new o(this.image,_e,ct,Mt,Ft)},o.prototype.getMinX=function(){return this.minX},o.prototype.getMaxX=function(){return this.maxX},o.prototype.getMinY=function(){return this.minY},o.prototype.getMaxY=function(){return this.maxY},o.prototype.getTopLeft=function(){return this.topLeft},o.prototype.getTopRight=function(){return this.topRight},o.prototype.getBottomLeft=function(){return this.bottomLeft},o.prototype.getBottomRight=function(){return this.bottomRight},o}(),BarcodeMetadata=function(){function o(i,s,_,_e){this.columnCount=i,this.errorCorrectionLevel=_e,this.rowCountUpperPart=s,this.rowCountLowerPart=_,this.rowCount=s+_}return o.prototype.getColumnCount=function(){return this.columnCount},o.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},o.prototype.getRowCount=function(){return this.rowCount},o.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},o.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},o}(),Formatter=function(){function o(){this.buffer=""}return o.form=function(i,s){var _=-1;return i.replace(/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g,function(_e,ct,Mt,Ft,Ut,Xt){if(_e==="%%")return"%";if(s[++_]!==void 0){_e=Ft?parseInt(Ft.substr(1)):void 0;var Kt,nr=Ut?parseInt(Ut.substr(1)):void 0;switch(Xt){case"s":Kt=s[_];break;case"c":Kt=s[_][0];break;case"f":Kt=parseFloat(s[_]).toFixed(_e);break;case"p":Kt=parseFloat(s[_]).toPrecision(_e);break;case"e":Kt=parseFloat(s[_]).toExponential(_e);break;case"x":Kt=parseInt(s[_]).toString(nr||16);break;case"d":Kt=parseFloat(parseInt(s[_],nr||10).toPrecision(_e)).toFixed(0)}Kt=typeof Kt=="object"?JSON.stringify(Kt):(+Kt).toString(nr);for(var rr=parseInt(Mt),or=Mt&&Mt[0]+""=="0"?"0":" ";Kt.length<rr;)Kt=ct!==void 0?Kt+or:or+Kt;return Kt}})},o.prototype.format=function(i){for(var s=[],_=1;_<arguments.length;_++)s[_-1]=arguments[_];this.buffer+=o.form(i,s)},o.prototype.toString=function(){return this.buffer},o}(),__values$e=function(o){var i=typeof Symbol=="function"&&Symbol.iterator,s=i&&o[i],_=0;if(s)return s.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&_>=o.length&&(o=void 0),{value:o&&o[_++],done:!o}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},DetectionResultColumn=function(){function o(i){this.boundingBox=new BoundingBox(i),this.codewords=new Array(i.getMaxY()-i.getMinY()+1)}return o.prototype.getCodewordNearby=function(i){var s=this.getCodeword(i);if(s!=null)return s;for(var _=1;_<o.MAX_NEARBY_DISTANCE;_++){var _e=this.imageRowToCodewordIndex(i)-_;if(_e>=0&&(s=this.codewords[_e])!=null||(_e=this.imageRowToCodewordIndex(i)+_)<this.codewords.length&&(s=this.codewords[_e])!=null)return s}return null},o.prototype.imageRowToCodewordIndex=function(i){return i-this.boundingBox.getMinY()},o.prototype.setCodeword=function(i,s){this.codewords[this.imageRowToCodewordIndex(i)]=s},o.prototype.getCodeword=function(i){return this.codewords[this.imageRowToCodewordIndex(i)]},o.prototype.getBoundingBox=function(){return this.boundingBox},o.prototype.getCodewords=function(){return this.codewords},o.prototype.toString=function(){var i,s,_=new Formatter,_e=0;try{for(var ct=__values$e(this.codewords),Mt=ct.next();!Mt.done;Mt=ct.next()){var Ft=Mt.value;Ft!=null?_.format("%3d: %3d|%3d%n",_e++,Ft.getRowNumber(),Ft.getValue()):_.format("%3d:    |   %n",_e++)}}catch(Ut){i={error:Ut}}finally{try{Mt&&!Mt.done&&(s=ct.return)&&s.call(ct)}finally{if(i)throw i.error}}return _.toString()},o.MAX_NEARBY_DISTANCE=5,o}(),__values$d=function(o){var i=typeof Symbol=="function"&&Symbol.iterator,s=i&&o[i],_=0;if(s)return s.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&_>=o.length&&(o=void 0),{value:o&&o[_++],done:!o}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},__read$1=function(o,i){var s=typeof Symbol=="function"&&o[Symbol.iterator];if(!s)return o;var _,_e,ct=s.call(o),Mt=[];try{for(;(i===void 0||i-- >0)&&!(_=ct.next()).done;)Mt.push(_.value)}catch(Ft){_e={error:Ft}}finally{try{_&&!_.done&&(s=ct.return)&&s.call(ct)}finally{if(_e)throw _e.error}}return Mt},BarcodeValue=function(){function o(){this.values=new Map}return o.prototype.setValue=function(i){i=Math.trunc(i);var s=this.values.get(i);s==null&&(s=0),s++,this.values.set(i,s)},o.prototype.getValue=function(){var i,s,_=-1,_e=new Array,ct=function(Xt,Kt){var nr=function(){return Xt},rr=function(){return Kt};rr()>_?(_=rr(),(_e=[]).push(nr())):rr()===_&&_e.push(nr())};try{for(var Mt=__values$d(this.values.entries()),Ft=Mt.next();!Ft.done;Ft=Mt.next()){var Ut=__read$1(Ft.value,2);ct(Ut[0],Ut[1])}}catch(Xt){i={error:Xt}}finally{try{Ft&&!Ft.done&&(s=Mt.return)&&s.call(Mt)}finally{if(i)throw i.error}}return PDF417Common.toIntArray(_e)},o.prototype.getConfidence=function(i){return this.values.get(i)},o}(),__extends$h=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}(),__values$c=function(o){var i=typeof Symbol=="function"&&Symbol.iterator,s=i&&o[i],_=0;if(s)return s.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&_>=o.length&&(o=void 0),{value:o&&o[_++],done:!o}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},DetectionResultRowIndicatorColumn=function(o){function i(s,_){var _e=o.call(this,s)||this;return _e._isLeft=_,_e}return __extends$h(i,o),i.prototype.setRowNumbers=function(){var s,_;try{for(var _e=__values$c(this.getCodewords()),ct=_e.next();!ct.done;ct=_e.next()){var Mt=ct.value;Mt!=null&&Mt.setRowNumberAsRowIndicatorColumn()}}catch(Ft){s={error:Ft}}finally{try{ct&&!ct.done&&(_=_e.return)&&_.call(_e)}finally{if(s)throw s.error}}},i.prototype.adjustCompleteIndicatorColumnRowNumbers=function(s){var _=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(_,s);for(var _e=this.getBoundingBox(),ct=this._isLeft?_e.getTopLeft():_e.getTopRight(),Mt=this._isLeft?_e.getBottomLeft():_e.getBottomRight(),Ft=this.imageRowToCodewordIndex(Math.trunc(ct.getY())),Ut=this.imageRowToCodewordIndex(Math.trunc(Mt.getY())),Xt=-1,Kt=1,nr=0,rr=Ft;rr<Ut;rr++)if(_[rr]!=null){var or=_[rr],hr=or.getRowNumber()-Xt;if(hr===0)nr++;else if(hr===1)Kt=Math.max(Kt,nr),nr=1,Xt=or.getRowNumber();else if(hr<0||or.getRowNumber()>=s.getRowCount()||hr>rr)_[rr]=null;else{for(var fr=void 0,yr=(fr=Kt>2?(Kt-2)*hr:hr)>=rr,Lr=1;Lr<=fr&&!yr;Lr++)yr=_[rr-Lr]!=null;yr?_[rr]=null:(Xt=or.getRowNumber(),nr=1)}}},i.prototype.getRowHeights=function(){var s,_,_e=this.getBarcodeMetadata();if(_e==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(_e);var ct=new Int32Array(_e.getRowCount());try{for(var Mt=__values$c(this.getCodewords()),Ft=Mt.next();!Ft.done;Ft=Mt.next()){var Ut=Ft.value;if(Ut!=null){var Xt=Ut.getRowNumber();if(Xt>=ct.length)continue;ct[Xt]++}}}catch(Kt){s={error:Kt}}finally{try{Ft&&!Ft.done&&(_=Mt.return)&&_.call(Mt)}finally{if(s)throw s.error}}return ct},i.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(s){for(var _=this.getBoundingBox(),_e=this._isLeft?_.getTopLeft():_.getTopRight(),ct=this._isLeft?_.getBottomLeft():_.getBottomRight(),Mt=this.imageRowToCodewordIndex(Math.trunc(_e.getY())),Ft=this.imageRowToCodewordIndex(Math.trunc(ct.getY())),Ut=this.getCodewords(),Xt=-1,Kt=Mt;Kt<Ft;Kt++)if(Ut[Kt]!=null){var nr=Ut[Kt];nr.setRowNumberAsRowIndicatorColumn();var rr=nr.getRowNumber()-Xt;rr===0||(rr===1?Xt=nr.getRowNumber():nr.getRowNumber()>=s.getRowCount()?Ut[Kt]=null:Xt=nr.getRowNumber())}},i.prototype.getBarcodeMetadata=function(){var s,_,_e=this.getCodewords(),ct=new BarcodeValue,Mt=new BarcodeValue,Ft=new BarcodeValue,Ut=new BarcodeValue;try{for(var Xt=__values$c(_e),Kt=Xt.next();!Kt.done;Kt=Xt.next()){var nr=Kt.value;if(nr!=null){nr.setRowNumberAsRowIndicatorColumn();var rr=nr.getValue()%30,or=nr.getRowNumber();switch(this._isLeft||(or+=2),or%3){case 0:Mt.setValue(3*rr+1);break;case 1:Ut.setValue(rr/3),Ft.setValue(rr%3);break;case 2:ct.setValue(rr+1)}}}}catch(fr){s={error:fr}}finally{try{Kt&&!Kt.done&&(_=Xt.return)&&_.call(Xt)}finally{if(s)throw s.error}}if(ct.getValue().length===0||Mt.getValue().length===0||Ft.getValue().length===0||Ut.getValue().length===0||ct.getValue()[0]<1||Mt.getValue()[0]+Ft.getValue()[0]<PDF417Common.MIN_ROWS_IN_BARCODE||Mt.getValue()[0]+Ft.getValue()[0]>PDF417Common.MAX_ROWS_IN_BARCODE)return null;var hr=new BarcodeMetadata(ct.getValue()[0],Mt.getValue()[0],Ft.getValue()[0],Ut.getValue()[0]);return this.removeIncorrectCodewords(_e,hr),hr},i.prototype.removeIncorrectCodewords=function(s,_){for(var _e=0;_e<s.length;_e++){var ct=s[_e];if(s[_e]!=null){var Mt=ct.getValue()%30,Ft=ct.getRowNumber();if(Ft>_.getRowCount())s[_e]=null;else switch(this._isLeft||(Ft+=2),Ft%3){case 0:3*Mt+1!==_.getRowCountUpperPart()&&(s[_e]=null);break;case 1:Math.trunc(Mt/3)===_.getErrorCorrectionLevel()&&Mt%3===_.getRowCountLowerPart()||(s[_e]=null);break;case 2:Mt+1!==_.getColumnCount()&&(s[_e]=null)}}}},i.prototype.isLeft=function(){return this._isLeft},i.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+o.prototype.toString.call(this)},i}(DetectionResultColumn),__values$b=function(o){var i=typeof Symbol=="function"&&Symbol.iterator,s=i&&o[i],_=0;if(s)return s.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&_>=o.length&&(o=void 0),{value:o&&o[_++],done:!o}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},DetectionResult=function(){function o(i,s){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=i,this.barcodeColumnCount=i.getColumnCount(),this.boundingBox=s,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return o.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var i,s=PDF417Common.MAX_CODEWORDS_IN_BARCODE;do i=s,s=this.adjustRowNumbersAndGetCount();while(s>0&&s<i);return this.detectionResultColumns},o.prototype.adjustIndicatorColumnRowNumbers=function(i){i!=null&&i.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},o.prototype.adjustRowNumbersAndGetCount=function(){var i=this.adjustRowNumbersByRow();if(i===0)return 0;for(var s=1;s<this.barcodeColumnCount+1;s++)for(var _=this.detectionResultColumns[s].getCodewords(),_e=0;_e<_.length;_e++)_[_e]!=null&&(_[_e].hasValidRowNumber()||this.adjustRowNumbers(s,_e,_));return i},o.prototype.adjustRowNumbersByRow=function(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()},o.prototype.adjustRowNumbersFromBothRI=function(){if(this.detectionResultColumns[0]!=null&&this.detectionResultColumns[this.barcodeColumnCount+1]!=null){for(var i=this.detectionResultColumns[0].getCodewords(),s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),_=0;_<i.length;_++)if(i[_]!=null&&s[_]!=null&&i[_].getRowNumber()===s[_].getRowNumber())for(var _e=1;_e<=this.barcodeColumnCount;_e++){var ct=this.detectionResultColumns[_e].getCodewords()[_];ct!=null&&(ct.setRowNumber(i[_].getRowNumber()),ct.hasValidRowNumber()||(this.detectionResultColumns[_e].getCodewords()[_]=null))}}},o.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var i=0,s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),_=0;_<s.length;_++)if(s[_]!=null)for(var _e=s[_].getRowNumber(),ct=0,Mt=this.barcodeColumnCount+1;Mt>0&&ct<this.ADJUST_ROW_NUMBER_SKIP;Mt--){var Ft=this.detectionResultColumns[Mt].getCodewords()[_];Ft!=null&&(ct=o.adjustRowNumberIfValid(_e,ct,Ft),Ft.hasValidRowNumber()||i++)}return i},o.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var i=0,s=this.detectionResultColumns[0].getCodewords(),_=0;_<s.length;_++)if(s[_]!=null)for(var _e=s[_].getRowNumber(),ct=0,Mt=1;Mt<this.barcodeColumnCount+1&&ct<this.ADJUST_ROW_NUMBER_SKIP;Mt++){var Ft=this.detectionResultColumns[Mt].getCodewords()[_];Ft!=null&&(ct=o.adjustRowNumberIfValid(_e,ct,Ft),Ft.hasValidRowNumber()||i++)}return i},o.adjustRowNumberIfValid=function(i,s,_){return _==null||_.hasValidRowNumber()||(_.isValidRowNumber(i)?(_.setRowNumber(i),s=0):++s),s},o.prototype.adjustRowNumbers=function(i,s,_){var _e,ct;if(this.detectionResultColumns[i-1]!=null){var Mt=_[s],Ft=this.detectionResultColumns[i-1].getCodewords(),Ut=Ft;this.detectionResultColumns[i+1]!=null&&(Ut=this.detectionResultColumns[i+1].getCodewords());var Xt=new Array(14);Xt[2]=Ft[s],Xt[3]=Ut[s],s>0&&(Xt[0]=_[s-1],Xt[4]=Ft[s-1],Xt[5]=Ut[s-1]),s>1&&(Xt[8]=_[s-2],Xt[10]=Ft[s-2],Xt[11]=Ut[s-2]),s<_.length-1&&(Xt[1]=_[s+1],Xt[6]=Ft[s+1],Xt[7]=Ut[s+1]),s<_.length-2&&(Xt[9]=_[s+2],Xt[12]=Ft[s+2],Xt[13]=Ut[s+2]);try{for(var Kt=__values$b(Xt),nr=Kt.next();!nr.done;nr=Kt.next()){var rr=nr.value;if(o.adjustRowNumber(Mt,rr))return}}catch(or){_e={error:or}}finally{try{nr&&!nr.done&&(ct=Kt.return)&&ct.call(Kt)}finally{if(_e)throw _e.error}}}},o.adjustRowNumber=function(i,s){return s!=null&&!(!s.hasValidRowNumber()||s.getBucket()!==i.getBucket())&&(i.setRowNumber(s.getRowNumber()),!0)},o.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},o.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},o.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},o.prototype.setBoundingBox=function(i){this.boundingBox=i},o.prototype.getBoundingBox=function(){return this.boundingBox},o.prototype.setDetectionResultColumn=function(i,s){this.detectionResultColumns[i]=s},o.prototype.getDetectionResultColumn=function(i){return this.detectionResultColumns[i]},o.prototype.toString=function(){var i=this.detectionResultColumns[0];i==null&&(i=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var s=new Formatter,_=0;_<i.getCodewords().length;_++){s.format("CW %3d:",_);for(var _e=0;_e<this.barcodeColumnCount+2;_e++)if(this.detectionResultColumns[_e]!=null){var ct=this.detectionResultColumns[_e].getCodewords()[_];ct!=null?s.format(" %3d|%3d",ct.getRowNumber(),ct.getValue()):s.format("    |   ")}else s.format("    |   ");s.format("%n")}return s.toString()},o}(),Codeword=function(){function o(i,s,_,_e){this.rowNumber=o.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(i),this.endX=Math.trunc(s),this.bucket=Math.trunc(_),this.value=Math.trunc(_e)}return o.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},o.prototype.isValidRowNumber=function(i){return i!==o.BARCODE_ROW_UNKNOWN&&this.bucket===i%3*3},o.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(3*Math.trunc(this.value/30)+Math.trunc(this.bucket/3))},o.prototype.getWidth=function(){return this.endX-this.startX},o.prototype.getStartX=function(){return this.startX},o.prototype.getEndX=function(){return this.endX},o.prototype.getBucket=function(){return this.bucket},o.prototype.getValue=function(){return this.value},o.prototype.getRowNumber=function(){return this.rowNumber},o.prototype.setRowNumber=function(i){this.rowNumber=i},o.prototype.toString=function(){return this.rowNumber+"|"+this.value},o.BARCODE_ROW_UNKNOWN=-1,o}(),PDF417CodewordDecoder=function(){function o(){}return o.initialize=function(){for(var i=0;i<PDF417Common.SYMBOL_TABLE.length;i++)for(var s=PDF417Common.SYMBOL_TABLE[i],_=1&s,_e=0;_e<PDF417Common.BARS_IN_MODULE;_e++){for(var ct=0;(1&s)===_;)ct+=1,s>>=1;_=1&s,o.RATIOS_TABLE[i]||(o.RATIOS_TABLE[i]=new Array(PDF417Common.BARS_IN_MODULE)),o.RATIOS_TABLE[i][PDF417Common.BARS_IN_MODULE-_e-1]=Math.fround(ct/PDF417Common.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},o.getDecodedValue=function(i){var s=o.getDecodedCodewordValue(o.sampleBitCounts(i));return s!==-1?s:o.getClosestDecodedValue(i)},o.sampleBitCounts=function(i){for(var s=MathUtils.sum(i),_=new Int32Array(PDF417Common.BARS_IN_MODULE),_e=0,ct=0,Mt=0;Mt<PDF417Common.MODULES_IN_CODEWORD;Mt++){var Ft=s/(2*PDF417Common.MODULES_IN_CODEWORD)+Mt*s/PDF417Common.MODULES_IN_CODEWORD;ct+i[_e]<=Ft&&(ct+=i[_e],_e++),_[_e]++}return _},o.getDecodedCodewordValue=function(i){var s=o.getBitValue(i);return PDF417Common.getCodeword(s)===-1?-1:s},o.getBitValue=function(i){for(var s=0,_=0;_<i.length;_++)for(var _e=0;_e<i[_];_e++)s=s<<1|(_%2==0?1:0);return Math.trunc(s)},o.getClosestDecodedValue=function(i){var s=MathUtils.sum(i),_=new Array(PDF417Common.BARS_IN_MODULE);if(s>1)for(var _e=0;_e<_.length;_e++)_[_e]=Math.fround(i[_e]/s);var ct=Float.MAX_VALUE,Mt=-1;this.bSymbolTableReady||o.initialize();for(var Ft=0;Ft<o.RATIOS_TABLE.length;Ft++){for(var Ut=0,Xt=o.RATIOS_TABLE[Ft],Kt=0;Kt<PDF417Common.BARS_IN_MODULE;Kt++){var nr=Math.fround(Xt[Kt]-_[Kt]);if((Ut+=Math.fround(nr*nr))>=ct)break}Ut<ct&&(ct=Ut,Mt=PDF417Common.SYMBOL_TABLE[Ft])}return Mt},o.bSymbolTableReady=!1,o.RATIOS_TABLE=new Array(PDF417Common.SYMBOL_TABLE.length).map(function(i){return new Array(PDF417Common.BARS_IN_MODULE)}),o}(),PDF417ResultMetadata=function(){function o(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return o.prototype.getSegmentIndex=function(){return this.segmentIndex},o.prototype.setSegmentIndex=function(i){this.segmentIndex=i},o.prototype.getFileId=function(){return this.fileId},o.prototype.setFileId=function(i){this.fileId=i},o.prototype.getOptionalData=function(){return this.optionalData},o.prototype.setOptionalData=function(i){this.optionalData=i},o.prototype.isLastSegment=function(){return this.lastSegment},o.prototype.setLastSegment=function(i){this.lastSegment=i},o.prototype.getSegmentCount=function(){return this.segmentCount},o.prototype.setSegmentCount=function(i){this.segmentCount=i},o.prototype.getSender=function(){return this.sender||null},o.prototype.setSender=function(i){this.sender=i},o.prototype.getAddressee=function(){return this.addressee||null},o.prototype.setAddressee=function(i){this.addressee=i},o.prototype.getFileName=function(){return this.fileName},o.prototype.setFileName=function(i){this.fileName=i},o.prototype.getFileSize=function(){return this.fileSize},o.prototype.setFileSize=function(i){this.fileSize=i},o.prototype.getChecksum=function(){return this.checksum},o.prototype.setChecksum=function(i){this.checksum=i},o.prototype.getTimestamp=function(){return this.timestamp},o.prototype.setTimestamp=function(i){this.timestamp=i},o}(),Long=function(){function o(){}return o.parseLong=function(i,s){return s===void 0&&(s=void 0),parseInt(i,s)},o}(),__extends$g=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}(),NullPointerException=function(o){function i(){return o!==null&&o.apply(this,arguments)||this}return __extends$g(i,o),i.kind="NullPointerException",i}(Exception),OutputStream=function(){function o(){}return o.prototype.writeBytes=function(i){this.writeBytesOffset(i,0,i.length)},o.prototype.writeBytesOffset=function(i,s,_){if(i==null)throw new NullPointerException;if(s<0||s>i.length||_<0||s+_>i.length||s+_<0)throw new IndexOutOfBoundsException;if(_!==0)for(var _e=0;_e<_;_e++)this.write(i[s+_e])},o.prototype.flush=function(){},o.prototype.close=function(){},o}(),__extends$f=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}(),OutOfMemoryError=function(o){function i(){return o!==null&&o.apply(this,arguments)||this}return __extends$f(i,o),i}(Exception),__extends$e=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}(),ByteArrayOutputStream=function(o){function i(s){s===void 0&&(s=32);var _=o.call(this)||this;if(_.count=0,s<0)throw new IllegalArgumentException("Negative initial size: "+s);return _.buf=new Uint8Array(s),_}return __extends$e(i,o),i.prototype.ensureCapacity=function(s){s-this.buf.length>0&&this.grow(s)},i.prototype.grow=function(s){var _=this.buf.length<<1;if(_-s<0&&(_=s),_<0){if(s<0)throw new OutOfMemoryError;_=Integer.MAX_VALUE}this.buf=Arrays.copyOfUint8Array(this.buf,_)},i.prototype.write=function(s){this.ensureCapacity(this.count+1),this.buf[this.count]=s,this.count+=1},i.prototype.writeBytesOffset=function(s,_,_e){if(_<0||_>s.length||_e<0||_+_e-s.length>0)throw new IndexOutOfBoundsException;this.ensureCapacity(this.count+_e),System.arraycopy(s,_,this.buf,this.count,_e),this.count+=_e},i.prototype.writeTo=function(s){s.writeBytesOffset(this.buf,0,this.count)},i.prototype.reset=function(){this.count=0},i.prototype.toByteArray=function(){return Arrays.copyOfUint8Array(this.buf,this.count)},i.prototype.size=function(){return this.count},i.prototype.toString=function(s){return s?typeof s=="string"?this.toString_string(s):this.toString_number(s):this.toString_void()},i.prototype.toString_void=function(){return new String(this.buf).toString()},i.prototype.toString_string=function(s){return new String(this.buf).toString()},i.prototype.toString_number=function(s){return new String(this.buf).toString()},i.prototype.close=function(){},i}(OutputStream),Mode$1,BigInteger;function getBigIntConstructor(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}function createBigInt(o){if(BigInteger===void 0&&(BigInteger=getBigIntConstructor()),BigInteger===null)throw new Error("BigInt is not supported!");return BigInteger(o)}function getEXP900(){var o=[];o[0]=createBigInt(1);var i=createBigInt(900);o[1]=i;for(var s=2;s<16;s++)o[s]=o[s-1]*i;return o}(function(o){o[o.ALPHA=0]="ALPHA",o[o.LOWER=1]="LOWER",o[o.MIXED=2]="MIXED",o[o.PUNCT=3]="PUNCT",o[o.ALPHA_SHIFT=4]="ALPHA_SHIFT",o[o.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Mode$1||(Mode$1={}));var DecodedBitStreamParser=function(){function o(){}return o.decode=function(i,s){var _=new StringBuilder(""),_e=CharacterSetECI.ISO8859_1;_.enableDecoding(_e);for(var ct=1,Mt=i[ct++],Ft=new PDF417ResultMetadata;ct<i[0];){switch(Mt){case o.TEXT_COMPACTION_MODE_LATCH:ct=o.textCompaction(i,ct,_);break;case o.BYTE_COMPACTION_MODE_LATCH:case o.BYTE_COMPACTION_MODE_LATCH_6:ct=o.byteCompaction(Mt,i,_e,ct,_);break;case o.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:_.append(i[ct++]);break;case o.NUMERIC_COMPACTION_MODE_LATCH:ct=o.numericCompaction(i,ct,_);break;case o.ECI_CHARSET:CharacterSetECI.getCharacterSetECIByValue(i[ct++]);break;case o.ECI_GENERAL_PURPOSE:ct+=2;break;case o.ECI_USER_DEFINED:ct++;break;case o.BEGIN_MACRO_PDF417_CONTROL_BLOCK:ct=o.decodeMacroBlock(i,ct,Ft);break;case o.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case o.MACRO_PDF417_TERMINATOR:throw new FormatException;default:ct--,ct=o.textCompaction(i,ct,_)}if(!(ct<i.length))throw FormatException.getFormatInstance();Mt=i[ct++]}if(_.length()===0)throw FormatException.getFormatInstance();var Ut=new DecoderResult(null,_.toString(),null,s);return Ut.setOther(Ft),Ut},o.decodeMacroBlock=function(i,s,_){if(s+o.NUMBER_OF_SEQUENCE_CODEWORDS>i[0])throw FormatException.getFormatInstance();for(var _e=new Int32Array(o.NUMBER_OF_SEQUENCE_CODEWORDS),ct=0;ct<o.NUMBER_OF_SEQUENCE_CODEWORDS;ct++,s++)_e[ct]=i[s];_.setSegmentIndex(Integer.parseInt(o.decodeBase900toBase10(_e,o.NUMBER_OF_SEQUENCE_CODEWORDS)));var Mt=new StringBuilder;s=o.textCompaction(i,s,Mt),_.setFileId(Mt.toString());var Ft=-1;for(i[s]===o.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(Ft=s+1);s<i[0];)switch(i[s]){case o.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(i[++s]){case o.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var Ut=new StringBuilder;s=o.textCompaction(i,s+1,Ut),_.setFileName(Ut.toString());break;case o.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var Xt=new StringBuilder;s=o.textCompaction(i,s+1,Xt),_.setSender(Xt.toString());break;case o.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var Kt=new StringBuilder;s=o.textCompaction(i,s+1,Kt),_.setAddressee(Kt.toString());break;case o.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var nr=new StringBuilder;s=o.numericCompaction(i,s+1,nr),_.setSegmentCount(Integer.parseInt(nr.toString()));break;case o.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var rr=new StringBuilder;s=o.numericCompaction(i,s+1,rr),_.setTimestamp(Long.parseLong(rr.toString()));break;case o.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var or=new StringBuilder;s=o.numericCompaction(i,s+1,or),_.setChecksum(Integer.parseInt(or.toString()));break;case o.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var hr=new StringBuilder;s=o.numericCompaction(i,s+1,hr),_.setFileSize(Long.parseLong(hr.toString()));break;default:throw FormatException.getFormatInstance()}break;case o.MACRO_PDF417_TERMINATOR:s++,_.setLastSegment(!0);break;default:throw FormatException.getFormatInstance()}if(Ft!==-1){var fr=s-Ft;_.isLastSegment()&&fr--,_.setOptionalData(Arrays.copyOfRange(i,Ft,Ft+fr))}return s},o.textCompaction=function(i,s,_){for(var _e=new Int32Array(2*(i[0]-s)),ct=new Int32Array(2*(i[0]-s)),Mt=0,Ft=!1;s<i[0]&&!Ft;){var Ut=i[s++];if(Ut<o.TEXT_COMPACTION_MODE_LATCH)_e[Mt]=Ut/30,_e[Mt+1]=Ut%30,Mt+=2;else switch(Ut){case o.TEXT_COMPACTION_MODE_LATCH:_e[Mt++]=o.TEXT_COMPACTION_MODE_LATCH;break;case o.BYTE_COMPACTION_MODE_LATCH:case o.BYTE_COMPACTION_MODE_LATCH_6:case o.NUMERIC_COMPACTION_MODE_LATCH:case o.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case o.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case o.MACRO_PDF417_TERMINATOR:s--,Ft=!0;break;case o.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:_e[Mt]=o.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,Ut=i[s++],ct[Mt]=Ut,Mt++}}return o.decodeTextCompaction(_e,ct,Mt,_),s},o.decodeTextCompaction=function(i,s,_,_e){for(var ct=Mode$1.ALPHA,Mt=Mode$1.ALPHA,Ft=0;Ft<_;){var Ut=i[Ft],Xt="";switch(ct){case Mode$1.ALPHA:if(Ut<26)Xt=String.fromCharCode(65+Ut);else switch(Ut){case 26:Xt=" ";break;case o.LL:ct=Mode$1.LOWER;break;case o.ML:ct=Mode$1.MIXED;break;case o.PS:Mt=ct,ct=Mode$1.PUNCT_SHIFT;break;case o.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:_e.append(s[Ft]);break;case o.TEXT_COMPACTION_MODE_LATCH:ct=Mode$1.ALPHA}break;case Mode$1.LOWER:if(Ut<26)Xt=String.fromCharCode(97+Ut);else switch(Ut){case 26:Xt=" ";break;case o.AS:Mt=ct,ct=Mode$1.ALPHA_SHIFT;break;case o.ML:ct=Mode$1.MIXED;break;case o.PS:Mt=ct,ct=Mode$1.PUNCT_SHIFT;break;case o.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:_e.append(s[Ft]);break;case o.TEXT_COMPACTION_MODE_LATCH:ct=Mode$1.ALPHA}break;case Mode$1.MIXED:if(Ut<o.PL)Xt=o.MIXED_CHARS[Ut];else switch(Ut){case o.PL:ct=Mode$1.PUNCT;break;case 26:Xt=" ";break;case o.LL:ct=Mode$1.LOWER;break;case o.AL:ct=Mode$1.ALPHA;break;case o.PS:Mt=ct,ct=Mode$1.PUNCT_SHIFT;break;case o.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:_e.append(s[Ft]);break;case o.TEXT_COMPACTION_MODE_LATCH:ct=Mode$1.ALPHA}break;case Mode$1.PUNCT:if(Ut<o.PAL)Xt=o.PUNCT_CHARS[Ut];else switch(Ut){case o.PAL:ct=Mode$1.ALPHA;break;case o.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:_e.append(s[Ft]);break;case o.TEXT_COMPACTION_MODE_LATCH:ct=Mode$1.ALPHA}break;case Mode$1.ALPHA_SHIFT:if(ct=Mt,Ut<26)Xt=String.fromCharCode(65+Ut);else switch(Ut){case 26:Xt=" ";break;case o.TEXT_COMPACTION_MODE_LATCH:ct=Mode$1.ALPHA}break;case Mode$1.PUNCT_SHIFT:if(ct=Mt,Ut<o.PAL)Xt=o.PUNCT_CHARS[Ut];else switch(Ut){case o.PAL:ct=Mode$1.ALPHA;break;case o.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:_e.append(s[Ft]);break;case o.TEXT_COMPACTION_MODE_LATCH:ct=Mode$1.ALPHA}}Xt!==""&&_e.append(Xt),Ft++}},o.byteCompaction=function(i,s,_,_e,ct){var Mt=new ByteArrayOutputStream,Ft=0,Ut=0,Xt=!1;switch(i){case o.BYTE_COMPACTION_MODE_LATCH:for(var Kt=new Int32Array(6),nr=s[_e++];_e<s[0]&&!Xt;)switch(Kt[Ft++]=nr,Ut=900*Ut+nr,nr=s[_e++]){case o.TEXT_COMPACTION_MODE_LATCH:case o.BYTE_COMPACTION_MODE_LATCH:case o.NUMERIC_COMPACTION_MODE_LATCH:case o.BYTE_COMPACTION_MODE_LATCH_6:case o.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case o.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case o.MACRO_PDF417_TERMINATOR:_e--,Xt=!0;break;default:if(Ft%5==0&&Ft>0){for(var rr=0;rr<6;++rr)Mt.write(Number(createBigInt(Ut)>>createBigInt(8*(5-rr))));Ut=0,Ft=0}}_e===s[0]&&nr<o.TEXT_COMPACTION_MODE_LATCH&&(Kt[Ft++]=nr);for(var or=0;or<Ft;or++)Mt.write(Kt[or]);break;case o.BYTE_COMPACTION_MODE_LATCH_6:for(;_e<s[0]&&!Xt;){var hr=s[_e++];if(hr<o.TEXT_COMPACTION_MODE_LATCH)Ft++,Ut=900*Ut+hr;else switch(hr){case o.TEXT_COMPACTION_MODE_LATCH:case o.BYTE_COMPACTION_MODE_LATCH:case o.NUMERIC_COMPACTION_MODE_LATCH:case o.BYTE_COMPACTION_MODE_LATCH_6:case o.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case o.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case o.MACRO_PDF417_TERMINATOR:_e--,Xt=!0}if(Ft%5==0&&Ft>0){for(rr=0;rr<6;++rr)Mt.write(Number(createBigInt(Ut)>>createBigInt(8*(5-rr))));Ut=0,Ft=0}}}return ct.append(StringEncoding.decode(Mt.toByteArray(),_)),_e},o.numericCompaction=function(i,s,_){for(var _e=0,ct=!1,Mt=new Int32Array(o.MAX_NUMERIC_CODEWORDS);s<i[0]&&!ct;){var Ft=i[s++];if(s===i[0]&&(ct=!0),Ft<o.TEXT_COMPACTION_MODE_LATCH)Mt[_e]=Ft,_e++;else switch(Ft){case o.TEXT_COMPACTION_MODE_LATCH:case o.BYTE_COMPACTION_MODE_LATCH:case o.BYTE_COMPACTION_MODE_LATCH_6:case o.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case o.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case o.MACRO_PDF417_TERMINATOR:s--,ct=!0}(_e%o.MAX_NUMERIC_CODEWORDS==0||Ft===o.NUMERIC_COMPACTION_MODE_LATCH||ct)&&_e>0&&(_.append(o.decodeBase900toBase10(Mt,_e)),_e=0)}return s},o.decodeBase900toBase10=function(i,s){for(var _=createBigInt(0),_e=0;_e<s;_e++)_+=o.EXP900[s-_e-1]*createBigInt(i[_e]);var ct=_.toString();if(ct.charAt(0)!=="1")throw new FormatException;return ct.substring(1)},o.TEXT_COMPACTION_MODE_LATCH=900,o.BYTE_COMPACTION_MODE_LATCH=901,o.NUMERIC_COMPACTION_MODE_LATCH=902,o.BYTE_COMPACTION_MODE_LATCH_6=924,o.ECI_USER_DEFINED=925,o.ECI_GENERAL_PURPOSE=926,o.ECI_CHARSET=927,o.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,o.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,o.MACRO_PDF417_TERMINATOR=922,o.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,o.MAX_NUMERIC_CODEWORDS=15,o.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,o.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,o.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,o.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,o.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,o.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,o.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,o.PL=25,o.LL=27,o.AS=27,o.ML=28,o.AL=28,o.PS=29,o.PAL=29,o.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,o.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",o.EXP900=getBigIntConstructor()?getEXP900():[],o.NUMBER_OF_SEQUENCE_CODEWORDS=2,o}(),__values$a=function(o){var i=typeof Symbol=="function"&&Symbol.iterator,s=i&&o[i],_=0;if(s)return s.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&_>=o.length&&(o=void 0),{value:o&&o[_++],done:!o}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},PDF417ScanningDecoder=function(){function o(){}return o.decode=function(i,s,_,_e,ct,Mt,Ft){for(var Ut,Xt=new BoundingBox(i,s,_,_e,ct),Kt=null,nr=null,rr=!0;;rr=!1){if(s!=null&&(Kt=o.getRowIndicatorColumn(i,Xt,s,!0,Mt,Ft)),_e!=null&&(nr=o.getRowIndicatorColumn(i,Xt,_e,!1,Mt,Ft)),(Ut=o.merge(Kt,nr))==null)throw NotFoundException.getNotFoundInstance();var or=Ut.getBoundingBox();if(!rr||or==null||!(or.getMinY()<Xt.getMinY()||or.getMaxY()>Xt.getMaxY()))break;Xt=or}Ut.setBoundingBox(Xt);var hr=Ut.getBarcodeColumnCount()+1;Ut.setDetectionResultColumn(0,Kt),Ut.setDetectionResultColumn(hr,nr);for(var fr=Kt!=null,yr=1;yr<=hr;yr++){var Lr=fr?yr:hr-yr;if(Ut.getDetectionResultColumn(Lr)===void 0){var Br=void 0;Br=Lr===0||Lr===hr?new DetectionResultRowIndicatorColumn(Xt,Lr===0):new DetectionResultColumn(Xt),Ut.setDetectionResultColumn(Lr,Br);for(var Vr=-1,Wr=Vr,ro=Xt.getMinY();ro<=Xt.getMaxY();ro++){if((Vr=o.getStartColumn(Ut,Lr,ro,fr))<0||Vr>Xt.getMaxX()){if(Wr===-1)continue;Vr=Wr}var no=o.detectCodeword(i,Xt.getMinX(),Xt.getMaxX(),fr,Vr,ro,Mt,Ft);no!=null&&(Br.setCodeword(ro,no),Wr=Vr,Mt=Math.min(Mt,no.getWidth()),Ft=Math.max(Ft,no.getWidth()))}}}return o.createDecoderResult(Ut)},o.merge=function(i,s){if(i==null&&s==null)return null;var _=o.getBarcodeMetadata(i,s);if(_==null)return null;var _e=BoundingBox.merge(o.adjustBoundingBox(i),o.adjustBoundingBox(s));return new DetectionResult(_,_e)},o.adjustBoundingBox=function(i){var s,_;if(i==null)return null;var _e=i.getRowHeights();if(_e==null)return null;var ct=o.getMax(_e),Mt=0;try{for(var Ft=__values$a(_e),Ut=Ft.next();!Ut.done;Ut=Ft.next()){var Xt=Ut.value;if(Mt+=ct-Xt,Xt>0)break}}catch(or){s={error:or}}finally{try{Ut&&!Ut.done&&(_=Ft.return)&&_.call(Ft)}finally{if(s)throw s.error}}for(var Kt=i.getCodewords(),nr=0;Mt>0&&Kt[nr]==null;nr++)Mt--;var rr=0;for(nr=_e.length-1;nr>=0&&(rr+=ct-_e[nr],!(_e[nr]>0));nr--);for(nr=Kt.length-1;rr>0&&Kt[nr]==null;nr--)rr--;return i.getBoundingBox().addMissingRows(Mt,rr,i.isLeft())},o.getMax=function(i){var s,_,_e=-1;try{for(var ct=__values$a(i),Mt=ct.next();!Mt.done;Mt=ct.next()){var Ft=Mt.value;_e=Math.max(_e,Ft)}}catch(Ut){s={error:Ut}}finally{try{Mt&&!Mt.done&&(_=ct.return)&&_.call(ct)}finally{if(s)throw s.error}}return _e},o.getBarcodeMetadata=function(i,s){var _,_e;return i==null||(_=i.getBarcodeMetadata())==null?s==null?null:s.getBarcodeMetadata():s==null||(_e=s.getBarcodeMetadata())==null?_:_.getColumnCount()!==_e.getColumnCount()&&_.getErrorCorrectionLevel()!==_e.getErrorCorrectionLevel()&&_.getRowCount()!==_e.getRowCount()?null:_},o.getRowIndicatorColumn=function(i,s,_,_e,ct,Mt){for(var Ft=new DetectionResultRowIndicatorColumn(s,_e),Ut=0;Ut<2;Ut++)for(var Xt=Ut===0?1:-1,Kt=Math.trunc(Math.trunc(_.getX())),nr=Math.trunc(Math.trunc(_.getY()));nr<=s.getMaxY()&&nr>=s.getMinY();nr+=Xt){var rr=o.detectCodeword(i,0,i.getWidth(),_e,Kt,nr,ct,Mt);rr!=null&&(Ft.setCodeword(nr,rr),Kt=_e?rr.getStartX():rr.getEndX())}return Ft},o.adjustCodewordCount=function(i,s){var _=s[0][1],_e=_.getValue(),ct=i.getBarcodeColumnCount()*i.getBarcodeRowCount()-o.getNumberOfECCodeWords(i.getBarcodeECLevel());if(_e.length===0){if(ct<1||ct>PDF417Common.MAX_CODEWORDS_IN_BARCODE)throw NotFoundException.getNotFoundInstance();_.setValue(ct)}else _e[0]!==ct&&_.setValue(ct)},o.createDecoderResult=function(i){var s=o.createBarcodeMatrix(i);o.adjustCodewordCount(i,s);for(var _=new Array,_e=new Int32Array(i.getBarcodeRowCount()*i.getBarcodeColumnCount()),ct=[],Mt=new Array,Ft=0;Ft<i.getBarcodeRowCount();Ft++)for(var Ut=0;Ut<i.getBarcodeColumnCount();Ut++){var Xt=s[Ft][Ut+1].getValue(),Kt=Ft*i.getBarcodeColumnCount()+Ut;Xt.length===0?_.push(Kt):Xt.length===1?_e[Kt]=Xt[0]:(Mt.push(Kt),ct.push(Xt))}for(var nr=new Array(ct.length),rr=0;rr<nr.length;rr++)nr[rr]=ct[rr];return o.createDecoderResultFromAmbiguousValues(i.getBarcodeECLevel(),_e,PDF417Common.toIntArray(_),PDF417Common.toIntArray(Mt),nr)},o.createDecoderResultFromAmbiguousValues=function(i,s,_,_e,ct){for(var Mt=new Int32Array(_e.length),Ft=100;Ft-- >0;){for(var Ut=0;Ut<Mt.length;Ut++)s[_e[Ut]]=ct[Ut][Mt[Ut]];try{return o.decodeCodewords(s,i,_)}catch(Xt){if(!(Xt instanceof ChecksumException))throw Xt}if(Mt.length===0)throw ChecksumException.getChecksumInstance();for(Ut=0;Ut<Mt.length;Ut++){if(Mt[Ut]<ct[Ut].length-1){Mt[Ut]++;break}if(Mt[Ut]=0,Ut===Mt.length-1)throw ChecksumException.getChecksumInstance()}}throw ChecksumException.getChecksumInstance()},o.createBarcodeMatrix=function(i){for(var s,_,_e,ct,Mt=Array.from({length:i.getBarcodeRowCount()},function(){return new Array(i.getBarcodeColumnCount()+2)}),Ft=0;Ft<Mt.length;Ft++)for(var Ut=0;Ut<Mt[Ft].length;Ut++)Mt[Ft][Ut]=new BarcodeValue;var Xt=0;try{for(var Kt=__values$a(i.getDetectionResultColumns()),nr=Kt.next();!nr.done;nr=Kt.next()){var rr=nr.value;if(rr!=null)try{for(var or=(_e=void 0,__values$a(rr.getCodewords())),hr=or.next();!hr.done;hr=or.next()){var fr=hr.value;if(fr!=null){var yr=fr.getRowNumber();if(yr>=0){if(yr>=Mt.length)continue;Mt[yr][Xt].setValue(fr.getValue())}}}}catch(Lr){_e={error:Lr}}finally{try{hr&&!hr.done&&(ct=or.return)&&ct.call(or)}finally{if(_e)throw _e.error}}Xt++}}catch(Lr){s={error:Lr}}finally{try{nr&&!nr.done&&(_=Kt.return)&&_.call(Kt)}finally{if(s)throw s.error}}return Mt},o.isValidBarcodeColumn=function(i,s){return s>=0&&s<=i.getBarcodeColumnCount()+1},o.getStartColumn=function(i,s,_,_e){var ct,Mt,Ft=_e?1:-1,Ut=null;if(o.isValidBarcodeColumn(i,s-Ft)&&(Ut=i.getDetectionResultColumn(s-Ft).getCodeword(_)),Ut!=null)return _e?Ut.getEndX():Ut.getStartX();if((Ut=i.getDetectionResultColumn(s).getCodewordNearby(_))!=null)return _e?Ut.getStartX():Ut.getEndX();if(o.isValidBarcodeColumn(i,s-Ft)&&(Ut=i.getDetectionResultColumn(s-Ft).getCodewordNearby(_)),Ut!=null)return _e?Ut.getEndX():Ut.getStartX();for(var Xt=0;o.isValidBarcodeColumn(i,s-Ft);){s-=Ft;try{for(var Kt=(ct=void 0,__values$a(i.getDetectionResultColumn(s).getCodewords())),nr=Kt.next();!nr.done;nr=Kt.next()){var rr=nr.value;if(rr!=null)return(_e?rr.getEndX():rr.getStartX())+Ft*Xt*(rr.getEndX()-rr.getStartX())}}catch(or){ct={error:or}}finally{try{nr&&!nr.done&&(Mt=Kt.return)&&Mt.call(Kt)}finally{if(ct)throw ct.error}}Xt++}return _e?i.getBoundingBox().getMinX():i.getBoundingBox().getMaxX()},o.detectCodeword=function(i,s,_,_e,ct,Mt,Ft,Ut){ct=o.adjustCodewordStartColumn(i,s,_,_e,ct,Mt);var Xt,Kt=o.getModuleBitCount(i,s,_,_e,ct,Mt);if(Kt==null)return null;var nr=MathUtils.sum(Kt);if(_e)Xt=ct+nr;else{for(var rr=0;rr<Kt.length/2;rr++){var or=Kt[rr];Kt[rr]=Kt[Kt.length-1-rr],Kt[Kt.length-1-rr]=or}ct=(Xt=ct)-nr}if(!o.checkCodewordSkew(nr,Ft,Ut))return null;var hr=PDF417CodewordDecoder.getDecodedValue(Kt),fr=PDF417Common.getCodeword(hr);return fr===-1?null:new Codeword(ct,Xt,o.getCodewordBucketNumber(hr),fr)},o.getModuleBitCount=function(i,s,_,_e,ct,Mt){for(var Ft=ct,Ut=new Int32Array(8),Xt=0,Kt=_e?1:-1,nr=_e;(_e?Ft<_:Ft>=s)&&Xt<Ut.length;)i.get(Ft,Mt)===nr?(Ut[Xt]++,Ft+=Kt):(Xt++,nr=!nr);return Xt===Ut.length||Ft===(_e?_:s)&&Xt===Ut.length-1?Ut:null},o.getNumberOfECCodeWords=function(i){return 2<<i},o.adjustCodewordStartColumn=function(i,s,_,_e,ct,Mt){for(var Ft=ct,Ut=_e?-1:1,Xt=0;Xt<2;Xt++){for(;(_e?Ft>=s:Ft<_)&&_e===i.get(Ft,Mt);){if(Math.abs(ct-Ft)>o.CODEWORD_SKEW_SIZE)return ct;Ft+=Ut}Ut=-Ut,_e=!_e}return Ft},o.checkCodewordSkew=function(i,s,_){return s-o.CODEWORD_SKEW_SIZE<=i&&i<=_+o.CODEWORD_SKEW_SIZE},o.decodeCodewords=function(i,s,_){if(i.length===0)throw FormatException.getFormatInstance();var _e=1<<s+1,ct=o.correctErrors(i,_,_e);o.verifyCodewordCount(i,_e);var Mt=DecodedBitStreamParser.decode(i,""+s);return Mt.setErrorsCorrected(ct),Mt.setErasures(_.length),Mt},o.correctErrors=function(i,s,_){if(s!=null&&s.length>_/2+o.MAX_ERRORS||_<0||_>o.MAX_EC_CODEWORDS)throw ChecksumException.getChecksumInstance();return o.errorCorrection.decode(i,_,s)},o.verifyCodewordCount=function(i,s){if(i.length<4)throw FormatException.getFormatInstance();var _=i[0];if(_>i.length)throw FormatException.getFormatInstance();if(_===0){if(!(s<i.length))throw FormatException.getFormatInstance();i[0]=i.length-s}},o.getBitCountForCodeword=function(i){for(var s=new Int32Array(8),_=0,_e=s.length-1;!((1&i)!==_&&(_=1&i,--_e<0));)s[_e]++,i>>=1;return s},o.getCodewordBucketNumber=function(i){return i instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(i):this.getCodewordBucketNumber_number(i)},o.getCodewordBucketNumber_number=function(i){return o.getCodewordBucketNumber(o.getBitCountForCodeword(i))},o.getCodewordBucketNumber_Int32Array=function(i){return(i[0]-i[2]+i[4]-i[6]+9)%9},o.toString=function(i){for(var s=new Formatter,_=0;_<i.length;_++){s.format("Row %2d: ",_);for(var _e=0;_e<i[_].length;_e++){var ct=i[_][_e];ct.getValue().length===0?s.format("        ",null):s.format("%4d(%2d)",ct.getValue()[0],ct.getConfidence(ct.getValue()[0]))}s.format("%n")}return s.toString()},o.CODEWORD_SKEW_SIZE=2,o.MAX_ERRORS=3,o.MAX_EC_CODEWORDS=512,o.errorCorrection=new ErrorCorrection,o}(),__values$9=function(o){var i=typeof Symbol=="function"&&Symbol.iterator,s=i&&o[i],_=0;if(s)return s.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&_>=o.length&&(o=void 0),{value:o&&o[_++],done:!o}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},PDF417Reader=function(){function o(){}return o.prototype.decode=function(i,s){s===void 0&&(s=null);var _=o.decode(i,s,!1);if(_==null||_.length===0||_[0]==null)throw NotFoundException.getNotFoundInstance();return _[0]},o.prototype.decodeMultiple=function(i,s){s===void 0&&(s=null);try{return o.decode(i,s,!0)}catch(_){throw _ instanceof FormatException||_ instanceof ChecksumException?NotFoundException.getNotFoundInstance():_}},o.decode=function(i,s,_){var _e,ct,Mt=new Array,Ft=Detector.detectMultiple(i,s,_);try{for(var Ut=__values$9(Ft.getPoints()),Xt=Ut.next();!Xt.done;Xt=Ut.next()){var Kt=Xt.value,nr=PDF417ScanningDecoder.decode(Ft.getBits(),Kt[4],Kt[5],Kt[6],Kt[7],o.getMinCodewordWidth(Kt),o.getMaxCodewordWidth(Kt)),rr=new Result(nr.getText(),nr.getRawBytes(),void 0,Kt,BarcodeFormat$1.PDF_417);rr.putMetadata(ResultMetadataType$1.ERROR_CORRECTION_LEVEL,nr.getECLevel());var or=nr.getOther();or!=null&&rr.putMetadata(ResultMetadataType$1.PDF417_EXTRA_METADATA,or),Mt.push(rr)}}catch(hr){_e={error:hr}}finally{try{Xt&&!Xt.done&&(ct=Ut.return)&&ct.call(Ut)}finally{if(_e)throw _e.error}}return Mt.map(function(hr){return hr})},o.getMaxWidth=function(i,s){return i==null||s==null?0:Math.trunc(Math.abs(i.getX()-s.getX()))},o.getMinWidth=function(i,s){return i==null||s==null?Integer.MAX_VALUE:Math.trunc(Math.abs(i.getX()-s.getX()))},o.getMaxCodewordWidth=function(i){return Math.floor(Math.max(Math.max(o.getMaxWidth(i[0],i[4]),o.getMaxWidth(i[6],i[2])*PDF417Common.MODULES_IN_CODEWORD/PDF417Common.MODULES_IN_STOP_PATTERN),Math.max(o.getMaxWidth(i[1],i[5]),o.getMaxWidth(i[7],i[3])*PDF417Common.MODULES_IN_CODEWORD/PDF417Common.MODULES_IN_STOP_PATTERN)))},o.getMinCodewordWidth=function(i){return Math.floor(Math.min(Math.min(o.getMinWidth(i[0],i[4]),o.getMinWidth(i[6],i[2])*PDF417Common.MODULES_IN_CODEWORD/PDF417Common.MODULES_IN_STOP_PATTERN),Math.min(o.getMinWidth(i[1],i[5]),o.getMinWidth(i[7],i[3])*PDF417Common.MODULES_IN_CODEWORD/PDF417Common.MODULES_IN_STOP_PATTERN)))},o.prototype.reset=function(){},o}(),__extends$d=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}(),ReaderException=function(o){function i(){return o!==null&&o.apply(this,arguments)||this}return __extends$d(i,o),i.kind="ReaderException",i}(Exception),__values$8=function(o){var i=typeof Symbol=="function"&&Symbol.iterator,s=i&&o[i],_=0;if(s)return s.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&_>=o.length&&(o=void 0),{value:o&&o[_++],done:!o}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},MultiFormatReader=function(){function o(){}return o.prototype.decode=function(i,s){return this.setHints(s),this.decodeInternal(i)},o.prototype.decodeWithState=function(i){return this.readers!==null&&this.readers!==void 0||this.setHints(null),this.decodeInternal(i)},o.prototype.setHints=function(i){this.hints=i;var s=i!=null&&i.get(DecodeHintType$1.TRY_HARDER)!==void 0,_=i==null?null:i.get(DecodeHintType$1.POSSIBLE_FORMATS),_e=new Array;if(_!=null){var ct=_.some(function(Mt){return Mt===BarcodeFormat$1.UPC_A||Mt===BarcodeFormat$1.UPC_E||Mt===BarcodeFormat$1.EAN_13||Mt===BarcodeFormat$1.EAN_8||Mt===BarcodeFormat$1.CODABAR||Mt===BarcodeFormat$1.CODE_39||Mt===BarcodeFormat$1.CODE_93||Mt===BarcodeFormat$1.CODE_128||Mt===BarcodeFormat$1.ITF||Mt===BarcodeFormat$1.RSS_14||Mt===BarcodeFormat$1.RSS_EXPANDED});ct&&!s&&_e.push(new MultiFormatOneDReader(i)),_.includes(BarcodeFormat$1.QR_CODE)&&_e.push(new QRCodeReader),_.includes(BarcodeFormat$1.DATA_MATRIX)&&_e.push(new DataMatrixReader),_.includes(BarcodeFormat$1.AZTEC)&&_e.push(new AztecReader),_.includes(BarcodeFormat$1.PDF_417)&&_e.push(new PDF417Reader),ct&&s&&_e.push(new MultiFormatOneDReader(i))}_e.length===0&&(s||_e.push(new MultiFormatOneDReader(i)),_e.push(new QRCodeReader),_e.push(new DataMatrixReader),_e.push(new AztecReader),_e.push(new PDF417Reader),s&&_e.push(new MultiFormatOneDReader(i))),this.readers=_e},o.prototype.reset=function(){var i,s;if(this.readers!==null)try{for(var _=__values$8(this.readers),_e=_.next();!_e.done;_e=_.next())_e.value.reset()}catch(ct){i={error:ct}}finally{try{_e&&!_e.done&&(s=_.return)&&s.call(_)}finally{if(i)throw i.error}}},o.prototype.decodeInternal=function(i){var s,_;if(this.readers===null)throw new ReaderException("No readers where selected, nothing can be read.");try{for(var _e=__values$8(this.readers),ct=_e.next();!ct.done;ct=_e.next()){var Mt=ct.value;try{return Mt.decode(i,this.hints)}catch(Ft){if(Ft instanceof ReaderException)continue}}}catch(Ft){s={error:Ft}}finally{try{ct&&!ct.done&&(_=_e.return)&&_.call(_e)}finally{if(s)throw s.error}}throw new NotFoundException("No MultiFormat Readers were able to detect the code.")},o}(),__extends$c=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}();(function(o){function i(s,_){s===void 0&&(s=null),_===void 0&&(_=500);var _e=new MultiFormatReader;return _e.setHints(s),o.call(this,_e,_)||this}return __extends$c(i,o),i.prototype.decodeBitmap=function(s){return this.reader.decodeWithState(s)},i})(BrowserCodeReader);var __extends$b=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}();(function(o){function i(s){return s===void 0&&(s=500),o.call(this,new PDF417Reader,s)||this}__extends$b(i,o)})(BrowserCodeReader);var __extends$a=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}(),EncodeHintType;(function(o){function i(s){return s===void 0&&(s=500),o.call(this,new QRCodeReader,s)||this}__extends$a(i,o)})(BrowserCodeReader),function(o){o[o.ERROR_CORRECTION=0]="ERROR_CORRECTION",o[o.CHARACTER_SET=1]="CHARACTER_SET",o[o.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",o[o.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",o[o.MIN_SIZE=4]="MIN_SIZE",o[o.MAX_SIZE=5]="MAX_SIZE",o[o.MARGIN=6]="MARGIN",o[o.PDF417_COMPACT=7]="PDF417_COMPACT",o[o.PDF417_COMPACTION=8]="PDF417_COMPACTION",o[o.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",o[o.AZTEC_LAYERS=10]="AZTEC_LAYERS",o[o.QR_VERSION=11]="QR_VERSION",o[o.GS1_FORMAT=12]="GS1_FORMAT",o[o.FORCE_C40=13]="FORCE_C40"}(EncodeHintType||(EncodeHintType={}));var MaskUtil=function(){function o(){}return o.applyMaskPenaltyRule1=function(i){return o.applyMaskPenaltyRule1Internal(i,!0)+o.applyMaskPenaltyRule1Internal(i,!1)},o.applyMaskPenaltyRule2=function(i){for(var s=0,_=i.getArray(),_e=i.getWidth(),ct=i.getHeight(),Mt=0;Mt<ct-1;Mt++)for(var Ft=_[Mt],Ut=0;Ut<_e-1;Ut++){var Xt=Ft[Ut];Xt===Ft[Ut+1]&&Xt===_[Mt+1][Ut]&&Xt===_[Mt+1][Ut+1]&&s++}return o.N2*s},o.applyMaskPenaltyRule3=function(i){for(var s=0,_=i.getArray(),_e=i.getWidth(),ct=i.getHeight(),Mt=0;Mt<ct;Mt++)for(var Ft=0;Ft<_e;Ft++){var Ut=_[Mt];Ft+6<_e&&Ut[Ft]===1&&Ut[Ft+1]===0&&Ut[Ft+2]===1&&Ut[Ft+3]===1&&Ut[Ft+4]===1&&Ut[Ft+5]===0&&Ut[Ft+6]===1&&(o.isWhiteHorizontal(Ut,Ft-4,Ft)||o.isWhiteHorizontal(Ut,Ft+7,Ft+11))&&s++,Mt+6<ct&&_[Mt][Ft]===1&&_[Mt+1][Ft]===0&&_[Mt+2][Ft]===1&&_[Mt+3][Ft]===1&&_[Mt+4][Ft]===1&&_[Mt+5][Ft]===0&&_[Mt+6][Ft]===1&&(o.isWhiteVertical(_,Ft,Mt-4,Mt)||o.isWhiteVertical(_,Ft,Mt+7,Mt+11))&&s++}return s*o.N3},o.isWhiteHorizontal=function(i,s,_){s=Math.max(s,0),_=Math.min(_,i.length);for(var _e=s;_e<_;_e++)if(i[_e]===1)return!1;return!0},o.isWhiteVertical=function(i,s,_,_e){_=Math.max(_,0),_e=Math.min(_e,i.length);for(var ct=_;ct<_e;ct++)if(i[ct][s]===1)return!1;return!0},o.applyMaskPenaltyRule4=function(i){for(var s=0,_=i.getArray(),_e=i.getWidth(),ct=i.getHeight(),Mt=0;Mt<ct;Mt++)for(var Ft=_[Mt],Ut=0;Ut<_e;Ut++)Ft[Ut]===1&&s++;var Xt=i.getHeight()*i.getWidth();return Math.floor(10*Math.abs(2*s-Xt)/Xt)*o.N4},o.getDataMaskBit=function(i,s,_){var _e,ct;switch(i){case 0:_e=_+s&1;break;case 1:_e=1&_;break;case 2:_e=s%3;break;case 3:_e=(_+s)%3;break;case 4:_e=Math.floor(_/2)+Math.floor(s/3)&1;break;case 5:_e=(1&(ct=_*s))+ct%3;break;case 6:_e=(1&(ct=_*s))+ct%3&1;break;case 7:_e=(ct=_*s)%3+(_+s&1)&1;break;default:throw new IllegalArgumentException("Invalid mask pattern: "+i)}return _e===0},o.applyMaskPenaltyRule1Internal=function(i,s){for(var _=0,_e=s?i.getHeight():i.getWidth(),ct=s?i.getWidth():i.getHeight(),Mt=i.getArray(),Ft=0;Ft<_e;Ft++){for(var Ut=0,Xt=-1,Kt=0;Kt<ct;Kt++){var nr=s?Mt[Ft][Kt]:Mt[Kt][Ft];nr===Xt?Ut++:(Ut>=5&&(_+=o.N1+(Ut-5)),Ut=1,Xt=nr)}Ut>=5&&(_+=o.N1+(Ut-5))}return _},o.N1=3,o.N2=3,o.N3=40,o.N4=10,o}(),QRCode=function(){function o(){this.maskPattern=-1}return o.prototype.getMode=function(){return this.mode},o.prototype.getECLevel=function(){return this.ecLevel},o.prototype.getVersion=function(){return this.version},o.prototype.getMaskPattern=function(){return this.maskPattern},o.prototype.getMatrix=function(){return this.matrix},o.prototype.toString=function(){var i=new StringBuilder;return i.append(`<<
`),i.append(" mode: "),i.append(this.mode?this.mode.toString():"null"),i.append(`
 ecLevel: `),i.append(this.ecLevel?this.ecLevel.toString():"null"),i.append(`
 version: `),i.append(this.version?this.version.toString():"null"),i.append(`
 maskPattern: `),i.append(this.maskPattern.toString()),this.matrix?(i.append(`
 matrix:
`),i.append(this.matrix.toString())):i.append(`
 matrix: null
`),i.append(`>>
`),i.toString()},o.prototype.setMode=function(i){this.mode=i},o.prototype.setECLevel=function(i){this.ecLevel=i},o.prototype.setVersion=function(i){this.version=i},o.prototype.setMaskPattern=function(i){this.maskPattern=i},o.prototype.setMatrix=function(i){this.matrix=i},o.isValidMaskPattern=function(i){return i>=0&&i<o.NUM_MASK_PATTERNS},o.NUM_MASK_PATTERNS=8,o}(),__extends$9=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}(),WriterException=function(o){function i(){return o!==null&&o.apply(this,arguments)||this}return __extends$9(i,o),i.kind="WriterException",i}(Exception);(function(){function o(){}return o.clearMatrix=function(i){i.clear(255)},o.buildMatrix=function(i,s,_,_e,ct){o.clearMatrix(ct),o.embedBasicPatterns(_,ct),o.embedTypeInfo(s,_e,ct),o.maybeEmbedVersionInfo(_,ct),o.embedDataBits(i,_e,ct)},o.embedBasicPatterns=function(i,s){o.embedPositionDetectionPatternsAndSeparators(s),o.embedDarkDotAtLeftBottomCorner(s),o.maybeEmbedPositionAdjustmentPatterns(i,s),o.embedTimingPatterns(s)},o.embedTypeInfo=function(i,s,_){var _e=new BitArray;o.makeTypeInfoBits(i,s,_e);for(var ct=0,Mt=_e.getSize();ct<Mt;++ct){var Ft=_e.get(_e.getSize()-1-ct),Ut=o.TYPE_INFO_COORDINATES[ct],Xt=Ut[0],Kt=Ut[1];if(_.setBoolean(Xt,Kt,Ft),ct<8){var nr=_.getWidth()-ct-1,rr=8;_.setBoolean(nr,rr,Ft)}else nr=8,rr=_.getHeight()-7+(ct-8),_.setBoolean(nr,rr,Ft)}},o.maybeEmbedVersionInfo=function(i,s){if(!(i.getVersionNumber()<7)){var _=new BitArray;o.makeVersionInfoBits(i,_);for(var _e=17,ct=0;ct<6;++ct)for(var Mt=0;Mt<3;++Mt){var Ft=_.get(_e);_e--,s.setBoolean(ct,s.getHeight()-11+Mt,Ft),s.setBoolean(s.getHeight()-11+Mt,ct,Ft)}}},o.embedDataBits=function(i,s,_){for(var _e=0,ct=-1,Mt=_.getWidth()-1,Ft=_.getHeight()-1;Mt>0;){for(Mt===6&&(Mt-=1);Ft>=0&&Ft<_.getHeight();){for(var Ut=0;Ut<2;++Ut){var Xt=Mt-Ut;if(o.isEmpty(_.get(Xt,Ft))){var Kt=void 0;_e<i.getSize()?(Kt=i.get(_e),++_e):Kt=!1,s!==255&&MaskUtil.getDataMaskBit(s,Xt,Ft)&&(Kt=!Kt),_.setBoolean(Xt,Ft,Kt)}}Ft+=ct}Ft+=ct=-ct,Mt-=2}if(_e!==i.getSize())throw new WriterException("Not all bits consumed: "+_e+"/"+i.getSize())},o.findMSBSet=function(i){return 32-Integer.numberOfLeadingZeros(i)},o.calculateBCHCode=function(i,s){if(s===0)throw new IllegalArgumentException("0 polynomial");var _=o.findMSBSet(s);for(i<<=_-1;o.findMSBSet(i)>=_;)i^=s<<o.findMSBSet(i)-_;return i},o.makeTypeInfoBits=function(i,s,_){if(!QRCode.isValidMaskPattern(s))throw new WriterException("Invalid mask pattern");var _e=i.getBits()<<3|s;_.appendBits(_e,5);var ct=o.calculateBCHCode(_e,o.TYPE_INFO_POLY);_.appendBits(ct,10);var Mt=new BitArray;if(Mt.appendBits(o.TYPE_INFO_MASK_PATTERN,15),_.xor(Mt),_.getSize()!==15)throw new WriterException("should not happen but we got: "+_.getSize())},o.makeVersionInfoBits=function(i,s){s.appendBits(i.getVersionNumber(),6);var _=o.calculateBCHCode(i.getVersionNumber(),o.VERSION_INFO_POLY);if(s.appendBits(_,12),s.getSize()!==18)throw new WriterException("should not happen but we got: "+s.getSize())},o.isEmpty=function(i){return i===255},o.embedTimingPatterns=function(i){for(var s=8;s<i.getWidth()-8;++s){var _=(s+1)%2;o.isEmpty(i.get(s,6))&&i.setNumber(s,6,_),o.isEmpty(i.get(6,s))&&i.setNumber(6,s,_)}},o.embedDarkDotAtLeftBottomCorner=function(i){if(i.get(8,i.getHeight()-8)===0)throw new WriterException;i.setNumber(8,i.getHeight()-8,1)},o.embedHorizontalSeparationPattern=function(i,s,_){for(var _e=0;_e<8;++_e){if(!o.isEmpty(_.get(i+_e,s)))throw new WriterException;_.setNumber(i+_e,s,0)}},o.embedVerticalSeparationPattern=function(i,s,_){for(var _e=0;_e<7;++_e){if(!o.isEmpty(_.get(i,s+_e)))throw new WriterException;_.setNumber(i,s+_e,0)}},o.embedPositionAdjustmentPattern=function(i,s,_){for(var _e=0;_e<5;++_e)for(var ct=o.POSITION_ADJUSTMENT_PATTERN[_e],Mt=0;Mt<5;++Mt)_.setNumber(i+Mt,s+_e,ct[Mt])},o.embedPositionDetectionPattern=function(i,s,_){for(var _e=0;_e<7;++_e)for(var ct=o.POSITION_DETECTION_PATTERN[_e],Mt=0;Mt<7;++Mt)_.setNumber(i+Mt,s+_e,ct[Mt])},o.embedPositionDetectionPatternsAndSeparators=function(i){var s=o.POSITION_DETECTION_PATTERN[0].length;o.embedPositionDetectionPattern(0,0,i),o.embedPositionDetectionPattern(i.getWidth()-s,0,i),o.embedPositionDetectionPattern(0,i.getWidth()-s,i),o.embedHorizontalSeparationPattern(0,7,i),o.embedHorizontalSeparationPattern(i.getWidth()-8,7,i),o.embedHorizontalSeparationPattern(0,i.getWidth()-8,i),o.embedVerticalSeparationPattern(7,0,i),o.embedVerticalSeparationPattern(i.getHeight()-7-1,0,i),o.embedVerticalSeparationPattern(7,i.getHeight()-7,i)},o.maybeEmbedPositionAdjustmentPatterns=function(i,s){if(!(i.getVersionNumber()<2))for(var _=i.getVersionNumber()-1,_e=o.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[_],ct=0,Mt=_e.length;ct!==Mt;ct++){var Ft=_e[ct];if(Ft>=0)for(var Ut=0;Ut!==Mt;Ut++){var Xt=_e[Ut];Xt>=0&&o.isEmpty(s.get(Xt,Ft))&&o.embedPositionAdjustmentPattern(Xt-2,Ft-2,s)}}},o.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),o.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),o.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),o.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),o.VERSION_INFO_POLY=7973,o.TYPE_INFO_POLY=1335,o.TYPE_INFO_MASK_PATTERN=21522,o})();(function(){Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),CharacterSetECI.UTF8.getName()})();var __extends$8=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}();(function(o){function i(s,_,_e,ct,Mt,Ft,Ut,Xt){var Kt=o.call(this,Ft,Ut)||this;if(Kt.yuvData=s,Kt.dataWidth=_,Kt.dataHeight=_e,Kt.left=ct,Kt.top=Mt,ct+Ft>_||Mt+Ut>_e)throw new IllegalArgumentException("Crop rectangle does not fit within image data.");return Xt&&Kt.reverseHorizontal(Ft,Ut),Kt}__extends$8(i,o),i.prototype.getRow=function(s,_){if(s<0||s>=this.getHeight())throw new IllegalArgumentException("Requested row is outside the image: "+s);var _e=this.getWidth();(_==null||_.length<_e)&&(_=new Uint8ClampedArray(_e));var ct=(s+this.top)*this.dataWidth+this.left;return System.arraycopy(this.yuvData,ct,_,0,_e),_},i.prototype.getMatrix=function(){var s=this.getWidth(),_=this.getHeight();if(s===this.dataWidth&&_===this.dataHeight)return this.yuvData;var _e=s*_,ct=new Uint8ClampedArray(_e),Mt=this.top*this.dataWidth+this.left;if(s===this.dataWidth)return System.arraycopy(this.yuvData,Mt,ct,0,_e),ct;for(var Ft=0;Ft<_;Ft++){var Ut=Ft*s;System.arraycopy(this.yuvData,Mt,ct,Ut,s),Mt+=this.dataWidth}return ct},i.prototype.isCropSupported=function(){return!0},i.prototype.crop=function(s,_,_e,ct){return new i(this.yuvData,this.dataWidth,this.dataHeight,this.left+s,this.top+_,_e,ct,!1)},i.prototype.renderThumbnail=function(){for(var s=this.getWidth()/i.THUMBNAIL_SCALE_FACTOR,_=this.getHeight()/i.THUMBNAIL_SCALE_FACTOR,_e=new Int32Array(s*_),ct=this.yuvData,Mt=this.top*this.dataWidth+this.left,Ft=0;Ft<_;Ft++){for(var Ut=Ft*s,Xt=0;Xt<s;Xt++){var Kt=255&ct[Mt+Xt*i.THUMBNAIL_SCALE_FACTOR];_e[Ut+Xt]=4278190080|65793*Kt}Mt+=this.dataWidth*i.THUMBNAIL_SCALE_FACTOR}return _e},i.prototype.getThumbnailWidth=function(){return this.getWidth()/i.THUMBNAIL_SCALE_FACTOR},i.prototype.getThumbnailHeight=function(){return this.getHeight()/i.THUMBNAIL_SCALE_FACTOR},i.prototype.reverseHorizontal=function(s,_){for(var _e=this.yuvData,ct=0,Mt=this.top*this.dataWidth+this.left;ct<_;ct++,Mt+=this.dataWidth)for(var Ft=Mt+s/2,Ut=Mt,Xt=Mt+s-1;Ut<Ft;Ut++,Xt--){var Kt=_e[Ut];_e[Ut]=_e[Xt],_e[Xt]=Kt}},i.prototype.invert=function(){return new InvertedLuminanceSource(this)},i.THUMBNAIL_SCALE_FACTOR=2})(LuminanceSource);var __extends$7=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}();(function(o){function i(s,_,_e,ct,Mt,Ft,Ut){var Xt=o.call(this,_,_e)||this;if(Xt.dataWidth=ct,Xt.dataHeight=Mt,Xt.left=Ft,Xt.top=Ut,s.BYTES_PER_ELEMENT===4){for(var Kt=_*_e,nr=new Uint8ClampedArray(Kt),rr=0;rr<Kt;rr++){var or=s[rr],hr=or>>16&255,fr=or>>7&510,yr=255&or;nr[rr]=(hr+fr+yr)/4&255}Xt.luminances=nr}else Xt.luminances=s;if(ct===void 0&&(Xt.dataWidth=_),Mt===void 0&&(Xt.dataHeight=_e),Ft===void 0&&(Xt.left=0),Ut===void 0&&(Xt.top=0),Xt.left+_>Xt.dataWidth||Xt.top+_e>Xt.dataHeight)throw new IllegalArgumentException("Crop rectangle does not fit within image data.");return Xt}__extends$7(i,o),i.prototype.getRow=function(s,_){if(s<0||s>=this.getHeight())throw new IllegalArgumentException("Requested row is outside the image: "+s);var _e=this.getWidth();(_==null||_.length<_e)&&(_=new Uint8ClampedArray(_e));var ct=(s+this.top)*this.dataWidth+this.left;return System.arraycopy(this.luminances,ct,_,0,_e),_},i.prototype.getMatrix=function(){var s=this.getWidth(),_=this.getHeight();if(s===this.dataWidth&&_===this.dataHeight)return this.luminances;var _e=s*_,ct=new Uint8ClampedArray(_e),Mt=this.top*this.dataWidth+this.left;if(s===this.dataWidth)return System.arraycopy(this.luminances,Mt,ct,0,_e),ct;for(var Ft=0;Ft<_;Ft++){var Ut=Ft*s;System.arraycopy(this.luminances,Mt,ct,Ut,s),Mt+=this.dataWidth}return ct},i.prototype.isCropSupported=function(){return!0},i.prototype.crop=function(s,_,_e,ct){return new i(this.luminances,_e,ct,this.dataWidth,this.dataHeight,this.left+s,this.top+_)},i.prototype.invert=function(){return new InvertedLuminanceSource(this)}})(LuminanceSource);var __extends$6=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}(),Charset=function(o){function i(){return o!==null&&o.apply(this,arguments)||this}return __extends$6(i,o),i.forName=function(s){return this.getCharacterSetECIByName(s)},i}(CharacterSetECI),StandardCharsets=function(){function o(){}return o.ISO_8859_1=CharacterSetECI.ISO8859_1,o}(),_a,MODULO_VALUE=301,static_LOG=function(o,i){for(var s=1,_=0;_<255;_++)i[_]=s,o[s]=_,(s*=2)>=256&&(s^=MODULO_VALUE);return{LOG:o,ALOG:i}},SymbolShapeHint;_a=static_LOG([],[]),_a.LOG,_a.ALOG,function(o){o[o.FORCE_NONE=0]="FORCE_NONE",o[o.FORCE_SQUARE=1]="FORCE_SQUARE",o[o.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"}(SymbolShapeHint||(SymbolShapeHint={}));var PAD=129,LATCH_TO_C40=230,LATCH_TO_BASE256=231,UPPER_SHIFT=235,MACRO_05=236,MACRO_06=237,LATCH_TO_ANSIX12=238,LATCH_TO_TEXT=239,LATCH_TO_EDIFACT=240,C40_UNLATCH=254,X12_UNLATCH=254,MACRO_05_HEADER="[)>05",MACRO_06_HEADER="[)>06",MACRO_TRAILER="",ASCII_ENCODATION=0,C40_ENCODATION=1,TEXT_ENCODATION=2,X12_ENCODATION=3,EDIFACT_ENCODATION=4,BASE256_ENCODATION=5,ASCIIEncoder=function(){function o(){}return o.prototype.getEncodingMode=function(){return ASCII_ENCODATION},o.prototype.encode=function(i){if(HighLevelEncoder$2.determineConsecutiveDigitCount(i.getMessage(),i.pos)>=2)i.writeCodeword(this.encodeASCIIDigits(i.getMessage().charCodeAt(i.pos),i.getMessage().charCodeAt(i.pos+1))),i.pos+=2;else{var s=i.getCurrentChar(),_=HighLevelEncoder$2.lookAheadTest(i.getMessage(),i.pos,this.getEncodingMode());if(_!==this.getEncodingMode())switch(_){case BASE256_ENCODATION:return i.writeCodeword(LATCH_TO_BASE256),void i.signalEncoderChange(BASE256_ENCODATION);case C40_ENCODATION:return i.writeCodeword(LATCH_TO_C40),void i.signalEncoderChange(C40_ENCODATION);case X12_ENCODATION:i.writeCodeword(LATCH_TO_ANSIX12),i.signalEncoderChange(X12_ENCODATION);break;case TEXT_ENCODATION:i.writeCodeword(LATCH_TO_TEXT),i.signalEncoderChange(TEXT_ENCODATION);break;case EDIFACT_ENCODATION:i.writeCodeword(LATCH_TO_EDIFACT),i.signalEncoderChange(EDIFACT_ENCODATION);break;default:throw new Error("Illegal mode: "+_)}else HighLevelEncoder$2.isExtendedASCII(s)?(i.writeCodeword(UPPER_SHIFT),i.writeCodeword(s-128+1),i.pos++):(i.writeCodeword(s+1),i.pos++)}},o.prototype.encodeASCIIDigits=function(i,s){if(HighLevelEncoder$2.isDigit(i)&&HighLevelEncoder$2.isDigit(s))return 10*(i-48)+(s-48)+130;throw new Error("not digits: "+i+s)},o}(),Base256Encoder=function(){function o(){}return o.prototype.getEncodingMode=function(){return BASE256_ENCODATION},o.prototype.encode=function(i){var s=new StringBuilder;for(s.append(0);i.hasMoreCharacters();){var _=i.getCurrentChar();if(s.append(_),i.pos++,HighLevelEncoder$2.lookAheadTest(i.getMessage(),i.pos,this.getEncodingMode())!==this.getEncodingMode()){i.signalEncoderChange(ASCII_ENCODATION);break}}var _e=s.length()-1,ct=i.getCodewordCount()+_e+1;i.updateSymbolInfo(ct);var Mt=i.getSymbolInfo().getDataCapacity()-ct>0;if(i.hasMoreCharacters()||Mt)if(_e<=249)s.setCharAt(0,StringUtils.getCharAt(_e));else{if(!(_e<=1555))throw new Error("Message length not in valid ranges: "+_e);s.setCharAt(0,StringUtils.getCharAt(Math.floor(_e/250)+249)),s.insert(1,StringUtils.getCharAt(_e%250))}var Ft=0;for(_=s.length();Ft<_;Ft++)i.writeCodeword(this.randomize255State(s.charAt(Ft).charCodeAt(0),i.getCodewordCount()+1))},o.prototype.randomize255State=function(i,s){var _=i+(149*s%255+1);return _<=255?_:_-256},o}(),C40Encoder=function(){function o(){}return o.prototype.getEncodingMode=function(){return C40_ENCODATION},o.prototype.encodeMaximal=function(i){for(var s=new StringBuilder,_=0,_e=i.pos,ct=0;i.hasMoreCharacters();){var Mt=i.getCurrentChar();i.pos++,_=this.encodeChar(Mt,s),s.length()%3==0&&(_e=i.pos,ct=s.length())}if(ct!==s.length()){var Ft=Math.floor(s.length()/3*2),Ut=Math.floor(i.getCodewordCount()+Ft+1);i.updateSymbolInfo(Ut);var Xt=i.getSymbolInfo().getDataCapacity()-Ut,Kt=Math.floor(s.length()%3);(Kt===2&&Xt!==2||Kt===1&&(_>3||Xt!==1))&&(i.pos=_e)}s.length()>0&&i.writeCodeword(LATCH_TO_C40),this.handleEOD(i,s)},o.prototype.encode=function(i){for(var s=new StringBuilder;i.hasMoreCharacters();){var _=i.getCurrentChar();i.pos++;var _e=this.encodeChar(_,s),ct=2*Math.floor(s.length()/3),Mt=i.getCodewordCount()+ct;i.updateSymbolInfo(Mt);var Ft=i.getSymbolInfo().getDataCapacity()-Mt;if(!i.hasMoreCharacters()){var Ut=new StringBuilder;for(s.length()%3==2&&Ft!==2&&(_e=this.backtrackOneCharacter(i,s,Ut,_e));s.length()%3==1&&(_e>3||Ft!==1);)_e=this.backtrackOneCharacter(i,s,Ut,_e);break}if(s.length()%3==0&&HighLevelEncoder$2.lookAheadTest(i.getMessage(),i.pos,this.getEncodingMode())!==this.getEncodingMode()){i.signalEncoderChange(ASCII_ENCODATION);break}}this.handleEOD(i,s)},o.prototype.backtrackOneCharacter=function(i,s,_,_e){var ct=s.length(),Mt=s.toString().substring(0,ct-_e);s.setLengthToZero(),s.append(Mt),i.pos--;var Ft=i.getCurrentChar();return _e=this.encodeChar(Ft,_),i.resetSymbolInfo(),_e},o.prototype.writeNextTriplet=function(i,s){i.writeCodewords(this.encodeToCodewords(s.toString()));var _=s.toString().substring(3);s.setLengthToZero(),s.append(_)},o.prototype.handleEOD=function(i,s){var _=Math.floor(s.length()/3*2),_e=s.length()%3,ct=i.getCodewordCount()+_;i.updateSymbolInfo(ct);var Mt=i.getSymbolInfo().getDataCapacity()-ct;if(_e===2){for(s.append("\0");s.length()>=3;)this.writeNextTriplet(i,s);i.hasMoreCharacters()&&i.writeCodeword(C40_UNLATCH)}else if(Mt===1&&_e===1){for(;s.length()>=3;)this.writeNextTriplet(i,s);i.hasMoreCharacters()&&i.writeCodeword(C40_UNLATCH),i.pos--}else{if(_e!==0)throw new Error("Unexpected case. Please report!");for(;s.length()>=3;)this.writeNextTriplet(i,s);(Mt>0||i.hasMoreCharacters())&&i.writeCodeword(C40_UNLATCH)}i.signalEncoderChange(ASCII_ENCODATION)},o.prototype.encodeChar=function(i,s){if(i===32)return s.append(3),1;if(i>=48&&i<=57)return s.append(i-48+4),1;if(i>=65&&i<=90)return s.append(i-65+14),1;if(i<32)return s.append(0),s.append(i),2;if(i<=47)return s.append(1),s.append(i-33),2;if(i<=64)return s.append(1),s.append(i-58+15),2;if(i<=95)return s.append(1),s.append(i-91+22),2;if(i<=127)return s.append(2),s.append(i-96),2;s.append("1");var _=2;return _+=this.encodeChar(i-128,s)},o.prototype.encodeToCodewords=function(i){var s=1600*i.charCodeAt(0)+40*i.charCodeAt(1)+i.charCodeAt(2)+1,_=s/256,_e=s%256,ct=new StringBuilder;return ct.append(_),ct.append(_e),ct.toString()},o}(),EdifactEncoder=function(){function o(){}return o.prototype.getEncodingMode=function(){return EDIFACT_ENCODATION},o.prototype.encode=function(i){for(var s=new StringBuilder;i.hasMoreCharacters();){var _=i.getCurrentChar();if(this.encodeChar(_,s),i.pos++,s.length()>=4){i.writeCodewords(this.encodeToCodewords(s.toString()));var _e=s.toString().substring(4);if(s.setLengthToZero(),s.append(_e),HighLevelEncoder$2.lookAheadTest(i.getMessage(),i.pos,this.getEncodingMode())!==this.getEncodingMode()){i.signalEncoderChange(ASCII_ENCODATION);break}}}s.append(StringUtils.getCharAt(31)),this.handleEOD(i,s)},o.prototype.handleEOD=function(i,s){try{var _=s.length();if(_===0)return;if(_===1){i.updateSymbolInfo();var _e=i.getSymbolInfo().getDataCapacity()-i.getCodewordCount(),ct=i.getRemainingCharacters();if(ct>_e&&(i.updateSymbolInfo(i.getCodewordCount()+1),_e=i.getSymbolInfo().getDataCapacity()-i.getCodewordCount()),ct<=_e&&_e<=2)return}if(_>4)throw new Error("Count must not exceed 4");var Mt=_-1,Ft=this.encodeToCodewords(s.toString()),Ut=!i.hasMoreCharacters()&&Mt<=2;Mt<=2&&(i.updateSymbolInfo(i.getCodewordCount()+Mt),(_e=i.getSymbolInfo().getDataCapacity()-i.getCodewordCount())>=3&&(Ut=!1,i.updateSymbolInfo(i.getCodewordCount()+Ft.length))),Ut?(i.resetSymbolInfo(),i.pos-=Mt):i.writeCodewords(Ft)}finally{i.signalEncoderChange(ASCII_ENCODATION)}},o.prototype.encodeChar=function(i,s){i>=32&&i<=63?s.append(i):i>=64&&i<=94?s.append(StringUtils.getCharAt(i-64)):HighLevelEncoder$2.illegalCharacter(StringUtils.getCharAt(i))},o.prototype.encodeToCodewords=function(i){var s=i.length;if(s===0)throw new Error("StringBuilder must not be empty");var _=(i.charAt(0).charCodeAt(0)<<18)+((s>=2?i.charAt(1).charCodeAt(0):0)<<12)+((s>=3?i.charAt(2).charCodeAt(0):0)<<6)+(s>=4?i.charAt(3).charCodeAt(0):0),_e=_>>16&255,ct=_>>8&255,Mt=255&_,Ft=new StringBuilder;return Ft.append(_e),s>=2&&Ft.append(ct),s>=3&&Ft.append(Mt),Ft.toString()},o}(),__extends$5=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}(),__values$5=function(o){var i=typeof Symbol=="function"&&Symbol.iterator,s=i&&o[i],_=0;if(s)return s.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&_>=o.length&&(o=void 0),{value:o&&o[_++],done:!o}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},SymbolInfo=function(){function o(i,s,_,_e,ct,Mt,Ft,Ut){Ft===void 0&&(Ft=0),Ut===void 0&&(Ut=0),this.rectangular=i,this.dataCapacity=s,this.errorCodewords=_,this.matrixWidth=_e,this.matrixHeight=ct,this.dataRegions=Mt,this.rsBlockData=Ft,this.rsBlockError=Ut}return o.lookup=function(i,s,_,_e,ct){var Mt,Ft;s===void 0&&(s=0),_===void 0&&(_=null),_e===void 0&&(_e=null),ct===void 0&&(ct=!0);try{for(var Ut=__values$5(PROD_SYMBOLS),Xt=Ut.next();!Xt.done;Xt=Ut.next()){var Kt=Xt.value;if((s!==1||!Kt.rectangular)&&(s!==2||Kt.rectangular)&&(_==null||!(Kt.getSymbolWidth()<_.getWidth()||Kt.getSymbolHeight()<_.getHeight()))&&(_e==null||!(Kt.getSymbolWidth()>_e.getWidth()||Kt.getSymbolHeight()>_e.getHeight()))&&i<=Kt.dataCapacity)return Kt}}catch(nr){Mt={error:nr}}finally{try{Xt&&!Xt.done&&(Ft=Ut.return)&&Ft.call(Ut)}finally{if(Mt)throw Mt.error}}if(ct)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+i);return null},o.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},o.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},o.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},o.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},o.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+2*this.getHorizontalDataRegions()},o.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+2*this.getVerticalDataRegions()},o.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},o.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},o.prototype.getDataCapacity=function(){return this.dataCapacity},o.prototype.getErrorCodewords=function(){return this.errorCodewords},o.prototype.getDataLengthForInterleavedBlock=function(i){return this.rsBlockData},o.prototype.getErrorLengthForInterleavedBlock=function(i){return this.rsBlockError},o}(),DataMatrixSymbolInfo144=function(o){function i(){return o.call(this,!1,1558,620,22,22,36,-1,62)||this}return __extends$5(i,o),i.prototype.getInterleavedBlockCount=function(){return 10},i.prototype.getDataLengthForInterleavedBlock=function(s){return s<=8?156:155},i}(SymbolInfo),PROD_SYMBOLS=[new SymbolInfo(!1,3,5,8,8,1),new SymbolInfo(!1,5,7,10,10,1),new SymbolInfo(!0,5,7,16,6,1),new SymbolInfo(!1,8,10,12,12,1),new SymbolInfo(!0,10,11,14,6,2),new SymbolInfo(!1,12,12,14,14,1),new SymbolInfo(!0,16,14,24,10,1),new SymbolInfo(!1,18,14,16,16,1),new SymbolInfo(!1,22,18,18,18,1),new SymbolInfo(!0,22,18,16,10,2),new SymbolInfo(!1,30,20,20,20,1),new SymbolInfo(!0,32,24,16,14,2),new SymbolInfo(!1,36,24,22,22,1),new SymbolInfo(!1,44,28,24,24,1),new SymbolInfo(!0,49,28,22,14,2),new SymbolInfo(!1,62,36,14,14,4),new SymbolInfo(!1,86,42,16,16,4),new SymbolInfo(!1,114,48,18,18,4),new SymbolInfo(!1,144,56,20,20,4),new SymbolInfo(!1,174,68,22,22,4),new SymbolInfo(!1,204,84,24,24,4,102,42),new SymbolInfo(!1,280,112,14,14,16,140,56),new SymbolInfo(!1,368,144,16,16,16,92,36),new SymbolInfo(!1,456,192,18,18,16,114,48),new SymbolInfo(!1,576,224,20,20,16,144,56),new SymbolInfo(!1,696,272,22,22,16,174,68),new SymbolInfo(!1,816,336,24,24,16,136,56),new SymbolInfo(!1,1050,408,18,18,36,175,68),new SymbolInfo(!1,1304,496,20,20,36,163,62),new DataMatrixSymbolInfo144],EncoderContext=function(){function o(i){this.msg=i,this.pos=0,this.skipAtEnd=0;for(var s=i.split("").map(function(Ft){return Ft.charCodeAt(0)}),_=new StringBuilder,_e=0,ct=s.length;_e<ct;_e++){var Mt=String.fromCharCode(255&s[_e]);if(Mt==="?"&&i.charAt(_e)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");_.append(Mt)}this.msg=_.toString(),this.shape=0,this.codewords=new StringBuilder,this.newEncoding=-1}return o.prototype.setSymbolShape=function(i){this.shape=i},o.prototype.setSizeConstraints=function(i,s){this.minSize=i,this.maxSize=s},o.prototype.getMessage=function(){return this.msg},o.prototype.setSkipAtEnd=function(i){this.skipAtEnd=i},o.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},o.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},o.prototype.getCodewords=function(){return this.codewords},o.prototype.writeCodewords=function(i){this.codewords.append(i)},o.prototype.writeCodeword=function(i){this.codewords.append(i)},o.prototype.getCodewordCount=function(){return this.codewords.length()},o.prototype.getNewEncoding=function(){return this.newEncoding},o.prototype.signalEncoderChange=function(i){this.newEncoding=i},o.prototype.resetEncoderSignal=function(){this.newEncoding=-1},o.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},o.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},o.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},o.prototype.getSymbolInfo=function(){return this.symbolInfo},o.prototype.updateSymbolInfo=function(i){i===void 0&&(i=this.getCodewordCount()),(this.symbolInfo==null||i>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=SymbolInfo.lookup(i,this.shape,this.minSize,this.maxSize,!0))},o.prototype.resetSymbolInfo=function(){this.symbolInfo=null},o}(),__extends$4=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}(),X12Encoder=function(o){function i(){return o!==null&&o.apply(this,arguments)||this}return __extends$4(i,o),i.prototype.getEncodingMode=function(){return X12_ENCODATION},i.prototype.encode=function(s){for(var _=new StringBuilder;s.hasMoreCharacters();){var _e=s.getCurrentChar();if(s.pos++,this.encodeChar(_e,_),_.length()%3==0&&(this.writeNextTriplet(s,_),HighLevelEncoder$2.lookAheadTest(s.getMessage(),s.pos,this.getEncodingMode())!==this.getEncodingMode())){s.signalEncoderChange(ASCII_ENCODATION);break}}this.handleEOD(s,_)},i.prototype.encodeChar=function(s,_){switch(s){case 13:_.append(0);break;case 42:_.append(1);break;case 62:_.append(2);break;case 32:_.append(3);break;default:s>=48&&s<=57?_.append(s-48+4):s>=65&&s<=90?_.append(s-65+14):HighLevelEncoder$2.illegalCharacter(StringUtils.getCharAt(s))}return 1},i.prototype.handleEOD=function(s,_){s.updateSymbolInfo();var _e=s.getSymbolInfo().getDataCapacity()-s.getCodewordCount(),ct=_.length();s.pos-=ct,(s.getRemainingCharacters()>1||_e>1||s.getRemainingCharacters()!==_e)&&s.writeCodeword(X12_UNLATCH),s.getNewEncoding()<0&&s.signalEncoderChange(ASCII_ENCODATION)},i}(C40Encoder),__extends$3=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}(),TextEncoder$1=function(o){function i(){return o!==null&&o.apply(this,arguments)||this}return __extends$3(i,o),i.prototype.getEncodingMode=function(){return TEXT_ENCODATION},i.prototype.encodeChar=function(s,_){if(s===32)return _.append(3),1;if(s>=48&&s<=57)return _.append(s-48+4),1;if(s>=97&&s<=122)return _.append(s-97+14),1;if(s<32)return _.append(0),_.append(s),2;if(s<=47)return _.append(1),_.append(s-33),2;if(s<=64)return _.append(1),_.append(s-58+15),2;if(s>=91&&s<=95)return _.append(1),_.append(s-91+22),2;if(s===96)return _.append(2),_.append(0),2;if(s<=90)return _.append(2),_.append(s-65+1),2;if(s<=127)return _.append(2),_.append(s-123+27),2;_.append("1");var _e=2;return _e+=this.encodeChar(s-128,_)},i}(C40Encoder),HighLevelEncoder$1=function(){function o(){}return o.randomize253State=function(i){var s=PAD+(149*i%253+1);return s<=254?s:s-254},o.encodeHighLevel=function(i,s,_,_e,ct){s===void 0&&(s=0),_===void 0&&(_=null),_e===void 0&&(_e=null),ct===void 0&&(ct=!1);var Mt=new C40Encoder,Ft=[new ASCIIEncoder,Mt,new TextEncoder$1,new X12Encoder,new EdifactEncoder,new Base256Encoder],Ut=new EncoderContext(i);Ut.setSymbolShape(s),Ut.setSizeConstraints(_,_e),i.startsWith(MACRO_05_HEADER)&&i.endsWith(MACRO_TRAILER)?(Ut.writeCodeword(MACRO_05),Ut.setSkipAtEnd(2),Ut.pos+=MACRO_05_HEADER.length):i.startsWith(MACRO_06_HEADER)&&i.endsWith(MACRO_TRAILER)&&(Ut.writeCodeword(MACRO_06),Ut.setSkipAtEnd(2),Ut.pos+=MACRO_06_HEADER.length);var Xt=ASCII_ENCODATION;for(ct&&(Mt.encodeMaximal(Ut),Xt=Ut.getNewEncoding(),Ut.resetEncoderSignal());Ut.hasMoreCharacters();)Ft[Xt].encode(Ut),Ut.getNewEncoding()>=0&&(Xt=Ut.getNewEncoding(),Ut.resetEncoderSignal());var Kt=Ut.getCodewordCount();Ut.updateSymbolInfo();var nr=Ut.getSymbolInfo().getDataCapacity();Kt<nr&&Xt!==ASCII_ENCODATION&&Xt!==BASE256_ENCODATION&&Xt!==EDIFACT_ENCODATION&&Ut.writeCodeword("þ");var rr=Ut.getCodewords();for(rr.length()<nr&&rr.append(PAD);rr.length()<nr;)rr.append(this.randomize253State(rr.length()+1));return Ut.getCodewords().toString()},o.lookAheadTest=function(i,s,_){var _e=this.lookAheadTestIntern(i,s,_);if(_===X12_ENCODATION&&_e===X12_ENCODATION){for(var ct=Math.min(s+3,i.length),Mt=s;Mt<ct;Mt++)if(!this.isNativeX12(i.charCodeAt(Mt)))return ASCII_ENCODATION}else if(_===EDIFACT_ENCODATION&&_e===EDIFACT_ENCODATION){for(ct=Math.min(s+4,i.length),Mt=s;Mt<ct;Mt++)if(!this.isNativeEDIFACT(i.charCodeAt(Mt)))return ASCII_ENCODATION}return _e},o.lookAheadTestIntern=function(i,s,_){if(s>=i.length)return _;var _e;_===ASCII_ENCODATION?_e=[0,1,1,1,1,1.25]:(_e=[1,2,2,2,2,2.25])[_]=0;for(var ct=0,Mt=new Uint8Array(6),Ft=[];;){if(s+ct===i.length){Arrays.fill(Mt,0),Arrays.fill(Ft,0);var Ut=this.findMinimums(_e,Ft,Integer.MAX_VALUE,Mt),Xt=this.getMinimumCount(Mt);if(Ft[ASCII_ENCODATION]===Ut)return ASCII_ENCODATION;if(Xt===1){if(Mt[BASE256_ENCODATION]>0)return BASE256_ENCODATION;if(Mt[EDIFACT_ENCODATION]>0)return EDIFACT_ENCODATION;if(Mt[TEXT_ENCODATION]>0)return TEXT_ENCODATION;if(Mt[X12_ENCODATION]>0)return X12_ENCODATION}return C40_ENCODATION}var Kt=i.charCodeAt(s+ct);if(ct++,this.isDigit(Kt)?_e[ASCII_ENCODATION]+=.5:this.isExtendedASCII(Kt)?(_e[ASCII_ENCODATION]=Math.ceil(_e[ASCII_ENCODATION]),_e[ASCII_ENCODATION]+=2):(_e[ASCII_ENCODATION]=Math.ceil(_e[ASCII_ENCODATION]),_e[ASCII_ENCODATION]++),this.isNativeC40(Kt)?_e[C40_ENCODATION]+=2/3:this.isExtendedASCII(Kt)?_e[C40_ENCODATION]+=8/3:_e[C40_ENCODATION]+=4/3,this.isNativeText(Kt)?_e[TEXT_ENCODATION]+=2/3:this.isExtendedASCII(Kt)?_e[TEXT_ENCODATION]+=8/3:_e[TEXT_ENCODATION]+=4/3,this.isNativeX12(Kt)?_e[X12_ENCODATION]+=2/3:this.isExtendedASCII(Kt)?_e[X12_ENCODATION]+=13/3:_e[X12_ENCODATION]+=10/3,this.isNativeEDIFACT(Kt)?_e[EDIFACT_ENCODATION]+=3/4:this.isExtendedASCII(Kt)?_e[EDIFACT_ENCODATION]+=4.25:_e[EDIFACT_ENCODATION]+=3.25,this.isSpecialB256(Kt)?_e[BASE256_ENCODATION]+=4:_e[BASE256_ENCODATION]++,ct>=4){if(Arrays.fill(Mt,0),Arrays.fill(Ft,0),this.findMinimums(_e,Ft,Integer.MAX_VALUE,Mt),Ft[ASCII_ENCODATION]<this.min(Ft[BASE256_ENCODATION],Ft[C40_ENCODATION],Ft[TEXT_ENCODATION],Ft[X12_ENCODATION],Ft[EDIFACT_ENCODATION]))return ASCII_ENCODATION;if(Ft[BASE256_ENCODATION]<Ft[ASCII_ENCODATION]||Ft[BASE256_ENCODATION]+1<this.min(Ft[C40_ENCODATION],Ft[TEXT_ENCODATION],Ft[X12_ENCODATION],Ft[EDIFACT_ENCODATION]))return BASE256_ENCODATION;if(Ft[EDIFACT_ENCODATION]+1<this.min(Ft[BASE256_ENCODATION],Ft[C40_ENCODATION],Ft[TEXT_ENCODATION],Ft[X12_ENCODATION],Ft[ASCII_ENCODATION]))return EDIFACT_ENCODATION;if(Ft[TEXT_ENCODATION]+1<this.min(Ft[BASE256_ENCODATION],Ft[C40_ENCODATION],Ft[EDIFACT_ENCODATION],Ft[X12_ENCODATION],Ft[ASCII_ENCODATION]))return TEXT_ENCODATION;if(Ft[X12_ENCODATION]+1<this.min(Ft[BASE256_ENCODATION],Ft[C40_ENCODATION],Ft[EDIFACT_ENCODATION],Ft[TEXT_ENCODATION],Ft[ASCII_ENCODATION]))return X12_ENCODATION;if(Ft[C40_ENCODATION]+1<this.min(Ft[ASCII_ENCODATION],Ft[BASE256_ENCODATION],Ft[EDIFACT_ENCODATION],Ft[TEXT_ENCODATION])){if(Ft[C40_ENCODATION]<Ft[X12_ENCODATION])return C40_ENCODATION;if(Ft[C40_ENCODATION]===Ft[X12_ENCODATION]){for(var nr=s+ct+1;nr<i.length;){var rr=i.charCodeAt(nr);if(this.isX12TermSep(rr))return X12_ENCODATION;if(!this.isNativeX12(rr))break;nr++}return C40_ENCODATION}}}}},o.min=function(i,s,_,_e,ct){var Mt=Math.min(i,Math.min(s,Math.min(_,_e)));return ct===void 0?Mt:Math.min(Mt,ct)},o.findMinimums=function(i,s,_,_e){for(var ct=0;ct<6;ct++){var Mt=s[ct]=Math.ceil(i[ct]);_>Mt&&(_=Mt,Arrays.fill(_e,0)),_===Mt&&(_e[ct]=_e[ct]+1)}return _},o.getMinimumCount=function(i){for(var s=0,_=0;_<6;_++)s+=i[_];return s||0},o.isDigit=function(i){return i>=48&&i<=57},o.isExtendedASCII=function(i){return i>=128&&i<=255},o.isNativeC40=function(i){return i===32||i>=48&&i<=57||i>=65&&i<=90},o.isNativeText=function(i){return i===32||i>=48&&i<=57||i>=97&&i<=122},o.isNativeX12=function(i){return this.isX12TermSep(i)||i===32||i>=48&&i<=57||i>=65&&i<=90},o.isX12TermSep=function(i){return i===13||i===42||i===62},o.isNativeEDIFACT=function(i){return i>=32&&i<=94},o.isSpecialB256=function(i){return!1},o.determineConsecutiveDigitCount=function(i,s){s===void 0&&(s=0);for(var _=i.length,_e=s;_e<_&&this.isDigit(i.charCodeAt(_e));)_e++;return _e-s},o.illegalCharacter=function(i){var s=Integer.toHexString(i.charCodeAt(0));throw s="0000".substring(0,4-s.length)+s,new Error("Illegal character: "+i+" (0x"+s+")")},o}(),HighLevelEncoder$2=HighLevelEncoder$1,__values$4=function(o){var i=typeof Symbol=="function"&&Symbol.iterator,s=i&&o[i],_=0;if(s)return s.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&_>=o.length&&(o=void 0),{value:o&&o[_++],done:!o}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},CharsetEncoder=function(){function o(i){this.charset=i,this.name=i.name}return o.prototype.canEncode=function(i){try{return StringEncoding.encode(i,this.charset)!=null}catch{return!1}},o}(),ECIEncoderSet=function(){function o(i,s,_){var _e,ct,Mt,Ft,Ut,Xt;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(ko){return new CharsetEncoder(Charset.forName(ko))}),this.encoders=[];var Kt=[];Kt.push(new CharsetEncoder(StandardCharsets.ISO_8859_1));for(var nr=s!=null&&s.name.startsWith("UTF"),rr=0;rr<i.length;rr++){var or=!1;try{for(var hr=(_e=void 0,__values$4(Kt)),fr=hr.next();!fr.done;fr=hr.next()){var yr=fr.value,Lr=i.charAt(rr);if(Lr.charCodeAt(0)===_||yr.canEncode(Lr)){or=!0;break}}}catch(ko){_e={error:ko}}finally{try{fr&&!fr.done&&(ct=hr.return)&&ct.call(hr)}finally{if(_e)throw _e.error}}if(!or)try{for(var Br=(Mt=void 0,__values$4(this.ENCODERS)),Vr=Br.next();!Vr.done;Vr=Br.next())if((yr=Vr.value).canEncode(i.charAt(rr))){Kt.push(yr),or=!0;break}}catch(ko){Mt={error:ko}}finally{try{Vr&&!Vr.done&&(Ft=Br.return)&&Ft.call(Br)}finally{if(Mt)throw Mt.error}}or||(nr=!0)}if(Kt.length!==1||nr){this.encoders=[];var Wr=0;try{for(var ro=__values$4(Kt),no=ro.next();!no.done;no=ro.next())yr=no.value,this.encoders[Wr++]=yr}catch(ko){Ut={error:ko}}finally{try{no&&!no.done&&(Xt=ro.return)&&Xt.call(ro)}finally{if(Ut)throw Ut.error}}}else this.encoders=[Kt[0]];var so=-1;if(s!=null){for(rr=0;rr<this.encoders.length;rr++)if(this.encoders[rr]!=null&&s.name===this.encoders[rr].name){so=rr;break}}this.priorityEncoderIndex=so}return o.prototype.length=function(){return this.encoders.length},o.prototype.getCharsetName=function(i){if(!(i<this.length()))throw new Error("index must be less than length");return this.encoders[i].name},o.prototype.getCharset=function(i){if(!(i<this.length()))throw new Error("index must be less than length");return this.encoders[i].charset},o.prototype.getECIValue=function(i){return this.encoders[i].charset.getValueIdentifier()},o.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},o.prototype.canEncode=function(i,s){if(!(s<this.length()))throw new Error("index must be less than length");return!0},o.prototype.encode=function(i,s){if(!(s<this.length()))throw new Error("index must be less than length");return StringEncoding.encode(StringUtils.getCharAt(i),this.encoders[s].name)},o}(),COST_PER_ECI=3,MinimalECIInput=function(){function o(i,s,_){this.fnc1=_;var _e=new ECIEncoderSet(i,s,_);if(_e.length()===1)for(var ct=0;ct<this.bytes.length;ct++){var Mt=i.charAt(ct).charCodeAt(0);this.bytes[ct]=Mt===_?1e3:Mt}else this.bytes=this.encodeMinimally(i,_e,_)}return o.prototype.getFNC1Character=function(){return this.fnc1},o.prototype.length=function(){return this.bytes.length},o.prototype.haveNCharacters=function(i,s){if(i+s-1>=this.bytes.length)return!1;for(var _=0;_<s;_++)if(this.isECI(i+_))return!1;return!0},o.prototype.charAt=function(i){if(i<0||i>=this.length())throw new Error(""+i);if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");return this.isFNC1(i)?this.fnc1:this.bytes[i]},o.prototype.subSequence=function(i,s){if(i<0||i>s||s>this.length())throw new Error(""+i);for(var _=new StringBuilder,_e=i;_e<s;_e++){if(this.isECI(_e))throw new Error("value at "+_e+" is not a character but an ECI");_.append(this.charAt(_e))}return _.toString()},o.prototype.isECI=function(i){if(i<0||i>=this.length())throw new Error(""+i);return this.bytes[i]>255&&this.bytes[i]<=999},o.prototype.isFNC1=function(i){if(i<0||i>=this.length())throw new Error(""+i);return this.bytes[i]===1e3},o.prototype.getECIValue=function(i){if(i<0||i>=this.length())throw new Error(""+i);if(!this.isECI(i))throw new Error("value at "+i+" is not an ECI but a character");return this.bytes[i]-256},o.prototype.addEdge=function(i,s,_){(i[s][_.encoderIndex]==null||i[s][_.encoderIndex].cachedTotalSize>_.cachedTotalSize)&&(i[s][_.encoderIndex]=_)},o.prototype.addEdges=function(i,s,_,_e,ct,Mt){var Ft=i.charAt(_e).charCodeAt(0),Ut=0,Xt=s.length();s.getPriorityEncoderIndex()>=0&&(Ft===Mt||s.canEncode(Ft,s.getPriorityEncoderIndex()))&&(Xt=(Ut=s.getPriorityEncoderIndex())+1);for(var Kt=Ut;Kt<Xt;Kt++)(Ft===Mt||s.canEncode(Ft,Kt))&&this.addEdge(_,_e+1,new InputEdge(Ft,s,Kt,ct,Mt))},o.prototype.encodeMinimally=function(i,s,_){var _e=i.length,ct=new InputEdge[_e+1][s.length()];this.addEdges(i,s,ct,0,null,_);for(var Mt=1;Mt<=_e;Mt++){for(var Ft=0;Ft<s.length();Ft++)ct[Mt][Ft]!=null&&Mt<_e&&this.addEdges(i,s,ct,Mt,ct[Mt][Ft],_);for(Ft=0;Ft<s.length();Ft++)ct[Mt-1][Ft]=null}var Ut=-1,Xt=Integer.MAX_VALUE;for(Ft=0;Ft<s.length();Ft++)if(ct[_e][Ft]!=null){var Kt=ct[_e][Ft];Kt.cachedTotalSize<Xt&&(Xt=Kt.cachedTotalSize,Ut=Ft)}if(Ut<0)throw new Error('Failed to encode "'+i+'"');for(var nr=[],rr=ct[_e][Ut];rr!=null;){if(rr.isFNC1())nr.unshift(1e3);else{var or=s.encode(rr.c,rr.encoderIndex);for(Mt=or.length-1;Mt>=0;Mt--)nr.unshift(255&or[Mt])}(rr.previous===null?0:rr.previous.encoderIndex)!==rr.encoderIndex&&nr.unshift(256+s.getECIValue(rr.encoderIndex)),rr=rr.previous}var hr=[];for(Mt=0;Mt<hr.length;Mt++)hr[Mt]=nr[Mt];return hr},o}(),InputEdge=function(){function o(i,s,_,_e,ct){this.c=i,this.encoderSet=s,this.encoderIndex=_,this.previous=_e,this.fnc1=ct,this.c=i===ct?1e3:i;var Mt=this.isFNC1()?1:s.encode(i,_).length;(_e===null?0:_e.encoderIndex)!==_&&(Mt+=COST_PER_ECI),_e!=null&&(Mt+=_e.cachedTotalSize),this.cachedTotalSize=Mt}return o.prototype.isFNC1=function(){return this.c===1e3},o}(),__extends$2=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}(),Mode;(function(o){o[o.ASCII=0]="ASCII",o[o.C40=1]="C40",o[o.TEXT=2]="TEXT",o[o.X12=3]="X12",o[o.EDF=4]="EDF",o[o.B256=5]="B256"})(Mode||(Mode={})),function(o){function i(s,_,_e,ct,Mt){var Ft=o.call(this,s,_,_e)||this;return Ft.shape=ct,Ft.macroId=Mt,Ft}__extends$2(i,o),i.prototype.getMacroId=function(){return this.macroId},i.prototype.getShapeHint=function(){return this.shape}}(MinimalECIInput);var Token=function(){function o(i){this.previous=i}return o.prototype.getPrevious=function(){return this.previous},o}(),__extends$1=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}(),SimpleToken=function(o){function i(s,_,_e){var ct=o.call(this,s)||this;return ct.value=_,ct.bitCount=_e,ct}return __extends$1(i,o),i.prototype.appendTo=function(s,_){s.appendBits(this.value,this.bitCount)},i.prototype.add=function(s,_){return new i(this,s,_)},i.prototype.addBinaryShift=function(s,_){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new i(this,s,_)},i.prototype.toString=function(){var s=this.value&(1<<this.bitCount)-1;return s|=1<<this.bitCount,"<"+Integer.toBinaryString(s|1<<this.bitCount).substring(1)+">"},i}(Token),__extends=function(){var o=function(i,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,_e){_.__proto__=_e}||function(_,_e){for(var ct in _e)_e.hasOwnProperty(ct)&&(_[ct]=_e[ct])},o(i,s)};return function(i,s){function _(){this.constructor=i}o(i,s),i.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}}();(function(o){function i(s,_,_e){var ct=o.call(this,s,0,0)||this;return ct.binaryShiftStart=_,ct.binaryShiftByteCount=_e,ct}return __extends(i,o),i.prototype.appendTo=function(s,_){for(var _e=0;_e<this.binaryShiftByteCount;_e++)(_e===0||_e===31&&this.binaryShiftByteCount<=62)&&(s.appendBits(31,5),this.binaryShiftByteCount>62?s.appendBits(this.binaryShiftByteCount-31,16):_e===0?s.appendBits(Math.min(this.binaryShiftByteCount,31),5):s.appendBits(this.binaryShiftByteCount-31,5)),s.appendBits(_[this.binaryShiftStart+_e],8)},i.prototype.addBinaryShift=function(s,_){return new i(this,s,_)},i.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},i})(SimpleToken);var MODE_UPPER=0,MODE_LOWER=1,MODE_DIGIT=2,MODE_MIXED=3,MODE_PUNCT=4;new SimpleToken(null,0,0);Int32Array.from([0,327708,327710,327709,656318]),Int32Array.from([590318,0,327710,327709,656318]),Int32Array.from([262158,590300,0,590301,932798]),Int32Array.from([327709,327708,656318,0,327710]),Int32Array.from([327711,656380,656382,656381,0]);var __values$3=function(o){var i=typeof Symbol=="function"&&Symbol.iterator,s=i&&o[i],_=0;if(s)return s.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&_>=o.length&&(o=void 0),{value:o&&o[_++],done:!o}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")};function static_SHIFT_TABLE(o){var i,s;try{for(var _=__values$3(o),_e=_.next();!_e.done;_e=_.next()){var ct=_e.value;Arrays.fill(ct,-1)}}catch(Mt){i={error:Mt}}finally{try{_e&&!_e.done&&(s=_.return)&&s.call(_)}finally{if(i)throw i.error}}return o[MODE_UPPER][MODE_PUNCT]=0,o[MODE_LOWER][MODE_PUNCT]=0,o[MODE_LOWER][MODE_UPPER]=28,o[MODE_MIXED][MODE_PUNCT]=0,o[MODE_DIGIT][MODE_PUNCT]=0,o[MODE_DIGIT][MODE_UPPER]=15,o}static_SHIFT_TABLE(Arrays.createInt32Array(6,6));function static_CHAR_MAP(o){var i=StringUtils.getCharCode(" "),s=StringUtils.getCharCode("."),_=StringUtils.getCharCode(",");o[MODE_UPPER][i]=1;for(var _e=StringUtils.getCharCode("Z"),ct=StringUtils.getCharCode("A"),Mt=ct;Mt<=_e;Mt++)o[MODE_UPPER][Mt]=Mt-ct+2;o[MODE_LOWER][i]=1;var Ft=StringUtils.getCharCode("z"),Ut=StringUtils.getCharCode("a");for(Mt=Ut;Mt<=Ft;Mt++)o[MODE_LOWER][Mt]=Mt-Ut+2;o[MODE_DIGIT][i]=1;var Xt=StringUtils.getCharCode("9"),Kt=StringUtils.getCharCode("0");for(Mt=Kt;Mt<=Xt;Mt++)o[MODE_DIGIT][Mt]=Mt-Kt+2;o[MODE_DIGIT][_]=12,o[MODE_DIGIT][s]=13;for(var nr=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],rr=0;rr<nr.length;rr++)o[MODE_MIXED][StringUtils.getCharCode(nr[rr])]=rr;var or=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(rr=0;rr<or.length;rr++)StringUtils.getCharCode(or[rr])>0&&(o[MODE_PUNCT][StringUtils.getCharCode(or[rr])]=rr);return o}static_CHAR_MAP(Arrays.createInt32Array(5,256));function __insertCSS(o){if(typeof document>"u")return;let i=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",i.appendChild(s),s.styleSheet?s.styleSheet.cssText=o:s.appendChild(document.createTextNode(o))}(function(){Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12])})();const DrawerContext=React__default.createContext({drawerRef:{current:null},overlayRef:{current:null},scaleBackground:()=>{},onPress:()=>{},onRelease:()=>{},onDrag:()=>{},onNestedDrag:()=>{},onNestedOpenChange:()=>{},onNestedRelease:()=>{},openProp:void 0,dismissible:!1,handleOnly:!1,isOpen:!1,isDragging:!1,keyboardIsOpen:{current:!1},snapPointsOffset:null,snapPoints:null,modal:!1,shouldFade:!1,activeSnapPoint:null,onOpenChange:()=>{},setActiveSnapPoint:()=>{},visible:!1,closeDrawer:()=>{},setVisible:()=>{},direction:"bottom"}),useDrawerContext=()=>{const o=React__default.useContext(DrawerContext);if(!o)throw new Error("useDrawerContext must be used within a Drawer.Root");return o};__insertCSS("[vaul-drawer]{touch-action:none;will-change:transform;transition:transform .5s cubic-bezier(.32, .72, 0, 1)}[vaul-drawer][vaul-drawer-direction=bottom]{transform:translate3d(0,100%,0)}[vaul-drawer][vaul-drawer-direction=top]{transform:translate3d(0,-100%,0)}[vaul-drawer][vaul-drawer-direction=left]{transform:translate3d(-100%,0,0)}[vaul-drawer][vaul-drawer-direction=right]{transform:translate3d(100%,0,0)}.vaul-dragging .vaul-scrollable [vault-drawer-direction=top]{overflow-y:hidden!important}.vaul-dragging .vaul-scrollable [vault-drawer-direction=bottom]{overflow-y:hidden!important}.vaul-dragging .vaul-scrollable [vault-drawer-direction=left]{overflow-x:hidden!important}.vaul-dragging .vaul-scrollable [vault-drawer-direction=right]{overflow-x:hidden!important}[vaul-drawer][vaul-drawer-visible=true][vaul-drawer-direction=top]{transform:translate3d(0,var(--snap-point-height,0),0)}[vaul-drawer][vaul-drawer-visible=true][vaul-drawer-direction=bottom]{transform:translate3d(0,var(--snap-point-height,0),0)}[vaul-drawer][vaul-drawer-visible=true][vaul-drawer-direction=left]{transform:translate3d(var(--snap-point-height,0),0,0)}[vaul-drawer][vaul-drawer-visible=true][vaul-drawer-direction=right]{transform:translate3d(var(--snap-point-height,0),0,0)}[vaul-overlay]{opacity:0;transition:opacity .5s cubic-bezier(.32, .72, 0, 1)}[vaul-overlay][vaul-drawer-visible=true]{opacity:1}[vaul-drawer]::after{content:'';position:absolute;background:inherit;background-color:inherit}[vaul-drawer][vaul-drawer-direction=top]::after{top:initial;bottom:100%;left:0;right:0;height:200%}[vaul-drawer][vaul-drawer-direction=bottom]::after{top:100%;bottom:initial;left:0;right:0;height:200%}[vaul-drawer][vaul-drawer-direction=left]::after{left:initial;right:100%;top:0;bottom:0;width:200%}[vaul-drawer][vaul-drawer-direction=right]::after{left:100%;right:initial;top:0;bottom:0;width:200%}[vaul-handle]{display:block;position:relative;opacity:.8;margin-left:auto;margin-right:auto;height:5px;width:56px;border-radius:1rem;touch-action:pan-y;cursor:grab}[vaul-handle]:active,[vaul-handle]:hover{opacity:1}[vaul-handle]:active{cursor:grabbing}[vaul-handle-hitarea]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:max(100%,2.75rem);height:max(100%,2.75rem);touch-action:inherit}[vaul-overlay][vaul-snap-points=true]:not([vaul-snap-points-overlay=true]):not([data-state=closed]){opacity:0}[vaul-overlay][vaul-snap-points-overlay=true]:not([vaul-drawer-visible=false]){opacity:1}@media (hover:hover) and (pointer:fine){[vaul-drawer]{user-select:none}}@media (pointer:fine){[vaul-handle-hitarea]:{width:100%;height:100%}}");const useIsomorphicLayoutEffect=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect;function chain(...o){return(...i)=>{for(let s of o)typeof s=="function"&&s(...i)}}function isMac(){return testPlatform(/^Mac/)}function isIPhone(){return testPlatform(/^iPhone/)}function isIPad(){return testPlatform(/^iPad/)||isMac()&&navigator.maxTouchPoints>1}function isIOS(){return isIPhone()||isIPad()}function testPlatform(o){return typeof window<"u"&&window.navigator!=null?o.test(window.navigator.platform):void 0}const visualViewport=typeof document<"u"&&window.visualViewport;function isScrollable(o){let i=window.getComputedStyle(o);return/(auto|scroll)/.test(i.overflow+i.overflowX+i.overflowY)}function getScrollParent(o){for(isScrollable(o)&&(o=o.parentElement);o&&!isScrollable(o);)o=o.parentElement;return o||document.scrollingElement||document.documentElement}const nonTextInputTypes=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let preventScrollCount=0,restore;function usePreventScroll(o={}){let{isDisabled:i}=o;useIsomorphicLayoutEffect(()=>{if(!i)return preventScrollCount++,preventScrollCount===1&&(restore=isIOS()?preventScrollMobileSafari():preventScrollStandard()),()=>{preventScrollCount--,preventScrollCount===0&&restore()}},[i])}function preventScrollStandard(){return chain(setStyle(document.documentElement,"paddingRight",window.innerWidth-document.documentElement.clientWidth+"px"))}function preventScrollMobileSafari(){let o,i=0,s=window.pageXOffset,_=window.pageYOffset,_e=chain(setStyle(document.documentElement,"paddingRight",window.innerWidth-document.documentElement.clientWidth+"px"));window.scrollTo(0,0);let ct=chain(addEvent(document,"touchstart",Mt=>{o=getScrollParent(Mt.target),o===document.documentElement&&o===document.body||(i=Mt.changedTouches[0].pageY)},{passive:!1,capture:!0}),addEvent(document,"touchmove",Mt=>{if(!o||o===document.documentElement||o===document.body)return void Mt.preventDefault();let Ft=Mt.changedTouches[0].pageY,Ut=o.scrollTop,Xt=o.scrollHeight-o.clientHeight;Xt!==0&&((Ut<=0&&Ft>i||Ut>=Xt&&Ft<i)&&Mt.preventDefault(),i=Ft)},{passive:!1,capture:!0}),addEvent(document,"touchend",Mt=>{let Ft=Mt.target;isInput(Ft)&&Ft!==document.activeElement&&(Mt.preventDefault(),Ft.style.transform="translateY(-2000px)",Ft.focus(),requestAnimationFrame(()=>{Ft.style.transform=""}))},{passive:!1,capture:!0}),addEvent(document,"focus",Mt=>{let Ft=Mt.target;isInput(Ft)&&(Ft.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{Ft.style.transform="",visualViewport&&(visualViewport.height<window.innerHeight?requestAnimationFrame(()=>{scrollIntoView(Ft)}):visualViewport.addEventListener("resize",()=>scrollIntoView(Ft),{once:!0}))}))},!0),addEvent(window,"scroll",()=>{window.scrollTo(0,0)}));return()=>{_e(),ct(),window.scrollTo(s,_)}}function setStyle(o,i,s){let _=o.style[i];return o.style[i]=s,()=>{o.style[i]=_}}function addEvent(o,i,s,_){return o.addEventListener(i,s,_),()=>{o.removeEventListener(i,s,_)}}function scrollIntoView(o){let i=document.scrollingElement||document.documentElement;for(;o&&o!==i;){let s=getScrollParent(o);if(s!==document.documentElement&&s!==document.body&&s!==o){let _=s.getBoundingClientRect().top,_e=o.getBoundingClientRect().top;o.getBoundingClientRect().bottom>s.getBoundingClientRect().bottom&&(s.scrollTop+=_e-_)}o=s.parentElement}}function isInput(o){return o instanceof HTMLInputElement&&!nonTextInputTypes.has(o.type)||o instanceof HTMLTextAreaElement||o instanceof HTMLElement&&o.isContentEditable}function setRef$8(o,i){typeof o=="function"?o(i):o!=null&&(o.current=i)}function composeRefs$8(...o){return i=>o.forEach(s=>setRef$8(s,i))}function useComposedRefs$4(...o){return reactExports.useCallback(composeRefs$8(...o),o)}let previousBodyPosition=null;function usePositionFixed({isOpen:o,modal:i,nested:s,hasBeenOpened:_,preventScrollRestoration:_e,noBodyStyles:ct}){const[Mt,Ft]=React__default.useState(()=>typeof window<"u"?window.location.href:""),Ut=React__default.useRef(0),Xt=React__default.useCallback(()=>{if(previousBodyPosition===null&&o&&!ct){previousBodyPosition={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left,height:document.body.style.height,right:"unset"};const{scrollX:nr,innerHeight:rr}=window;document.body.style.setProperty("position","fixed","important"),Object.assign(document.body.style,{top:-Ut.current+"px",left:-nr+"px",right:"0px",height:"auto"}),window.setTimeout(()=>window.requestAnimationFrame(()=>{const or=rr-window.innerHeight;or&&Ut.current>=rr&&(document.body.style.top=-(Ut.current+or)+"px")}),300)}},[o]),Kt=React__default.useCallback(()=>{if(previousBodyPosition!==null&&!ct){const nr=-parseInt(document.body.style.top,10),rr=-parseInt(document.body.style.left,10);Object.assign(document.body.style,previousBodyPosition),window.requestAnimationFrame(()=>{_e&&Mt!==window.location.href?Ft(window.location.href):window.scrollTo(rr,nr)}),previousBodyPosition=null}},[Mt]);return React__default.useEffect(()=>{function nr(){Ut.current=window.scrollY}return nr(),window.addEventListener("scroll",nr),()=>{window.removeEventListener("scroll",nr)}},[]),React__default.useEffect(()=>{!s&&_&&(o?(!window.matchMedia("(display-mode: standalone)").matches&&Xt(),i||window.setTimeout(()=>{Kt()},500)):Kt())},[o,_,Mt,i,s,Xt,Kt]),{restorePositionSetting:Kt}}const cache$1=new WeakMap;function set(o,i,s=!1){if(!(o&&o instanceof HTMLElement))return;let _={};Object.entries(i).forEach(([_e,ct])=>{_e.startsWith("--")?o.style.setProperty(_e,ct):(_[_e]=o.style[_e],o.style[_e]=ct)}),s||cache$1.set(o,_)}function reset(o,i){if(!(o&&o instanceof HTMLElement))return;let s=cache$1.get(o);s&&(i?o.style[i]=s[i]:Object.entries(s).forEach(([_,_e])=>{o.style[_]=_e}))}const isVertical=o=>{switch(o){case"top":case"bottom":return!0;case"left":case"right":return!1;default:return o}};function getTranslate(o,i){if(!o)return null;const s=window.getComputedStyle(o),_=s.transform||s.webkitTransform||s.mozTransform;let _e=_.match(/^matrix3d\((.+)\)$/);return _e?parseFloat(_e[1].split(", ")[isVertical(i)?13:12]):(_e=_.match(/^matrix\((.+)\)$/),_e?parseFloat(_e[1].split(", ")[isVertical(i)?5:4]):null)}function dampenValue(o){return 8*(Math.log(o+1)-2)}const TRANSITIONS={DURATION:.5,EASE:[.32,.72,0,1]},VELOCITY_THRESHOLD=.4;function useCallbackRef$4(o){const i=React__default.useRef(o);return React__default.useEffect(()=>{i.current=o}),React__default.useMemo(()=>(...s)=>i.current==null?void 0:i.current.call(i,...s),[])}function useUncontrolledState$2({defaultProp:o,onChange:i}){const s=React__default.useState(o),[_]=s,_e=React__default.useRef(_),ct=useCallbackRef$4(i);return React__default.useEffect(()=>{_e.current!==_&&(ct(_),_e.current=_)},[_,_e,ct]),s}function useControllableState$2({prop:o,defaultProp:i,onChange:s=()=>{}}){const[_,_e]=useUncontrolledState$2({defaultProp:i,onChange:s}),ct=o!==void 0,Mt=ct?o:_,Ft=useCallbackRef$4(s),Ut=React__default.useCallback(Xt=>{if(ct){const Kt=typeof Xt=="function"?Xt(o):Xt;Kt!==o&&Ft(Kt)}else _e(Xt)},[ct,o,_e,Ft]);return[Mt,Ut]}function useSnapPoints({activeSnapPointProp:o,setActiveSnapPointProp:i,snapPoints:s,drawerRef:_,overlayRef:_e,fadeFromIndex:ct,onSnapPointChange:Mt,direction:Ft="bottom"}){const[Ut,Xt]=useControllableState$2({prop:o,defaultProp:s==null?void 0:s[0],onChange:i}),Kt=React__default.useMemo(()=>Ut===(s==null?void 0:s[s.length-1])||null,[s,Ut]),nr=s&&s.length>0&&(ct||ct===0)&&!Number.isNaN(ct)&&s[ct]===Ut||!s,rr=React__default.useMemo(()=>s==null?void 0:s.findIndex(yr=>yr===Ut),[s,Ut]),or=React__default.useMemo(()=>{var yr;return(yr=s==null?void 0:s.map(Lr=>{const Br=typeof window<"u",Vr=typeof Lr=="string";let Wr=0;if(Vr&&(Wr=parseInt(Lr,10)),isVertical(Ft)){const no=Vr?Wr:Br?Lr*window.innerHeight:0;return Br?Ft==="bottom"?window.innerHeight-no:-window.innerHeight+no:no}const ro=Vr?Wr:Br?Lr*window.innerWidth:0;return Br?Ft==="right"?window.innerWidth-ro:-window.innerWidth+ro:ro}))!=null?yr:[]},[s]),hr=React__default.useMemo(()=>rr!==null?or==null?void 0:or[rr]:null,[or,rr]),fr=React__default.useCallback(yr=>{var Lr;const Br=(Lr=or==null?void 0:or.findIndex(Vr=>Vr===yr))!=null?Lr:null;Mt(Br),set(_.current,{transition:`transform ${TRANSITIONS.DURATION}s cubic-bezier(${TRANSITIONS.EASE.join(",")})`,transform:isVertical(Ft)?`translate3d(0, ${yr}px, 0)`:`translate3d(${yr}px, 0, 0)`}),or&&Br!==or.length-1&&Br!==ct?set(_e.current,{transition:`opacity ${TRANSITIONS.DURATION}s cubic-bezier(${TRANSITIONS.EASE.join(",")})`,opacity:"0"}):set(_e.current,{transition:`opacity ${TRANSITIONS.DURATION}s cubic-bezier(${TRANSITIONS.EASE.join(",")})`,opacity:"1"}),Xt(Br!==null?s==null?void 0:s[Br]:null)},[_.current,s,or,ct,_e,Xt]);return React__default.useEffect(()=>{if(Ut||o){var yr;const Lr=(yr=s==null?void 0:s.findIndex(Br=>Br===o||Br===Ut))!=null?yr:-1;or&&Lr!==-1&&typeof or[Lr]=="number"&&fr(or[Lr])}},[Ut,o,s,or,fr]),{isLastSnapPoint:Kt,activeSnapPoint:Ut,shouldFade:nr,getPercentageDragged:function(yr,Lr){if(!s||typeof rr!="number"||!or||ct===void 0)return null;const Br=rr===ct-1;if(rr>=ct&&Lr)return 0;if(Br&&!Lr)return 1;if(!nr&&!Br)return null;const Vr=Br?rr+1:rr-1,Wr=Br?or[Vr]-or[Vr-1]:or[Vr+1]-or[Vr],ro=yr/Math.abs(Wr);return Br?1-ro:ro},setActiveSnapPoint:Xt,activeSnapPointIndex:rr,onRelease:function({draggedDistance:yr,closeDrawer:Lr,velocity:Br,dismissible:Vr}){if(ct===void 0)return;const Wr=Ft==="bottom"||Ft==="right"?(hr??0)-yr:(hr??0)+yr,ro=rr===0,no=yr>0;if(rr===ct-1&&set(_e.current,{transition:`opacity ${TRANSITIONS.DURATION}s cubic-bezier(${TRANSITIONS.EASE.join(",")})`}),Br>2&&!no)return void(Vr?Lr():fr(or[0]));if(Br>2&&no&&or&&s)return void fr(or[s.length-1]);const so=or==null?void 0:or.reduce((To,oo)=>typeof To!="number"||typeof oo!="number"?To:Math.abs(oo-Wr)<Math.abs(To-Wr)?oo:To),ko=isVertical(Ft)?window.innerHeight:window.innerWidth;if(Br>VELOCITY_THRESHOLD&&Math.abs(yr)<.4*ko){const To=no?1:-1;if(To>0&&Kt)return void fr(or[s.length-1]);if(ro&&To<0&&Vr&&Lr(),rr===null)return;fr(or[rr+To])}else fr(so)},onDrag:function({draggedDistance:yr}){if(hr===null)return;const Lr=Ft==="bottom"||Ft==="right"?hr-yr:hr+yr;(Ft==="bottom"||Ft==="right")&&Lr<or[or.length-1]||(Ft==="top"||Ft==="left")&&Lr>or[or.length-1]||set(_.current,{transform:isVertical(Ft)?`translate3d(0, ${Lr}px, 0)`:`translate3d(${Lr}px, 0, 0)`})},snapPointsOffset:or}}const CLOSE_THRESHOLD=.25,SCROLL_LOCK_TIMEOUT=100,BORDER_RADIUS=8,NESTED_DISPLACEMENT=16,WINDOW_TOP_OFFSET=26,DRAG_CLASS="vaul-dragging";function Root$3({open:o,onOpenChange:i,children:s,shouldScaleBackground:_,onDrag:_e,onRelease:ct,snapPoints:Mt,nested:Ft=!1,setBackgroundColorOnScale:Ut=!0,closeThreshold:Xt=CLOSE_THRESHOLD,scrollLockTimeout:Kt=SCROLL_LOCK_TIMEOUT,dismissible:nr=!0,handleOnly:rr=!1,fadeFromIndex:or=Mt&&Mt.length-1,activeSnapPoint:hr,setActiveSnapPoint:fr,fixed:yr,modal:Lr=!0,onClose:Br,noBodyStyles:Vr,direction:Wr="bottom",preventScrollRestoration:ro=!0,disablePreventScroll:no=!1}){var so;const[ko=!1,To]=React__default.useState(!1),[oo,No]=React__default.useState(!1),[As,Ks]=React__default.useState(!1),[vu,Fu]=React__default.useState(!1),[Ap,Pp]=React__default.useState(!1),[Lo,Au]=React__default.useState(!1),Mp=React__default.useRef(null),Lp=React__default.useRef(null),Op=React__default.useRef(null),Fp=React__default.useRef(null),wm=React__default.useRef(null),Bp=React__default.useRef(!1),Em=React__default.useRef(null),Yp=React__default.useRef(0),_m=React__default.useRef(!1),Tm=React__default.useRef(0),Im=React__default.useRef(null),Mm=React__default.useRef(((so=Im.current)==null?void 0:so.getBoundingClientRect().height)||0),Bm=React__default.useRef(0),zm=React__default.useCallback(Rm=>{Mt&&Rm===a1.length-1&&(Lp.current=new Date)},[]),{activeSnapPoint:Am,activeSnapPointIndex:Om,setActiveSnapPoint:Hm,onRelease:u1,snapPointsOffset:a1,onDrag:Gm,shouldFade:c1,getPercentageDragged:m1}=useSnapPoints({snapPoints:Mt,activeSnapPointProp:hr,setActiveSnapPointProp:fr,drawerRef:Im,fadeFromIndex:or,overlayRef:Mp,onSnapPointChange:zm,direction:Wr});usePreventScroll({isDisabled:!ko||Ap||!Lr||Lo||!oo||no});const{restorePositionSetting:Sm}=usePositionFixed({isOpen:ko,modal:Lr,nested:Ft,hasBeenOpened:oo,preventScrollRestoration:ro,noBodyStyles:Vr});function Nm(){return(window.innerWidth-WINDOW_TOP_OFFSET)/window.innerWidth}function Qp(Rm,Dm){var Zm;let qm=Rm;const Lm=(Zm=window.getSelection())==null?void 0:Zm.toString(),wy=Im.current?getTranslate(Im.current,Wr):null,Ay=new Date;if(qm.hasAttribute("data-vaul-no-drag")||qm.closest("[data-vaul-no-drag]"))return!1;if(Wr==="right"||Wr==="left")return!0;if(Lp.current&&Ay.getTime()-Lp.current.getTime()<500)return!1;if(wy!==null&&(Wr==="bottom"?wy>0:wy<0))return!0;if(Lm&&Lm.length>0)return!1;if(wm.current&&Ay.getTime()-wm.current.getTime()<Kt&&wy===0||Dm)return wm.current=Ay,!1;for(;qm;){if(qm.scrollHeight>qm.clientHeight){if(qm.scrollTop!==0)return wm.current=new Date,!1;if(qm.getAttribute("role")==="dialog")return!0}qm=qm.parentNode}return!0}function $m(){Im.current&&(function(){!Ap||!Im.current||(Im.current.classList.remove(DRAG_CLASS),Bp.current=!1,Pp(!1),Fp.current=new Date)}(),Br==null||Br(),set(Im.current,{transform:isVertical(Wr)?`translate3d(0, ${Wr==="bottom"?"100%":"-100%"}, 0)`:`translate3d(${Wr==="right"?"100%":"-100%"}, 0, 0)`,transition:`transform ${TRANSITIONS.DURATION}s cubic-bezier(${TRANSITIONS.EASE.join(",")})`}),set(Mp.current,{opacity:"0",transition:`opacity ${TRANSITIONS.DURATION}s cubic-bezier(${TRANSITIONS.EASE.join(",")})`}),Fm(!1),setTimeout(()=>{Ks(!1),To(!1)},300),setTimeout(()=>{Mt&&Hm(Mt[0])},1e3*TRANSITIONS.DURATION))}function Pm(){if(!Im.current)return;const Rm=document.querySelector("[vaul-drawer-wrapper]"),Dm=getTranslate(Im.current,Wr);set(Im.current,{transform:"translate3d(0, 0, 0)",transition:`transform ${TRANSITIONS.DURATION}s cubic-bezier(${TRANSITIONS.EASE.join(",")})`}),set(Mp.current,{transition:`opacity ${TRANSITIONS.DURATION}s cubic-bezier(${TRANSITIONS.EASE.join(",")})`,opacity:"1"}),_&&Dm&&Dm>0&&ko&&set(Rm,{borderRadius:`${BORDER_RADIUS}px`,overflow:"hidden",...isVertical(Wr)?{transform:`scale(${Nm()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`,transformOrigin:"top"}:{transform:`scale(${Nm()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`,transformOrigin:"left"},transitionProperty:"transform, border-radius",transitionDuration:`${TRANSITIONS.DURATION}s`,transitionTimingFunction:`cubic-bezier(${TRANSITIONS.EASE.join(",")})`},!0)}function Fm(Rm){const Dm=document.querySelector("[vaul-drawer-wrapper]");Dm&&_&&(Rm?(Ut&&(Vr||(set(document.body,{background:document.body.style.backgroundColor||document.body.style.background}),set(document.body,{background:"black"},!0))),set(Dm,{borderRadius:`${BORDER_RADIUS}px`,overflow:"hidden",...isVertical(Wr)?{transform:`scale(${Nm()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`,transformOrigin:"top"}:{transform:`scale(${Nm()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`,transformOrigin:"left"},transitionProperty:"transform, border-radius",transitionDuration:`${TRANSITIONS.DURATION}s`,transitionTimingFunction:`cubic-bezier(${TRANSITIONS.EASE.join(",")})`})):(reset(Dm,"overflow"),reset(Dm,"transform"),reset(Dm,"borderRadius"),set(Dm,{transitionProperty:"transform, border-radius",transitionDuration:`${TRANSITIONS.DURATION}s`,transitionTimingFunction:`cubic-bezier(${TRANSITIONS.EASE.join(",")})`})))}return React__default.useEffect(()=>()=>{Fm(!1),Sm()},[]),React__default.useEffect(()=>{var Rm;function Dm(){if(Im.current&&(isInput(document.activeElement)||_m.current)){var Zm;const qm=((Zm=window.visualViewport)==null?void 0:Zm.height)||0;let Lm=window.innerHeight-qm;const wy=Im.current.getBoundingClientRect().height||0;Bm.current||(Bm.current=wy);const Ay=Im.current.getBoundingClientRect().top;if(Math.abs(Tm.current-Lm)>60&&(_m.current=!_m.current),Mt&&Mt.length>0&&a1&&Om&&(Lm+=a1[Om]||0),Tm.current=Lm,wy>qm||_m.current){const Oy=Im.current.getBoundingClientRect().height;let v0=Oy;Oy>qm&&(v0=qm-WINDOW_TOP_OFFSET),Im.current.style.height=yr?Oy-Math.max(Lm,0)+"px":`${Math.max(v0,qm-Ay)}px`}else Im.current.style.height=`${Bm.current}px`;Mt&&Mt.length>0&&!_m.current?Im.current.style.bottom="0px":Im.current.style.bottom=`${Math.max(Lm,0)}px`}}return(Rm=window.visualViewport)==null||Rm.addEventListener("resize",Dm),()=>{var Zm;return(Zm=window.visualViewport)==null?void 0:Zm.removeEventListener("resize",Dm)}},[Om,Mt,a1]),React__default.useEffect(()=>{if(!ko&&_){const Rm=setTimeout(()=>{reset(document.body)},200);return()=>clearTimeout(Rm)}},[ko,_]),React__default.useLayoutEffect(()=>{o?(To(!0),No(!0)):$m()},[o]),React__default.useEffect(()=>{vu&&(i==null||i(ko))},[ko]),React__default.useEffect(()=>{Fu(!0)},[]),React__default.useEffect(()=>{ko&&(set(document.documentElement,{scrollBehavior:"auto"}),Lp.current=new Date,Fm(!0))},[ko]),React__default.useEffect(()=>{if(Im.current&&As){var Rm;const Dm=Im==null||(Rm=Im.current)==null?void 0:Rm.querySelectorAll("*");Dm==null||Dm.forEach(Zm=>{const qm=Zm;(qm.scrollHeight>qm.clientHeight||qm.scrollWidth>qm.clientWidth)&&qm.classList.add("vaul-scrollable")})}},[As]),React__default.createElement($5d3850c4d0b4e6c7$export$be92b6f5f03c0fe9,{modal:Lr,onOpenChange:Rm=>{o===void 0?Rm?(No(!0),To(Rm)):$m():i==null||i(Rm)},open:ko},React__default.createElement(DrawerContext.Provider,{value:{visible:As,activeSnapPoint:Am,snapPoints:Mt,setActiveSnapPoint:Hm,drawerRef:Im,overlayRef:Mp,scaleBackground:Fm,onOpenChange:i,onPress:function(Rm){var Dm;(nr||Mt)&&(Im.current&&!Im.current.contains(Rm.target)||(Mm.current=((Dm=Im.current)==null?void 0:Dm.getBoundingClientRect().height)||0,Pp(!0),Op.current=new Date,isIOS()&&window.addEventListener("touchend",()=>Bp.current=!1,{once:!0}),Rm.target.setPointerCapture(Rm.pointerId),Yp.current=isVertical(Wr)?Rm.clientY:Rm.clientX))},setVisible:Ks,onRelease:function(Rm){if(!Ap||!Im.current)return;Im.current.classList.remove(DRAG_CLASS),Bp.current=!1,Pp(!1),Fp.current=new Date;const Dm=getTranslate(Im.current,Wr);if(!Qp(Rm.target,!1)||!Dm||Number.isNaN(Dm)||Op.current===null)return;const Zm=Fp.current.getTime()-Op.current.getTime(),qm=Yp.current-(isVertical(Wr)?Rm.clientY:Rm.clientX),Lm=Math.abs(qm)/Zm;if(Lm>.05&&(Au(!0),setTimeout(()=>{Au(!1)},200)),Mt)return u1({draggedDistance:qm*(Wr==="bottom"||Wr==="right"?1:-1),closeDrawer:$m,velocity:Lm,dismissible:nr}),void(ct==null||ct(Rm,!0));if(Wr==="bottom"||Wr==="right"?qm>0:qm<0)return Pm(),void(ct==null||ct(Rm,!0));if(Lm>VELOCITY_THRESHOLD)return $m(),void(ct==null||ct(Rm,!1));var wy;if(Dm>=Math.min((wy=Im.current.getBoundingClientRect().height)!=null?wy:0,window.innerHeight)*Xt)return $m(),void(ct==null||ct(Rm,!1));ct==null||ct(Rm,!0),Pm()},onDrag:function(Rm){if(Im.current&&Ap){const Dm=Wr==="bottom"||Wr==="right"?1:-1,Zm=(Yp.current-(isVertical(Wr)?Rm.clientY:Rm.clientX))*Dm,qm=Zm>0,Lm=Mt&&!nr&&!qm;if(Lm&&Om===0)return;const wy=Math.abs(Zm),Ay=document.querySelector("[vaul-drawer-wrapper]");let Oy=wy/Mm.current;const v0=m1(wy,qm);if(v0!==null&&(Oy=v0),Lm&&Oy>=1||!Bp.current&&!Qp(Rm.target,qm))return;if(Im.current.classList.add(DRAG_CLASS),Bp.current=!0,set(Im.current,{transition:"none"}),set(Mp.current,{transition:"none"}),Mt&&Gm({draggedDistance:Zm}),qm&&!Mt){const Ly=dampenValue(Zm),Qy=Math.min(-1*Ly,0)*Dm;return void set(Im.current,{transform:isVertical(Wr)?`translate3d(0, ${Qy}px, 0)`:`translate3d(${Qy}px, 0, 0)`})}const wC=1-Oy;if((c1||or&&Om===or-1)&&(_e==null||_e(Rm,Oy),set(Mp.current,{opacity:`${wC}`,transition:"none"},!0)),Ay&&Mp.current&&_){const Ly=Math.min(Nm()+Oy*(1-Nm()),1),Qy=8-8*Oy,w0=Math.max(0,14-14*Oy);set(Ay,{borderRadius:`${Qy}px`,transform:isVertical(Wr)?`scale(${Ly}) translate3d(0, ${w0}px, 0)`:`scale(${Ly}) translate3d(${w0}px, 0, 0)`,transition:"none"},!0)}if(!Mt){const Ly=wy*Dm;set(Im.current,{transform:isVertical(Wr)?`translate3d(0, ${Ly}px, 0)`:`translate3d(${Ly}px, 0, 0)`})}}},dismissible:nr,handleOnly:rr,isOpen:ko,isDragging:Ap,shouldFade:c1,closeDrawer:$m,onNestedDrag:function(Rm,Dm){if(Dm<0)return;const Zm=isVertical(Wr)?window.innerHeight:window.innerWidth,qm=(Zm-NESTED_DISPLACEMENT)/Zm,Lm=qm+Dm*(1-qm),wy=Dm*NESTED_DISPLACEMENT-NESTED_DISPLACEMENT;set(Im.current,{transform:isVertical(Wr)?`scale(${Lm}) translate3d(0, ${wy}px, 0)`:`scale(${Lm}) translate3d(${wy}px, 0, 0)`,transition:"none"})},onNestedOpenChange:function(Rm){const Dm=Rm?(window.innerWidth-NESTED_DISPLACEMENT)/window.innerWidth:1,Zm=Rm?-NESTED_DISPLACEMENT:0;Em.current&&window.clearTimeout(Em.current),set(Im.current,{transition:`transform ${TRANSITIONS.DURATION}s cubic-bezier(${TRANSITIONS.EASE.join(",")})`,transform:`scale(${Dm}) translate3d(0, ${Zm}px, 0)`}),!Rm&&Im.current&&(Em.current=setTimeout(()=>{const qm=getTranslate(Im.current,Wr);set(Im.current,{transition:"none",transform:isVertical(Wr)?`translate3d(0, ${qm}px, 0)`:`translate3d(${qm}px, 0, 0)`})},500))},onNestedRelease:function(Rm,Dm){const Zm=isVertical(Wr)?window.innerHeight:window.innerWidth,qm=Dm?(Zm-NESTED_DISPLACEMENT)/Zm:1,Lm=Dm?-NESTED_DISPLACEMENT:0;Dm&&set(Im.current,{transition:`transform ${TRANSITIONS.DURATION}s cubic-bezier(${TRANSITIONS.EASE.join(",")})`,transform:isVertical(Wr)?`scale(${qm}) translate3d(0, ${Lm}px, 0)`:`scale(${qm}) translate3d(${Lm}px, 0, 0)`})},keyboardIsOpen:_m,openProp:o,modal:Lr,snapPointsOffset:a1,direction:Wr}},s))}const LONG_HANDLE_PRESS_TIMEOUT=250,DOUBLE_TAP_TIMEOUT=120,Handle=React__default.forwardRef(function({preventCycle:o=!1,children:i,...s},_){const{visible:_e,closeDrawer:ct,isDragging:Mt,snapPoints:Ft,activeSnapPoint:Ut,setActiveSnapPoint:Xt,dismissible:Kt,handleOnly:nr,onPress:rr,onDrag:or}=useDrawerContext(),hr=React__default.useRef(null),fr=React__default.useRef(!1);function yr(){window.clearTimeout(hr.current),fr.current=!1}return React__default.createElement("div",{onClick:function(){fr.current?yr():window.setTimeout(()=>{(function(){if(Mt||o||fr.current)return void yr();if(yr(),(!Ft||Ft.length===0)&&Kt||Ut===Ft[Ft.length-1]&&Kt)return void ct();const Lr=Ft.findIndex(Vr=>Vr===Ut);if(Lr===-1)return;const Br=Ft[Lr+1];Xt(Br)})()},DOUBLE_TAP_TIMEOUT)},onDoubleClick:()=>{fr.current=!0,ct()},onPointerCancel:yr,onPointerDown:Lr=>{nr&&rr(Lr),hr.current=window.setTimeout(()=>{fr.current=!0},LONG_HANDLE_PRESS_TIMEOUT)},onPointerMove:Lr=>{nr&&or(Lr)},ref:_,"vaul-drawer-visible":_e?"true":"false","vaul-handle":"","aria-hidden":"true",...s},React__default.createElement("span",{"vaul-handle-hitarea":"","aria-hidden":"true"},i))});Handle.displayName="Drawer.Handle";const Overlay$1=React__default.forwardRef(function({children:o,...i},s){const{overlayRef:_,snapPoints:_e,onRelease:ct,shouldFade:Mt,isOpen:Ft,visible:Ut}=useDrawerContext(),Xt=useComposedRefs$4(s,_),Kt=_e&&_e.length>0;return React__default.createElement($5d3850c4d0b4e6c7$export$c6fdb837b070b4ff,{onMouseUp:ct,ref:Xt,"vaul-drawer-visible":Ut?"true":"false","vaul-overlay":"","vaul-snap-points":Ft&&Kt?"true":"false","vaul-snap-points-overlay":Ft&&Mt?"true":"false",...i})});Overlay$1.displayName="Drawer.Overlay";const Content$1=React__default.forwardRef(function({onOpenAutoFocus:o,onPointerDownOutside:i,onAnimationEnd:s,style:_,..._e},ct){const{drawerRef:Mt,onPress:Ft,onRelease:Ut,onDrag:Xt,dismissible:Kt,keyboardIsOpen:nr,snapPointsOffset:rr,visible:or,closeDrawer:hr,modal:fr,openProp:yr,onOpenChange:Lr,setVisible:Br,handleOnly:Vr,direction:Wr}=useDrawerContext(),ro=useComposedRefs$4(ct,Mt),no=React__default.useRef(null),so=React__default.useRef(!1);return React__default.useEffect(()=>{Br(!0)},[]),React__default.createElement($5d3850c4d0b4e6c7$export$7c6e2c02157bb7d2,{"vaul-drawer":"","vaul-drawer-direction":Wr,"vaul-drawer-visible":or?"true":"false",..._e,ref:ro,style:rr&&rr.length>0?{"--snap-point-height":`${rr[0]}px`,..._}:_,onOpenAutoFocus:ko=>{var To;o?o(ko):(ko.preventDefault(),(To=Mt.current)==null||To.focus())},onPointerDown:ko=>{Vr||(_e.onPointerDown==null||_e.onPointerDown.call(_e,ko),no.current={x:ko.clientX,y:ko.clientY},Ft(ko))},onPointerDownOutside:ko=>{i==null||i(ko),fr&&!ko.defaultPrevented?(nr.current&&(nr.current=!1),ko.preventDefault(),Lr==null||Lr(!1),Kt&&yr===void 0&&hr()):ko.preventDefault()},onFocusOutside:ko=>{fr||ko.preventDefault()},onEscapeKeyDown:ko=>{fr||ko.preventDefault()},onPointerMove:ko=>{if(Vr||(_e.onPointerMove==null||_e.onPointerMove.call(_e,ko),!no.current))return;const To=ko.clientY-no.current.y,oo=ko.clientX-no.current.x,No=ko.pointerType==="touch"?10:2;((Ks,vu,Fu=0)=>{if(so.current)return!0;const Ap=Math.abs(Ks.y),Pp=Math.abs(Ks.x),Lo=Pp>Ap,Au=["bottom","right"].includes(vu)?1:-1;if(vu==="left"||vu==="right"){if(!(Ks.x*Au<0)&&Pp>=0&&Pp<=Fu)return Lo}else if(!(Ks.y*Au<0)&&Ap>=0&&Ap<=Fu)return!Lo;return so.current=!0,!0})({x:oo,y:To},Wr,No)?Xt(ko):(Math.abs(oo)>No||Math.abs(To)>No)&&(no.current=null)},onPointerUp:ko=>{_e.onPointerUp==null||_e.onPointerUp.call(_e,ko),no.current=null,so.current=!1,Ut(ko)}})});function NestedRoot({onDrag:o,onOpenChange:i,...s}){const{onNestedDrag:_,onNestedOpenChange:_e,onNestedRelease:ct}=useDrawerContext();if(!_)throw new Error("Drawer.NestedRoot must be placed in another drawer");return React__default.createElement(Root$3,{nested:!0,onClose:()=>{_e(!1)},onDrag:(Mt,Ft)=>{_(Mt,Ft),o==null||o(Mt,Ft)},onOpenChange:Mt=>{Mt&&_e(Mt),i==null||i(Mt)},onRelease:ct,...s})}Content$1.displayName="Drawer.Content";const Drawer={Root:Root$3,NestedRoot,Content:Content$1,Handle,Overlay:Overlay$1,Trigger:$5d3850c4d0b4e6c7$export$41fb9f06171c75f4,Portal:$5d3850c4d0b4e6c7$export$602eac185826482c,Close:$5d3850c4d0b4e6c7$export$f39c2d165cd861fe,Title:$5d3850c4d0b4e6c7$export$f99233281efd08a0,Description:$5d3850c4d0b4e6c7$export$393edc798c47379d},DrawerPortal=Drawer.Portal,DrawerOverlay=reactExports.forwardRef(({className:o,...i},s)=>reactExports.createElement(Drawer.Overlay,{ref:s,className:cn$1("ns-fixed ns-inset-0 ns-z-50 ns-bg-black/80",o),...i}));DrawerOverlay.displayName=Drawer.Overlay.displayName;const SCDrawerContent=reactExports.forwardRef(({className:o,children:i,...s},_)=>reactExports.createElement(DrawerPortal,null,reactExports.createElement(DrawerOverlay,null),reactExports.createElement(Drawer.Content,{ref:_,className:cn$1("ns-fixed ns-inset-x-0 ns-bottom-0 ns-z-50 ns-mt-24 ns-flex ns-h-auto ns-flex-col ns-rounded-t-[10px] ns-border ns-border-neutral-200 ns-bg-white dark:ns-border-neutral-800 dark:ns-bg-neutral-950",o),...s},i)));SCDrawerContent.displayName="SCDrawerContent";const DrawerTitle=reactExports.forwardRef(({className:o,...i},s)=>reactExports.createElement(Drawer.Title,{ref:s,className:cn$1("ns-text-lg ns-font-semibold ns-leading-none ns-tracking-tight",o),...i}));DrawerTitle.displayName=Drawer.Title.displayName;const DrawerDescription=reactExports.forwardRef(({className:o,...i},s)=>reactExports.createElement(Drawer.Description,{ref:s,className:cn$1("ns-text-sm ns-text-neutral-500 dark:ns-text-neutral-400",o),...i}));DrawerDescription.displayName=Drawer.Description.displayName;const InputField=reactExports.forwardRef(({className:o,type:i,placeholder:s,inputMode:_,name:_e,field:ct,form:Mt,...Ft},Ut)=>{const[Xt,Kt]=reactExports.useState(!1),nr=reactExports.useMemo(()=>getIn(Mt==null?void 0:Mt.touched,ct.name),[Mt==null?void 0:Mt.touched,ct.name]),rr=reactExports.useMemo(()=>getIn(Mt==null?void 0:Mt.errors,ct.name),[Mt==null?void 0:Mt.errors,ct.name]),or=cn$1("ns-max-w-130 ns-h-16 ns-relative ns-text-left ns-text-ellipsis ns-w-full ns-black ns-text-base ",{"ns-mb-5":Ft.hint||nr&&rr},o),hr=cn$1("ns-peer ns-flex ns-h-16 ns-w-full ns-max-w-130 ns-rounded-md ns-bg-white-50 ns-border ns-text-black     ns-border-solid ns-border-grey-100 ns-pl-5 ns-pr-9 ns-pt-3.5 ns-text-base     ns-shadow-sm ns-outline-none ns-placeholder-transparent     disabled:ns-cursor-not-allowed disabled:ns-opacity-50 hide-spinner ",{"ns-text-2xl":i==="password"});return reactExports.createElement("div",{className:or},reactExports.createElement("input",{ref:Ut,className:hr,type:i==="password"&&Xt?"text":i,inputMode:_,placeholder:s,...ct,...Ft}),reactExports.createElement("label",{className:`ns-absolute ns-left-5 ns-top-1 ns-text-xs ns-text-black peer-focus:ns-top-1 peer-focus:text-sm peer-focus:ns-text-xs
          peer-focus:ns-text-black peer-placeholder-shown:ns-top-[45%] peer-placeholder-shown:ns-text-base peer-placeholder-shown:ns-text-black
          peer-disabled:ns-opacity-50 
          ns-pointer-events-none ns-w-[80%] ns-transition-all`,htmlFor:_e},s),i==="password"&&reactExports.createElement("button",{type:"button",className:"ns-absolute ns-h-6 ns-w-6  ns-right-5 ns-top-[45%] ns-text-grey-400",onClick:()=>Kt(fr=>!fr)},Xt?reactExports.createElement("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})):reactExports.createElement("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"}))),reactExports.createElement("span",{className:cn$1("ns-absolute ns-left-0 ns-right-0 ns-bottom-0 ns-h-px ns-ml-5 ns-mr-5 ns-border-0 ns-bg-black",{"ns-opacity-50":Ft.disabled})}),!Ft.hint||nr&&rr?reactExports.createElement("p",{className:"ns-text-xs ns-text-red-600 ns-ml-4 ns-mt-1 ns-pt-1 ns-flex ns-gap-x-2"},nr&&rr&&reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("svg",{width:"13",height:"14",viewBox:"0 0 13 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},reactExports.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.5 0.5C10.0899 0.5 13 3.41015 13 7C13 10.5899 10.0899 13.5 6.5 13.5C2.91015 13.5 0 10.5899 0 7C0 3.41015 2.91015 0.5 6.5 0.5ZM7.10938 7.40625C7.10938 7.7428 6.83655 8.01562 6.5 8.01562C6.16345 8.01562 5.89062 7.7428 5.89062 7.40625V3.75C5.89062 3.41345 6.16345 3.14062 6.5 3.14062C6.83655 3.14062 7.10938 3.41345 7.10938 3.75V7.40625ZM6.5 9.03125C6.05127 9.03125 5.6875 9.39502 5.6875 9.84375C5.6875 10.2925 6.05127 10.6562 6.5 10.6562C6.94873 10.6562 7.3125 10.2925 7.3125 9.84375C7.3125 9.39502 6.94873 9.03125 6.5 9.03125Z",fill:"#E60000"})),reactExports.createElement("span",null,rr))):reactExports.createElement("p",{className:"ns-text-xs ns-text-grey-300 ns-ml-4 ns-mt-1 ns-pt-1"},Ft.hint))});function createContextScope$4(o,i=[]){let s=[];const _=()=>{const _e=s.map(ct=>reactExports.createContext(ct));return function(ct){const Mt=(ct==null?void 0:ct[o])||_e;return reactExports.useMemo(()=>({[`__scope${o}`]:{...ct,[o]:Mt}}),[ct,Mt])}};return _.scopeName=o,[function(_e,ct){const Mt=reactExports.createContext(ct),Ft=s.length;function Ut(Xt){const{scope:Kt,children:nr,...rr}=Xt,or=(Kt==null?void 0:Kt[o][Ft])||Mt,hr=reactExports.useMemo(()=>rr,Object.values(rr));return jsxRuntimeExports.jsx(or.Provider,{value:hr,children:nr})}return s=[...s,ct],Ut.displayName=_e+"Provider",[Ut,function(Xt,Kt){const nr=(Kt==null?void 0:Kt[o][Ft])||Mt,rr=reactExports.useContext(nr);if(rr)return rr;if(ct!==void 0)return ct;throw new Error(`\`${Xt}\` must be used within \`${_e}\``)}]},composeContextScopes$4(_,...i)]}function composeContextScopes$4(...o){const i=o[0];if(o.length===1)return i;const s=()=>{const _=o.map(_e=>({useScope:_e(),scopeName:_e.scopeName}));return function(_e){const ct=_.reduce((Mt,{useScope:Ft,scopeName:Ut})=>({...Mt,...Ft(_e)[`__scope${Ut}`]}),{});return reactExports.useMemo(()=>({[`__scope${i.scopeName}`]:ct}),[ct])}};return s.scopeName=i.scopeName,s}function setRef$7(o,i){typeof o=="function"?o(i):o!=null&&(o.current=i)}function composeRefs$7(...o){return i=>o.forEach(s=>setRef$7(s,i))}var Slot$7=reactExports.forwardRef((o,i)=>{const{children:s,..._}=o,_e=reactExports.Children.toArray(s),ct=_e.find(isSlottable$7);if(ct){const Mt=ct.props.children,Ft=_e.map(Ut=>Ut===ct?reactExports.Children.count(Mt)>1?reactExports.Children.only(null):reactExports.isValidElement(Mt)?Mt.props.children:null:Ut);return jsxRuntimeExports.jsx(SlotClone$7,{..._,ref:i,children:reactExports.isValidElement(Mt)?reactExports.cloneElement(Mt,void 0,Ft):null})}return jsxRuntimeExports.jsx(SlotClone$7,{..._,ref:i,children:s})});Slot$7.displayName="Slot";var SlotClone$7=reactExports.forwardRef((o,i)=>{const{children:s,..._}=o;if(reactExports.isValidElement(s)){const _e=getElementRef$8(s);return reactExports.cloneElement(s,{...mergeProps$7(_,s.props),ref:i?composeRefs$7(i,_e):_e})}return reactExports.Children.count(s)>1?reactExports.Children.only(null):null});SlotClone$7.displayName="SlotClone";var Slottable$7=({children:o})=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:o});function isSlottable$7(o){return reactExports.isValidElement(o)&&o.type===Slottable$7}function mergeProps$7(o,i){const s={...i};for(const _ in i){const _e=o[_],ct=i[_];/^on[A-Z]/.test(_)?_e&&ct?s[_]=(...Mt)=>{ct(...Mt),_e(...Mt)}:_e&&(s[_]=_e):_==="style"?s[_]={..._e,...ct}:_==="className"&&(s[_]=[_e,ct].filter(Boolean).join(" "))}return{...o,...s}}function getElementRef$8(o){var _,_e;let i=(_=Object.getOwnPropertyDescriptor(o.props,"ref"))==null?void 0:_.get,s=i&&"isReactWarning"in i&&i.isReactWarning;return s?o.ref:(i=(_e=Object.getOwnPropertyDescriptor(o,"ref"))==null?void 0:_e.get,s=i&&"isReactWarning"in i&&i.isReactWarning,s?o.props.ref:o.props.ref||o.ref)}var NODES$7=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Primitive$7=NODES$7.reduce((o,i)=>{const s=reactExports.forwardRef((_,_e)=>{const{asChild:ct,...Mt}=_,Ft=ct?Slot$7:i;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),jsxRuntimeExports.jsx(Ft,{...Mt,ref:_e})});return s.displayName=`Primitive.${i}`,{...o,[i]:s}},{}),PROGRESS_NAME="Progress",DEFAULT_MAX=100,[createProgressContext,createProgressScope]=createContextScope$4(PROGRESS_NAME),[ProgressProvider,useProgressContext]=createProgressContext(PROGRESS_NAME),Progress$1=reactExports.forwardRef((o,i)=>{const{__scopeProgress:s,value:_=null,max:_e,getValueLabel:ct=defaultGetValueLabel,...Mt}=o;!_e&&_e!==0||isValidMaxNumber(_e)||console.error(getInvalidMaxError(`${_e}`,"Progress"));const Ft=isValidMaxNumber(_e)?_e:DEFAULT_MAX;_===null||isValidValueNumber(_,Ft)||console.error(getInvalidValueError(`${_}`,"Progress"));const Ut=isValidValueNumber(_,Ft)?_:null,Xt=isNumber(Ut)?ct(Ut,Ft):void 0;return jsxRuntimeExports.jsx(ProgressProvider,{scope:s,value:Ut,max:Ft,children:jsxRuntimeExports.jsx(Primitive$7.div,{"aria-valuemax":Ft,"aria-valuemin":0,"aria-valuenow":isNumber(Ut)?Ut:void 0,"aria-valuetext":Xt,role:"progressbar","data-state":getProgressState(Ut,Ft),"data-value":Ut??void 0,"data-max":Ft,...Mt,ref:i})})});Progress$1.displayName=PROGRESS_NAME;var INDICATOR_NAME="ProgressIndicator",ProgressIndicator=reactExports.forwardRef((o,i)=>{const{__scopeProgress:s,..._}=o,_e=useProgressContext(INDICATOR_NAME,s);return jsxRuntimeExports.jsx(Primitive$7.div,{"data-state":getProgressState(_e.value,_e.max),"data-value":_e.value??void 0,"data-max":_e.max,..._,ref:i})});function defaultGetValueLabel(o,i){return`${Math.round(o/i*100)}%`}function getProgressState(o,i){return o==null?"indeterminate":o===i?"complete":"loading"}function isNumber(o){return typeof o=="number"}function isValidMaxNumber(o){return isNumber(o)&&!isNaN(o)&&o>0}function isValidValueNumber(o,i){return isNumber(o)&&!isNaN(o)&&o<=i&&o>=0}function getInvalidMaxError(o,i){return`Invalid prop \`max\` of value \`${o}\` supplied to \`${i}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${DEFAULT_MAX}\`.`}function getInvalidValueError(o,i){return`Invalid prop \`value\` of value \`${o}\` supplied to \`${i}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${DEFAULT_MAX} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}ProgressIndicator.displayName=INDICATOR_NAME;var Root$2=Progress$1,Indicator=ProgressIndicator;const stepLineVariants=cva("ns-step-line",{variants:{theme:{light:"ns-bg-red-600",dark:"ns-bg-red-600",revamp:"ns-bg-blue-700"}},defaultVariants:{theme:"light"}}),Progress=reactExports.forwardRef(({className:o,value:i,...s},_)=>{const{theme:_e}=useTheme();return reactExports.createElement(Root$2,{ref:_,className:cn$1("ns-relative ns-h-[2px] ns-overflow-hidden ns-bg-grey-300",o),...s},reactExports.createElement(Indicator,{className:cn$1("ns-h-full ns-w-full ns-flex-1 ns-transition-all",stepLineVariants({theme:_e})),style:{transform:`translateX(-${100-(i||0)}%)`}}))});Progress.displayName=Root$2.displayName;var U$1=1,Y$2=.9,H$1=.8,J$1=.17,p=.1,u=.999,$$2=.9999,k$1=.99,m=/[\\\/_+.#"@\[\(\{&]/,B$1=/[\\\/_+.#"@\[\(\{&]/g,K=/[\s-]/,X$2=/[\s-]/g;function G$2(o,i,s,_,_e,ct,Mt){if(ct===i.length)return _e===o.length?U$1:k$1;var Ft=`${_e},${ct}`;if(Mt[Ft]!==void 0)return Mt[Ft];for(var Ut,Xt,Kt,nr,rr=_.charAt(ct),or=s.indexOf(rr,_e),hr=0;or>=0;)(Ut=G$2(o,i,s,_,or+1,ct+1,Mt))>hr&&(or===_e?Ut*=U$1:m.test(o.charAt(or-1))?(Ut*=H$1,(Kt=o.slice(_e,or-1).match(B$1))&&_e>0&&(Ut*=Math.pow(u,Kt.length))):K.test(o.charAt(or-1))?(Ut*=Y$2,(nr=o.slice(_e,or-1).match(X$2))&&_e>0&&(Ut*=Math.pow(u,nr.length))):(Ut*=J$1,_e>0&&(Ut*=Math.pow(u,or-_e))),o.charAt(or)!==i.charAt(ct)&&(Ut*=$$2)),(Ut<p&&s.charAt(or-1)===_.charAt(ct+1)||_.charAt(ct+1)===_.charAt(ct)&&s.charAt(or-1)!==_.charAt(ct))&&(Xt=G$2(o,i,s,_,or+1,ct+2,Mt))*p>Ut&&(Ut=Xt*p),Ut>hr&&(hr=Ut),or=s.indexOf(rr,or+1);return Mt[Ft]=hr,hr}function D$2(o){return o.toLowerCase().replace(X$2," ")}function W(o,i,s){return G$2(o=s&&s.length>0?o+" "+s.join(" "):o,i,D$2(o),D$2(i),0,0,{})}var V='[cmdk-group=""]',X$1='[cmdk-group-items=""]',ge='[cmdk-group-heading=""]',Y$1='[cmdk-item=""]',le=`${Y$1}:not([aria-disabled="true"])`,Q="cmdk-item-select",M="data-value",Re=(o,i,s)=>W(o,i,s),ue=reactExports.createContext(void 0),G$1=()=>reactExports.useContext(ue),de=reactExports.createContext(void 0),Z=()=>reactExports.useContext(de),fe=reactExports.createContext(void 0),me=reactExports.forwardRef((o,i)=>{let s=k(()=>{var Op,Fp;return{search:"",value:(Fp=(Op=o.value)!=null?Op:o.defaultValue)!=null?Fp:"",filtered:{count:0,items:new Map,groups:new Set}}}),_=k(()=>new Set),_e=k(()=>new Map),ct=k(()=>new Map),Mt=k(()=>new Set),Ft=pe(o),{label:Ut,children:Xt,value:Kt,onValueChange:nr,filter:rr,shouldFilter:or,loop:hr,disablePointerSelection:fr=!1,vimBindings:yr=!0,...Lr}=o,Br=reactExports.useId(),Vr=reactExports.useId(),Wr=reactExports.useId(),ro=reactExports.useRef(null),no=Me();T(()=>{if(Kt!==void 0){let Op=Kt.trim();s.current.value=Op,so.emit()}},[Kt]),T(()=>{no(6,Ks)},[]);let so=reactExports.useMemo(()=>({subscribe:Op=>(Mt.current.add(Op),()=>Mt.current.delete(Op)),snapshot:()=>s.current,setState:(Op,Fp,wm)=>{var Bp,Em,Yp;if(!Object.is(s.current[Op],Fp)){if(s.current[Op]=Fp,Op==="search")As(),oo(),no(1,No);else if(Op==="value"&&(wm||no(5,Ks),((Bp=Ft.current)==null?void 0:Bp.value)!==void 0)){let _m=Fp??"";return void((Yp=(Em=Ft.current).onValueChange)==null||Yp.call(Em,_m))}so.emit()}},emit:()=>{Mt.current.forEach(Op=>Op())}}),[]),ko=reactExports.useMemo(()=>({value:(Op,Fp,wm)=>{var Bp;Fp!==((Bp=ct.current.get(Op))==null?void 0:Bp.value)&&(ct.current.set(Op,{value:Fp,keywords:wm}),s.current.filtered.items.set(Op,To(Fp,wm)),no(2,()=>{oo(),so.emit()}))},item:(Op,Fp)=>(_.current.add(Op),Fp&&(_e.current.has(Fp)?_e.current.get(Fp).add(Op):_e.current.set(Fp,new Set([Op]))),no(3,()=>{As(),oo(),s.current.value||No(),so.emit()}),()=>{ct.current.delete(Op),_.current.delete(Op),s.current.filtered.items.delete(Op);let wm=vu();no(4,()=>{As(),(wm==null?void 0:wm.getAttribute("id"))===Op&&No(),so.emit()})}),group:Op=>(_e.current.has(Op)||_e.current.set(Op,new Set),()=>{ct.current.delete(Op),_e.current.delete(Op)}),filter:()=>Ft.current.shouldFilter,label:Ut||o["aria-label"],disablePointerSelection:fr,listId:Br,inputId:Wr,labelId:Vr,listInnerRef:ro}),[]);function To(Op,Fp){var wm,Bp;let Em=(Bp=(wm=Ft.current)==null?void 0:wm.filter)!=null?Bp:Re;return Op?Em(Op,s.current.search,Fp):0}function oo(){if(!s.current.search||Ft.current.shouldFilter===!1)return;let Op=s.current.filtered.items,Fp=[];s.current.filtered.groups.forEach(Bp=>{let Em=_e.current.get(Bp),Yp=0;Em.forEach(_m=>{let Tm=Op.get(_m);Yp=Math.max(Tm,Yp)}),Fp.push([Bp,Yp])});let wm=ro.current;Fu().sort((Bp,Em)=>{var Yp,_m;let Tm=Bp.getAttribute("id"),Im=Em.getAttribute("id");return((Yp=Op.get(Im))!=null?Yp:0)-((_m=Op.get(Tm))!=null?_m:0)}).forEach(Bp=>{let Em=Bp.closest(X$1);Em?Em.appendChild(Bp.parentElement===Em?Bp:Bp.closest(`${X$1} > *`)):wm.appendChild(Bp.parentElement===wm?Bp:Bp.closest(`${X$1} > *`))}),Fp.sort((Bp,Em)=>Em[1]-Bp[1]).forEach(Bp=>{let Em=ro.current.querySelector(`${V}[${M}="${encodeURIComponent(Bp[0])}"]`);Em==null||Em.parentElement.appendChild(Em)})}function No(){let Op=Fu().find(wm=>wm.getAttribute("aria-disabled")!=="true"),Fp=Op==null?void 0:Op.getAttribute(M);so.setState("value",Fp||void 0)}function As(){var Op,Fp,wm,Bp;if(!s.current.search||Ft.current.shouldFilter===!1)return void(s.current.filtered.count=_.current.size);s.current.filtered.groups=new Set;let Em=0;for(let Yp of _.current){let _m=To((Fp=(Op=ct.current.get(Yp))==null?void 0:Op.value)!=null?Fp:"",(Bp=(wm=ct.current.get(Yp))==null?void 0:wm.keywords)!=null?Bp:[]);s.current.filtered.items.set(Yp,_m),_m>0&&Em++}for(let[Yp,_m]of _e.current)for(let Tm of _m)if(s.current.filtered.items.get(Tm)>0){s.current.filtered.groups.add(Yp);break}s.current.filtered.count=Em}function Ks(){var Op,Fp,wm;let Bp=vu();Bp&&(((Op=Bp.parentElement)==null?void 0:Op.firstChild)===Bp&&((wm=(Fp=Bp.closest(V))==null?void 0:Fp.querySelector(ge))==null||wm.scrollIntoView({block:"nearest"})),Bp.scrollIntoView({block:"nearest"}))}function vu(){var Op;return(Op=ro.current)==null?void 0:Op.querySelector(`${Y$1}[aria-selected="true"]`)}function Fu(){var Op;return Array.from((Op=ro.current)==null?void 0:Op.querySelectorAll(le))}function Ap(Op){let Fp=Fu()[Op];Fp&&so.setState("value",Fp.getAttribute(M))}function Pp(Op){var Fp;let wm=vu(),Bp=Fu(),Em=Bp.findIndex(_m=>_m===wm),Yp=Bp[Em+Op];(Fp=Ft.current)!=null&&Fp.loop&&(Yp=Em+Op<0?Bp[Bp.length-1]:Em+Op===Bp.length?Bp[0]:Bp[Em+Op]),Yp&&so.setState("value",Yp.getAttribute(M))}function Lo(Op){let Fp,wm=vu(),Bp=wm==null?void 0:wm.closest(V);for(;Bp&&!Fp;)Bp=Op>0?we(Bp,V):Ie(Bp,V),Fp=Bp==null?void 0:Bp.querySelector(le);Fp?so.setState("value",Fp.getAttribute(M)):Pp(Op)}let Au=()=>Ap(Fu().length-1),Mp=Op=>{Op.preventDefault(),Op.metaKey?Au():Op.altKey?Lo(1):Pp(1)},Lp=Op=>{Op.preventDefault(),Op.metaKey?Ap(0):Op.altKey?Lo(-1):Pp(-1)};return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,{ref:i,tabIndex:-1,...Lr,"cmdk-root":"",onKeyDown:Op=>{var Fp;if((Fp=Lr.onKeyDown)==null||Fp.call(Lr,Op),!Op.defaultPrevented)switch(Op.key){case"n":case"j":yr&&Op.ctrlKey&&Mp(Op);break;case"ArrowDown":Mp(Op);break;case"p":case"k":yr&&Op.ctrlKey&&Lp(Op);break;case"ArrowUp":Lp(Op);break;case"Home":Op.preventDefault(),Ap(0);break;case"End":Op.preventDefault(),Au();break;case"Enter":if(!Op.nativeEvent.isComposing&&Op.keyCode!==229){Op.preventDefault();let wm=vu();if(wm){let Bp=new Event(Q);wm.dispatchEvent(Bp)}}}}},reactExports.createElement("label",{"cmdk-label":"",htmlFor:ko.inputId,id:ko.labelId,style:De},Ut),F(o,Op=>reactExports.createElement(de.Provider,{value:so},reactExports.createElement(ue.Provider,{value:ko},Op))))}),be=reactExports.forwardRef((o,i)=>{var s,_;let _e=reactExports.useId(),ct=reactExports.useRef(null),Mt=reactExports.useContext(fe),Ft=G$1(),Ut=pe(o),Xt=(_=(s=Ut.current)==null?void 0:s.forceMount)!=null?_:Mt==null?void 0:Mt.forceMount;T(()=>{if(!Xt)return Ft.item(_e,Mt==null?void 0:Mt.id)},[Xt]);let Kt=ve(_e,ct,[o.value,o.children,ct],o.keywords),nr=Z(),rr=D$1(no=>no.value&&no.value===Kt.current),or=D$1(no=>!(!Xt&&Ft.filter()!==!1)||!no.search||no.filtered.items.get(_e)>0);function hr(){var no,so;fr(),(so=(no=Ut.current).onSelect)==null||so.call(no,Kt.current)}function fr(){nr.setState("value",Kt.current,!0)}if(reactExports.useEffect(()=>{let no=ct.current;if(no&&!o.disabled)return no.addEventListener(Q,hr),()=>no.removeEventListener(Q,hr)},[or,o.onSelect,o.disabled]),!or)return null;let{disabled:yr,value:Lr,onSelect:Br,forceMount:Vr,keywords:Wr,...ro}=o;return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,{ref:N([ct,i]),...ro,id:_e,"cmdk-item":"",role:"option","aria-disabled":!!yr,"aria-selected":!!rr,"data-disabled":!!yr,"data-selected":!!rr,onPointerMove:yr||Ft.disablePointerSelection?void 0:fr,onClick:yr?void 0:hr},o.children)}),he=reactExports.forwardRef((o,i)=>{let{heading:s,children:_,forceMount:_e,...ct}=o,Mt=reactExports.useId(),Ft=reactExports.useRef(null),Ut=reactExports.useRef(null),Xt=reactExports.useId(),Kt=G$1(),nr=D$1(or=>!(!_e&&Kt.filter()!==!1)||!or.search||or.filtered.groups.has(Mt));T(()=>Kt.group(Mt),[]),ve(Mt,Ft,[o.value,o.heading,Ut]);let rr=reactExports.useMemo(()=>({id:Mt,forceMount:_e}),[_e]);return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,{ref:N([Ft,i]),...ct,"cmdk-group":"",role:"presentation",hidden:!nr||void 0},s&&reactExports.createElement("div",{ref:Ut,"cmdk-group-heading":"","aria-hidden":!0,id:Xt},s),F(o,or=>reactExports.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":s?Xt:void 0},reactExports.createElement(fe.Provider,{value:rr},or))))}),ye=reactExports.forwardRef((o,i)=>{let{alwaysRender:s,..._}=o,_e=reactExports.useRef(null),ct=D$1(Mt=>!Mt.search);return s||ct?reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,{ref:N([_e,i]),..._,"cmdk-separator":"",role:"separator"}):null}),Ee=reactExports.forwardRef((o,i)=>{let{onValueChange:s,..._}=o,_e=o.value!=null,ct=Z(),Mt=D$1(Kt=>Kt.search),Ft=D$1(Kt=>Kt.value),Ut=G$1(),Xt=reactExports.useMemo(()=>{var Kt;let nr=(Kt=Ut.listInnerRef.current)==null?void 0:Kt.querySelector(`${Y$1}[${M}="${encodeURIComponent(Ft)}"]`);return nr==null?void 0:nr.getAttribute("id")},[]);return reactExports.useEffect(()=>{o.value!=null&&ct.setState("search",o.value)},[o.value]),reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.input,{ref:i,..._,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":Ut.listId,"aria-labelledby":Ut.labelId,"aria-activedescendant":Xt,id:Ut.inputId,type:"text",value:_e?o.value:Mt,onChange:Kt=>{_e||ct.setState("search",Kt.target.value),s==null||s(Kt.target.value)}})}),Se=reactExports.forwardRef((o,i)=>{let{children:s,label:_="Suggestions",..._e}=o,ct=reactExports.useRef(null),Mt=reactExports.useRef(null),Ft=G$1();return reactExports.useEffect(()=>{if(Mt.current&&ct.current){let Ut,Xt=Mt.current,Kt=ct.current,nr=new ResizeObserver(()=>{Ut=requestAnimationFrame(()=>{let rr=Xt.offsetHeight;Kt.style.setProperty("--cmdk-list-height",rr.toFixed(1)+"px")})});return nr.observe(Xt),()=>{cancelAnimationFrame(Ut),nr.unobserve(Xt)}}},[]),reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,{ref:N([ct,i]),..._e,"cmdk-list":"",role:"listbox","aria-label":_,id:Ft.listId},F(o,Ut=>reactExports.createElement("div",{ref:N([Mt,Ft.listInnerRef]),"cmdk-list-sizer":""},Ut)))}),Ce=reactExports.forwardRef((o,i)=>{let{open:s,onOpenChange:_,overlayClassName:_e,contentClassName:ct,container:Mt,...Ft}=o;return reactExports.createElement($5d3850c4d0b4e6c7$export$be92b6f5f03c0fe9,{open:s,onOpenChange:_},reactExports.createElement($5d3850c4d0b4e6c7$export$602eac185826482c,{container:Mt},reactExports.createElement($5d3850c4d0b4e6c7$export$c6fdb837b070b4ff,{"cmdk-overlay":"",className:_e}),reactExports.createElement($5d3850c4d0b4e6c7$export$7c6e2c02157bb7d2,{"aria-label":o.label,"cmdk-dialog":"",className:ct},reactExports.createElement(me,{ref:i,...Ft}))))}),xe=reactExports.forwardRef((o,i)=>D$1(s=>s.filtered.count===0)?reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,{ref:i,...o,"cmdk-empty":"",role:"presentation"}):null),Pe=reactExports.forwardRef((o,i)=>{let{progress:s,children:_,label:_e="Loading...",...ct}=o;return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,{ref:i,...ct,"cmdk-loading":"",role:"progressbar","aria-valuenow":s,"aria-valuemin":0,"aria-valuemax":100,"aria-label":_e},F(o,Mt=>reactExports.createElement("div",{"aria-hidden":!0},Mt)))}),He=Object.assign(me,{List:Se,Item:be,Input:Ee,Group:he,Separator:ye,Dialog:Ce,Empty:xe,Loading:Pe});function we(o,i){let s=o.nextElementSibling;for(;s;){if(s.matches(i))return s;s=s.nextElementSibling}}function Ie(o,i){let s=o.previousElementSibling;for(;s;){if(s.matches(i))return s;s=s.previousElementSibling}}function pe(o){let i=reactExports.useRef(o);return T(()=>{i.current=o}),i}var T=typeof window>"u"?reactExports.useEffect:reactExports.useLayoutEffect;function k(o){let i=reactExports.useRef();return i.current===void 0&&(i.current=o()),i}function N(o){return i=>{o.forEach(s=>{typeof s=="function"?s(i):s!=null&&(s.current=i)})}}function D$1(o){let i=Z(),s=()=>o(i.snapshot());return reactExports.useSyncExternalStore(i.subscribe,s,s)}function ve(o,i,s,_=[]){let _e=reactExports.useRef(),ct=G$1();return T(()=>{var Mt;let Ft=(()=>{var Xt;for(let Kt of s){if(typeof Kt=="string")return Kt.trim();if(typeof Kt=="object"&&"current"in Kt)return Kt.current?(Xt=Kt.current.textContent)==null?void 0:Xt.trim():_e.current}})(),Ut=_.map(Xt=>Xt.trim());ct.value(o,Ft,Ut),(Mt=i.current)==null||Mt.setAttribute(M,Ft),_e.current=Ft}),_e}var Me=()=>{let[o,i]=reactExports.useState(),s=k(()=>new Map);return T(()=>{s.current.forEach(_=>_()),s.current=new Map},[o]),(_,_e)=>{s.current.set(_,_e),i({})}};function Te(o){let i=o.type;return typeof i=="function"?i(o.props):"render"in i?i.render(o.props):o}function F({asChild:o,children:i},s){return o&&reactExports.isValidElement(i)?reactExports.cloneElement(Te(i),{ref:i.ref},s(i.props.children)):s(i)}var De={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const Command=reactExports.forwardRef(({className:o,...i},s)=>reactExports.createElement(He,{ref:s,className:cn$1("ns-flex ns-h-ns-full ns-w-full ns-flex-col ns-overflow-hidden ns-rounded-md ns-bg-white ns-text-slate-950 ",o),...i}));Command.displayName=He.displayName;const CommandInput=reactExports.forwardRef(({className:o,...i},s)=>reactExports.createElement(He.Input,{ref:s,className:o,...i}));CommandInput.displayName=He.Input.displayName;const CommandList=reactExports.forwardRef(({className:o,...i},s)=>reactExports.createElement(He.List,{ref:s,className:cn$1("ns-max-h-75 ns-overflow-y-auto ns-overflow-x-hidden",o),...i}));CommandList.displayName=He.List.displayName;const CommandGroup=reactExports.forwardRef(({className:o,...i},s)=>reactExports.createElement(He.Group,{ref:s,className:cn$1("ns-overflow-hidden p-1 ns-text-black  [&_[cmdk-group-heading]]:ns-px-2 [&_[cmdk-group-heading]]:ns-py-1.5 [&_[cmdk-group-heading]]:ns-text-xs      [&_[cmdk-group-heading]]:ns-font-medium [&_[cmdk-group-heading]]:ns-text-slate-500",o),...i}));CommandGroup.displayName=He.Group.displayName;const CommandItem=reactExports.forwardRef(({className:o,...i},s)=>reactExports.createElement(He.Item,{ref:s,className:o,...i}));CommandItem.displayName=He.Item.displayName;function clamp$1(o,[i,s]){return Math.min(s,Math.max(i,o))}function composeEventHandlers$2(o,i,{checkForDefaultPrevented:s=!0}={}){return function(_){if(o==null||o(_),s===!1||!_.defaultPrevented)return i==null?void 0:i(_)}}function createContextScope$3(o,i=[]){let s=[];const _=()=>{const _e=s.map(ct=>reactExports.createContext(ct));return function(ct){const Mt=(ct==null?void 0:ct[o])||_e;return reactExports.useMemo(()=>({[`__scope${o}`]:{...ct,[o]:Mt}}),[ct,Mt])}};return _.scopeName=o,[function(_e,ct){const Mt=reactExports.createContext(ct),Ft=s.length;function Ut(Xt){const{scope:Kt,children:nr,...rr}=Xt,or=(Kt==null?void 0:Kt[o][Ft])||Mt,hr=reactExports.useMemo(()=>rr,Object.values(rr));return jsxRuntimeExports.jsx(or.Provider,{value:hr,children:nr})}return s=[...s,ct],Ut.displayName=_e+"Provider",[Ut,function(Xt,Kt){const nr=(Kt==null?void 0:Kt[o][Ft])||Mt,rr=reactExports.useContext(nr);if(rr)return rr;if(ct!==void 0)return ct;throw new Error(`\`${Xt}\` must be used within \`${_e}\``)}]},composeContextScopes$3(_,...i)]}function composeContextScopes$3(...o){const i=o[0];if(o.length===1)return i;const s=()=>{const _=o.map(_e=>({useScope:_e(),scopeName:_e.scopeName}));return function(_e){const ct=_.reduce((Mt,{useScope:Ft,scopeName:Ut})=>({...Mt,...Ft(_e)[`__scope${Ut}`]}),{});return reactExports.useMemo(()=>({[`__scope${i.scopeName}`]:ct}),[ct])}};return s.scopeName=i.scopeName,s}function setRef$6(o,i){typeof o=="function"?o(i):o!=null&&(o.current=i)}function composeRefs$6(...o){return i=>o.forEach(s=>setRef$6(s,i))}function useComposedRefs$3(...o){return reactExports.useCallback(composeRefs$6(...o),o)}var Slot$6=reactExports.forwardRef((o,i)=>{const{children:s,..._}=o,_e=reactExports.Children.toArray(s),ct=_e.find(isSlottable$6);if(ct){const Mt=ct.props.children,Ft=_e.map(Ut=>Ut===ct?reactExports.Children.count(Mt)>1?reactExports.Children.only(null):reactExports.isValidElement(Mt)?Mt.props.children:null:Ut);return jsxRuntimeExports.jsx(SlotClone$6,{..._,ref:i,children:reactExports.isValidElement(Mt)?reactExports.cloneElement(Mt,void 0,Ft):null})}return jsxRuntimeExports.jsx(SlotClone$6,{..._,ref:i,children:s})});Slot$6.displayName="Slot";var SlotClone$6=reactExports.forwardRef((o,i)=>{const{children:s,..._}=o;if(reactExports.isValidElement(s)){const _e=getElementRef$7(s);return reactExports.cloneElement(s,{...mergeProps$6(_,s.props),ref:i?composeRefs$6(i,_e):_e})}return reactExports.Children.count(s)>1?reactExports.Children.only(null):null});SlotClone$6.displayName="SlotClone";var Slottable$6=({children:o})=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:o});function isSlottable$6(o){return reactExports.isValidElement(o)&&o.type===Slottable$6}function mergeProps$6(o,i){const s={...i};for(const _ in i){const _e=o[_],ct=i[_];/^on[A-Z]/.test(_)?_e&&ct?s[_]=(...Mt)=>{ct(...Mt),_e(...Mt)}:_e&&(s[_]=_e):_==="style"?s[_]={..._e,...ct}:_==="className"&&(s[_]=[_e,ct].filter(Boolean).join(" "))}return{...o,...s}}function getElementRef$7(o){var _,_e;let i=(_=Object.getOwnPropertyDescriptor(o.props,"ref"))==null?void 0:_.get,s=i&&"isReactWarning"in i&&i.isReactWarning;return s?o.ref:(i=(_e=Object.getOwnPropertyDescriptor(o,"ref"))==null?void 0:_e.get,s=i&&"isReactWarning"in i&&i.isReactWarning,s?o.props.ref:o.props.ref||o.ref)}function createCollection(o){const i=o+"CollectionProvider",[s,_]=createContextScope$3(i),[_e,ct]=s(i,{collectionRef:{current:null},itemMap:new Map}),Mt=rr=>{const{scope:or,children:hr}=rr,fr=React__default.useRef(null),yr=React__default.useRef(new Map).current;return jsxRuntimeExports.jsx(_e,{scope:or,itemMap:yr,collectionRef:fr,children:hr})};Mt.displayName=i;const Ft=o+"CollectionSlot",Ut=React__default.forwardRef((rr,or)=>{const{scope:hr,children:fr}=rr,yr=useComposedRefs$3(or,ct(Ft,hr).collectionRef);return jsxRuntimeExports.jsx(Slot$6,{ref:yr,children:fr})});Ut.displayName=Ft;const Xt=o+"CollectionItemSlot",Kt="data-radix-collection-item",nr=React__default.forwardRef((rr,or)=>{const{scope:hr,children:fr,...yr}=rr,Lr=React__default.useRef(null),Br=useComposedRefs$3(or,Lr),Vr=ct(Xt,hr);return React__default.useEffect(()=>(Vr.itemMap.set(Lr,{ref:Lr,...yr}),()=>{Vr.itemMap.delete(Lr)})),jsxRuntimeExports.jsx(Slot$6,{[Kt]:"",ref:Br,children:fr})});return nr.displayName=Xt,[{Provider:Mt,Slot:Ut,ItemSlot:nr},function(rr){const or=ct(o+"CollectionConsumer",rr);return React__default.useCallback(()=>{const fr=or.collectionRef.current;if(!fr)return[];const yr=Array.from(fr.querySelectorAll(`[${Kt}]`));return Array.from(or.itemMap.values()).sort((Br,Vr)=>yr.indexOf(Br.ref.current)-yr.indexOf(Vr.ref.current))},[or.collectionRef,or.itemMap])},_]}function createContextScope$2(o,i=[]){let s=[];const _=()=>{const _e=s.map(ct=>reactExports.createContext(ct));return function(ct){const Mt=(ct==null?void 0:ct[o])||_e;return reactExports.useMemo(()=>({[`__scope${o}`]:{...ct,[o]:Mt}}),[ct,Mt])}};return _.scopeName=o,[function(_e,ct){const Mt=reactExports.createContext(ct),Ft=s.length;s=[...s,ct];const Ut=Xt=>{var fr;const{scope:Kt,children:nr,...rr}=Xt,or=((fr=Kt==null?void 0:Kt[o])==null?void 0:fr[Ft])||Mt,hr=reactExports.useMemo(()=>rr,Object.values(rr));return jsxRuntimeExports.jsx(or.Provider,{value:hr,children:nr})};return Ut.displayName=_e+"Provider",[Ut,function(Xt,Kt){var or;const nr=((or=Kt==null?void 0:Kt[o])==null?void 0:or[Ft])||Mt,rr=reactExports.useContext(nr);if(rr)return rr;if(ct!==void 0)return ct;throw new Error(`\`${Xt}\` must be used within \`${_e}\``)}]},composeContextScopes$2(_,...i)]}function composeContextScopes$2(...o){const i=o[0];if(o.length===1)return i;const s=()=>{const _=o.map(_e=>({useScope:_e(),scopeName:_e.scopeName}));return function(_e){const ct=_.reduce((Mt,{useScope:Ft,scopeName:Ut})=>({...Mt,...Ft(_e)[`__scope${Ut}`]}),{});return reactExports.useMemo(()=>({[`__scope${i.scopeName}`]:ct}),[ct])}};return s.scopeName=i.scopeName,s}reactExports.createContext(void 0);function composeEventHandlers$1(o,i,{checkForDefaultPrevented:s=!0}={}){return function(_){if(o==null||o(_),s===!1||!_.defaultPrevented)return i==null?void 0:i(_)}}function setRef$5(o,i){typeof o=="function"?o(i):o!=null&&(o.current=i)}function composeRefs$5(...o){return i=>o.forEach(s=>setRef$5(s,i))}function useComposedRefs$2(...o){return reactExports.useCallback(composeRefs$5(...o),o)}var Slot$5=reactExports.forwardRef((o,i)=>{const{children:s,..._}=o,_e=reactExports.Children.toArray(s),ct=_e.find(isSlottable$5);if(ct){const Mt=ct.props.children,Ft=_e.map(Ut=>Ut===ct?reactExports.Children.count(Mt)>1?reactExports.Children.only(null):reactExports.isValidElement(Mt)?Mt.props.children:null:Ut);return jsxRuntimeExports.jsx(SlotClone$5,{..._,ref:i,children:reactExports.isValidElement(Mt)?reactExports.cloneElement(Mt,void 0,Ft):null})}return jsxRuntimeExports.jsx(SlotClone$5,{..._,ref:i,children:s})});Slot$5.displayName="Slot";var SlotClone$5=reactExports.forwardRef((o,i)=>{const{children:s,..._}=o;if(reactExports.isValidElement(s)){const _e=getElementRef$6(s);return reactExports.cloneElement(s,{...mergeProps$5(_,s.props),ref:i?composeRefs$5(i,_e):_e})}return reactExports.Children.count(s)>1?reactExports.Children.only(null):null});SlotClone$5.displayName="SlotClone";var Slottable$5=({children:o})=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:o});function isSlottable$5(o){return reactExports.isValidElement(o)&&o.type===Slottable$5}function mergeProps$5(o,i){const s={...i};for(const _ in i){const _e=o[_],ct=i[_];/^on[A-Z]/.test(_)?_e&&ct?s[_]=(...Mt)=>{ct(...Mt),_e(...Mt)}:_e&&(s[_]=_e):_==="style"?s[_]={..._e,...ct}:_==="className"&&(s[_]=[_e,ct].filter(Boolean).join(" "))}return{...o,...s}}function getElementRef$6(o){var _,_e;let i=(_=Object.getOwnPropertyDescriptor(o.props,"ref"))==null?void 0:_.get,s=i&&"isReactWarning"in i&&i.isReactWarning;return s?o.ref:(i=(_e=Object.getOwnPropertyDescriptor(o,"ref"))==null?void 0:_e.get,s=i&&"isReactWarning"in i&&i.isReactWarning,s?o.props.ref:o.props.ref||o.ref)}var NODES$6=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Primitive$6=NODES$6.reduce((o,i)=>{const s=reactExports.forwardRef((_,_e)=>{const{asChild:ct,...Mt}=_,Ft=ct?Slot$5:i;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),jsxRuntimeExports.jsx(Ft,{...Mt,ref:_e})});return s.displayName=`Primitive.${i}`,{...o,[i]:s}},{});function dispatchDiscreteCustomEvent(o,i){o&&reactDomExports.flushSync(()=>o.dispatchEvent(i))}function useCallbackRef$3(o){const i=reactExports.useRef(o);return reactExports.useEffect(()=>{i.current=o}),reactExports.useMemo(()=>(...s)=>{var _;return(_=i.current)==null?void 0:_.call(i,...s)},[])}function useEscapeKeydown(o,i=globalThis==null?void 0:globalThis.document){const s=useCallbackRef$3(o);reactExports.useEffect(()=>{const _=_e=>{_e.key==="Escape"&&s(_e)};return i.addEventListener("keydown",_,{capture:!0}),()=>i.removeEventListener("keydown",_,{capture:!0})},[s,i])}var DISMISSABLE_LAYER_NAME="DismissableLayer",CONTEXT_UPDATE="dismissableLayer.update",POINTER_DOWN_OUTSIDE="dismissableLayer.pointerDownOutside",FOCUS_OUTSIDE="dismissableLayer.focusOutside",originalBodyPointerEvents,DismissableLayerContext=reactExports.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),DismissableLayer=reactExports.forwardRef((o,i)=>{const{disableOutsidePointerEvents:s=!1,onEscapeKeyDown:_,onPointerDownOutside:_e,onFocusOutside:ct,onInteractOutside:Mt,onDismiss:Ft,...Ut}=o,Xt=reactExports.useContext(DismissableLayerContext),[Kt,nr]=reactExports.useState(null),rr=(Kt==null?void 0:Kt.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,or]=reactExports.useState({}),hr=useComposedRefs$2(i,so=>nr(so)),fr=Array.from(Xt.layers),[yr]=[...Xt.layersWithOutsidePointerEventsDisabled].slice(-1),Lr=fr.indexOf(yr),Br=Kt?fr.indexOf(Kt):-1,Vr=Xt.layersWithOutsidePointerEventsDisabled.size>0,Wr=Br>=Lr,ro=usePointerDownOutside(so=>{const ko=so.target,To=[...Xt.branches].some(oo=>oo.contains(ko));Wr&&!To&&(_e==null||_e(so),Mt==null||Mt(so),so.defaultPrevented||(Ft==null||Ft()))},rr),no=useFocusOutside(so=>{const ko=so.target;[...Xt.branches].some(To=>To.contains(ko))||(ct==null||ct(so),Mt==null||Mt(so),so.defaultPrevented||(Ft==null||Ft()))},rr);return useEscapeKeydown(so=>{Br===Xt.layers.size-1&&(_==null||_(so),!so.defaultPrevented&&Ft&&(so.preventDefault(),Ft()))},rr),reactExports.useEffect(()=>{if(Kt)return s&&(Xt.layersWithOutsidePointerEventsDisabled.size===0&&(originalBodyPointerEvents=rr.body.style.pointerEvents,rr.body.style.pointerEvents="none"),Xt.layersWithOutsidePointerEventsDisabled.add(Kt)),Xt.layers.add(Kt),dispatchUpdate(),()=>{s&&Xt.layersWithOutsidePointerEventsDisabled.size===1&&(rr.body.style.pointerEvents=originalBodyPointerEvents)}},[Kt,rr,s,Xt]),reactExports.useEffect(()=>()=>{Kt&&(Xt.layers.delete(Kt),Xt.layersWithOutsidePointerEventsDisabled.delete(Kt),dispatchUpdate())},[Kt,Xt]),reactExports.useEffect(()=>{const so=()=>or({});return document.addEventListener(CONTEXT_UPDATE,so),()=>document.removeEventListener(CONTEXT_UPDATE,so)},[]),jsxRuntimeExports.jsx(Primitive$6.div,{...Ut,ref:hr,style:{pointerEvents:Vr?Wr?"auto":"none":void 0,...o.style},onFocusCapture:composeEventHandlers$1(o.onFocusCapture,no.onFocusCapture),onBlurCapture:composeEventHandlers$1(o.onBlurCapture,no.onBlurCapture),onPointerDownCapture:composeEventHandlers$1(o.onPointerDownCapture,ro.onPointerDownCapture)})});DismissableLayer.displayName=DISMISSABLE_LAYER_NAME;var BRANCH_NAME="DismissableLayerBranch",DismissableLayerBranch=reactExports.forwardRef((o,i)=>{const s=reactExports.useContext(DismissableLayerContext),_=reactExports.useRef(null),_e=useComposedRefs$2(i,_);return reactExports.useEffect(()=>{const ct=_.current;if(ct)return s.branches.add(ct),()=>{s.branches.delete(ct)}},[s.branches]),jsxRuntimeExports.jsx(Primitive$6.div,{...o,ref:_e})});function usePointerDownOutside(o,i=globalThis==null?void 0:globalThis.document){const s=useCallbackRef$3(o),_=reactExports.useRef(!1),_e=reactExports.useRef(()=>{});return reactExports.useEffect(()=>{const ct=Ft=>{if(Ft.target&&!_.current){let Ut=function(){handleAndDispatchCustomEvent(POINTER_DOWN_OUTSIDE,s,Xt,{discrete:!0})};const Xt={originalEvent:Ft};Ft.pointerType==="touch"?(i.removeEventListener("click",_e.current),_e.current=Ut,i.addEventListener("click",_e.current,{once:!0})):Ut()}else i.removeEventListener("click",_e.current);_.current=!1},Mt=window.setTimeout(()=>{i.addEventListener("pointerdown",ct)},0);return()=>{window.clearTimeout(Mt),i.removeEventListener("pointerdown",ct),i.removeEventListener("click",_e.current)}},[i,s]),{onPointerDownCapture:()=>_.current=!0}}function useFocusOutside(o,i=globalThis==null?void 0:globalThis.document){const s=useCallbackRef$3(o),_=reactExports.useRef(!1);return reactExports.useEffect(()=>{const _e=ct=>{ct.target&&!_.current&&handleAndDispatchCustomEvent(FOCUS_OUTSIDE,s,{originalEvent:ct},{discrete:!1})};return i.addEventListener("focusin",_e),()=>i.removeEventListener("focusin",_e)},[i,s]),{onFocusCapture:()=>_.current=!0,onBlurCapture:()=>_.current=!1}}function dispatchUpdate(){const o=new CustomEvent(CONTEXT_UPDATE);document.dispatchEvent(o)}function handleAndDispatchCustomEvent(o,i,s,{discrete:_}){const _e=s.originalEvent.target,ct=new CustomEvent(o,{bubbles:!1,cancelable:!0,detail:s});i&&_e.addEventListener(o,i,{once:!0}),_?dispatchDiscreteCustomEvent(_e,ct):_e.dispatchEvent(ct)}DismissableLayerBranch.displayName=BRANCH_NAME;var count$2=0;function useFocusGuards(){reactExports.useEffect(()=>{const o=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",o[0]??createFocusGuard()),document.body.insertAdjacentElement("beforeend",o[1]??createFocusGuard()),count$2++,()=>{count$2===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(i=>i.remove()),count$2--}},[])}function createFocusGuard(){const o=document.createElement("span");return o.setAttribute("data-radix-focus-guard",""),o.tabIndex=0,o.style.outline="none",o.style.opacity="0",o.style.position="fixed",o.style.pointerEvents="none",o}var NODES$5=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Primitive$5=NODES$5.reduce((o,i)=>{const s=reactExports.forwardRef((_,_e)=>{const{asChild:ct,...Mt}=_,Ft=ct?Slot$6:i;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),jsxRuntimeExports.jsx(Ft,{...Mt,ref:_e})});return s.displayName=`Primitive.${i}`,{...o,[i]:s}},{});function useCallbackRef$2(o){const i=reactExports.useRef(o);return reactExports.useEffect(()=>{i.current=o}),reactExports.useMemo(()=>(...s)=>{var _;return(_=i.current)==null?void 0:_.call(i,...s)},[])}var AUTOFOCUS_ON_MOUNT="focusScope.autoFocusOnMount",AUTOFOCUS_ON_UNMOUNT="focusScope.autoFocusOnUnmount",EVENT_OPTIONS={bubbles:!1,cancelable:!0},FOCUS_SCOPE_NAME="FocusScope",FocusScope=reactExports.forwardRef((o,i)=>{const{loop:s=!1,trapped:_=!1,onMountAutoFocus:_e,onUnmountAutoFocus:ct,...Mt}=o,[Ft,Ut]=reactExports.useState(null),Xt=useCallbackRef$2(_e),Kt=useCallbackRef$2(ct),nr=reactExports.useRef(null),rr=useComposedRefs$3(i,fr=>Ut(fr)),or=reactExports.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;reactExports.useEffect(()=>{if(_){let fr=function(Vr){if(or.paused||!Ft)return;const Wr=Vr.target;Ft.contains(Wr)?nr.current=Wr:focus(nr.current,{select:!0})},yr=function(Vr){if(or.paused||!Ft)return;const Wr=Vr.relatedTarget;Wr!==null&&(Ft.contains(Wr)||focus(nr.current,{select:!0}))},Lr=function(Vr){if(document.activeElement===document.body)for(const Wr of Vr)Wr.removedNodes.length>0&&focus(Ft)};document.addEventListener("focusin",fr),document.addEventListener("focusout",yr);const Br=new MutationObserver(Lr);return Ft&&Br.observe(Ft,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",fr),document.removeEventListener("focusout",yr),Br.disconnect()}}},[_,Ft,or.paused]),reactExports.useEffect(()=>{if(Ft){focusScopesStack.add(or);const fr=document.activeElement;if(!Ft.contains(fr)){const yr=new CustomEvent(AUTOFOCUS_ON_MOUNT,EVENT_OPTIONS);Ft.addEventListener(AUTOFOCUS_ON_MOUNT,Xt),Ft.dispatchEvent(yr),yr.defaultPrevented||(focusFirst(removeLinks(getTabbableCandidates(Ft)),{select:!0}),document.activeElement===fr&&focus(Ft))}return()=>{Ft.removeEventListener(AUTOFOCUS_ON_MOUNT,Xt),setTimeout(()=>{const yr=new CustomEvent(AUTOFOCUS_ON_UNMOUNT,EVENT_OPTIONS);Ft.addEventListener(AUTOFOCUS_ON_UNMOUNT,Kt),Ft.dispatchEvent(yr),yr.defaultPrevented||focus(fr??document.body,{select:!0}),Ft.removeEventListener(AUTOFOCUS_ON_UNMOUNT,Kt),focusScopesStack.remove(or)},0)}}},[Ft,Xt,Kt,or]);const hr=reactExports.useCallback(fr=>{if(!s&&!_||or.paused)return;const yr=fr.key==="Tab"&&!fr.altKey&&!fr.ctrlKey&&!fr.metaKey,Lr=document.activeElement;if(yr&&Lr){const Br=fr.currentTarget,[Vr,Wr]=getTabbableEdges(Br);Vr&&Wr?fr.shiftKey||Lr!==Wr?fr.shiftKey&&Lr===Vr&&(fr.preventDefault(),s&&focus(Wr,{select:!0})):(fr.preventDefault(),s&&focus(Vr,{select:!0})):Lr===Br&&fr.preventDefault()}},[s,_,or.paused]);return jsxRuntimeExports.jsx(Primitive$5.div,{tabIndex:-1,...Mt,ref:rr,onKeyDown:hr})});function focusFirst(o,{select:i=!1}={}){const s=document.activeElement;for(const _ of o)if(focus(_,{select:i}),document.activeElement!==s)return}function getTabbableEdges(o){const i=getTabbableCandidates(o);return[findVisible(i,o),findVisible(i.reverse(),o)]}function getTabbableCandidates(o){const i=[],s=document.createTreeWalker(o,NodeFilter.SHOW_ELEMENT,{acceptNode:_=>{const _e=_.tagName==="INPUT"&&_.type==="hidden";return _.disabled||_.hidden||_e?NodeFilter.FILTER_SKIP:_.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)i.push(s.currentNode);return i}function findVisible(o,i){for(const s of o)if(!isHidden(s,{upTo:i}))return s}function isHidden(o,{upTo:i}){if(getComputedStyle(o).visibility==="hidden")return!0;for(;o;){if(i!==void 0&&o===i)return!1;if(getComputedStyle(o).display==="none")return!0;o=o.parentElement}return!1}function isSelectableInput(o){return o instanceof HTMLInputElement&&"select"in o}function focus(o,{select:i=!1}={}){if(o&&o.focus){const s=document.activeElement;o.focus({preventScroll:!0}),o!==s&&isSelectableInput(o)&&i&&o.select()}}FocusScope.displayName=FOCUS_SCOPE_NAME;var focusScopesStack=createFocusScopesStack();function createFocusScopesStack(){let o=[];return{add(i){const s=o[0];i!==s&&(s==null||s.pause()),o=arrayRemove(o,i),o.unshift(i)},remove(i){var s;o=arrayRemove(o,i),(s=o[0])==null||s.resume()}}}function arrayRemove(o,i){const s=[...o],_=s.indexOf(i);return _!==-1&&s.splice(_,1),s}function removeLinks(o){return o.filter(i=>i.tagName!=="A")}var useLayoutEffect2$3=globalThis!=null&&globalThis.document?reactExports.useLayoutEffect:()=>{},useReactId$1=React.useId||(()=>{}),count$1=0;function useId$1(o){const[i,s]=reactExports.useState(useReactId$1());return useLayoutEffect2$3(()=>{s(_=>_??String(count$1++))},[o]),i?`radix-${i}`:""}const sides=["top","right","bottom","left"],min=Math.min,max=Math.max,round=Math.round,floor=Math.floor,createCoords=o=>({x:o,y:o}),oppositeSideMap={left:"right",right:"left",bottom:"top",top:"bottom"},oppositeAlignmentMap={start:"end",end:"start"};function clamp(o,i,s){return max(o,min(i,s))}function evaluate(o,i){return typeof o=="function"?o(i):o}function getSide(o){return o.split("-")[0]}function getAlignment(o){return o.split("-")[1]}function getOppositeAxis(o){return o==="x"?"y":"x"}function getAxisLength(o){return o==="y"?"height":"width"}function getSideAxis(o){return["top","bottom"].includes(getSide(o))?"y":"x"}function getAlignmentAxis(o){return getOppositeAxis(getSideAxis(o))}function getAlignmentSides(o,i,s){s===void 0&&(s=!1);const _=getAlignment(o),_e=getAlignmentAxis(o),ct=getAxisLength(_e);let Mt=_e==="x"?_===(s?"end":"start")?"right":"left":_==="start"?"bottom":"top";return i.reference[ct]>i.floating[ct]&&(Mt=getOppositePlacement(Mt)),[Mt,getOppositePlacement(Mt)]}function getExpandedPlacements(o){const i=getOppositePlacement(o);return[getOppositeAlignmentPlacement(o),i,getOppositeAlignmentPlacement(i)]}function getOppositeAlignmentPlacement(o){return o.replace(/start|end/g,i=>oppositeAlignmentMap[i])}function getSideList(o,i,s){const _=["left","right"],_e=["right","left"],ct=["top","bottom"],Mt=["bottom","top"];switch(o){case"top":case"bottom":return s?i?_e:_:i?_:_e;case"left":case"right":return i?ct:Mt;default:return[]}}function getOppositeAxisPlacements(o,i,s,_){const _e=getAlignment(o);let ct=getSideList(getSide(o),s==="start",_);return _e&&(ct=ct.map(Mt=>Mt+"-"+_e),i&&(ct=ct.concat(ct.map(getOppositeAlignmentPlacement)))),ct}function getOppositePlacement(o){return o.replace(/left|right|bottom|top/g,i=>oppositeSideMap[i])}function expandPaddingObject(o){return{top:0,right:0,bottom:0,left:0,...o}}function getPaddingObject(o){return typeof o!="number"?expandPaddingObject(o):{top:o,right:o,bottom:o,left:o}}function rectToClientRect(o){const{x:i,y:s,width:_,height:_e}=o;return{width:_,height:_e,top:s,left:i,right:i+_,bottom:s+_e,x:i,y:s}}function computeCoordsFromPlacement(o,i,s){let{reference:_,floating:_e}=o;const ct=getSideAxis(i),Mt=getAlignmentAxis(i),Ft=getAxisLength(Mt),Ut=getSide(i),Xt=ct==="y",Kt=_.x+_.width/2-_e.width/2,nr=_.y+_.height/2-_e.height/2,rr=_[Ft]/2-_e[Ft]/2;let or;switch(Ut){case"top":or={x:Kt,y:_.y-_e.height};break;case"bottom":or={x:Kt,y:_.y+_.height};break;case"right":or={x:_.x+_.width,y:nr};break;case"left":or={x:_.x-_e.width,y:nr};break;default:or={x:_.x,y:_.y}}switch(getAlignment(i)){case"start":or[Mt]-=rr*(s&&Xt?-1:1);break;case"end":or[Mt]+=rr*(s&&Xt?-1:1)}return or}const computePosition$1=async(o,i,s)=>{const{placement:_="bottom",strategy:_e="absolute",middleware:ct=[],platform:Mt}=s,Ft=ct.filter(Boolean),Ut=await(Mt.isRTL==null?void 0:Mt.isRTL(i));let Xt=await Mt.getElementRects({reference:o,floating:i,strategy:_e}),{x:Kt,y:nr}=computeCoordsFromPlacement(Xt,_,Ut),rr=_,or={},hr=0;for(let fr=0;fr<Ft.length;fr++){const{name:yr,fn:Lr}=Ft[fr],{x:Br,y:Vr,data:Wr,reset:ro}=await Lr({x:Kt,y:nr,initialPlacement:_,placement:rr,strategy:_e,middlewareData:or,rects:Xt,platform:Mt,elements:{reference:o,floating:i}});Kt=Br??Kt,nr=Vr??nr,or={...or,[yr]:{...or[yr],...Wr}},ro&&hr<=50&&(hr++,typeof ro=="object"&&(ro.placement&&(rr=ro.placement),ro.rects&&(Xt=ro.rects===!0?await Mt.getElementRects({reference:o,floating:i,strategy:_e}):ro.rects),{x:Kt,y:nr}=computeCoordsFromPlacement(Xt,rr,Ut)),fr=-1)}return{x:Kt,y:nr,placement:rr,strategy:_e,middlewareData:or}};async function detectOverflow(o,i){var s;i===void 0&&(i={});const{x:_,y:_e,platform:ct,rects:Mt,elements:Ft,strategy:Ut}=o,{boundary:Xt="clippingAncestors",rootBoundary:Kt="viewport",elementContext:nr="floating",altBoundary:rr=!1,padding:or=0}=evaluate(i,o),hr=getPaddingObject(or),fr=Ft[rr?nr==="floating"?"reference":"floating":nr],yr=rectToClientRect(await ct.getClippingRect({element:(s=await(ct.isElement==null?void 0:ct.isElement(fr)))==null||s?fr:fr.contextElement||await(ct.getDocumentElement==null?void 0:ct.getDocumentElement(Ft.floating)),boundary:Xt,rootBoundary:Kt,strategy:Ut})),Lr=nr==="floating"?{x:_,y:_e,width:Mt.floating.width,height:Mt.floating.height}:Mt.reference,Br=await(ct.getOffsetParent==null?void 0:ct.getOffsetParent(Ft.floating)),Vr=await(ct.isElement==null?void 0:ct.isElement(Br))&&await(ct.getScale==null?void 0:ct.getScale(Br))||{x:1,y:1},Wr=rectToClientRect(ct.convertOffsetParentRelativeRectToViewportRelativeRect?await ct.convertOffsetParentRelativeRectToViewportRelativeRect({elements:Ft,rect:Lr,offsetParent:Br,strategy:Ut}):Lr);return{top:(yr.top-Wr.top+hr.top)/Vr.y,bottom:(Wr.bottom-yr.bottom+hr.bottom)/Vr.y,left:(yr.left-Wr.left+hr.left)/Vr.x,right:(Wr.right-yr.right+hr.right)/Vr.x}}const arrow$2=o=>({name:"arrow",options:o,async fn(i){const{x:s,y:_,placement:_e,rects:ct,platform:Mt,elements:Ft,middlewareData:Ut}=i,{element:Xt,padding:Kt=0}=evaluate(o,i)||{};if(Xt==null)return{};const nr=getPaddingObject(Kt),rr={x:s,y:_},or=getAlignmentAxis(_e),hr=getAxisLength(or),fr=await Mt.getDimensions(Xt),yr=or==="y",Lr=yr?"top":"left",Br=yr?"bottom":"right",Vr=yr?"clientHeight":"clientWidth",Wr=ct.reference[hr]+ct.reference[or]-rr[or]-ct.floating[hr],ro=rr[or]-ct.reference[or],no=await(Mt.getOffsetParent==null?void 0:Mt.getOffsetParent(Xt));let so=no?no[Vr]:0;so&&await(Mt.isElement==null?void 0:Mt.isElement(no))||(so=Ft.floating[Vr]||ct.floating[hr]);const ko=Wr/2-ro/2,To=so/2-fr[hr]/2-1,oo=min(nr[Lr],To),No=min(nr[Br],To),As=oo,Ks=so-fr[hr]-No,vu=so/2-fr[hr]/2+ko,Fu=clamp(As,vu,Ks),Ap=!Ut.arrow&&getAlignment(_e)!=null&&vu!==Fu&&ct.reference[hr]/2-(vu<As?oo:No)-fr[hr]/2<0,Pp=Ap?vu<As?vu-As:vu-Ks:0;return{[or]:rr[or]+Pp,data:{[or]:Fu,centerOffset:vu-Fu-Pp,...Ap&&{alignmentOffset:Pp}},reset:Ap}}}),flip$1=function(o){return o===void 0&&(o={}),{name:"flip",options:o,async fn(i){var s,_;const{placement:_e,middlewareData:ct,rects:Mt,initialPlacement:Ft,platform:Ut,elements:Xt}=i,{mainAxis:Kt=!0,crossAxis:nr=!0,fallbackPlacements:rr,fallbackStrategy:or="bestFit",fallbackAxisSideDirection:hr="none",flipAlignment:fr=!0,...yr}=evaluate(o,i);if((s=ct.arrow)!=null&&s.alignmentOffset)return{};const Lr=getSide(_e),Br=getSide(Ft)===Ft,Vr=await(Ut.isRTL==null?void 0:Ut.isRTL(Xt.floating)),Wr=rr||(Br||!fr?[getOppositePlacement(Ft)]:getExpandedPlacements(Ft));rr||hr==="none"||Wr.push(...getOppositeAxisPlacements(Ft,fr,hr,Vr));const ro=[Ft,...Wr],no=await detectOverflow(i,yr),so=[];let ko=((_=ct.flip)==null?void 0:_.overflows)||[];if(Kt&&so.push(no[Lr]),nr){const As=getAlignmentSides(_e,Mt,Vr);so.push(no[As[0]],no[As[1]])}if(ko=[...ko,{placement:_e,overflows:so}],!so.every(As=>As<=0)){var To,oo;const As=(((To=ct.flip)==null?void 0:To.index)||0)+1,Ks=ro[As];if(Ks)return{data:{index:As,overflows:ko},reset:{placement:Ks}};let vu=(oo=ko.filter(Fu=>Fu.overflows[0]<=0).sort((Fu,Ap)=>Fu.overflows[1]-Ap.overflows[1])[0])==null?void 0:oo.placement;if(!vu)switch(or){case"bestFit":{var No;const Fu=(No=ko.map(Ap=>[Ap.placement,Ap.overflows.filter(Pp=>Pp>0).reduce((Pp,Lo)=>Pp+Lo,0)]).sort((Ap,Pp)=>Ap[1]-Pp[1])[0])==null?void 0:No[0];Fu&&(vu=Fu);break}case"initialPlacement":vu=Ft}if(_e!==vu)return{reset:{placement:vu}}}return{}}}};function getSideOffsets(o,i){return{top:o.top-i.height,right:o.right-i.width,bottom:o.bottom-i.height,left:o.left-i.width}}function isAnySideFullyClipped(o){return sides.some(i=>o[i]>=0)}const hide$1=function(o){return o===void 0&&(o={}),{name:"hide",options:o,async fn(i){const{rects:s}=i,{strategy:_="referenceHidden",..._e}=evaluate(o,i);switch(_){case"referenceHidden":{const ct=getSideOffsets(await detectOverflow(i,{..._e,elementContext:"reference"}),s.reference);return{data:{referenceHiddenOffsets:ct,referenceHidden:isAnySideFullyClipped(ct)}}}case"escaped":{const ct=getSideOffsets(await detectOverflow(i,{..._e,altBoundary:!0}),s.floating);return{data:{escapedOffsets:ct,escaped:isAnySideFullyClipped(ct)}}}default:return{}}}}};async function convertValueToCoords(o,i){const{placement:s,platform:_,elements:_e}=o,ct=await(_.isRTL==null?void 0:_.isRTL(_e.floating)),Mt=getSide(s),Ft=getAlignment(s),Ut=getSideAxis(s)==="y",Xt=["left","top"].includes(Mt)?-1:1,Kt=ct&&Ut?-1:1,nr=evaluate(i,o);let{mainAxis:rr,crossAxis:or,alignmentAxis:hr}=typeof nr=="number"?{mainAxis:nr,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...nr};return Ft&&typeof hr=="number"&&(or=Ft==="end"?-1*hr:hr),Ut?{x:or*Kt,y:rr*Xt}:{x:rr*Xt,y:or*Kt}}const offset$1=function(o){return o===void 0&&(o=0),{name:"offset",options:o,async fn(i){var s,_;const{x:_e,y:ct,placement:Mt,middlewareData:Ft}=i,Ut=await convertValueToCoords(i,o);return Mt===((s=Ft.offset)==null?void 0:s.placement)&&(_=Ft.arrow)!=null&&_.alignmentOffset?{}:{x:_e+Ut.x,y:ct+Ut.y,data:{...Ut,placement:Mt}}}}},shift$1=function(o){return o===void 0&&(o={}),{name:"shift",options:o,async fn(i){const{x:s,y:_,placement:_e}=i,{mainAxis:ct=!0,crossAxis:Mt=!1,limiter:Ft={fn:yr=>{let{x:Lr,y:Br}=yr;return{x:Lr,y:Br}}},...Ut}=evaluate(o,i),Xt={x:s,y:_},Kt=await detectOverflow(i,Ut),nr=getSideAxis(getSide(_e)),rr=getOppositeAxis(nr);let or=Xt[rr],hr=Xt[nr];if(ct){const yr=rr==="y"?"bottom":"right";or=clamp(or+Kt[rr==="y"?"top":"left"],or,or-Kt[yr])}if(Mt){const yr=nr==="y"?"bottom":"right";hr=clamp(hr+Kt[nr==="y"?"top":"left"],hr,hr-Kt[yr])}const fr=Ft.fn({...i,[rr]:or,[nr]:hr});return{...fr,data:{x:fr.x-s,y:fr.y-_}}}}},limitShift$1=function(o){return o===void 0&&(o={}),{options:o,fn(i){const{x:s,y:_,placement:_e,rects:ct,middlewareData:Mt}=i,{offset:Ft=0,mainAxis:Ut=!0,crossAxis:Xt=!0}=evaluate(o,i),Kt={x:s,y:_},nr=getSideAxis(_e),rr=getOppositeAxis(nr);let or=Kt[rr],hr=Kt[nr];const fr=evaluate(Ft,i),yr=typeof fr=="number"?{mainAxis:fr,crossAxis:0}:{mainAxis:0,crossAxis:0,...fr};if(Ut){const Vr=rr==="y"?"height":"width",Wr=ct.reference[rr]-ct.floating[Vr]+yr.mainAxis,ro=ct.reference[rr]+ct.reference[Vr]-yr.mainAxis;or<Wr?or=Wr:or>ro&&(or=ro)}if(Xt){var Lr,Br;const Vr=rr==="y"?"width":"height",Wr=["top","left"].includes(getSide(_e)),ro=ct.reference[nr]-ct.floating[Vr]+(Wr&&((Lr=Mt.offset)==null?void 0:Lr[nr])||0)+(Wr?0:yr.crossAxis),no=ct.reference[nr]+ct.reference[Vr]+(Wr?0:((Br=Mt.offset)==null?void 0:Br[nr])||0)-(Wr?yr.crossAxis:0);hr<ro?hr=ro:hr>no&&(hr=no)}return{[rr]:or,[nr]:hr}}}},size$1=function(o){return o===void 0&&(o={}),{name:"size",options:o,async fn(i){const{placement:s,rects:_,platform:_e,elements:ct}=i,{apply:Mt=()=>{},...Ft}=evaluate(o,i),Ut=await detectOverflow(i,Ft),Xt=getSide(s),Kt=getAlignment(s),nr=getSideAxis(s)==="y",{width:rr,height:or}=_.floating;let hr,fr;Xt==="top"||Xt==="bottom"?(hr=Xt,fr=Kt===(await(_e.isRTL==null?void 0:_e.isRTL(ct.floating))?"start":"end")?"left":"right"):(fr=Xt,hr=Kt==="end"?"top":"bottom");const yr=or-Ut[hr],Lr=rr-Ut[fr],Br=!i.middlewareData.shift;let Vr=yr,Wr=Lr;if(nr){const no=rr-Ut.left-Ut.right;Wr=Kt||Br?min(Lr,no):no}else{const no=or-Ut.top-Ut.bottom;Vr=Kt||Br?min(yr,no):no}if(Br&&!Kt){const no=max(Ut.left,0),so=max(Ut.right,0),ko=max(Ut.top,0),To=max(Ut.bottom,0);nr?Wr=rr-2*(no!==0||so!==0?no+so:max(Ut.left,Ut.right)):Vr=or-2*(ko!==0||To!==0?ko+To:max(Ut.top,Ut.bottom))}await Mt({...i,availableWidth:Wr,availableHeight:Vr});const ro=await _e.getDimensions(ct.floating);return rr!==ro.width||or!==ro.height?{reset:{rects:!0}}:{}}}};function getNodeName(o){return isNode(o)?(o.nodeName||"").toLowerCase():"#document"}function getWindow(o){var i;return(o==null||(i=o.ownerDocument)==null?void 0:i.defaultView)||window}function getDocumentElement(o){var i;return(i=(isNode(o)?o.ownerDocument:o.document)||window.document)==null?void 0:i.documentElement}function isNode(o){return o instanceof Node||o instanceof getWindow(o).Node}function isElement(o){return o instanceof Element||o instanceof getWindow(o).Element}function isHTMLElement(o){return o instanceof HTMLElement||o instanceof getWindow(o).HTMLElement}function isShadowRoot(o){return typeof ShadowRoot<"u"&&(o instanceof ShadowRoot||o instanceof getWindow(o).ShadowRoot)}function isOverflowElement(o){const{overflow:i,overflowX:s,overflowY:_,display:_e}=getComputedStyle$1(o);return/auto|scroll|overlay|hidden|clip/.test(i+_+s)&&!["inline","contents"].includes(_e)}function isTableElement(o){return["table","td","th"].includes(getNodeName(o))}function isContainingBlock(o){const i=isWebKit(),s=getComputedStyle$1(o);return s.transform!=="none"||s.perspective!=="none"||!!s.containerType&&s.containerType!=="normal"||!i&&!!s.backdropFilter&&s.backdropFilter!=="none"||!i&&!!s.filter&&s.filter!=="none"||["transform","perspective","filter"].some(_=>(s.willChange||"").includes(_))||["paint","layout","strict","content"].some(_=>(s.contain||"").includes(_))}function getContainingBlock(o){let i=getParentNode(o);for(;isHTMLElement(i)&&!isLastTraversableNode(i);){if(isContainingBlock(i))return i;i=getParentNode(i)}return null}function isWebKit(){return!(typeof CSS>"u"||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function isLastTraversableNode(o){return["html","body","#document"].includes(getNodeName(o))}function getComputedStyle$1(o){return getWindow(o).getComputedStyle(o)}function getNodeScroll(o){return isElement(o)?{scrollLeft:o.scrollLeft,scrollTop:o.scrollTop}:{scrollLeft:o.pageXOffset,scrollTop:o.pageYOffset}}function getParentNode(o){if(getNodeName(o)==="html")return o;const i=o.assignedSlot||o.parentNode||isShadowRoot(o)&&o.host||getDocumentElement(o);return isShadowRoot(i)?i.host:i}function getNearestOverflowAncestor(o){const i=getParentNode(o);return isLastTraversableNode(i)?o.ownerDocument?o.ownerDocument.body:o.body:isHTMLElement(i)&&isOverflowElement(i)?i:getNearestOverflowAncestor(i)}function getOverflowAncestors(o,i,s){var _;i===void 0&&(i=[]),s===void 0&&(s=!0);const _e=getNearestOverflowAncestor(o),ct=_e===((_=o.ownerDocument)==null?void 0:_.body),Mt=getWindow(_e);return ct?i.concat(Mt,Mt.visualViewport||[],isOverflowElement(_e)?_e:[],Mt.frameElement&&s?getOverflowAncestors(Mt.frameElement):[]):i.concat(_e,getOverflowAncestors(_e,[],s))}function getCssDimensions(o){const i=getComputedStyle$1(o);let s=parseFloat(i.width)||0,_=parseFloat(i.height)||0;const _e=isHTMLElement(o),ct=_e?o.offsetWidth:s,Mt=_e?o.offsetHeight:_,Ft=round(s)!==ct||round(_)!==Mt;return Ft&&(s=ct,_=Mt),{width:s,height:_,$:Ft}}function unwrapElement(o){return isElement(o)?o:o.contextElement}function getScale(o){const i=unwrapElement(o);if(!isHTMLElement(i))return createCoords(1);const s=i.getBoundingClientRect(),{width:_,height:_e,$:ct}=getCssDimensions(i);let Mt=(ct?round(s.width):s.width)/_,Ft=(ct?round(s.height):s.height)/_e;return Mt&&Number.isFinite(Mt)||(Mt=1),Ft&&Number.isFinite(Ft)||(Ft=1),{x:Mt,y:Ft}}const noOffsets=createCoords(0);function getVisualOffsets(o){const i=getWindow(o);return isWebKit()&&i.visualViewport?{x:i.visualViewport.offsetLeft,y:i.visualViewport.offsetTop}:noOffsets}function shouldAddVisualOffsets(o,i,s){return i===void 0&&(i=!1),!(!s||i&&s!==getWindow(o))&&i}function getBoundingClientRect(o,i,s,_){i===void 0&&(i=!1),s===void 0&&(s=!1);const _e=o.getBoundingClientRect(),ct=unwrapElement(o);let Mt=createCoords(1);i&&(_?isElement(_)&&(Mt=getScale(_)):Mt=getScale(o));const Ft=shouldAddVisualOffsets(ct,s,_)?getVisualOffsets(ct):createCoords(0);let Ut=(_e.left+Ft.x)/Mt.x,Xt=(_e.top+Ft.y)/Mt.y,Kt=_e.width/Mt.x,nr=_e.height/Mt.y;if(ct){const rr=getWindow(ct),or=_&&isElement(_)?getWindow(_):_;let hr=rr,fr=hr.frameElement;for(;fr&&_&&or!==hr;){const yr=getScale(fr),Lr=fr.getBoundingClientRect(),Br=getComputedStyle$1(fr),Vr=Lr.left+(fr.clientLeft+parseFloat(Br.paddingLeft))*yr.x,Wr=Lr.top+(fr.clientTop+parseFloat(Br.paddingTop))*yr.y;Ut*=yr.x,Xt*=yr.y,Kt*=yr.x,nr*=yr.y,Ut+=Vr,Xt+=Wr,hr=getWindow(fr),fr=hr.frameElement}}return rectToClientRect({width:Kt,height:nr,x:Ut,y:Xt})}const topLayerSelectors=[":popover-open",":modal"];function isTopLayer(o){return topLayerSelectors.some(i=>{try{return o.matches(i)}catch{return!1}})}function convertOffsetParentRelativeRectToViewportRelativeRect(o){let{elements:i,rect:s,offsetParent:_,strategy:_e}=o;const ct=_e==="fixed",Mt=getDocumentElement(_),Ft=!!i&&isTopLayer(i.floating);if(_===Mt||Ft&&ct)return s;let Ut={scrollLeft:0,scrollTop:0},Xt=createCoords(1);const Kt=createCoords(0),nr=isHTMLElement(_);if((nr||!nr&&!ct)&&((getNodeName(_)!=="body"||isOverflowElement(Mt))&&(Ut=getNodeScroll(_)),isHTMLElement(_))){const rr=getBoundingClientRect(_);Xt=getScale(_),Kt.x=rr.x+_.clientLeft,Kt.y=rr.y+_.clientTop}return{width:s.width*Xt.x,height:s.height*Xt.y,x:s.x*Xt.x-Ut.scrollLeft*Xt.x+Kt.x,y:s.y*Xt.y-Ut.scrollTop*Xt.y+Kt.y}}function getClientRects(o){return Array.from(o.getClientRects())}function getWindowScrollBarX(o){return getBoundingClientRect(getDocumentElement(o)).left+getNodeScroll(o).scrollLeft}function getDocumentRect(o){const i=getDocumentElement(o),s=getNodeScroll(o),_=o.ownerDocument.body,_e=max(i.scrollWidth,i.clientWidth,_.scrollWidth,_.clientWidth),ct=max(i.scrollHeight,i.clientHeight,_.scrollHeight,_.clientHeight);let Mt=-s.scrollLeft+getWindowScrollBarX(o);const Ft=-s.scrollTop;return getComputedStyle$1(_).direction==="rtl"&&(Mt+=max(i.clientWidth,_.clientWidth)-_e),{width:_e,height:ct,x:Mt,y:Ft}}function getViewportRect(o,i){const s=getWindow(o),_=getDocumentElement(o),_e=s.visualViewport;let ct=_.clientWidth,Mt=_.clientHeight,Ft=0,Ut=0;if(_e){ct=_e.width,Mt=_e.height;const Xt=isWebKit();(!Xt||Xt&&i==="fixed")&&(Ft=_e.offsetLeft,Ut=_e.offsetTop)}return{width:ct,height:Mt,x:Ft,y:Ut}}function getInnerBoundingClientRect(o,i){const s=getBoundingClientRect(o,!0,i==="fixed"),_=s.top+o.clientTop,_e=s.left+o.clientLeft,ct=isHTMLElement(o)?getScale(o):createCoords(1);return{width:o.clientWidth*ct.x,height:o.clientHeight*ct.y,x:_e*ct.x,y:_*ct.y}}function getClientRectFromClippingAncestor(o,i,s){let _;if(i==="viewport")_=getViewportRect(o,s);else if(i==="document")_=getDocumentRect(getDocumentElement(o));else if(isElement(i))_=getInnerBoundingClientRect(i,s);else{const _e=getVisualOffsets(o);_={...i,x:i.x-_e.x,y:i.y-_e.y}}return rectToClientRect(_)}function hasFixedPositionAncestor(o,i){const s=getParentNode(o);return!(s===i||!isElement(s)||isLastTraversableNode(s))&&(getComputedStyle$1(s).position==="fixed"||hasFixedPositionAncestor(s,i))}function getClippingElementAncestors(o,i){const s=i.get(o);if(s)return s;let _=getOverflowAncestors(o,[],!1).filter(Ft=>isElement(Ft)&&getNodeName(Ft)!=="body"),_e=null;const ct=getComputedStyle$1(o).position==="fixed";let Mt=ct?getParentNode(o):o;for(;isElement(Mt)&&!isLastTraversableNode(Mt);){const Ft=getComputedStyle$1(Mt),Ut=isContainingBlock(Mt);Ut||Ft.position!=="fixed"||(_e=null),(ct?!Ut&&!_e:!Ut&&Ft.position==="static"&&_e&&["absolute","fixed"].includes(_e.position)||isOverflowElement(Mt)&&!Ut&&hasFixedPositionAncestor(o,Mt))?_=_.filter(Xt=>Xt!==Mt):_e=Ft,Mt=getParentNode(Mt)}return i.set(o,_),_}function getClippingRect(o){let{element:i,boundary:s,rootBoundary:_,strategy:_e}=o;const ct=[...s==="clippingAncestors"?isTopLayer(i)?[]:getClippingElementAncestors(i,this._c):[].concat(s),_],Mt=ct[0],Ft=ct.reduce((Ut,Xt)=>{const Kt=getClientRectFromClippingAncestor(i,Xt,_e);return Ut.top=max(Kt.top,Ut.top),Ut.right=min(Kt.right,Ut.right),Ut.bottom=min(Kt.bottom,Ut.bottom),Ut.left=max(Kt.left,Ut.left),Ut},getClientRectFromClippingAncestor(i,Mt,_e));return{width:Ft.right-Ft.left,height:Ft.bottom-Ft.top,x:Ft.left,y:Ft.top}}function getDimensions(o){const{width:i,height:s}=getCssDimensions(o);return{width:i,height:s}}function getRectRelativeToOffsetParent(o,i,s){const _=isHTMLElement(i),_e=getDocumentElement(i),ct=s==="fixed",Mt=getBoundingClientRect(o,!0,ct,i);let Ft={scrollLeft:0,scrollTop:0};const Ut=createCoords(0);if(_||!_&&!ct)if((getNodeName(i)!=="body"||isOverflowElement(_e))&&(Ft=getNodeScroll(i)),_){const Xt=getBoundingClientRect(i,!0,ct,i);Ut.x=Xt.x+i.clientLeft,Ut.y=Xt.y+i.clientTop}else _e&&(Ut.x=getWindowScrollBarX(_e));return{x:Mt.left+Ft.scrollLeft-Ut.x,y:Mt.top+Ft.scrollTop-Ut.y,width:Mt.width,height:Mt.height}}function isStaticPositioned(o){return getComputedStyle$1(o).position==="static"}function getTrueOffsetParent(o,i){return isHTMLElement(o)&&getComputedStyle$1(o).position!=="fixed"?i?i(o):o.offsetParent:null}function getOffsetParent(o,i){const s=getWindow(o);if(isTopLayer(o))return s;if(!isHTMLElement(o)){let _e=getParentNode(o);for(;_e&&!isLastTraversableNode(_e);){if(isElement(_e)&&!isStaticPositioned(_e))return _e;_e=getParentNode(_e)}return s}let _=getTrueOffsetParent(o,i);for(;_&&isTableElement(_)&&isStaticPositioned(_);)_=getTrueOffsetParent(_,i);return _&&isLastTraversableNode(_)&&isStaticPositioned(_)&&!isContainingBlock(_)?s:_||getContainingBlock(o)||s}const getElementRects=async function(o){const i=this.getOffsetParent||getOffsetParent,s=this.getDimensions,_=await s(o.floating);return{reference:getRectRelativeToOffsetParent(o.reference,await i(o.floating),o.strategy),floating:{x:0,y:0,width:_.width,height:_.height}}};function isRTL(o){return getComputedStyle$1(o).direction==="rtl"}const platform={convertOffsetParentRelativeRectToViewportRelativeRect,getDocumentElement,getClippingRect,getOffsetParent,getElementRects,getClientRects,getDimensions,getScale,isElement,isRTL};function observeMove(o,i){let s,_=null;const _e=getDocumentElement(o);function ct(){var Mt;clearTimeout(s),(Mt=_)==null||Mt.disconnect(),_=null}return function Mt(Ft,Ut){Ft===void 0&&(Ft=!1),Ut===void 0&&(Ut=1),ct();const{left:Xt,top:Kt,width:nr,height:rr}=o.getBoundingClientRect();if(Ft||i(),!nr||!rr)return;const or={rootMargin:-floor(Kt)+"px "+-floor(_e.clientWidth-(Xt+nr))+"px "+-floor(_e.clientHeight-(Kt+rr))+"px "+-floor(Xt)+"px",threshold:max(0,min(1,Ut))||1};let hr=!0;function fr(yr){const Lr=yr[0].intersectionRatio;if(Lr!==Ut){if(!hr)return Mt();Lr?Mt(!1,Lr):s=setTimeout(()=>{Mt(!1,1e-7)},1e3)}hr=!1}try{_=new IntersectionObserver(fr,{...or,root:_e.ownerDocument})}catch{_=new IntersectionObserver(fr,or)}_.observe(o)}(!0),ct}function autoUpdate(o,i,s,_){_===void 0&&(_={});const{ancestorScroll:_e=!0,ancestorResize:ct=!0,elementResize:Mt=typeof ResizeObserver=="function",layoutShift:Ft=typeof IntersectionObserver=="function",animationFrame:Ut=!1}=_,Xt=unwrapElement(o),Kt=_e||ct?[...Xt?getOverflowAncestors(Xt):[],...getOverflowAncestors(i)]:[];Kt.forEach(yr=>{_e&&yr.addEventListener("scroll",s,{passive:!0}),ct&&yr.addEventListener("resize",s)});const nr=Xt&&Ft?observeMove(Xt,s):null;let rr,or=-1,hr=null;Mt&&(hr=new ResizeObserver(yr=>{let[Lr]=yr;Lr&&Lr.target===Xt&&hr&&(hr.unobserve(i),cancelAnimationFrame(or),or=requestAnimationFrame(()=>{var Br;(Br=hr)==null||Br.observe(i)})),s()}),Xt&&!Ut&&hr.observe(Xt),hr.observe(i));let fr=Ut?getBoundingClientRect(o):null;return Ut&&function yr(){const Lr=getBoundingClientRect(o);!fr||Lr.x===fr.x&&Lr.y===fr.y&&Lr.width===fr.width&&Lr.height===fr.height||s(),fr=Lr,rr=requestAnimationFrame(yr)}(),s(),()=>{var yr;Kt.forEach(Lr=>{_e&&Lr.removeEventListener("scroll",s),ct&&Lr.removeEventListener("resize",s)}),nr==null||nr(),(yr=hr)==null||yr.disconnect(),hr=null,Ut&&cancelAnimationFrame(rr)}}const offset=offset$1,shift=shift$1,flip=flip$1,size=size$1,hide=hide$1,arrow$1=arrow$2,limitShift=limitShift$1,computePosition=(o,i,s)=>{const _=new Map,_e={platform,...s},ct={..._e.platform,_c:_};return computePosition$1(o,i,{..._e,platform:ct})},arrow=o=>({name:"arrow",options:o,fn(i){const{element:s,padding:_}=typeof o=="function"?o(i):o;return s&&(_e=s,{}.hasOwnProperty.call(_e,"current"))?s.current!=null?arrow$1({element:s.current,padding:_}).fn(i):{}:s?arrow$1({element:s,padding:_}).fn(i):{};var _e}});var index=typeof document<"u"?reactExports.useLayoutEffect:reactExports.useEffect;function deepEqual(o,i){if(o===i)return!0;if(typeof o!=typeof i)return!1;if(typeof o=="function"&&o.toString()===i.toString())return!0;let s,_,_e;if(o&&i&&typeof o=="object"){if(Array.isArray(o)){if(s=o.length,s!==i.length)return!1;for(_=s;_--!=0;)if(!deepEqual(o[_],i[_]))return!1;return!0}if(_e=Object.keys(o),s=_e.length,s!==Object.keys(i).length)return!1;for(_=s;_--!=0;)if(!{}.hasOwnProperty.call(i,_e[_]))return!1;for(_=s;_--!=0;){const ct=_e[_];if((ct!=="_owner"||!o.$$typeof)&&!deepEqual(o[ct],i[ct]))return!1}return!0}return o!=o&&i!=i}function getDPR(o){return typeof window>"u"?1:(o.ownerDocument.defaultView||window).devicePixelRatio||1}function roundByDPR(o,i){const s=getDPR(o);return Math.round(i*s)/s}function useLatestRef(o){const i=reactExports.useRef(o);return index(()=>{i.current=o}),i}function useFloating(o){o===void 0&&(o={});const{placement:i="bottom",strategy:s="absolute",middleware:_=[],platform:_e,elements:{reference:ct,floating:Mt}={},transform:Ft=!0,whileElementsMounted:Ut,open:Xt}=o,[Kt,nr]=reactExports.useState({x:0,y:0,strategy:s,placement:i,middlewareData:{},isPositioned:!1}),[rr,or]=reactExports.useState(_);deepEqual(rr,_)||or(_);const[hr,fr]=reactExports.useState(null),[yr,Lr]=reactExports.useState(null),Br=reactExports.useCallback(Pp=>{Pp!==no.current&&(no.current=Pp,fr(Pp))},[]),Vr=reactExports.useCallback(Pp=>{Pp!==so.current&&(so.current=Pp,Lr(Pp))},[]),Wr=ct||hr,ro=Mt||yr,no=reactExports.useRef(null),so=reactExports.useRef(null),ko=reactExports.useRef(Kt),To=Ut!=null,oo=useLatestRef(Ut),No=useLatestRef(_e),As=reactExports.useCallback(()=>{if(!no.current||!so.current)return;const Pp={placement:i,strategy:s,middleware:rr};No.current&&(Pp.platform=No.current),computePosition(no.current,so.current,Pp).then(Lo=>{const Au={...Lo,isPositioned:!0};Ks.current&&!deepEqual(ko.current,Au)&&(ko.current=Au,reactDomExports.flushSync(()=>{nr(Au)}))})},[rr,i,s,No]);index(()=>{Xt===!1&&ko.current.isPositioned&&(ko.current.isPositioned=!1,nr(Pp=>({...Pp,isPositioned:!1})))},[Xt]);const Ks=reactExports.useRef(!1);index(()=>(Ks.current=!0,()=>{Ks.current=!1}),[]),index(()=>{if(Wr&&(no.current=Wr),ro&&(so.current=ro),Wr&&ro){if(oo.current)return oo.current(Wr,ro,As);As()}},[Wr,ro,As,oo,To]);const vu=reactExports.useMemo(()=>({reference:no,floating:so,setReference:Br,setFloating:Vr}),[Br,Vr]),Fu=reactExports.useMemo(()=>({reference:Wr,floating:ro}),[Wr,ro]),Ap=reactExports.useMemo(()=>{const Pp={position:s,left:0,top:0};if(!Fu.floating)return Pp;const Lo=roundByDPR(Fu.floating,Kt.x),Au=roundByDPR(Fu.floating,Kt.y);return Ft?{...Pp,transform:"translate("+Lo+"px, "+Au+"px)",...getDPR(Fu.floating)>=1.5&&{willChange:"transform"}}:{position:s,left:Lo,top:Au}},[s,Ft,Fu.floating,Kt.x,Kt.y]);return reactExports.useMemo(()=>({...Kt,update:As,refs:vu,elements:Fu,floatingStyles:Ap}),[Kt,As,vu,Fu,Ap])}function setRef$4(o,i){typeof o=="function"?o(i):o!=null&&(o.current=i)}function composeRefs$4(...o){return i=>o.forEach(s=>setRef$4(s,i))}var Slot$4=reactExports.forwardRef((o,i)=>{const{children:s,..._}=o,_e=reactExports.Children.toArray(s),ct=_e.find(isSlottable$4);if(ct){const Mt=ct.props.children,Ft=_e.map(Ut=>Ut===ct?reactExports.Children.count(Mt)>1?reactExports.Children.only(null):reactExports.isValidElement(Mt)?Mt.props.children:null:Ut);return jsxRuntimeExports.jsx(SlotClone$4,{..._,ref:i,children:reactExports.isValidElement(Mt)?reactExports.cloneElement(Mt,void 0,Ft):null})}return jsxRuntimeExports.jsx(SlotClone$4,{..._,ref:i,children:s})});Slot$4.displayName="Slot";var SlotClone$4=reactExports.forwardRef((o,i)=>{const{children:s,..._}=o;if(reactExports.isValidElement(s)){const _e=getElementRef$5(s);return reactExports.cloneElement(s,{...mergeProps$4(_,s.props),ref:i?composeRefs$4(i,_e):_e})}return reactExports.Children.count(s)>1?reactExports.Children.only(null):null});SlotClone$4.displayName="SlotClone";var Slottable$4=({children:o})=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:o});function isSlottable$4(o){return reactExports.isValidElement(o)&&o.type===Slottable$4}function mergeProps$4(o,i){const s={...i};for(const _ in i){const _e=o[_],ct=i[_];/^on[A-Z]/.test(_)?_e&&ct?s[_]=(...Mt)=>{ct(...Mt),_e(...Mt)}:_e&&(s[_]=_e):_==="style"?s[_]={..._e,...ct}:_==="className"&&(s[_]=[_e,ct].filter(Boolean).join(" "))}return{...o,...s}}function getElementRef$5(o){var _,_e;let i=(_=Object.getOwnPropertyDescriptor(o.props,"ref"))==null?void 0:_.get,s=i&&"isReactWarning"in i&&i.isReactWarning;return s?o.ref:(i=(_e=Object.getOwnPropertyDescriptor(o,"ref"))==null?void 0:_e.get,s=i&&"isReactWarning"in i&&i.isReactWarning,s?o.props.ref:o.props.ref||o.ref)}var NODES$4=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Primitive$4=NODES$4.reduce((o,i)=>{const s=reactExports.forwardRef((_,_e)=>{const{asChild:ct,...Mt}=_,Ft=ct?Slot$4:i;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),jsxRuntimeExports.jsx(Ft,{...Mt,ref:_e})});return s.displayName=`Primitive.${i}`,{...o,[i]:s}},{}),NAME$1="Arrow",Arrow$1=reactExports.forwardRef((o,i)=>{const{children:s,width:_=10,height:_e=5,...ct}=o;return jsxRuntimeExports.jsx(Primitive$4.svg,{...ct,ref:i,width:_,height:_e,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:o.asChild?s:jsxRuntimeExports.jsx("polygon",{points:"0,0 30,0 15,10"})})});Arrow$1.displayName=NAME$1;var Root$1=Arrow$1;function setRef$3(o,i){typeof o=="function"?o(i):o!=null&&(o.current=i)}function composeRefs$3(...o){return i=>o.forEach(s=>setRef$3(s,i))}function useComposedRefs$1(...o){return reactExports.useCallback(composeRefs$3(...o),o)}function createContextScope$1(o,i=[]){let s=[];const _=()=>{const _e=s.map(ct=>reactExports.createContext(ct));return function(ct){const Mt=(ct==null?void 0:ct[o])||_e;return reactExports.useMemo(()=>({[`__scope${o}`]:{...ct,[o]:Mt}}),[ct,Mt])}};return _.scopeName=o,[function(_e,ct){const Mt=reactExports.createContext(ct),Ft=s.length;function Ut(Xt){const{scope:Kt,children:nr,...rr}=Xt,or=(Kt==null?void 0:Kt[o][Ft])||Mt,hr=reactExports.useMemo(()=>rr,Object.values(rr));return jsxRuntimeExports.jsx(or.Provider,{value:hr,children:nr})}return s=[...s,ct],Ut.displayName=_e+"Provider",[Ut,function(Xt,Kt){const nr=(Kt==null?void 0:Kt[o][Ft])||Mt,rr=reactExports.useContext(nr);if(rr)return rr;if(ct!==void 0)return ct;throw new Error(`\`${Xt}\` must be used within \`${_e}\``)}]},composeContextScopes$1(_,...i)]}function composeContextScopes$1(...o){const i=o[0];if(o.length===1)return i;const s=()=>{const _=o.map(_e=>({useScope:_e(),scopeName:_e.scopeName}));return function(_e){const ct=_.reduce((Mt,{useScope:Ft,scopeName:Ut})=>({...Mt,...Ft(_e)[`__scope${Ut}`]}),{});return reactExports.useMemo(()=>({[`__scope${i.scopeName}`]:ct}),[ct])}};return s.scopeName=i.scopeName,s}var Slot$3=reactExports.forwardRef((o,i)=>{const{children:s,..._}=o,_e=reactExports.Children.toArray(s),ct=_e.find(isSlottable$3);if(ct){const Mt=ct.props.children,Ft=_e.map(Ut=>Ut===ct?reactExports.Children.count(Mt)>1?reactExports.Children.only(null):reactExports.isValidElement(Mt)?Mt.props.children:null:Ut);return jsxRuntimeExports.jsx(SlotClone$3,{..._,ref:i,children:reactExports.isValidElement(Mt)?reactExports.cloneElement(Mt,void 0,Ft):null})}return jsxRuntimeExports.jsx(SlotClone$3,{..._,ref:i,children:s})});Slot$3.displayName="Slot";var SlotClone$3=reactExports.forwardRef((o,i)=>{const{children:s,..._}=o;if(reactExports.isValidElement(s)){const _e=getElementRef$4(s);return reactExports.cloneElement(s,{...mergeProps$3(_,s.props),ref:i?composeRefs$3(i,_e):_e})}return reactExports.Children.count(s)>1?reactExports.Children.only(null):null});SlotClone$3.displayName="SlotClone";var Slottable$3=({children:o})=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:o});function isSlottable$3(o){return reactExports.isValidElement(o)&&o.type===Slottable$3}function mergeProps$3(o,i){const s={...i};for(const _ in i){const _e=o[_],ct=i[_];/^on[A-Z]/.test(_)?_e&&ct?s[_]=(...Mt)=>{ct(...Mt),_e(...Mt)}:_e&&(s[_]=_e):_==="style"?s[_]={..._e,...ct}:_==="className"&&(s[_]=[_e,ct].filter(Boolean).join(" "))}return{...o,...s}}function getElementRef$4(o){var _,_e;let i=(_=Object.getOwnPropertyDescriptor(o.props,"ref"))==null?void 0:_.get,s=i&&"isReactWarning"in i&&i.isReactWarning;return s?o.ref:(i=(_e=Object.getOwnPropertyDescriptor(o,"ref"))==null?void 0:_e.get,s=i&&"isReactWarning"in i&&i.isReactWarning,s?o.props.ref:o.props.ref||o.ref)}var NODES$3=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Primitive$3=NODES$3.reduce((o,i)=>{const s=reactExports.forwardRef((_,_e)=>{const{asChild:ct,...Mt}=_,Ft=ct?Slot$3:i;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),jsxRuntimeExports.jsx(Ft,{...Mt,ref:_e})});return s.displayName=`Primitive.${i}`,{...o,[i]:s}},{});function useCallbackRef$1(o){const i=reactExports.useRef(o);return reactExports.useEffect(()=>{i.current=o}),reactExports.useMemo(()=>(...s)=>{var _;return(_=i.current)==null?void 0:_.call(i,...s)},[])}var useLayoutEffect2$2=globalThis!=null&&globalThis.document?reactExports.useLayoutEffect:()=>{};function useSize(o){const[i,s]=reactExports.useState(void 0);return useLayoutEffect2$2(()=>{if(o){s({width:o.offsetWidth,height:o.offsetHeight});const _=new ResizeObserver(_e=>{if(!Array.isArray(_e)||!_e.length)return;const ct=_e[0];let Mt,Ft;if("borderBoxSize"in ct){const Ut=ct.borderBoxSize,Xt=Array.isArray(Ut)?Ut[0]:Ut;Mt=Xt.inlineSize,Ft=Xt.blockSize}else Mt=o.offsetWidth,Ft=o.offsetHeight;s({width:Mt,height:Ft})});return _.observe(o,{box:"border-box"}),()=>_.unobserve(o)}s(void 0)},[o]),i}var POPPER_NAME="Popper",[createPopperContext,createPopperScope]=createContextScope$1(POPPER_NAME),[PopperProvider,usePopperContext]=createPopperContext(POPPER_NAME),ANCHOR_NAME="PopperAnchor",PopperAnchor=reactExports.forwardRef((o,i)=>{const{__scopePopper:s,virtualRef:_,..._e}=o,ct=usePopperContext(ANCHOR_NAME,s),Mt=reactExports.useRef(null),Ft=useComposedRefs$1(i,Mt);return reactExports.useEffect(()=>{ct.onAnchorChange((_==null?void 0:_.current)||Mt.current)}),_?null:jsxRuntimeExports.jsx(Primitive$3.div,{..._e,ref:Ft})});PopperAnchor.displayName=ANCHOR_NAME;var CONTENT_NAME$2="PopperContent",[PopperContentProvider,useContentContext]=createPopperContext(CONTENT_NAME$2),PopperContent=reactExports.forwardRef((o,i)=>{var Yp,_m,Tm,Im,Mm,Bm;const{__scopePopper:s,side:_="bottom",sideOffset:_e=0,align:ct="center",alignOffset:Mt=0,arrowPadding:Ft=0,avoidCollisions:Ut=!0,collisionBoundary:Xt=[],collisionPadding:Kt=0,sticky:nr="partial",hideWhenDetached:rr=!1,updatePositionStrategy:or="optimized",onPlaced:hr,...fr}=o,yr=usePopperContext(CONTENT_NAME$2,s),[Lr,Br]=reactExports.useState(null),Vr=useComposedRefs$1(i,zm=>Br(zm)),[Wr,ro]=reactExports.useState(null),no=useSize(Wr),so=(no==null?void 0:no.width)??0,ko=(no==null?void 0:no.height)??0,To=_+(ct!=="center"?"-"+ct:""),oo=typeof Kt=="number"?Kt:{top:0,right:0,bottom:0,left:0,...Kt},No=Array.isArray(Xt)?Xt:[Xt],As=No.length>0,Ks={padding:oo,boundary:No.filter(isNotNull),altBoundary:As},{refs:vu,floatingStyles:Fu,placement:Ap,isPositioned:Pp,middlewareData:Lo}=useFloating({strategy:"fixed",placement:To,whileElementsMounted:(...zm)=>autoUpdate(...zm,{animationFrame:or==="always"}),elements:{reference:yr.anchor},middleware:[offset({mainAxis:_e+ko,alignmentAxis:Mt}),Ut&&shift({mainAxis:!0,crossAxis:!1,limiter:nr==="partial"?limitShift():void 0,...Ks}),Ut&&flip({...Ks}),size({...Ks,apply:({elements:zm,rects:Am,availableWidth:Om,availableHeight:Hm})=>{const{width:u1,height:a1}=Am.reference,Gm=zm.floating.style;Gm.setProperty("--radix-popper-available-width",`${Om}px`),Gm.setProperty("--radix-popper-available-height",`${Hm}px`),Gm.setProperty("--radix-popper-anchor-width",`${u1}px`),Gm.setProperty("--radix-popper-anchor-height",`${a1}px`)}}),Wr&&arrow({element:Wr,padding:Ft}),transformOrigin({arrowWidth:so,arrowHeight:ko}),rr&&hide({strategy:"referenceHidden",...Ks})]}),[Au,Mp]=getSideAndAlignFromPlacement(Ap),Lp=useCallbackRef$1(hr);useLayoutEffect2$2(()=>{Pp&&(Lp==null||Lp())},[Pp,Lp]);const Op=(Yp=Lo.arrow)==null?void 0:Yp.x,Fp=(_m=Lo.arrow)==null?void 0:_m.y,wm=((Tm=Lo.arrow)==null?void 0:Tm.centerOffset)!==0,[Bp,Em]=reactExports.useState();return useLayoutEffect2$2(()=>{Lr&&Em(window.getComputedStyle(Lr).zIndex)},[Lr]),jsxRuntimeExports.jsx("div",{ref:vu.setFloating,"data-radix-popper-content-wrapper":"",style:{...Fu,transform:Pp?Fu.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Bp,"--radix-popper-transform-origin":[(Im=Lo.transformOrigin)==null?void 0:Im.x,(Mm=Lo.transformOrigin)==null?void 0:Mm.y].join(" "),...((Bm=Lo.hide)==null?void 0:Bm.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:o.dir,children:jsxRuntimeExports.jsx(PopperContentProvider,{scope:s,placedSide:Au,onArrowChange:ro,arrowX:Op,arrowY:Fp,shouldHideArrow:wm,children:jsxRuntimeExports.jsx(Primitive$3.div,{"data-side":Au,"data-align":Mp,...fr,ref:Vr,style:{...fr.style,animation:Pp?void 0:"none"}})})})});PopperContent.displayName=CONTENT_NAME$2;var ARROW_NAME$2="PopperArrow",OPPOSITE_SIDE={top:"bottom",right:"left",bottom:"top",left:"right"},PopperArrow=reactExports.forwardRef(function(o,i){const{__scopePopper:s,..._}=o,_e=useContentContext(ARROW_NAME$2,s),ct=OPPOSITE_SIDE[_e.placedSide];return jsxRuntimeExports.jsx("span",{ref:_e.onArrowChange,style:{position:"absolute",left:_e.arrowX,top:_e.arrowY,[ct]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[_e.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[_e.placedSide],visibility:_e.shouldHideArrow?"hidden":void 0},children:jsxRuntimeExports.jsx(Root$1,{..._,ref:i,style:{..._.style,display:"block"}})})});function isNotNull(o){return o!==null}PopperArrow.displayName=ARROW_NAME$2;var transformOrigin=o=>({name:"transformOrigin",options:o,fn(i){var fr,yr,Lr;const{placement:s,rects:_,middlewareData:_e}=i,ct=((fr=_e.arrow)==null?void 0:fr.centerOffset)!==0,Mt=ct?0:o.arrowWidth,Ft=ct?0:o.arrowHeight,[Ut,Xt]=getSideAndAlignFromPlacement(s),Kt={start:"0%",center:"50%",end:"100%"}[Xt],nr=(((yr=_e.arrow)==null?void 0:yr.x)??0)+Mt/2,rr=(((Lr=_e.arrow)==null?void 0:Lr.y)??0)+Ft/2;let or="",hr="";return Ut==="bottom"?(or=ct?Kt:`${nr}px`,hr=-Ft+"px"):Ut==="top"?(or=ct?Kt:`${nr}px`,hr=`${_.floating.height+Ft}px`):Ut==="right"?(or=-Ft+"px",hr=ct?Kt:`${rr}px`):Ut==="left"&&(or=`${_.floating.width+Ft}px`,hr=ct?Kt:`${rr}px`),{data:{x:or,y:hr}}}});function getSideAndAlignFromPlacement(o){const[i,s="center"]=o.split("-");return[i,s]}var Anchor=PopperAnchor,Content=PopperContent,Arrow=PopperArrow;function setRef$2(o,i){typeof o=="function"?o(i):o!=null&&(o.current=i)}function composeRefs$2(...o){return i=>o.forEach(s=>setRef$2(s,i))}var Slot$2=reactExports.forwardRef((o,i)=>{const{children:s,..._}=o,_e=reactExports.Children.toArray(s),ct=_e.find(isSlottable$2);if(ct){const Mt=ct.props.children,Ft=_e.map(Ut=>Ut===ct?reactExports.Children.count(Mt)>1?reactExports.Children.only(null):reactExports.isValidElement(Mt)?Mt.props.children:null:Ut);return jsxRuntimeExports.jsx(SlotClone$2,{..._,ref:i,children:reactExports.isValidElement(Mt)?reactExports.cloneElement(Mt,void 0,Ft):null})}return jsxRuntimeExports.jsx(SlotClone$2,{..._,ref:i,children:s})});Slot$2.displayName="Slot";var SlotClone$2=reactExports.forwardRef((o,i)=>{const{children:s,..._}=o;if(reactExports.isValidElement(s)){const _e=getElementRef$3(s);return reactExports.cloneElement(s,{...mergeProps$2(_,s.props),ref:i?composeRefs$2(i,_e):_e})}return reactExports.Children.count(s)>1?reactExports.Children.only(null):null});SlotClone$2.displayName="SlotClone";var Slottable$2=({children:o})=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:o});function isSlottable$2(o){return reactExports.isValidElement(o)&&o.type===Slottable$2}function mergeProps$2(o,i){const s={...i};for(const _ in i){const _e=o[_],ct=i[_];/^on[A-Z]/.test(_)?_e&&ct?s[_]=(...Mt)=>{ct(...Mt),_e(...Mt)}:_e&&(s[_]=_e):_==="style"?s[_]={..._e,...ct}:_==="className"&&(s[_]=[_e,ct].filter(Boolean).join(" "))}return{...o,...s}}function getElementRef$3(o){var _,_e;let i=(_=Object.getOwnPropertyDescriptor(o.props,"ref"))==null?void 0:_.get,s=i&&"isReactWarning"in i&&i.isReactWarning;return s?o.ref:(i=(_e=Object.getOwnPropertyDescriptor(o,"ref"))==null?void 0:_e.get,s=i&&"isReactWarning"in i&&i.isReactWarning,s?o.props.ref:o.props.ref||o.ref)}var NODES$2=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Primitive$2=NODES$2.reduce((o,i)=>{const s=reactExports.forwardRef((_,_e)=>{const{asChild:ct,...Mt}=_,Ft=ct?Slot$2:i;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),jsxRuntimeExports.jsx(Ft,{...Mt,ref:_e})});return s.displayName=`Primitive.${i}`,{...o,[i]:s}},{}),useLayoutEffect2$1=globalThis!=null&&globalThis.document?reactExports.useLayoutEffect:()=>{},PORTAL_NAME$2="Portal",Portal$1=reactExports.forwardRef((o,i)=>{var Ft;const{container:s,..._}=o,[_e,ct]=reactExports.useState(!1);useLayoutEffect2$1(()=>ct(!0),[]);const Mt=s||_e&&((Ft=globalThis==null?void 0:globalThis.document)==null?void 0:Ft.body);return Mt?ReactDOM__default.createPortal(jsxRuntimeExports.jsx(Primitive$2.div,{..._,ref:i}),Mt):null});function usePrevious(o){const i=reactExports.useRef({value:o,previous:o});return reactExports.useMemo(()=>(i.current.value!==o&&(i.current.previous=i.current.value,i.current.value=o),i.current.previous),[o])}function setRef$1(o,i){typeof o=="function"?o(i):o!=null&&(o.current=i)}function composeRefs$1(...o){return i=>o.forEach(s=>setRef$1(s,i))}Portal$1.displayName=PORTAL_NAME$2;var Slot$1=reactExports.forwardRef((o,i)=>{const{children:s,..._}=o,_e=reactExports.Children.toArray(s),ct=_e.find(isSlottable$1);if(ct){const Mt=ct.props.children,Ft=_e.map(Ut=>Ut===ct?reactExports.Children.count(Mt)>1?reactExports.Children.only(null):reactExports.isValidElement(Mt)?Mt.props.children:null:Ut);return jsxRuntimeExports.jsx(SlotClone$1,{..._,ref:i,children:reactExports.isValidElement(Mt)?reactExports.cloneElement(Mt,void 0,Ft):null})}return jsxRuntimeExports.jsx(SlotClone$1,{..._,ref:i,children:s})});Slot$1.displayName="Slot";var SlotClone$1=reactExports.forwardRef((o,i)=>{const{children:s,..._}=o;if(reactExports.isValidElement(s)){const _e=getElementRef$2(s);return reactExports.cloneElement(s,{...mergeProps$1(_,s.props),ref:i?composeRefs$1(i,_e):_e})}return reactExports.Children.count(s)>1?reactExports.Children.only(null):null});SlotClone$1.displayName="SlotClone";var Slottable$1=({children:o})=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:o});function isSlottable$1(o){return reactExports.isValidElement(o)&&o.type===Slottable$1}function mergeProps$1(o,i){const s={...i};for(const _ in i){const _e=o[_],ct=i[_];/^on[A-Z]/.test(_)?_e&&ct?s[_]=(...Mt)=>{ct(...Mt),_e(...Mt)}:_e&&(s[_]=_e):_==="style"?s[_]={..._e,...ct}:_==="className"&&(s[_]=[_e,ct].filter(Boolean).join(" "))}return{...o,...s}}function getElementRef$2(o){var _,_e;let i=(_=Object.getOwnPropertyDescriptor(o.props,"ref"))==null?void 0:_.get,s=i&&"isReactWarning"in i&&i.isReactWarning;return s?o.ref:(i=(_e=Object.getOwnPropertyDescriptor(o,"ref"))==null?void 0:_e.get,s=i&&"isReactWarning"in i&&i.isReactWarning,s?o.props.ref:o.props.ref||o.ref)}var NODES$1=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Primitive$1=NODES$1.reduce((o,i)=>{const s=reactExports.forwardRef((_,_e)=>{const{asChild:ct,...Mt}=_,Ft=ct?Slot$1:i;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),jsxRuntimeExports.jsx(Ft,{...Mt,ref:_e})});return s.displayName=`Primitive.${i}`,{...o,[i]:s}},{}),NAME="VisuallyHidden",VisuallyHidden=reactExports.forwardRef((o,i)=>jsxRuntimeExports.jsx(Primitive$1.span,{...o,ref:i,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...o.style}}));VisuallyHidden.displayName=NAME;var Root=VisuallyHidden,effectCar=createSidecarMedium(),nothing=function(){},RemoveScroll=reactExports.forwardRef(function(o,i){var s=reactExports.useRef(null),_=reactExports.useState({onScrollCapture:nothing,onWheelCapture:nothing,onTouchMoveCapture:nothing}),_e=_[0],ct=_[1],Mt=o.forwardProps,Ft=o.children,Ut=o.className,Xt=o.removeScrollBar,Kt=o.enabled,nr=o.shards,rr=o.sideCar,or=o.noIsolation,hr=o.inert,fr=o.allowPinchZoom,yr=o.as,Lr=yr===void 0?"div":yr,Br=o.gapMode,Vr=__rest$2(o,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),Wr=rr,ro=useMergeRefs([s,i]),no=__assign(__assign({},Vr),_e);return reactExports.createElement(reactExports.Fragment,null,Kt&&reactExports.createElement(Wr,{sideCar:effectCar,removeScrollBar:Xt,shards:nr,noIsolation:or,inert:hr,setCallbacks:ct,allowPinchZoom:!!fr,lockRef:s,gapMode:Br}),Mt?reactExports.cloneElement(reactExports.Children.only(Ft),__assign(__assign({},no),{ref:ro})):reactExports.createElement(Lr,__assign({},no,{className:Ut,ref:ro}),Ft))});RemoveScroll.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},RemoveScroll.classNames={fullWidth:fullWidthClassName,zeroRight:zeroRightClassName};var passiveSupported=!1;if(typeof window<"u")try{var options$1=Object.defineProperty({},"passive",{get:function(){return passiveSupported=!0,!0}});window.addEventListener("test",options$1,options$1),window.removeEventListener("test",options$1,options$1)}catch{passiveSupported=!1}var nonPassive=!!passiveSupported&&{passive:!1},alwaysContainsScroll=function(o){return o.tagName==="TEXTAREA"},elementCanBeScrolled=function(o,i){if(!(o instanceof Element))return!1;var s=window.getComputedStyle(o);return s[i]!=="hidden"&&!(s.overflowY===s.overflowX&&!alwaysContainsScroll(o)&&s[i]==="visible")},elementCouldBeVScrolled=function(o){return elementCanBeScrolled(o,"overflowY")},elementCouldBeHScrolled=function(o){return elementCanBeScrolled(o,"overflowX")},locationCouldBeScrolled=function(o,i){var s=i.ownerDocument,_=i;do{if(typeof ShadowRoot<"u"&&_ instanceof ShadowRoot&&(_=_.host),elementCouldBeScrolled(o,_)){var _e=getScrollVariables(o,_);if(_e[1]>_e[2])return!0}_=_.parentNode}while(_&&_!==s.body);return!1},getVScrollVariables=function(o){return[o.scrollTop,o.scrollHeight,o.clientHeight]},getHScrollVariables=function(o){return[o.scrollLeft,o.scrollWidth,o.clientWidth]},elementCouldBeScrolled=function(o,i){return o==="v"?elementCouldBeVScrolled(i):elementCouldBeHScrolled(i)},getScrollVariables=function(o,i){return o==="v"?getVScrollVariables(i):getHScrollVariables(i)},getDirectionFactor=function(o,i){return o==="h"&&i==="rtl"?-1:1},handleScroll=function(o,i,s,_,_e){var ct=getDirectionFactor(o,window.getComputedStyle(i).direction),Mt=ct*_,Ft=s.target,Ut=i.contains(Ft),Xt=!1,Kt=Mt>0,nr=0,rr=0;do{var or=getScrollVariables(o,Ft),hr=or[0],fr=or[1]-or[2]-ct*hr;(hr||fr)&&elementCouldBeScrolled(o,Ft)&&(nr+=fr,rr+=hr),Ft=Ft instanceof ShadowRoot?Ft.host:Ft.parentNode}while(!Ut&&Ft!==document.body||Ut&&(i.contains(Ft)||i===Ft));return Kt&&(Math.abs(nr)<1||!_e)?Xt=!0:Kt||!(Math.abs(rr)<1)&&_e||(Xt=!0),Xt},getTouchXY=function(o){return"changedTouches"in o?[o.changedTouches[0].clientX,o.changedTouches[0].clientY]:[0,0]},getDeltaXY=function(o){return[o.deltaX,o.deltaY]},extractRef=function(o){return o&&"current"in o?o.current:o},deltaCompare=function(o,i){return o[0]===i[0]&&o[1]===i[1]},generateStyle=function(o){return`
  .block-interactivity-`.concat(o,` {pointer-events: none;}
  .allow-interactivity-`).concat(o,` {pointer-events: all;}
`)},idCounter=0,lockStack=[];function RemoveScrollSideCar(o){var i=reactExports.useRef([]),s=reactExports.useRef([0,0]),_=reactExports.useRef(),_e=reactExports.useState(idCounter++)[0],ct=reactExports.useState(styleSingleton)[0],Mt=reactExports.useRef(o);reactExports.useEffect(function(){Mt.current=o},[o]),reactExports.useEffect(function(){if(o.inert){document.body.classList.add("block-interactivity-".concat(_e));var fr=__spreadArray$1([o.lockRef.current],(o.shards||[]).map(extractRef)).filter(Boolean);return fr.forEach(function(yr){return yr.classList.add("allow-interactivity-".concat(_e))}),function(){document.body.classList.remove("block-interactivity-".concat(_e)),fr.forEach(function(yr){return yr.classList.remove("allow-interactivity-".concat(_e))})}}},[o.inert,o.lockRef.current,o.shards]);var Ft=reactExports.useCallback(function(fr,yr){if("touches"in fr&&fr.touches.length===2||fr.type==="wheel"&&fr.ctrlKey)return!Mt.current.allowPinchZoom;var Lr,Br=getTouchXY(fr),Vr=s.current,Wr="deltaX"in fr?fr.deltaX:Vr[0]-Br[0],ro="deltaY"in fr?fr.deltaY:Vr[1]-Br[1],no=fr.target,so=Math.abs(Wr)>Math.abs(ro)?"h":"v";if("touches"in fr&&so==="h"&&no.type==="range")return!1;var ko=locationCouldBeScrolled(so,no);if(!ko)return!0;if(ko?Lr=so:(Lr=so==="v"?"h":"v",ko=locationCouldBeScrolled(so,no)),!ko)return!1;if(!_.current&&"changedTouches"in fr&&(Wr||ro)&&(_.current=Lr),!Lr)return!0;var To=_.current||Lr;return handleScroll(To,yr,fr,To==="h"?Wr:ro,!0)},[]),Ut=reactExports.useCallback(function(fr){var yr=fr;if(lockStack.length&&lockStack[lockStack.length-1]===ct){var Lr="deltaY"in yr?getDeltaXY(yr):getTouchXY(yr),Br=i.current.filter(function(Wr){return Wr.name===yr.type&&(Wr.target===yr.target||yr.target===Wr.shadowParent)&&deltaCompare(Wr.delta,Lr)})[0];if(Br&&Br.should)yr.cancelable&&yr.preventDefault();else if(!Br){var Vr=(Mt.current.shards||[]).map(extractRef).filter(Boolean).filter(function(Wr){return Wr.contains(yr.target)});(Vr.length>0?Ft(yr,Vr[0]):!Mt.current.noIsolation)&&yr.cancelable&&yr.preventDefault()}}},[]),Xt=reactExports.useCallback(function(fr,yr,Lr,Br){var Vr={name:fr,delta:yr,target:Lr,should:Br,shadowParent:getOutermostShadowParent(Lr)};i.current.push(Vr),setTimeout(function(){i.current=i.current.filter(function(Wr){return Wr!==Vr})},1)},[]),Kt=reactExports.useCallback(function(fr){s.current=getTouchXY(fr),_.current=void 0},[]),nr=reactExports.useCallback(function(fr){Xt(fr.type,getDeltaXY(fr),fr.target,Ft(fr,o.lockRef.current))},[]),rr=reactExports.useCallback(function(fr){Xt(fr.type,getTouchXY(fr),fr.target,Ft(fr,o.lockRef.current))},[]);reactExports.useEffect(function(){return lockStack.push(ct),o.setCallbacks({onScrollCapture:nr,onWheelCapture:nr,onTouchMoveCapture:rr}),document.addEventListener("wheel",Ut,nonPassive),document.addEventListener("touchmove",Ut,nonPassive),document.addEventListener("touchstart",Kt,nonPassive),function(){lockStack=lockStack.filter(function(fr){return fr!==ct}),document.removeEventListener("wheel",Ut,nonPassive),document.removeEventListener("touchmove",Ut,nonPassive),document.removeEventListener("touchstart",Kt,nonPassive)}},[]);var or=o.removeScrollBar,hr=o.inert;return reactExports.createElement(reactExports.Fragment,null,hr?reactExports.createElement(ct,{styles:generateStyle(_e)}):null,or?reactExports.createElement(RemoveScrollBar,{gapMode:o.gapMode}):null)}function getOutermostShadowParent(o){for(var i=null;o!==null;)o instanceof ShadowRoot&&(i=o.host,o=o.host),o=o.parentNode;return i}var SideCar=exportSidecar(effectCar,RemoveScrollSideCar),ReactRemoveScroll=reactExports.forwardRef(function(o,i){return reactExports.createElement(RemoveScroll,__assign({},o,{ref:i,sideCar:SideCar}))});ReactRemoveScroll.classNames=RemoveScroll.classNames;var OPEN_KEYS=[" ","Enter","ArrowUp","ArrowDown"],SELECTION_KEYS=[" ","Enter"],SELECT_NAME="Select",[Collection,useCollection,createCollectionScope]=createCollection(SELECT_NAME),[createSelectContext,createSelectScope]=createContextScope$2(SELECT_NAME,[createCollectionScope,createPopperScope]),usePopperScope$1=createPopperScope(),[SelectProvider,useSelectContext]=createSelectContext(SELECT_NAME),[SelectNativeOptionsProvider,useSelectNativeOptionsContext]=createSelectContext(SELECT_NAME),TRIGGER_NAME$1="SelectTrigger",SelectTrigger$1=reactExports.forwardRef((o,i)=>{const{__scopeSelect:s,disabled:_=!1,..._e}=o,ct=usePopperScope$1(s),Mt=useSelectContext(TRIGGER_NAME$1,s),Ft=Mt.disabled||_,Ut=useComposedRefs$3(i,Mt.onTriggerChange),Xt=useCollection(s),Kt=reactExports.useRef("touch"),[nr,rr,or]=useTypeaheadSearch(fr=>{const yr=Xt().filter(Vr=>!Vr.disabled),Lr=yr.find(Vr=>Vr.value===Mt.value),Br=findNextItem(yr,fr,Lr);Br!==void 0&&Mt.onValueChange(Br.value)}),hr=fr=>{Ft||(Mt.onOpenChange(!0),or()),fr&&(Mt.triggerPointerDownPosRef.current={x:Math.round(fr.pageX),y:Math.round(fr.pageY)})};return jsxRuntimeExports.jsx(Anchor,{asChild:!0,...ct,children:jsxRuntimeExports.jsx(Primitive$5.button,{type:"button",role:"combobox","aria-controls":Mt.contentId,"aria-expanded":Mt.open,"aria-required":Mt.required,"aria-autocomplete":"none",dir:Mt.dir,"data-state":Mt.open?"open":"closed",disabled:Ft,"data-disabled":Ft?"":void 0,"data-placeholder":shouldShowPlaceholder(Mt.value)?"":void 0,..._e,ref:Ut,onClick:composeEventHandlers$2(_e.onClick,fr=>{fr.currentTarget.focus(),Kt.current!=="mouse"&&hr(fr)}),onPointerDown:composeEventHandlers$2(_e.onPointerDown,fr=>{Kt.current=fr.pointerType;const yr=fr.target;yr.hasPointerCapture(fr.pointerId)&&yr.releasePointerCapture(fr.pointerId),fr.button===0&&fr.ctrlKey===!1&&fr.pointerType==="mouse"&&(hr(fr),fr.preventDefault())}),onKeyDown:composeEventHandlers$2(_e.onKeyDown,fr=>{const yr=nr.current!=="";fr.ctrlKey||fr.altKey||fr.metaKey||fr.key.length!==1||rr(fr.key),yr&&fr.key===" "||OPEN_KEYS.includes(fr.key)&&(hr(),fr.preventDefault())})})})});SelectTrigger$1.displayName=TRIGGER_NAME$1;var VALUE_NAME="SelectValue",SelectValue=reactExports.forwardRef((o,i)=>{const{__scopeSelect:s,className:_,style:_e,children:ct,placeholder:Mt="",...Ft}=o,Ut=useSelectContext(VALUE_NAME,s),{onValueNodeHasChildrenChange:Xt}=Ut,Kt=ct!==void 0,nr=useComposedRefs$3(i,Ut.onValueNodeChange);return useLayoutEffect2$3(()=>{Xt(Kt)},[Xt,Kt]),jsxRuntimeExports.jsx(Primitive$5.span,{...Ft,ref:nr,style:{pointerEvents:"none"},children:shouldShowPlaceholder(Ut.value)?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:Mt}):ct})});SelectValue.displayName=VALUE_NAME;var ICON_NAME="SelectIcon",SelectIcon=reactExports.forwardRef((o,i)=>{const{__scopeSelect:s,children:_,..._e}=o;return jsxRuntimeExports.jsx(Primitive$5.span,{"aria-hidden":!0,..._e,ref:i,children:_||"▼"})});SelectIcon.displayName=ICON_NAME;var PORTAL_NAME$1="SelectPortal",SelectPortal=o=>jsxRuntimeExports.jsx(Portal$1,{asChild:!0,...o});SelectPortal.displayName=PORTAL_NAME$1;var CONTENT_NAME$1="SelectContent",SelectContent$1=reactExports.forwardRef((o,i)=>{const s=useSelectContext(CONTENT_NAME$1,o.__scopeSelect),[_,_e]=reactExports.useState();if(useLayoutEffect2$3(()=>{_e(new DocumentFragment)},[]),!s.open){const ct=_;return ct?reactDomExports.createPortal(jsxRuntimeExports.jsx(SelectContentProvider,{scope:o.__scopeSelect,children:jsxRuntimeExports.jsx(Collection.Slot,{scope:o.__scopeSelect,children:jsxRuntimeExports.jsx("div",{children:o.children})})}),ct):null}return jsxRuntimeExports.jsx(SelectContentImpl,{...o,ref:i})});SelectContent$1.displayName=CONTENT_NAME$1;var CONTENT_MARGIN=10,[SelectContentProvider,useSelectContentContext]=createSelectContext(CONTENT_NAME$1),CONTENT_IMPL_NAME="SelectContentImpl",SelectContentImpl=reactExports.forwardRef((o,i)=>{const{__scopeSelect:s,position:_="item-aligned",onCloseAutoFocus:_e,onEscapeKeyDown:ct,onPointerDownOutside:Mt,side:Ft,sideOffset:Ut,align:Xt,alignOffset:Kt,arrowPadding:nr,collisionBoundary:rr,collisionPadding:or,sticky:hr,hideWhenDetached:fr,avoidCollisions:yr,...Lr}=o,Br=useSelectContext(CONTENT_NAME$1,s),[Vr,Wr]=reactExports.useState(null),[ro,no]=reactExports.useState(null),so=useComposedRefs$3(i,Yp=>Wr(Yp)),[ko,To]=reactExports.useState(null),[oo,No]=reactExports.useState(null),As=useCollection(s),[Ks,vu]=reactExports.useState(!1),Fu=reactExports.useRef(!1);reactExports.useEffect(()=>{if(Vr)return hideOthers(Vr)},[Vr]),useFocusGuards();const Ap=reactExports.useCallback(Yp=>{const[_m,...Tm]=As().map(Bm=>Bm.ref.current),[Im]=Tm.slice(-1),Mm=document.activeElement;for(const Bm of Yp)if(Bm===Mm||(Bm==null||Bm.scrollIntoView({block:"nearest"}),Bm===_m&&ro&&(ro.scrollTop=0),Bm===Im&&ro&&(ro.scrollTop=ro.scrollHeight),Bm==null||Bm.focus(),document.activeElement!==Mm))return},[As,ro]),Pp=reactExports.useCallback(()=>Ap([ko,Vr]),[Ap,ko,Vr]);reactExports.useEffect(()=>{Ks&&Pp()},[Ks,Pp]);const{onOpenChange:Lo,triggerPointerDownPosRef:Au}=Br;reactExports.useEffect(()=>{if(Vr){let Yp={x:0,y:0};const _m=Im=>{var Mm,Bm;Yp={x:Math.abs(Math.round(Im.pageX)-(((Mm=Au.current)==null?void 0:Mm.x)??0)),y:Math.abs(Math.round(Im.pageY)-(((Bm=Au.current)==null?void 0:Bm.y)??0))}},Tm=Im=>{Yp.x<=10&&Yp.y<=10?Im.preventDefault():Vr.contains(Im.target)||Lo(!1),document.removeEventListener("pointermove",_m),Au.current=null};return Au.current!==null&&(document.addEventListener("pointermove",_m),document.addEventListener("pointerup",Tm,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",_m),document.removeEventListener("pointerup",Tm,{capture:!0})}}},[Vr,Lo,Au]),reactExports.useEffect(()=>{const Yp=()=>Lo(!1);return window.addEventListener("blur",Yp),window.addEventListener("resize",Yp),()=>{window.removeEventListener("blur",Yp),window.removeEventListener("resize",Yp)}},[Lo]);const[Mp,Lp]=useTypeaheadSearch(Yp=>{const _m=As().filter(Mm=>!Mm.disabled),Tm=_m.find(Mm=>Mm.ref.current===document.activeElement),Im=findNextItem(_m,Yp,Tm);Im&&setTimeout(()=>Im.ref.current.focus())}),Op=reactExports.useCallback((Yp,_m,Tm)=>{const Im=!Fu.current&&!Tm;(Br.value!==void 0&&Br.value===_m||Im)&&(To(Yp),Im&&(Fu.current=!0))},[Br.value]),Fp=reactExports.useCallback(()=>Vr==null?void 0:Vr.focus(),[Vr]),wm=reactExports.useCallback((Yp,_m,Tm)=>{const Im=!Fu.current&&!Tm;(Br.value!==void 0&&Br.value===_m||Im)&&No(Yp)},[Br.value]),Bp=_==="popper"?SelectPopperPosition:SelectItemAlignedPosition,Em=Bp===SelectPopperPosition?{side:Ft,sideOffset:Ut,align:Xt,alignOffset:Kt,arrowPadding:nr,collisionBoundary:rr,collisionPadding:or,sticky:hr,hideWhenDetached:fr,avoidCollisions:yr}:{};return jsxRuntimeExports.jsx(SelectContentProvider,{scope:s,content:Vr,viewport:ro,onViewportChange:no,itemRefCallback:Op,selectedItem:ko,onItemLeave:Fp,itemTextRefCallback:wm,focusSelectedItem:Pp,selectedItemText:oo,position:_,isPositioned:Ks,searchRef:Mp,children:jsxRuntimeExports.jsx(ReactRemoveScroll,{as:Slot$6,allowPinchZoom:!0,children:jsxRuntimeExports.jsx(FocusScope,{asChild:!0,trapped:Br.open,onMountAutoFocus:Yp=>{Yp.preventDefault()},onUnmountAutoFocus:composeEventHandlers$2(_e,Yp=>{var _m;(_m=Br.trigger)==null||_m.focus({preventScroll:!0}),Yp.preventDefault()}),children:jsxRuntimeExports.jsx(DismissableLayer,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:ct,onPointerDownOutside:Mt,onFocusOutside:Yp=>Yp.preventDefault(),onDismiss:()=>Br.onOpenChange(!1),children:jsxRuntimeExports.jsx(Bp,{role:"listbox",id:Br.contentId,"data-state":Br.open?"open":"closed",dir:Br.dir,onContextMenu:Yp=>Yp.preventDefault(),...Lr,...Em,onPlaced:()=>vu(!0),ref:so,style:{display:"flex",flexDirection:"column",outline:"none",...Lr.style},onKeyDown:composeEventHandlers$2(Lr.onKeyDown,Yp=>{const _m=Yp.ctrlKey||Yp.altKey||Yp.metaKey;if(Yp.key==="Tab"&&Yp.preventDefault(),_m||Yp.key.length!==1||Lp(Yp.key),["ArrowUp","ArrowDown","Home","End"].includes(Yp.key)){let Tm=As().filter(Im=>!Im.disabled).map(Im=>Im.ref.current);if(["ArrowUp","End"].includes(Yp.key)&&(Tm=Tm.slice().reverse()),["ArrowUp","ArrowDown"].includes(Yp.key)){const Im=Yp.target,Mm=Tm.indexOf(Im);Tm=Tm.slice(Mm+1)}setTimeout(()=>Ap(Tm)),Yp.preventDefault()}})})})})})})});SelectContentImpl.displayName=CONTENT_IMPL_NAME;var ITEM_ALIGNED_POSITION_NAME="SelectItemAlignedPosition",SelectItemAlignedPosition=reactExports.forwardRef((o,i)=>{const{__scopeSelect:s,onPlaced:_,..._e}=o,ct=useSelectContext(CONTENT_NAME$1,s),Mt=useSelectContentContext(CONTENT_NAME$1,s),[Ft,Ut]=reactExports.useState(null),[Xt,Kt]=reactExports.useState(null),nr=useComposedRefs$3(i,so=>Kt(so)),rr=useCollection(s),or=reactExports.useRef(!1),hr=reactExports.useRef(!0),{viewport:fr,selectedItem:yr,selectedItemText:Lr,focusSelectedItem:Br}=Mt,Vr=reactExports.useCallback(()=>{if(ct.trigger&&ct.valueNode&&Ft&&Xt&&fr&&yr&&Lr){const so=ct.trigger.getBoundingClientRect(),ko=Xt.getBoundingClientRect(),To=ct.valueNode.getBoundingClientRect(),oo=Lr.getBoundingClientRect();if(ct.dir!=="rtl"){const _m=oo.left-ko.left,Tm=To.left-_m,Im=so.left-Tm,Mm=so.width+Im,Bm=Math.max(Mm,ko.width),zm=window.innerWidth-CONTENT_MARGIN,Am=clamp$1(Tm,[CONTENT_MARGIN,Math.max(CONTENT_MARGIN,zm-Bm)]);Ft.style.minWidth=Mm+"px",Ft.style.left=Am+"px"}else{const _m=ko.right-oo.right,Tm=window.innerWidth-To.right-_m,Im=window.innerWidth-so.right-Tm,Mm=so.width+Im,Bm=Math.max(Mm,ko.width),zm=window.innerWidth-CONTENT_MARGIN,Am=clamp$1(Tm,[CONTENT_MARGIN,Math.max(CONTENT_MARGIN,zm-Bm)]);Ft.style.minWidth=Mm+"px",Ft.style.right=Am+"px"}const No=rr(),As=window.innerHeight-2*CONTENT_MARGIN,Ks=fr.scrollHeight,vu=window.getComputedStyle(Xt),Fu=parseInt(vu.borderTopWidth,10),Ap=parseInt(vu.paddingTop,10),Pp=parseInt(vu.borderBottomWidth,10),Lo=Fu+Ap+Ks+parseInt(vu.paddingBottom,10)+Pp,Au=Math.min(5*yr.offsetHeight,Lo),Mp=window.getComputedStyle(fr),Lp=parseInt(Mp.paddingTop,10),Op=parseInt(Mp.paddingBottom,10),Fp=so.top+so.height/2-CONTENT_MARGIN,wm=As-Fp,Bp=yr.offsetHeight/2,Em=Fu+Ap+(yr.offsetTop+Bp),Yp=Lo-Em;if(Em<=Fp){const _m=No.length>0&&yr===No[No.length-1].ref.current;Ft.style.bottom="0px";const Tm=Xt.clientHeight-fr.offsetTop-fr.offsetHeight,Im=Em+Math.max(wm,Bp+(_m?Op:0)+Tm+Pp);Ft.style.height=Im+"px"}else{const _m=No.length>0&&yr===No[0].ref.current;Ft.style.top="0px";const Tm=Math.max(Fp,Fu+fr.offsetTop+(_m?Lp:0)+Bp)+Yp;Ft.style.height=Tm+"px",fr.scrollTop=Em-Fp+fr.offsetTop}Ft.style.margin=`${CONTENT_MARGIN}px 0`,Ft.style.minHeight=Au+"px",Ft.style.maxHeight=As+"px",_==null||_(),requestAnimationFrame(()=>or.current=!0)}},[rr,ct.trigger,ct.valueNode,Ft,Xt,fr,yr,Lr,ct.dir,_]);useLayoutEffect2$3(()=>Vr(),[Vr]);const[Wr,ro]=reactExports.useState();useLayoutEffect2$3(()=>{Xt&&ro(window.getComputedStyle(Xt).zIndex)},[Xt]);const no=reactExports.useCallback(so=>{so&&hr.current===!0&&(Vr(),Br==null||Br(),hr.current=!1)},[Vr,Br]);return jsxRuntimeExports.jsx(SelectViewportProvider,{scope:s,contentWrapper:Ft,shouldExpandOnScrollRef:or,onScrollButtonChange:no,children:jsxRuntimeExports.jsx("div",{ref:Ut,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:Wr},children:jsxRuntimeExports.jsx(Primitive$5.div,{..._e,ref:nr,style:{boxSizing:"border-box",maxHeight:"100%",..._e.style}})})})});SelectItemAlignedPosition.displayName=ITEM_ALIGNED_POSITION_NAME;var POPPER_POSITION_NAME="SelectPopperPosition",SelectPopperPosition=reactExports.forwardRef((o,i)=>{const{__scopeSelect:s,align:_="start",collisionPadding:_e=CONTENT_MARGIN,...ct}=o,Mt=usePopperScope$1(s);return jsxRuntimeExports.jsx(Content,{...Mt,...ct,ref:i,align:_,collisionPadding:_e,style:{boxSizing:"border-box",...ct.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});SelectPopperPosition.displayName=POPPER_POSITION_NAME;var[SelectViewportProvider,useSelectViewportContext]=createSelectContext(CONTENT_NAME$1,{}),VIEWPORT_NAME="SelectViewport",SelectViewport=reactExports.forwardRef((o,i)=>{const{__scopeSelect:s,nonce:_,..._e}=o,ct=useSelectContentContext(VIEWPORT_NAME,s),Mt=useSelectViewportContext(VIEWPORT_NAME,s),Ft=useComposedRefs$3(i,ct.onViewportChange),Ut=reactExports.useRef(0);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:_}),jsxRuntimeExports.jsx(Collection.Slot,{scope:s,children:jsxRuntimeExports.jsx(Primitive$5.div,{"data-radix-select-viewport":"",role:"presentation",..._e,ref:Ft,style:{position:"relative",flex:1,overflow:"hidden auto",..._e.style},onScroll:composeEventHandlers$2(_e.onScroll,Xt=>{const Kt=Xt.currentTarget,{contentWrapper:nr,shouldExpandOnScrollRef:rr}=Mt;if(rr!=null&&rr.current&&nr){const or=Math.abs(Ut.current-Kt.scrollTop);if(or>0){const hr=window.innerHeight-2*CONTENT_MARGIN,fr=parseFloat(nr.style.minHeight),yr=parseFloat(nr.style.height),Lr=Math.max(fr,yr);if(Lr<hr){const Br=Lr+or,Vr=Math.min(hr,Br),Wr=Br-Vr;nr.style.height=Vr+"px",nr.style.bottom==="0px"&&(Kt.scrollTop=Wr>0?Wr:0,nr.style.justifyContent="flex-end")}}}Ut.current=Kt.scrollTop})})})]})});SelectViewport.displayName=VIEWPORT_NAME;var GROUP_NAME="SelectGroup",[SelectGroupContextProvider,useSelectGroupContext]=createSelectContext(GROUP_NAME),SelectGroup=reactExports.forwardRef((o,i)=>{const{__scopeSelect:s,..._}=o,_e=useId$1();return jsxRuntimeExports.jsx(SelectGroupContextProvider,{scope:s,id:_e,children:jsxRuntimeExports.jsx(Primitive$5.div,{role:"group","aria-labelledby":_e,..._,ref:i})})});SelectGroup.displayName=GROUP_NAME;var LABEL_NAME="SelectLabel",SelectLabel=reactExports.forwardRef((o,i)=>{const{__scopeSelect:s,..._}=o,_e=useSelectGroupContext(LABEL_NAME,s);return jsxRuntimeExports.jsx(Primitive$5.div,{id:_e.id,..._,ref:i})});SelectLabel.displayName=LABEL_NAME;var ITEM_NAME="SelectItem",[SelectItemContextProvider,useSelectItemContext]=createSelectContext(ITEM_NAME),SelectItem$1=reactExports.forwardRef((o,i)=>{const{__scopeSelect:s,value:_,disabled:_e=!1,textValue:ct,...Mt}=o,Ft=useSelectContext(ITEM_NAME,s),Ut=useSelectContentContext(ITEM_NAME,s),Xt=Ft.value===_,[Kt,nr]=reactExports.useState(ct??""),[rr,or]=reactExports.useState(!1),hr=useComposedRefs$3(i,Br=>{var Vr;return(Vr=Ut.itemRefCallback)==null?void 0:Vr.call(Ut,Br,_,_e)}),fr=useId$1(),yr=reactExports.useRef("touch"),Lr=()=>{_e||(Ft.onValueChange(_),Ft.onOpenChange(!1))};if(_==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return jsxRuntimeExports.jsx(SelectItemContextProvider,{scope:s,value:_,disabled:_e,textId:fr,isSelected:Xt,onItemTextChange:reactExports.useCallback(Br=>{nr(Vr=>Vr||((Br==null?void 0:Br.textContent)??"").trim())},[]),children:jsxRuntimeExports.jsx(Collection.ItemSlot,{scope:s,value:_,disabled:_e,textValue:Kt,children:jsxRuntimeExports.jsx(Primitive$5.div,{role:"option","aria-labelledby":fr,"data-highlighted":rr?"":void 0,"aria-selected":Xt&&rr,"data-state":Xt?"checked":"unchecked","aria-disabled":_e||void 0,"data-disabled":_e?"":void 0,tabIndex:_e?void 0:-1,...Mt,ref:hr,onFocus:composeEventHandlers$2(Mt.onFocus,()=>or(!0)),onBlur:composeEventHandlers$2(Mt.onBlur,()=>or(!1)),onClick:composeEventHandlers$2(Mt.onClick,()=>{yr.current!=="mouse"&&Lr()}),onPointerUp:composeEventHandlers$2(Mt.onPointerUp,()=>{yr.current==="mouse"&&Lr()}),onPointerDown:composeEventHandlers$2(Mt.onPointerDown,Br=>{yr.current=Br.pointerType}),onPointerMove:composeEventHandlers$2(Mt.onPointerMove,Br=>{var Vr;yr.current=Br.pointerType,_e?(Vr=Ut.onItemLeave)==null||Vr.call(Ut):yr.current==="mouse"&&Br.currentTarget.focus({preventScroll:!0})}),onPointerLeave:composeEventHandlers$2(Mt.onPointerLeave,Br=>{var Vr;Br.currentTarget===document.activeElement&&((Vr=Ut.onItemLeave)==null||Vr.call(Ut))}),onKeyDown:composeEventHandlers$2(Mt.onKeyDown,Br=>{var Vr;((Vr=Ut.searchRef)==null?void 0:Vr.current)!==""&&Br.key===" "||(SELECTION_KEYS.includes(Br.key)&&Lr(),Br.key===" "&&Br.preventDefault())})})})})});SelectItem$1.displayName=ITEM_NAME;var ITEM_TEXT_NAME="SelectItemText",SelectItemText=reactExports.forwardRef((o,i)=>{const{__scopeSelect:s,className:_,style:_e,...ct}=o,Mt=useSelectContext(ITEM_TEXT_NAME,s),Ft=useSelectContentContext(ITEM_TEXT_NAME,s),Ut=useSelectItemContext(ITEM_TEXT_NAME,s),Xt=useSelectNativeOptionsContext(ITEM_TEXT_NAME,s),[Kt,nr]=reactExports.useState(null),rr=useComposedRefs$3(i,Lr=>nr(Lr),Ut.onItemTextChange,Lr=>{var Br;return(Br=Ft.itemTextRefCallback)==null?void 0:Br.call(Ft,Lr,Ut.value,Ut.disabled)}),or=Kt==null?void 0:Kt.textContent,hr=reactExports.useMemo(()=>jsxRuntimeExports.jsx("option",{value:Ut.value,disabled:Ut.disabled,children:or},Ut.value),[Ut.disabled,Ut.value,or]),{onNativeOptionAdd:fr,onNativeOptionRemove:yr}=Xt;return useLayoutEffect2$3(()=>(fr(hr),()=>yr(hr)),[fr,yr,hr]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Primitive$5.span,{id:Ut.textId,...ct,ref:rr}),Ut.isSelected&&Mt.valueNode&&!Mt.valueNodeHasChildren?reactDomExports.createPortal(ct.children,Mt.valueNode):null]})});SelectItemText.displayName=ITEM_TEXT_NAME;var ITEM_INDICATOR_NAME="SelectItemIndicator",SelectItemIndicator=reactExports.forwardRef((o,i)=>{const{__scopeSelect:s,..._}=o;return useSelectItemContext(ITEM_INDICATOR_NAME,s).isSelected?jsxRuntimeExports.jsx(Primitive$5.span,{"aria-hidden":!0,..._,ref:i}):null});SelectItemIndicator.displayName=ITEM_INDICATOR_NAME;var SCROLL_UP_BUTTON_NAME="SelectScrollUpButton",SelectScrollUpButton$1=reactExports.forwardRef((o,i)=>{const s=useSelectContentContext(SCROLL_UP_BUTTON_NAME,o.__scopeSelect),_=useSelectViewportContext(SCROLL_UP_BUTTON_NAME,o.__scopeSelect),[_e,ct]=reactExports.useState(!1),Mt=useComposedRefs$3(i,_.onScrollButtonChange);return useLayoutEffect2$3(()=>{if(s.viewport&&s.isPositioned){let Ft=function(){const Xt=Ut.scrollTop>0;ct(Xt)};const Ut=s.viewport;return Ft(),Ut.addEventListener("scroll",Ft),()=>Ut.removeEventListener("scroll",Ft)}},[s.viewport,s.isPositioned]),_e?jsxRuntimeExports.jsx(SelectScrollButtonImpl,{...o,ref:Mt,onAutoScroll:()=>{const{viewport:Ft,selectedItem:Ut}=s;Ft&&Ut&&(Ft.scrollTop=Ft.scrollTop-Ut.offsetHeight)}}):null});SelectScrollUpButton$1.displayName=SCROLL_UP_BUTTON_NAME;var SCROLL_DOWN_BUTTON_NAME="SelectScrollDownButton",SelectScrollDownButton$1=reactExports.forwardRef((o,i)=>{const s=useSelectContentContext(SCROLL_DOWN_BUTTON_NAME,o.__scopeSelect),_=useSelectViewportContext(SCROLL_DOWN_BUTTON_NAME,o.__scopeSelect),[_e,ct]=reactExports.useState(!1),Mt=useComposedRefs$3(i,_.onScrollButtonChange);return useLayoutEffect2$3(()=>{if(s.viewport&&s.isPositioned){let Ft=function(){const Xt=Ut.scrollHeight-Ut.clientHeight,Kt=Math.ceil(Ut.scrollTop)<Xt;ct(Kt)};const Ut=s.viewport;return Ft(),Ut.addEventListener("scroll",Ft),()=>Ut.removeEventListener("scroll",Ft)}},[s.viewport,s.isPositioned]),_e?jsxRuntimeExports.jsx(SelectScrollButtonImpl,{...o,ref:Mt,onAutoScroll:()=>{const{viewport:Ft,selectedItem:Ut}=s;Ft&&Ut&&(Ft.scrollTop=Ft.scrollTop+Ut.offsetHeight)}}):null});SelectScrollDownButton$1.displayName=SCROLL_DOWN_BUTTON_NAME;var SelectScrollButtonImpl=reactExports.forwardRef((o,i)=>{const{__scopeSelect:s,onAutoScroll:_,..._e}=o,ct=useSelectContentContext("SelectScrollButton",s),Mt=reactExports.useRef(null),Ft=useCollection(s),Ut=reactExports.useCallback(()=>{Mt.current!==null&&(window.clearInterval(Mt.current),Mt.current=null)},[]);return reactExports.useEffect(()=>()=>Ut(),[Ut]),useLayoutEffect2$3(()=>{var Kt;const Xt=Ft().find(nr=>nr.ref.current===document.activeElement);(Kt=Xt==null?void 0:Xt.ref.current)==null||Kt.scrollIntoView({block:"nearest"})},[Ft]),jsxRuntimeExports.jsx(Primitive$5.div,{"aria-hidden":!0,..._e,ref:i,style:{flexShrink:0,..._e.style},onPointerDown:composeEventHandlers$2(_e.onPointerDown,()=>{Mt.current===null&&(Mt.current=window.setInterval(_,50))}),onPointerMove:composeEventHandlers$2(_e.onPointerMove,()=>{var Xt;(Xt=ct.onItemLeave)==null||Xt.call(ct),Mt.current===null&&(Mt.current=window.setInterval(_,50))}),onPointerLeave:composeEventHandlers$2(_e.onPointerLeave,()=>{Ut()})})}),SEPARATOR_NAME="SelectSeparator",SelectSeparator=reactExports.forwardRef((o,i)=>{const{__scopeSelect:s,..._}=o;return jsxRuntimeExports.jsx(Primitive$5.div,{"aria-hidden":!0,..._,ref:i})});SelectSeparator.displayName=SEPARATOR_NAME;var ARROW_NAME$1="SelectArrow",SelectArrow=reactExports.forwardRef((o,i)=>{const{__scopeSelect:s,..._}=o,_e=usePopperScope$1(s),ct=useSelectContext(ARROW_NAME$1,s),Mt=useSelectContentContext(ARROW_NAME$1,s);return ct.open&&Mt.position==="popper"?jsxRuntimeExports.jsx(Arrow,{..._e,..._,ref:i}):null});function shouldShowPlaceholder(o){return o===""||o===void 0}SelectArrow.displayName=ARROW_NAME$1;var BubbleSelect=reactExports.forwardRef((o,i)=>{const{value:s,..._}=o,_e=reactExports.useRef(null),ct=useComposedRefs$3(i,_e),Mt=usePrevious(s);return reactExports.useEffect(()=>{const Ft=_e.current,Ut=window.HTMLSelectElement.prototype,Xt=Object.getOwnPropertyDescriptor(Ut,"value").set;if(Mt!==s&&Xt){const Kt=new Event("change",{bubbles:!0});Xt.call(Ft,s),Ft.dispatchEvent(Kt)}},[Mt,s]),jsxRuntimeExports.jsx(VisuallyHidden,{asChild:!0,children:jsxRuntimeExports.jsx("select",{..._,ref:ct,defaultValue:s})})});function useTypeaheadSearch(o){const i=useCallbackRef$2(o),s=reactExports.useRef(""),_=reactExports.useRef(0),_e=reactExports.useCallback(Mt=>{const Ft=s.current+Mt;i(Ft),function Ut(Xt){s.current=Xt,window.clearTimeout(_.current),Xt!==""&&(_.current=window.setTimeout(()=>Ut(""),1e3))}(Ft)},[i]),ct=reactExports.useCallback(()=>{s.current="",window.clearTimeout(_.current)},[]);return reactExports.useEffect(()=>()=>window.clearTimeout(_.current),[]),[s,_e,ct]}function findNextItem(o,i,s){const _=i.length>1&&Array.from(i).every(Ft=>Ft===i[0])?i[0]:i,_e=s?o.indexOf(s):-1;let ct=wrapArray(o,Math.max(_e,0));_.length===1&&(ct=ct.filter(Ft=>Ft!==s));const Mt=ct.find(Ft=>Ft.textValue.toLowerCase().startsWith(_.toLowerCase()));return Mt!==s?Mt:void 0}function wrapArray(o,i){return o.map((s,_)=>o[(i+_)%o.length])}BubbleSelect.displayName="BubbleSelect";var Trigger$1=SelectTrigger$1,Portal=SelectPortal,Content2$1=SelectContent$1,Viewport=SelectViewport,Item=SelectItem$1,ItemText=SelectItemText,ScrollUpButton=SelectScrollUpButton$1,ScrollDownButton=SelectScrollDownButton$1;const SelectTrigger=reactExports.forwardRef(({className:o,children:i,...s},_)=>reactExports.createElement(Trigger$1,{ref:_,className:o,...s},i));SelectTrigger.displayName=Trigger$1.displayName;const SelectScrollUpButton=reactExports.forwardRef(({className:o,...i},s)=>reactExports.createElement(ScrollUpButton,{ref:s,className:cn$1("ns-flex ns-cursor-default ns-items-center ns-justify-center ns-py-1",o),...i},reactExports.createElement(ChevronUp,null)));SelectScrollUpButton.displayName=ScrollUpButton.displayName;const SelectScrollDownButton=reactExports.forwardRef(({className:o,...i},s)=>reactExports.createElement(ScrollDownButton,{ref:s,className:cn$1("ns-flex ns-cursor-default ns-items-center ns-justify-center ns-py-1",o),...i},reactExports.createElement(ChevronDown,null)));SelectScrollDownButton.displayName=ScrollDownButton.displayName;const SelectContent=reactExports.forwardRef(({className:o,children:i,position:s="popper",..._},_e)=>reactExports.createElement(Portal,null,reactExports.createElement(Content2$1,{ref:_e,className:cn$1("ns-relative ns-bg-grey-100 ns-z-50 ns-max-h-96 ns-min-w-[8rem] ns-ring-0 ns-overflow-hidden ns-rounded-md ns-bg-popover ns-text-popover-foreground        ns-shadow-md data-[state=open]:ns-animate-in data-[state=closed]:ns-animate-out data-[state=closed]:ns-fade-out-0 data-[state=open]:ns-fade-in-0        data-[state=closed]:ns-zoom-out-95 data-[state=open]:ns-zoom-in-95 data-[side=bottom]:ns-slide-in-from-top-2 data-[side=left]:ns-slide-in-from-right-2        data-[side=right]:ns-slide-in-from-left-2 data-[side=top]:ns-slide-in-from-bottom-2",s==="popper"&&"data-[side=bottom]:ns-translate-y-1 data-[side=left]:-ns-translate-x-1 data-[side=right]:ns-translate-x-1 data-[side=top]:-ns-translate-y-1",o),position:s,..._},reactExports.createElement(SelectScrollUpButton,null),reactExports.createElement(Viewport,{className:cn$1("ns-p-1",s==="popper"&&"ns-h-[var(--radix-select-trigger-height)] ns-w-full ns-min-w-[var(--radix-select-trigger-width)]")},i),reactExports.createElement(SelectScrollDownButton,null))));SelectContent.displayName=Content2$1.displayName;const SelectItem=reactExports.forwardRef(({className:o,children:i,...s},_)=>reactExports.createElement(Item,{ref:_,className:o,...s},reactExports.createElement(ItemText,null,i)));SelectItem.displayName=Item.displayName;function getDefaultExportFromCjs(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var lottie$1={exports:{}};(function(module,exports){var factory;typeof navigator<"u"&&(factory=function(){var svgNS="http://www.w3.org/2000/svg",locationHref="",_useWebWorker=!1,initialDefaultFrame=-999999,setWebWorker=function(o){_useWebWorker=!!o},getWebWorker=function(){return _useWebWorker},setLocationHref=function(o){locationHref=o},getLocationHref=function(){return locationHref};function createTag(o){return document.createElement(o)}function extendPrototype(o,i){var s,_,_e=o.length;for(s=0;s<_e;s+=1)for(var ct in _=o[s].prototype)Object.prototype.hasOwnProperty.call(_,ct)&&(i.prototype[ct]=_[ct])}function getDescriptor(o,i){return Object.getOwnPropertyDescriptor(o,i)}function createProxyFunction(o){function i(){}return i.prototype=o,i}var audioControllerFactory=function(){function o(i){this.audios=[],this.audioFactory=i,this._volume=1,this._isMuted=!1}return o.prototype={addAudio:function(i){this.audios.push(i)},pause:function(){var i,s=this.audios.length;for(i=0;i<s;i+=1)this.audios[i].pause()},resume:function(){var i,s=this.audios.length;for(i=0;i<s;i+=1)this.audios[i].resume()},setRate:function(i){var s,_=this.audios.length;for(s=0;s<_;s+=1)this.audios[s].setRate(i)},createAudio:function(i){return this.audioFactory?this.audioFactory(i):window.Howl?new window.Howl({src:[i]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(i){this.audioFactory=i},setVolume:function(i){this._volume=i,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var i,s=this.audios.length;for(i=0;i<s;i+=1)this.audios[i].volume(this._volume*(this._isMuted?0:1))}},function(){return new o}}(),createTypedArray=function(){function o(i,s){var _,_e=0,ct=[];switch(i){case"int16":case"uint8c":_=1;break;default:_=1.1}for(_e=0;_e<s;_e+=1)ct.push(_);return ct}return typeof Uint8ClampedArray=="function"&&typeof Float32Array=="function"?function(i,s){return i==="float32"?new Float32Array(s):i==="int16"?new Int16Array(s):i==="uint8c"?new Uint8ClampedArray(s):o(i,s)}:o}();function createSizedArray(o){return Array.apply(null,{length:o})}function _typeof$6(o){return _typeof$6=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},_typeof$6(o)}var subframeEnabled=!0,expressionsPlugin=null,expressionsInterfaces=null,idPrefix$1="",isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};(function(){var o,i=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],s=i.length;for(o=0;o<s;o+=1)BMMath[i[o]]=Math[i[o]]})(),BMMath.random=Math.random,BMMath.abs=function(o){if(_typeof$6(o)==="object"&&o.length){var i,s=createSizedArray(o.length),_=o.length;for(i=0;i<_;i+=1)s[i]=Math.abs(o[i]);return s}return Math.abs(o)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function styleDiv(o){o.style.position="absolute",o.style.top=0,o.style.left=0,o.style.display="block",o.style.transformOrigin="0 0",o.style.webkitTransformOrigin="0 0",o.style.backfaceVisibility="visible",o.style.webkitBackfaceVisibility="visible",o.style.transformStyle="preserve-3d",o.style.webkitTransformStyle="preserve-3d",o.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(o,i,s,_){this.type=o,this.currentTime=i,this.totalTime=s,this.direction=_<0?-1:1}function BMCompleteEvent(o,i){this.type=o,this.direction=i<0?-1:1}function BMCompleteLoopEvent(o,i,s,_){this.type=o,this.currentLoop=s,this.totalLoops=i,this.direction=_<0?-1:1}function BMSegmentStartEvent(o,i,s){this.type=o,this.firstFrame=i,this.totalFrames=s}function BMDestroyEvent(o,i){this.type=o,this.target=i}function BMRenderFrameErrorEvent(o,i){this.type="renderFrameError",this.nativeError=o,this.currentTime=i}function BMConfigErrorEvent(o){this.type="configError",this.nativeError=o}var createElementID=(_count=0,function(){return idPrefix$1+"__lottie_element_"+(_count+=1)}),_count;function HSVtoRGB(o,i,s){var _,_e,ct,Mt,Ft,Ut,Xt,Kt;switch(Ut=s*(1-i),Xt=s*(1-(Ft=6*o-(Mt=Math.floor(6*o)))*i),Kt=s*(1-(1-Ft)*i),Mt%6){case 0:_=s,_e=Kt,ct=Ut;break;case 1:_=Xt,_e=s,ct=Ut;break;case 2:_=Ut,_e=s,ct=Kt;break;case 3:_=Ut,_e=Xt,ct=s;break;case 4:_=Kt,_e=Ut,ct=s;break;case 5:_=s,_e=Ut,ct=Xt}return[_,_e,ct]}function RGBtoHSV(o,i,s){var _,_e=Math.max(o,i,s),ct=Math.min(o,i,s),Mt=_e-ct,Ft=_e===0?0:Mt/_e,Ut=_e/255;switch(_e){case ct:_=0;break;case o:_=i-s+Mt*(i<s?6:0),_/=6*Mt;break;case i:_=s-o+2*Mt,_/=6*Mt;break;case s:_=o-i+4*Mt,_/=6*Mt}return[_,Ft,Ut]}function addSaturationToRGB(o,i){var s=RGBtoHSV(255*o[0],255*o[1],255*o[2]);return s[1]+=i,s[1]>1?s[1]=1:s[1]<=0&&(s[1]=0),HSVtoRGB(s[0],s[1],s[2])}function addBrightnessToRGB(o,i){var s=RGBtoHSV(255*o[0],255*o[1],255*o[2]);return s[2]+=i,s[2]>1?s[2]=1:s[2]<0&&(s[2]=0),HSVtoRGB(s[0],s[1],s[2])}function addHueToRGB(o,i){var s=RGBtoHSV(255*o[0],255*o[1],255*o[2]);return s[0]+=i/360,s[0]>1?s[0]-=1:s[0]<0&&(s[0]+=1),HSVtoRGB(s[0],s[1],s[2])}var rgbToHex=function(){var o,i,s=[];for(o=0;o<256;o+=1)i=o.toString(16),s[o]=i.length===1?"0"+i:i;return function(_,_e,ct){return _<0&&(_=0),_e<0&&(_e=0),ct<0&&(ct=0),"#"+s[_]+s[_e]+s[ct]}}(),setSubframeEnabled=function(o){subframeEnabled=!!o},getSubframeEnabled=function(){return subframeEnabled},setExpressionsPlugin=function(o){expressionsPlugin=o},getExpressionsPlugin=function(){return expressionsPlugin},setExpressionInterfaces=function(o){expressionsInterfaces=o},getExpressionInterfaces=function(){return expressionsInterfaces},setDefaultCurveSegments=function(o){defaultCurveSegments=o},getDefaultCurveSegments=function(){return defaultCurveSegments},setIdPrefix=function(o){idPrefix$1=o};function createNS(o){return document.createElementNS(svgNS,o)}function _typeof$5(o){return _typeof$5=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},_typeof$5(o)}var dataManager=function(){var o,i,s=1,_=[],_e={onmessage:function(){},postMessage:function(Ut){o({data:Ut})}},ct={postMessage:function(Ut){_e.onmessage({data:Ut})}};function Mt(){i||(i=function(Ut){if(window.Worker&&window.Blob&&getWebWorker()){var Xt=new Blob(["var _workerSelf = self; self.onmessage = ",Ut.toString()],{type:"text/javascript"}),Kt=URL.createObjectURL(Xt);return new Worker(Kt)}return o=Ut,_e}(function(Ut){if(ct.dataManager||(ct.dataManager=function(){function Kt(so,ko){var To,oo,No,As,Ks,vu,Fu=so.length;for(oo=0;oo<Fu;oo+=1)if("ks"in(To=so[oo])&&!To.completed){if(To.completed=!0,To.hasMask){var Ap=To.masksProperties;for(As=Ap.length,No=0;No<As;No+=1)if(Ap[No].pt.k.i)or(Ap[No].pt.k);else for(vu=Ap[No].pt.k.length,Ks=0;Ks<vu;Ks+=1)Ap[No].pt.k[Ks].s&&or(Ap[No].pt.k[Ks].s[0]),Ap[No].pt.k[Ks].e&&or(Ap[No].pt.k[Ks].e[0])}To.ty===0?(To.layers=nr(To.refId,ko),Kt(To.layers,ko)):To.ty===4?rr(To.shapes):To.ty===5&&ro(To)}}function nr(so,ko){var To=function(oo,No){for(var As=0,Ks=No.length;As<Ks;){if(No[As].id===oo)return No[As];As+=1}return null}(so,ko);return To?To.layers.__used?JSON.parse(JSON.stringify(To.layers)):(To.layers.__used=!0,To.layers):null}function rr(so){var ko,To,oo;for(ko=so.length-1;ko>=0;ko-=1)if(so[ko].ty==="sh")if(so[ko].ks.k.i)or(so[ko].ks.k);else for(oo=so[ko].ks.k.length,To=0;To<oo;To+=1)so[ko].ks.k[To].s&&or(so[ko].ks.k[To].s[0]),so[ko].ks.k[To].e&&or(so[ko].ks.k[To].e[0]);else so[ko].ty==="gr"&&rr(so[ko].it)}function or(so){var ko,To=so.i.length;for(ko=0;ko<To;ko+=1)so.i[ko][0]+=so.v[ko][0],so.i[ko][1]+=so.v[ko][1],so.o[ko][0]+=so.v[ko][0],so.o[ko][1]+=so.v[ko][1]}function hr(so,ko){var To=ko?ko.split("."):[100,100,100];return so[0]>To[0]||!(To[0]>so[0])&&(so[1]>To[1]||!(To[1]>so[1])&&(so[2]>To[2]||!(To[2]>so[2])&&null))}var fr,yr=function(){var so=[4,4,14];function ko(To){var oo,No,As,Ks=To.length;for(oo=0;oo<Ks;oo+=1)To[oo].ty===5&&(As=void 0,As=(No=To[oo]).t.d,No.t.d={k:[{s:As,t:0}]})}return function(To){if(hr(so,To.v)&&(ko(To.layers),To.assets)){var oo,No=To.assets.length;for(oo=0;oo<No;oo+=1)To.assets[oo].layers&&ko(To.assets[oo].layers)}}}(),Lr=(fr=[4,7,99],function(so){if(so.chars&&!hr(fr,so.v)){var ko,To=so.chars.length;for(ko=0;ko<To;ko+=1){var oo=so.chars[ko];oo.data&&oo.data.shapes&&(rr(oo.data.shapes),oo.data.ip=0,oo.data.op=99999,oo.data.st=0,oo.data.sr=1,oo.data.ks={p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0}},so.chars[ko].t||(oo.data.shapes.push({ty:"no"}),oo.data.shapes[0].it.push({p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0},sk:{k:0,a:0},sa:{k:0,a:0},ty:"tr"})))}}}),Br=function(){var so=[5,7,15];function ko(To){var oo,No,As=To.length;for(oo=0;oo<As;oo+=1)To[oo].ty===5&&(No=void 0,typeof(No=To[oo].t.p).a=="number"&&(No.a={a:0,k:No.a}),typeof No.p=="number"&&(No.p={a:0,k:No.p}),typeof No.r=="number"&&(No.r={a:0,k:No.r}))}return function(To){if(hr(so,To.v)&&(ko(To.layers),To.assets)){var oo,No=To.assets.length;for(oo=0;oo<No;oo+=1)To.assets[oo].layers&&ko(To.assets[oo].layers)}}}(),Vr=function(){var so=[4,1,9];function ko(oo){var No,As,Ks,vu=oo.length;for(No=0;No<vu;No+=1)if(oo[No].ty==="gr")ko(oo[No].it);else if(oo[No].ty==="fl"||oo[No].ty==="st")if(oo[No].c.k&&oo[No].c.k[0].i)for(Ks=oo[No].c.k.length,As=0;As<Ks;As+=1)oo[No].c.k[As].s&&(oo[No].c.k[As].s[0]/=255,oo[No].c.k[As].s[1]/=255,oo[No].c.k[As].s[2]/=255,oo[No].c.k[As].s[3]/=255),oo[No].c.k[As].e&&(oo[No].c.k[As].e[0]/=255,oo[No].c.k[As].e[1]/=255,oo[No].c.k[As].e[2]/=255,oo[No].c.k[As].e[3]/=255);else oo[No].c.k[0]/=255,oo[No].c.k[1]/=255,oo[No].c.k[2]/=255,oo[No].c.k[3]/=255}function To(oo){var No,As=oo.length;for(No=0;No<As;No+=1)oo[No].ty===4&&ko(oo[No].shapes)}return function(oo){if(hr(so,oo.v)&&(To(oo.layers),oo.assets)){var No,As=oo.assets.length;for(No=0;No<As;No+=1)oo.assets[No].layers&&To(oo.assets[No].layers)}}}(),Wr=function(){var so=[4,4,18];function ko(oo){var No,As,Ks;for(No=oo.length-1;No>=0;No-=1)if(oo[No].ty==="sh")if(oo[No].ks.k.i)oo[No].ks.k.c=oo[No].closed;else for(Ks=oo[No].ks.k.length,As=0;As<Ks;As+=1)oo[No].ks.k[As].s&&(oo[No].ks.k[As].s[0].c=oo[No].closed),oo[No].ks.k[As].e&&(oo[No].ks.k[As].e[0].c=oo[No].closed);else oo[No].ty==="gr"&&ko(oo[No].it)}function To(oo){var No,As,Ks,vu,Fu,Ap,Pp=oo.length;for(As=0;As<Pp;As+=1){if((No=oo[As]).hasMask){var Lo=No.masksProperties;for(vu=Lo.length,Ks=0;Ks<vu;Ks+=1)if(Lo[Ks].pt.k.i)Lo[Ks].pt.k.c=Lo[Ks].cl;else for(Ap=Lo[Ks].pt.k.length,Fu=0;Fu<Ap;Fu+=1)Lo[Ks].pt.k[Fu].s&&(Lo[Ks].pt.k[Fu].s[0].c=Lo[Ks].cl),Lo[Ks].pt.k[Fu].e&&(Lo[Ks].pt.k[Fu].e[0].c=Lo[Ks].cl)}No.ty===4&&ko(No.shapes)}}return function(oo){if(hr(so,oo.v)&&(To(oo.layers),oo.assets)){var No,As=oo.assets.length;for(No=0;No<As;No+=1)oo.assets[No].layers&&To(oo.assets[No].layers)}}}();function ro(so){so.t.a.length===0&&so.t.p}var no={completeData:function(so){so.__complete||(Vr(so),yr(so),Lr(so),Br(so),Wr(so),Kt(so.layers,so.assets),function(ko,To){if(ko){var oo=0,No=ko.length;for(oo=0;oo<No;oo+=1)ko[oo].t===1&&(ko[oo].data.layers=nr(ko[oo].data.refId,To),Kt(ko[oo].data.layers,To))}}(so.chars,so.assets),so.__complete=!0)}};return no.checkColors=Vr,no.checkChars=Lr,no.checkPathProperties=Br,no.checkShapes=Wr,no.completeLayers=Kt,no}()),ct.assetLoader||(ct.assetLoader=function(){function Kt(nr){var rr=nr.getResponseHeader("content-type");return rr&&nr.responseType==="json"&&rr.indexOf("json")!==-1||nr.response&&_typeof$5(nr.response)==="object"?nr.response:nr.response&&typeof nr.response=="string"?JSON.parse(nr.response):nr.responseText?JSON.parse(nr.responseText):null}return{load:function(nr,rr,or,hr){var fr,yr=new XMLHttpRequest;try{yr.responseType="json"}catch{}yr.onreadystatechange=function(){if(yr.readyState===4)if(yr.status===200)fr=Kt(yr),or(fr);else try{fr=Kt(yr),or(fr)}catch(Lr){hr&&hr(Lr)}};try{yr.open(["G","E","T"].join(""),nr,!0)}catch{yr.open(["G","E","T"].join(""),rr+"/"+nr,!0)}yr.send()}}}()),Ut.data.type==="loadAnimation")ct.assetLoader.load(Ut.data.path,Ut.data.fullPath,function(Kt){ct.dataManager.completeData(Kt),ct.postMessage({id:Ut.data.id,payload:Kt,status:"success"})},function(){ct.postMessage({id:Ut.data.id,status:"error"})});else if(Ut.data.type==="complete"){var Xt=Ut.data.animation;ct.dataManager.completeData(Xt),ct.postMessage({id:Ut.data.id,payload:Xt,status:"success"})}else Ut.data.type==="loadData"&&ct.assetLoader.load(Ut.data.path,Ut.data.fullPath,function(Kt){ct.postMessage({id:Ut.data.id,payload:Kt,status:"success"})},function(){ct.postMessage({id:Ut.data.id,status:"error"})})}),i.onmessage=function(Ut){var Xt=Ut.data,Kt=Xt.id,nr=_[Kt];_[Kt]=null,Xt.status==="success"?nr.onComplete(Xt.payload):nr.onError&&nr.onError()})}function Ft(Ut,Xt){var Kt="processId_"+(s+=1);return _[Kt]={onComplete:Ut,onError:Xt},Kt}return{loadAnimation:function(Ut,Xt,Kt){Mt();var nr=Ft(Xt,Kt);i.postMessage({type:"loadAnimation",path:Ut,fullPath:window.location.origin+window.location.pathname,id:nr})},loadData:function(Ut,Xt,Kt){Mt();var nr=Ft(Xt,Kt);i.postMessage({type:"loadData",path:Ut,fullPath:window.location.origin+window.location.pathname,id:nr})},completeAnimation:function(Ut,Xt,Kt){Mt();var nr=Ft(Xt,Kt);i.postMessage({type:"complete",animation:Ut,id:nr})}}}(),ImagePreloader=function(){var o=function(){var Ft=createTag("canvas");Ft.width=1,Ft.height=1;var Ut=Ft.getContext("2d");return Ut.fillStyle="rgba(0,0,0,0)",Ut.fillRect(0,0,1,1),Ft}();function i(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function s(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function _(Ft,Ut,Xt){var Kt="";if(Ft.e)Kt=Ft.p;else if(Ut){var nr=Ft.p;nr.indexOf("images/")!==-1&&(nr=nr.split("/")[1]),Kt=Ut+nr}else Kt=Xt,Kt+=Ft.u?Ft.u:"",Kt+=Ft.p;return Kt}function _e(Ft){var Ut=0,Xt=setInterval((function(){(Ft.getBBox().width||Ut>500)&&(this._imageLoaded(),clearInterval(Xt)),Ut+=1}).bind(this),50)}function ct(Ft){var Ut={assetData:Ft},Xt=_(Ft,this.assetsPath,this.path);return dataManager.loadData(Xt,(function(Kt){Ut.img=Kt,this._footageLoaded()}).bind(this),(function(){Ut.img={},this._footageLoaded()}).bind(this)),Ut}function Mt(){this._imageLoaded=i.bind(this),this._footageLoaded=s.bind(this),this.testImageLoaded=_e.bind(this),this.createFootageData=ct.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return Mt.prototype={loadAssets:function(Ft,Ut){var Xt;this.imagesLoadedCb=Ut;var Kt=Ft.length;for(Xt=0;Xt<Kt;Xt+=1)Ft[Xt].layers||(Ft[Xt].t&&Ft[Xt].t!=="seq"?Ft[Xt].t===3&&(this.totalFootages+=1,this.images.push(this.createFootageData(Ft[Xt]))):(this.totalImages+=1,this.images.push(this._createImageData(Ft[Xt]))))},setAssetsPath:function(Ft){this.assetsPath=Ft||""},setPath:function(Ft){this.path=Ft||""},loadedImages:function(){return this.totalImages===this.loadedAssets},loadedFootages:function(){return this.totalFootages===this.loadedFootagesCount},destroy:function(){this.imagesLoadedCb=null,this.images.length=0},getAsset:function(Ft){for(var Ut=0,Xt=this.images.length;Ut<Xt;){if(this.images[Ut].assetData===Ft)return this.images[Ut].img;Ut+=1}return null},createImgData:function(Ft){var Ut=_(Ft,this.assetsPath,this.path),Xt=createTag("img");Xt.crossOrigin="anonymous",Xt.addEventListener("load",this._imageLoaded,!1),Xt.addEventListener("error",(function(){Kt.img=o,this._imageLoaded()}).bind(this),!1),Xt.src=Ut;var Kt={img:Xt,assetData:Ft};return Kt},createImageData:function(Ft){var Ut=_(Ft,this.assetsPath,this.path),Xt=createNS("image");isSafari?this.testImageLoaded(Xt):Xt.addEventListener("load",this._imageLoaded,!1),Xt.addEventListener("error",(function(){Kt.img=o,this._imageLoaded()}).bind(this),!1),Xt.setAttributeNS("http://www.w3.org/1999/xlink","href",Ut),this._elementHelper.append?this._elementHelper.append(Xt):this._elementHelper.appendChild(Xt);var Kt={img:Xt,assetData:Ft};return Kt},imageLoaded:i,footageLoaded:s,setCacheType:function(Ft,Ut){Ft==="svg"?(this._elementHelper=Ut,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}},Mt}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(o,i){if(this._cbs[o])for(var s=this._cbs[o],_=0;_<s.length;_+=1)s[_](i)},addEventListener:function(o,i){return this._cbs[o]||(this._cbs[o]=[]),this._cbs[o].push(i),(function(){this.removeEventListener(o,i)}).bind(this)},removeEventListener:function(o,i){if(i){if(this._cbs[o]){for(var s=0,_=this._cbs[o].length;s<_;)this._cbs[o][s]===i&&(this._cbs[o].splice(s,1),s-=1,_-=1),s+=1;this._cbs[o].length||(this._cbs[o]=null)}}else this._cbs[o]=null}};var markerParser=function(){function o(i){for(var s,_=i.split(`\r
`),_e={},ct=0,Mt=0;Mt<_.length;Mt+=1)(s=_[Mt].split(":")).length===2&&(_e[s[0]]=s[1].trim(),ct+=1);if(ct===0)throw new Error;return _e}return function(i){for(var s=[],_=0;_<i.length;_+=1){var _e=i[_],ct={time:_e.tm,duration:_e.dr};try{ct.payload=JSON.parse(i[_].cm)}catch{try{ct.payload=o(i[_].cm)}catch{ct.payload={name:i[_].cm}}}s.push(ct)}return s}}(),ProjectInterface=function(){function o(i){this.compositions.push(i)}return function(){function i(s){for(var _=0,_e=this.compositions.length;_<_e;){if(this.compositions[_].data&&this.compositions[_].data.nm===s)return this.compositions[_].prepareFrame&&this.compositions[_].data.xt&&this.compositions[_].prepareFrame(this.currentFrame),this.compositions[_].compInterface;_+=1}return null}return i.compositions=[],i.currentFrame=0,i.registerComposition=o,i}}(),renderers={},registerRenderer=function(o,i){renderers[o]=i};function getRenderer(o){return renderers[o]}function getRegisteredRenderer(){if(renderers.canvas)return"canvas";for(var o in renderers)if(renderers[o])return o;return""}function _typeof$4(o){return _typeof$4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},_typeof$4(o)}var AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=getSubframeEnabled(),this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this),this.drawnFrameEvent=new BMEnterFrameEvent("drawnFrame",0,0,0),this.expressionsPlugin=getExpressionsPlugin()};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(o){(o.wrapper||o.container)&&(this.wrapper=o.wrapper||o.container);var i="svg";o.animType?i=o.animType:o.renderer&&(i=o.renderer);var s=getRenderer(i);this.renderer=new s(this,o.rendererSettings),this.imagePreloader.setCacheType(i,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=i,o.loop===""||o.loop===null||o.loop===void 0||o.loop===!0?this.loop=!0:o.loop===!1?this.loop=!1:this.loop=parseInt(o.loop,10),this.autoplay=!("autoplay"in o)||o.autoplay,this.name=o.name?o.name:"",this.autoloadSegments=!Object.prototype.hasOwnProperty.call(o,"autoloadSegments")||o.autoloadSegments,this.assetsPath=o.assetsPath,this.initialSegment=o.initialSegment,o.audioFactory&&this.audioController.setAudioFactory(o.audioFactory),o.animationData?this.setupAnimation(o.animationData):o.path&&(o.path.lastIndexOf("\\")!==-1?this.path=o.path.substr(0,o.path.lastIndexOf("\\")+1):this.path=o.path.substr(0,o.path.lastIndexOf("/")+1),this.fileName=o.path.substr(o.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),dataManager.loadAnimation(o.path,this.configAnimation,this.onSetupError))},AnimationItem.prototype.onSetupError=function(){this.trigger("data_failed")},AnimationItem.prototype.setupAnimation=function(o){dataManager.completeAnimation(o,this.configAnimation)},AnimationItem.prototype.setData=function(o,i){i&&_typeof$4(i)!=="object"&&(i=JSON.parse(i));var s={wrapper:o,animationData:i},_=o.attributes;s.path=_.getNamedItem("data-animation-path")?_.getNamedItem("data-animation-path").value:_.getNamedItem("data-bm-path")?_.getNamedItem("data-bm-path").value:_.getNamedItem("bm-path")?_.getNamedItem("bm-path").value:"",s.animType=_.getNamedItem("data-anim-type")?_.getNamedItem("data-anim-type").value:_.getNamedItem("data-bm-type")?_.getNamedItem("data-bm-type").value:_.getNamedItem("bm-type")?_.getNamedItem("bm-type").value:_.getNamedItem("data-bm-renderer")?_.getNamedItem("data-bm-renderer").value:_.getNamedItem("bm-renderer")?_.getNamedItem("bm-renderer").value:getRegisteredRenderer()||"canvas";var _e=_.getNamedItem("data-anim-loop")?_.getNamedItem("data-anim-loop").value:_.getNamedItem("data-bm-loop")?_.getNamedItem("data-bm-loop").value:_.getNamedItem("bm-loop")?_.getNamedItem("bm-loop").value:"";_e==="false"?s.loop=!1:_e==="true"?s.loop=!0:_e!==""&&(s.loop=parseInt(_e,10));var ct=_.getNamedItem("data-anim-autoplay")?_.getNamedItem("data-anim-autoplay").value:_.getNamedItem("data-bm-autoplay")?_.getNamedItem("data-bm-autoplay").value:!_.getNamedItem("bm-autoplay")||_.getNamedItem("bm-autoplay").value;s.autoplay=ct!=="false",s.name=_.getNamedItem("data-name")?_.getNamedItem("data-name").value:_.getNamedItem("data-bm-name")?_.getNamedItem("data-bm-name").value:_.getNamedItem("bm-name")?_.getNamedItem("bm-name").value:"",(_.getNamedItem("data-anim-prerender")?_.getNamedItem("data-anim-prerender").value:_.getNamedItem("data-bm-prerender")?_.getNamedItem("data-bm-prerender").value:_.getNamedItem("bm-prerender")?_.getNamedItem("bm-prerender").value:"")==="false"&&(s.prerender=!1),s.path?this.setParams(s):this.trigger("destroy")},AnimationItem.prototype.includeLayers=function(o){o.op>this.animationData.op&&(this.animationData.op=o.op,this.totalFrames=Math.floor(o.op-this.animationData.ip));var i,s,_=this.animationData.layers,_e=_.length,ct=o.layers,Mt=ct.length;for(s=0;s<Mt;s+=1)for(i=0;i<_e;){if(_[i].id===ct[s].id){_[i]=ct[s];break}i+=1}if((o.chars||o.fonts)&&(this.renderer.globalData.fontManager.addChars(o.chars),this.renderer.globalData.fontManager.addFonts(o.fonts,this.renderer.globalData.defs)),o.assets)for(_e=o.assets.length,i=0;i<_e;i+=1)this.animationData.assets.push(o.assets[i]);this.animationData.__complete=!1,dataManager.completeAnimation(this.animationData,this.onSegmentComplete)},AnimationItem.prototype.onSegmentComplete=function(o){this.animationData=o;var i=getExpressionsPlugin();i&&i.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var o=this.animationData.segments;if(!o||o.length===0||!this.autoloadSegments)return this.trigger("data_ready"),void(this.timeCompleted=this.totalFrames);var i=o.shift();this.timeCompleted=i.time*this.frameRate;var s=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,dataManager.loadData(s,this.includeLayers.bind(this),(function(){this.trigger("data_failed")}).bind(this))},AnimationItem.prototype.loadSegments=function(){this.animationData.segments||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(o){if(this.renderer)try{this.animationData=o,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(o),o.assets||(o.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(o.assets),this.markers=markerParser(o.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(i){this.triggerConfigError(i)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){if(!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||this.renderer.rendererType!=="canvas")&&this.imagePreloader.loadedFootages()){this.isLoaded=!0;var o=getExpressionsPlugin();o&&o.initExpressions(this),this.renderer.initItems(),setTimeout((function(){this.trigger("DOMLoaded")}).bind(this),0),this.gotoFrame(),this.autoplay&&this.play()}},AnimationItem.prototype.resize=function(o,i){var s=typeof o=="number"?o:void 0,_=typeof i=="number"?i:void 0;this.renderer.updateContainerSize(s,_)},AnimationItem.prototype.setSubframe=function(o){this.isSubframeEnabled=!!o},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame(),this.trigger("drawnFrame")},AnimationItem.prototype.renderFrame=function(){if(this.isLoaded!==!1&&this.renderer)try{this.expressionsPlugin&&this.expressionsPlugin.resetFrame(),this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(o){this.triggerRenderFrameError(o)}},AnimationItem.prototype.play=function(o){o&&this.name!==o||this.isPaused===!0&&(this.isPaused=!1,this.trigger("_play"),this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(o){o&&this.name!==o||this.isPaused===!1&&(this.isPaused=!0,this.trigger("_pause"),this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(o){o&&this.name!==o||(this.isPaused===!0?this.play():this.pause())},AnimationItem.prototype.stop=function(o){o&&this.name!==o||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(o){for(var i,s=0;s<this.markers.length;s+=1)if((i=this.markers[s]).payload&&i.payload.name===o)return i;return null},AnimationItem.prototype.goToAndStop=function(o,i,s){if(!s||this.name===s){var _=Number(o);if(isNaN(_)){var _e=this.getMarkerData(o);_e&&this.goToAndStop(_e.time,!0)}else i?this.setCurrentRawFrameValue(o):this.setCurrentRawFrameValue(o*this.frameModifier);this.pause()}},AnimationItem.prototype.goToAndPlay=function(o,i,s){if(!s||this.name===s){var _=Number(o);if(isNaN(_)){var _e=this.getMarkerData(o);_e&&(_e.duration?this.playSegments([_e.time,_e.time+_e.duration],!0):this.goToAndStop(_e.time,!0))}else this.goToAndStop(_,i,s);this.play()}},AnimationItem.prototype.advanceTime=function(o){if(this.isPaused!==!0&&this.isLoaded!==!1){var i=this.currentRawFrame+o*this.frameModifier,s=!1;i>=this.totalFrames-1&&this.frameModifier>0?this.loop&&this.playCount!==this.loop?i>=this.totalFrames?(this.playCount+=1,this.checkSegments(i%this.totalFrames)||(this.setCurrentRawFrameValue(i%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(i):this.checkSegments(i>this.totalFrames?i%this.totalFrames:0)||(s=!0,i=this.totalFrames-1):i<0?this.checkSegments(i%this.totalFrames)||(!this.loop||this.playCount--<=0&&this.loop!==!0?(s=!0,i=0):(this.setCurrentRawFrameValue(this.totalFrames+i%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0)):this.setCurrentRawFrameValue(i),s&&(this.setCurrentRawFrameValue(i),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(o,i){this.playCount=0,o[1]<o[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=o[0]-o[1],this.timeCompleted=this.totalFrames,this.firstFrame=o[1],this.setCurrentRawFrameValue(this.totalFrames-.001-i)):o[1]>o[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=o[1]-o[0],this.timeCompleted=this.totalFrames,this.firstFrame=o[0],this.setCurrentRawFrameValue(.001+i)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(o,i){var s=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<o?s=o:this.currentRawFrame+this.firstFrame>i&&(s=i-o)),this.firstFrame=o,this.totalFrames=i-o,this.timeCompleted=this.totalFrames,s!==-1&&this.goToAndStop(s,!0)},AnimationItem.prototype.playSegments=function(o,i){if(i&&(this.segments.length=0),_typeof$4(o[0])==="object"){var s,_=o.length;for(s=0;s<_;s+=1)this.segments.push(o[s])}else this.segments.push(o);this.segments.length&&i&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(o){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),o&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(o){return!!this.segments.length&&(this.adjustSegment(this.segments.shift(),o),!0)},AnimationItem.prototype.destroy=function(o){o&&this.name!==o||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.expressionsPlugin=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(o){this.currentRawFrame=o,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(o){this.playSpeed=o,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(o){this.playDirection=o<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setLoop=function(o){this.loop=o},AnimationItem.prototype.setVolume=function(o,i){i&&this.name!==i||this.audioController.setVolume(o)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(o){o&&this.name!==o||this.audioController.mute()},AnimationItem.prototype.unmute=function(o){o&&this.name!==o||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(o){var i="";if(o.e)i=o.p;else if(this.assetsPath){var s=o.p;s.indexOf("images/")!==-1&&(s=s.split("/")[1]),i=this.assetsPath+s}else i=this.path,i+=o.u?o.u:"",i+=o.p;return i},AnimationItem.prototype.getAssetData=function(o){for(var i=0,s=this.assets.length;i<s;){if(o===this.assets[i].id)return this.assets[i];i+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(o){return o?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.updateDocumentData=function(o,i,s){try{this.renderer.getElementByPath(o).updateDocumentData(i,s)}catch{}},AnimationItem.prototype.trigger=function(o){if(this._cbs&&this._cbs[o])switch(o){case"enterFrame":this.triggerEvent(o,new BMEnterFrameEvent(o,this.currentFrame,this.totalFrames,this.frameModifier));break;case"drawnFrame":this.drawnFrameEvent.currentTime=this.currentFrame,this.drawnFrameEvent.totalTime=this.totalFrames,this.drawnFrameEvent.direction=this.frameModifier,this.triggerEvent(o,this.drawnFrameEvent);break;case"loopComplete":this.triggerEvent(o,new BMCompleteLoopEvent(o,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(o,new BMCompleteEvent(o,this.frameMult));break;case"segmentStart":this.triggerEvent(o,new BMSegmentStartEvent(o,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(o,new BMDestroyEvent(o,this));break;default:this.triggerEvent(o)}o==="enterFrame"&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(o,this.currentFrame,this.totalFrames,this.frameMult)),o==="loopComplete"&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(o,this.loop,this.playCount,this.frameMult)),o==="complete"&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(o,this.frameMult)),o==="segmentStart"&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(o,this.firstFrame,this.totalFrames)),o==="destroy"&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(o,this))},AnimationItem.prototype.triggerRenderFrameError=function(o){var i=new BMRenderFrameErrorEvent(o,this.currentFrame);this.triggerEvent("error",i),this.onError&&this.onError.call(this,i)},AnimationItem.prototype.triggerConfigError=function(o){var i=new BMConfigErrorEvent(o,this.currentFrame);this.triggerEvent("error",i),this.onError&&this.onError.call(this,i)};var animationManager=function(){var o={},i=[],s=0,_=0,_e=0,ct=!0,Mt=!1;function Ft(fr){for(var yr=0,Lr=fr.target;yr<_;)i[yr].animation===Lr&&(i.splice(yr,1),yr-=1,_-=1,Lr.isPaused||Kt()),yr+=1}function Ut(fr,yr){if(!fr)return null;for(var Lr=0;Lr<_;){if(i[Lr].elem===fr&&i[Lr].elem!==null)return i[Lr].animation;Lr+=1}var Br=new AnimationItem;return nr(Br,fr),Br.setData(fr,yr),Br}function Xt(){_e+=1,hr()}function Kt(){_e-=1}function nr(fr,yr){fr.addEventListener("destroy",Ft),fr.addEventListener("_active",Xt),fr.addEventListener("_idle",Kt),i.push({elem:yr,animation:fr}),_+=1}function rr(fr){var yr,Lr=fr-s;for(yr=0;yr<_;yr+=1)i[yr].animation.advanceTime(Lr);s=fr,_e&&!Mt?window.requestAnimationFrame(rr):ct=!0}function or(fr){s=fr,window.requestAnimationFrame(rr)}function hr(){!Mt&&_e&&ct&&(window.requestAnimationFrame(or),ct=!1)}return o.registerAnimation=Ut,o.loadAnimation=function(fr){var yr=new AnimationItem;return nr(yr,null),yr.setParams(fr),yr},o.setSpeed=function(fr,yr){var Lr;for(Lr=0;Lr<_;Lr+=1)i[Lr].animation.setSpeed(fr,yr)},o.setDirection=function(fr,yr){var Lr;for(Lr=0;Lr<_;Lr+=1)i[Lr].animation.setDirection(fr,yr)},o.play=function(fr){var yr;for(yr=0;yr<_;yr+=1)i[yr].animation.play(fr)},o.pause=function(fr){var yr;for(yr=0;yr<_;yr+=1)i[yr].animation.pause(fr)},o.stop=function(fr){var yr;for(yr=0;yr<_;yr+=1)i[yr].animation.stop(fr)},o.togglePause=function(fr){var yr;for(yr=0;yr<_;yr+=1)i[yr].animation.togglePause(fr)},o.searchAnimations=function(fr,yr,Lr){var Br,Vr=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),Wr=Vr.length;for(Br=0;Br<Wr;Br+=1)Lr&&Vr[Br].setAttribute("data-bm-type",Lr),Ut(Vr[Br],fr);if(yr&&Wr===0){Lr||(Lr="svg");var ro=document.getElementsByTagName("body")[0];ro.innerText="";var no=createTag("div");no.style.width="100%",no.style.height="100%",no.setAttribute("data-bm-type",Lr),ro.appendChild(no),Ut(no,fr)}},o.resize=function(){var fr;for(fr=0;fr<_;fr+=1)i[fr].animation.resize()},o.goToAndStop=function(fr,yr,Lr){var Br;for(Br=0;Br<_;Br+=1)i[Br].animation.goToAndStop(fr,yr,Lr)},o.destroy=function(fr){var yr;for(yr=_-1;yr>=0;yr-=1)i[yr].animation.destroy(fr)},o.freeze=function(){Mt=!0},o.unfreeze=function(){Mt=!1,hr()},o.setVolume=function(fr,yr){var Lr;for(Lr=0;Lr<_;Lr+=1)i[Lr].animation.setVolume(fr,yr)},o.mute=function(fr){var yr;for(yr=0;yr<_;yr+=1)i[yr].animation.mute(fr)},o.unmute=function(fr){var yr;for(yr=0;yr<_;yr+=1)i[yr].animation.unmute(fr)},o.getRegisteredAnimations=function(){var fr,yr=i.length,Lr=[];for(fr=0;fr<yr;fr+=1)Lr.push(i[fr].animation);return Lr},o}(),BezierFactory=function(){var o={getBezierEasing:function(nr,rr,or,hr,fr){var yr=fr||("bez_"+nr+"_"+rr+"_"+or+"_"+hr).replace(/\./g,"p");if(i[yr])return i[yr];var Lr=new Kt([nr,rr,or,hr]);return i[yr]=Lr,Lr}},i={},s=11,_=1/(s-1),_e=typeof Float32Array=="function";function ct(nr,rr){return 1-3*rr+3*nr}function Mt(nr,rr){return 3*rr-6*nr}function Ft(nr){return 3*nr}function Ut(nr,rr,or){return((ct(rr,or)*nr+Mt(rr,or))*nr+Ft(rr))*nr}function Xt(nr,rr,or){return 3*ct(rr,or)*nr*nr+2*Mt(rr,or)*nr+Ft(rr)}function Kt(nr){this._p=nr,this._mSampleValues=_e?new Float32Array(s):new Array(s),this._precomputed=!1,this.get=this.get.bind(this)}return Kt.prototype={get:function(nr){var rr=this._p[0],or=this._p[1],hr=this._p[2],fr=this._p[3];return this._precomputed||this._precompute(),rr===or&&hr===fr?nr:nr===0?0:nr===1?1:Ut(this._getTForX(nr),or,fr)},_precompute:function(){var nr=this._p[0],rr=this._p[1],or=this._p[2],hr=this._p[3];this._precomputed=!0,nr===rr&&or===hr||this._calcSampleValues()},_calcSampleValues:function(){for(var nr=this._p[0],rr=this._p[2],or=0;or<s;++or)this._mSampleValues[or]=Ut(or*_,nr,rr)},_getTForX:function(nr){for(var rr=this._p[0],or=this._p[2],hr=this._mSampleValues,fr=0,yr=1,Lr=s-1;yr!==Lr&&hr[yr]<=nr;++yr)fr+=_;var Br=fr+(nr-hr[--yr])/(hr[yr+1]-hr[yr])*_,Vr=Xt(Br,rr,or);return Vr>=.001?function(Wr,ro,no,so){for(var ko=0;ko<4;++ko){var To=Xt(ro,no,so);if(To===0)return ro;ro-=(Ut(ro,no,so)-Wr)/To}return ro}(nr,Br,rr,or):Vr===0?Br:function(Wr,ro,no,so,ko){var To,oo,No=0;do(To=Ut(oo=ro+(no-ro)/2,so,ko)-Wr)>0?no=oo:ro=oo;while(Math.abs(To)>1e-7&&++No<10);return oo}(nr,fr,fr+_,rr,or)}},o}(),pooling={double:function(o){return o.concat(createSizedArray(o.length))}},poolFactory=function(o,i,s){var _=0,_e=o,ct=createSizedArray(_e);return{newElement:function(){return _?ct[_-=1]:i()},release:function(Mt){_===_e&&(ct=pooling.double(ct),_e*=2),s&&s(Mt),ct[_]=Mt,_+=1}}},bezierLengthPool=poolFactory(8,function(){return{addedLength:0,percents:createTypedArray("float32",getDefaultCurveSegments()),lengths:createTypedArray("float32",getDefaultCurveSegments())}}),segmentsLengthPool=poolFactory(8,function(){return{lengths:[],totalLength:0}},function(o){var i,s=o.lengths.length;for(i=0;i<s;i+=1)bezierLengthPool.release(o.lengths[i]);o.lengths.length=0});function bezFunction(){var o=Math;function i(Xt,Kt,nr,rr,or,hr){var fr=Xt*rr+Kt*or+nr*hr-or*rr-hr*Xt-nr*Kt;return fr>-.001&&fr<.001}var s=function(Xt,Kt,nr,rr){var or,hr,fr,yr,Lr,Br,Vr=getDefaultCurveSegments(),Wr=0,ro=[],no=[],so=bezierLengthPool.newElement();for(fr=nr.length,or=0;or<Vr;or+=1){for(Lr=or/(Vr-1),Br=0,hr=0;hr<fr;hr+=1)yr=bmPow(1-Lr,3)*Xt[hr]+3*bmPow(1-Lr,2)*Lr*nr[hr]+3*(1-Lr)*bmPow(Lr,2)*rr[hr]+bmPow(Lr,3)*Kt[hr],ro[hr]=yr,no[hr]!==null&&(Br+=bmPow(ro[hr]-no[hr],2)),no[hr]=ro[hr];Br&&(Wr+=Br=bmSqrt(Br)),so.percents[or]=Lr,so.lengths[or]=Wr}return so.addedLength=Wr,so};function _(Xt){this.segmentLength=0,this.points=new Array(Xt)}function _e(Xt,Kt){this.partialLength=Xt,this.point=Kt}var ct,Mt=(ct={},function(Xt,Kt,nr,rr){var or=(Xt[0]+"_"+Xt[1]+"_"+Kt[0]+"_"+Kt[1]+"_"+nr[0]+"_"+nr[1]+"_"+rr[0]+"_"+rr[1]).replace(/\./g,"p");if(!ct[or]){var hr,fr,yr,Lr,Br,Vr,Wr,ro=getDefaultCurveSegments(),no=0,so=null;Xt.length===2&&(Xt[0]!==Kt[0]||Xt[1]!==Kt[1])&&i(Xt[0],Xt[1],Kt[0],Kt[1],Xt[0]+nr[0],Xt[1]+nr[1])&&i(Xt[0],Xt[1],Kt[0],Kt[1],Kt[0]+rr[0],Kt[1]+rr[1])&&(ro=2);var ko=new _(ro);for(yr=nr.length,hr=0;hr<ro;hr+=1){for(Wr=createSizedArray(yr),Br=hr/(ro-1),Vr=0,fr=0;fr<yr;fr+=1)Lr=bmPow(1-Br,3)*Xt[fr]+3*bmPow(1-Br,2)*Br*(Xt[fr]+nr[fr])+3*(1-Br)*bmPow(Br,2)*(Kt[fr]+rr[fr])+bmPow(Br,3)*Kt[fr],Wr[fr]=Lr,so!==null&&(Vr+=bmPow(Wr[fr]-so[fr],2));no+=Vr=bmSqrt(Vr),ko.points[hr]=new _e(Vr,Wr),so=Wr}ko.segmentLength=no,ct[or]=ko}return ct[or]});function Ft(Xt,Kt){var nr=Kt.percents,rr=Kt.lengths,or=nr.length,hr=bmFloor((or-1)*Xt),fr=Xt*Kt.addedLength,yr=0;if(hr===or-1||hr===0||fr===rr[hr])return nr[hr];for(var Lr=rr[hr]>fr?-1:1,Br=!0;Br;)if(rr[hr]<=fr&&rr[hr+1]>fr?(yr=(fr-rr[hr])/(rr[hr+1]-rr[hr]),Br=!1):hr+=Lr,hr<0||hr>=or-1){if(hr===or-1)return nr[hr];Br=!1}return nr[hr]+(nr[hr+1]-nr[hr])*yr}var Ut=createTypedArray("float32",8);return{getSegmentsLength:function(Xt){var Kt,nr=segmentsLengthPool.newElement(),rr=Xt.c,or=Xt.v,hr=Xt.o,fr=Xt.i,yr=Xt._length,Lr=nr.lengths,Br=0;for(Kt=0;Kt<yr-1;Kt+=1)Lr[Kt]=s(or[Kt],or[Kt+1],hr[Kt],fr[Kt+1]),Br+=Lr[Kt].addedLength;return rr&&yr&&(Lr[Kt]=s(or[Kt],or[0],hr[Kt],fr[0]),Br+=Lr[Kt].addedLength),nr.totalLength=Br,nr},getNewSegment:function(Xt,Kt,nr,rr,or,hr,fr){or<0?or=0:or>1&&(or=1);var yr,Lr=Ft(or,fr),Br=Ft(hr=hr>1?1:hr,fr),Vr=Xt.length,Wr=1-Lr,ro=1-Br,no=Wr*Wr*Wr,so=Lr*Wr*Wr*3,ko=Lr*Lr*Wr*3,To=Lr*Lr*Lr,oo=Wr*Wr*ro,No=Lr*Wr*ro+Wr*Lr*ro+Wr*Wr*Br,As=Lr*Lr*ro+Wr*Lr*Br+Lr*Wr*Br,Ks=Lr*Lr*Br,vu=Wr*ro*ro,Fu=Lr*ro*ro+Wr*Br*ro+Wr*ro*Br,Ap=Lr*Br*ro+Wr*Br*Br+Lr*ro*Br,Pp=Lr*Br*Br,Lo=ro*ro*ro,Au=Br*ro*ro+ro*Br*ro+ro*ro*Br,Mp=Br*Br*ro+ro*Br*Br+Br*ro*Br,Lp=Br*Br*Br;for(yr=0;yr<Vr;yr+=1)Ut[4*yr]=o.round(1e3*(no*Xt[yr]+so*nr[yr]+ko*rr[yr]+To*Kt[yr]))/1e3,Ut[4*yr+1]=o.round(1e3*(oo*Xt[yr]+No*nr[yr]+As*rr[yr]+Ks*Kt[yr]))/1e3,Ut[4*yr+2]=o.round(1e3*(vu*Xt[yr]+Fu*nr[yr]+Ap*rr[yr]+Pp*Kt[yr]))/1e3,Ut[4*yr+3]=o.round(1e3*(Lo*Xt[yr]+Au*nr[yr]+Mp*rr[yr]+Lp*Kt[yr]))/1e3;return Ut},getPointInSegment:function(Xt,Kt,nr,rr,or,hr){var fr=Ft(or,hr),yr=1-fr;return[o.round(1e3*(yr*yr*yr*Xt[0]+(fr*yr*yr+yr*fr*yr+yr*yr*fr)*nr[0]+(fr*fr*yr+yr*fr*fr+fr*yr*fr)*rr[0]+fr*fr*fr*Kt[0]))/1e3,o.round(1e3*(yr*yr*yr*Xt[1]+(fr*yr*yr+yr*fr*yr+yr*yr*fr)*nr[1]+(fr*fr*yr+yr*fr*fr+fr*yr*fr)*rr[1]+fr*fr*fr*Kt[1]))/1e3]},buildBezierData:Mt,pointOnLine2D:i,pointOnLine3D:function(Xt,Kt,nr,rr,or,hr,fr,yr,Lr){if(nr===0&&hr===0&&Lr===0)return i(Xt,Kt,rr,or,fr,yr);var Br,Vr=o.sqrt(o.pow(rr-Xt,2)+o.pow(or-Kt,2)+o.pow(hr-nr,2)),Wr=o.sqrt(o.pow(fr-Xt,2)+o.pow(yr-Kt,2)+o.pow(Lr-nr,2)),ro=o.sqrt(o.pow(fr-rr,2)+o.pow(yr-or,2)+o.pow(Lr-hr,2));return(Br=Vr>Wr?Vr>ro?Vr-Wr-ro:ro-Wr-Vr:ro>Wr?ro-Wr-Vr:Wr-Vr-ro)>-1e-4&&Br<1e-4}}}var bez=bezFunction(),initFrame=initialDefaultFrame,mathAbs=Math.abs;function interpolateValue(o,i){var s,_=this.offsetTime;this.propType==="multidimensional"&&(s=createTypedArray("float32",this.pv.length));for(var _e,ct,Mt,Ft,Ut,Xt,Kt,nr,rr,or=i.lastIndex,hr=or,fr=this.keyframes.length-1,yr=!0;yr;){if(_e=this.keyframes[hr],ct=this.keyframes[hr+1],hr===fr-1&&o>=ct.t-_){_e.h&&(_e=ct),or=0;break}if(ct.t-_>o){or=hr;break}hr<fr-1?hr+=1:(or=0,yr=!1)}Mt=this.keyframesMetadata[hr]||{};var Lr,Br=ct.t-_,Vr=_e.t-_;if(_e.to){Mt.bezierData||(Mt.bezierData=bez.buildBezierData(_e.s,ct.s||_e.e,_e.to,_e.ti));var Wr=Mt.bezierData;if(o>=Br||o<Vr){var ro=o>=Br?Wr.points.length-1:0;for(Ut=Wr.points[ro].point.length,Ft=0;Ft<Ut;Ft+=1)s[Ft]=Wr.points[ro].point[Ft]}else{Mt.__fnct?rr=Mt.__fnct:(rr=BezierFactory.getBezierEasing(_e.o.x,_e.o.y,_e.i.x,_e.i.y,_e.n).get,Mt.__fnct=rr),Xt=rr((o-Vr)/(Br-Vr));var no,so=Wr.segmentLength*Xt,ko=i.lastFrame<o&&i._lastKeyframeIndex===hr?i._lastAddedLength:0;for(nr=i.lastFrame<o&&i._lastKeyframeIndex===hr?i._lastPoint:0,yr=!0,Kt=Wr.points.length;yr;){if(ko+=Wr.points[nr].partialLength,so===0||Xt===0||nr===Wr.points.length-1){for(Ut=Wr.points[nr].point.length,Ft=0;Ft<Ut;Ft+=1)s[Ft]=Wr.points[nr].point[Ft];break}if(so>=ko&&so<ko+Wr.points[nr+1].partialLength){for(no=(so-ko)/Wr.points[nr+1].partialLength,Ut=Wr.points[nr].point.length,Ft=0;Ft<Ut;Ft+=1)s[Ft]=Wr.points[nr].point[Ft]+(Wr.points[nr+1].point[Ft]-Wr.points[nr].point[Ft])*no;break}nr<Kt-1?nr+=1:yr=!1}i._lastPoint=nr,i._lastAddedLength=ko-Wr.points[nr].partialLength,i._lastKeyframeIndex=hr}}else{var To,oo,No,As,Ks;if(fr=_e.s.length,Lr=ct.s||_e.e,this.sh&&_e.h!==1)o>=Br?(s[0]=Lr[0],s[1]=Lr[1],s[2]=Lr[2]):o<=Vr?(s[0]=_e.s[0],s[1]=_e.s[1],s[2]=_e.s[2]):quaternionToEuler(s,slerp(createQuaternion(_e.s),createQuaternion(Lr),(o-Vr)/(Br-Vr)));else for(hr=0;hr<fr;hr+=1)_e.h!==1&&(o>=Br?Xt=1:o<Vr?Xt=0:(_e.o.x.constructor===Array?(Mt.__fnct||(Mt.__fnct=[]),Mt.__fnct[hr]?rr=Mt.__fnct[hr]:(To=_e.o.x[hr]===void 0?_e.o.x[0]:_e.o.x[hr],oo=_e.o.y[hr]===void 0?_e.o.y[0]:_e.o.y[hr],No=_e.i.x[hr]===void 0?_e.i.x[0]:_e.i.x[hr],As=_e.i.y[hr]===void 0?_e.i.y[0]:_e.i.y[hr],rr=BezierFactory.getBezierEasing(To,oo,No,As).get,Mt.__fnct[hr]=rr)):Mt.__fnct?rr=Mt.__fnct:(To=_e.o.x,oo=_e.o.y,No=_e.i.x,As=_e.i.y,rr=BezierFactory.getBezierEasing(To,oo,No,As).get,_e.keyframeMetadata=rr),Xt=rr((o-Vr)/(Br-Vr)))),Lr=ct.s||_e.e,Ks=_e.h===1?_e.s[hr]:_e.s[hr]+(Lr[hr]-_e.s[hr])*Xt,this.propType==="multidimensional"?s[hr]=Ks:s=Ks}return i.lastIndex=or,s}function slerp(o,i,s){var _,_e,ct,Mt,Ft,Ut=[],Xt=o[0],Kt=o[1],nr=o[2],rr=o[3],or=i[0],hr=i[1],fr=i[2],yr=i[3];return(_e=Xt*or+Kt*hr+nr*fr+rr*yr)<0&&(_e=-_e,or=-or,hr=-hr,fr=-fr,yr=-yr),1-_e>1e-6?(_=Math.acos(_e),ct=Math.sin(_),Mt=Math.sin((1-s)*_)/ct,Ft=Math.sin(s*_)/ct):(Mt=1-s,Ft=s),Ut[0]=Mt*Xt+Ft*or,Ut[1]=Mt*Kt+Ft*hr,Ut[2]=Mt*nr+Ft*fr,Ut[3]=Mt*rr+Ft*yr,Ut}function quaternionToEuler(o,i){var s=i[0],_=i[1],_e=i[2],ct=i[3],Mt=Math.atan2(2*_*ct-2*s*_e,1-2*_*_-2*_e*_e),Ft=Math.asin(2*s*_+2*_e*ct),Ut=Math.atan2(2*s*ct-2*_*_e,1-2*s*s-2*_e*_e);o[0]=Mt/degToRads,o[1]=Ft/degToRads,o[2]=Ut/degToRads}function createQuaternion(o){var i=o[0]*degToRads,s=o[1]*degToRads,_=o[2]*degToRads,_e=Math.cos(i/2),ct=Math.cos(s/2),Mt=Math.cos(_/2),Ft=Math.sin(i/2),Ut=Math.sin(s/2),Xt=Math.sin(_/2);return[Ft*Ut*Mt+_e*ct*Xt,Ft*ct*Mt+_e*Ut*Xt,_e*Ut*Mt-Ft*ct*Xt,_e*ct*Mt-Ft*Ut*Xt]}function getValueAtCurrentTime(){var o=this.comp.renderedFrame-this.offsetTime,i=this.keyframes[0].t-this.offsetTime,s=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(o===this._caching.lastFrame||this._caching.lastFrame!==initFrame&&(this._caching.lastFrame>=s&&o>=s||this._caching.lastFrame<i&&o<i))){this._caching.lastFrame>=o&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var _=this.interpolateValue(o,this._caching);this.pv=_}return this._caching.lastFrame=o,this.pv}function setVValue(o){var i;if(this.propType==="unidimensional")i=o*this.mult,mathAbs(this.v-i)>1e-5&&(this.v=i,this._mdf=!0);else for(var s=0,_=this.v.length;s<_;)i=o[s]*this.mult,mathAbs(this.v[s]-i)>1e-5&&(this.v[s]=i,this._mdf=!0),s+=1}function processEffectsSequence(){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length)if(this.lock)this.setVValue(this.pv);else{var o;this.lock=!0,this._mdf=this._isFirstFrame;var i=this.effectsSequence.length,s=this.kf?this.pv:this.data.k;for(o=0;o<i;o+=1)s=this.effectsSequence[o](s);this.setVValue(s),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function addEffect(o){this.effectsSequence.push(o),this.container.addDynamicProperty(this)}function ValueProperty(o,i,s,_){this.propType="unidimensional",this.mult=s||1,this.data=i,this.v=s?i.k*s:i.k,this.pv=i.k,this._mdf=!1,this.elem=o,this.container=_,this.comp=o.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function MultiDimensionalProperty(o,i,s,_){var _e;this.propType="multidimensional",this.mult=s||1,this.data=i,this._mdf=!1,this.elem=o,this.container=_,this.comp=o.comp,this.k=!1,this.kf=!1,this.frameId=-1;var ct=i.k.length;for(this.v=createTypedArray("float32",ct),this.pv=createTypedArray("float32",ct),this.vel=createTypedArray("float32",ct),_e=0;_e<ct;_e+=1)this.v[_e]=i.k[_e]*this.mult,this.pv[_e]=i.k[_e];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function KeyframedValueProperty(o,i,s,_){this.propType="unidimensional",this.keyframes=i.k,this.keyframesMetadata=[],this.offsetTime=o.data.st,this.frameId=-1,this._caching={lastFrame:initFrame,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=i,this.mult=s||1,this.elem=o,this.container=_,this.comp=o.comp,this.v=initFrame,this.pv=initFrame,this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.addEffect=addEffect}function KeyframedMultidimensionalProperty(o,i,s,_){var _e;this.propType="multidimensional";var ct,Mt,Ft,Ut,Xt=i.k.length;for(_e=0;_e<Xt-1;_e+=1)i.k[_e].to&&i.k[_e].s&&i.k[_e+1]&&i.k[_e+1].s&&(ct=i.k[_e].s,Mt=i.k[_e+1].s,Ft=i.k[_e].to,Ut=i.k[_e].ti,(ct.length===2&&(ct[0]!==Mt[0]||ct[1]!==Mt[1])&&bez.pointOnLine2D(ct[0],ct[1],Mt[0],Mt[1],ct[0]+Ft[0],ct[1]+Ft[1])&&bez.pointOnLine2D(ct[0],ct[1],Mt[0],Mt[1],Mt[0]+Ut[0],Mt[1]+Ut[1])||ct.length===3&&(ct[0]!==Mt[0]||ct[1]!==Mt[1]||ct[2]!==Mt[2])&&bez.pointOnLine3D(ct[0],ct[1],ct[2],Mt[0],Mt[1],Mt[2],ct[0]+Ft[0],ct[1]+Ft[1],ct[2]+Ft[2])&&bez.pointOnLine3D(ct[0],ct[1],ct[2],Mt[0],Mt[1],Mt[2],Mt[0]+Ut[0],Mt[1]+Ut[1],Mt[2]+Ut[2]))&&(i.k[_e].to=null,i.k[_e].ti=null),ct[0]===Mt[0]&&ct[1]===Mt[1]&&Ft[0]===0&&Ft[1]===0&&Ut[0]===0&&Ut[1]===0&&(ct.length===2||ct[2]===Mt[2]&&Ft[2]===0&&Ut[2]===0)&&(i.k[_e].to=null,i.k[_e].ti=null));this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.data=i,this.keyframes=i.k,this.keyframesMetadata=[],this.offsetTime=o.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=s||1,this.elem=o,this.container=_,this.comp=o.comp,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.frameId=-1;var Kt=i.k[0].s.length;for(this.v=createTypedArray("float32",Kt),this.pv=createTypedArray("float32",Kt),_e=0;_e<Kt;_e+=1)this.v[_e]=initFrame,this.pv[_e]=initFrame;this._caching={lastFrame:initFrame,lastIndex:0,value:createTypedArray("float32",Kt)},this.addEffect=addEffect}var PropertyFactory=(ob={getProp:function(o,i,s,_,_e){var ct;if(i.sid&&(i=o.globalData.slotManager.getProp(i)),i.k.length)if(typeof i.k[0]=="number")ct=new MultiDimensionalProperty(o,i,_,_e);else switch(s){case 0:ct=new KeyframedValueProperty(o,i,_,_e);break;case 1:ct=new KeyframedMultidimensionalProperty(o,i,_,_e)}else ct=new ValueProperty(o,i,_,_e);return ct.effectsSequence.length&&_e.addDynamicProperty(ct),ct}},ob),ob;function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(o){this.dynamicProperties.indexOf(o)===-1&&(this.dynamicProperties.push(o),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){var o;this._mdf=!1;var i=this.dynamicProperties.length;for(o=0;o<i;o+=1)this.dynamicProperties[o].getValue(),this.dynamicProperties[o]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(o){this.container=o,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var pointPool=poolFactory(8,function(){return createTypedArray("float32",2)});function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(o,i){this.c=o,this.setLength(i);for(var s=0;s<i;)this.v[s]=pointPool.newElement(),this.o[s]=pointPool.newElement(),this.i[s]=pointPool.newElement(),s+=1},ShapePath.prototype.setLength=function(o){for(;this._maxLength<o;)this.doubleArrayLength();this._length=o},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(o,i,s,_,_e){var ct;switch(this._length=Math.max(this._length,_+1),this._length>=this._maxLength&&this.doubleArrayLength(),s){case"v":ct=this.v;break;case"i":ct=this.i;break;case"o":ct=this.o;break;default:ct=[]}(!ct[_]||ct[_]&&!_e)&&(ct[_]=pointPool.newElement()),ct[_][0]=o,ct[_][1]=i},ShapePath.prototype.setTripleAt=function(o,i,s,_,_e,ct,Mt,Ft){this.setXYAt(o,i,"v",Mt,Ft),this.setXYAt(s,_,"o",Mt,Ft),this.setXYAt(_e,ct,"i",Mt,Ft)},ShapePath.prototype.reverse=function(){var o=new ShapePath;o.setPathData(this.c,this._length);var i=this.v,s=this.o,_=this.i,_e=0;this.c&&(o.setTripleAt(i[0][0],i[0][1],_[0][0],_[0][1],s[0][0],s[0][1],0,!1),_e=1);var ct,Mt=this._length-1,Ft=this._length;for(ct=_e;ct<Ft;ct+=1)o.setTripleAt(i[Mt][0],i[Mt][1],_[Mt][0],_[Mt][1],s[Mt][0],s[Mt][1],ct,!1),Mt-=1;return o},ShapePath.prototype.length=function(){return this._length};var shapePool=(factory=poolFactory(4,function(){return new ShapePath},function(o){var i,s=o._length;for(i=0;i<s;i+=1)pointPool.release(o.v[i]),pointPool.release(o.i[i]),pointPool.release(o.o[i]),o.v[i]=null,o.i[i]=null,o.o[i]=null;o._length=0,o.c=!1}),factory.clone=function(o){var i,s=factory.newElement(),_=o._length===void 0?o.v.length:o._length;for(s.setLength(_),s.c=o.c,i=0;i<_;i+=1)s.setTripleAt(o.v[i][0],o.v[i][1],o.o[i][0],o.o[i][1],o.i[i][0],o.i[i][1],i);return s},factory),factory;function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}ShapeCollection.prototype.addShape=function(o){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=o,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var o;for(o=0;o<this._length;o+=1)shapePool.release(this.shapes[o]);this._length=0};var shapeCollectionPool=function(){var o={newShapeCollection:function(){return i?_[i-=1]:new ShapeCollection},release:function(_e){var ct,Mt=_e._length;for(ct=0;ct<Mt;ct+=1)shapePool.release(_e.shapes[ct]);_e._length=0,i===s&&(_=pooling.double(_),s*=2),_[i]=_e,i+=1}},i=0,s=4,_=createSizedArray(s);return o}(),ShapePropertyFactory=function(){var o=-999999;function i(or,hr,fr){var yr,Lr,Br,Vr,Wr,ro,no,so,ko,To=fr.lastIndex,oo=this.keyframes;if(or<oo[0].t-this.offsetTime)yr=oo[0].s[0],Br=!0,To=0;else if(or>=oo[oo.length-1].t-this.offsetTime)yr=oo[oo.length-1].s?oo[oo.length-1].s[0]:oo[oo.length-2].e[0],Br=!0;else{for(var No,As,Ks,vu=To,Fu=oo.length-1,Ap=!0;Ap&&(No=oo[vu],!((As=oo[vu+1]).t-this.offsetTime>or));)vu<Fu-1?vu+=1:Ap=!1;if(Ks=this.keyframesMetadata[vu]||{},To=vu,!(Br=No.h===1)){if(or>=As.t-this.offsetTime)so=1;else if(or<No.t-this.offsetTime)so=0;else{var Pp;Ks.__fnct?Pp=Ks.__fnct:(Pp=BezierFactory.getBezierEasing(No.o.x,No.o.y,No.i.x,No.i.y).get,Ks.__fnct=Pp),so=Pp((or-(No.t-this.offsetTime))/(As.t-this.offsetTime-(No.t-this.offsetTime)))}Lr=As.s?As.s[0]:No.e[0]}yr=No.s[0]}for(ro=hr._length,no=yr.i[0].length,fr.lastIndex=To,Vr=0;Vr<ro;Vr+=1)for(Wr=0;Wr<no;Wr+=1)ko=Br?yr.i[Vr][Wr]:yr.i[Vr][Wr]+(Lr.i[Vr][Wr]-yr.i[Vr][Wr])*so,hr.i[Vr][Wr]=ko,ko=Br?yr.o[Vr][Wr]:yr.o[Vr][Wr]+(Lr.o[Vr][Wr]-yr.o[Vr][Wr])*so,hr.o[Vr][Wr]=ko,ko=Br?yr.v[Vr][Wr]:yr.v[Vr][Wr]+(Lr.v[Vr][Wr]-yr.v[Vr][Wr])*so,hr.v[Vr][Wr]=ko}function s(){var or=this.comp.renderedFrame-this.offsetTime,hr=this.keyframes[0].t-this.offsetTime,fr=this.keyframes[this.keyframes.length-1].t-this.offsetTime,yr=this._caching.lastFrame;return yr!==o&&(yr<hr&&or<hr||yr>fr&&or>fr)||(this._caching.lastIndex=yr<or?this._caching.lastIndex:0,this.interpolateShape(or,this.pv,this._caching)),this._caching.lastFrame=or,this.pv}function _(){this.paths=this.localShapeCollection}function _e(or){(function(hr,fr){if(hr._length!==fr._length||hr.c!==fr.c)return!1;var yr,Lr=hr._length;for(yr=0;yr<Lr;yr+=1)if(hr.v[yr][0]!==fr.v[yr][0]||hr.v[yr][1]!==fr.v[yr][1]||hr.o[yr][0]!==fr.o[yr][0]||hr.o[yr][1]!==fr.o[yr][1]||hr.i[yr][0]!==fr.i[yr][0]||hr.i[yr][1]!==fr.i[yr][1])return!1;return!0})(this.v,or)||(this.v=shapePool.clone(or),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function ct(){if(this.elem.globalData.frameId!==this.frameId)if(this.effectsSequence.length)if(this.lock)this.setVValue(this.pv);else{var or,hr;this.lock=!0,this._mdf=!1,or=this.kf?this.pv:this.data.ks?this.data.ks.k:this.data.pt.k;var fr=this.effectsSequence.length;for(hr=0;hr<fr;hr+=1)or=this.effectsSequence[hr](or);this.setVValue(or),this.lock=!1,this.frameId=this.elem.globalData.frameId}else this._mdf=!1}function Mt(or,hr,fr){this.propType="shape",this.comp=or.comp,this.container=or,this.elem=or,this.data=hr,this.k=!1,this.kf=!1,this._mdf=!1;var yr=fr===3?hr.pt.k:hr.ks.k;this.v=shapePool.clone(yr),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=_,this.effectsSequence=[]}function Ft(or){this.effectsSequence.push(or),this.container.addDynamicProperty(this)}function Ut(or,hr,fr){this.propType="shape",this.comp=or.comp,this.elem=or,this.container=or,this.offsetTime=or.data.st,this.keyframes=fr===3?hr.pt.k:hr.ks.k,this.keyframesMetadata=[],this.k=!0,this.kf=!0;var yr=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,yr),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=o,this.reset=_,this._caching={lastFrame:o,lastIndex:0},this.effectsSequence=[s.bind(this)]}Mt.prototype.interpolateShape=i,Mt.prototype.getValue=ct,Mt.prototype.setVValue=_e,Mt.prototype.addEffect=Ft,Ut.prototype.getValue=ct,Ut.prototype.interpolateShape=i,Ut.prototype.setVValue=_e,Ut.prototype.addEffect=Ft;var Xt=function(){var or=roundCorner;function hr(fr,yr){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=yr.d,this.elem=fr,this.comp=fr.comp,this.frameId=-1,this.initDynamicPropertyContainer(fr),this.p=PropertyFactory.getProp(fr,yr.p,1,0,this),this.s=PropertyFactory.getProp(fr,yr.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return hr.prototype={reset:_,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var fr=this.p.v[0],yr=this.p.v[1],Lr=this.s.v[0]/2,Br=this.s.v[1]/2,Vr=this.d!==3,Wr=this.v;Wr.v[0][0]=fr,Wr.v[0][1]=yr-Br,Wr.v[1][0]=Vr?fr+Lr:fr-Lr,Wr.v[1][1]=yr,Wr.v[2][0]=fr,Wr.v[2][1]=yr+Br,Wr.v[3][0]=Vr?fr-Lr:fr+Lr,Wr.v[3][1]=yr,Wr.i[0][0]=Vr?fr-Lr*or:fr+Lr*or,Wr.i[0][1]=yr-Br,Wr.i[1][0]=Vr?fr+Lr:fr-Lr,Wr.i[1][1]=yr-Br*or,Wr.i[2][0]=Vr?fr+Lr*or:fr-Lr*or,Wr.i[2][1]=yr+Br,Wr.i[3][0]=Vr?fr-Lr:fr+Lr,Wr.i[3][1]=yr+Br*or,Wr.o[0][0]=Vr?fr+Lr*or:fr-Lr*or,Wr.o[0][1]=yr-Br,Wr.o[1][0]=Vr?fr+Lr:fr-Lr,Wr.o[1][1]=yr+Br*or,Wr.o[2][0]=Vr?fr-Lr*or:fr+Lr*or,Wr.o[2][1]=yr+Br,Wr.o[3][0]=Vr?fr-Lr:fr+Lr,Wr.o[3][1]=yr-Br*or}},extendPrototype([DynamicPropertyContainer],hr),hr}(),Kt=function(){function or(hr,fr){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=hr,this.comp=hr.comp,this.data=fr,this.frameId=-1,this.d=fr.d,this.initDynamicPropertyContainer(hr),fr.sy===1?(this.ir=PropertyFactory.getProp(hr,fr.ir,0,0,this),this.is=PropertyFactory.getProp(hr,fr.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(hr,fr.pt,0,0,this),this.p=PropertyFactory.getProp(hr,fr.p,1,0,this),this.r=PropertyFactory.getProp(hr,fr.r,0,degToRads,this),this.or=PropertyFactory.getProp(hr,fr.or,0,0,this),this.os=PropertyFactory.getProp(hr,fr.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return or.prototype={reset:_,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var hr,fr,yr,Lr,Br=2*Math.floor(this.pt.v),Vr=2*Math.PI/Br,Wr=!0,ro=this.or.v,no=this.ir.v,so=this.os.v,ko=this.is.v,To=2*Math.PI*ro/(2*Br),oo=2*Math.PI*no/(2*Br),No=-Math.PI/2;No+=this.r.v;var As=this.data.d===3?-1:1;for(this.v._length=0,hr=0;hr<Br;hr+=1){yr=Wr?so:ko,Lr=Wr?To:oo;var Ks=(fr=Wr?ro:no)*Math.cos(No),vu=fr*Math.sin(No),Fu=Ks===0&&vu===0?0:vu/Math.sqrt(Ks*Ks+vu*vu),Ap=Ks===0&&vu===0?0:-Ks/Math.sqrt(Ks*Ks+vu*vu);Ks+=+this.p.v[0],vu+=+this.p.v[1],this.v.setTripleAt(Ks,vu,Ks-Fu*Lr*yr*As,vu-Ap*Lr*yr*As,Ks+Fu*Lr*yr*As,vu+Ap*Lr*yr*As,hr,!0),Wr=!Wr,No+=Vr*As}},convertPolygonToPath:function(){var hr,fr=Math.floor(this.pt.v),yr=2*Math.PI/fr,Lr=this.or.v,Br=this.os.v,Vr=2*Math.PI*Lr/(4*fr),Wr=.5*-Math.PI,ro=this.data.d===3?-1:1;for(Wr+=this.r.v,this.v._length=0,hr=0;hr<fr;hr+=1){var no=Lr*Math.cos(Wr),so=Lr*Math.sin(Wr),ko=no===0&&so===0?0:so/Math.sqrt(no*no+so*so),To=no===0&&so===0?0:-no/Math.sqrt(no*no+so*so);no+=+this.p.v[0],so+=+this.p.v[1],this.v.setTripleAt(no,so,no-ko*Vr*Br*ro,so-To*Vr*Br*ro,no+ko*Vr*Br*ro,so+To*Vr*Br*ro,hr,!0),Wr+=yr*ro}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],or),or}(),nr=function(){function or(hr,fr){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=hr,this.comp=hr.comp,this.frameId=-1,this.d=fr.d,this.initDynamicPropertyContainer(hr),this.p=PropertyFactory.getProp(hr,fr.p,1,0,this),this.s=PropertyFactory.getProp(hr,fr.s,1,0,this),this.r=PropertyFactory.getProp(hr,fr.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return or.prototype={convertRectToPath:function(){var hr=this.p.v[0],fr=this.p.v[1],yr=this.s.v[0]/2,Lr=this.s.v[1]/2,Br=bmMin(yr,Lr,this.r.v),Vr=Br*(1-roundCorner);this.v._length=0,this.d===2||this.d===1?(this.v.setTripleAt(hr+yr,fr-Lr+Br,hr+yr,fr-Lr+Br,hr+yr,fr-Lr+Vr,0,!0),this.v.setTripleAt(hr+yr,fr+Lr-Br,hr+yr,fr+Lr-Vr,hr+yr,fr+Lr-Br,1,!0),Br!==0?(this.v.setTripleAt(hr+yr-Br,fr+Lr,hr+yr-Br,fr+Lr,hr+yr-Vr,fr+Lr,2,!0),this.v.setTripleAt(hr-yr+Br,fr+Lr,hr-yr+Vr,fr+Lr,hr-yr+Br,fr+Lr,3,!0),this.v.setTripleAt(hr-yr,fr+Lr-Br,hr-yr,fr+Lr-Br,hr-yr,fr+Lr-Vr,4,!0),this.v.setTripleAt(hr-yr,fr-Lr+Br,hr-yr,fr-Lr+Vr,hr-yr,fr-Lr+Br,5,!0),this.v.setTripleAt(hr-yr+Br,fr-Lr,hr-yr+Br,fr-Lr,hr-yr+Vr,fr-Lr,6,!0),this.v.setTripleAt(hr+yr-Br,fr-Lr,hr+yr-Vr,fr-Lr,hr+yr-Br,fr-Lr,7,!0)):(this.v.setTripleAt(hr-yr,fr+Lr,hr-yr+Vr,fr+Lr,hr-yr,fr+Lr,2),this.v.setTripleAt(hr-yr,fr-Lr,hr-yr,fr-Lr+Vr,hr-yr,fr-Lr,3))):(this.v.setTripleAt(hr+yr,fr-Lr+Br,hr+yr,fr-Lr+Vr,hr+yr,fr-Lr+Br,0,!0),Br!==0?(this.v.setTripleAt(hr+yr-Br,fr-Lr,hr+yr-Br,fr-Lr,hr+yr-Vr,fr-Lr,1,!0),this.v.setTripleAt(hr-yr+Br,fr-Lr,hr-yr+Vr,fr-Lr,hr-yr+Br,fr-Lr,2,!0),this.v.setTripleAt(hr-yr,fr-Lr+Br,hr-yr,fr-Lr+Br,hr-yr,fr-Lr+Vr,3,!0),this.v.setTripleAt(hr-yr,fr+Lr-Br,hr-yr,fr+Lr-Vr,hr-yr,fr+Lr-Br,4,!0),this.v.setTripleAt(hr-yr+Br,fr+Lr,hr-yr+Br,fr+Lr,hr-yr+Vr,fr+Lr,5,!0),this.v.setTripleAt(hr+yr-Br,fr+Lr,hr+yr-Vr,fr+Lr,hr+yr-Br,fr+Lr,6,!0),this.v.setTripleAt(hr+yr,fr+Lr-Br,hr+yr,fr+Lr-Br,hr+yr,fr+Lr-Vr,7,!0)):(this.v.setTripleAt(hr-yr,fr-Lr,hr-yr+Vr,fr-Lr,hr-yr,fr-Lr,1,!0),this.v.setTripleAt(hr-yr,fr+Lr,hr-yr,fr+Lr-Vr,hr-yr,fr+Lr,2,!0),this.v.setTripleAt(hr+yr,fr+Lr,hr+yr-Vr,fr+Lr,hr+yr,fr+Lr,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:_},extendPrototype([DynamicPropertyContainer],or),or}(),rr={getShapeProp:function(or,hr,fr){var yr;return fr===3||fr===4?yr=(fr===3?hr.pt:hr.ks).k.length?new Ut(or,hr,fr):new Mt(or,hr,fr):fr===5?yr=new nr(or,hr):fr===6?yr=new Xt(or,hr):fr===7&&(yr=new Kt(or,hr)),yr.k&&or.addDynamicProperty(yr),yr},getConstructorFunction:function(){return Mt},getKeyframedConstructorFunction:function(){return Ut}};return rr}(),Matrix=function(){var o=Math.cos,i=Math.sin,s=Math.tan,_=Math.round;function _e(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function ct(Lo){if(Lo===0)return this;var Au=o(Lo),Mp=i(Lo);return this._t(Au,-Mp,0,0,Mp,Au,0,0,0,0,1,0,0,0,0,1)}function Mt(Lo){if(Lo===0)return this;var Au=o(Lo),Mp=i(Lo);return this._t(1,0,0,0,0,Au,-Mp,0,0,Mp,Au,0,0,0,0,1)}function Ft(Lo){if(Lo===0)return this;var Au=o(Lo),Mp=i(Lo);return this._t(Au,0,Mp,0,0,1,0,0,-Mp,0,Au,0,0,0,0,1)}function Ut(Lo){if(Lo===0)return this;var Au=o(Lo),Mp=i(Lo);return this._t(Au,-Mp,0,0,Mp,Au,0,0,0,0,1,0,0,0,0,1)}function Xt(Lo,Au){return this._t(1,Au,Lo,1,0,0)}function Kt(Lo,Au){return this.shear(s(Lo),s(Au))}function nr(Lo,Au){var Mp=o(Au),Lp=i(Au);return this._t(Mp,Lp,0,0,-Lp,Mp,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,s(Lo),1,0,0,0,0,1,0,0,0,0,1)._t(Mp,-Lp,0,0,Lp,Mp,0,0,0,0,1,0,0,0,0,1)}function rr(Lo,Au,Mp){return Mp||Mp===0||(Mp=1),Lo===1&&Au===1&&Mp===1?this:this._t(Lo,0,0,0,0,Au,0,0,0,0,Mp,0,0,0,0,1)}function or(Lo,Au,Mp,Lp,Op,Fp,wm,Bp,Em,Yp,_m,Tm,Im,Mm,Bm,zm){return this.props[0]=Lo,this.props[1]=Au,this.props[2]=Mp,this.props[3]=Lp,this.props[4]=Op,this.props[5]=Fp,this.props[6]=wm,this.props[7]=Bp,this.props[8]=Em,this.props[9]=Yp,this.props[10]=_m,this.props[11]=Tm,this.props[12]=Im,this.props[13]=Mm,this.props[14]=Bm,this.props[15]=zm,this}function hr(Lo,Au,Mp){return Mp=Mp||0,Lo!==0||Au!==0||Mp!==0?this._t(1,0,0,0,0,1,0,0,0,0,1,0,Lo,Au,Mp,1):this}function fr(Lo,Au,Mp,Lp,Op,Fp,wm,Bp,Em,Yp,_m,Tm,Im,Mm,Bm,zm){var Am=this.props;if(Lo===1&&Au===0&&Mp===0&&Lp===0&&Op===0&&Fp===1&&wm===0&&Bp===0&&Em===0&&Yp===0&&_m===1&&Tm===0)return Am[12]=Am[12]*Lo+Am[15]*Im,Am[13]=Am[13]*Fp+Am[15]*Mm,Am[14]=Am[14]*_m+Am[15]*Bm,Am[15]*=zm,this._identityCalculated=!1,this;var Om=Am[0],Hm=Am[1],u1=Am[2],a1=Am[3],Gm=Am[4],c1=Am[5],m1=Am[6],Sm=Am[7],Nm=Am[8],Qp=Am[9],$m=Am[10],Pm=Am[11],Fm=Am[12],Rm=Am[13],Dm=Am[14],Zm=Am[15];return Am[0]=Om*Lo+Hm*Op+u1*Em+a1*Im,Am[1]=Om*Au+Hm*Fp+u1*Yp+a1*Mm,Am[2]=Om*Mp+Hm*wm+u1*_m+a1*Bm,Am[3]=Om*Lp+Hm*Bp+u1*Tm+a1*zm,Am[4]=Gm*Lo+c1*Op+m1*Em+Sm*Im,Am[5]=Gm*Au+c1*Fp+m1*Yp+Sm*Mm,Am[6]=Gm*Mp+c1*wm+m1*_m+Sm*Bm,Am[7]=Gm*Lp+c1*Bp+m1*Tm+Sm*zm,Am[8]=Nm*Lo+Qp*Op+$m*Em+Pm*Im,Am[9]=Nm*Au+Qp*Fp+$m*Yp+Pm*Mm,Am[10]=Nm*Mp+Qp*wm+$m*_m+Pm*Bm,Am[11]=Nm*Lp+Qp*Bp+$m*Tm+Pm*zm,Am[12]=Fm*Lo+Rm*Op+Dm*Em+Zm*Im,Am[13]=Fm*Au+Rm*Fp+Dm*Yp+Zm*Mm,Am[14]=Fm*Mp+Rm*wm+Dm*_m+Zm*Bm,Am[15]=Fm*Lp+Rm*Bp+Dm*Tm+Zm*zm,this._identityCalculated=!1,this}function yr(Lo){var Au=Lo.props;return this.transform(Au[0],Au[1],Au[2],Au[3],Au[4],Au[5],Au[6],Au[7],Au[8],Au[9],Au[10],Au[11],Au[12],Au[13],Au[14],Au[15])}function Lr(){return this._identityCalculated||(this._identity=!(this.props[0]!==1||this.props[1]!==0||this.props[2]!==0||this.props[3]!==0||this.props[4]!==0||this.props[5]!==1||this.props[6]!==0||this.props[7]!==0||this.props[8]!==0||this.props[9]!==0||this.props[10]!==1||this.props[11]!==0||this.props[12]!==0||this.props[13]!==0||this.props[14]!==0||this.props[15]!==1),this._identityCalculated=!0),this._identity}function Br(Lo){for(var Au=0;Au<16;){if(Lo.props[Au]!==this.props[Au])return!1;Au+=1}return!0}function Vr(Lo){var Au;for(Au=0;Au<16;Au+=1)Lo.props[Au]=this.props[Au];return Lo}function Wr(Lo){var Au;for(Au=0;Au<16;Au+=1)this.props[Au]=Lo[Au]}function ro(Lo,Au,Mp){return{x:Lo*this.props[0]+Au*this.props[4]+Mp*this.props[8]+this.props[12],y:Lo*this.props[1]+Au*this.props[5]+Mp*this.props[9]+this.props[13],z:Lo*this.props[2]+Au*this.props[6]+Mp*this.props[10]+this.props[14]}}function no(Lo,Au,Mp){return Lo*this.props[0]+Au*this.props[4]+Mp*this.props[8]+this.props[12]}function so(Lo,Au,Mp){return Lo*this.props[1]+Au*this.props[5]+Mp*this.props[9]+this.props[13]}function ko(Lo,Au,Mp){return Lo*this.props[2]+Au*this.props[6]+Mp*this.props[10]+this.props[14]}function To(){var Lo=this.props[0]*this.props[5]-this.props[1]*this.props[4],Au=this.props[5]/Lo,Mp=-this.props[1]/Lo,Lp=-this.props[4]/Lo,Op=this.props[0]/Lo,Fp=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/Lo,wm=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/Lo,Bp=new Matrix;return Bp.props[0]=Au,Bp.props[1]=Mp,Bp.props[4]=Lp,Bp.props[5]=Op,Bp.props[12]=Fp,Bp.props[13]=wm,Bp}function oo(Lo){return this.getInverseMatrix().applyToPointArray(Lo[0],Lo[1],Lo[2]||0)}function No(Lo){var Au,Mp=Lo.length,Lp=[];for(Au=0;Au<Mp;Au+=1)Lp[Au]=oo(Lo[Au]);return Lp}function As(Lo,Au,Mp){var Lp=createTypedArray("float32",6);if(this.isIdentity())Lp[0]=Lo[0],Lp[1]=Lo[1],Lp[2]=Au[0],Lp[3]=Au[1],Lp[4]=Mp[0],Lp[5]=Mp[1];else{var Op=this.props[0],Fp=this.props[1],wm=this.props[4],Bp=this.props[5],Em=this.props[12],Yp=this.props[13];Lp[0]=Lo[0]*Op+Lo[1]*wm+Em,Lp[1]=Lo[0]*Fp+Lo[1]*Bp+Yp,Lp[2]=Au[0]*Op+Au[1]*wm+Em,Lp[3]=Au[0]*Fp+Au[1]*Bp+Yp,Lp[4]=Mp[0]*Op+Mp[1]*wm+Em,Lp[5]=Mp[0]*Fp+Mp[1]*Bp+Yp}return Lp}function Ks(Lo,Au,Mp){return this.isIdentity()?[Lo,Au,Mp]:[Lo*this.props[0]+Au*this.props[4]+Mp*this.props[8]+this.props[12],Lo*this.props[1]+Au*this.props[5]+Mp*this.props[9]+this.props[13],Lo*this.props[2]+Au*this.props[6]+Mp*this.props[10]+this.props[14]]}function vu(Lo,Au){if(this.isIdentity())return Lo+","+Au;var Mp=this.props;return Math.round(100*(Lo*Mp[0]+Au*Mp[4]+Mp[12]))/100+","+Math.round(100*(Lo*Mp[1]+Au*Mp[5]+Mp[13]))/100}function Fu(){for(var Lo=0,Au=this.props,Mp="matrix3d(";Lo<16;)Mp+=_(1e4*Au[Lo])/1e4,Mp+=Lo===15?")":",",Lo+=1;return Mp}function Ap(Lo){return Lo<1e-6&&Lo>0||Lo>-1e-6&&Lo<0?_(1e4*Lo)/1e4:Lo}function Pp(){var Lo=this.props;return"matrix("+Ap(Lo[0])+","+Ap(Lo[1])+","+Ap(Lo[4])+","+Ap(Lo[5])+","+Ap(Lo[12])+","+Ap(Lo[13])+")"}return function(){this.reset=_e,this.rotate=ct,this.rotateX=Mt,this.rotateY=Ft,this.rotateZ=Ut,this.skew=Kt,this.skewFromAxis=nr,this.shear=Xt,this.scale=rr,this.setTransform=or,this.translate=hr,this.transform=fr,this.multiply=yr,this.applyToPoint=ro,this.applyToX=no,this.applyToY=so,this.applyToZ=ko,this.applyToPointArray=Ks,this.applyToTriplePoints=As,this.applyToPointStringified=vu,this.toCSS=Fu,this.to2dCSS=Pp,this.clone=Vr,this.cloneFromProps=Wr,this.equals=Br,this.inversePoints=No,this.inversePoint=oo,this.getInverseMatrix=To,this._t=this.transform,this.isIdentity=Lr,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();function _typeof$3(o){return _typeof$3=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},_typeof$3(o)}var lottie={};function setLocation(o){setLocationHref(o)}function searchAnimations(){animationManager.searchAnimations()}function setSubframeRendering(o){setSubframeEnabled(o)}function setPrefix(o){setIdPrefix(o)}function loadAnimation(o){return animationManager.loadAnimation(o)}function setQuality(o){if(typeof o=="string")switch(o){case"high":setDefaultCurveSegments(200);break;default:case"medium":setDefaultCurveSegments(50);break;case"low":setDefaultCurveSegments(10)}else!isNaN(o)&&o>1&&setDefaultCurveSegments(o)}function inBrowser(){return typeof navigator<"u"}function installPlugin(o,i){o==="expressions"&&setExpressionsPlugin(i)}function getFactory(o){switch(o){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}function checkReady(){document.readyState==="complete"&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(o){for(var i=queryString.split("&"),s=0;s<i.length;s+=1){var _=i[s].split("=");if(decodeURIComponent(_[0])==o)return decodeURIComponent(_[1])}return null}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocation,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.useWebWorker=setWebWorker,lottie.setIDPrefix=setPrefix,lottie.__getFactory=getFactory,lottie.version="5.12.2";var queryString="",scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src?myScript.src.replace(/^[^\?]+\??/,""):"",getQueryVariable("renderer");var readyStateCheckInterval=setInterval(checkReady,100);try{_typeof$3(exports)!=="object"&&(window.bodymovin=lottie)}catch(o){}var ShapeModifiers=function(){var o={},i={};return o.registerModifier=function(s,_){i[s]||(i[s]=_)},o.getModifier=function(s,_,_e){return new i[s](_,_e)},o}();function ShapeModifier(){}function TrimModifier(){}function PuckerAndBloatModifier(){}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(o){if(!this.closed){o.sh.container.addDynamicProperty(o.sh);var i={shape:o.sh,data:o,localShapeCollection:shapeCollectionPool.newShapeCollection()};this.shapes.push(i),this.addShapeToModifier(i),this._isAnimated&&o.setAsAnimated()}},ShapeModifier.prototype.init=function(o,i){this.shapes=[],this.elem=o,this.initDynamicPropertyContainer(o),this.initModifierProperties(o,i),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier),extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(o,i){this.s=PropertyFactory.getProp(o,i.s,0,.01,this),this.e=PropertyFactory.getProp(o,i.e,0,.01,this),this.o=PropertyFactory.getProp(o,i.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=i.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(o){o.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(o,i,s,_,_e){var ct=[];i<=1?ct.push({s:o,e:i}):o>=1?ct.push({s:o-1,e:i-1}):(ct.push({s:o,e:1}),ct.push({s:0,e:i-1}));var Mt,Ft,Ut=[],Xt=ct.length;for(Mt=0;Mt<Xt;Mt+=1){var Kt,nr;(Ft=ct[Mt]).e*_e<_||Ft.s*_e>_+s||(Kt=Ft.s*_e<=_?0:(Ft.s*_e-_)/s,nr=Ft.e*_e>=_+s?1:(Ft.e*_e-_)/s,Ut.push([Kt,nr]))}return Ut.length||Ut.push([0,0]),Ut},TrimModifier.prototype.releasePathsData=function(o){var i,s=o.length;for(i=0;i<s;i+=1)segmentsLengthPool.release(o[i]);return o.length=0,o},TrimModifier.prototype.processShapes=function(o){var i,s,_,_e;if(this._mdf||o){var ct=this.o.v%360/360;if(ct<0&&(ct+=1),(i=this.s.v>1?1+ct:this.s.v<0?0+ct:this.s.v+ct)>(s=this.e.v>1?1+ct:this.e.v<0?0+ct:this.e.v+ct)){var Mt=i;i=s,s=Mt}i=1e-4*Math.round(1e4*i),s=1e-4*Math.round(1e4*s),this.sValue=i,this.eValue=s}else i=this.sValue,s=this.eValue;var Ft,Ut,Xt,Kt,nr,rr=this.shapes.length,or=0;if(s===i)for(_e=0;_e<rr;_e+=1)this.shapes[_e].localShapeCollection.releaseShapes(),this.shapes[_e].shape._mdf=!0,this.shapes[_e].shape.paths=this.shapes[_e].localShapeCollection,this._mdf&&(this.shapes[_e].pathsData.length=0);else if(s===1&&i===0||s===0&&i===1){if(this._mdf)for(_e=0;_e<rr;_e+=1)this.shapes[_e].pathsData.length=0,this.shapes[_e].shape._mdf=!0}else{var hr,fr,yr=[];for(_e=0;_e<rr;_e+=1)if((hr=this.shapes[_e]).shape._mdf||this._mdf||o||this.m===2){if(Ut=(_=hr.shape.paths)._length,nr=0,!hr.shape._mdf&&hr.pathsData.length)nr=hr.totalShapeLength;else{for(Xt=this.releasePathsData(hr.pathsData),Ft=0;Ft<Ut;Ft+=1)Kt=bez.getSegmentsLength(_.shapes[Ft]),Xt.push(Kt),nr+=Kt.totalLength;hr.totalShapeLength=nr,hr.pathsData=Xt}or+=nr,hr.shape._mdf=!0}else hr.shape.paths=hr.localShapeCollection;var Lr,Br=i,Vr=s,Wr=0;for(_e=rr-1;_e>=0;_e-=1)if((hr=this.shapes[_e]).shape._mdf){for((fr=hr.localShapeCollection).releaseShapes(),this.m===2&&rr>1?(Lr=this.calculateShapeEdges(i,s,hr.totalShapeLength,Wr,or),Wr+=hr.totalShapeLength):Lr=[[Br,Vr]],Ut=Lr.length,Ft=0;Ft<Ut;Ft+=1){Br=Lr[Ft][0],Vr=Lr[Ft][1],yr.length=0,Vr<=1?yr.push({s:hr.totalShapeLength*Br,e:hr.totalShapeLength*Vr}):Br>=1?yr.push({s:hr.totalShapeLength*(Br-1),e:hr.totalShapeLength*(Vr-1)}):(yr.push({s:hr.totalShapeLength*Br,e:hr.totalShapeLength}),yr.push({s:0,e:hr.totalShapeLength*(Vr-1)}));var ro=this.addShapes(hr,yr[0]);if(yr[0].s!==yr[0].e){if(yr.length>1)if(hr.shape.paths.shapes[hr.shape.paths._length-1].c){var no=ro.pop();this.addPaths(ro,fr),ro=this.addShapes(hr,yr[1],no)}else this.addPaths(ro,fr),ro=this.addShapes(hr,yr[1]);this.addPaths(ro,fr)}}hr.shape.paths=fr}}},TrimModifier.prototype.addPaths=function(o,i){var s,_=o.length;for(s=0;s<_;s+=1)i.addShape(o[s])},TrimModifier.prototype.addSegment=function(o,i,s,_,_e,ct,Mt){_e.setXYAt(i[0],i[1],"o",ct),_e.setXYAt(s[0],s[1],"i",ct+1),Mt&&_e.setXYAt(o[0],o[1],"v",ct),_e.setXYAt(_[0],_[1],"v",ct+1)},TrimModifier.prototype.addSegmentFromArray=function(o,i,s,_){i.setXYAt(o[1],o[5],"o",s),i.setXYAt(o[2],o[6],"i",s+1),_&&i.setXYAt(o[0],o[4],"v",s),i.setXYAt(o[3],o[7],"v",s+1)},TrimModifier.prototype.addShapes=function(o,i,s){var _,_e,ct,Mt,Ft,Ut,Xt,Kt,nr=o.pathsData,rr=o.shape.paths.shapes,or=o.shape.paths._length,hr=0,fr=[],yr=!0;for(s?(Ft=s._length,Kt=s._length):(s=shapePool.newElement(),Ft=0,Kt=0),fr.push(s),_=0;_<or;_+=1){for(Ut=nr[_].lengths,s.c=rr[_].c,ct=rr[_].c?Ut.length:Ut.length+1,_e=1;_e<ct;_e+=1)if(hr+(Mt=Ut[_e-1]).addedLength<i.s)hr+=Mt.addedLength,s.c=!1;else{if(hr>i.e){s.c=!1;break}i.s<=hr&&i.e>=hr+Mt.addedLength?(this.addSegment(rr[_].v[_e-1],rr[_].o[_e-1],rr[_].i[_e],rr[_].v[_e],s,Ft,yr),yr=!1):(Xt=bez.getNewSegment(rr[_].v[_e-1],rr[_].v[_e],rr[_].o[_e-1],rr[_].i[_e],(i.s-hr)/Mt.addedLength,(i.e-hr)/Mt.addedLength,Ut[_e-1]),this.addSegmentFromArray(Xt,s,Ft,yr),yr=!1,s.c=!1),hr+=Mt.addedLength,Ft+=1}if(rr[_].c&&Ut.length){if(Mt=Ut[_e-1],hr<=i.e){var Lr=Ut[_e-1].addedLength;i.s<=hr&&i.e>=hr+Lr?(this.addSegment(rr[_].v[_e-1],rr[_].o[_e-1],rr[_].i[0],rr[_].v[0],s,Ft,yr),yr=!1):(Xt=bez.getNewSegment(rr[_].v[_e-1],rr[_].v[0],rr[_].o[_e-1],rr[_].i[0],(i.s-hr)/Lr,(i.e-hr)/Lr,Ut[_e-1]),this.addSegmentFromArray(Xt,s,Ft,yr),yr=!1,s.c=!1)}else s.c=!1;hr+=Mt.addedLength,Ft+=1}if(s._length&&(s.setXYAt(s.v[Kt][0],s.v[Kt][1],"i",Kt),s.setXYAt(s.v[s._length-1][0],s.v[s._length-1][1],"o",s._length-1)),hr>i.e)break;_<or-1&&(s=shapePool.newElement(),yr=!0,fr.push(s),Ft=0)}return fr},extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(o,i){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(o,i.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(o,i){var s=i/100,_=[0,0],_e=o._length,ct=0;for(ct=0;ct<_e;ct+=1)_[0]+=o.v[ct][0],_[1]+=o.v[ct][1];_[0]/=_e,_[1]/=_e;var Mt,Ft,Ut,Xt,Kt,nr,rr=shapePool.newElement();for(rr.c=o.c,ct=0;ct<_e;ct+=1)Mt=o.v[ct][0]+(_[0]-o.v[ct][0])*s,Ft=o.v[ct][1]+(_[1]-o.v[ct][1])*s,Ut=o.o[ct][0]+(_[0]-o.o[ct][0])*-s,Xt=o.o[ct][1]+(_[1]-o.o[ct][1])*-s,Kt=o.i[ct][0]+(_[0]-o.i[ct][0])*-s,nr=o.i[ct][1]+(_[1]-o.i[ct][1])*-s,rr.setTripleAt(Mt,Ft,Ut,Xt,Kt,nr,ct);return rr},PuckerAndBloatModifier.prototype.processShapes=function(o){var i,s,_,_e,ct,Mt,Ft=this.shapes.length,Ut=this.amount.v;if(Ut!==0)for(s=0;s<Ft;s+=1){if(Mt=(ct=this.shapes[s]).localShapeCollection,ct.shape._mdf||this._mdf||o)for(Mt.releaseShapes(),ct.shape._mdf=!0,i=ct.shape.paths.shapes,_e=ct.shape.paths._length,_=0;_<_e;_+=1)Mt.addShape(this.processPath(i[_],Ut));ct.shape.paths=ct.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)};var TransformPropertyFactory=function(){var o=[0,0];function i(s,_,_e){if(this.elem=s,this.frameId=-1,this.propType="transform",this.data=_,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(_e||s),_.p&&_.p.s?(this.px=PropertyFactory.getProp(s,_.p.x,0,0,this),this.py=PropertyFactory.getProp(s,_.p.y,0,0,this),_.p.z&&(this.pz=PropertyFactory.getProp(s,_.p.z,0,0,this))):this.p=PropertyFactory.getProp(s,_.p||{k:[0,0,0]},1,0,this),_.rx){if(this.rx=PropertyFactory.getProp(s,_.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(s,_.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(s,_.rz,0,degToRads,this),_.or.k[0].ti){var ct,Mt=_.or.k.length;for(ct=0;ct<Mt;ct+=1)_.or.k[ct].to=null,_.or.k[ct].ti=null}this.or=PropertyFactory.getProp(s,_.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(s,_.r||{k:0},0,degToRads,this);_.sk&&(this.sk=PropertyFactory.getProp(s,_.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(s,_.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(s,_.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(s,_.s||{k:[100,100,100]},1,.01,this),_.o?this.o=PropertyFactory.getProp(s,_.o,0,.01,s):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}return i.prototype={applyToMatrix:function(s){var _=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||_,this.a&&s.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&s.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&s.skewFromAxis(-this.sk.v,this.sa.v),this.r?s.rotate(-this.r.v):s.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?s.translate(this.px.v,this.py.v,-this.pz.v):s.translate(this.px.v,this.py.v,0):s.translate(this.p.v[0],this.p.v[1],-this.p.v[2])},getValue:function(s){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||s){var _;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var _e,ct;if(_=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(_e=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/_,0),ct=this.p.getValueAtTime(this.p.keyframes[0].t/_,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(_e=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/_,0),ct=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/_,0)):(_e=this.p.pv,ct=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/_,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){_e=[],ct=[];var Mt=this.px,Ft=this.py;Mt._caching.lastFrame+Mt.offsetTime<=Mt.keyframes[0].t?(_e[0]=Mt.getValueAtTime((Mt.keyframes[0].t+.01)/_,0),_e[1]=Ft.getValueAtTime((Ft.keyframes[0].t+.01)/_,0),ct[0]=Mt.getValueAtTime(Mt.keyframes[0].t/_,0),ct[1]=Ft.getValueAtTime(Ft.keyframes[0].t/_,0)):Mt._caching.lastFrame+Mt.offsetTime>=Mt.keyframes[Mt.keyframes.length-1].t?(_e[0]=Mt.getValueAtTime(Mt.keyframes[Mt.keyframes.length-1].t/_,0),_e[1]=Ft.getValueAtTime(Ft.keyframes[Ft.keyframes.length-1].t/_,0),ct[0]=Mt.getValueAtTime((Mt.keyframes[Mt.keyframes.length-1].t-.01)/_,0),ct[1]=Ft.getValueAtTime((Ft.keyframes[Ft.keyframes.length-1].t-.01)/_,0)):(_e=[Mt.pv,Ft.pv],ct[0]=Mt.getValueAtTime((Mt._caching.lastFrame+Mt.offsetTime-.01)/_,Mt.offsetTime),ct[1]=Ft.getValueAtTime((Ft._caching.lastFrame+Ft.offsetTime-.01)/_,Ft.offsetTime))}else _e=ct=o;this.v.rotate(-Math.atan2(_e[1]-ct[1],_e[0]-ct[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}},precalculateMatrix:function(){if(this.appliedTransformations=0,this.pre.reset(),!this.a.effectsSequence.length&&(this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1,!this.s.effectsSequence.length)){if(this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2,this.sk){if(this.sk.effectsSequence.length||this.sa.effectsSequence.length)return;this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3}this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):this.rz.effectsSequence.length||this.ry.effectsSequence.length||this.rx.effectsSequence.length||this.or.effectsSequence.length||(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}},autoOrient:function(){}},extendPrototype([DynamicPropertyContainer],i),i.prototype.addDynamicProperty=function(s){this._addDynamicProperty(s),this.elem.addDynamicProperty(s),this._isDirty=!0},i.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty,{getTransformProperty:function(s,_,_e){return new i(s,_,_e)}}}();function RepeaterModifier(){}function RoundCornersModifier(){}function floatEqual(o,i){return 1e5*Math.abs(o-i)<=Math.min(Math.abs(o),Math.abs(i))}function floatZero(o){return Math.abs(o)<=1e-5}function lerp(o,i,s){return o*(1-s)+i*s}function lerpPoint(o,i,s){return[lerp(o[0],i[0],s),lerp(o[1],i[1],s)]}function quadRoots(o,i,s){if(o===0)return[];var _=i*i-4*o*s;if(_<0)return[];var _e=-i/(2*o);if(_===0)return[_e];var ct=Math.sqrt(_)/(2*o);return[_e-ct,_e+ct]}function polynomialCoefficients(o,i,s,_){return[3*i-o-3*s+_,3*o-6*i+3*s,-3*o+3*i,o]}function singlePoint(o){return new PolynomialBezier(o,o,o,o,!1)}function PolynomialBezier(o,i,s,_,_e){_e&&pointEqual(o,i)&&(i=lerpPoint(o,_,1/3)),_e&&pointEqual(s,_)&&(s=lerpPoint(o,_,2/3));var ct=polynomialCoefficients(o[0],i[0],s[0],_[0]),Mt=polynomialCoefficients(o[1],i[1],s[1],_[1]);this.a=[ct[0],Mt[0]],this.b=[ct[1],Mt[1]],this.c=[ct[2],Mt[2]],this.d=[ct[3],Mt[3]],this.points=[o,i,s,_]}function extrema(o,i){var s=o.points[0][i],_=o.points[o.points.length-1][i];if(s>_){var _e=_;_=s,s=_e}for(var ct=quadRoots(3*o.a[i],2*o.b[i],o.c[i]),Mt=0;Mt<ct.length;Mt+=1)if(ct[Mt]>0&&ct[Mt]<1){var Ft=o.point(ct[Mt])[i];Ft<s?s=Ft:Ft>_&&(_=Ft)}return{min:s,max:_}}function intersectData(o,i,s){var _=o.boundingBox();return{cx:_.cx,cy:_.cy,width:_.width,height:_.height,bez:o,t:(i+s)/2,t1:i,t2:s}}function splitData(o){var i=o.bez.split(.5);return[intersectData(i[0],o.t1,o.t),intersectData(i[1],o.t,o.t2)]}function boxIntersect(o,i){return 2*Math.abs(o.cx-i.cx)<o.width+i.width&&2*Math.abs(o.cy-i.cy)<o.height+i.height}function intersectsImpl(o,i,s,_,_e,ct){if(boxIntersect(o,i))if(s>=ct||o.width<=_&&o.height<=_&&i.width<=_&&i.height<=_)_e.push([o.t,i.t]);else{var Mt=splitData(o),Ft=splitData(i);intersectsImpl(Mt[0],Ft[0],s+1,_,_e,ct),intersectsImpl(Mt[0],Ft[1],s+1,_,_e,ct),intersectsImpl(Mt[1],Ft[0],s+1,_,_e,ct),intersectsImpl(Mt[1],Ft[1],s+1,_,_e,ct)}}function crossProduct(o,i){return[o[1]*i[2]-o[2]*i[1],o[2]*i[0]-o[0]*i[2],o[0]*i[1]-o[1]*i[0]]}function lineIntersection(o,i,s,_){var _e=[o[0],o[1],1],ct=[i[0],i[1],1],Mt=[s[0],s[1],1],Ft=[_[0],_[1],1],Ut=crossProduct(crossProduct(_e,ct),crossProduct(Mt,Ft));return floatZero(Ut[2])?null:[Ut[0]/Ut[2],Ut[1]/Ut[2]]}function polarOffset(o,i,s){return[o[0]+Math.cos(i)*s,o[1]-Math.sin(i)*s]}function pointDistance(o,i){return Math.hypot(o[0]-i[0],o[1]-i[1])}function pointEqual(o,i){return floatEqual(o[0],i[0])&&floatEqual(o[1],i[1])}function ZigZagModifier(){}function setPoint(o,i,s,_,_e,ct,Mt){var Ft=s-Math.PI/2,Ut=s+Math.PI/2,Xt=i[0]+Math.cos(s)*_*_e,Kt=i[1]-Math.sin(s)*_*_e;o.setTripleAt(Xt,Kt,Xt+Math.cos(Ft)*ct,Kt-Math.sin(Ft)*ct,Xt+Math.cos(Ut)*Mt,Kt-Math.sin(Ut)*Mt,o.length())}function getPerpendicularVector(o,i){var s=[i[0]-o[0],i[1]-o[1]],_=.5*-Math.PI;return[Math.cos(_)*s[0]-Math.sin(_)*s[1],Math.sin(_)*s[0]+Math.cos(_)*s[1]]}function getProjectingAngle(o,i){var s=i===0?o.length()-1:i-1,_=(i+1)%o.length(),_e=getPerpendicularVector(o.v[s],o.v[_]);return Math.atan2(0,1)-Math.atan2(_e[1],_e[0])}function zigZagCorner(o,i,s,_,_e,ct,Mt){var Ft=getProjectingAngle(i,s),Ut=i.v[s%i._length],Xt=i.v[s===0?i._length-1:s-1],Kt=i.v[(s+1)%i._length],nr=ct===2?Math.sqrt(Math.pow(Ut[0]-Xt[0],2)+Math.pow(Ut[1]-Xt[1],2)):0,rr=ct===2?Math.sqrt(Math.pow(Ut[0]-Kt[0],2)+Math.pow(Ut[1]-Kt[1],2)):0;setPoint(o,i.v[s%i._length],Ft,Mt,_,rr/(2*(_e+1)),nr/(2*(_e+1)))}function zigZagSegment(o,i,s,_,_e,ct){for(var Mt=0;Mt<_;Mt+=1){var Ft=(Mt+1)/(_+1),Ut=_e===2?Math.sqrt(Math.pow(i.points[3][0]-i.points[0][0],2)+Math.pow(i.points[3][1]-i.points[0][1],2)):0,Xt=i.normalAngle(Ft);setPoint(o,i.point(Ft),Xt,ct,s,Ut/(2*(_+1)),Ut/(2*(_+1))),ct=-ct}return ct}function linearOffset(o,i,s){var _=Math.atan2(i[0]-o[0],i[1]-o[1]);return[polarOffset(o,_,s),polarOffset(i,_,s)]}function offsetSegment(o,i){var s,_,_e,ct,Mt,Ft,Ut;s=(Ut=linearOffset(o.points[0],o.points[1],i))[0],_=Ut[1],_e=(Ut=linearOffset(o.points[1],o.points[2],i))[0],ct=Ut[1],Mt=(Ut=linearOffset(o.points[2],o.points[3],i))[0],Ft=Ut[1];var Xt=lineIntersection(s,_,_e,ct);Xt===null&&(Xt=_);var Kt=lineIntersection(Mt,Ft,_e,ct);return Kt===null&&(Kt=Mt),new PolynomialBezier(s,Xt,Kt,Ft)}function joinLines(o,i,s,_,_e){var ct=i.points[3],Mt=s.points[0];if(_===3||pointEqual(ct,Mt))return ct;if(_===2){var Ft=-i.tangentAngle(1),Ut=-s.tangentAngle(0)+Math.PI,Xt=lineIntersection(ct,polarOffset(ct,Ft+Math.PI/2,100),Mt,polarOffset(Mt,Ft+Math.PI/2,100)),Kt=Xt?pointDistance(Xt,ct):pointDistance(ct,Mt)/2,nr=polarOffset(ct,Ft,2*Kt*roundCorner);return o.setXYAt(nr[0],nr[1],"o",o.length()-1),nr=polarOffset(Mt,Ut,2*Kt*roundCorner),o.setTripleAt(Mt[0],Mt[1],Mt[0],Mt[1],nr[0],nr[1],o.length()),Mt}var rr=lineIntersection(pointEqual(ct,i.points[2])?i.points[0]:i.points[2],ct,Mt,pointEqual(Mt,s.points[1])?s.points[3]:s.points[1]);return rr&&pointDistance(rr,ct)<_e?(o.setTripleAt(rr[0],rr[1],rr[0],rr[1],rr[0],rr[1],o.length()),rr):ct}function getIntersection(o,i){var s=o.intersections(i);return s.length&&floatEqual(s[0][0],1)&&s.shift(),s.length?s[0]:null}function pruneSegmentIntersection(o,i){var s=o.slice(),_=i.slice(),_e=getIntersection(o[o.length-1],i[0]);return _e&&(s[o.length-1]=o[o.length-1].split(_e[0])[0],_[0]=i[0].split(_e[1])[1]),o.length>1&&i.length>1&&(_e=getIntersection(o[0],i[i.length-1]))?[[o[0].split(_e[0])[0]],[i[i.length-1].split(_e[1])[1]]]:[s,_]}function pruneIntersections(o){for(var i,s=1;s<o.length;s+=1)i=pruneSegmentIntersection(o[s-1],o[s]),o[s-1]=i[0],o[s]=i[1];return o.length>1&&(i=pruneSegmentIntersection(o[o.length-1],o[0]),o[o.length-1]=i[0],o[0]=i[1]),o}function offsetSegmentSplit(o,i){var s,_,_e,ct,Mt=o.inflectionPoints();if(Mt.length===0)return[offsetSegment(o,i)];if(Mt.length===1||floatEqual(Mt[1],1))return s=(_e=o.split(Mt[0]))[0],_=_e[1],[offsetSegment(s,i),offsetSegment(_,i)];s=(_e=o.split(Mt[0]))[0];var Ft=(Mt[1]-Mt[0])/(1-Mt[0]);return ct=(_e=_e[1].split(Ft))[0],_=_e[1],[offsetSegment(s,i),offsetSegment(ct,i),offsetSegment(_,i)]}function OffsetPathModifier(){}function getFontProperties(o){for(var i=o.fStyle?o.fStyle.split(" "):[],s="normal",_="normal",_e=i.length,ct=0;ct<_e;ct+=1)switch(i[ct].toLowerCase()){case"italic":_="italic";break;case"bold":s="700";break;case"black":s="900";break;case"medium":s="500";break;case"regular":case"normal":s="400";break;case"light":case"thin":s="200"}return{style:_,weight:o.fWeight||s}}extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(o,i){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(o,i.c,0,null,this),this.o=PropertyFactory.getProp(o,i.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(o,i.tr,this),this.so=PropertyFactory.getProp(o,i.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(o,i.tr.eo,0,.01,this),this.data=i,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(o,i,s,_,_e,ct){var Mt=ct?-1:1,Ft=_.s.v[0]+(1-_.s.v[0])*(1-_e),Ut=_.s.v[1]+(1-_.s.v[1])*(1-_e);o.translate(_.p.v[0]*Mt*_e,_.p.v[1]*Mt*_e,_.p.v[2]),i.translate(-_.a.v[0],-_.a.v[1],_.a.v[2]),i.rotate(-_.r.v*Mt*_e),i.translate(_.a.v[0],_.a.v[1],_.a.v[2]),s.translate(-_.a.v[0],-_.a.v[1],_.a.v[2]),s.scale(ct?1/Ft:Ft,ct?1/Ut:Ut),s.translate(_.a.v[0],_.a.v[1],_.a.v[2])},RepeaterModifier.prototype.init=function(o,i,s,_){for(this.elem=o,this.arr=i,this.pos=s,this.elemsData=_,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(o),this.initModifierProperties(o,i[s]);s>0;)s-=1,this._elements.unshift(i[s]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(o){var i,s=o.length;for(i=0;i<s;i+=1)o[i]._processed=!1,o[i].ty==="gr"&&this.resetElements(o[i].it)},RepeaterModifier.prototype.cloneElements=function(o){var i=JSON.parse(JSON.stringify(o));return this.resetElements(i),i},RepeaterModifier.prototype.changeGroupRender=function(o,i){var s,_=o.length;for(s=0;s<_;s+=1)o[s]._render=i,o[s].ty==="gr"&&this.changeGroupRender(o[s].it,i)},RepeaterModifier.prototype.processShapes=function(o){var i,s,_,_e,ct,Mt=!1;if(this._mdf||o){var Ft,Ut=Math.ceil(this.c.v);if(this._groups.length<Ut){for(;this._groups.length<Ut;){var Xt={it:this.cloneElements(this._elements),ty:"gr"};Xt.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,Xt),this._groups.splice(0,0,Xt),this._currentCopies+=1}this.elem.reloadShapes(),Mt=!0}for(ct=0,_=0;_<=this._groups.length-1;_+=1){if(Ft=ct<Ut,this._groups[_]._render=Ft,this.changeGroupRender(this._groups[_].it,Ft),!Ft){var Kt=this.elemsData[_].it,nr=Kt[Kt.length-1];nr.transform.op.v!==0?(nr.transform.op._mdf=!0,nr.transform.op.v=0):nr.transform.op._mdf=!1}ct+=1}this._currentCopies=Ut;var rr=this.o.v,or=rr%1,hr=rr>0?Math.floor(rr):Math.ceil(rr),fr=this.pMatrix.props,yr=this.rMatrix.props,Lr=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var Br,Vr,Wr=0;if(rr>0){for(;Wr<hr;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),Wr+=1;or&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,or,!1),Wr+=or)}else if(rr<0){for(;Wr>hr;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),Wr-=1;or&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-or,!0),Wr-=or)}for(_=this.data.m===1?0:this._currentCopies-1,_e=this.data.m===1?1:-1,ct=this._currentCopies;ct;){if(Vr=(s=(i=this.elemsData[_].it)[i.length-1].transform.mProps.v.props).length,i[i.length-1].transform.mProps._mdf=!0,i[i.length-1].transform.op._mdf=!0,i[i.length-1].transform.op.v=this._currentCopies===1?this.so.v:this.so.v+(this.eo.v-this.so.v)*(_/(this._currentCopies-1)),Wr!==0){for((_!==0&&_e===1||_!==this._currentCopies-1&&_e===-1)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(yr[0],yr[1],yr[2],yr[3],yr[4],yr[5],yr[6],yr[7],yr[8],yr[9],yr[10],yr[11],yr[12],yr[13],yr[14],yr[15]),this.matrix.transform(Lr[0],Lr[1],Lr[2],Lr[3],Lr[4],Lr[5],Lr[6],Lr[7],Lr[8],Lr[9],Lr[10],Lr[11],Lr[12],Lr[13],Lr[14],Lr[15]),this.matrix.transform(fr[0],fr[1],fr[2],fr[3],fr[4],fr[5],fr[6],fr[7],fr[8],fr[9],fr[10],fr[11],fr[12],fr[13],fr[14],fr[15]),Br=0;Br<Vr;Br+=1)s[Br]=this.matrix.props[Br];this.matrix.reset()}else for(this.matrix.reset(),Br=0;Br<Vr;Br+=1)s[Br]=this.matrix.props[Br];Wr+=1,ct-=1,_+=_e}}else for(ct=this._currentCopies,_=0,_e=1;ct;)s=(i=this.elemsData[_].it)[i.length-1].transform.mProps.v.props,i[i.length-1].transform.mProps._mdf=!1,i[i.length-1].transform.op._mdf=!1,ct-=1,_+=_e;return Mt},RepeaterModifier.prototype.addShape=function(){},extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(o,i){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(o,i.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(o,i){var s,_=shapePool.newElement();_.c=o.c;var _e,ct,Mt,Ft,Ut,Xt,Kt,nr,rr,or,hr,fr,yr=o._length,Lr=0;for(s=0;s<yr;s+=1)_e=o.v[s],Mt=o.o[s],ct=o.i[s],_e[0]===Mt[0]&&_e[1]===Mt[1]&&_e[0]===ct[0]&&_e[1]===ct[1]?s!==0&&s!==yr-1||o.c?(Ft=s===0?o.v[yr-1]:o.v[s-1],Xt=(Ut=Math.sqrt(Math.pow(_e[0]-Ft[0],2)+Math.pow(_e[1]-Ft[1],2)))?Math.min(Ut/2,i)/Ut:0,Kt=hr=_e[0]+(Ft[0]-_e[0])*Xt,nr=fr=_e[1]-(_e[1]-Ft[1])*Xt,rr=Kt-(Kt-_e[0])*roundCorner,or=nr-(nr-_e[1])*roundCorner,_.setTripleAt(Kt,nr,rr,or,hr,fr,Lr),Lr+=1,Ft=s===yr-1?o.v[0]:o.v[s+1],Xt=(Ut=Math.sqrt(Math.pow(_e[0]-Ft[0],2)+Math.pow(_e[1]-Ft[1],2)))?Math.min(Ut/2,i)/Ut:0,Kt=rr=_e[0]+(Ft[0]-_e[0])*Xt,nr=or=_e[1]+(Ft[1]-_e[1])*Xt,hr=Kt-(Kt-_e[0])*roundCorner,fr=nr-(nr-_e[1])*roundCorner,_.setTripleAt(Kt,nr,rr,or,hr,fr,Lr),Lr+=1):(_.setTripleAt(_e[0],_e[1],Mt[0],Mt[1],ct[0],ct[1],Lr),Lr+=1):(_.setTripleAt(o.v[s][0],o.v[s][1],o.o[s][0],o.o[s][1],o.i[s][0],o.i[s][1],Lr),Lr+=1);return _},RoundCornersModifier.prototype.processShapes=function(o){var i,s,_,_e,ct,Mt,Ft=this.shapes.length,Ut=this.rd.v;if(Ut!==0)for(s=0;s<Ft;s+=1){if(Mt=(ct=this.shapes[s]).localShapeCollection,ct.shape._mdf||this._mdf||o)for(Mt.releaseShapes(),ct.shape._mdf=!0,i=ct.shape.paths.shapes,_e=ct.shape.paths._length,_=0;_<_e;_+=1)Mt.addShape(this.processPath(i[_],Ut));ct.shape.paths=ct.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)},PolynomialBezier.prototype.point=function(o){return[((this.a[0]*o+this.b[0])*o+this.c[0])*o+this.d[0],((this.a[1]*o+this.b[1])*o+this.c[1])*o+this.d[1]]},PolynomialBezier.prototype.derivative=function(o){return[(3*o*this.a[0]+2*this.b[0])*o+this.c[0],(3*o*this.a[1]+2*this.b[1])*o+this.c[1]]},PolynomialBezier.prototype.tangentAngle=function(o){var i=this.derivative(o);return Math.atan2(i[1],i[0])},PolynomialBezier.prototype.normalAngle=function(o){var i=this.derivative(o);return Math.atan2(i[0],i[1])},PolynomialBezier.prototype.inflectionPoints=function(){var o=this.a[1]*this.b[0]-this.a[0]*this.b[1];if(floatZero(o))return[];var i=-.5*(this.a[1]*this.c[0]-this.a[0]*this.c[1])/o,s=i*i-1/3*(this.b[1]*this.c[0]-this.b[0]*this.c[1])/o;if(s<0)return[];var _=Math.sqrt(s);return floatZero(_)?_>0&&_<1?[i]:[]:[i-_,i+_].filter(function(_e){return _e>0&&_e<1})},PolynomialBezier.prototype.split=function(o){if(o<=0)return[singlePoint(this.points[0]),this];if(o>=1)return[this,singlePoint(this.points[this.points.length-1])];var i=lerpPoint(this.points[0],this.points[1],o),s=lerpPoint(this.points[1],this.points[2],o),_=lerpPoint(this.points[2],this.points[3],o),_e=lerpPoint(i,s,o),ct=lerpPoint(s,_,o),Mt=lerpPoint(_e,ct,o);return[new PolynomialBezier(this.points[0],i,_e,Mt,!0),new PolynomialBezier(Mt,ct,_,this.points[3],!0)]},PolynomialBezier.prototype.bounds=function(){return{x:extrema(this,0),y:extrema(this,1)}},PolynomialBezier.prototype.boundingBox=function(){var o=this.bounds();return{left:o.x.min,right:o.x.max,top:o.y.min,bottom:o.y.max,width:o.x.max-o.x.min,height:o.y.max-o.y.min,cx:(o.x.max+o.x.min)/2,cy:(o.y.max+o.y.min)/2}},PolynomialBezier.prototype.intersections=function(o,i,s){i===void 0&&(i=2),s===void 0&&(s=7);var _=[];return intersectsImpl(intersectData(this,0,1),intersectData(o,0,1),0,i,_,s),_},PolynomialBezier.shapeSegment=function(o,i){var s=(i+1)%o.length();return new PolynomialBezier(o.v[i],o.o[i],o.i[s],o.v[s],!0)},PolynomialBezier.shapeSegmentInverted=function(o,i){var s=(i+1)%o.length();return new PolynomialBezier(o.v[s],o.i[s],o.o[i],o.v[i],!0)},extendPrototype([ShapeModifier],ZigZagModifier),ZigZagModifier.prototype.initModifierProperties=function(o,i){this.getValue=this.processKeys,this.amplitude=PropertyFactory.getProp(o,i.s,0,null,this),this.frequency=PropertyFactory.getProp(o,i.r,0,null,this),this.pointsType=PropertyFactory.getProp(o,i.pt,0,null,this),this._isAnimated=this.amplitude.effectsSequence.length!==0||this.frequency.effectsSequence.length!==0||this.pointsType.effectsSequence.length!==0},ZigZagModifier.prototype.processPath=function(o,i,s,_){var _e=o._length,ct=shapePool.newElement();if(ct.c=o.c,o.c||(_e-=1),_e===0)return ct;var Mt=-1,Ft=PolynomialBezier.shapeSegment(o,0);zigZagCorner(ct,o,0,i,s,_,Mt);for(var Ut=0;Ut<_e;Ut+=1)Mt=zigZagSegment(ct,Ft,i,s,_,-Mt),Ft=Ut!==_e-1||o.c?PolynomialBezier.shapeSegment(o,(Ut+1)%_e):null,zigZagCorner(ct,o,Ut+1,i,s,_,Mt);return ct},ZigZagModifier.prototype.processShapes=function(o){var i,s,_,_e,ct,Mt,Ft=this.shapes.length,Ut=this.amplitude.v,Xt=Math.max(0,Math.round(this.frequency.v)),Kt=this.pointsType.v;if(Ut!==0)for(s=0;s<Ft;s+=1){if(Mt=(ct=this.shapes[s]).localShapeCollection,ct.shape._mdf||this._mdf||o)for(Mt.releaseShapes(),ct.shape._mdf=!0,i=ct.shape.paths.shapes,_e=ct.shape.paths._length,_=0;_<_e;_+=1)Mt.addShape(this.processPath(i[_],Ut,Xt,Kt));ct.shape.paths=ct.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)},extendPrototype([ShapeModifier],OffsetPathModifier),OffsetPathModifier.prototype.initModifierProperties=function(o,i){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(o,i.a,0,null,this),this.miterLimit=PropertyFactory.getProp(o,i.ml,0,null,this),this.lineJoin=i.lj,this._isAnimated=this.amount.effectsSequence.length!==0},OffsetPathModifier.prototype.processPath=function(o,i,s,_){var _e=shapePool.newElement();_e.c=o.c;var ct,Mt,Ft,Ut=o.length();o.c||(Ut-=1);var Xt=[];for(ct=0;ct<Ut;ct+=1)Ft=PolynomialBezier.shapeSegment(o,ct),Xt.push(offsetSegmentSplit(Ft,i));if(!o.c)for(ct=Ut-1;ct>=0;ct-=1)Ft=PolynomialBezier.shapeSegmentInverted(o,ct),Xt.push(offsetSegmentSplit(Ft,i));Xt=pruneIntersections(Xt);var Kt=null,nr=null;for(ct=0;ct<Xt.length;ct+=1){var rr=Xt[ct];for(nr&&(Kt=joinLines(_e,nr,rr[0],s,_)),nr=rr[rr.length-1],Mt=0;Mt<rr.length;Mt+=1)Ft=rr[Mt],Kt&&pointEqual(Ft.points[0],Kt)?_e.setXYAt(Ft.points[1][0],Ft.points[1][1],"o",_e.length()-1):_e.setTripleAt(Ft.points[0][0],Ft.points[0][1],Ft.points[1][0],Ft.points[1][1],Ft.points[0][0],Ft.points[0][1],_e.length()),_e.setTripleAt(Ft.points[3][0],Ft.points[3][1],Ft.points[3][0],Ft.points[3][1],Ft.points[2][0],Ft.points[2][1],_e.length()),Kt=Ft.points[3]}return Xt.length&&joinLines(_e,nr,Xt[0][0],s,_),_e},OffsetPathModifier.prototype.processShapes=function(o){var i,s,_,_e,ct,Mt,Ft=this.shapes.length,Ut=this.amount.v,Xt=this.miterLimit.v,Kt=this.lineJoin;if(Ut!==0)for(s=0;s<Ft;s+=1){if(Mt=(ct=this.shapes[s]).localShapeCollection,ct.shape._mdf||this._mdf||o)for(Mt.releaseShapes(),ct.shape._mdf=!0,i=ct.shape.paths.shapes,_e=ct.shape.paths._length,_=0;_<_e;_+=1)Mt.addShape(this.processPath(i[_],Ut,Kt,Xt));ct.shape.paths=ct.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)};var FontManager=function(){var o={w:0,size:0,shapes:[],data:{shapes:[]}},i=[];i=i.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var s=127988,_=127462,_e=127487,ct=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"];function Mt(rr,or){var hr=createTag("span");hr.setAttribute("aria-hidden",!0),hr.style.fontFamily=or;var fr=createTag("span");fr.innerText="giItT1WQy@!-/#",hr.style.position="absolute",hr.style.left="-10000px",hr.style.top="-10000px",hr.style.fontSize="300px",hr.style.fontVariant="normal",hr.style.fontStyle="normal",hr.style.fontWeight="normal",hr.style.letterSpacing="0",hr.appendChild(fr),document.body.appendChild(hr);var yr=fr.offsetWidth;return fr.style.fontFamily=function(Lr){var Br,Vr=Lr.split(","),Wr=Vr.length,ro=[];for(Br=0;Br<Wr;Br+=1)Vr[Br]!=="sans-serif"&&Vr[Br]!=="monospace"&&ro.push(Vr[Br]);return ro.join(",")}(rr)+", "+or,{node:fr,w:yr,parent:hr}}function Ft(rr,or){var hr,fr=document.body&&or?"svg":"canvas",yr=getFontProperties(rr);if(fr==="svg"){var Lr=createNS("text");Lr.style.fontSize="100px",Lr.setAttribute("font-family",rr.fFamily),Lr.setAttribute("font-style",yr.style),Lr.setAttribute("font-weight",yr.weight),Lr.textContent="1",rr.fClass?(Lr.style.fontFamily="inherit",Lr.setAttribute("class",rr.fClass)):Lr.style.fontFamily=rr.fFamily,or.appendChild(Lr),hr=Lr}else{var Br=new OffscreenCanvas(500,500).getContext("2d");Br.font=yr.style+" "+yr.weight+" 100px "+rr.fFamily,hr=Br}return{measureText:function(Vr){return fr==="svg"?(hr.textContent=Vr,hr.getComputedTextLength()):hr.measureText(Vr).width}}}function Ut(rr){var or=0,hr=rr.charCodeAt(0);if(hr>=55296&&hr<=56319){var fr=rr.charCodeAt(1);fr>=56320&&fr<=57343&&(or=1024*(hr-55296)+fr-56320+65536)}return or}function Xt(rr){var or=Ut(rr);return or>=_&&or<=_e}var Kt=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};Kt.isModifier=function(rr,or){var hr=rr.toString(16)+or.toString(16);return ct.indexOf(hr)!==-1},Kt.isZeroWidthJoiner=function(rr){return rr===8205},Kt.isFlagEmoji=function(rr){return Xt(rr.substr(0,2))&&Xt(rr.substr(2,2))},Kt.isRegionalCode=Xt,Kt.isCombinedCharacter=function(rr){return i.indexOf(rr)!==-1},Kt.isRegionalFlag=function(rr,or){var hr=Ut(rr.substr(or,2));if(hr!==s)return!1;var fr=0;for(or+=2;fr<5;){if((hr=Ut(rr.substr(or,2)))<917601||hr>917626)return!1;fr+=1,or+=2}return Ut(rr.substr(or,2))===917631},Kt.isVariationSelector=function(rr){return rr===65039},Kt.BLACK_FLAG_CODE_POINT=s;var nr={addChars:function(rr){if(rr){var or;this.chars||(this.chars=[]);var hr,fr,yr=rr.length,Lr=this.chars.length;for(or=0;or<yr;or+=1){for(hr=0,fr=!1;hr<Lr;)this.chars[hr].style===rr[or].style&&this.chars[hr].fFamily===rr[or].fFamily&&this.chars[hr].ch===rr[or].ch&&(fr=!0),hr+=1;fr||(this.chars.push(rr[or]),Lr+=1)}}},addFonts:function(rr,or){if(rr){if(this.chars)return this.isLoaded=!0,void(this.fonts=rr.list);if(!document.body)return this.isLoaded=!0,rr.list.forEach(function(ko){ko.helper=Ft(ko),ko.cache={}}),void(this.fonts=rr.list);var hr,fr=rr.list,yr=fr.length,Lr=yr;for(hr=0;hr<yr;hr+=1){var Br,Vr,Wr=!0;if(fr[hr].loaded=!1,fr[hr].monoCase=Mt(fr[hr].fFamily,"monospace"),fr[hr].sansCase=Mt(fr[hr].fFamily,"sans-serif"),fr[hr].fPath){if(fr[hr].fOrigin==="p"||fr[hr].origin===3){if((Br=document.querySelectorAll('style[f-forigin="p"][f-family="'+fr[hr].fFamily+'"], style[f-origin="3"][f-family="'+fr[hr].fFamily+'"]')).length>0&&(Wr=!1),Wr){var ro=createTag("style");ro.setAttribute("f-forigin",fr[hr].fOrigin),ro.setAttribute("f-origin",fr[hr].origin),ro.setAttribute("f-family",fr[hr].fFamily),ro.type="text/css",ro.innerText="@font-face {font-family: "+fr[hr].fFamily+"; font-style: normal; src: url('"+fr[hr].fPath+"');}",or.appendChild(ro)}}else if(fr[hr].fOrigin==="g"||fr[hr].origin===1){for(Br=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),Vr=0;Vr<Br.length;Vr+=1)Br[Vr].href.indexOf(fr[hr].fPath)!==-1&&(Wr=!1);if(Wr){var no=createTag("link");no.setAttribute("f-forigin",fr[hr].fOrigin),no.setAttribute("f-origin",fr[hr].origin),no.type="text/css",no.rel="stylesheet",no.href=fr[hr].fPath,document.body.appendChild(no)}}else if(fr[hr].fOrigin==="t"||fr[hr].origin===2){for(Br=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),Vr=0;Vr<Br.length;Vr+=1)fr[hr].fPath===Br[Vr].src&&(Wr=!1);if(Wr){var so=createTag("link");so.setAttribute("f-forigin",fr[hr].fOrigin),so.setAttribute("f-origin",fr[hr].origin),so.setAttribute("rel","stylesheet"),so.setAttribute("href",fr[hr].fPath),or.appendChild(so)}}}else fr[hr].loaded=!0,Lr-=1;fr[hr].helper=Ft(fr[hr],or),fr[hr].cache={},this.fonts.push(fr[hr])}Lr===0?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}else this.isLoaded=!0},getCharData:function(rr,or,hr){for(var fr=0,yr=this.chars.length;fr<yr;){if(this.chars[fr].ch===rr&&this.chars[fr].style===or&&this.chars[fr].fFamily===hr)return this.chars[fr];fr+=1}return(typeof rr=="string"&&rr.charCodeAt(0)!==13||!rr)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",rr,or,hr)),o},getFontByName:function(rr){for(var or=0,hr=this.fonts.length;or<hr;){if(this.fonts[or].fName===rr)return this.fonts[or];or+=1}return this.fonts[0]},measureText:function(rr,or,hr){var fr=this.getFontByName(or),yr=rr;if(!fr.cache[yr]){var Lr=fr.helper;if(rr===" "){var Br=Lr.measureText("|"+rr+"|"),Vr=Lr.measureText("||");fr.cache[yr]=(Br-Vr)/100}else fr.cache[yr]=Lr.measureText(rr)/100}return fr.cache[yr]*hr},checkLoadedFonts:function(){var rr,or,hr,fr=this.fonts.length,yr=fr;for(rr=0;rr<fr;rr+=1)this.fonts[rr].loaded?yr-=1:this.fonts[rr].fOrigin==="n"||this.fonts[rr].origin===0?this.fonts[rr].loaded=!0:(or=this.fonts[rr].monoCase.node,hr=this.fonts[rr].monoCase.w,or.offsetWidth!==hr?(yr-=1,this.fonts[rr].loaded=!0):(or=this.fonts[rr].sansCase.node,hr=this.fonts[rr].sansCase.w,or.offsetWidth!==hr&&(yr-=1,this.fonts[rr].loaded=!0)),this.fonts[rr].loaded&&(this.fonts[rr].sansCase.parent.parentNode.removeChild(this.fonts[rr].sansCase.parent),this.fonts[rr].monoCase.parent.parentNode.removeChild(this.fonts[rr].monoCase.parent)));yr!==0&&Date.now()-this.initTime<5e3?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)},setIsLoaded:function(){this.isLoaded=!0}};return Kt.prototype=nr,Kt}();function SlotManager(o){this.animationData=o}function slotFactory(o){return new SlotManager(o)}function RenderableElement(){}SlotManager.prototype.getProp=function(o){return this.animationData.slots&&this.animationData.slots[o.sid]?Object.assign(o,this.animationData.slots[o.sid].p):o},RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(o){this.renderableComponents.indexOf(o)===-1&&this.renderableComponents.push(o)},removeRenderableComponent:function(o){this.renderableComponents.indexOf(o)!==-1&&this.renderableComponents.splice(this.renderableComponents.indexOf(o),1)},prepareRenderableFrame:function(o){this.checkLayerLimits(o)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(o){this.data.ip-this.data.st<=o&&this.data.op-this.data.st>o?this.isInRange!==!0&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):this.isInRange!==!1&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var o,i=this.renderableComponents.length;for(o=0;o<i;o+=1)this.renderableComponents[o].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return this.data.ty===5?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}};var getBlendMode=(blendModeEnums={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"},function(o){return blendModeEnums[o]||""}),blendModeEnums;function SliderEffect(o,i,s){this.p=PropertyFactory.getProp(i,o.v,0,0,s)}function AngleEffect(o,i,s){this.p=PropertyFactory.getProp(i,o.v,0,0,s)}function ColorEffect(o,i,s){this.p=PropertyFactory.getProp(i,o.v,1,0,s)}function PointEffect(o,i,s){this.p=PropertyFactory.getProp(i,o.v,1,0,s)}function LayerIndexEffect(o,i,s){this.p=PropertyFactory.getProp(i,o.v,0,0,s)}function MaskIndexEffect(o,i,s){this.p=PropertyFactory.getProp(i,o.v,0,0,s)}function CheckboxEffect(o,i,s){this.p=PropertyFactory.getProp(i,o.v,0,0,s)}function NoValueEffect(){this.p={}}function EffectsManager(o,i){var s,_=o.ef||[];this.effectElements=[];var _e,ct=_.length;for(s=0;s<ct;s+=1)_e=new GroupEffect(_[s],i),this.effectElements.push(_e)}function GroupEffect(o,i){this.init(o,i)}function BaseElement(){}function FrameElement(){}function FootageElement(o,i,s){this.initFrame(),this.initRenderable(),this.assetData=i.getAssetData(o.refId),this.footageData=i.imageLoader.getAsset(this.assetData),this.initBaseData(o,i,s)}function AudioElement(o,i,s){this.initFrame(),this.initRenderable(),this.assetData=i.getAssetData(o.refId),this.initBaseData(o,i,s),this._isPlaying=!1,this._canPlay=!1;var _=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(_),this._currentTime=0,this.globalData.audioController.addAudio(this),this._volumeMultiplier=1,this._volume=1,this._previousVolume=null,this.tm=o.tm?PropertyFactory.getProp(this,o.tm,0,i.frameRate,this):{_placeholder:!0},this.lv=PropertyFactory.getProp(this,o.au&&o.au.lv?o.au.lv:{k:[100]},1,.01,this)}function BaseRenderer(){}extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(o,i){var s;this.data=o,this.effectElements=[],this.initDynamicPropertyContainer(i);var _,_e=this.data.ef.length,ct=this.data.ef;for(s=0;s<_e;s+=1){switch(_=null,ct[s].ty){case 0:_=new SliderEffect(ct[s],i,this);break;case 1:_=new AngleEffect(ct[s],i,this);break;case 2:_=new ColorEffect(ct[s],i,this);break;case 3:_=new PointEffect(ct[s],i,this);break;case 4:case 7:_=new CheckboxEffect(ct[s],i,this);break;case 10:_=new LayerIndexEffect(ct[s],i,this);break;case 11:_=new MaskIndexEffect(ct[s],i,this);break;case 5:_=new EffectsManager(ct[s],i);break;default:_=new NoValueEffect(ct[s])}_&&this.effectElements.push(_)}},BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var o=0,i=this.data.masksProperties.length;o<i;){if(this.data.masksProperties[o].mode!=="n"&&this.data.masksProperties[o].cl!==!1)return!0;o+=1}return!1},initExpressions:function(){var o=getExpressionInterfaces();if(o){var i=o("layer"),s=o("effects"),_=o("shape"),_e=o("text"),ct=o("comp");this.layerInterface=i(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var Mt=s.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(Mt),this.data.ty===0||this.data.xt?this.compInterface=ct(this):this.data.ty===4?(this.layerInterface.shapeInterface=_(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):this.data.ty===5&&(this.layerInterface.textInterface=_e(this),this.layerInterface.text=this.layerInterface.textInterface)}},setBlendMode:function(){var o=getBlendMode(this.data.bm);(this.baseElement||this.layerElement).style["mix-blend-mode"]=o},initBaseData:function(o,i,s){this.globalData=i,this.comp=s,this.data=o,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}},FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(o,i){var s,_=this.dynamicProperties.length;for(s=0;s<_;s+=1)(i||this._isParent&&this.dynamicProperties[s].propType==="transform")&&(this.dynamicProperties[s].getValue(),this.dynamicProperties[s]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(o){this.dynamicProperties.indexOf(o)===-1&&this.dynamicProperties.push(o)}},FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){var o=getExpressionInterfaces();if(o){var i=o("footage");this.layerInterface=i(this)}},FootageElement.prototype.getFootageData=function(){return this.footageData},AudioElement.prototype.prepareFrame=function(o){if(this.prepareRenderableFrame(o,!0),this.prepareProperties(o,!0),this.tm._placeholder)this._currentTime=o/this.data.sr;else{var i=this.tm.v;this._currentTime=i}this._volume=this.lv.v[0];var s=this._volume*this._volumeMultiplier;this._previousVolume!==s&&(this._previousVolume=s,this.audio.volume(s))},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(o){this.audio.rate(o)},AudioElement.prototype.volume=function(o){this._volumeMultiplier=o,this._previousVolume=o*this._volume,this.audio.volume(this._previousVolume)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){},BaseRenderer.prototype.checkLayers=function(o){var i,s,_=this.layers.length;for(this.completeLayers=!0,i=_-1;i>=0;i-=1)this.elements[i]||(s=this.layers[i]).ip-s.st<=o-this.layers[i].st&&s.op-s.st>o-this.layers[i].st&&this.buildItem(i),this.completeLayers=!!this.elements[i]&&this.completeLayers;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(o){switch(o.ty){case 2:return this.createImage(o);case 0:return this.createComp(o);case 1:return this.createSolid(o);case 3:default:return this.createNull(o);case 4:return this.createShape(o);case 5:return this.createText(o);case 6:return this.createAudio(o);case 13:return this.createCamera(o);case 15:return this.createFootage(o)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(o){return new AudioElement(o,this.globalData,this)},BaseRenderer.prototype.createFootage=function(o){return new FootageElement(o,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var o,i=this.layers.length;for(o=0;o<i;o+=1)this.buildItem(o);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(o){var i;this.completeLayers=!1;var s,_=o.length,_e=this.layers.length;for(i=0;i<_;i+=1)for(s=0;s<_e;){if(this.layers[s].id===o[i].id){this.layers[s]=o[i];break}s+=1}},BaseRenderer.prototype.setProjectInterface=function(o){this.globalData.projectInterface=o},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(o,i,s){for(var _=this.elements,_e=this.layers,ct=0,Mt=_e.length;ct<Mt;)_e[ct].ind==i&&(_[ct]&&_[ct]!==!0?(s.push(_[ct]),_[ct].setAsParent(),_e[ct].parent!==void 0?this.buildElementParenting(o,_e[ct].parent,s):o.setHierarchy(s)):(this.buildItem(ct),this.addPendingElement(o))),ct+=1},BaseRenderer.prototype.addPendingElement=function(o){this.pendingElements.push(o)},BaseRenderer.prototype.searchExtraCompositions=function(o){var i,s=o.length;for(i=0;i<s;i+=1)if(o[i].xt){var _=this.createComp(o[i]);_.initExpressions(),this.globalData.projectInterface.registerComposition(_)}},BaseRenderer.prototype.getElementById=function(o){var i,s=this.elements.length;for(i=0;i<s;i+=1)if(this.elements[i].data.ind===o)return this.elements[i];return null},BaseRenderer.prototype.getElementByPath=function(o){var i,s=o.shift();if(typeof s=="number")i=this.elements[s];else{var _,_e=this.elements.length;for(_=0;_<_e;_+=1)if(this.elements[_].data.nm===s){i=this.elements[_];break}}return o.length===0?i:i.getElementByPath(o)},BaseRenderer.prototype.setupGlobalData=function(o,i){this.globalData.fontManager=new FontManager,this.globalData.slotManager=slotFactory(o),this.globalData.fontManager.addChars(o.chars),this.globalData.fontManager.addFonts(o.fonts,i),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=o.fr,this.globalData.nm=o.nm,this.globalData.compSize={w:o.w,h:o.h}};var effectTypes={TRANSFORM_EFFECT:"transformEFfect"};function TransformElement(){}function MaskElement(o,i,s){this.data=o,this.element=i,this.globalData=s,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var _,_e,ct=this.globalData.defs,Mt=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(Mt),this.solidPath="";var Ft,Ut,Xt,Kt,nr,rr,or=this.masksProperties,hr=0,fr=[],yr=createElementID(),Lr="clipPath",Br="clip-path";for(_=0;_<Mt;_+=1)if((or[_].mode!=="a"&&or[_].mode!=="n"||or[_].inv||or[_].o.k!==100||or[_].o.x)&&(Lr="mask",Br="mask"),or[_].mode!=="s"&&or[_].mode!=="i"||hr!==0?Xt=null:((Xt=createNS("rect")).setAttribute("fill","#ffffff"),Xt.setAttribute("width",this.element.comp.data.w||0),Xt.setAttribute("height",this.element.comp.data.h||0),fr.push(Xt)),_e=createNS("path"),or[_].mode==="n")this.viewData[_]={op:PropertyFactory.getProp(this.element,or[_].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,or[_],3),elem:_e,lastPath:""},ct.appendChild(_e);else{var Vr;if(hr+=1,_e.setAttribute("fill",or[_].mode==="s"?"#000000":"#ffffff"),_e.setAttribute("clip-rule","nonzero"),or[_].x.k!==0?(Lr="mask",Br="mask",rr=PropertyFactory.getProp(this.element,or[_].x,0,null,this.element),Vr=createElementID(),(Kt=createNS("filter")).setAttribute("id",Vr),(nr=createNS("feMorphology")).setAttribute("operator","erode"),nr.setAttribute("in","SourceGraphic"),nr.setAttribute("radius","0"),Kt.appendChild(nr),ct.appendChild(Kt),_e.setAttribute("stroke",or[_].mode==="s"?"#000000":"#ffffff")):(nr=null,rr=null),this.storedData[_]={elem:_e,x:rr,expan:nr,lastPath:"",lastOperator:"",filterId:Vr,lastRadius:0},or[_].mode==="i"){Ut=fr.length;var Wr=createNS("g");for(Ft=0;Ft<Ut;Ft+=1)Wr.appendChild(fr[Ft]);var ro=createNS("mask");ro.setAttribute("mask-type","alpha"),ro.setAttribute("id",yr+"_"+hr),ro.appendChild(_e),ct.appendChild(ro),Wr.setAttribute("mask","url("+getLocationHref()+"#"+yr+"_"+hr+")"),fr.length=0,fr.push(Wr)}else fr.push(_e);or[_].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[_]={elem:_e,lastPath:"",op:PropertyFactory.getProp(this.element,or[_].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,or[_],3),invRect:Xt},this.viewData[_].prop.k||this.drawPath(or[_],this.viewData[_].prop.v,this.viewData[_])}for(this.maskElement=createNS(Lr),Mt=fr.length,_=0;_<Mt;_+=1)this.maskElement.appendChild(fr[_]);hr>0&&(this.maskElement.setAttribute("id",yr),this.element.maskedElement.setAttribute(Br,"url("+getLocationHref()+"#"+yr+")"),ct.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}TransformElement.prototype={initTransform:function(){var o=new Matrix;this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_localMatMdf:!1,_opMdf:!1,mat:o,localMat:o,localOpacity:1},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var o,i=this.finalTransform.mat,s=0,_=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;s<_;){if(this.hierarchy[s].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}s+=1}if(this.finalTransform._matMdf)for(o=this.finalTransform.mProp.v.props,i.cloneFromProps(o),s=0;s<_;s+=1)i.multiply(this.hierarchy[s].finalTransform.mProp.v)}this.finalTransform._matMdf&&(this.finalTransform._localMatMdf=this.finalTransform._matMdf),this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v)},renderLocalTransform:function(){if(this.localTransforms){var o=0,i=this.localTransforms.length;if(this.finalTransform._localMatMdf=this.finalTransform._matMdf,!this.finalTransform._localMatMdf||!this.finalTransform._opMdf)for(;o<i;)this.localTransforms[o]._mdf&&(this.finalTransform._localMatMdf=!0),this.localTransforms[o]._opMdf&&!this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v,this.finalTransform._opMdf=!0),o+=1;if(this.finalTransform._localMatMdf){var s=this.finalTransform.localMat;for(this.localTransforms[0].matrix.clone(s),o=1;o<i;o+=1){var _=this.localTransforms[o].matrix;s.multiply(_)}s.multiply(this.finalTransform.mat)}if(this.finalTransform._opMdf){var _e=this.finalTransform.localOpacity;for(o=0;o<i;o+=1)_e*=.01*this.localTransforms[o].opacity;this.finalTransform.localOpacity=_e}}},searchEffectTransforms:function(){if(this.renderableEffectsManager){var o=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT);if(o.length){this.localTransforms=[],this.finalTransform.localMat=new Matrix;var i=0,s=o.length;for(i=0;i<s;i+=1)this.localTransforms.push(o[i])}}},globalToLocal:function(o){var i=[];i.push(this.finalTransform);for(var s,_=!0,_e=this.comp;_;)_e.finalTransform?(_e.data.hasMask&&i.splice(0,0,_e.finalTransform),_e=_e.comp):_=!1;var ct,Mt=i.length;for(s=0;s<Mt;s+=1)ct=i[s].mat.applyToPointArray(0,0,0),o=[o[0]-ct[0],o[1]-ct[1],0];return o},mHelper:new Matrix},MaskElement.prototype.getMaskProperty=function(o){return this.viewData[o].prop},MaskElement.prototype.renderFrame=function(o){var i,s=this.element.finalTransform.mat,_=this.masksProperties.length;for(i=0;i<_;i+=1)if((this.viewData[i].prop._mdf||o)&&this.drawPath(this.masksProperties[i],this.viewData[i].prop.v,this.viewData[i]),(this.viewData[i].op._mdf||o)&&this.viewData[i].elem.setAttribute("fill-opacity",this.viewData[i].op.v),this.masksProperties[i].mode!=="n"&&(this.viewData[i].invRect&&(this.element.finalTransform.mProp._mdf||o)&&this.viewData[i].invRect.setAttribute("transform",s.getInverseMatrix().to2dCSS()),this.storedData[i].x&&(this.storedData[i].x._mdf||o))){var _e=this.storedData[i].expan;this.storedData[i].x.v<0?(this.storedData[i].lastOperator!=="erode"&&(this.storedData[i].lastOperator="erode",this.storedData[i].elem.setAttribute("filter","url("+getLocationHref()+"#"+this.storedData[i].filterId+")")),_e.setAttribute("radius",-this.storedData[i].x.v)):(this.storedData[i].lastOperator!=="dilate"&&(this.storedData[i].lastOperator="dilate",this.storedData[i].elem.setAttribute("filter",null)),this.storedData[i].elem.setAttribute("stroke-width",2*this.storedData[i].x.v))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var o="M0,0 ";return o+=" h"+this.globalData.compSize.w,o+=" v"+this.globalData.compSize.h,o+=" h-"+this.globalData.compSize.w,o+=" v-"+this.globalData.compSize.h+" "},MaskElement.prototype.drawPath=function(o,i,s){var _,_e,ct=" M"+i.v[0][0]+","+i.v[0][1];for(_e=i._length,_=1;_<_e;_+=1)ct+=" C"+i.o[_-1][0]+","+i.o[_-1][1]+" "+i.i[_][0]+","+i.i[_][1]+" "+i.v[_][0]+","+i.v[_][1];if(i.c&&_e>1&&(ct+=" C"+i.o[_-1][0]+","+i.o[_-1][1]+" "+i.i[0][0]+","+i.i[0][1]+" "+i.v[0][0]+","+i.v[0][1]),s.lastPath!==ct){var Mt="";s.elem&&(i.c&&(Mt=o.inv?this.solidPath+ct:ct),s.elem.setAttribute("d",Mt)),s.lastPath=ct}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null};var filtersFactory=function(){var o={createFilter:function(i,s){var _=createNS("filter");return _.setAttribute("id",i),s!==!0&&(_.setAttribute("filterUnits","objectBoundingBox"),_.setAttribute("x","0%"),_.setAttribute("y","0%"),_.setAttribute("width","100%"),_.setAttribute("height","100%")),_},createAlphaToLuminanceFilter:function(){var i=createNS("feColorMatrix");return i.setAttribute("type","matrix"),i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),i}};return o}(),featureSupport=function(){var o={maskType:!0,svgLumaHidden:!0,offscreenCanvas:typeof OffscreenCanvas<"u"};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(o.maskType=!1),/firefox/i.test(navigator.userAgent)&&(o.svgLumaHidden=!1),o}(),registeredEffects$1={},idPrefix="filter_result_";function SVGEffects(o){var i,s,_="SourceGraphic",_e=o.data.ef?o.data.ef.length:0,ct=createElementID(),Mt=filtersFactory.createFilter(ct,!0),Ft=0;for(this.filters=[],i=0;i<_e;i+=1){s=null;var Ut=o.data.ef[i].ty;registeredEffects$1[Ut]&&(s=new registeredEffects$1[Ut].effect(Mt,o.effectsManager.effectElements[i],o,idPrefix+Ft,_),_=idPrefix+Ft,registeredEffects$1[Ut].countsAsEffect&&(Ft+=1)),s&&this.filters.push(s)}Ft&&(o.globalData.defs.appendChild(Mt),o.layerElement.setAttribute("filter","url("+getLocationHref()+"#"+ct+")")),this.filters.length&&o.addRenderableComponent(this)}function registerEffect$1(o,i,s){registeredEffects$1[o]={effect:i,countsAsEffect:s}}function SVGBaseElement(){}function HierarchyElement(){}function RenderableDOMElement(){}function IImageElement(o,i,s){this.assetData=i.getAssetData(o.refId),this.assetData&&this.assetData.sid&&(this.assetData=i.slotManager.getProp(this.assetData)),this.initElement(o,i,s),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}function ProcessedElement(o,i){this.elem=o,this.pos=i}function IShapeElement(){}SVGEffects.prototype.renderFrame=function(o){var i,s=this.filters.length;for(i=0;i<s;i+=1)this.filters[i].renderFrame(o)},SVGEffects.prototype.getEffects=function(o){var i,s=this.filters.length,_=[];for(i=0;i<s;i+=1)this.filters[i].type===o&&_.push(this.filters[i]);return _},SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var o=null;if(this.data.td){this.matteMasks={};var i=createNS("g");i.setAttribute("id",this.layerId),i.appendChild(this.layerElement),o=i,this.globalData.defs.appendChild(i)}else this.data.tt?(this.matteElement.appendChild(this.layerElement),o=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.ty===0&&!this.data.hd){var s=createNS("clipPath"),_=createNS("path");_.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var _e=createElementID();if(s.setAttribute("id",_e),s.appendChild(_),this.globalData.defs.appendChild(s),this.checkMasks()){var ct=createNS("g");ct.setAttribute("clip-path","url("+getLocationHref()+"#"+_e+")"),ct.appendChild(this.layerElement),this.transformedElement=ct,o?o.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+_e+")")}this.data.bm!==0&&this.setBlendMode()},renderElement:function(){this.finalTransform._localMatMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.localMat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.localOpacity)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this),this.searchEffectTransforms()},getMatte:function(o){if(this.matteMasks||(this.matteMasks={}),!this.matteMasks[o]){var i,s,_,_e,ct=this.layerId+"_"+o;if(o===1||o===3){var Mt=createNS("mask");Mt.setAttribute("id",ct),Mt.setAttribute("mask-type",o===3?"luminance":"alpha"),(_=createNS("use")).setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),Mt.appendChild(_),this.globalData.defs.appendChild(Mt),featureSupport.maskType||o!==1||(Mt.setAttribute("mask-type","luminance"),i=createElementID(),s=filtersFactory.createFilter(i),this.globalData.defs.appendChild(s),s.appendChild(filtersFactory.createAlphaToLuminanceFilter()),(_e=createNS("g")).appendChild(_),Mt.appendChild(_e),_e.setAttribute("filter","url("+getLocationHref()+"#"+i+")"))}else if(o===2){var Ft=createNS("mask");Ft.setAttribute("id",ct),Ft.setAttribute("mask-type","alpha");var Ut=createNS("g");Ft.appendChild(Ut),i=createElementID(),s=filtersFactory.createFilter(i);var Xt=createNS("feComponentTransfer");Xt.setAttribute("in","SourceGraphic"),s.appendChild(Xt);var Kt=createNS("feFuncA");Kt.setAttribute("type","table"),Kt.setAttribute("tableValues","1.0 0.0"),Xt.appendChild(Kt),this.globalData.defs.appendChild(s);var nr=createNS("rect");nr.setAttribute("width",this.comp.data.w),nr.setAttribute("height",this.comp.data.h),nr.setAttribute("x","0"),nr.setAttribute("y","0"),nr.setAttribute("fill","#ffffff"),nr.setAttribute("opacity","0"),Ut.setAttribute("filter","url("+getLocationHref()+"#"+i+")"),Ut.appendChild(nr),(_=createNS("use")).setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),Ut.appendChild(_),featureSupport.maskType||(Ft.setAttribute("mask-type","luminance"),s.appendChild(filtersFactory.createAlphaToLuminanceFilter()),_e=createNS("g"),Ut.appendChild(nr),_e.appendChild(this.layerElement),Ut.appendChild(_e)),this.globalData.defs.appendChild(Ft)}this.matteMasks[o]=ct}return this.matteMasks[o]},setMatte:function(o){this.matteElement&&this.matteElement.setAttribute("mask","url("+getLocationHref()+"#"+o+")")}},HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(o){this.hierarchy=o},setAsParent:function(){this._isParent=!0},checkParenting:function(){this.data.parent!==void 0&&this.comp.buildElementParenting(this,this.data.parent,[])}},extendPrototype([RenderableElement,createProxyFunction({initElement:function(o,i,s){this.initFrame(),this.initBaseData(o,i,s),this.initTransform(o,i,s),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){this.hidden||this.isInRange&&!this.isTransparent||((this.baseElement||this.layerElement).style.display="none",this.hidden=!0)},show:function(){this.isInRange&&!this.isTransparent&&(this.data.hd||((this.baseElement||this.layerElement).style.display="block"),this.hidden=!1,this._isFirstFrame=!0)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(o){this._mdf=!1,this.prepareRenderableFrame(o),this.prepareProperties(o,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}})],RenderableDOMElement),extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var o=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",o),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect},IShapeElement.prototype={addShapeToModifiers:function(o){var i,s=this.shapeModifiers.length;for(i=0;i<s;i+=1)this.shapeModifiers[i].addShape(o)},isShapeInAnimatedModifiers:function(o){for(var i=this.shapeModifiers.length;0<i;)if(this.shapeModifiers[0].isAnimatedWithShape(o))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var o,i=this.shapes.length;for(o=0;o<i;o+=1)this.shapes[o].sh.reset();for(o=(i=this.shapeModifiers.length)-1;o>=0&&!this.shapeModifiers[o].processShapes(this._isFirstFrame);o-=1);}},searchProcessedElement:function(o){for(var i=this.processedElements,s=0,_=i.length;s<_;){if(i[s].elem===o)return i[s].pos;s+=1}return 0},addProcessedElement:function(o,i){for(var s=this.processedElements,_=s.length;_;)if(s[_-=1].elem===o)return void(s[_].pos=i);s.push(new ProcessedElement(o,i))},prepareFrame:function(o){this.prepareRenderableFrame(o),this.prepareProperties(o,this.isInRange)}};var lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"};function SVGShapeData(o,i,s){this.caches=[],this.styles=[],this.transformers=o,this.lStr="",this.sh=s,this.lvl=i,this._isAnimated=!!s.k;for(var _=0,_e=o.length;_<_e;){if(o[_].mProps.dynamicProperties.length){this._isAnimated=!0;break}_+=1}}function SVGStyleData(o,i){this.data=o,this.type=o.ty,this.d="",this.lvl=i,this._mdf=!1,this.closed=o.hd===!0,this.pElem=createNS("path"),this.msElem=null}function DashProperty(o,i,s,_){var _e;this.elem=o,this.frameId=-1,this.dataProps=createSizedArray(i.length),this.renderer=s,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",i.length?i.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(_);var ct,Mt=i.length||0;for(_e=0;_e<Mt;_e+=1)ct=PropertyFactory.getProp(o,i[_e].v,0,0,this),this.k=ct.k||this.k,this.dataProps[_e]={n:i[_e].n,p:ct};this.k||this.getValue(!0),this._isAnimated=this.k}function SVGStrokeStyleData(o,i,s){this.initDynamicPropertyContainer(o),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(o,i.o,0,.01,this),this.w=PropertyFactory.getProp(o,i.w,0,null,this),this.d=new DashProperty(o,i.d||{},"svg",this),this.c=PropertyFactory.getProp(o,i.c,1,255,this),this.style=s,this._isAnimated=!!this._isAnimated}function SVGFillStyleData(o,i,s){this.initDynamicPropertyContainer(o),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(o,i.o,0,.01,this),this.c=PropertyFactory.getProp(o,i.c,1,255,this),this.style=s}function SVGNoStyleData(o,i,s){this.initDynamicPropertyContainer(o),this.getValue=this.iterateDynamicProperties,this.style=s}function GradientProperty(o,i,s){this.data=i,this.c=createTypedArray("uint8c",4*i.p);var _=i.k.k[0].s?i.k.k[0].s.length-4*i.p:i.k.k.length-4*i.p;this.o=createTypedArray("float32",_),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=_,this.initDynamicPropertyContainer(s),this.prop=PropertyFactory.getProp(o,i.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}function SVGGradientFillStyleData(o,i,s){this.initDynamicPropertyContainer(o),this.getValue=this.iterateDynamicProperties,this.initGradientData(o,i,s)}function SVGGradientStrokeStyleData(o,i,s){this.initDynamicPropertyContainer(o),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(o,i.w,0,null,this),this.d=new DashProperty(o,i.d||{},"svg",this),this.initGradientData(o,i,s),this._isAnimated=!!this._isAnimated}function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}function SVGTransformData(o,i,s){this.transform={mProps:o,op:i,container:s},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0},SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1},DashProperty.prototype.getValue=function(o){if((this.elem.globalData.frameId!==this.frameId||o)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||o,this._mdf)){var i=0,s=this.dataProps.length;for(this.renderer==="svg"&&(this.dashStr=""),i=0;i<s;i+=1)this.dataProps[i].n!=="o"?this.renderer==="svg"?this.dashStr+=" "+this.dataProps[i].p.v:this.dashArray[i]=this.dataProps[i].p.v:this.dashoffset[0]=this.dataProps[i].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty),extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData),extendPrototype([DynamicPropertyContainer],SVGFillStyleData),extendPrototype([DynamicPropertyContainer],SVGNoStyleData),GradientProperty.prototype.comparePoints=function(o,i){for(var s=0,_=this.o.length/2;s<_;){if(Math.abs(o[4*s]-o[4*i+2*s])>.01)return!1;s+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!=this.c.length/4)return!1;if(this.data.k.k[0].s)for(var o=0,i=this.data.k.k.length;o<i;){if(!this.comparePoints(this.data.k.k[o].s,this.data.p))return!1;o+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(o){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||o){var i,s,_,_e=4*this.data.p;for(i=0;i<_e;i+=1)s=i%4==0?100:255,_=Math.round(this.prop.v[i]*s),this.c[i]!==_&&(this.c[i]=_,this._cmdf=!o);if(this.o.length)for(_e=this.prop.v.length,i=4*this.data.p;i<_e;i+=1)s=i%2==0?100:1,_=i%2==0?Math.round(100*this.prop.v[i]):this.prop.v[i],this.o[i-4*this.data.p]!==_&&(this.o[i-4*this.data.p]=_,this._omdf=!o);this._mdf=!o}},extendPrototype([DynamicPropertyContainer],GradientProperty),SVGGradientFillStyleData.prototype.initGradientData=function(o,i,s){this.o=PropertyFactory.getProp(o,i.o,0,.01,this),this.s=PropertyFactory.getProp(o,i.s,1,null,this),this.e=PropertyFactory.getProp(o,i.e,1,null,this),this.h=PropertyFactory.getProp(o,i.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(o,i.a||{k:0},0,degToRads,this),this.g=new GradientProperty(o,i.g,this),this.style=s,this.stops=[],this.setGradientData(s.pElem,i),this.setGradientOpacity(i,s),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(o,i){var s=createElementID(),_=createNS(i.t===1?"linearGradient":"radialGradient");_.setAttribute("id",s),_.setAttribute("spreadMethod","pad"),_.setAttribute("gradientUnits","userSpaceOnUse");var _e,ct,Mt,Ft=[];for(Mt=4*i.g.p,ct=0;ct<Mt;ct+=4)_e=createNS("stop"),_.appendChild(_e),Ft.push(_e);o.setAttribute(i.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+s+")"),this.gf=_,this.cst=Ft},SVGGradientFillStyleData.prototype.setGradientOpacity=function(o,i){if(this.g._hasOpacity&&!this.g._collapsable){var s,_,_e,ct=createNS("mask"),Mt=createNS("path");ct.appendChild(Mt);var Ft=createElementID(),Ut=createElementID();ct.setAttribute("id",Ut);var Xt=createNS(o.t===1?"linearGradient":"radialGradient");Xt.setAttribute("id",Ft),Xt.setAttribute("spreadMethod","pad"),Xt.setAttribute("gradientUnits","userSpaceOnUse"),_e=o.g.k.k[0].s?o.g.k.k[0].s.length:o.g.k.k.length;var Kt=this.stops;for(_=4*o.g.p;_<_e;_+=2)(s=createNS("stop")).setAttribute("stop-color","rgb(255,255,255)"),Xt.appendChild(s),Kt.push(s);Mt.setAttribute(o.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+Ft+")"),o.ty==="gs"&&(Mt.setAttribute("stroke-linecap",lineCapEnum[o.lc||2]),Mt.setAttribute("stroke-linejoin",lineJoinEnum[o.lj||2]),o.lj===1&&Mt.setAttribute("stroke-miterlimit",o.ml)),this.of=Xt,this.ms=ct,this.ost=Kt,this.maskId=Ut,i.msElem=Mt}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData),extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);var buildShapeString=function(o,i,s,_){if(i===0)return"";var _e,ct=o.o,Mt=o.i,Ft=o.v,Ut=" M"+_.applyToPointStringified(Ft[0][0],Ft[0][1]);for(_e=1;_e<i;_e+=1)Ut+=" C"+_.applyToPointStringified(ct[_e-1][0],ct[_e-1][1])+" "+_.applyToPointStringified(Mt[_e][0],Mt[_e][1])+" "+_.applyToPointStringified(Ft[_e][0],Ft[_e][1]);return s&&i&&(Ut+=" C"+_.applyToPointStringified(ct[_e-1][0],ct[_e-1][1])+" "+_.applyToPointStringified(Mt[0][0],Mt[0][1])+" "+_.applyToPointStringified(Ft[0][0],Ft[0][1]),Ut+="z"),Ut},SVGElementsRenderer=function(){var o=new Matrix,i=new Matrix;function s(Xt,Kt,nr){(nr||Kt.transform.op._mdf)&&Kt.transform.container.setAttribute("opacity",Kt.transform.op.v),(nr||Kt.transform.mProps._mdf)&&Kt.transform.container.setAttribute("transform",Kt.transform.mProps.v.to2dCSS())}function _(){}function _e(Xt,Kt,nr){var rr,or,hr,fr,yr,Lr,Br,Vr,Wr,ro,no=Kt.styles.length,so=Kt.lvl;for(Lr=0;Lr<no;Lr+=1){if(fr=Kt.sh._mdf||nr,Kt.styles[Lr].lvl<so){for(Vr=i.reset(),Wr=so-Kt.styles[Lr].lvl,ro=Kt.transformers.length-1;!fr&&Wr>0;)fr=Kt.transformers[ro].mProps._mdf||fr,Wr-=1,ro-=1;if(fr)for(Wr=so-Kt.styles[Lr].lvl,ro=Kt.transformers.length-1;Wr>0;)Vr.multiply(Kt.transformers[ro].mProps.v),Wr-=1,ro-=1}else Vr=o;if(or=(Br=Kt.sh.paths)._length,fr){for(hr="",rr=0;rr<or;rr+=1)(yr=Br.shapes[rr])&&yr._length&&(hr+=buildShapeString(yr,yr._length,yr.c,Vr));Kt.caches[Lr]=hr}else hr=Kt.caches[Lr];Kt.styles[Lr].d+=Xt.hd===!0?"":hr,Kt.styles[Lr]._mdf=fr||Kt.styles[Lr]._mdf}}function ct(Xt,Kt,nr){var rr=Kt.style;(Kt.c._mdf||nr)&&rr.pElem.setAttribute("fill","rgb("+bmFloor(Kt.c.v[0])+","+bmFloor(Kt.c.v[1])+","+bmFloor(Kt.c.v[2])+")"),(Kt.o._mdf||nr)&&rr.pElem.setAttribute("fill-opacity",Kt.o.v)}function Mt(Xt,Kt,nr){Ft(Xt,Kt,nr),Ut(0,Kt,nr)}function Ft(Xt,Kt,nr){var rr,or,hr,fr,yr,Lr=Kt.gf,Br=Kt.g._hasOpacity,Vr=Kt.s.v,Wr=Kt.e.v;if(Kt.o._mdf||nr){var ro=Xt.ty==="gf"?"fill-opacity":"stroke-opacity";Kt.style.pElem.setAttribute(ro,Kt.o.v)}if(Kt.s._mdf||nr){var no=Xt.t===1?"x1":"cx",so=no==="x1"?"y1":"cy";Lr.setAttribute(no,Vr[0]),Lr.setAttribute(so,Vr[1]),Br&&!Kt.g._collapsable&&(Kt.of.setAttribute(no,Vr[0]),Kt.of.setAttribute(so,Vr[1]))}if(Kt.g._cmdf||nr){rr=Kt.cst;var ko=Kt.g.c;for(hr=rr.length,or=0;or<hr;or+=1)(fr=rr[or]).setAttribute("offset",ko[4*or]+"%"),fr.setAttribute("stop-color","rgb("+ko[4*or+1]+","+ko[4*or+2]+","+ko[4*or+3]+")")}if(Br&&(Kt.g._omdf||nr)){var To=Kt.g.o;for(hr=(rr=Kt.g._collapsable?Kt.cst:Kt.ost).length,or=0;or<hr;or+=1)fr=rr[or],Kt.g._collapsable||fr.setAttribute("offset",To[2*or]+"%"),fr.setAttribute("stop-opacity",To[2*or+1])}if(Xt.t===1)(Kt.e._mdf||nr)&&(Lr.setAttribute("x2",Wr[0]),Lr.setAttribute("y2",Wr[1]),Br&&!Kt.g._collapsable&&(Kt.of.setAttribute("x2",Wr[0]),Kt.of.setAttribute("y2",Wr[1])));else if((Kt.s._mdf||Kt.e._mdf||nr)&&(yr=Math.sqrt(Math.pow(Vr[0]-Wr[0],2)+Math.pow(Vr[1]-Wr[1],2)),Lr.setAttribute("r",yr),Br&&!Kt.g._collapsable&&Kt.of.setAttribute("r",yr)),Kt.e._mdf||Kt.h._mdf||Kt.a._mdf||nr){yr||(yr=Math.sqrt(Math.pow(Vr[0]-Wr[0],2)+Math.pow(Vr[1]-Wr[1],2)));var oo=Math.atan2(Wr[1]-Vr[1],Wr[0]-Vr[0]),No=Kt.h.v;No>=1?No=.99:No<=-1&&(No=-.99);var As=yr*No,Ks=Math.cos(oo+Kt.a.v)*As+Vr[0],vu=Math.sin(oo+Kt.a.v)*As+Vr[1];Lr.setAttribute("fx",Ks),Lr.setAttribute("fy",vu),Br&&!Kt.g._collapsable&&(Kt.of.setAttribute("fx",Ks),Kt.of.setAttribute("fy",vu))}}function Ut(Xt,Kt,nr){var rr=Kt.style,or=Kt.d;or&&(or._mdf||nr)&&or.dashStr&&(rr.pElem.setAttribute("stroke-dasharray",or.dashStr),rr.pElem.setAttribute("stroke-dashoffset",or.dashoffset[0])),Kt.c&&(Kt.c._mdf||nr)&&rr.pElem.setAttribute("stroke","rgb("+bmFloor(Kt.c.v[0])+","+bmFloor(Kt.c.v[1])+","+bmFloor(Kt.c.v[2])+")"),(Kt.o._mdf||nr)&&rr.pElem.setAttribute("stroke-opacity",Kt.o.v),(Kt.w._mdf||nr)&&(rr.pElem.setAttribute("stroke-width",Kt.w.v),rr.msElem&&rr.msElem.setAttribute("stroke-width",Kt.w.v))}return{createRenderFunction:function(Xt){switch(Xt.ty){case"fl":return ct;case"gf":return Ft;case"gs":return Mt;case"st":return Ut;case"sh":case"el":case"rc":case"sr":return _e;case"tr":return s;case"no":return _;default:return null}}}}();function SVGShapeElement(o,i,s){this.shapes=[],this.shapesData=o.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(o,i,s),this.prevViewData=[]}function LetterProps(o,i,s,_,_e,ct){this.o=o,this.sw=i,this.sc=s,this.fc=_,this.m=_e,this.p=ct,this._mdf={o:!0,sw:!!i,sc:!!s,fc:!!_,m:!0,p:!0}}function TextProperty(o,i){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,i.d&&i.d.sid&&(i.d=o.globalData.slotManager.getProp(i.d)),this.data=i,this.elem=o,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var o,i,s,_,_e=this.shapes.length,ct=this.stylesList.length,Mt=[],Ft=!1;for(s=0;s<ct;s+=1){for(_=this.stylesList[s],Ft=!1,Mt.length=0,o=0;o<_e;o+=1)(i=this.shapes[o]).styles.indexOf(_)!==-1&&(Mt.push(i),Ft=i._isAnimated||Ft);Mt.length>1&&Ft&&this.setShapesAsAnimated(Mt)}},SVGShapeElement.prototype.setShapesAsAnimated=function(o){var i,s=o.length;for(i=0;i<s;i+=1)o[i].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(o,i){var s,_=new SVGStyleData(o,i),_e=_.pElem;return o.ty==="st"?s=new SVGStrokeStyleData(this,o,_):o.ty==="fl"?s=new SVGFillStyleData(this,o,_):o.ty==="gf"||o.ty==="gs"?(s=new(o.ty==="gf"?SVGGradientFillStyleData:SVGGradientStrokeStyleData)(this,o,_),this.globalData.defs.appendChild(s.gf),s.maskId&&(this.globalData.defs.appendChild(s.ms),this.globalData.defs.appendChild(s.of),_e.setAttribute("mask","url("+getLocationHref()+"#"+s.maskId+")"))):o.ty==="no"&&(s=new SVGNoStyleData(this,o,_)),o.ty!=="st"&&o.ty!=="gs"||(_e.setAttribute("stroke-linecap",lineCapEnum[o.lc||2]),_e.setAttribute("stroke-linejoin",lineJoinEnum[o.lj||2]),_e.setAttribute("fill-opacity","0"),o.lj===1&&_e.setAttribute("stroke-miterlimit",o.ml)),o.r===2&&_e.setAttribute("fill-rule","evenodd"),o.ln&&_e.setAttribute("id",o.ln),o.cl&&_e.setAttribute("class",o.cl),o.bm&&(_e.style["mix-blend-mode"]=getBlendMode(o.bm)),this.stylesList.push(_),this.addToAnimatedContents(o,s),s},SVGShapeElement.prototype.createGroupElement=function(o){var i=new ShapeGroupData;return o.ln&&i.gr.setAttribute("id",o.ln),o.cl&&i.gr.setAttribute("class",o.cl),o.bm&&(i.gr.style["mix-blend-mode"]=getBlendMode(o.bm)),i},SVGShapeElement.prototype.createTransformElement=function(o,i){var s=TransformPropertyFactory.getTransformProperty(this,o,this),_=new SVGTransformData(s,s.o,i);return this.addToAnimatedContents(o,_),_},SVGShapeElement.prototype.createShapeElement=function(o,i,s){var _=4;o.ty==="rc"?_=5:o.ty==="el"?_=6:o.ty==="sr"&&(_=7);var _e=new SVGShapeData(i,s,ShapePropertyFactory.getShapeProp(this,o,_,this));return this.shapes.push(_e),this.addShapeToModifiers(_e),this.addToAnimatedContents(o,_e),_e},SVGShapeElement.prototype.addToAnimatedContents=function(o,i){for(var s=0,_=this.animatedContents.length;s<_;){if(this.animatedContents[s].element===i)return;s+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(o),element:i,data:o})},SVGShapeElement.prototype.setElementStyles=function(o){var i,s=o.styles,_=this.stylesList.length;for(i=0;i<_;i+=1)this.stylesList[i].closed||s.push(this.stylesList[i])},SVGShapeElement.prototype.reloadShapes=function(){var o;this._isFirstFrame=!0;var i=this.itemsData.length;for(o=0;o<i;o+=1)this.prevViewData[o]=this.itemsData[o];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),i=this.dynamicProperties.length,o=0;o<i;o+=1)this.dynamicProperties[o].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(o,i,s,_,_e,ct,Mt){var Ft,Ut,Xt,Kt,nr,rr,or=[].concat(ct),hr=o.length-1,fr=[],yr=[];for(Ft=hr;Ft>=0;Ft-=1){if((rr=this.searchProcessedElement(o[Ft]))?i[Ft]=s[rr-1]:o[Ft]._render=Mt,o[Ft].ty==="fl"||o[Ft].ty==="st"||o[Ft].ty==="gf"||o[Ft].ty==="gs"||o[Ft].ty==="no")rr?i[Ft].style.closed=!1:i[Ft]=this.createStyleElement(o[Ft],_e),o[Ft]._render&&i[Ft].style.pElem.parentNode!==_&&_.appendChild(i[Ft].style.pElem),fr.push(i[Ft].style);else if(o[Ft].ty==="gr"){if(rr)for(Xt=i[Ft].it.length,Ut=0;Ut<Xt;Ut+=1)i[Ft].prevViewData[Ut]=i[Ft].it[Ut];else i[Ft]=this.createGroupElement(o[Ft]);this.searchShapes(o[Ft].it,i[Ft].it,i[Ft].prevViewData,i[Ft].gr,_e+1,or,Mt),o[Ft]._render&&i[Ft].gr.parentNode!==_&&_.appendChild(i[Ft].gr)}else o[Ft].ty==="tr"?(rr||(i[Ft]=this.createTransformElement(o[Ft],_)),Kt=i[Ft].transform,or.push(Kt)):o[Ft].ty==="sh"||o[Ft].ty==="rc"||o[Ft].ty==="el"||o[Ft].ty==="sr"?(rr||(i[Ft]=this.createShapeElement(o[Ft],or,_e)),this.setElementStyles(i[Ft])):o[Ft].ty==="tm"||o[Ft].ty==="rd"||o[Ft].ty==="ms"||o[Ft].ty==="pb"||o[Ft].ty==="zz"||o[Ft].ty==="op"?(rr?(nr=i[Ft]).closed=!1:((nr=ShapeModifiers.getModifier(o[Ft].ty)).init(this,o[Ft]),i[Ft]=nr,this.shapeModifiers.push(nr)),yr.push(nr)):o[Ft].ty==="rp"&&(rr?(nr=i[Ft]).closed=!0:(nr=ShapeModifiers.getModifier(o[Ft].ty),i[Ft]=nr,nr.init(this,o,Ft,i),this.shapeModifiers.push(nr),Mt=!1),yr.push(nr));this.addProcessedElement(o[Ft],Ft+1)}for(hr=fr.length,Ft=0;Ft<hr;Ft+=1)fr[Ft].closed=!0;for(hr=yr.length,Ft=0;Ft<hr;Ft+=1)yr[Ft].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){var o;this.renderModifiers();var i=this.stylesList.length;for(o=0;o<i;o+=1)this.stylesList[o].reset();for(this.renderShape(),o=0;o<i;o+=1)(this.stylesList[o]._mdf||this._isFirstFrame)&&(this.stylesList[o].msElem&&(this.stylesList[o].msElem.setAttribute("d",this.stylesList[o].d),this.stylesList[o].d="M0 0"+this.stylesList[o].d),this.stylesList[o].pElem.setAttribute("d",this.stylesList[o].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var o,i,s=this.animatedContents.length;for(o=0;o<s;o+=1)i=this.animatedContents[o],(this._isFirstFrame||i.element._isAnimated)&&i.data!==!0&&i.fn(i.data,i.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null},LetterProps.prototype.update=function(o,i,s,_,_e,ct){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var Mt=!1;return this.o!==o&&(this.o=o,this._mdf.o=!0,Mt=!0),this.sw!==i&&(this.sw=i,this._mdf.sw=!0,Mt=!0),this.sc!==s&&(this.sc=s,this._mdf.sc=!0,Mt=!0),this.fc!==_&&(this.fc=_,this._mdf.fc=!0,Mt=!0),this.m!==_e&&(this.m=_e,this._mdf.m=!0,Mt=!0),!ct.length||this.p[0]===ct[0]&&this.p[1]===ct[1]&&this.p[4]===ct[4]&&this.p[5]===ct[5]&&this.p[12]===ct[12]&&this.p[13]===ct[13]||(this.p=ct,this._mdf.p=!0,Mt=!0),Mt},TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(o,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(o[s]=i[s]);return o},TextProperty.prototype.setCurrentData=function(o){o.__complete||this.completeTextData(o),this.currentData=o,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(o){this.effectsSequence.push(o),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(o){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length||o){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var i=this.currentData,s=this.keysIndex;if(this.lock)this.setCurrentData(this.currentData);else{var _;this.lock=!0,this._mdf=!1;var _e=this.effectsSequence.length,ct=o||this.data.d.k[this.keysIndex].s;for(_=0;_<_e;_+=1)ct=s!==this.keysIndex?this.effectsSequence[_](ct,ct.t):this.effectsSequence[_](this.currentData,ct.t);i!==ct&&this.setCurrentData(ct),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}}},TextProperty.prototype.getKeyframeValue=function(){for(var o=this.data.d.k,i=this.elem.comp.renderedFrame,s=0,_=o.length;s<=_-1&&!(s===_-1||o[s+1].t>i);)s+=1;return this.keysIndex!==s&&(this.keysIndex=s),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(o){for(var i,s,_=[],_e=0,ct=o.length,Mt=!1,Ft=!1,Ut="";_e<ct;)Mt=Ft,Ft=!1,i=o.charCodeAt(_e),Ut=o.charAt(_e),FontManager.isCombinedCharacter(i)?Mt=!0:i>=55296&&i<=56319?FontManager.isRegionalFlag(o,_e)?Ut=o.substr(_e,14):(s=o.charCodeAt(_e+1))>=56320&&s<=57343&&(FontManager.isModifier(i,s)?(Ut=o.substr(_e,2),Mt=!0):Ut=FontManager.isFlagEmoji(o.substr(_e,4))?o.substr(_e,4):o.substr(_e,2)):i>56319?(s=o.charCodeAt(_e+1),FontManager.isVariationSelector(i)&&(Mt=!0)):FontManager.isZeroWidthJoiner(i)&&(Mt=!0,Ft=!0),Mt?(_[_.length-1]+=Ut,Mt=!1):_.push(Ut),_e+=Ut.length;return _},TextProperty.prototype.completeTextData=function(o){o.__complete=!0;var i,s,_,_e,ct,Mt,Ft,Ut=this.elem.globalData.fontManager,Xt=this.data,Kt=[],nr=0,rr=Xt.m.g,or=0,hr=0,fr=0,yr=[],Lr=0,Br=0,Vr=Ut.getFontByName(o.f),Wr=0,ro=getFontProperties(Vr);o.fWeight=ro.weight,o.fStyle=ro.style,o.finalSize=o.s,o.finalText=this.buildFinalText(o.t),s=o.finalText.length,o.finalLineHeight=o.lh;var no,so=o.tr/1e3*o.finalSize;if(o.sz)for(var ko,To,oo=!0,No=o.sz[0],As=o.sz[1];oo;){ko=0,Lr=0,s=(To=this.buildFinalText(o.t)).length,so=o.tr/1e3*o.finalSize;var Ks=-1;for(i=0;i<s;i+=1)no=To[i].charCodeAt(0),_=!1,To[i]===" "?Ks=i:no!==13&&no!==3||(Lr=0,_=!0,ko+=o.finalLineHeight||1.2*o.finalSize),Ut.chars?(Ft=Ut.getCharData(To[i],Vr.fStyle,Vr.fFamily),Wr=_?0:Ft.w*o.finalSize/100):Wr=Ut.measureText(To[i],o.f,o.finalSize),Lr+Wr>No&&To[i]!==" "?(Ks===-1?s+=1:i=Ks,ko+=o.finalLineHeight||1.2*o.finalSize,To.splice(i,Ks===i?1:0,"\r"),Ks=-1,Lr=0):(Lr+=Wr,Lr+=so);ko+=Vr.ascent*o.finalSize/100,this.canResize&&o.finalSize>this.minimumFontSize&&As<ko?(o.finalSize-=1,o.finalLineHeight=o.finalSize*o.lh/o.s):(o.finalText=To,s=o.finalText.length,oo=!1)}Lr=-so,Wr=0;var vu,Fu=0;for(i=0;i<s;i+=1)if(_=!1,(no=(vu=o.finalText[i]).charCodeAt(0))===13||no===3?(Fu=0,yr.push(Lr),Br=Lr>Br?Lr:Br,Lr=-2*so,_e="",_=!0,fr+=1):_e=vu,Ut.chars?(Ft=Ut.getCharData(vu,Vr.fStyle,Ut.getFontByName(o.f).fFamily),Wr=_?0:Ft.w*o.finalSize/100):Wr=Ut.measureText(_e,o.f,o.finalSize),vu===" "?Fu+=Wr+so:(Lr+=Wr+so+Fu,Fu=0),Kt.push({l:Wr,an:Wr,add:or,n:_,anIndexes:[],val:_e,line:fr,animatorJustifyOffset:0}),rr==2){if(or+=Wr,_e===""||_e===" "||i===s-1){for(_e!==""&&_e!==" "||(or-=Wr);hr<=i;)Kt[hr].an=or,Kt[hr].ind=nr,Kt[hr].extra=Wr,hr+=1;nr+=1,or=0}}else if(rr==3){if(or+=Wr,_e===""||i===s-1){for(_e===""&&(or-=Wr);hr<=i;)Kt[hr].an=or,Kt[hr].ind=nr,Kt[hr].extra=Wr,hr+=1;or=0,nr+=1}}else Kt[nr].ind=nr,Kt[nr].extra=0,nr+=1;if(o.l=Kt,Br=Lr>Br?Lr:Br,yr.push(Lr),o.sz)o.boxWidth=o.sz[0],o.justifyOffset=0;else switch(o.boxWidth=Br,o.j){case 1:o.justifyOffset=-o.boxWidth;break;case 2:o.justifyOffset=-o.boxWidth/2;break;default:o.justifyOffset=0}o.lineWidths=yr;var Ap,Pp,Lo,Au,Mp=Xt.a;Mt=Mp.length;var Lp=[];for(ct=0;ct<Mt;ct+=1){for((Ap=Mp[ct]).a.sc&&(o.strokeColorAnim=!0),Ap.a.sw&&(o.strokeWidthAnim=!0),(Ap.a.fc||Ap.a.fh||Ap.a.fs||Ap.a.fb)&&(o.fillColorAnim=!0),Au=0,Lo=Ap.s.b,i=0;i<s;i+=1)(Pp=Kt[i]).anIndexes[ct]=Au,(Lo==1&&Pp.val!==""||Lo==2&&Pp.val!==""&&Pp.val!==" "||Lo==3&&(Pp.n||Pp.val==" "||i==s-1)||Lo==4&&(Pp.n||i==s-1))&&(Ap.s.rn===1&&Lp.push(Au),Au+=1);Xt.a[ct].s.totalChars=Au;var Op,Fp=-1;if(Ap.s.rn===1)for(i=0;i<s;i+=1)Fp!=(Pp=Kt[i]).anIndexes[ct]&&(Fp=Pp.anIndexes[ct],Op=Lp.splice(Math.floor(Math.random()*Lp.length),1)[0]),Pp.anIndexes[ct]=Op}o.yOffset=o.finalLineHeight||1.2*o.finalSize,o.ls=o.ls||0,o.ascent=Vr.ascent*o.finalSize/100},TextProperty.prototype.updateDocumentData=function(o,i){i=i===void 0?this.keysIndex:i;var s=this.copyData({},this.data.d.k[i].s);s=this.copyData(s,o),this.data.d.k[i].s=s,this.recalculate(i),this.setCurrentData(s),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(o){var i=this.data.d.k[o].s;i.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(i)},TextProperty.prototype.canResizeFont=function(o){this.canResize=o,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(o){this.minimumFontSize=Math.floor(o)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var o=Math.max,i=Math.min,s=Math.floor;function _(_e,ct){this._currentTextLength=-1,this.k=!1,this.data=ct,this.elem=_e,this.comp=_e.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(_e),this.s=PropertyFactory.getProp(_e,ct.s||{k:0},0,0,this),this.e="e"in ct?PropertyFactory.getProp(_e,ct.e,0,0,this):{v:100},this.o=PropertyFactory.getProp(_e,ct.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(_e,ct.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(_e,ct.ne||{k:0},0,0,this),this.sm=PropertyFactory.getProp(_e,ct.sm||{k:100},0,0,this),this.a=PropertyFactory.getProp(_e,ct.a,0,.01,this),this.dynamicProperties.length||this.getValue()}return _.prototype={getMult:function(_e){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var ct=0,Mt=0,Ft=1,Ut=1;this.ne.v>0?ct=this.ne.v/100:Mt=-this.ne.v/100,this.xe.v>0?Ft=1-this.xe.v/100:Ut=1+this.xe.v/100;var Xt=BezierFactory.getBezierEasing(ct,Mt,Ft,Ut).get,Kt=0,nr=this.finalS,rr=this.finalE,or=this.data.sh;if(or===2)Kt=Xt(Kt=rr===nr?_e>=rr?1:0:o(0,i(.5/(rr-nr)+(_e-nr)/(rr-nr),1)));else if(or===3)Kt=Xt(Kt=rr===nr?_e>=rr?0:1:1-o(0,i(.5/(rr-nr)+(_e-nr)/(rr-nr),1)));else if(or===4)rr===nr?Kt=0:(Kt=o(0,i(.5/(rr-nr)+(_e-nr)/(rr-nr),1)))<.5?Kt*=2:Kt=1-2*(Kt-.5),Kt=Xt(Kt);else if(or===5){if(rr===nr)Kt=0;else{var hr=rr-nr,fr=-hr/2+(_e=i(o(0,_e+.5-nr),rr-nr)),yr=hr/2;Kt=Math.sqrt(1-fr*fr/(yr*yr))}Kt=Xt(Kt)}else or===6?(rr===nr?Kt=0:(_e=i(o(0,_e+.5-nr),rr-nr),Kt=(1+Math.cos(Math.PI+2*Math.PI*_e/(rr-nr)))/2),Kt=Xt(Kt)):(_e>=s(nr)&&(Kt=o(0,i(_e-nr<0?i(rr,1)-(nr-_e):rr-_e,1))),Kt=Xt(Kt));if(this.sm.v!==100){var Lr=.01*this.sm.v;Lr===0&&(Lr=1e-8);var Br=.5-.5*Lr;Kt<Br?Kt=0:(Kt=(Kt-Br)/Lr)>1&&(Kt=1)}return Kt*this.a.v},getValue:function(_e){this.iterateDynamicProperties(),this._mdf=_e||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,_e&&this.data.r===2&&(this.e.v=this._currentTextLength);var ct=this.data.r===2?1:100/this.data.totalChars,Mt=this.o.v/ct,Ft=this.s.v/ct+Mt,Ut=this.e.v/ct+Mt;if(Ft>Ut){var Xt=Ft;Ft=Ut,Ut=Xt}this.finalS=Ft,this.finalE=Ut}},extendPrototype([DynamicPropertyContainer],_),{getTextSelectorProp:function(_e,ct,Mt){return new _(_e,ct)}}}();function TextAnimatorDataProperty(o,i,s){var _={propType:!1},_e=PropertyFactory.getProp,ct=i.a;this.a={r:ct.r?_e(o,ct.r,0,degToRads,s):_,rx:ct.rx?_e(o,ct.rx,0,degToRads,s):_,ry:ct.ry?_e(o,ct.ry,0,degToRads,s):_,sk:ct.sk?_e(o,ct.sk,0,degToRads,s):_,sa:ct.sa?_e(o,ct.sa,0,degToRads,s):_,s:ct.s?_e(o,ct.s,1,.01,s):_,a:ct.a?_e(o,ct.a,1,0,s):_,o:ct.o?_e(o,ct.o,0,.01,s):_,p:ct.p?_e(o,ct.p,1,0,s):_,sw:ct.sw?_e(o,ct.sw,0,0,s):_,sc:ct.sc?_e(o,ct.sc,1,0,s):_,fc:ct.fc?_e(o,ct.fc,1,0,s):_,fh:ct.fh?_e(o,ct.fh,0,0,s):_,fs:ct.fs?_e(o,ct.fs,0,.01,s):_,fb:ct.fb?_e(o,ct.fb,0,.01,s):_,t:ct.t?_e(o,ct.t,0,0,s):_},this.s=TextSelectorProp.getTextSelectorProp(o,i.s,s),this.s.t=i.s.t}function TextAnimatorProperty(o,i,s){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=o,this._renderType=i,this._elem=s,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(s)}function ITextElement(){}TextAnimatorProperty.prototype.searchProperties=function(){var o,i,s=this._textData.a.length,_=PropertyFactory.getProp;for(o=0;o<s;o+=1)i=this._textData.a[o],this._animatorsData[o]=new TextAnimatorDataProperty(this._elem,i,this);this._textData.p&&"m"in this._textData.p?(this._pathData={a:_(this._elem,this._textData.p.a,0,0,this),f:_(this._elem,this._textData.p.f,0,0,this),l:_(this._elem,this._textData.p.l,0,0,this),r:_(this._elem,this._textData.p.r,0,0,this),p:_(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=_(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(o,i){if(this.lettersChangedFlag=i,this._mdf||this._isFirstFrame||i||this._hasMaskedPath&&this._pathData.m._mdf){this._isFirstFrame=!1;var s,_,_e,ct,Mt,Ft,Ut,Xt,Kt,nr,rr,or,hr,fr,yr,Lr,Br,Vr,Wr,ro=this._moreOptions.alignment.v,no=this._animatorsData,so=this._textData,ko=this.mHelper,To=this._renderType,oo=this.renderedLetters.length,No=o.l;if(this._hasMaskedPath){if(Wr=this._pathData.m,!this._pathData.n||this._pathData._mdf){var As,Ks=Wr.v;for(this._pathData.r.v&&(Ks=Ks.reverse()),Mt={tLength:0,segments:[]},ct=Ks._length-1,Lr=0,_e=0;_e<ct;_e+=1)As=bez.buildBezierData(Ks.v[_e],Ks.v[_e+1],[Ks.o[_e][0]-Ks.v[_e][0],Ks.o[_e][1]-Ks.v[_e][1]],[Ks.i[_e+1][0]-Ks.v[_e+1][0],Ks.i[_e+1][1]-Ks.v[_e+1][1]]),Mt.tLength+=As.segmentLength,Mt.segments.push(As),Lr+=As.segmentLength;_e=ct,Wr.v.c&&(As=bez.buildBezierData(Ks.v[_e],Ks.v[0],[Ks.o[_e][0]-Ks.v[_e][0],Ks.o[_e][1]-Ks.v[_e][1]],[Ks.i[0][0]-Ks.v[0][0],Ks.i[0][1]-Ks.v[0][1]]),Mt.tLength+=As.segmentLength,Mt.segments.push(As),Lr+=As.segmentLength),this._pathData.pi=Mt}if(Mt=this._pathData.pi,Ft=this._pathData.f.v,rr=0,nr=1,Xt=0,Kt=!0,fr=Mt.segments,Ft<0&&Wr.v.c)for(Mt.tLength<Math.abs(Ft)&&(Ft=-Math.abs(Ft)%Mt.tLength),nr=(hr=fr[rr=fr.length-1].points).length-1;Ft<0;)Ft+=hr[nr].partialLength,(nr-=1)<0&&(nr=(hr=fr[rr-=1].points).length-1);or=(hr=fr[rr].points)[nr-1],yr=(Ut=hr[nr]).partialLength}ct=No.length,s=0,_=0;var vu,Fu,Ap,Pp,Lo,Au=1.2*o.finalSize*.714,Mp=!0;Ap=no.length;var Lp,Op,Fp,wm,Bp,Em,Yp,_m,Tm,Im,Mm,Bm,zm=-1,Am=Ft,Om=rr,Hm=nr,u1=-1,a1="",Gm=this.defaultPropsArray;if(o.j===2||o.j===1){var c1=0,m1=0,Sm=o.j===2?-.5:-1,Nm=0,Qp=!0;for(_e=0;_e<ct;_e+=1)if(No[_e].n){for(c1&&(c1+=m1);Nm<_e;)No[Nm].animatorJustifyOffset=c1,Nm+=1;c1=0,Qp=!0}else{for(Fu=0;Fu<Ap;Fu+=1)(vu=no[Fu].a).t.propType&&(Qp&&o.j===2&&(m1+=vu.t.v*Sm),(Lo=no[Fu].s.getMult(No[_e].anIndexes[Fu],so.a[Fu].s.totalChars)).length?c1+=vu.t.v*Lo[0]*Sm:c1+=vu.t.v*Lo*Sm);Qp=!1}for(c1&&(c1+=m1);Nm<_e;)No[Nm].animatorJustifyOffset=c1,Nm+=1}for(_e=0;_e<ct;_e+=1){if(ko.reset(),wm=1,No[_e].n)s=0,_+=o.yOffset,_+=Mp?1:0,Ft=Am,Mp=!1,this._hasMaskedPath&&(nr=Hm,or=(hr=fr[rr=Om].points)[nr-1],yr=(Ut=hr[nr]).partialLength,Xt=0),a1="",Mm="",Tm="",Bm="",Gm=this.defaultPropsArray;else{if(this._hasMaskedPath){if(u1!==No[_e].line){switch(o.j){case 1:Ft+=Lr-o.lineWidths[No[_e].line];break;case 2:Ft+=(Lr-o.lineWidths[No[_e].line])/2}u1=No[_e].line}zm!==No[_e].ind&&(No[zm]&&(Ft+=No[zm].extra),Ft+=No[_e].an/2,zm=No[_e].ind),Ft+=ro[0]*No[_e].an*.005;var $m=0;for(Fu=0;Fu<Ap;Fu+=1)(vu=no[Fu].a).p.propType&&((Lo=no[Fu].s.getMult(No[_e].anIndexes[Fu],so.a[Fu].s.totalChars)).length?$m+=vu.p.v[0]*Lo[0]:$m+=vu.p.v[0]*Lo),vu.a.propType&&((Lo=no[Fu].s.getMult(No[_e].anIndexes[Fu],so.a[Fu].s.totalChars)).length?$m+=vu.a.v[0]*Lo[0]:$m+=vu.a.v[0]*Lo);for(Kt=!0,this._pathData.a.v&&(Ft=.5*No[0].an+(Lr-this._pathData.f.v-.5*No[0].an-.5*No[No.length-1].an)*zm/(ct-1),Ft+=this._pathData.f.v);Kt;)Xt+yr>=Ft+$m||!hr?(Br=(Ft+$m-Xt)/Ut.partialLength,Op=or.point[0]+(Ut.point[0]-or.point[0])*Br,Fp=or.point[1]+(Ut.point[1]-or.point[1])*Br,ko.translate(-ro[0]*No[_e].an*.005,-ro[1]*Au*.01),Kt=!1):hr&&(Xt+=Ut.partialLength,(nr+=1)>=hr.length&&(nr=0,fr[rr+=1]?hr=fr[rr].points:Wr.v.c?(nr=0,hr=fr[rr=0].points):(Xt-=Ut.partialLength,hr=null)),hr&&(or=Ut,yr=(Ut=hr[nr]).partialLength));Lp=No[_e].an/2-No[_e].add,ko.translate(-Lp,0,0)}else Lp=No[_e].an/2-No[_e].add,ko.translate(-Lp,0,0),ko.translate(-ro[0]*No[_e].an*.005,-ro[1]*Au*.01,0);for(Fu=0;Fu<Ap;Fu+=1)(vu=no[Fu].a).t.propType&&(Lo=no[Fu].s.getMult(No[_e].anIndexes[Fu],so.a[Fu].s.totalChars),s===0&&o.j===0||(this._hasMaskedPath?Lo.length?Ft+=vu.t.v*Lo[0]:Ft+=vu.t.v*Lo:Lo.length?s+=vu.t.v*Lo[0]:s+=vu.t.v*Lo));for(o.strokeWidthAnim&&(Em=o.sw||0),o.strokeColorAnim&&(Bp=o.sc?[o.sc[0],o.sc[1],o.sc[2]]:[0,0,0]),o.fillColorAnim&&o.fc&&(Yp=[o.fc[0],o.fc[1],o.fc[2]]),Fu=0;Fu<Ap;Fu+=1)(vu=no[Fu].a).a.propType&&((Lo=no[Fu].s.getMult(No[_e].anIndexes[Fu],so.a[Fu].s.totalChars)).length?ko.translate(-vu.a.v[0]*Lo[0],-vu.a.v[1]*Lo[1],vu.a.v[2]*Lo[2]):ko.translate(-vu.a.v[0]*Lo,-vu.a.v[1]*Lo,vu.a.v[2]*Lo));for(Fu=0;Fu<Ap;Fu+=1)(vu=no[Fu].a).s.propType&&((Lo=no[Fu].s.getMult(No[_e].anIndexes[Fu],so.a[Fu].s.totalChars)).length?ko.scale(1+(vu.s.v[0]-1)*Lo[0],1+(vu.s.v[1]-1)*Lo[1],1):ko.scale(1+(vu.s.v[0]-1)*Lo,1+(vu.s.v[1]-1)*Lo,1));for(Fu=0;Fu<Ap;Fu+=1){if(vu=no[Fu].a,Lo=no[Fu].s.getMult(No[_e].anIndexes[Fu],so.a[Fu].s.totalChars),vu.sk.propType&&(Lo.length?ko.skewFromAxis(-vu.sk.v*Lo[0],vu.sa.v*Lo[1]):ko.skewFromAxis(-vu.sk.v*Lo,vu.sa.v*Lo)),vu.r.propType&&(Lo.length?ko.rotateZ(-vu.r.v*Lo[2]):ko.rotateZ(-vu.r.v*Lo)),vu.ry.propType&&(Lo.length?ko.rotateY(vu.ry.v*Lo[1]):ko.rotateY(vu.ry.v*Lo)),vu.rx.propType&&(Lo.length?ko.rotateX(vu.rx.v*Lo[0]):ko.rotateX(vu.rx.v*Lo)),vu.o.propType&&(Lo.length?wm+=(vu.o.v*Lo[0]-wm)*Lo[0]:wm+=(vu.o.v*Lo-wm)*Lo),o.strokeWidthAnim&&vu.sw.propType&&(Lo.length?Em+=vu.sw.v*Lo[0]:Em+=vu.sw.v*Lo),o.strokeColorAnim&&vu.sc.propType)for(_m=0;_m<3;_m+=1)Lo.length?Bp[_m]+=(vu.sc.v[_m]-Bp[_m])*Lo[0]:Bp[_m]+=(vu.sc.v[_m]-Bp[_m])*Lo;if(o.fillColorAnim&&o.fc){if(vu.fc.propType)for(_m=0;_m<3;_m+=1)Lo.length?Yp[_m]+=(vu.fc.v[_m]-Yp[_m])*Lo[0]:Yp[_m]+=(vu.fc.v[_m]-Yp[_m])*Lo;vu.fh.propType&&(Yp=Lo.length?addHueToRGB(Yp,vu.fh.v*Lo[0]):addHueToRGB(Yp,vu.fh.v*Lo)),vu.fs.propType&&(Yp=Lo.length?addSaturationToRGB(Yp,vu.fs.v*Lo[0]):addSaturationToRGB(Yp,vu.fs.v*Lo)),vu.fb.propType&&(Yp=Lo.length?addBrightnessToRGB(Yp,vu.fb.v*Lo[0]):addBrightnessToRGB(Yp,vu.fb.v*Lo))}}for(Fu=0;Fu<Ap;Fu+=1)(vu=no[Fu].a).p.propType&&(Lo=no[Fu].s.getMult(No[_e].anIndexes[Fu],so.a[Fu].s.totalChars),this._hasMaskedPath?Lo.length?ko.translate(0,vu.p.v[1]*Lo[0],-vu.p.v[2]*Lo[1]):ko.translate(0,vu.p.v[1]*Lo,-vu.p.v[2]*Lo):Lo.length?ko.translate(vu.p.v[0]*Lo[0],vu.p.v[1]*Lo[1],-vu.p.v[2]*Lo[2]):ko.translate(vu.p.v[0]*Lo,vu.p.v[1]*Lo,-vu.p.v[2]*Lo));if(o.strokeWidthAnim&&(Tm=Em<0?0:Em),o.strokeColorAnim&&(Im="rgb("+Math.round(255*Bp[0])+","+Math.round(255*Bp[1])+","+Math.round(255*Bp[2])+")"),o.fillColorAnim&&o.fc&&(Mm="rgb("+Math.round(255*Yp[0])+","+Math.round(255*Yp[1])+","+Math.round(255*Yp[2])+")"),this._hasMaskedPath){if(ko.translate(0,-o.ls),ko.translate(0,ro[1]*Au*.01+_,0),this._pathData.p.v){Vr=(Ut.point[1]-or.point[1])/(Ut.point[0]-or.point[0]);var Pm=180*Math.atan(Vr)/Math.PI;Ut.point[0]<or.point[0]&&(Pm+=180),ko.rotate(-Pm*Math.PI/180)}ko.translate(Op,Fp,0),Ft-=ro[0]*No[_e].an*.005,No[_e+1]&&zm!==No[_e+1].ind&&(Ft+=No[_e].an/2,Ft+=.001*o.tr*o.finalSize)}else{switch(ko.translate(s,_,0),o.ps&&ko.translate(o.ps[0],o.ps[1]+o.ascent,0),o.j){case 1:ko.translate(No[_e].animatorJustifyOffset+o.justifyOffset+(o.boxWidth-o.lineWidths[No[_e].line]),0,0);break;case 2:ko.translate(No[_e].animatorJustifyOffset+o.justifyOffset+(o.boxWidth-o.lineWidths[No[_e].line])/2,0,0)}ko.translate(0,-o.ls),ko.translate(Lp,0,0),ko.translate(ro[0]*No[_e].an*.005,ro[1]*Au*.01,0),s+=No[_e].l+.001*o.tr*o.finalSize}To==="html"?a1=ko.toCSS():To==="svg"?a1=ko.to2dCSS():Gm=[ko.props[0],ko.props[1],ko.props[2],ko.props[3],ko.props[4],ko.props[5],ko.props[6],ko.props[7],ko.props[8],ko.props[9],ko.props[10],ko.props[11],ko.props[12],ko.props[13],ko.props[14],ko.props[15]],Bm=wm}oo<=_e?(Pp=new LetterProps(Bm,Tm,Im,Mm,a1,Gm),this.renderedLetters.push(Pp),oo+=1,this.lettersChangedFlag=!0):(Pp=this.renderedLetters[_e],this.lettersChangedFlag=Pp.update(Bm,Tm,Im,Mm,a1,Gm)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty),ITextElement.prototype.initElement=function(o,i,s){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(o,i,s),this.textProperty=new TextProperty(this,o.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(o.t,this.renderType,this),this.initTransform(o,i,s),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(o){this._mdf=!1,this.prepareRenderableFrame(o),this.prepareProperties(o,this.isInRange)},ITextElement.prototype.createPathShape=function(o,i){var s,_,_e=i.length,ct="";for(s=0;s<_e;s+=1)i[s].ty==="sh"&&(_=i[s].ks.k,ct+=buildShapeString(_,_.i.length,!0,o));return ct},ITextElement.prototype.updateDocumentData=function(o,i){this.textProperty.updateDocumentData(o,i)},ITextElement.prototype.canResizeFont=function(o){this.textProperty.canResizeFont(o)},ITextElement.prototype.setMinimumFontSize=function(o){this.textProperty.setMinimumFontSize(o)},ITextElement.prototype.applyTextPropertiesToMatrix=function(o,i,s,_,_e){switch(o.ps&&i.translate(o.ps[0],o.ps[1]+o.ascent,0),i.translate(0,-o.ls,0),o.j){case 1:i.translate(o.justifyOffset+(o.boxWidth-o.lineWidths[s]),0,0);break;case 2:i.translate(o.justifyOffset+(o.boxWidth-o.lineWidths[s])/2,0,0)}i.translate(_,_e,0)},ITextElement.prototype.buildColor=function(o){return"rgb("+Math.round(255*o[0])+","+Math.round(255*o[1])+","+Math.round(255*o[2])+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){},ITextElement.prototype.validateText=function(){(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)};var emptyShapeData={shapes:[]};function SVGTextLottieElement(o,i,s){this.textSpans=[],this.renderType="svg",this.initElement(o,i,s)}function ISolidElement(o,i,s){this.initElement(o,i,s)}function NullElement(o,i,s){this.initFrame(),this.initBaseData(o,i,s),this.initFrame(),this.initTransform(o,i,s),this.initHierarchy()}function SVGRendererBase(){}function ICompElement(){}function SVGCompElement(o,i,s){this.layers=o.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(o,i,s),this.tm=o.tm?PropertyFactory.getProp(this,o.tm,0,i.frameRate,this):{_placeholder:!0}}function SVGRenderer(o,i){this.animationItem=o,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var s="";if(i&&i.title){var _=createNS("title"),_e=createElementID();_.setAttribute("id",_e),_.textContent=i.title,this.svgElement.appendChild(_),s+=_e}if(i&&i.description){var ct=createNS("desc"),Mt=createElementID();ct.setAttribute("id",Mt),ct.textContent=i.description,this.svgElement.appendChild(ct),s+=" "+Mt}s&&this.svgElement.setAttribute("aria-labelledby",s);var Ft=createNS("defs");this.svgElement.appendChild(Ft);var Ut=createNS("g");this.svgElement.appendChild(Ut),this.layerElement=Ut,this.renderConfig={preserveAspectRatio:i&&i.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:i&&i.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:i&&i.contentVisibility||"visible",progressiveLoad:i&&i.progressiveLoad||!1,hideOnTransparent:!(i&&i.hideOnTransparent===!1),viewBoxOnly:i&&i.viewBoxOnly||!1,viewBoxSize:i&&i.viewBoxSize||!1,className:i&&i.className||"",id:i&&i.id||"",focusable:i&&i.focusable,filterSize:{width:i&&i.filterSize&&i.filterSize.width||"100%",height:i&&i.filterSize&&i.filterSize.height||"100%",x:i&&i.filterSize&&i.filterSize.x||"0%",y:i&&i.filterSize&&i.filterSize.y||"0%"},width:i&&i.width,height:i&&i.height,runExpressions:!i||i.runExpressions===void 0||i.runExpressions},this.globalData={_mdf:!1,frameNum:-1,defs:Ft,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(o){for(var i=0,s=o.length,_=[],_e="";i<s;)o[i]==="\r"||o[i]===""?(_.push(_e),_e=""):_e+=o[i],i+=1;return _.push(_e),_},SVGTextLottieElement.prototype.buildShapeData=function(o,i){if(o.shapes&&o.shapes.length){var s=o.shapes[0];if(s.it){var _=s.it[s.it.length-1];_.s&&(_.s.k[0]=i,_.s.k[1]=i)}}return o},SVGTextLottieElement.prototype.buildNewText=function(){var o,i;this.addDynamicProperty(this);var s=this.textProperty.currentData;this.renderedLetters=createSizedArray(s?s.l.length:0),s.fc?this.layerElement.setAttribute("fill",this.buildColor(s.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),s.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(s.sc)),this.layerElement.setAttribute("stroke-width",s.sw)),this.layerElement.setAttribute("font-size",s.finalSize);var _=this.globalData.fontManager.getFontByName(s.f);if(_.fClass)this.layerElement.setAttribute("class",_.fClass);else{this.layerElement.setAttribute("font-family",_.fFamily);var _e=s.fWeight,ct=s.fStyle;this.layerElement.setAttribute("font-style",ct),this.layerElement.setAttribute("font-weight",_e)}this.layerElement.setAttribute("aria-label",s.t);var Mt,Ft=s.l||[],Ut=!!this.globalData.fontManager.chars;i=Ft.length;var Xt=this.mHelper,Kt=this.data.singleShape,nr=0,rr=0,or=!0,hr=.001*s.tr*s.finalSize;if(!Kt||Ut||s.sz){var fr,yr=this.textSpans.length;for(o=0;o<i;o+=1){if(this.textSpans[o]||(this.textSpans[o]={span:null,childSpan:null,glyph:null}),!Ut||!Kt||o===0){if(Mt=yr>o?this.textSpans[o].span:createNS(Ut?"g":"text"),yr<=o){if(Mt.setAttribute("stroke-linecap","butt"),Mt.setAttribute("stroke-linejoin","round"),Mt.setAttribute("stroke-miterlimit","4"),this.textSpans[o].span=Mt,Ut){var Lr=createNS("g");Mt.appendChild(Lr),this.textSpans[o].childSpan=Lr}this.textSpans[o].span=Mt,this.layerElement.appendChild(Mt)}Mt.style.display="inherit"}if(Xt.reset(),Kt&&(Ft[o].n&&(nr=-hr,rr+=s.yOffset,rr+=or?1:0,or=!1),this.applyTextPropertiesToMatrix(s,Xt,Ft[o].line,nr,rr),nr+=Ft[o].l||0,nr+=hr),Ut){var Br;if((fr=this.globalData.fontManager.getCharData(s.finalText[o],_.fStyle,this.globalData.fontManager.getFontByName(s.f).fFamily)).t===1)Br=new SVGCompElement(fr.data,this.globalData,this);else{var Vr=emptyShapeData;fr.data&&fr.data.shapes&&(Vr=this.buildShapeData(fr.data,s.finalSize)),Br=new SVGShapeElement(Vr,this.globalData,this)}if(this.textSpans[o].glyph){var Wr=this.textSpans[o].glyph;this.textSpans[o].childSpan.removeChild(Wr.layerElement),Wr.destroy()}this.textSpans[o].glyph=Br,Br._debug=!0,Br.prepareFrame(0),Br.renderFrame(),this.textSpans[o].childSpan.appendChild(Br.layerElement),fr.t===1&&this.textSpans[o].childSpan.setAttribute("transform","scale("+s.finalSize/100+","+s.finalSize/100+")")}else Kt&&Mt.setAttribute("transform","translate("+Xt.props[12]+","+Xt.props[13]+")"),Mt.textContent=Ft[o].val,Mt.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}Kt&&Mt&&Mt.setAttribute("d","")}else{var ro=this.textContainer,no="start";switch(s.j){case 1:no="end";break;case 2:no="middle";break;default:no="start"}ro.setAttribute("text-anchor",no),ro.setAttribute("letter-spacing",hr);var so=this.buildTextContents(s.finalText);for(i=so.length,rr=s.ps?s.ps[1]+s.ascent:0,o=0;o<i;o+=1)(Mt=this.textSpans[o].span||createNS("tspan")).textContent=so[o],Mt.setAttribute("x",0),Mt.setAttribute("y",rr),Mt.style.display="inherit",ro.appendChild(Mt),this.textSpans[o]||(this.textSpans[o]={span:null,glyph:null}),this.textSpans[o].span=Mt,rr+=s.finalLineHeight;this.layerElement.appendChild(ro)}for(;o<this.textSpans.length;)this.textSpans[o].span.style.display="none",o+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var o=this.layerElement.getBBox();this.bbox={top:o.y,left:o.x,width:o.width,height:o.height}}return this.bbox},SVGTextLottieElement.prototype.getValue=function(){var o,i,s=this.textSpans.length;for(this.renderedFrame=this.comp.renderedFrame,o=0;o<s;o+=1)(i=this.textSpans[o].glyph)&&(i.prepareFrame(this.comp.renderedFrame-this.data.st),i._mdf&&(this._mdf=!0))},SVGTextLottieElement.prototype.renderInnerContent=function(){if(this.validateText(),(!this.data.singleShape||this._mdf)&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){var o,i;this._sizeChanged=!0;var s,_,_e,ct=this.textAnimator.renderedLetters,Mt=this.textProperty.currentData.l;for(i=Mt.length,o=0;o<i;o+=1)Mt[o].n||(s=ct[o],_=this.textSpans[o].span,(_e=this.textSpans[o].glyph)&&_e.renderFrame(),s._mdf.m&&_.setAttribute("transform",s.m),s._mdf.o&&_.setAttribute("opacity",s.o),s._mdf.sw&&_.setAttribute("stroke-width",s.sw),s._mdf.sc&&_.setAttribute("stroke",s.sc),s._mdf.fc&&_.setAttribute("fill",s.fc))}},extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var o=createNS("rect");o.setAttribute("width",this.data.sw),o.setAttribute("height",this.data.sh),o.setAttribute("fill",this.data.sc),this.layerElement.appendChild(o)},NullElement.prototype.prepareFrame=function(o){this.prepareProperties(o,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement),extendPrototype([BaseRenderer],SVGRendererBase),SVGRendererBase.prototype.createNull=function(o){return new NullElement(o,this.globalData,this)},SVGRendererBase.prototype.createShape=function(o){return new SVGShapeElement(o,this.globalData,this)},SVGRendererBase.prototype.createText=function(o){return new SVGTextLottieElement(o,this.globalData,this)},SVGRendererBase.prototype.createImage=function(o){return new IImageElement(o,this.globalData,this)},SVGRendererBase.prototype.createSolid=function(o){return new ISolidElement(o,this.globalData,this)},SVGRendererBase.prototype.configAnimation=function(o){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svgElement.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+o.w+" "+o.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",o.w),this.svgElement.setAttribute("height",o.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)",this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility),this.renderConfig.width&&this.svgElement.setAttribute("width",this.renderConfig.width),this.renderConfig.height&&this.svgElement.setAttribute("height",this.renderConfig.height),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),this.renderConfig.focusable!==void 0&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var i=this.globalData.defs;this.setupGlobalData(o,i),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=o;var s=createNS("clipPath"),_=createNS("rect");_.setAttribute("width",o.w),_.setAttribute("height",o.h),_.setAttribute("x",0),_.setAttribute("y",0);var _e=createElementID();s.setAttribute("id",_e),s.appendChild(_),this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+_e+")"),i.appendChild(s),this.layers=o.layers,this.elements=createSizedArray(o.layers.length)},SVGRendererBase.prototype.destroy=function(){var o;this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var i=this.layers?this.layers.length:0;for(o=0;o<i;o+=1)this.elements[o]&&this.elements[o].destroy&&this.elements[o].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRendererBase.prototype.updateContainerSize=function(){},SVGRendererBase.prototype.findIndexByInd=function(o){var i=0,s=this.layers.length;for(i=0;i<s;i+=1)if(this.layers[i].ind===o)return i;return-1},SVGRendererBase.prototype.buildItem=function(o){var i=this.elements;if(!i[o]&&this.layers[o].ty!==99){i[o]=!0;var s=this.createItem(this.layers[o]);if(i[o]=s,getExpressionsPlugin()&&(this.layers[o].ty===0&&this.globalData.projectInterface.registerComposition(s),s.initExpressions()),this.appendElementInPos(s,o),this.layers[o].tt){var _="tp"in this.layers[o]?this.findIndexByInd(this.layers[o].tp):o-1;if(_===-1)return;if(this.elements[_]&&this.elements[_]!==!0){var _e=i[_].getMatte(this.layers[o].tt);s.setMatte(_e)}else this.buildItem(_),this.addPendingElement(s)}}},SVGRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var o=this.pendingElements.pop();if(o.checkParenting(),o.data.tt)for(var i=0,s=this.elements.length;i<s;){if(this.elements[i]===o){var _="tp"in o.data?this.findIndexByInd(o.data.tp):i-1,_e=this.elements[_].getMatte(this.layers[i].tt);o.setMatte(_e);break}i+=1}}},SVGRendererBase.prototype.renderFrame=function(o){if(this.renderedFrame!==o&&!this.destroyed){var i;o===null?o=this.renderedFrame:this.renderedFrame=o,this.globalData.frameNum=o,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=o,this.globalData._mdf=!1;var s=this.layers.length;for(this.completeLayers||this.checkLayers(o),i=s-1;i>=0;i-=1)(this.completeLayers||this.elements[i])&&this.elements[i].prepareFrame(o-this.layers[i].st);if(this.globalData._mdf)for(i=0;i<s;i+=1)(this.completeLayers||this.elements[i])&&this.elements[i].renderFrame()}},SVGRendererBase.prototype.appendElementInPos=function(o,i){var s=o.getBaseElement();if(s){for(var _,_e=0;_e<i;)this.elements[_e]&&this.elements[_e]!==!0&&this.elements[_e].getBaseElement()&&(_=this.elements[_e].getBaseElement()),_e+=1;_?this.layerElement.insertBefore(s,_):this.layerElement.appendChild(s)}},SVGRendererBase.prototype.hide=function(){this.layerElement.style.display="none"},SVGRendererBase.prototype.show=function(){this.layerElement.style.display="block"},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(o,i,s){this.initFrame(),this.initBaseData(o,i,s),this.initTransform(o,i,s),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),!this.data.xt&&i.progressiveLoad||this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(o){if(this._mdf=!1,this.prepareRenderableFrame(o),this.prepareProperties(o,this.isInRange),this.isInRange||this.data.xt){if(this.tm._placeholder)this.renderedFrame=o/this.data.sr;else{var i=this.tm.v;i===this.data.op&&(i=this.data.op-1),this.renderedFrame=i}var s,_=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),s=_-1;s>=0;s-=1)(this.completeLayers||this.elements[s])&&(this.elements[s].prepareFrame(this.renderedFrame-this.layers[s].st),this.elements[s]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var o,i=this.layers.length;for(o=0;o<i;o+=1)(this.completeLayers||this.elements[o])&&this.elements[o].renderFrame()},ICompElement.prototype.setElements=function(o){this.elements=o},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var o,i=this.layers.length;for(o=0;o<i;o+=1)this.elements[o]&&this.elements[o].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()},extendPrototype([SVGRendererBase,ICompElement,SVGBaseElement],SVGCompElement),SVGCompElement.prototype.createComp=function(o){return new SVGCompElement(o,this.globalData,this)},extendPrototype([SVGRendererBase],SVGRenderer),SVGRenderer.prototype.createComp=function(o){return new SVGCompElement(o,this.globalData,this)},ShapeTransformManager.prototype={addTransformSequence:function(o){var i,s=o.length,_="_";for(i=0;i<s;i+=1)_+=o[i].transform.key+"_";var _e=this.sequences[_];return _e||(_e={transforms:[].concat(o),finalTransform:new Matrix,_mdf:!1},this.sequences[_]=_e,this.sequenceList.push(_e)),_e},processSequence:function(o,i){for(var s=0,_=o.transforms.length,_e=i;s<_&&!i;){if(o.transforms[s].transform.mProps._mdf){_e=!0;break}s+=1}if(_e)for(o.finalTransform.reset(),s=_-1;s>=0;s-=1)o.finalTransform.multiply(o.transforms[s].transform.mProps.v);o._mdf=_e},processSequences:function(o){var i,s=this.sequenceList.length;for(i=0;i<s;i+=1)this.processSequence(this.sequenceList[i],o)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}};var lumaLoader=function(){var o="__lottie_element_luma_buffer",i=null,s=null,_=null;function _e(){var ct,Mt,Ft;i||(ct=createNS("svg"),Mt=createNS("filter"),Ft=createNS("feColorMatrix"),Mt.setAttribute("id",o),Ft.setAttribute("type","matrix"),Ft.setAttribute("color-interpolation-filters","sRGB"),Ft.setAttribute("values","0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0"),Mt.appendChild(Ft),ct.appendChild(Mt),ct.setAttribute("id",o+"_svg"),featureSupport.svgLumaHidden&&(ct.style.display="none"),_=ct,document.body.appendChild(_),i=createTag("canvas"),(s=i.getContext("2d")).filter="url(#"+o+")",s.fillStyle="rgba(0,0,0,0)",s.fillRect(0,0,1,1))}return{load:_e,get:function(ct){return i||_e(),i.width=ct.width,i.height=ct.height,s.filter="url(#"+o+")",i}}};function createCanvas(o,i){if(featureSupport.offscreenCanvas)return new OffscreenCanvas(o,i);var s=createTag("canvas");return s.width=o,s.height=i,s}var assetLoader={loadLumaCanvas:lumaLoader.load,getLumaCanvas:lumaLoader.get,createCanvas},registeredEffects={};function CVEffects(o){var i,s,_=o.data.ef?o.data.ef.length:0;for(this.filters=[],i=0;i<_;i+=1){s=null;var _e=o.data.ef[i].ty;registeredEffects[_e]&&(s=new registeredEffects[_e].effect(o.effectsManager.effectElements[i],o)),s&&this.filters.push(s)}this.filters.length&&o.addRenderableComponent(this)}function registerEffect(o,i){registeredEffects[o]={effect:i}}function CVMaskElement(o,i){var s;this.data=o,this.element=i,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var _=this.masksProperties.length,_e=!1;for(s=0;s<_;s+=1)this.masksProperties[s].mode!=="n"&&(_e=!0),this.viewData[s]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[s],3);this.hasMasks=_e,_e&&this.element.addRenderableComponent(this)}function CVBaseElement(){}CVEffects.prototype.renderFrame=function(o){var i,s=this.filters.length;for(i=0;i<s;i+=1)this.filters[i].renderFrame(o)},CVEffects.prototype.getEffects=function(o){var i,s=this.filters.length,_=[];for(i=0;i<s;i+=1)this.filters[i].type===o&&_.push(this.filters[i]);return _},CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var o,i,s,_,_e=this.element.finalTransform.mat,ct=this.element.canvasContext,Mt=this.masksProperties.length;for(ct.beginPath(),o=0;o<Mt;o+=1)if(this.masksProperties[o].mode!=="n"){var Ft;this.masksProperties[o].inv&&(ct.moveTo(0,0),ct.lineTo(this.element.globalData.compSize.w,0),ct.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),ct.lineTo(0,this.element.globalData.compSize.h),ct.lineTo(0,0)),_=this.viewData[o].v,i=_e.applyToPointArray(_.v[0][0],_.v[0][1],0),ct.moveTo(i[0],i[1]);var Ut=_._length;for(Ft=1;Ft<Ut;Ft+=1)s=_e.applyToTriplePoints(_.o[Ft-1],_.i[Ft],_.v[Ft]),ct.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5]);s=_e.applyToTriplePoints(_.o[Ft-1],_.i[0],_.v[0]),ct.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5])}this.element.globalData.renderer.save(!0),ct.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null};var operationsMap={1:"source-in",2:"source-out",3:"source-in",4:"source-out"};function CVShapeData(o,i,s,_){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var _e,ct=4;i.ty==="rc"?ct=5:i.ty==="el"?ct=6:i.ty==="sr"&&(ct=7),this.sh=ShapePropertyFactory.getShapeProp(o,i,ct,o);var Mt,Ft=s.length;for(_e=0;_e<Ft;_e+=1)s[_e].closed||(Mt={transforms:_.addTransformSequence(s[_e].transforms),trNodes:[]},this.styledShapes.push(Mt),s[_e].elements.push(Mt))}function CVShapeElement(o,i,s){this.shapes=[],this.shapesData=o.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(o,i,s)}function CVTextElement(o,i,s){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(o,i,s)}function CVImageElement(o,i,s){this.assetData=i.getAssetData(o.refId),this.img=i.imageLoader.getAsset(this.assetData),this.initElement(o,i,s)}function CVSolidElement(o,i,s){this.initElement(o,i,s)}function CanvasRendererBase(){}function CanvasContext(){this.opacity=-1,this.transform=createTypedArray("float32",16),this.fillStyle="",this.strokeStyle="",this.lineWidth="",this.lineCap="",this.lineJoin="",this.miterLimit="",this.id=Math.random()}function CVContextData(){var o;for(this.stack=[],this.cArrPos=0,this.cTr=new Matrix,o=0;o<15;o+=1){var i=new CanvasContext;this.stack[o]=i}this._length=15,this.nativeContext=null,this.transformMat=new Matrix,this.currentOpacity=1,this.currentFillStyle="",this.appliedFillStyle="",this.currentStrokeStyle="",this.appliedStrokeStyle="",this.currentLineWidth="",this.appliedLineWidth="",this.currentLineCap="",this.appliedLineCap="",this.currentLineJoin="",this.appliedLineJoin="",this.appliedMiterLimit="",this.currentMiterLimit=""}function CVCompElement(o,i,s){this.completeLayers=!1,this.layers=o.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(o,i,s),this.tm=o.tm?PropertyFactory.getProp(this,o.tm,0,i.frameRate,this):{_placeholder:!0}}function CanvasRenderer(o,i){this.animationItem=o,this.renderConfig={clearCanvas:!i||i.clearCanvas===void 0||i.clearCanvas,context:i&&i.context||null,progressiveLoad:i&&i.progressiveLoad||!1,preserveAspectRatio:i&&i.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:i&&i.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:i&&i.contentVisibility||"visible",className:i&&i.className||"",id:i&&i.id||"",runExpressions:!i||i.runExpressions===void 0||i.runExpressions},this.renderConfig.dpr=i&&i.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=i&&i.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas",this.renderConfig.clearCanvas&&(this.ctxTransform=this.contextData.transform.bind(this.contextData),this.ctxOpacity=this.contextData.opacity.bind(this.contextData),this.ctxFillStyle=this.contextData.fillStyle.bind(this.contextData),this.ctxStrokeStyle=this.contextData.strokeStyle.bind(this.contextData),this.ctxLineWidth=this.contextData.lineWidth.bind(this.contextData),this.ctxLineCap=this.contextData.lineCap.bind(this.contextData),this.ctxLineJoin=this.contextData.lineJoin.bind(this.contextData),this.ctxMiterLimit=this.contextData.miterLimit.bind(this.contextData),this.ctxFill=this.contextData.fill.bind(this.contextData),this.ctxFillRect=this.contextData.fillRect.bind(this.contextData),this.ctxStroke=this.contextData.stroke.bind(this.contextData),this.save=this.contextData.save.bind(this.contextData))}function HBaseElement(){}function HSolidElement(o,i,s){this.initElement(o,i,s)}function HShapeElement(o,i,s){this.shapes=[],this.shapesData=o.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(o,i,s),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}function HTextElement(o,i,s){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(o,i,s)}function HCameraElement(o,i,s){this.initFrame(),this.initBaseData(o,i,s),this.initHierarchy();var _=PropertyFactory.getProp;if(this.pe=_(this,o.pe,0,0,this),o.ks.p.s?(this.px=_(this,o.ks.p.x,1,0,this),this.py=_(this,o.ks.p.y,1,0,this),this.pz=_(this,o.ks.p.z,1,0,this)):this.p=_(this,o.ks.p,1,0,this),o.ks.a&&(this.a=_(this,o.ks.a,1,0,this)),o.ks.or.k.length&&o.ks.or.k[0].to){var _e,ct=o.ks.or.k.length;for(_e=0;_e<ct;_e+=1)o.ks.or.k[_e].to=null,o.ks.or.k[_e].ti=null}this.or=_(this,o.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=_(this,o.ks.rx,0,degToRads,this),this.ry=_(this,o.ks.ry,0,degToRads,this),this.rz=_(this,o.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}function HImageElement(o,i,s){this.assetData=i.getAssetData(o.refId),this.initElement(o,i,s)}function HybridRendererBase(o,i){this.animationItem=o,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:i&&i.className||"",imagePreserveAspectRatio:i&&i.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(i&&i.hideOnTransparent===!1),filterSize:{width:i&&i.filterSize&&i.filterSize.width||"400%",height:i&&i.filterSize&&i.filterSize.height||"400%",x:i&&i.filterSize&&i.filterSize.x||"-100%",y:i&&i.filterSize&&i.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}function HCompElement(o,i,s){this.layers=o.layers,this.supports3d=!o.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(o,i,s),this.tm=o.tm?PropertyFactory.getProp(this,o.tm,0,i.frameRate,this):{_placeholder:!0}}function HybridRenderer(o,i){this.animationItem=o,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:i&&i.className||"",imagePreserveAspectRatio:i&&i.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(i&&i.hideOnTransparent===!1),filterSize:{width:i&&i.filterSize&&i.filterSize.width||"400%",height:i&&i.filterSize&&i.filterSize.height||"400%",x:i&&i.filterSize&&i.filterSize.x||"-100%",y:i&&i.filterSize&&i.filterSize.y||"-100%"},runExpressions:!i||i.runExpressions===void 0||i.runExpressions},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){if(this.data.tt>=1){this.buffers=[];var o=this.globalData.canvasContext,i=assetLoader.createCanvas(o.canvas.width,o.canvas.height);this.buffers.push(i);var s=assetLoader.createCanvas(o.canvas.width,o.canvas.height);this.buffers.push(s),this.data.tt>=3&&!document._isProxy&&assetLoader.loadLumaCanvas()}this.canvasContext=this.globalData.canvasContext,this.transformCanvas=this.globalData.transformCanvas,this.renderableEffectsManager=new CVEffects(this),this.searchEffectTransforms()},createContent:function(){},setBlendMode:function(){var o=this.globalData;if(o.blendMode!==this.data.bm){o.blendMode=this.data.bm;var i=getBlendMode(this.data.bm);o.canvasContext.globalCompositeOperation=i}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this),this.transformEffects=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT)},hideElement:function(){this.hidden||this.isInRange&&!this.isTransparent||(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},clearCanvas:function(o){o.clearRect(this.transformCanvas.tx,this.transformCanvas.ty,this.transformCanvas.w*this.transformCanvas.sx,this.transformCanvas.h*this.transformCanvas.sy)},prepareLayer:function(){if(this.data.tt>=1){var o=this.buffers[0].getContext("2d");this.clearCanvas(o),o.drawImage(this.canvasContext.canvas,0,0),this.currentTransform=this.canvasContext.getTransform(),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform)}},exitLayer:function(){if(this.data.tt>=1){var o=this.buffers[1],i=o.getContext("2d");if(this.clearCanvas(i),i.drawImage(this.canvasContext.canvas,0,0),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform),this.comp.getElementById("tp"in this.data?this.data.tp:this.data.ind-1).renderFrame(!0),this.canvasContext.setTransform(1,0,0,1,0,0),this.data.tt>=3&&!document._isProxy){var s=assetLoader.getLumaCanvas(this.canvasContext.canvas);s.getContext("2d").drawImage(this.canvasContext.canvas,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.drawImage(s,0,0)}this.canvasContext.globalCompositeOperation=operationsMap[this.data.tt],this.canvasContext.drawImage(o,0,0),this.canvasContext.globalCompositeOperation="destination-over",this.canvasContext.drawImage(this.buffers[0],0,0),this.canvasContext.setTransform(this.currentTransform),this.canvasContext.globalCompositeOperation="source-over"}},renderFrame:function(o){if(!this.hidden&&!this.data.hd&&(this.data.td!==1||o)){this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.setBlendMode();var i=this.data.ty===0;this.prepareLayer(),this.globalData.renderer.save(i),this.globalData.renderer.ctxTransform(this.finalTransform.localMat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.localOpacity),this.renderInnerContent(),this.globalData.renderer.restore(i),this.exitLayer(),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement,CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated,extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(o,i){var s={data:o,type:o.ty,preTransforms:this.transformsManager.addTransformSequence(i),transforms:[],elements:[],closed:o.hd===!0},_={};if(o.ty==="fl"||o.ty==="st"?(_.c=PropertyFactory.getProp(this,o.c,1,255,this),_.c.k||(s.co="rgb("+bmFloor(_.c.v[0])+","+bmFloor(_.c.v[1])+","+bmFloor(_.c.v[2])+")")):o.ty!=="gf"&&o.ty!=="gs"||(_.s=PropertyFactory.getProp(this,o.s,1,null,this),_.e=PropertyFactory.getProp(this,o.e,1,null,this),_.h=PropertyFactory.getProp(this,o.h||{k:0},0,.01,this),_.a=PropertyFactory.getProp(this,o.a||{k:0},0,degToRads,this),_.g=new GradientProperty(this,o.g,this)),_.o=PropertyFactory.getProp(this,o.o,0,.01,this),o.ty==="st"||o.ty==="gs"){if(s.lc=lineCapEnum[o.lc||2],s.lj=lineJoinEnum[o.lj||2],o.lj==1&&(s.ml=o.ml),_.w=PropertyFactory.getProp(this,o.w,0,null,this),_.w.k||(s.wi=_.w.v),o.d){var _e=new DashProperty(this,o.d,"canvas",this);_.d=_e,_.d.k||(s.da=_.d.dashArray,s.do=_.d.dashoffset[0])}}else s.r=o.r===2?"evenodd":"nonzero";return this.stylesList.push(s),_.style=s,_},CVShapeElement.prototype.createGroupElement=function(){return{it:[],prevViewData:[]}},CVShapeElement.prototype.createTransformElement=function(o){return{transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,o.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,o,this)}}},CVShapeElement.prototype.createShapeElement=function(o){var i=new CVShapeData(this,o,this.stylesList,this.transformsManager);return this.shapes.push(i),this.addShapeToModifiers(i),i},CVShapeElement.prototype.reloadShapes=function(){var o;this._isFirstFrame=!0;var i=this.itemsData.length;for(o=0;o<i;o+=1)this.prevViewData[o]=this.itemsData[o];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),i=this.dynamicProperties.length,o=0;o<i;o+=1)this.dynamicProperties[o].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(o){var i,s=this.stylesList.length;for(i=0;i<s;i+=1)this.stylesList[i].closed||this.stylesList[i].transforms.push(o)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var o,i=this.stylesList.length;for(o=0;o<i;o+=1)this.stylesList[o].closed||this.stylesList[o].transforms.pop()},CVShapeElement.prototype.closeStyles=function(o){var i,s=o.length;for(i=0;i<s;i+=1)o[i].closed=!0},CVShapeElement.prototype.searchShapes=function(o,i,s,_,_e){var ct,Mt,Ft,Ut,Xt,Kt,nr=o.length-1,rr=[],or=[],hr=[].concat(_e);for(ct=nr;ct>=0;ct-=1){if((Ut=this.searchProcessedElement(o[ct]))?i[ct]=s[Ut-1]:o[ct]._shouldRender=_,o[ct].ty==="fl"||o[ct].ty==="st"||o[ct].ty==="gf"||o[ct].ty==="gs")Ut?i[ct].style.closed=!1:i[ct]=this.createStyleElement(o[ct],hr),rr.push(i[ct].style);else if(o[ct].ty==="gr"){if(Ut)for(Ft=i[ct].it.length,Mt=0;Mt<Ft;Mt+=1)i[ct].prevViewData[Mt]=i[ct].it[Mt];else i[ct]=this.createGroupElement(o[ct]);this.searchShapes(o[ct].it,i[ct].it,i[ct].prevViewData,_,hr)}else o[ct].ty==="tr"?(Ut||(Kt=this.createTransformElement(o[ct]),i[ct]=Kt),hr.push(i[ct]),this.addTransformToStyleList(i[ct])):o[ct].ty==="sh"||o[ct].ty==="rc"||o[ct].ty==="el"||o[ct].ty==="sr"?Ut||(i[ct]=this.createShapeElement(o[ct])):o[ct].ty==="tm"||o[ct].ty==="rd"||o[ct].ty==="pb"||o[ct].ty==="zz"||o[ct].ty==="op"?(Ut?(Xt=i[ct]).closed=!1:((Xt=ShapeModifiers.getModifier(o[ct].ty)).init(this,o[ct]),i[ct]=Xt,this.shapeModifiers.push(Xt)),or.push(Xt)):o[ct].ty==="rp"&&(Ut?(Xt=i[ct]).closed=!0:(Xt=ShapeModifiers.getModifier(o[ct].ty),i[ct]=Xt,Xt.init(this,o,ct,i),this.shapeModifiers.push(Xt),_=!1),or.push(Xt));this.addProcessedElement(o[ct],ct+1)}for(this.removeTransformFromStyleList(),this.closeStyles(rr),nr=or.length,ct=0;ct<nr;ct+=1)or[ct].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(o,i){(o._opMdf||i.op._mdf||this._isFirstFrame)&&(i.opacity=o.opacity,i.opacity*=i.op.v,i._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var o,i,s,_,_e,ct,Mt,Ft,Ut,Xt=this.stylesList.length,Kt=this.globalData.renderer,nr=this.globalData.canvasContext;for(o=0;o<Xt;o+=1)if(((Ft=(Ut=this.stylesList[o]).type)!=="st"&&Ft!=="gs"||Ut.wi!==0)&&Ut.data._shouldRender&&Ut.coOp!==0&&this.globalData.currentGlobalAlpha!==0){for(Kt.save(),ct=Ut.elements,Ft==="st"||Ft==="gs"?(Kt.ctxStrokeStyle(Ft==="st"?Ut.co:Ut.grd),Kt.ctxLineWidth(Ut.wi),Kt.ctxLineCap(Ut.lc),Kt.ctxLineJoin(Ut.lj),Kt.ctxMiterLimit(Ut.ml||0)):Kt.ctxFillStyle(Ft==="fl"?Ut.co:Ut.grd),Kt.ctxOpacity(Ut.coOp),Ft!=="st"&&Ft!=="gs"&&nr.beginPath(),Kt.ctxTransform(Ut.preTransforms.finalTransform.props),s=ct.length,i=0;i<s;i+=1){for(Ft!=="st"&&Ft!=="gs"||(nr.beginPath(),Ut.da&&(nr.setLineDash(Ut.da),nr.lineDashOffset=Ut.do)),_e=(Mt=ct[i].trNodes).length,_=0;_<_e;_+=1)Mt[_].t==="m"?nr.moveTo(Mt[_].p[0],Mt[_].p[1]):Mt[_].t==="c"?nr.bezierCurveTo(Mt[_].pts[0],Mt[_].pts[1],Mt[_].pts[2],Mt[_].pts[3],Mt[_].pts[4],Mt[_].pts[5]):nr.closePath();Ft!=="st"&&Ft!=="gs"||(Kt.ctxStroke(),Ut.da&&nr.setLineDash(this.dashResetter))}Ft!=="st"&&Ft!=="gs"&&this.globalData.renderer.ctxFill(Ut.r),Kt.restore()}},CVShapeElement.prototype.renderShape=function(o,i,s,_){var _e,ct;for(ct=o,_e=i.length-1;_e>=0;_e-=1)i[_e].ty==="tr"?(ct=s[_e].transform,this.renderShapeTransform(o,ct)):i[_e].ty==="sh"||i[_e].ty==="el"||i[_e].ty==="rc"||i[_e].ty==="sr"?this.renderPath(i[_e],s[_e]):i[_e].ty==="fl"?this.renderFill(i[_e],s[_e],ct):i[_e].ty==="st"?this.renderStroke(i[_e],s[_e],ct):i[_e].ty==="gf"||i[_e].ty==="gs"?this.renderGradientFill(i[_e],s[_e],ct):i[_e].ty==="gr"?this.renderShape(ct,i[_e].it,s[_e].it):i[_e].ty;_&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(o,i){if(this._isFirstFrame||i._mdf||o.transforms._mdf){var s,_,_e,ct=o.trNodes,Mt=i.paths,Ft=Mt._length;ct.length=0;var Ut=o.transforms.finalTransform;for(_e=0;_e<Ft;_e+=1){var Xt=Mt.shapes[_e];if(Xt&&Xt.v){for(_=Xt._length,s=1;s<_;s+=1)s===1&&ct.push({t:"m",p:Ut.applyToPointArray(Xt.v[0][0],Xt.v[0][1],0)}),ct.push({t:"c",pts:Ut.applyToTriplePoints(Xt.o[s-1],Xt.i[s],Xt.v[s])});_===1&&ct.push({t:"m",p:Ut.applyToPointArray(Xt.v[0][0],Xt.v[0][1],0)}),Xt.c&&_&&(ct.push({t:"c",pts:Ut.applyToTriplePoints(Xt.o[s-1],Xt.i[0],Xt.v[0])}),ct.push({t:"z"}))}}o.trNodes=ct}},CVShapeElement.prototype.renderPath=function(o,i){if(o.hd!==!0&&o._shouldRender){var s,_=i.styledShapes.length;for(s=0;s<_;s+=1)this.renderStyledShape(i.styledShapes[s],i.sh)}},CVShapeElement.prototype.renderFill=function(o,i,s){var _=i.style;(i.c._mdf||this._isFirstFrame)&&(_.co="rgb("+bmFloor(i.c.v[0])+","+bmFloor(i.c.v[1])+","+bmFloor(i.c.v[2])+")"),(i.o._mdf||s._opMdf||this._isFirstFrame)&&(_.coOp=i.o.v*s.opacity)},CVShapeElement.prototype.renderGradientFill=function(o,i,s){var _,_e=i.style;if(!_e.grd||i.g._mdf||i.s._mdf||i.e._mdf||o.t!==1&&(i.h._mdf||i.a._mdf)){var ct,Mt=this.globalData.canvasContext,Ft=i.s.v,Ut=i.e.v;if(o.t===1)_=Mt.createLinearGradient(Ft[0],Ft[1],Ut[0],Ut[1]);else{var Xt=Math.sqrt(Math.pow(Ft[0]-Ut[0],2)+Math.pow(Ft[1]-Ut[1],2)),Kt=Math.atan2(Ut[1]-Ft[1],Ut[0]-Ft[0]),nr=i.h.v;nr>=1?nr=.99:nr<=-1&&(nr=-.99);var rr=Xt*nr,or=Math.cos(Kt+i.a.v)*rr+Ft[0],hr=Math.sin(Kt+i.a.v)*rr+Ft[1];_=Mt.createRadialGradient(or,hr,0,Ft[0],Ft[1],Xt)}var fr=o.g.p,yr=i.g.c,Lr=1;for(ct=0;ct<fr;ct+=1)i.g._hasOpacity&&i.g._collapsable&&(Lr=i.g.o[2*ct+1]),_.addColorStop(yr[4*ct]/100,"rgba("+yr[4*ct+1]+","+yr[4*ct+2]+","+yr[4*ct+3]+","+Lr+")");_e.grd=_}_e.coOp=i.o.v*s.opacity},CVShapeElement.prototype.renderStroke=function(o,i,s){var _=i.style,_e=i.d;_e&&(_e._mdf||this._isFirstFrame)&&(_.da=_e.dashArray,_.do=_e.dashoffset[0]),(i.c._mdf||this._isFirstFrame)&&(_.co="rgb("+bmFloor(i.c.v[0])+","+bmFloor(i.c.v[1])+","+bmFloor(i.c.v[2])+")"),(i.o._mdf||s._opMdf||this._isFirstFrame)&&(_.coOp=i.o.v*s.opacity),(i.w._mdf||this._isFirstFrame)&&(_.wi=i.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var o=this.textProperty.currentData;this.renderedLetters=createSizedArray(o.l?o.l.length:0);var i=!1;o.fc?(i=!0,this.values.fill=this.buildColor(o.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=i;var s=!1;o.sc&&(s=!0,this.values.stroke=this.buildColor(o.sc),this.values.sWidth=o.sw);var _,_e,ct,Mt,Ft,Ut,Xt,Kt,nr,rr,or,hr,fr=this.globalData.fontManager.getFontByName(o.f),yr=o.l,Lr=this.mHelper;this.stroke=s,this.values.fValue=o.finalSize+"px "+this.globalData.fontManager.getFontByName(o.f).fFamily,_e=o.finalText.length;var Br=this.data.singleShape,Vr=.001*o.tr*o.finalSize,Wr=0,ro=0,no=!0,so=0;for(_=0;_<_e;_+=1){Mt=(ct=this.globalData.fontManager.getCharData(o.finalText[_],fr.fStyle,this.globalData.fontManager.getFontByName(o.f).fFamily))&&ct.data||{},Lr.reset(),Br&&yr[_].n&&(Wr=-Vr,ro+=o.yOffset,ro+=no?1:0,no=!1),nr=(Xt=Mt.shapes?Mt.shapes[0].it:[]).length,Lr.scale(o.finalSize/100,o.finalSize/100),Br&&this.applyTextPropertiesToMatrix(o,Lr,yr[_].line,Wr,ro),or=createSizedArray(nr-1);var ko=0;for(Kt=0;Kt<nr;Kt+=1)if(Xt[Kt].ty==="sh"){for(Ut=Xt[Kt].ks.k.i.length,rr=Xt[Kt].ks.k,hr=[],Ft=1;Ft<Ut;Ft+=1)Ft===1&&hr.push(Lr.applyToX(rr.v[0][0],rr.v[0][1],0),Lr.applyToY(rr.v[0][0],rr.v[0][1],0)),hr.push(Lr.applyToX(rr.o[Ft-1][0],rr.o[Ft-1][1],0),Lr.applyToY(rr.o[Ft-1][0],rr.o[Ft-1][1],0),Lr.applyToX(rr.i[Ft][0],rr.i[Ft][1],0),Lr.applyToY(rr.i[Ft][0],rr.i[Ft][1],0),Lr.applyToX(rr.v[Ft][0],rr.v[Ft][1],0),Lr.applyToY(rr.v[Ft][0],rr.v[Ft][1],0));hr.push(Lr.applyToX(rr.o[Ft-1][0],rr.o[Ft-1][1],0),Lr.applyToY(rr.o[Ft-1][0],rr.o[Ft-1][1],0),Lr.applyToX(rr.i[0][0],rr.i[0][1],0),Lr.applyToY(rr.i[0][0],rr.i[0][1],0),Lr.applyToX(rr.v[0][0],rr.v[0][1],0),Lr.applyToY(rr.v[0][0],rr.v[0][1],0)),or[ko]=hr,ko+=1}Br&&(Wr+=yr[_].l,Wr+=Vr),this.textSpans[so]?this.textSpans[so].elem=or:this.textSpans[so]={elem:or},so+=1}},CVTextElement.prototype.renderInnerContent=function(){var o,i,s,_,_e,ct;this.validateText(),this.canvasContext.font=this.values.fValue,this.globalData.renderer.ctxLineCap("butt"),this.globalData.renderer.ctxLineJoin("miter"),this.globalData.renderer.ctxMiterLimit(4),this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var Mt,Ft=this.textAnimator.renderedLetters,Ut=this.textProperty.currentData.l;i=Ut.length;var Xt,Kt,nr=null,rr=null,or=null,hr=this.globalData.renderer;for(o=0;o<i;o+=1)if(!Ut[o].n){if((Mt=Ft[o])&&(hr.save(),hr.ctxTransform(Mt.p),hr.ctxOpacity(Mt.o)),this.fill){for(Mt&&Mt.fc?nr!==Mt.fc&&(hr.ctxFillStyle(Mt.fc),nr=Mt.fc):nr!==this.values.fill&&(nr=this.values.fill,hr.ctxFillStyle(this.values.fill)),_=(Xt=this.textSpans[o].elem).length,this.globalData.canvasContext.beginPath(),s=0;s<_;s+=1)for(ct=(Kt=Xt[s]).length,this.globalData.canvasContext.moveTo(Kt[0],Kt[1]),_e=2;_e<ct;_e+=6)this.globalData.canvasContext.bezierCurveTo(Kt[_e],Kt[_e+1],Kt[_e+2],Kt[_e+3],Kt[_e+4],Kt[_e+5]);this.globalData.canvasContext.closePath(),hr.ctxFill()}if(this.stroke){for(Mt&&Mt.sw?or!==Mt.sw&&(or=Mt.sw,hr.ctxLineWidth(Mt.sw)):or!==this.values.sWidth&&(or=this.values.sWidth,hr.ctxLineWidth(this.values.sWidth)),Mt&&Mt.sc?rr!==Mt.sc&&(rr=Mt.sc,hr.ctxStrokeStyle(Mt.sc)):rr!==this.values.stroke&&(rr=this.values.stroke,hr.ctxStrokeStyle(this.values.stroke)),_=(Xt=this.textSpans[o].elem).length,this.globalData.canvasContext.beginPath(),s=0;s<_;s+=1)for(ct=(Kt=Xt[s]).length,this.globalData.canvasContext.moveTo(Kt[0],Kt[1]),_e=2;_e<ct;_e+=6)this.globalData.canvasContext.bezierCurveTo(Kt[_e],Kt[_e+1],Kt[_e+2],Kt[_e+3],Kt[_e+4],Kt[_e+5]);this.globalData.canvasContext.closePath(),hr.ctxStroke()}Mt&&this.globalData.renderer.restore()}},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var o=createTag("canvas");o.width=this.assetData.w,o.height=this.assetData.h;var i,s,_=o.getContext("2d"),_e=this.img.width,ct=this.img.height,Mt=_e/ct,Ft=this.assetData.w/this.assetData.h,Ut=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;Mt>Ft&&Ut==="xMidYMid slice"||Mt<Ft&&Ut!=="xMidYMid slice"?i=(s=ct)*Ft:s=(i=_e)/Ft,_.drawImage(this.img,(_e-i)/2,(ct-s)/2,i,s,0,0,this.assetData.w,this.assetData.h),this.img=o}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){this.globalData.renderer.ctxFillStyle(this.data.sc),this.globalData.renderer.ctxFillRect(0,0,this.data.sw,this.data.sh)},extendPrototype([BaseRenderer],CanvasRendererBase),CanvasRendererBase.prototype.createShape=function(o){return new CVShapeElement(o,this.globalData,this)},CanvasRendererBase.prototype.createText=function(o){return new CVTextElement(o,this.globalData,this)},CanvasRendererBase.prototype.createImage=function(o){return new CVImageElement(o,this.globalData,this)},CanvasRendererBase.prototype.createSolid=function(o){return new CVSolidElement(o,this.globalData,this)},CanvasRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRendererBase.prototype.ctxTransform=function(o){o[0]===1&&o[1]===0&&o[4]===0&&o[5]===1&&o[12]===0&&o[13]===0||this.canvasContext.transform(o[0],o[1],o[4],o[5],o[12],o[13])},CanvasRendererBase.prototype.ctxOpacity=function(o){this.canvasContext.globalAlpha*=o<0?0:o},CanvasRendererBase.prototype.ctxFillStyle=function(o){this.canvasContext.fillStyle=o},CanvasRendererBase.prototype.ctxStrokeStyle=function(o){this.canvasContext.strokeStyle=o},CanvasRendererBase.prototype.ctxLineWidth=function(o){this.canvasContext.lineWidth=o},CanvasRendererBase.prototype.ctxLineCap=function(o){this.canvasContext.lineCap=o},CanvasRendererBase.prototype.ctxLineJoin=function(o){this.canvasContext.lineJoin=o},CanvasRendererBase.prototype.ctxMiterLimit=function(o){this.canvasContext.miterLimit=o},CanvasRendererBase.prototype.ctxFill=function(o){this.canvasContext.fill(o)},CanvasRendererBase.prototype.ctxFillRect=function(o,i,s,_){this.canvasContext.fillRect(o,i,s,_)},CanvasRendererBase.prototype.ctxStroke=function(){this.canvasContext.stroke()},CanvasRendererBase.prototype.reset=function(){this.renderConfig.clearCanvas?this.contextData.reset():this.canvasContext.restore()},CanvasRendererBase.prototype.save=function(){this.canvasContext.save()},CanvasRendererBase.prototype.restore=function(o){this.renderConfig.clearCanvas?(o&&(this.globalData.blendMode="source-over"),this.contextData.restore(o)):this.canvasContext.restore()},CanvasRendererBase.prototype.configAnimation=function(o){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var i=this.animationItem.container.style;i.width="100%",i.height="100%";var s="0px 0px 0px";i.transformOrigin=s,i.mozTransformOrigin=s,i.webkitTransformOrigin=s,i["-webkit-transform"]=s,i.contentVisibility=this.renderConfig.contentVisibility,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.contextData.setContext(this.canvasContext),this.data=o,this.layers=o.layers,this.transformCanvas={w:o.w,h:o.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(o,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(o.layers.length),this.updateContainerSize()},CanvasRendererBase.prototype.updateContainerSize=function(o,i){var s,_,_e,ct;if(this.reset(),o?(s=o,_=i,this.canvasContext.canvas.width=s,this.canvasContext.canvas.height=_):(this.animationItem.wrapper&&this.animationItem.container?(s=this.animationItem.wrapper.offsetWidth,_=this.animationItem.wrapper.offsetHeight):(s=this.canvasContext.canvas.width,_=this.canvasContext.canvas.height),this.canvasContext.canvas.width=s*this.renderConfig.dpr,this.canvasContext.canvas.height=_*this.renderConfig.dpr),this.renderConfig.preserveAspectRatio.indexOf("meet")!==-1||this.renderConfig.preserveAspectRatio.indexOf("slice")!==-1){var Mt=this.renderConfig.preserveAspectRatio.split(" "),Ft=Mt[1]||"meet",Ut=Mt[0]||"xMidYMid",Xt=Ut.substr(0,4),Kt=Ut.substr(4);_e=s/_,(ct=this.transformCanvas.w/this.transformCanvas.h)>_e&&Ft==="meet"||ct<_e&&Ft==="slice"?(this.transformCanvas.sx=s/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=s/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=_/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=_/(this.transformCanvas.h/this.renderConfig.dpr)),this.transformCanvas.tx=Xt==="xMid"&&(ct<_e&&Ft==="meet"||ct>_e&&Ft==="slice")?(s-this.transformCanvas.w*(_/this.transformCanvas.h))/2*this.renderConfig.dpr:Xt==="xMax"&&(ct<_e&&Ft==="meet"||ct>_e&&Ft==="slice")?(s-this.transformCanvas.w*(_/this.transformCanvas.h))*this.renderConfig.dpr:0,this.transformCanvas.ty=Kt==="YMid"&&(ct>_e&&Ft==="meet"||ct<_e&&Ft==="slice")?(_-this.transformCanvas.h*(s/this.transformCanvas.w))/2*this.renderConfig.dpr:Kt==="YMax"&&(ct>_e&&Ft==="meet"||ct<_e&&Ft==="slice")?(_-this.transformCanvas.h*(s/this.transformCanvas.w))*this.renderConfig.dpr:0}else this.renderConfig.preserveAspectRatio==="none"?(this.transformCanvas.sx=s/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=_/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRendererBase.prototype.destroy=function(){var o;for(this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),o=(this.layers?this.layers.length:0)-1;o>=0;o-=1)this.elements[o]&&this.elements[o].destroy&&this.elements[o].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRendererBase.prototype.renderFrame=function(o,i){if((this.renderedFrame!==o||this.renderConfig.clearCanvas!==!0||i)&&!this.destroyed&&o!==-1){var s;this.renderedFrame=o,this.globalData.frameNum=o-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||i,this.globalData.projectInterface.currentFrame=o;var _=this.layers.length;for(this.completeLayers||this.checkLayers(o),s=_-1;s>=0;s-=1)(this.completeLayers||this.elements[s])&&this.elements[s].prepareFrame(o-this.layers[s].st);if(this.globalData._mdf){for(this.renderConfig.clearCanvas===!0?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),s=_-1;s>=0;s-=1)(this.completeLayers||this.elements[s])&&this.elements[s].renderFrame();this.renderConfig.clearCanvas!==!0&&this.restore()}}},CanvasRendererBase.prototype.buildItem=function(o){var i=this.elements;if(!i[o]&&this.layers[o].ty!==99){var s=this.createItem(this.layers[o],this,this.globalData);i[o]=s,s.initExpressions()}},CanvasRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;)this.pendingElements.pop().checkParenting()},CanvasRendererBase.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRendererBase.prototype.show=function(){this.animationItem.container.style.display="block"},CVContextData.prototype.duplicate=function(){var o=2*this._length,i=0;for(i=this._length;i<o;i+=1)this.stack[i]=new CanvasContext;this._length=o},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.stack[this.cArrPos].opacity=1},CVContextData.prototype.restore=function(o){this.cArrPos-=1;var i,s=this.stack[this.cArrPos],_=s.transform,_e=this.cTr.props;for(i=0;i<16;i+=1)_e[i]=_[i];if(o){this.nativeContext.restore();var ct=this.stack[this.cArrPos+1];this.appliedFillStyle=ct.fillStyle,this.appliedStrokeStyle=ct.strokeStyle,this.appliedLineWidth=ct.lineWidth,this.appliedLineCap=ct.lineCap,this.appliedLineJoin=ct.lineJoin,this.appliedMiterLimit=ct.miterLimit}this.nativeContext.setTransform(_[0],_[1],_[4],_[5],_[12],_[13]),(o||s.opacity!==-1&&this.currentOpacity!==s.opacity)&&(this.nativeContext.globalAlpha=s.opacity,this.currentOpacity=s.opacity),this.currentFillStyle=s.fillStyle,this.currentStrokeStyle=s.strokeStyle,this.currentLineWidth=s.lineWidth,this.currentLineCap=s.lineCap,this.currentLineJoin=s.lineJoin,this.currentMiterLimit=s.miterLimit},CVContextData.prototype.save=function(o){o&&this.nativeContext.save();var i=this.cTr.props;this._length<=this.cArrPos&&this.duplicate();var s,_=this.stack[this.cArrPos];for(s=0;s<16;s+=1)_.transform[s]=i[s];this.cArrPos+=1;var _e=this.stack[this.cArrPos];_e.opacity=_.opacity,_e.fillStyle=_.fillStyle,_e.strokeStyle=_.strokeStyle,_e.lineWidth=_.lineWidth,_e.lineCap=_.lineCap,_e.lineJoin=_.lineJoin,_e.miterLimit=_.miterLimit},CVContextData.prototype.setOpacity=function(o){this.stack[this.cArrPos].opacity=o},CVContextData.prototype.setContext=function(o){this.nativeContext=o},CVContextData.prototype.fillStyle=function(o){this.stack[this.cArrPos].fillStyle!==o&&(this.currentFillStyle=o,this.stack[this.cArrPos].fillStyle=o)},CVContextData.prototype.strokeStyle=function(o){this.stack[this.cArrPos].strokeStyle!==o&&(this.currentStrokeStyle=o,this.stack[this.cArrPos].strokeStyle=o)},CVContextData.prototype.lineWidth=function(o){this.stack[this.cArrPos].lineWidth!==o&&(this.currentLineWidth=o,this.stack[this.cArrPos].lineWidth=o)},CVContextData.prototype.lineCap=function(o){this.stack[this.cArrPos].lineCap!==o&&(this.currentLineCap=o,this.stack[this.cArrPos].lineCap=o)},CVContextData.prototype.lineJoin=function(o){this.stack[this.cArrPos].lineJoin!==o&&(this.currentLineJoin=o,this.stack[this.cArrPos].lineJoin=o)},CVContextData.prototype.miterLimit=function(o){this.stack[this.cArrPos].miterLimit!==o&&(this.currentMiterLimit=o,this.stack[this.cArrPos].miterLimit=o)},CVContextData.prototype.transform=function(o){this.transformMat.cloneFromProps(o);var i=this.cTr;this.transformMat.multiply(i),i.cloneFromProps(this.transformMat.props);var s=i.props;this.nativeContext.setTransform(s[0],s[1],s[4],s[5],s[12],s[13])},CVContextData.prototype.opacity=function(o){var i=this.stack[this.cArrPos].opacity;i*=o<0?0:o,this.stack[this.cArrPos].opacity!==i&&(this.currentOpacity!==o&&(this.nativeContext.globalAlpha=o,this.currentOpacity=o),this.stack[this.cArrPos].opacity=i)},CVContextData.prototype.fill=function(o){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fill(o)},CVContextData.prototype.fillRect=function(o,i,s,_){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fillRect(o,i,s,_)},CVContextData.prototype.stroke=function(){this.appliedStrokeStyle!==this.currentStrokeStyle&&(this.appliedStrokeStyle=this.currentStrokeStyle,this.nativeContext.strokeStyle=this.appliedStrokeStyle),this.appliedLineWidth!==this.currentLineWidth&&(this.appliedLineWidth=this.currentLineWidth,this.nativeContext.lineWidth=this.appliedLineWidth),this.appliedLineCap!==this.currentLineCap&&(this.appliedLineCap=this.currentLineCap,this.nativeContext.lineCap=this.appliedLineCap),this.appliedLineJoin!==this.currentLineJoin&&(this.appliedLineJoin=this.currentLineJoin,this.nativeContext.lineJoin=this.appliedLineJoin),this.appliedMiterLimit!==this.currentMiterLimit&&(this.appliedMiterLimit=this.currentMiterLimit,this.nativeContext.miterLimit=this.appliedMiterLimit),this.nativeContext.stroke()},extendPrototype([CanvasRendererBase,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var o,i=this.canvasContext;for(i.beginPath(),i.moveTo(0,0),i.lineTo(this.data.w,0),i.lineTo(this.data.w,this.data.h),i.lineTo(0,this.data.h),i.lineTo(0,0),i.clip(),o=this.layers.length-1;o>=0;o-=1)(this.completeLayers||this.elements[o])&&this.elements[o].renderFrame()},CVCompElement.prototype.destroy=function(){var o;for(o=this.layers.length-1;o>=0;o-=1)this.elements[o]&&this.elements[o].destroy();this.layers=null,this.elements=null},CVCompElement.prototype.createComp=function(o){return new CVCompElement(o,this.globalData,this)},extendPrototype([CanvasRendererBase],CanvasRenderer),CanvasRenderer.prototype.createComp=function(o){return new CVCompElement(o,this.globalData,this)},HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.bm!==0&&this.setBlendMode()},renderElement:function(){var o=this.transformedElement?this.transformedElement.style:{};if(this.finalTransform._matMdf){var i=this.finalTransform.mat.toCSS();o.transform=i,o.webkitTransform=i}this.finalTransform._opMdf&&(o.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=BaseRenderer.prototype.buildElementParenting,extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var o;this.data.hasMask?((o=createNS("rect")).setAttribute("width",this.data.sw),o.setAttribute("height",this.data.sh),o.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):((o=createTag("div")).style.width=this.data.sw+"px",o.style.height=this.data.sh+"px",o.style.backgroundColor=this.data.sc),this.layerElement.appendChild(o)},extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var o;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),o=this.svgElement;else{o=createNS("svg");var i=this.comp.data?this.comp.data:this.globalData.compSize;o.setAttribute("width",i.w),o.setAttribute("height",i.h),o.appendChild(this.shapesContainer),this.layerElement.appendChild(o)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=o},HShapeElement.prototype.getTransformedPoint=function(o,i){var s,_=o.length;for(s=0;s<_;s+=1)i=o[s].mProps.v.applyToPointArray(i[0],i[1],0);return i},HShapeElement.prototype.calculateShapeBoundingBox=function(o,i){var s,_,_e,ct,Mt,Ft=o.sh.v,Ut=o.transformers,Xt=Ft._length;if(!(Xt<=1)){for(s=0;s<Xt-1;s+=1)_=this.getTransformedPoint(Ut,Ft.v[s]),_e=this.getTransformedPoint(Ut,Ft.o[s]),ct=this.getTransformedPoint(Ut,Ft.i[s+1]),Mt=this.getTransformedPoint(Ut,Ft.v[s+1]),this.checkBounds(_,_e,ct,Mt,i);Ft.c&&(_=this.getTransformedPoint(Ut,Ft.v[s]),_e=this.getTransformedPoint(Ut,Ft.o[s]),ct=this.getTransformedPoint(Ut,Ft.i[0]),Mt=this.getTransformedPoint(Ut,Ft.v[0]),this.checkBounds(_,_e,ct,Mt,i))}},HShapeElement.prototype.checkBounds=function(o,i,s,_,_e){this.getBoundsOfCurve(o,i,s,_);var ct=this.shapeBoundingBox;_e.x=bmMin(ct.left,_e.x),_e.xMax=bmMax(ct.right,_e.xMax),_e.y=bmMin(ct.top,_e.y),_e.yMax=bmMax(ct.bottom,_e.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(o,i,s,_){for(var _e,ct,Mt,Ft,Ut,Xt,Kt,nr=[[o[0],_[0]],[o[1],_[1]]],rr=0;rr<2;++rr)ct=6*o[rr]-12*i[rr]+6*s[rr],_e=-3*o[rr]+9*i[rr]-9*s[rr]+3*_[rr],Mt=3*i[rr]-3*o[rr],ct|=0,Mt|=0,(_e|=0)==0&&ct===0||(_e===0?(Ft=-Mt/ct)>0&&Ft<1&&nr[rr].push(this.calculateF(Ft,o,i,s,_,rr)):(Ut=ct*ct-4*Mt*_e)>=0&&((Xt=(-ct+bmSqrt(Ut))/(2*_e))>0&&Xt<1&&nr[rr].push(this.calculateF(Xt,o,i,s,_,rr)),(Kt=(-ct-bmSqrt(Ut))/(2*_e))>0&&Kt<1&&nr[rr].push(this.calculateF(Kt,o,i,s,_,rr))));this.shapeBoundingBox.left=bmMin.apply(null,nr[0]),this.shapeBoundingBox.top=bmMin.apply(null,nr[1]),this.shapeBoundingBox.right=bmMax.apply(null,nr[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,nr[1])},HShapeElement.prototype.calculateF=function(o,i,s,_,_e,ct){return bmPow(1-o,3)*i[ct]+3*bmPow(1-o,2)*o*s[ct]+3*(1-o)*bmPow(o,2)*_[ct]+bmPow(o,3)*_e[ct]},HShapeElement.prototype.calculateBoundingBox=function(o,i){var s,_=o.length;for(s=0;s<_;s+=1)o[s]&&o[s].sh?this.calculateShapeBoundingBox(o[s],i):o[s]&&o[s].it?this.calculateBoundingBox(o[s].it,i):o[s]&&o[s].style&&o[s].w&&this.expandStrokeBoundingBox(o[s].w,i)},HShapeElement.prototype.expandStrokeBoundingBox=function(o,i){var s=0;if(o.keyframes){for(var _=0;_<o.keyframes.length;_+=1){var _e=o.keyframes[_].s;_e>s&&(s=_e)}s*=o.mult}else s=o.v*o.mult;i.x-=s,i.xMax+=s,i.y-=s,i.yMax+=s},HShapeElement.prototype.currentBoxContains=function(o){return this.currentBBox.x<=o.x&&this.currentBBox.y<=o.y&&this.currentBBox.width+this.currentBBox.x>=o.x+o.width&&this.currentBBox.height+this.currentBBox.y>=o.y+o.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var o=this.tempBoundingBox,i=999999;if(o.x=i,o.xMax=-i,o.y=i,o.yMax=-i,this.calculateBoundingBox(this.itemsData,o),o.width=o.xMax<o.x?0:o.xMax-o.x,o.height=o.yMax<o.y?0:o.yMax-o.y,this.currentBoxContains(o))return;var s=!1;if(this.currentBBox.w!==o.width&&(this.currentBBox.w=o.width,this.shapeCont.setAttribute("width",o.width),s=!0),this.currentBBox.h!==o.height&&(this.currentBBox.h=o.height,this.shapeCont.setAttribute("height",o.height),s=!0),s||this.currentBBox.x!==o.x||this.currentBBox.y!==o.y){this.currentBBox.w=o.width,this.currentBBox.h=o.height,this.currentBBox.x=o.x,this.currentBBox.y=o.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var _=this.shapeCont.style,_e="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";_.transform=_e,_.webkitTransform=_e}}},extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var o=createNS("g");this.maskedElement.appendChild(o),this.innerElem=o}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var o=this.textProperty.currentData;this.renderedLetters=createSizedArray(o.l?o.l.length:0);var i=this.innerElem.style,s=o.fc?this.buildColor(o.fc):"rgba(0,0,0,0)";i.fill=s,i.color=s,o.sc&&(i.stroke=this.buildColor(o.sc),i.strokeWidth=o.sw+"px");var _,_e,ct=this.globalData.fontManager.getFontByName(o.f);if(!this.globalData.fontManager.chars)if(i.fontSize=o.finalSize+"px",i.lineHeight=o.finalSize+"px",ct.fClass)this.innerElem.className=ct.fClass;else{i.fontFamily=ct.fFamily;var Mt=o.fWeight,Ft=o.fStyle;i.fontStyle=Ft,i.fontWeight=Mt}var Ut,Xt,Kt,nr=o.l;_e=nr.length;var rr,or=this.mHelper,hr="",fr=0;for(_=0;_<_e;_+=1){if(this.globalData.fontManager.chars?(this.textPaths[fr]?Ut=this.textPaths[fr]:((Ut=createNS("path")).setAttribute("stroke-linecap",lineCapEnum[1]),Ut.setAttribute("stroke-linejoin",lineJoinEnum[2]),Ut.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[fr]?Kt=(Xt=this.textSpans[fr]).children[0]:((Xt=createTag("div")).style.lineHeight=0,(Kt=createNS("svg")).appendChild(Ut),styleDiv(Xt)))):this.isMasked?Ut=this.textPaths[fr]?this.textPaths[fr]:createNS("text"):this.textSpans[fr]?(Xt=this.textSpans[fr],Ut=this.textPaths[fr]):(styleDiv(Xt=createTag("span")),styleDiv(Ut=createTag("span")),Xt.appendChild(Ut)),this.globalData.fontManager.chars){var yr,Lr=this.globalData.fontManager.getCharData(o.finalText[_],ct.fStyle,this.globalData.fontManager.getFontByName(o.f).fFamily);if(yr=Lr?Lr.data:null,or.reset(),yr&&yr.shapes&&yr.shapes.length&&(rr=yr.shapes[0].it,or.scale(o.finalSize/100,o.finalSize/100),hr=this.createPathShape(or,rr),Ut.setAttribute("d",hr)),this.isMasked)this.innerElem.appendChild(Ut);else{if(this.innerElem.appendChild(Xt),yr&&yr.shapes){document.body.appendChild(Kt);var Br=Kt.getBBox();Kt.setAttribute("width",Br.width+2),Kt.setAttribute("height",Br.height+2),Kt.setAttribute("viewBox",Br.x-1+" "+(Br.y-1)+" "+(Br.width+2)+" "+(Br.height+2));var Vr=Kt.style,Wr="translate("+(Br.x-1)+"px,"+(Br.y-1)+"px)";Vr.transform=Wr,Vr.webkitTransform=Wr,nr[_].yOffset=Br.y-1}else Kt.setAttribute("width",1),Kt.setAttribute("height",1);Xt.appendChild(Kt)}}else if(Ut.textContent=nr[_].val,Ut.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked)this.innerElem.appendChild(Ut);else{this.innerElem.appendChild(Xt);var ro=Ut.style,no="translate3d(0,"+-o.finalSize/1.2+"px,0)";ro.transform=no,ro.webkitTransform=no}this.isMasked?this.textSpans[fr]=Ut:this.textSpans[fr]=Xt,this.textSpans[fr].style.display="block",this.textPaths[fr]=Ut,fr+=1}for(;fr<this.textSpans.length;)this.textSpans[fr].style.display="none",fr+=1},HTextElement.prototype.renderInnerContent=function(){var o;if(this.validateText(),this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),o=this.svgElement.style;var i="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)";o.transform=i,o.webkitTransform=i}}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag){var s,_,_e,ct,Mt,Ft=0,Ut=this.textAnimator.renderedLetters,Xt=this.textProperty.currentData.l;for(_=Xt.length,s=0;s<_;s+=1)Xt[s].n?Ft+=1:(ct=this.textSpans[s],Mt=this.textPaths[s],_e=Ut[Ft],Ft+=1,_e._mdf.m&&(this.isMasked?ct.setAttribute("transform",_e.m):(ct.style.webkitTransform=_e.m,ct.style.transform=_e.m)),ct.style.opacity=_e.o,_e.sw&&_e._mdf.sw&&Mt.setAttribute("stroke-width",_e.sw),_e.sc&&_e._mdf.sc&&Mt.setAttribute("stroke",_e.sc),_e.fc&&_e._mdf.fc&&(Mt.setAttribute("fill",_e.fc),Mt.style.color=_e.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var Kt=this.innerElem.getBBox();if(this.currentBBox.w!==Kt.width&&(this.currentBBox.w=Kt.width,this.svgElement.setAttribute("width",Kt.width)),this.currentBBox.h!==Kt.height&&(this.currentBBox.h=Kt.height,this.svgElement.setAttribute("height",Kt.height)),this.currentBBox.w!==Kt.width+2||this.currentBBox.h!==Kt.height+2||this.currentBBox.x!==Kt.x-1||this.currentBBox.y!==Kt.y-1){this.currentBBox.w=Kt.width+2,this.currentBBox.h=Kt.height+2,this.currentBBox.x=Kt.x-1,this.currentBBox.y=Kt.y-1,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),o=this.svgElement.style;var nr="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";o.transform=nr,o.webkitTransform=nr}}}},extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var o,i,s,_,_e=this.comp.threeDElements.length;for(o=0;o<_e;o+=1)if((i=this.comp.threeDElements[o]).type==="3d"){s=i.perspectiveElem.style,_=i.container.style;var ct=this.pe.v+"px",Mt="0px 0px 0px",Ft="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";s.perspective=ct,s.webkitPerspective=ct,_.transformOrigin=Mt,_.mozTransformOrigin=Mt,_.webkitTransformOrigin=Mt,s.transform=Ft,s.webkitTransform=Ft}},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var o,i,s=this._isFirstFrame;if(this.hierarchy)for(i=this.hierarchy.length,o=0;o<i;o+=1)s=this.hierarchy[o].finalTransform.mProp._mdf||s;if(s||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(o=i=this.hierarchy.length-1;o>=0;o-=1){var _=this.hierarchy[o].finalTransform.mProp;this.mat.translate(-_.p.v[0],-_.p.v[1],_.p.v[2]),this.mat.rotateX(-_.or.v[0]).rotateY(-_.or.v[1]).rotateZ(_.or.v[2]),this.mat.rotateX(-_.rx.v).rotateY(-_.ry.v).rotateZ(_.rz.v),this.mat.scale(1/_.s.v[0],1/_.s.v[1],1/_.s.v[2]),this.mat.translate(_.a.v[0],_.a.v[1],_.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var _e;_e=this.p?[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var ct=Math.sqrt(Math.pow(_e[0],2)+Math.pow(_e[1],2)+Math.pow(_e[2],2)),Mt=[_e[0]/ct,_e[1]/ct,_e[2]/ct],Ft=Math.sqrt(Mt[2]*Mt[2]+Mt[0]*Mt[0]),Ut=Math.atan2(Mt[1],Ft),Xt=Math.atan2(Mt[0],-Mt[2]);this.mat.rotateY(Xt).rotateX(-Ut)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var Kt=!this._prevMat.equals(this.mat);if((Kt||this.pe._mdf)&&this.comp.threeDElements){var nr,rr,or;for(i=this.comp.threeDElements.length,o=0;o<i;o+=1)if((nr=this.comp.threeDElements[o]).type==="3d"){if(Kt){var hr=this.mat.toCSS();(or=nr.container.style).transform=hr,or.webkitTransform=hr}this.pe._mdf&&((rr=nr.perspectiveElem.style).perspective=this.pe.v+"px",rr.webkitPerspective=this.pe.v+"px")}this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(o){this.prepareProperties(o,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null},extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var o=this.globalData.getAssetsPath(this.assetData),i=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",o),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(i),i.crossOrigin="anonymous",i.src=o,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)},extendPrototype([BaseRenderer],HybridRendererBase),HybridRendererBase.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;)this.pendingElements.pop().checkParenting()},HybridRendererBase.prototype.appendElementInPos=function(o,i){var s=o.getBaseElement();if(s){var _=this.layers[i];if(_.ddd&&this.supports3d)this.addTo3dContainer(s,i);else if(this.threeDElements)this.addTo3dContainer(s,i);else{for(var _e,ct,Mt=0;Mt<i;)this.elements[Mt]&&this.elements[Mt]!==!0&&this.elements[Mt].getBaseElement&&(ct=this.elements[Mt],_e=(this.layers[Mt].ddd?this.getThreeDContainerByPos(Mt):ct.getBaseElement())||_e),Mt+=1;_e?_.ddd&&this.supports3d||this.layerElement.insertBefore(s,_e):_.ddd&&this.supports3d||this.layerElement.appendChild(s)}}},HybridRendererBase.prototype.createShape=function(o){return this.supports3d?new HShapeElement(o,this.globalData,this):new SVGShapeElement(o,this.globalData,this)},HybridRendererBase.prototype.createText=function(o){return this.supports3d?new HTextElement(o,this.globalData,this):new SVGTextLottieElement(o,this.globalData,this)},HybridRendererBase.prototype.createCamera=function(o){return this.camera=new HCameraElement(o,this.globalData,this),this.camera},HybridRendererBase.prototype.createImage=function(o){return this.supports3d?new HImageElement(o,this.globalData,this):new IImageElement(o,this.globalData,this)},HybridRendererBase.prototype.createSolid=function(o){return this.supports3d?new HSolidElement(o,this.globalData,this):new ISolidElement(o,this.globalData,this)},HybridRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,HybridRendererBase.prototype.getThreeDContainerByPos=function(o){for(var i=0,s=this.threeDElements.length;i<s;){if(this.threeDElements[i].startPos<=o&&this.threeDElements[i].endPos>=o)return this.threeDElements[i].perspectiveElem;i+=1}return null},HybridRendererBase.prototype.createThreeDContainer=function(o,i){var s,_,_e=createTag("div");styleDiv(_e);var ct=createTag("div");if(styleDiv(ct),i==="3d"){(s=_e.style).width=this.globalData.compSize.w+"px",s.height=this.globalData.compSize.h+"px";var Mt="50% 50%";s.webkitTransformOrigin=Mt,s.mozTransformOrigin=Mt,s.transformOrigin=Mt;var Ft="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";(_=ct.style).transform=Ft,_.webkitTransform=Ft}_e.appendChild(ct);var Ut={container:ct,perspectiveElem:_e,startPos:o,endPos:o,type:i};return this.threeDElements.push(Ut),Ut},HybridRendererBase.prototype.build3dContainers=function(){var o,i,s=this.layers.length,_="";for(o=0;o<s;o+=1)this.layers[o].ddd&&this.layers[o].ty!==3?(_!=="3d"&&(_="3d",i=this.createThreeDContainer(o,"3d")),i.endPos=Math.max(i.endPos,o)):(_!=="2d"&&(_="2d",i=this.createThreeDContainer(o,"2d")),i.endPos=Math.max(i.endPos,o));for(o=(s=this.threeDElements.length)-1;o>=0;o-=1)this.resizerElem.appendChild(this.threeDElements[o].perspectiveElem)},HybridRendererBase.prototype.addTo3dContainer=function(o,i){for(var s=0,_=this.threeDElements.length;s<_;){if(i<=this.threeDElements[s].endPos){for(var _e,ct=this.threeDElements[s].startPos;ct<i;)this.elements[ct]&&this.elements[ct].getBaseElement&&(_e=this.elements[ct].getBaseElement()),ct+=1;_e?this.threeDElements[s].container.insertBefore(o,_e):this.threeDElements[s].container.appendChild(o);break}s+=1}},HybridRendererBase.prototype.configAnimation=function(o){var i=createTag("div"),s=this.animationItem.wrapper,_=i.style;_.width=o.w+"px",_.height=o.h+"px",this.resizerElem=i,styleDiv(i),_.transformStyle="flat",_.mozTransformStyle="flat",_.webkitTransformStyle="flat",this.renderConfig.className&&i.setAttribute("class",this.renderConfig.className),s.appendChild(i),_.overflow="hidden";var _e=createNS("svg");_e.setAttribute("width","1"),_e.setAttribute("height","1"),styleDiv(_e),this.resizerElem.appendChild(_e);var ct=createNS("defs");_e.appendChild(ct),this.data=o,this.setupGlobalData(o,_e),this.globalData.defs=ct,this.layers=o.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRendererBase.prototype.destroy=function(){var o;this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;var i=this.layers?this.layers.length:0;for(o=0;o<i;o+=1)this.elements[o]&&this.elements[o].destroy&&this.elements[o].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRendererBase.prototype.updateContainerSize=function(){var o,i,s,_,_e=this.animationItem.wrapper.offsetWidth,ct=this.animationItem.wrapper.offsetHeight,Mt=_e/ct;this.globalData.compSize.w/this.globalData.compSize.h>Mt?(o=_e/this.globalData.compSize.w,i=_e/this.globalData.compSize.w,s=0,_=(ct-this.globalData.compSize.h*(_e/this.globalData.compSize.w))/2):(o=ct/this.globalData.compSize.h,i=ct/this.globalData.compSize.h,s=(_e-this.globalData.compSize.w*(ct/this.globalData.compSize.h))/2,_=0);var Ft=this.resizerElem.style;Ft.webkitTransform="matrix3d("+o+",0,0,0,0,"+i+",0,0,0,0,1,0,"+s+","+_+",0,1)",Ft.transform=Ft.webkitTransform},HybridRendererBase.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRendererBase.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRendererBase.prototype.show=function(){this.resizerElem.style.display="block"},HybridRendererBase.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var o,i=this.globalData.compSize.w,s=this.globalData.compSize.h,_=this.threeDElements.length;for(o=0;o<_;o+=1){var _e=this.threeDElements[o].perspectiveElem.style;_e.webkitPerspective=Math.sqrt(Math.pow(i,2)+Math.pow(s,2))+"px",_e.perspective=_e.webkitPerspective}}},HybridRendererBase.prototype.searchExtraCompositions=function(o){var i,s=o.length,_=createTag("div");for(i=0;i<s;i+=1)if(o[i].xt){var _e=this.createComp(o[i],_,this.globalData.comp,null);_e.initExpressions(),this.globalData.projectInterface.registerComposition(_e)}},extendPrototype([HybridRendererBase,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(o,i){for(var s,_=0;_<i;)this.elements[_]&&this.elements[_].getBaseElement&&(s=this.elements[_].getBaseElement()),_+=1;s?this.layerElement.insertBefore(o,s):this.layerElement.appendChild(o)},HCompElement.prototype.createComp=function(o){return this.supports3d?new HCompElement(o,this.globalData,this):new SVGCompElement(o,this.globalData,this)},extendPrototype([HybridRendererBase],HybridRenderer),HybridRenderer.prototype.createComp=function(o){return this.supports3d?new HCompElement(o,this.globalData,this):new SVGCompElement(o,this.globalData,this)};var CompExpressionInterface=function(o){function i(s){for(var _=0,_e=o.layers.length;_<_e;){if(o.layers[_].nm===s||o.layers[_].ind===s)return o.elements[_].layerInterface;_+=1}return null}return Object.defineProperty(i,"_name",{value:o.data.nm}),i.layer=i,i.pixelAspect=1,i.height=o.data.h||o.globalData.compSize.h,i.width=o.data.w||o.globalData.compSize.w,i.pixelAspect=1,i.frameDuration=1/o.globalData.frameRate,i.displayStartTime=0,i.numLayers=o.layers.length,i};function _typeof$2(o){return _typeof$2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},_typeof$2(o)}function seedRandom(o,i){var s=this,_=256,_e="random",ct=i.pow(_,6),Mt=i.pow(2,52),Ft=2*Mt,Ut=_-1;function Xt(hr){var fr,yr=hr.length,Lr=this,Br=0,Vr=Lr.i=Lr.j=0,Wr=Lr.S=[];for(yr||(hr=[yr++]);Br<_;)Wr[Br]=Br++;for(Br=0;Br<_;Br++)Wr[Br]=Wr[Vr=Ut&Vr+hr[Br%yr]+(fr=Wr[Br])],Wr[Vr]=fr;Lr.g=function(ro){for(var no,so=0,ko=Lr.i,To=Lr.j,oo=Lr.S;ro--;)no=oo[ko=Ut&ko+1],so=so*_+oo[Ut&(oo[ko]=oo[To=Ut&To+no])+(oo[To]=no)];return Lr.i=ko,Lr.j=To,so}}function Kt(hr,fr){return fr.i=hr.i,fr.j=hr.j,fr.S=hr.S.slice(),fr}function nr(hr,fr){var yr,Lr=[],Br=_typeof$2(hr);if(fr&&Br=="object")for(yr in hr)try{Lr.push(nr(hr[yr],fr-1))}catch{}return Lr.length?Lr:Br=="string"?hr:hr+"\0"}function rr(hr,fr){for(var yr,Lr=hr+"",Br=0;Br<Lr.length;)fr[Ut&Br]=Ut&(yr^=19*fr[Ut&Br])+Lr.charCodeAt(Br++);return or(fr)}function or(hr){return String.fromCharCode.apply(0,hr)}i["seed"+_e]=function(hr,fr,yr){var Lr=[],Br=rr(nr((fr=fr===!0?{entropy:!0}:fr||{}).entropy?[hr,or(o)]:hr===null?function(){try{var ro=new Uint8Array(_);return(s.crypto||s.msCrypto).getRandomValues(ro),or(ro)}catch{var no=s.navigator,so=no&&no.plugins;return[+new Date,s,so,s.screen,or(o)]}}():hr,3),Lr),Vr=new Xt(Lr),Wr=function(){for(var ro=Vr.g(6),no=ct,so=0;ro<Mt;)ro=(ro+so)*_,no*=_,so=Vr.g(1);for(;ro>=Ft;)ro/=2,no/=2,so>>>=1;return(ro+so)/no};return Wr.int32=function(){return 0|Vr.g(4)},Wr.quick=function(){return Vr.g(4)/4294967296},Wr.double=Wr,rr(or(Vr.S),o),(fr.pass||yr||function(ro,no,so,ko){return ko&&(ko.S&&Kt(ko,Vr),ro.state=function(){return Kt(Vr,{})}),so?(i[_e]=ro,no):ro})(Wr,Br,"global"in fr?fr.global:this==i,fr.state)},rr(i.random(),o)}function initialize$2(o){seedRandom([],o)}var propTypes={SHAPE:"shape"};function _typeof$1(o){return _typeof$1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},_typeof$1(o)}var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null,frames=null,_lottieGlobal={};function resetFrame(){_lottieGlobal={}}function $bm_isInstanceOfArray(o){return o.constructor===Array||o.constructor===Float32Array}function isNumerable(o,i){return o==="number"||i instanceof Number||o==="boolean"||o==="string"}function $bm_neg(o){var i=_typeof$1(o);if(i==="number"||o instanceof Number||i==="boolean")return-o;if($bm_isInstanceOfArray(o)){var s,_=o.length,_e=[];for(s=0;s<_;s+=1)_e[s]=-o[s];return _e}return o.propType?o.v:-o}initialize$2(BMMath);var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(o,i){var s=_typeof$1(o),_=_typeof$1(i);if(isNumerable(s,o)&&isNumerable(_,i)||s==="string"||_==="string")return o+i;if($bm_isInstanceOfArray(o)&&isNumerable(_,i))return(o=o.slice(0))[0]+=i,o;if(isNumerable(s,o)&&$bm_isInstanceOfArray(i))return(i=i.slice(0))[0]=o+i[0],i;if($bm_isInstanceOfArray(o)&&$bm_isInstanceOfArray(i)){for(var _e=0,ct=o.length,Mt=i.length,Ft=[];_e<ct||_e<Mt;)(typeof o[_e]=="number"||o[_e]instanceof Number)&&(typeof i[_e]=="number"||i[_e]instanceof Number)?Ft[_e]=o[_e]+i[_e]:Ft[_e]=i[_e]===void 0?o[_e]:o[_e]||i[_e],_e+=1;return Ft}return 0}var add=sum;function sub(o,i){var s=_typeof$1(o),_=_typeof$1(i);if(isNumerable(s,o)&&isNumerable(_,i))return s==="string"&&(o=parseInt(o,10)),_==="string"&&(i=parseInt(i,10)),o-i;if($bm_isInstanceOfArray(o)&&isNumerable(_,i))return(o=o.slice(0))[0]-=i,o;if(isNumerable(s,o)&&$bm_isInstanceOfArray(i))return(i=i.slice(0))[0]=o-i[0],i;if($bm_isInstanceOfArray(o)&&$bm_isInstanceOfArray(i)){for(var _e=0,ct=o.length,Mt=i.length,Ft=[];_e<ct||_e<Mt;)(typeof o[_e]=="number"||o[_e]instanceof Number)&&(typeof i[_e]=="number"||i[_e]instanceof Number)?Ft[_e]=o[_e]-i[_e]:Ft[_e]=i[_e]===void 0?o[_e]:o[_e]||i[_e],_e+=1;return Ft}return 0}function mul(o,i){var s,_,_e,ct=_typeof$1(o),Mt=_typeof$1(i);if(isNumerable(ct,o)&&isNumerable(Mt,i))return o*i;if($bm_isInstanceOfArray(o)&&isNumerable(Mt,i)){for(_e=o.length,s=createTypedArray("float32",_e),_=0;_<_e;_+=1)s[_]=o[_]*i;return s}if(isNumerable(ct,o)&&$bm_isInstanceOfArray(i)){for(_e=i.length,s=createTypedArray("float32",_e),_=0;_<_e;_+=1)s[_]=o*i[_];return s}return 0}function div(o,i){var s,_,_e,ct=_typeof$1(o),Mt=_typeof$1(i);if(isNumerable(ct,o)&&isNumerable(Mt,i))return o/i;if($bm_isInstanceOfArray(o)&&isNumerable(Mt,i)){for(_e=o.length,s=createTypedArray("float32",_e),_=0;_<_e;_+=1)s[_]=o[_]/i;return s}if(isNumerable(ct,o)&&$bm_isInstanceOfArray(i)){for(_e=i.length,s=createTypedArray("float32",_e),_=0;_<_e;_+=1)s[_]=o/i[_];return s}return 0}function mod(o,i){return typeof o=="string"&&(o=parseInt(o,10)),typeof i=="string"&&(i=parseInt(i,10)),o%i}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(o,i,s){if(i>s){var _=s;s=i,i=_}return Math.min(Math.max(o,i),s)}function radiansToDegrees(o){return o/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(o){return o*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(o,i){if(typeof o=="number"||o instanceof Number)return i=i||0,Math.abs(o-i);var s;i||(i=helperLengthArray);var _=Math.min(o.length,i.length),_e=0;for(s=0;s<_;s+=1)_e+=Math.pow(i[s]-o[s],2);return Math.sqrt(_e)}function normalize(o){return div(o,length(o))}function rgbToHsl(o){var i,s,_=o[0],_e=o[1],ct=o[2],Mt=Math.max(_,_e,ct),Ft=Math.min(_,_e,ct),Ut=(Mt+Ft)/2;if(Mt===Ft)i=0,s=0;else{var Xt=Mt-Ft;switch(s=Ut>.5?Xt/(2-Mt-Ft):Xt/(Mt+Ft),Mt){case _:i=(_e-ct)/Xt+(_e<ct?6:0);break;case _e:i=(ct-_)/Xt+2;break;case ct:i=(_-_e)/Xt+4}i/=6}return[i,s,Ut,o[3]]}function hue2rgb(o,i,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?o+6*(i-o)*s:s<.5?i:s<2/3?o+(i-o)*(2/3-s)*6:o}function hslToRgb(o){var i,s,_,_e=o[0],ct=o[1],Mt=o[2];if(ct===0)i=Mt,_=Mt,s=Mt;else{var Ft=Mt<.5?Mt*(1+ct):Mt+ct-Mt*ct,Ut=2*Mt-Ft;i=hue2rgb(Ut,Ft,_e+1/3),s=hue2rgb(Ut,Ft,_e),_=hue2rgb(Ut,Ft,_e-1/3)}return[i,s,_,o[3]]}function linear(o,i,s,_,_e){if(_!==void 0&&_e!==void 0||(_=i,_e=s,i=0,s=1),s<i){var ct=s;s=i,i=ct}if(o<=i)return _;if(o>=s)return _e;var Mt,Ft=s===i?0:(o-i)/(s-i);if(!_.length)return _+(_e-_)*Ft;var Ut=_.length,Xt=createTypedArray("float32",Ut);for(Mt=0;Mt<Ut;Mt+=1)Xt[Mt]=_[Mt]+(_e[Mt]-_[Mt])*Ft;return Xt}function random(o,i){if(i===void 0&&(o===void 0?(o=0,i=1):(i=o,o=void 0)),i.length){var s,_=i.length;o||(o=createTypedArray("float32",_));var _e=createTypedArray("float32",_),ct=BMMath.random();for(s=0;s<_;s+=1)_e[s]=o[s]+ct*(i[s]-o[s]);return _e}return o===void 0&&(o=0),o+BMMath.random()*(i-o)}function createPath(o,i,s,_){var _e,ct=o.length,Mt=shapePool.newElement();Mt.setPathData(!!_,ct);var Ft,Ut,Xt=[0,0];for(_e=0;_e<ct;_e+=1)Ft=i&&i[_e]?i[_e]:Xt,Ut=s&&s[_e]?s[_e]:Xt,Mt.setTripleAt(o[_e][0],o[_e][1],Ut[0]+o[_e][0],Ut[1]+o[_e][1],Ft[0]+o[_e][0],Ft[1]+o[_e][1],_e,!0);return Mt}function initiateExpression(elem,data,property){function noOp(o){return o}if(!elem.globalData.renderConfig.runExpressions)return noOp;var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=val.indexOf("random")!==-1,elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||this.data.hd!==!0,wiggle=(function(o,i){var s,_,_e=this.pv.length?this.pv.length:1,ct=createTypedArray("float32",_e),Mt=Math.floor(5*time);for(s=0,_=0;s<Mt;){for(_=0;_<_e;_+=1)ct[_]+=-i+2*i*BMMath.random();s+=1}var Ft=5*time,Ut=Ft-Math.floor(Ft),Xt=createTypedArray("float32",_e);if(_e>1){for(_=0;_<_e;_+=1)Xt[_]=this.pv[_]+ct[_]+(-i+2*i*BMMath.random())*Ut;return Xt}return this.pv+ct[0]+(-i+2*i*BMMath.random())*Ut}).bind(this);function loopInDuration(o,i){return loopIn(o,i,!0)}function loopOutDuration(o,i){return loopOut(o,i,!0)}thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty)),this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface),time,velocity,value,text,textIndex,textTotal,selectorValue;function lookAt(o,i){var s=[i[0]-o[0],i[1]-o[1],i[2]-o[2]],_=Math.atan2(s[0],Math.sqrt(s[1]*s[1]+s[2]*s[2]))/degToRads;return[-Math.atan2(s[1],s[2])/degToRads,_,0]}function easeOut(o,i,s,_,_e){return applyEase(easeOutBez,o,i,s,_,_e)}function easeIn(o,i,s,_,_e){return applyEase(easeInBez,o,i,s,_,_e)}function ease(o,i,s,_,_e){return applyEase(easeInOutBez,o,i,s,_,_e)}function applyEase(o,i,s,_,_e,ct){_e===void 0?(_e=s,ct=_):i=(i-s)/(_-s),i>1?i=1:i<0&&(i=0);var Mt=o(i);if($bm_isInstanceOfArray(_e)){var Ft,Ut=_e.length,Xt=createTypedArray("float32",Ut);for(Ft=0;Ft<Ut;Ft+=1)Xt[Ft]=(ct[Ft]-_e[Ft])*Mt+_e[Ft];return Xt}return(ct-_e)*Mt+_e}function nearestKey(o){var i,s,_,_e=data.k.length;if(data.k.length&&typeof data.k[0]!="number")if(s=-1,(o*=elem.comp.globalData.frameRate)<data.k[0].t)s=1,_=data.k[0].t;else{for(i=0;i<_e-1;i+=1){if(o===data.k[i].t){s=i+1,_=data.k[i].t;break}if(o>data.k[i].t&&o<data.k[i+1].t){o-data.k[i].t>data.k[i+1].t-o?(s=i+2,_=data.k[i+1].t):(s=i+1,_=data.k[i].t);break}}s===-1&&(s=i+1,_=data.k[i].t)}else s=0,_=0;var ct={};return ct.index=s,ct.time=_/elem.comp.globalData.frameRate,ct}function key(o){var i,s,_;if(!data.k.length||typeof data.k[0]=="number")throw new Error("The property has no keyframe at index "+o);o-=1,i={time:data.k[o].t/elem.comp.globalData.frameRate,value:[]};var _e=Object.prototype.hasOwnProperty.call(data.k[o],"s")?data.k[o].s:data.k[o-1].e;for(_=_e.length,s=0;s<_;s+=1)i[s]=_e[s],i.value[s]=_e[s];return i}function framesToTime(o,i){return i||(i=elem.comp.globalData.frameRate),o/i}function timeToFrames(o,i){return o||o===0||(o=time),i||(i=elem.comp.globalData.frameRate),o*i}function seedRandom(o){BMMath.seedrandom(randSeed+o)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(o,i){return typeof value=="string"?i===void 0?value.substring(o):value.substring(o,i):""}function substr(o,i){return typeof value=="string"?i===void 0?value.substr(o):value.substr(o,i):""}function posterizeTime(o){time=o===0?0:Math.floor(time*o)/o,value=valueAtTime(time)}var index=elem.data.ind;!elem.hierarchy||elem.hierarchy.length;var parent,randSeed=Math.floor(1e6*Math.random()),globalData=elem.globalData;function executeExpression(o){return value=o,this.frameExpressionId===elem.globalData.frameId&&this.propType!=="textSelector"?value:(this.propType==="textSelector"&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),elemType!==4||content||(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),!(!elem.hierarchy||!elem.hierarchy.length)&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,_needsRandom&&seedRandom(randSeed+time),needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt=scoped_bm_rt.propType===propTypes.SHAPE?scoped_bm_rt.v:scoped_bm_rt)}return executeExpression.__preventDeadCodeRemoval=[$bm_transform,anchorPoint,time,velocity,inPoint,outPoint,width,height,name,loop_in,loop_out,smooth,toComp,fromCompToSurface,toWorld,fromWorld,mask,position,rotation,scale,thisComp,numKeys,active,wiggle,loopInDuration,loopOutDuration,comp,lookAt,easeOut,easeIn,ease,nearestKey,key,text,textIndex,textTotal,selectorValue,framesToTime,timeToFrames,sourceRectAtTime,substring,substr,posterizeTime,index,globalData],executeExpression}return ob.initiateExpression=initiateExpression,ob.__preventDeadCodeRemoval=[window,document,XMLHttpRequest,fetch,frames,$bm_neg,add,$bm_sum,$bm_sub,$bm_mul,$bm_div,$bm_mod,clamp,radians_to_degrees,degreesToRadians,degrees_to_radians,normalize,rgbToHsl,hslToRgb,linear,random,createPath,_lottieGlobal],ob.resetFrame=resetFrame,ob}(),Expressions=function(){var o={initExpressions:function(i){var s=0,_=[];i.renderer.compInterface=CompExpressionInterface(i.renderer),i.renderer.globalData.projectInterface.registerComposition(i.renderer),i.renderer.globalData.pushExpression=function(){s+=1},i.renderer.globalData.popExpression=function(){(s-=1)==0&&function(){var _e,ct=_.length;for(_e=0;_e<ct;_e+=1)_[_e].release();_.length=0}()},i.renderer.globalData.registerExpressionProperty=function(_e){_.indexOf(_e)===-1&&_.push(_e)}}};return o.resetFrame=ExpressionManager.resetFrame,o}(),MaskManagerInterface=function(){function o(i,s){this._mask=i,this._data=s}return Object.defineProperty(o.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(o.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),100*this._mask.op.v}}),function(i){var s,_=createSizedArray(i.viewData.length),_e=i.viewData.length;for(s=0;s<_e;s+=1)_[s]=new o(i.viewData[s],i.masksProperties[s]);return function(ct){for(s=0;s<_e;){if(i.masksProperties[s].nm===ct)return _[s];s+=1}return null}}}(),ExpressionPropertyInterface=function(){var o={pv:0,v:0,mult:1},i={pv:[0,0,0],v:[0,0,0],mult:1};function s(_e,ct,Mt){Object.defineProperty(_e,"velocity",{get:function(){return ct.getVelocityAtTime(ct.comp.currentFrame)}}),_e.numKeys=ct.keyframes?ct.keyframes.length:0,_e.key=function(Ft){if(!_e.numKeys)return 0;var Ut="";Ut="s"in ct.keyframes[Ft-1]?ct.keyframes[Ft-1].s:"e"in ct.keyframes[Ft-2]?ct.keyframes[Ft-2].e:ct.keyframes[Ft-2].s;var Xt=Mt==="unidimensional"?new Number(Ut):Object.assign({},Ut);return Xt.time=ct.keyframes[Ft-1].t/ct.elem.comp.globalData.frameRate,Xt.value=Mt==="unidimensional"?Ut[0]:Ut,Xt},_e.valueAtTime=ct.getValueAtTime,_e.speedAtTime=ct.getSpeedAtTime,_e.velocityAtTime=ct.getVelocityAtTime,_e.propertyGroup=ct.propertyGroup}function _(){return o}return function(_e){return _e?_e.propType==="unidimensional"?function(ct){ct&&"pv"in ct||(ct=o);var Mt=1/ct.mult,Ft=ct.pv*Mt,Ut=new Number(Ft);return Ut.value=Ft,s(Ut,ct,"unidimensional"),function(){return ct.k&&ct.getValue(),Ft=ct.v*Mt,Ut.value!==Ft&&((Ut=new Number(Ft)).value=Ft,s(Ut,ct,"unidimensional")),Ut}}(_e):function(ct){ct&&"pv"in ct||(ct=i);var Mt=1/ct.mult,Ft=ct.data&&ct.data.l||ct.pv.length,Ut=createTypedArray("float32",Ft),Xt=createTypedArray("float32",Ft);return Ut.value=Xt,s(Ut,ct,"multidimensional"),function(){ct.k&&ct.getValue();for(var Kt=0;Kt<Ft;Kt+=1)Xt[Kt]=ct.v[Kt]*Mt,Ut[Kt]=Xt[Kt];return Ut}}(_e):_}}(),TransformExpressionInterface=function(o){function i(Mt){switch(Mt){case"scale":case"Scale":case"ADBE Scale":case 6:return i.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return i.rotation;case"ADBE Rotate X":return i.xRotation;case"ADBE Rotate Y":return i.yRotation;case"position":case"Position":case"ADBE Position":case 2:return i.position;case"ADBE Position_0":return i.xPosition;case"ADBE Position_1":return i.yPosition;case"ADBE Position_2":return i.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return i.anchorPoint;case"opacity":case"Opacity":case 11:return i.opacity;default:return null}}var s,_,_e,ct;return Object.defineProperty(i,"rotation",{get:ExpressionPropertyInterface(o.r||o.rz)}),Object.defineProperty(i,"zRotation",{get:ExpressionPropertyInterface(o.rz||o.r)}),Object.defineProperty(i,"xRotation",{get:ExpressionPropertyInterface(o.rx)}),Object.defineProperty(i,"yRotation",{get:ExpressionPropertyInterface(o.ry)}),Object.defineProperty(i,"scale",{get:ExpressionPropertyInterface(o.s)}),o.p?ct=ExpressionPropertyInterface(o.p):(s=ExpressionPropertyInterface(o.px),_=ExpressionPropertyInterface(o.py),o.pz&&(_e=ExpressionPropertyInterface(o.pz))),Object.defineProperty(i,"position",{get:function(){return o.p?ct():[s(),_(),_e?_e():0]}}),Object.defineProperty(i,"xPosition",{get:ExpressionPropertyInterface(o.px)}),Object.defineProperty(i,"yPosition",{get:ExpressionPropertyInterface(o.py)}),Object.defineProperty(i,"zPosition",{get:ExpressionPropertyInterface(o.pz)}),Object.defineProperty(i,"anchorPoint",{get:ExpressionPropertyInterface(o.a)}),Object.defineProperty(i,"opacity",{get:ExpressionPropertyInterface(o.o)}),Object.defineProperty(i,"skew",{get:ExpressionPropertyInterface(o.sk)}),Object.defineProperty(i,"skewAxis",{get:ExpressionPropertyInterface(o.sa)}),Object.defineProperty(i,"orientation",{get:ExpressionPropertyInterface(o.or)}),i},LayerExpressionInterface=function(){function o(Xt){var Kt=new Matrix;return Xt!==void 0?this._elem.finalTransform.mProp.getValueAtTime(Xt).clone(Kt):this._elem.finalTransform.mProp.applyToMatrix(Kt),Kt}function i(Xt,Kt){var nr=this.getMatrix(Kt);return nr.props[12]=0,nr.props[13]=0,nr.props[14]=0,this.applyPoint(nr,Xt)}function s(Xt,Kt){var nr=this.getMatrix(Kt);return this.applyPoint(nr,Xt)}function _(Xt,Kt){var nr=this.getMatrix(Kt);return nr.props[12]=0,nr.props[13]=0,nr.props[14]=0,this.invertPoint(nr,Xt)}function _e(Xt,Kt){var nr=this.getMatrix(Kt);return this.invertPoint(nr,Xt)}function ct(Xt,Kt){if(this._elem.hierarchy&&this._elem.hierarchy.length){var nr,rr=this._elem.hierarchy.length;for(nr=0;nr<rr;nr+=1)this._elem.hierarchy[nr].finalTransform.mProp.applyToMatrix(Xt)}return Xt.applyToPointArray(Kt[0],Kt[1],Kt[2]||0)}function Mt(Xt,Kt){if(this._elem.hierarchy&&this._elem.hierarchy.length){var nr,rr=this._elem.hierarchy.length;for(nr=0;nr<rr;nr+=1)this._elem.hierarchy[nr].finalTransform.mProp.applyToMatrix(Xt)}return Xt.inversePoint(Kt)}function Ft(Xt){var Kt=new Matrix;if(Kt.reset(),this._elem.finalTransform.mProp.applyToMatrix(Kt),this._elem.hierarchy&&this._elem.hierarchy.length){var nr,rr=this._elem.hierarchy.length;for(nr=0;nr<rr;nr+=1)this._elem.hierarchy[nr].finalTransform.mProp.applyToMatrix(Kt);return Kt.inversePoint(Xt)}return Kt.inversePoint(Xt)}function Ut(){return[1,1,1,1]}return function(Xt){var Kt;function nr(or){switch(or){case"ADBE Root Vectors Group":case"Contents":case 2:return nr.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return Kt;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return nr.effect;case"ADBE Text Properties":return nr.textInterface;default:return null}}nr.getMatrix=o,nr.invertPoint=Mt,nr.applyPoint=ct,nr.toWorld=s,nr.toWorldVec=i,nr.fromWorld=_e,nr.fromWorldVec=_,nr.toComp=s,nr.fromComp=Ft,nr.sampleImage=Ut,nr.sourceRectAtTime=Xt.sourceRectAtTime.bind(Xt),nr._elem=Xt;var rr=getDescriptor(Kt=TransformExpressionInterface(Xt.finalTransform.mProp),"anchorPoint");return Object.defineProperties(nr,{hasParent:{get:function(){return Xt.hierarchy.length}},parent:{get:function(){return Xt.hierarchy[0].layerInterface}},rotation:getDescriptor(Kt,"rotation"),scale:getDescriptor(Kt,"scale"),position:getDescriptor(Kt,"position"),opacity:getDescriptor(Kt,"opacity"),anchorPoint:rr,anchor_point:rr,transform:{get:function(){return Kt}},active:{get:function(){return Xt.isInRange}}}),nr.startTime=Xt.data.st,nr.index=Xt.data.ind,nr.source=Xt.data.refId,nr.height=Xt.data.ty===0?Xt.data.h:100,nr.width=Xt.data.ty===0?Xt.data.w:100,nr.inPoint=Xt.data.ip/Xt.comp.globalData.frameRate,nr.outPoint=Xt.data.op/Xt.comp.globalData.frameRate,nr._name=Xt.data.nm,nr.registerMaskInterface=function(or){nr.mask=new MaskManagerInterface(or,Xt)},nr.registerEffectsInterface=function(or){nr.effect=or},nr}}(),propertyGroupFactory=function(o,i){return function(s){return(s=s===void 0?1:s)<=0?o:i(s-1)}},PropertyInterface=function(o,i){var s={_name:o};return function(_){return(_=_===void 0?1:_)<=0?s:i(_-1)}},EffectsExpressionInterface=function(){function o(s,_,_e,ct){function Mt(nr){for(var rr=s.ef,or=0,hr=rr.length;or<hr;){if(nr===rr[or].nm||nr===rr[or].mn||nr===rr[or].ix)return rr[or].ty===5?Xt[or]:Xt[or]();or+=1}throw new Error}var Ft,Ut=propertyGroupFactory(Mt,_e),Xt=[],Kt=s.ef.length;for(Ft=0;Ft<Kt;Ft+=1)s.ef[Ft].ty===5?Xt.push(o(s.ef[Ft],_.effectElements[Ft],_.effectElements[Ft].propertyGroup,ct)):Xt.push(i(_.effectElements[Ft],s.ef[Ft].ty,ct,Ut));return s.mn==="ADBE Color Control"&&Object.defineProperty(Mt,"color",{get:function(){return Xt[0]()}}),Object.defineProperties(Mt,{numProperties:{get:function(){return s.np}},_name:{value:s.nm},propertyGroup:{value:Ut}}),Mt.enabled=s.en!==0,Mt.active=Mt.enabled,Mt}function i(s,_,_e,ct){var Mt=ExpressionPropertyInterface(s.p);return s.p.setGroupProperty&&s.p.setGroupProperty(PropertyInterface("",ct)),function(){return _===10?_e.comp.compInterface(s.p.v):Mt()}}return{createEffectsInterface:function(s,_){if(s.effectsManager){var _e,ct=[],Mt=s.data.ef,Ft=s.effectsManager.effectElements.length;for(_e=0;_e<Ft;_e+=1)ct.push(o(Mt[_e],s.effectsManager.effectElements[_e],_,s));var Ut=s.data.ef||[],Xt=function(Kt){for(_e=0,Ft=Ut.length;_e<Ft;){if(Kt===Ut[_e].nm||Kt===Ut[_e].mn||Kt===Ut[_e].ix)return ct[_e];_e+=1}return null};return Object.defineProperty(Xt,"numProperties",{get:function(){return Ut.length}}),Xt}return null}}}(),ShapePathInterface=function(o,i,s){var _=i.sh;function _e(Mt){return Mt==="Shape"||Mt==="shape"||Mt==="Path"||Mt==="path"||Mt==="ADBE Vector Shape"||Mt===2?_e.path:null}var ct=propertyGroupFactory(_e,s);return _.setGroupProperty(PropertyInterface("Path",ct)),Object.defineProperties(_e,{path:{get:function(){return _.k&&_.getValue(),_}},shape:{get:function(){return _.k&&_.getValue(),_}},_name:{value:o.nm},ix:{value:o.ix},propertyIndex:{value:o.ix},mn:{value:o.mn},propertyGroup:{value:s}}),_e},ShapeExpressionInterface=function(){function o(rr,or,hr){var fr,yr=[],Lr=rr?rr.length:0;for(fr=0;fr<Lr;fr+=1)rr[fr].ty==="gr"?yr.push(i(rr[fr],or[fr],hr)):rr[fr].ty==="fl"?yr.push(s(rr[fr],or[fr],hr)):rr[fr].ty==="st"?yr.push(_e(rr[fr],or[fr],hr)):rr[fr].ty==="tm"?yr.push(ct(rr[fr],or[fr],hr)):rr[fr].ty==="tr"||(rr[fr].ty==="el"?yr.push(Ft(rr[fr],or[fr],hr)):rr[fr].ty==="sr"?yr.push(Ut(rr[fr],or[fr],hr)):rr[fr].ty==="sh"?yr.push(ShapePathInterface(rr[fr],or[fr],hr)):rr[fr].ty==="rc"?yr.push(Xt(rr[fr],or[fr],hr)):rr[fr].ty==="rd"?yr.push(Kt(rr[fr],or[fr],hr)):rr[fr].ty==="rp"?yr.push(nr(rr[fr],or[fr],hr)):rr[fr].ty==="gf"?yr.push(_(rr[fr],or[fr],hr)):yr.push((rr[fr],or[fr],function(){return null})));return yr}function i(rr,or,hr){var fr=function(Br){switch(Br){case"ADBE Vectors Group":case"Contents":case 2:return fr.content;default:return fr.transform}};fr.propertyGroup=propertyGroupFactory(fr,hr);var yr=function(Br,Vr,Wr){var ro,no=function(ko){for(var To=0,oo=ro.length;To<oo;){if(ro[To]._name===ko||ro[To].mn===ko||ro[To].propertyIndex===ko||ro[To].ix===ko||ro[To].ind===ko)return ro[To];To+=1}return typeof ko=="number"?ro[ko-1]:null};no.propertyGroup=propertyGroupFactory(no,Wr),ro=o(Br.it,Vr.it,no.propertyGroup),no.numProperties=ro.length;var so=Mt(Br.it[Br.it.length-1],Vr.it[Vr.it.length-1],no.propertyGroup);return no.transform=so,no.propertyIndex=Br.cix,no._name=Br.nm,no}(rr,or,fr.propertyGroup),Lr=Mt(rr.it[rr.it.length-1],or.it[or.it.length-1],fr.propertyGroup);return fr.content=yr,fr.transform=Lr,Object.defineProperty(fr,"_name",{get:function(){return rr.nm}}),fr.numProperties=rr.np,fr.propertyIndex=rr.ix,fr.nm=rr.nm,fr.mn=rr.mn,fr}function s(rr,or,hr){function fr(yr){return yr==="Color"||yr==="color"?fr.color:yr==="Opacity"||yr==="opacity"?fr.opacity:null}return Object.defineProperties(fr,{color:{get:ExpressionPropertyInterface(or.c)},opacity:{get:ExpressionPropertyInterface(or.o)},_name:{value:rr.nm},mn:{value:rr.mn}}),or.c.setGroupProperty(PropertyInterface("Color",hr)),or.o.setGroupProperty(PropertyInterface("Opacity",hr)),fr}function _(rr,or,hr){function fr(yr){return yr==="Start Point"||yr==="start point"?fr.startPoint:yr==="End Point"||yr==="end point"?fr.endPoint:yr==="Opacity"||yr==="opacity"?fr.opacity:null}return Object.defineProperties(fr,{startPoint:{get:ExpressionPropertyInterface(or.s)},endPoint:{get:ExpressionPropertyInterface(or.e)},opacity:{get:ExpressionPropertyInterface(or.o)},type:{get:function(){return"a"}},_name:{value:rr.nm},mn:{value:rr.mn}}),or.s.setGroupProperty(PropertyInterface("Start Point",hr)),or.e.setGroupProperty(PropertyInterface("End Point",hr)),or.o.setGroupProperty(PropertyInterface("Opacity",hr)),fr}function _e(rr,or,hr){var fr,yr=propertyGroupFactory(ro,hr),Lr=propertyGroupFactory(Wr,yr);function Br(no){Object.defineProperty(Wr,rr.d[no].nm,{get:ExpressionPropertyInterface(or.d.dataProps[no].p)})}var Vr=rr.d?rr.d.length:0,Wr={};for(fr=0;fr<Vr;fr+=1)Br(fr),or.d.dataProps[fr].p.setGroupProperty(Lr);function ro(no){return no==="Color"||no==="color"?ro.color:no==="Opacity"||no==="opacity"?ro.opacity:no==="Stroke Width"||no==="stroke width"?ro.strokeWidth:null}return Object.defineProperties(ro,{color:{get:ExpressionPropertyInterface(or.c)},opacity:{get:ExpressionPropertyInterface(or.o)},strokeWidth:{get:ExpressionPropertyInterface(or.w)},dash:{get:function(){return Wr}},_name:{value:rr.nm},mn:{value:rr.mn}}),or.c.setGroupProperty(PropertyInterface("Color",yr)),or.o.setGroupProperty(PropertyInterface("Opacity",yr)),or.w.setGroupProperty(PropertyInterface("Stroke Width",yr)),ro}function ct(rr,or,hr){function fr(Lr){return Lr===rr.e.ix||Lr==="End"||Lr==="end"?fr.end:Lr===rr.s.ix?fr.start:Lr===rr.o.ix?fr.offset:null}var yr=propertyGroupFactory(fr,hr);return fr.propertyIndex=rr.ix,or.s.setGroupProperty(PropertyInterface("Start",yr)),or.e.setGroupProperty(PropertyInterface("End",yr)),or.o.setGroupProperty(PropertyInterface("Offset",yr)),fr.propertyIndex=rr.ix,fr.propertyGroup=hr,Object.defineProperties(fr,{start:{get:ExpressionPropertyInterface(or.s)},end:{get:ExpressionPropertyInterface(or.e)},offset:{get:ExpressionPropertyInterface(or.o)},_name:{value:rr.nm}}),fr.mn=rr.mn,fr}function Mt(rr,or,hr){function fr(Lr){return rr.a.ix===Lr||Lr==="Anchor Point"?fr.anchorPoint:rr.o.ix===Lr||Lr==="Opacity"?fr.opacity:rr.p.ix===Lr||Lr==="Position"?fr.position:rr.r.ix===Lr||Lr==="Rotation"||Lr==="ADBE Vector Rotation"?fr.rotation:rr.s.ix===Lr||Lr==="Scale"?fr.scale:rr.sk&&rr.sk.ix===Lr||Lr==="Skew"?fr.skew:rr.sa&&rr.sa.ix===Lr||Lr==="Skew Axis"?fr.skewAxis:null}var yr=propertyGroupFactory(fr,hr);return or.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",yr)),or.transform.mProps.p.setGroupProperty(PropertyInterface("Position",yr)),or.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",yr)),or.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",yr)),or.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",yr)),or.transform.mProps.sk&&(or.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",yr)),or.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",yr))),or.transform.op.setGroupProperty(PropertyInterface("Opacity",yr)),Object.defineProperties(fr,{opacity:{get:ExpressionPropertyInterface(or.transform.mProps.o)},position:{get:ExpressionPropertyInterface(or.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(or.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(or.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(or.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(or.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(or.transform.mProps.sa)},_name:{value:rr.nm}}),fr.ty="tr",fr.mn=rr.mn,fr.propertyGroup=hr,fr}function Ft(rr,or,hr){function fr(Br){return rr.p.ix===Br?fr.position:rr.s.ix===Br?fr.size:null}var yr=propertyGroupFactory(fr,hr);fr.propertyIndex=rr.ix;var Lr=or.sh.ty==="tm"?or.sh.prop:or.sh;return Lr.s.setGroupProperty(PropertyInterface("Size",yr)),Lr.p.setGroupProperty(PropertyInterface("Position",yr)),Object.defineProperties(fr,{size:{get:ExpressionPropertyInterface(Lr.s)},position:{get:ExpressionPropertyInterface(Lr.p)},_name:{value:rr.nm}}),fr.mn=rr.mn,fr}function Ut(rr,or,hr){function fr(Br){return rr.p.ix===Br?fr.position:rr.r.ix===Br?fr.rotation:rr.pt.ix===Br?fr.points:rr.or.ix===Br||Br==="ADBE Vector Star Outer Radius"?fr.outerRadius:rr.os.ix===Br?fr.outerRoundness:!rr.ir||rr.ir.ix!==Br&&Br!=="ADBE Vector Star Inner Radius"?rr.is&&rr.is.ix===Br?fr.innerRoundness:null:fr.innerRadius}var yr=propertyGroupFactory(fr,hr),Lr=or.sh.ty==="tm"?or.sh.prop:or.sh;return fr.propertyIndex=rr.ix,Lr.or.setGroupProperty(PropertyInterface("Outer Radius",yr)),Lr.os.setGroupProperty(PropertyInterface("Outer Roundness",yr)),Lr.pt.setGroupProperty(PropertyInterface("Points",yr)),Lr.p.setGroupProperty(PropertyInterface("Position",yr)),Lr.r.setGroupProperty(PropertyInterface("Rotation",yr)),rr.ir&&(Lr.ir.setGroupProperty(PropertyInterface("Inner Radius",yr)),Lr.is.setGroupProperty(PropertyInterface("Inner Roundness",yr))),Object.defineProperties(fr,{position:{get:ExpressionPropertyInterface(Lr.p)},rotation:{get:ExpressionPropertyInterface(Lr.r)},points:{get:ExpressionPropertyInterface(Lr.pt)},outerRadius:{get:ExpressionPropertyInterface(Lr.or)},outerRoundness:{get:ExpressionPropertyInterface(Lr.os)},innerRadius:{get:ExpressionPropertyInterface(Lr.ir)},innerRoundness:{get:ExpressionPropertyInterface(Lr.is)},_name:{value:rr.nm}}),fr.mn=rr.mn,fr}function Xt(rr,or,hr){function fr(Br){return rr.p.ix===Br?fr.position:rr.r.ix===Br?fr.roundness:rr.s.ix===Br||Br==="Size"||Br==="ADBE Vector Rect Size"?fr.size:null}var yr=propertyGroupFactory(fr,hr),Lr=or.sh.ty==="tm"?or.sh.prop:or.sh;return fr.propertyIndex=rr.ix,Lr.p.setGroupProperty(PropertyInterface("Position",yr)),Lr.s.setGroupProperty(PropertyInterface("Size",yr)),Lr.r.setGroupProperty(PropertyInterface("Rotation",yr)),Object.defineProperties(fr,{position:{get:ExpressionPropertyInterface(Lr.p)},roundness:{get:ExpressionPropertyInterface(Lr.r)},size:{get:ExpressionPropertyInterface(Lr.s)},_name:{value:rr.nm}}),fr.mn=rr.mn,fr}function Kt(rr,or,hr){function fr(Br){return rr.r.ix===Br||Br==="Round Corners 1"?fr.radius:null}var yr=propertyGroupFactory(fr,hr),Lr=or;return fr.propertyIndex=rr.ix,Lr.rd.setGroupProperty(PropertyInterface("Radius",yr)),Object.defineProperties(fr,{radius:{get:ExpressionPropertyInterface(Lr.rd)},_name:{value:rr.nm}}),fr.mn=rr.mn,fr}function nr(rr,or,hr){function fr(Br){return rr.c.ix===Br||Br==="Copies"?fr.copies:rr.o.ix===Br||Br==="Offset"?fr.offset:null}var yr=propertyGroupFactory(fr,hr),Lr=or;return fr.propertyIndex=rr.ix,Lr.c.setGroupProperty(PropertyInterface("Copies",yr)),Lr.o.setGroupProperty(PropertyInterface("Offset",yr)),Object.defineProperties(fr,{copies:{get:ExpressionPropertyInterface(Lr.c)},offset:{get:ExpressionPropertyInterface(Lr.o)},_name:{value:rr.nm}}),fr.mn=rr.mn,fr}return function(rr,or,hr){var fr;function yr(Lr){if(typeof Lr=="number")return(Lr=Lr===void 0?1:Lr)===0?hr:fr[Lr-1];for(var Br=0,Vr=fr.length;Br<Vr;){if(fr[Br]._name===Lr)return fr[Br];Br+=1}return null}return yr.propertyGroup=propertyGroupFactory(yr,function(){return hr}),fr=o(rr,or,yr.propertyGroup),yr.numProperties=fr.length,yr._name="Contents",yr}}(),TextExpressionInterface=function(o){var i;function s(_){return _==="ADBE Text Document"?s.sourceText:null}return Object.defineProperty(s,"sourceText",{get:function(){o.textProperty.getValue();var _=o.textProperty.currentData.t;return i&&_===i.value||((i=new String(_)).value=_||new String(_),Object.defineProperty(i,"style",{get:function(){return{fillColor:o.textProperty.currentData.fc}}})),i}}),s};function _typeof(o){return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},_typeof(o)}var FootageInterface=(dataInterfaceFactory=function(o){function i(s){return s==="Outline"?i.outlineInterface():null}return i._name="Outline",i.outlineInterface=function(s){var _="",_e=s.getFootageData();function ct(Mt){if(_e[Mt])return _=Mt,_typeof(_e=_e[Mt])==="object"?ct:_e;var Ft=Mt.indexOf(_);if(Ft!==-1){var Ut=parseInt(Mt.substr(Ft+_.length),10);return _typeof(_e=_e[Ut])==="object"?ct:_e}return""}return function(){return _="",_e=s.getFootageData(),ct}}(o),i},function(o){function i(s){return s==="Data"?i.dataInterface:null}return i._name="Data",i.dataInterface=dataInterfaceFactory(o),i}),dataInterfaceFactory,interfaces={layer:LayerExpressionInterface,effects:EffectsExpressionInterface,comp:CompExpressionInterface,shape:ShapeExpressionInterface,text:TextExpressionInterface,footage:FootageInterface};function getInterface(o){return interfaces[o]||null}var expressionHelpers={searchExpressions:function(o,i,s){i.x&&(s.k=!0,s.x=!0,s.initiateExpression=ExpressionManager.initiateExpression,s.effectsSequence.push(s.initiateExpression(o,i,s).bind(s)))},getSpeedAtTime:function(o){var i=this.getValueAtTime(o),s=this.getValueAtTime(o+-.01),_=0;if(i.length){var _e;for(_e=0;_e<i.length;_e+=1)_+=Math.pow(s[_e]-i[_e],2);_=100*Math.sqrt(_)}else _=0;return _},getVelocityAtTime:function(o){if(this.vel!==void 0)return this.vel;var i,s,_=-.001,_e=this.getValueAtTime(o),ct=this.getValueAtTime(o+_);if(_e.length)for(i=createTypedArray("float32",_e.length),s=0;s<_e.length;s+=1)i[s]=(ct[s]-_e[s])/_;else i=(ct-_e)/_;return i},getValueAtTime:function(o){return o*=this.elem.globalData.frameRate,(o-=this.offsetTime)!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<o?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(o,this._cachingAtTime),this._cachingAtTime.lastFrame=o),this._cachingAtTime.value},getStaticValueAtTime:function(){return this.pv},setGroupProperty:function(o){this.propertyGroup=o}};function addPropertyDecorator(){function o(nr,rr,or){if(!this.k||!this.keyframes)return this.pv;nr=nr?nr.toLowerCase():"";var hr,fr,yr,Lr,Br,Vr=this.comp.renderedFrame,Wr=this.keyframes,ro=Wr[Wr.length-1].t;if(Vr<=ro)return this.pv;if(or?fr=ro-(hr=rr?Math.abs(ro-this.elem.comp.globalData.frameRate*rr):Math.max(0,ro-this.elem.data.ip)):((!rr||rr>Wr.length-1)&&(rr=Wr.length-1),hr=ro-(fr=Wr[Wr.length-1-rr].t)),nr==="pingpong"){if(Math.floor((Vr-fr)/hr)%2!=0)return this.getValueAtTime((hr-(Vr-fr)%hr+fr)/this.comp.globalData.frameRate,0)}else{if(nr==="offset"){var no=this.getValueAtTime(fr/this.comp.globalData.frameRate,0),so=this.getValueAtTime(ro/this.comp.globalData.frameRate,0),ko=this.getValueAtTime(((Vr-fr)%hr+fr)/this.comp.globalData.frameRate,0),To=Math.floor((Vr-fr)/hr);if(this.pv.length){for(Lr=(Br=new Array(no.length)).length,yr=0;yr<Lr;yr+=1)Br[yr]=(so[yr]-no[yr])*To+ko[yr];return Br}return(so-no)*To+ko}if(nr==="continue"){var oo=this.getValueAtTime(ro/this.comp.globalData.frameRate,0),No=this.getValueAtTime((ro-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(Lr=(Br=new Array(oo.length)).length,yr=0;yr<Lr;yr+=1)Br[yr]=oo[yr]+(oo[yr]-No[yr])*((Vr-ro)/this.comp.globalData.frameRate)/5e-4;return Br}return oo+(Vr-ro)/.001*(oo-No)}}return this.getValueAtTime(((Vr-fr)%hr+fr)/this.comp.globalData.frameRate,0)}function i(nr,rr,or){if(!this.k)return this.pv;nr=nr?nr.toLowerCase():"";var hr,fr,yr,Lr,Br,Vr=this.comp.renderedFrame,Wr=this.keyframes,ro=Wr[0].t;if(Vr>=ro)return this.pv;if(or?fr=ro+(hr=rr?Math.abs(this.elem.comp.globalData.frameRate*rr):Math.max(0,this.elem.data.op-ro)):((!rr||rr>Wr.length-1)&&(rr=Wr.length-1),hr=(fr=Wr[rr].t)-ro),nr==="pingpong"){if(Math.floor((ro-Vr)/hr)%2==0)return this.getValueAtTime(((ro-Vr)%hr+ro)/this.comp.globalData.frameRate,0)}else{if(nr==="offset"){var no=this.getValueAtTime(ro/this.comp.globalData.frameRate,0),so=this.getValueAtTime(fr/this.comp.globalData.frameRate,0),ko=this.getValueAtTime((hr-(ro-Vr)%hr+ro)/this.comp.globalData.frameRate,0),To=Math.floor((ro-Vr)/hr)+1;if(this.pv.length){for(Lr=(Br=new Array(no.length)).length,yr=0;yr<Lr;yr+=1)Br[yr]=ko[yr]-(so[yr]-no[yr])*To;return Br}return ko-(so-no)*To}if(nr==="continue"){var oo=this.getValueAtTime(ro/this.comp.globalData.frameRate,0),No=this.getValueAtTime((ro+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(Lr=(Br=new Array(oo.length)).length,yr=0;yr<Lr;yr+=1)Br[yr]=oo[yr]+(oo[yr]-No[yr])*(ro-Vr)/.001;return Br}return oo+(oo-No)*(ro-Vr)/.001}}return this.getValueAtTime((hr-((ro-Vr)%hr+ro))/this.comp.globalData.frameRate,0)}function s(nr,rr){if(!this.k)return this.pv;if(nr=.5*(nr||.4),(rr=Math.floor(rr||5))<=1)return this.pv;var or,hr,fr=this.comp.renderedFrame/this.comp.globalData.frameRate,yr=fr-nr,Lr=rr>1?(fr+nr-yr)/(rr-1):1,Br=0,Vr=0;for(or=this.pv.length?createTypedArray("float32",this.pv.length):0;Br<rr;){if(hr=this.getValueAtTime(yr+Br*Lr),this.pv.length)for(Vr=0;Vr<this.pv.length;Vr+=1)or[Vr]+=hr[Vr];else or+=hr;Br+=1}if(this.pv.length)for(Vr=0;Vr<this.pv.length;Vr+=1)or[Vr]/=rr;else or/=rr;return or}function _(nr){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var rr=this._transformCachingAtTime.v;if(rr.cloneFromProps(this.pre.props),this.appliedTransformations<1){var or=this.a.getValueAtTime(nr);rr.translate(-or[0]*this.a.mult,-or[1]*this.a.mult,or[2]*this.a.mult)}if(this.appliedTransformations<2){var hr=this.s.getValueAtTime(nr);rr.scale(hr[0]*this.s.mult,hr[1]*this.s.mult,hr[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var fr=this.sk.getValueAtTime(nr),yr=this.sa.getValueAtTime(nr);rr.skewFromAxis(-fr*this.sk.mult,yr*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var Lr=this.r.getValueAtTime(nr);rr.rotate(-Lr*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var Br=this.rz.getValueAtTime(nr),Vr=this.ry.getValueAtTime(nr),Wr=this.rx.getValueAtTime(nr),ro=this.or.getValueAtTime(nr);rr.rotateZ(-Br*this.rz.mult).rotateY(Vr*this.ry.mult).rotateX(Wr*this.rx.mult).rotateZ(-ro[2]*this.or.mult).rotateY(ro[1]*this.or.mult).rotateX(ro[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var no=this.px.getValueAtTime(nr),so=this.py.getValueAtTime(nr);if(this.data.p.z){var ko=this.pz.getValueAtTime(nr);rr.translate(no*this.px.mult,so*this.py.mult,-ko*this.pz.mult)}else rr.translate(no*this.px.mult,so*this.py.mult,0)}else{var To=this.p.getValueAtTime(nr);rr.translate(To[0]*this.p.mult,To[1]*this.p.mult,-To[2]*this.p.mult)}return rr}function _e(){return this.v.clone(new Matrix)}var ct=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(nr,rr,or){var hr=ct(nr,rr,or);return hr.dynamicProperties.length?hr.getValueAtTime=_.bind(hr):hr.getValueAtTime=_e.bind(hr),hr.setGroupProperty=expressionHelpers.setGroupProperty,hr};var Mt=PropertyFactory.getProp;PropertyFactory.getProp=function(nr,rr,or,hr,fr){var yr=Mt(nr,rr,or,hr,fr);yr.kf?yr.getValueAtTime=expressionHelpers.getValueAtTime.bind(yr):yr.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(yr),yr.setGroupProperty=expressionHelpers.setGroupProperty,yr.loopOut=o,yr.loopIn=i,yr.smooth=s,yr.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(yr),yr.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(yr),yr.numKeys=rr.a===1?rr.k.length:0,yr.propertyIndex=rr.ix;var Lr=0;return or!==0&&(Lr=createTypedArray("float32",rr.a===1?rr.k[0].s.length:rr.k.length)),yr._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:Lr},expressionHelpers.searchExpressions(nr,rr,yr),yr.k&&fr.addDynamicProperty(yr),yr};var Ft=ShapePropertyFactory.getConstructorFunction(),Ut=ShapePropertyFactory.getKeyframedConstructorFunction();function Xt(){}Xt.prototype={vertices:function(nr,rr){this.k&&this.getValue();var or,hr=this.v;rr!==void 0&&(hr=this.getValueAtTime(rr,0));var fr=hr._length,yr=hr[nr],Lr=hr.v,Br=createSizedArray(fr);for(or=0;or<fr;or+=1)Br[or]=nr==="i"||nr==="o"?[yr[or][0]-Lr[or][0],yr[or][1]-Lr[or][1]]:[yr[or][0],yr[or][1]];return Br},points:function(nr){return this.vertices("v",nr)},inTangents:function(nr){return this.vertices("i",nr)},outTangents:function(nr){return this.vertices("o",nr)},isClosed:function(){return this.v.c},pointOnPath:function(nr,rr){var or=this.v;rr!==void 0&&(or=this.getValueAtTime(rr,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(or));for(var hr,fr=this._segmentsLength,yr=fr.lengths,Lr=fr.totalLength*nr,Br=0,Vr=yr.length,Wr=0;Br<Vr;){if(Wr+yr[Br].addedLength>Lr){var ro=Br,no=or.c&&Br===Vr-1?0:Br+1,so=(Lr-Wr)/yr[Br].addedLength;hr=bez.getPointInSegment(or.v[ro],or.v[no],or.o[ro],or.i[no],so,yr[Br]);break}Wr+=yr[Br].addedLength,Br+=1}return hr||(hr=or.c?[or.v[0][0],or.v[0][1]]:[or.v[or._length-1][0],or.v[or._length-1][1]]),hr},vectorOnPath:function(nr,rr,or){nr==1?nr=this.v.c:nr==0&&(nr=.999);var hr=this.pointOnPath(nr,rr),fr=this.pointOnPath(nr+.001,rr),yr=fr[0]-hr[0],Lr=fr[1]-hr[1],Br=Math.sqrt(Math.pow(yr,2)+Math.pow(Lr,2));return Br===0?[0,0]:or==="tangent"?[yr/Br,Lr/Br]:[-Lr/Br,yr/Br]},tangentOnPath:function(nr,rr){return this.vectorOnPath(nr,rr,"tangent")},normalOnPath:function(nr,rr){return this.vectorOnPath(nr,rr,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([Xt],Ft),extendPrototype([Xt],Ut),Ut.prototype.getValueAtTime=function(nr){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),nr*=this.elem.globalData.frameRate,(nr-=this.offsetTime)!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<nr?this._caching.lastIndex:0,this._cachingAtTime.lastTime=nr,this.interpolateShape(nr,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue},Ut.prototype.initiateExpression=ExpressionManager.initiateExpression;var Kt=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(nr,rr,or,hr,fr){var yr=Kt(nr,rr,or,hr,fr);return yr.propertyIndex=rr.ix,yr.lock=!1,or===3?expressionHelpers.searchExpressions(nr,rr.pt,yr):or===4&&expressionHelpers.searchExpressions(nr,rr.ks,yr),yr.k&&nr.addDynamicProperty(yr),yr}}function initialize$1(){addPropertyDecorator()}function addDecorator(){TextProperty.prototype.getExpressionValue=function(o,i){var s=this.calculateExpression(i);if(o.t!==s){var _={};return this.copyData(_,o),_.t=s.toString(),_.__complete=!1,_}return o},TextProperty.prototype.searchProperty=function(){var o=this.searchKeyframes(),i=this.searchExpressions();return this.kf=o||i,this.kf},TextProperty.prototype.searchExpressions=function(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null}}function initialize(){addDecorator()}function SVGComposableEffect(){}SVGComposableEffect.prototype={createMergeNode:function(o,i){var s,_,_e=createNS("feMerge");for(_e.setAttribute("result",o),_=0;_<i.length;_+=1)(s=createNS("feMergeNode")).setAttribute("in",i[_]),_e.appendChild(s),_e.appendChild(s);return _e}};var linearFilterValue="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0";function SVGTintFilter(o,i,s,_,_e){this.filterManager=i;var ct=createNS("feColorMatrix");ct.setAttribute("type","matrix"),ct.setAttribute("color-interpolation-filters","linearRGB"),ct.setAttribute("values",linearFilterValue+" 1 0"),this.linearFilter=ct,ct.setAttribute("result",_+"_tint_1"),o.appendChild(ct),(ct=createNS("feColorMatrix")).setAttribute("type","matrix"),ct.setAttribute("color-interpolation-filters","sRGB"),ct.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),ct.setAttribute("result",_+"_tint_2"),o.appendChild(ct),this.matrixFilter=ct;var Mt=this.createMergeNode(_,[_e,_+"_tint_1",_+"_tint_2"]);o.appendChild(Mt)}function SVGFillFilter(o,i,s,_){this.filterManager=i;var _e=createNS("feColorMatrix");_e.setAttribute("type","matrix"),_e.setAttribute("color-interpolation-filters","sRGB"),_e.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),_e.setAttribute("result",_),o.appendChild(_e),this.matrixFilter=_e}function SVGStrokeEffect(o,i,s){this.initialized=!1,this.filterManager=i,this.elem=s,this.paths=[]}function SVGTritoneFilter(o,i,s,_){this.filterManager=i;var _e=createNS("feColorMatrix");_e.setAttribute("type","matrix"),_e.setAttribute("color-interpolation-filters","linearRGB"),_e.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),o.appendChild(_e);var ct=createNS("feComponentTransfer");ct.setAttribute("color-interpolation-filters","sRGB"),ct.setAttribute("result",_),this.matrixFilter=ct;var Mt=createNS("feFuncR");Mt.setAttribute("type","table"),ct.appendChild(Mt),this.feFuncR=Mt;var Ft=createNS("feFuncG");Ft.setAttribute("type","table"),ct.appendChild(Ft),this.feFuncG=Ft;var Ut=createNS("feFuncB");Ut.setAttribute("type","table"),ct.appendChild(Ut),this.feFuncB=Ut,o.appendChild(ct)}function SVGProLevelsFilter(o,i,s,_){this.filterManager=i;var _e=this.filterManager.effectElements,ct=createNS("feComponentTransfer");(_e[10].p.k||_e[10].p.v!==0||_e[11].p.k||_e[11].p.v!==1||_e[12].p.k||_e[12].p.v!==1||_e[13].p.k||_e[13].p.v!==0||_e[14].p.k||_e[14].p.v!==1)&&(this.feFuncR=this.createFeFunc("feFuncR",ct)),(_e[17].p.k||_e[17].p.v!==0||_e[18].p.k||_e[18].p.v!==1||_e[19].p.k||_e[19].p.v!==1||_e[20].p.k||_e[20].p.v!==0||_e[21].p.k||_e[21].p.v!==1)&&(this.feFuncG=this.createFeFunc("feFuncG",ct)),(_e[24].p.k||_e[24].p.v!==0||_e[25].p.k||_e[25].p.v!==1||_e[26].p.k||_e[26].p.v!==1||_e[27].p.k||_e[27].p.v!==0||_e[28].p.k||_e[28].p.v!==1)&&(this.feFuncB=this.createFeFunc("feFuncB",ct)),(_e[31].p.k||_e[31].p.v!==0||_e[32].p.k||_e[32].p.v!==1||_e[33].p.k||_e[33].p.v!==1||_e[34].p.k||_e[34].p.v!==0||_e[35].p.k||_e[35].p.v!==1)&&(this.feFuncA=this.createFeFunc("feFuncA",ct)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(ct.setAttribute("color-interpolation-filters","sRGB"),o.appendChild(ct)),(_e[3].p.k||_e[3].p.v!==0||_e[4].p.k||_e[4].p.v!==1||_e[5].p.k||_e[5].p.v!==1||_e[6].p.k||_e[6].p.v!==0||_e[7].p.k||_e[7].p.v!==1)&&((ct=createNS("feComponentTransfer")).setAttribute("color-interpolation-filters","sRGB"),ct.setAttribute("result",_),o.appendChild(ct),this.feFuncRComposed=this.createFeFunc("feFuncR",ct),this.feFuncGComposed=this.createFeFunc("feFuncG",ct),this.feFuncBComposed=this.createFeFunc("feFuncB",ct))}function SVGDropShadowEffect(o,i,s,_,_e){var ct=i.container.globalData.renderConfig.filterSize,Mt=i.data.fs||ct;o.setAttribute("x",Mt.x||ct.x),o.setAttribute("y",Mt.y||ct.y),o.setAttribute("width",Mt.width||ct.width),o.setAttribute("height",Mt.height||ct.height),this.filterManager=i;var Ft=createNS("feGaussianBlur");Ft.setAttribute("in","SourceAlpha"),Ft.setAttribute("result",_+"_drop_shadow_1"),Ft.setAttribute("stdDeviation","0"),this.feGaussianBlur=Ft,o.appendChild(Ft);var Ut=createNS("feOffset");Ut.setAttribute("dx","25"),Ut.setAttribute("dy","0"),Ut.setAttribute("in",_+"_drop_shadow_1"),Ut.setAttribute("result",_+"_drop_shadow_2"),this.feOffset=Ut,o.appendChild(Ut);var Xt=createNS("feFlood");Xt.setAttribute("flood-color","#00ff00"),Xt.setAttribute("flood-opacity","1"),Xt.setAttribute("result",_+"_drop_shadow_3"),this.feFlood=Xt,o.appendChild(Xt);var Kt=createNS("feComposite");Kt.setAttribute("in",_+"_drop_shadow_3"),Kt.setAttribute("in2",_+"_drop_shadow_2"),Kt.setAttribute("operator","in"),Kt.setAttribute("result",_+"_drop_shadow_4"),o.appendChild(Kt);var nr=this.createMergeNode(_,[_+"_drop_shadow_4",_e]);o.appendChild(nr)}extendPrototype([SVGComposableEffect],SVGTintFilter),SVGTintFilter.prototype.renderFrame=function(o){if(o||this.filterManager._mdf){var i=this.filterManager.effectElements[0].p.v,s=this.filterManager.effectElements[1].p.v,_=this.filterManager.effectElements[2].p.v/100;this.linearFilter.setAttribute("values",linearFilterValue+" "+_+" 0"),this.matrixFilter.setAttribute("values",s[0]-i[0]+" 0 0 0 "+i[0]+" "+(s[1]-i[1])+" 0 0 0 "+i[1]+" "+(s[2]-i[2])+" 0 0 0 "+i[2]+" 0 0 0 1 0")}},SVGFillFilter.prototype.renderFrame=function(o){if(o||this.filterManager._mdf){var i=this.filterManager.effectElements[2].p.v,s=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+i[0]+" 0 0 0 0 "+i[1]+" 0 0 0 0 "+i[2]+" 0 0 0 "+s+" 0")}},SVGStrokeEffect.prototype.initialize=function(){var o,i,s,_,_e=this.elem.layerElement.children||this.elem.layerElement.childNodes;for(this.filterManager.effectElements[1].p.v===1?(_=this.elem.maskManager.masksProperties.length,s=0):_=1+(s=this.filterManager.effectElements[0].p.v-1),(i=createNS("g")).setAttribute("fill","none"),i.setAttribute("stroke-linecap","round"),i.setAttribute("stroke-dashoffset",1);s<_;s+=1)o=createNS("path"),i.appendChild(o),this.paths.push({p:o,m:s});if(this.filterManager.effectElements[10].p.v===3){var ct=createNS("mask"),Mt=createElementID();ct.setAttribute("id",Mt),ct.setAttribute("mask-type","alpha"),ct.appendChild(i),this.elem.globalData.defs.appendChild(ct);var Ft=createNS("g");for(Ft.setAttribute("mask","url("+getLocationHref()+"#"+Mt+")");_e[0];)Ft.appendChild(_e[0]);this.elem.layerElement.appendChild(Ft),this.masker=ct,i.setAttribute("stroke","#fff")}else if(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2){if(this.filterManager.effectElements[10].p.v===2)for(_e=this.elem.layerElement.children||this.elem.layerElement.childNodes;_e.length;)this.elem.layerElement.removeChild(_e[0]);this.elem.layerElement.appendChild(i),this.elem.layerElement.removeAttribute("mask"),i.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=i},SVGStrokeEffect.prototype.renderFrame=function(o){var i;this.initialized||this.initialize();var s,_,_e=this.paths.length;for(i=0;i<_e;i+=1)if(this.paths[i].m!==-1&&(s=this.elem.maskManager.viewData[this.paths[i].m],_=this.paths[i].p,(o||this.filterManager._mdf||s.prop._mdf)&&_.setAttribute("d",s.lastPath),o||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||s.prop._mdf)){var ct;if(this.filterManager.effectElements[7].p.v!==0||this.filterManager.effectElements[8].p.v!==100){var Mt=.01*Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v),Ft=.01*Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v),Ut=_.getTotalLength();ct="0 0 0 "+Ut*Mt+" ";var Xt,Kt=Ut*(Ft-Mt),nr=1+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01,rr=Math.floor(Kt/nr);for(Xt=0;Xt<rr;Xt+=1)ct+="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01+" ";ct+="0 "+10*Ut+" 0 0"}else ct="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01;_.setAttribute("stroke-dasharray",ct)}if((o||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",2*this.filterManager.effectElements[4].p.v),(o||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2)&&(o||this.filterManager.effectElements[3].p._mdf)){var or=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bmFloor(255*or[0])+","+bmFloor(255*or[1])+","+bmFloor(255*or[2])+")")}},SVGTritoneFilter.prototype.renderFrame=function(o){if(o||this.filterManager._mdf){var i=this.filterManager.effectElements[0].p.v,s=this.filterManager.effectElements[1].p.v,_=this.filterManager.effectElements[2].p.v,_e=_[0]+" "+s[0]+" "+i[0],ct=_[1]+" "+s[1]+" "+i[1],Mt=_[2]+" "+s[2]+" "+i[2];this.feFuncR.setAttribute("tableValues",_e),this.feFuncG.setAttribute("tableValues",ct),this.feFuncB.setAttribute("tableValues",Mt)}},SVGProLevelsFilter.prototype.createFeFunc=function(o,i){var s=createNS(o);return s.setAttribute("type","table"),i.appendChild(s),s},SVGProLevelsFilter.prototype.getTableValue=function(o,i,s,_,_e){for(var ct,Mt,Ft=0,Ut=Math.min(o,i),Xt=Math.max(o,i),Kt=Array.call(null,{length:256}),nr=0,rr=_e-_,or=i-o;Ft<=256;)Mt=(ct=Ft/256)<=Ut?or<0?_e:_:ct>=Xt?or<0?_:_e:_+rr*Math.pow((ct-o)/or,1/s),Kt[nr]=Mt,nr+=1,Ft+=256/255;return Kt.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(o){if(o||this.filterManager._mdf){var i,s=this.filterManager.effectElements;this.feFuncRComposed&&(o||s[3].p._mdf||s[4].p._mdf||s[5].p._mdf||s[6].p._mdf||s[7].p._mdf)&&(i=this.getTableValue(s[3].p.v,s[4].p.v,s[5].p.v,s[6].p.v,s[7].p.v),this.feFuncRComposed.setAttribute("tableValues",i),this.feFuncGComposed.setAttribute("tableValues",i),this.feFuncBComposed.setAttribute("tableValues",i)),this.feFuncR&&(o||s[10].p._mdf||s[11].p._mdf||s[12].p._mdf||s[13].p._mdf||s[14].p._mdf)&&(i=this.getTableValue(s[10].p.v,s[11].p.v,s[12].p.v,s[13].p.v,s[14].p.v),this.feFuncR.setAttribute("tableValues",i)),this.feFuncG&&(o||s[17].p._mdf||s[18].p._mdf||s[19].p._mdf||s[20].p._mdf||s[21].p._mdf)&&(i=this.getTableValue(s[17].p.v,s[18].p.v,s[19].p.v,s[20].p.v,s[21].p.v),this.feFuncG.setAttribute("tableValues",i)),this.feFuncB&&(o||s[24].p._mdf||s[25].p._mdf||s[26].p._mdf||s[27].p._mdf||s[28].p._mdf)&&(i=this.getTableValue(s[24].p.v,s[25].p.v,s[26].p.v,s[27].p.v,s[28].p.v),this.feFuncB.setAttribute("tableValues",i)),this.feFuncA&&(o||s[31].p._mdf||s[32].p._mdf||s[33].p._mdf||s[34].p._mdf||s[35].p._mdf)&&(i=this.getTableValue(s[31].p.v,s[32].p.v,s[33].p.v,s[34].p.v,s[35].p.v),this.feFuncA.setAttribute("tableValues",i))}},extendPrototype([SVGComposableEffect],SVGDropShadowEffect),SVGDropShadowEffect.prototype.renderFrame=function(o){if(o||this.filterManager._mdf){if((o||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),o||this.filterManager.effectElements[0].p._mdf){var i=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(255*i[0]),Math.round(255*i[1]),Math.round(255*i[2])))}if((o||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),o||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var s=this.filterManager.effectElements[3].p.v,_=(this.filterManager.effectElements[2].p.v-90)*degToRads,_e=s*Math.cos(_),ct=s*Math.sin(_);this.feOffset.setAttribute("dx",_e),this.feOffset.setAttribute("dy",ct)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(o,i,s){this.initialized=!1,this.filterManager=i,this.filterElem=o,this.elem=s,s.matteElement=createNS("g"),s.matteElement.appendChild(s.layerElement),s.matteElement.appendChild(s.transformedElement),s.baseElement=s.matteElement}function SVGGaussianBlurEffect(o,i,s,_){o.setAttribute("x","-100%"),o.setAttribute("y","-100%"),o.setAttribute("width","300%"),o.setAttribute("height","300%"),this.filterManager=i;var _e=createNS("feGaussianBlur");_e.setAttribute("result",_),o.appendChild(_e),this.feGaussianBlur=_e}function TransformEffect(){}function SVGTransformEffect(o,i){this.init(i)}function CVTransformEffect(o){this.init(o)}return SVGMatte3Effect.prototype.findSymbol=function(o){for(var i=0,s=_svgMatteSymbols.length;i<s;){if(_svgMatteSymbols[i]===o)return _svgMatteSymbols[i];i+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(o,i){var s=o.layerElement.parentNode;if(s){for(var _,_e=s.children,ct=0,Mt=_e.length;ct<Mt&&_e[ct]!==o.layerElement;)ct+=1;ct<=Mt-2&&(_=_e[ct+1]);var Ft=createNS("use");Ft.setAttribute("href","#"+i),_?s.insertBefore(Ft,_):s.appendChild(Ft)}},SVGMatte3Effect.prototype.setElementAsMask=function(o,i){if(!this.findSymbol(i)){var s=createElementID(),_=createNS("mask");_.setAttribute("id",i.layerId),_.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(i);var _e=o.globalData.defs;_e.appendChild(_);var ct=createNS("symbol");ct.setAttribute("id",s),this.replaceInParent(i,s),ct.appendChild(i.layerElement),_e.appendChild(ct);var Mt=createNS("use");Mt.setAttribute("href","#"+s),_.appendChild(Mt),i.data.hd=!1,i.show()}o.setMatte(i.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var o=this.filterManager.effectElements[0].p.v,i=this.elem.comp.elements,s=0,_=i.length;s<_;)i[s]&&i[s].data.ind===o&&this.setElementAsMask(this.elem,i[s]),s+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()},SVGGaussianBlurEffect.prototype.renderFrame=function(o){if(o||this.filterManager._mdf){var i=.3*this.filterManager.effectElements[0].p.v,s=this.filterManager.effectElements[1].p.v,_=s==3?0:i,_e=s==2?0:i;this.feGaussianBlur.setAttribute("stdDeviation",_+" "+_e);var ct=this.filterManager.effectElements[2].p.v==1?"wrap":"duplicate";this.feGaussianBlur.setAttribute("edgeMode",ct)}},TransformEffect.prototype.init=function(o){this.effectsManager=o,this.type=effectTypes.TRANSFORM_EFFECT,this.matrix=new Matrix,this.opacity=-1,this._mdf=!1,this._opMdf=!1},TransformEffect.prototype.renderFrame=function(o){if(this._opMdf=!1,this._mdf=!1,o||this.effectsManager._mdf){var i=this.effectsManager.effectElements,s=i[0].p.v,_=i[1].p.v,_e=i[2].p.v===1,ct=i[3].p.v,Mt=_e?ct:i[4].p.v,Ft=i[5].p.v,Ut=i[6].p.v,Xt=i[7].p.v;this.matrix.reset(),this.matrix.translate(-s[0],-s[1],s[2]),this.matrix.scale(.01*Mt,.01*ct,1),this.matrix.rotate(-Xt*degToRads),this.matrix.skewFromAxis(-Ft*degToRads,(Ut+90)*degToRads),this.matrix.translate(_[0],_[1],0),this._mdf=!0,this.opacity!==i[8].p.v&&(this.opacity=i[8].p.v,this._opMdf=!0)}},extendPrototype([TransformEffect],SVGTransformEffect),extendPrototype([TransformEffect],CVTransformEffect),registerRenderer("canvas",CanvasRenderer),registerRenderer("html",HybridRenderer),registerRenderer("svg",SVGRenderer),ShapeModifiers.registerModifier("tm",TrimModifier),ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeModifiers.registerModifier("rd",RoundCornersModifier),ShapeModifiers.registerModifier("zz",ZigZagModifier),ShapeModifiers.registerModifier("op",OffsetPathModifier),setExpressionsPlugin(Expressions),setExpressionInterfaces(getInterface),initialize$1(),initialize(),registerEffect$1(20,SVGTintFilter,!0),registerEffect$1(21,SVGFillFilter,!0),registerEffect$1(22,SVGStrokeEffect,!1),registerEffect$1(23,SVGTritoneFilter,!0),registerEffect$1(24,SVGProLevelsFilter,!0),registerEffect$1(25,SVGDropShadowEffect,!0),registerEffect$1(28,SVGMatte3Effect,!1),registerEffect$1(29,SVGGaussianBlurEffect,!0),registerEffect$1(35,SVGTransformEffect,!1),registerEffect(35,CVTransformEffect),lottie},module.exports=factory())})(lottie$1,lottie$1.exports);var lottieExports=lottie$1.exports;getDefaultExportFromCjs(lottieExports);var at=Object.defineProperty,lt=(o,i,s)=>i in o?at(o,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[i]=s,B=(o,i,s)=>lt(o,typeof i!="symbol"?i+"":i,s);const a="",D="[]",G="_",X="none",j=[],bt$1=typeof navigator<"u"&&/Android/i.test(navigator.userAgent),kt$1=typeof requestAnimationFrame<"u"?requestAnimationFrame:setTimeout;function J(o=j,i=G){if(!q(o)||typeof o=="boolean"||H(o)||U(o))throw new Error("Text-mask: convertMaskToPlaceholder: The mask property must be an array.");if(q(o)&&o.indexOf(i)!==-1)throw new Error(`Text-mask: convertMaskToPlaceholder: Placeholder character must not be used as part of the mask. Please specify a character that is not present in your mask as your placeholder character.

The placeholder character that was received is: ${JSON.stringify(i)}

The mask that was received is: ${JSON.stringify(o)}`);return o.map(s=>s instanceof RegExp?i:s).join("")}function nt(o){const i=[];if(!q(o)||typeof o=="boolean"||H(o)||U(o))throw new Error("Text-mask: processCaretTraps: The mask property must be an array.");let s;for(;s=o.indexOf(D),s!==-1;)i.push(s),o.splice(s,1);return{maskWithoutCaretTraps:o,indexes:i}}function q(o){return Array.isArray&&Array.isArray(o)||o instanceof Array}function vt$1(o){return typeof o=="string"||o instanceof String}function Rt(o){return typeof o=="number"&&!isNaN(o)}function $$1(o){return typeof o>"u"||o===null}function H(o){return o!==void 0&&typeof o=="function"}function st(o){return typeof o=="object"&&!("call"in o)}function U(o){return o&&typeof o=="object"&&"mask"in o&&"pipe"in o}function At$1(o){return o!==void 0&&typeof o=="function"}function St$1(o){return o!==void 0}function Pt$1(o){return o!==void 0}function Nt$1(o){return o!==void 0}function It({previousConformedValue:o=a,previousPlaceholder:i=a,currentCaretPosition:s=0,conformedValue:_=a,rawValue:_e,placeholderChar:ct,placeholder:Mt=a,indexesOfPipedChars:Ft=j,caretTrapIndexes:Ut=j}){if(s===0||s===null||!_e.length)return 0;const Xt=_e.length,Kt=o.length,nr=Mt==null?void 0:Mt.length,rr=_.length,or=Xt-Kt,hr=or>0;if(or>1&&!hr&&Kt!==0)return s;let fr=0,yr=!1,Lr="";if(hr&&(o===_||_===Mt))fr=s-or;else{const Br=_.toLowerCase(),Vr=_e.toLowerCase().substr(0,s).split(a).filter(No=>Br.indexOf(No)!==-1);Lr=Vr[Vr.length-1];const Wr=i.substr(0,Vr.length).split(a).filter(No=>No!==ct).length,ro=(Mt==null?void 0:Mt.substr(0,Vr.length).split(a).filter(No=>No!==ct).length)!==Wr,no=i[Vr.length-1]!==void 0&&Mt[Vr.length-2]!==void 0&&i[Vr.length-1]!==ct&&i[Vr.length-1]!==Mt[Vr.length-1]&&i[Vr.length-1]===Mt[Vr.length-2];!hr&&(ro||no)&&Wr>0&&Mt.indexOf(Lr)>-1&&_e[s]!==void 0&&(yr=!0,Lr=_e[s]);const so=Ft.map(No=>Br[No]).filter(No=>No===Lr).length,ko=Vr.filter(No=>No===Lr).length,To=Mt.substr(0,Mt.indexOf(ct)).split(a).filter((No,As)=>No===Lr&&_e[As]!==No).length+ko+so+(yr?1:0);let oo=0;for(let No=0;No<rr&&(fr=No+1,Br[No]===Lr&&oo++,!(oo>=To));No++);}if(hr){let Br=fr;for(let Vr=fr;Vr<=nr;Vr++)if(Mt[Vr]===ct&&(Br=Vr),Mt[Vr]===ct||Ut.indexOf(Vr)!==-1||Vr===nr)return Br}else if(yr){for(let Br=fr-1;Br>=0;Br--)if(_[Br]===Lr||Ut.indexOf(Br)!==-1||Br===0)return Br}else for(let Br=fr;Br>=0;Br--)if(Mt[Br-1]===ct||Ut.indexOf(Br)!==-1||Br===0)return Br}function Lt$1(o=a,i=j,s){if(H(i)&&(i=nt(i=i(o)).maskWithoutCaretTraps),!st(i)||typeof i=="boolean")throw new Error("Text-mask: conformToMask: The mask property must be an array.");const{guide:_=!0,previousConformedValue:_e=a,placeholderChar:ct=G,placeholder:Mt=J(i,ct),currentCaretPosition:Ft=0,keepCharPositions:Ut}=s,Xt=_===!1&&_e!==void 0,Kt=o.length,nr=_e.length,rr=Mt.length,or=i.length,hr=Kt-nr,fr=hr>0,yr=(Ft??0)+(fr?-hr:0),Lr=yr+Math.abs(hr);if(Ut===!0&&!fr){let ro=a;for(let no=yr;no<Lr;no++)Mt[no]===ct&&(ro+=ct);o=o.slice(0,yr)+ro+o.slice(yr,Kt)}const Br=o.split(a).map((ro,no)=>({char:ro,isNew:no>=yr&&no<Lr}));for(let ro=Kt-1;ro>=0;ro--){const{char:no}=Br[ro];no!==ct&&no===Mt[ro>=yr&&nr===or?ro-hr:ro]&&Br.splice(ro,1)}let Vr=a,Wr=!1;e:for(let ro=0;ro<rr;ro++){const no=Mt[ro];if(no===ct){if(Br.length>0)for(;Br.length>0&&Br;){const{char:so,isNew:ko}=Br.shift();if(so===ct&&Xt!==!0){Vr+=ct;continue e}if(i[ro]instanceof RegExp&&i[ro].test(so)){if(Ut===!0&&ko!==!1&&_e!==a&&_!==!1&&fr){const To=Br.length;let oo=null;for(let No=0;No<To;No++){const As=Br[No];if(As.char!==ct&&As.isNew===!1)break;if(As.char===ct){oo=No;break}}oo!==null?(Vr+=so,Br.splice(oo,1)):ro--}else Vr+=so;continue e}Wr=!0}Xt===!1&&(Vr+=Mt.substr(ro,rr));break}Vr+=no}if(Xt&&fr===!1){let ro=null;for(let no=0;no<Vr.length;no++)Mt[no]===ct&&(ro=no);Vr=ro!==null?Vr.substr(0,ro+1):a}return{conformedValue:Vr,meta:{someCharsRejected:Wr}}}function Dt(o){const i={previousConformedValue:"",previousPlaceholder:""};return{state:i,update(s,{inputElement:_,mask:_e,guide:ct,pipe:Mt,placeholderChar:Ft=G,keepCharPositions:Ut=!1,showMask:Xt=!1}=o){if(!(typeof s>"u"&&_!==void 0))throw new Error("Text-mask: createTextMaskInputElement: inputElement is required if there is no rawValue");if((s=_.value)===i.previousConformedValue)return;let Kt,nr;if(U(_e)&&(Mt=_e.pipe,_e=_e.mask),st(_e)&&(Kt=J(_e,Ft)),_e===!1)return;const rr=Bt$1(s),{selectionEnd:or}=_,{previousConformedValue:hr,previousPlaceholder:fr}=i;let yr;if(H(_e)){if(nr=_e(rr),nr===!1)return;const{maskWithoutCaretTraps:ko,indexes:To}=nt(nr);nr=ko,yr=To,Kt=J(nr,Ft)}else nr=_e;const Lr={previousConformedValue:hr,guide:ct,placeholderChar:Ft,pipe:Mt,placeholder:Kt,currentCaretPosition:or,keepCharPositions:Ut},{conformedValue:Br}=Lt$1(rr,nr,Lr),Vr=At$1(Mt);let Wr={value:"",indexesOfPipedChars:[]};if(Vr&&Mt&&(Wr=Mt(Br,{rawValue:rr,mask:nr,...Lr}),St$1(Wr)&&Wr===!1?Wr={value:hr,rejected:!0}:Pt$1(Wr)&&(Wr={value:Wr})),!Nt$1(Wr))throw new Error("Text-mask: createTextMaskInputElement: pipeResults should be an object");const ro=Vr?Wr.value:Br,no=It({previousConformedValue:hr,previousPlaceholder:fr,conformedValue:ro,placeholder:Kt,rawValue:rr,currentCaretPosition:or,placeholderChar:Ft,indexesOfPipedChars:Wr.indexesOfPipedChars??[],caretTrapIndexes:yr}),so=ro===Kt&&no===0?Xt?Kt:a:ro;i.previousConformedValue=so??a,i.previousPlaceholder=Kt??a,_.value!==so&&(_.value=so??a,jt$1(_,no??0))}}}function jt$1(o,i){document.activeElement===o&&(bt$1?kt$1(()=>o.setSelectionRange(i,i,X)):o.setSelectionRange(i,i,X))}function Bt$1(o){if(vt$1(o)||Rt(o))return String(o);if(o==null)return a;throw new Error(`The 'value' provided to Text Mask needs to be a string or a number. The value received was:

 ${JSON.stringify(o)}`)}class it extends React__default.PureComponent{constructor(i){super(i),B(this,"inputElement"),B(this,"textMaskInputElement"),this.setRef=this.setRef.bind(this),this.onBlur=this.onBlur.bind(this),this.onChange=this.onChange.bind(this)}setRef(i){this.inputElement=i}componentDidMount(){this.initTextMask()}componentDidUpdate(i){var s;const{value:_,pipe:_e,mask:ct,guide:Mt,placeholderChar:Ft,showMask:Ut}=this.props,Xt={guide:Mt,placeholderChar:Ft,showMask:Ut},Kt=typeof _e=="function"&&typeof i.pipe=="function"?_e.toString()!==i.pipe.toString():$$1(_e)&&!$$1(i.pipe)||!$$1(_e)&&$$1(i.pipe),nr=ct.toString()!==i.mask.toString(),rr=Object.keys(Xt).some(or=>Xt[or]!==i[or])||nr||Kt;(_!==((s=this.inputElement)==null?void 0:s.value)||rr)&&this.initTextMask()}initTextMask(){const{props:i,props:{value:s}}=this;this.textMaskInputElement=Dt({inputElement:this.inputElement,...i}),this.textMaskInputElement.update(s)}onChange(i){var s;(s=this.textMaskInputElement)==null||s.update(),typeof this.props.onChange=="function"&&this.props.onChange(i)}onBlur(i){typeof this.props.onBlur=="function"&&this.props.onBlur(i)}render(){const{render:i=(rr,or)=>jsxRuntimeExports.jsx("input",{ref:rr,...or}),mask:s,guide:_,pipe:_e,placeholderChar:ct,keepCharPositions:Mt,value:Ft,showMask:Ut,onChange:Xt,onBlur:Kt,...nr}=this.props;return i(this.setRef,{mask:s,onBlur:this.onBlur,onChange:this.onChange,defaultValue:this.props.value,...nr})}}B(it,"defaultProps",{mask:[],render:(o,i)=>jsxRuntimeExports.jsx("input",{ref:o,...i}),type:"text"}),it.defaultProps={mask:[],render:(o,i)=>jsxRuntimeExports.jsx("input",{ref:o,...i}),type:"text"};var __webpack_require__={d:(o,i)=>{for(var s in i)__webpack_require__.o(i,s)&&!__webpack_require__.o(o,s)&&Object.defineProperty(o,s,{enumerable:!0,get:i[s]})},o:(o,i)=>Object.prototype.hasOwnProperty.call(o,i)},__webpack_exports__=globalThis.pdfjsLib={};__webpack_require__.d(__webpack_exports__,{AbortException:()=>AbortException,AnnotationEditorLayer:()=>AnnotationEditorLayer,AnnotationEditorParamsType:()=>AnnotationEditorParamsType,AnnotationEditorType:()=>AnnotationEditorType,AnnotationEditorUIManager:()=>AnnotationEditorUIManager,AnnotationLayer:()=>AnnotationLayer$1,AnnotationMode:()=>AnnotationMode,CMapCompressionType:()=>CMapCompressionType,ColorPicker:()=>ColorPicker,DOMSVGFactory:()=>DOMSVGFactory,DrawLayer:()=>DrawLayer,FeatureTest:()=>util_FeatureTest,GlobalWorkerOptions:()=>GlobalWorkerOptions,ImageKind:()=>util_ImageKind,InvalidPDFException:()=>InvalidPDFException,MissingPDFException:()=>MissingPDFException,OPS:()=>OPS,Outliner:()=>Outliner,PDFDataRangeTransport:()=>PDFDataRangeTransport$1,PDFDateString:()=>PDFDateString,PDFWorker:()=>PDFWorker,PasswordResponses:()=>PasswordResponses$1,PermissionFlag:()=>PermissionFlag,PixelsPerInch:()=>PixelsPerInch,RenderingCancelledException:()=>RenderingCancelledException,TextLayer:()=>TextLayer$1,UnexpectedResponseException:()=>UnexpectedResponseException,Util:()=>Util,VerbosityLevel:()=>VerbosityLevel,XfaLayer:()=>XfaLayer,build:()=>build,createValidAbsoluteUrl:()=>createValidAbsoluteUrl,fetchData:()=>fetchData,getDocument:()=>getDocument,getFilenameFromUrl:()=>getFilenameFromUrl,getPdfFilenameFromUrl:()=>getPdfFilenameFromUrl,getXfaPageViewport:()=>getXfaPageViewport,isDataScheme:()=>isDataScheme,isPdfFile:()=>isPdfFile,noContextMenu:()=>noContextMenu,normalizeUnicode:()=>normalizeUnicode,renderTextLayer:()=>renderTextLayer,setLayerDimensions:()=>setLayerDimensions,shadow:()=>shadow,updateTextLayer:()=>updateTextLayer,version:()=>version});const isNodeJS=!(typeof process!="object"||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&process.type!=="browser"),IDENTITY_MATRIX=[1,0,0,1,0,0],FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],MAX_IMAGE_SIZE_TO_CACHE=1e7,LINE_FACTOR=1.35,RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},AnnotationEditorPrefix="pdfjs_internal_editor_",AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},AnnotationEditorParamsType={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},util_ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},VerbosityLevel={ERRORS:0,WARNINGS:1,INFOS:5},CMapCompressionType={NONE:0,BINARY:1},OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},PasswordResponses$1={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let verbosity=VerbosityLevel.WARNINGS;function setVerbosityLevel(o){Number.isInteger(o)&&(verbosity=o)}function getVerbosityLevel(){return verbosity}function info(o){verbosity>=VerbosityLevel.INFOS&&console.log(`Info: ${o}`)}function warn(o){verbosity>=VerbosityLevel.WARNINGS&&console.log(`Warning: ${o}`)}function unreachable(o){throw new Error(o)}function assert(o,i){o||unreachable(i)}function _isValidProtocol(o){switch(o==null?void 0:o.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function createValidAbsoluteUrl(o,i=null,s=null){if(!o)return null;try{if(s&&typeof o=="string"){if(s.addDefaultProtocol&&o.startsWith("www.")){const _e=o.match(/\./g);(_e==null?void 0:_e.length)>=2&&(o=`http://${o}`)}if(s.tryConvertEncoding)try{o=stringToUTF8String(o)}catch{}}const _=i?new URL(o,i):new URL(o);if(_isValidProtocol(_))return _}catch{}return null}function shadow(o,i,s,_=!1){return Object.defineProperty(o,i,{value:s,enumerable:!_,configurable:!0,writable:!1}),s}const BaseException=function(){function o(i,s){this.constructor===o&&unreachable("Cannot initialize BaseException."),this.message=i,this.name=s}return o.prototype=new Error,o.constructor=o,o}();class PasswordException extends BaseException{constructor(i,s){super(i,"PasswordException"),this.code=s}}class UnknownErrorException extends BaseException{constructor(i,s){super(i,"UnknownErrorException"),this.details=s}}class InvalidPDFException extends BaseException{constructor(i){super(i,"InvalidPDFException")}}class MissingPDFException extends BaseException{constructor(i){super(i,"MissingPDFException")}}class UnexpectedResponseException extends BaseException{constructor(i,s){super(i,"UnexpectedResponseException"),this.status=s}}class FormatError extends BaseException{constructor(i){super(i,"FormatError")}}class AbortException extends BaseException{constructor(i){super(i,"AbortException")}}function bytesToString(o){typeof o=="object"&&(o==null?void 0:o.length)!==void 0||unreachable("Invalid argument for bytesToString");const i=o.length,s=8192;if(i<s)return String.fromCharCode.apply(null,o);const _=[];for(let _e=0;_e<i;_e+=s){const ct=Math.min(_e+s,i),Mt=o.subarray(_e,ct);_.push(String.fromCharCode.apply(null,Mt))}return _.join("")}function stringToBytes(o){typeof o!="string"&&unreachable("Invalid argument for stringToBytes");const i=o.length,s=new Uint8Array(i);for(let _=0;_<i;++_)s[_]=255&o.charCodeAt(_);return s}function string32(o){return String.fromCharCode(o>>24&255,o>>16&255,o>>8&255,255&o)}function objectFromMap(o){const i=Object.create(null);for(const[s,_]of o)i[s]=_;return i}function isLittleEndian(){const o=new Uint8Array(4);return o[0]=1,new Uint32Array(o.buffer,0,1)[0]===1}function isEvalSupported(){try{return new Function(""),!0}catch{return!1}}class util_FeatureTest{static get isLittleEndian(){return shadow(this,"isLittleEndian",isLittleEndian())}static get isEvalSupported(){return shadow(this,"isEvalSupported",isEvalSupported())}static get isOffscreenCanvasSupported(){return shadow(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?shadow(this,"platform",{isMac:navigator.platform.includes("Mac")}):shadow(this,"platform",{isMac:!1})}static get isCSSRoundSupported(){var i,s;return shadow(this,"isCSSRoundSupported",(s=(i=globalThis.CSS)==null?void 0:i.supports)==null?void 0:s.call(i,"width: round(1.5px, 1px)"))}}const hexNumbers=Array.from(Array(256).keys(),o=>o.toString(16).padStart(2,"0"));var w8,$fe,Ome;class Util{static makeHexColor(i,s,_){return`#${hexNumbers[i]}${hexNumbers[s]}${hexNumbers[_]}`}static scaleMinMax(i,s){let _;i[0]?(i[0]<0&&(_=s[0],s[0]=s[2],s[2]=_),s[0]*=i[0],s[2]*=i[0],i[3]<0&&(_=s[1],s[1]=s[3],s[3]=_),s[1]*=i[3],s[3]*=i[3]):(_=s[0],s[0]=s[1],s[1]=_,_=s[2],s[2]=s[3],s[3]=_,i[1]<0&&(_=s[1],s[1]=s[3],s[3]=_),s[1]*=i[1],s[3]*=i[1],i[2]<0&&(_=s[0],s[0]=s[2],s[2]=_),s[0]*=i[2],s[2]*=i[2]),s[0]+=i[4],s[1]+=i[5],s[2]+=i[4],s[3]+=i[5]}static transform(i,s){return[i[0]*s[0]+i[2]*s[1],i[1]*s[0]+i[3]*s[1],i[0]*s[2]+i[2]*s[3],i[1]*s[2]+i[3]*s[3],i[0]*s[4]+i[2]*s[5]+i[4],i[1]*s[4]+i[3]*s[5]+i[5]]}static applyTransform(i,s){return[i[0]*s[0]+i[1]*s[2]+s[4],i[0]*s[1]+i[1]*s[3]+s[5]]}static applyInverseTransform(i,s){const _=s[0]*s[3]-s[1]*s[2];return[(i[0]*s[3]-i[1]*s[2]+s[2]*s[5]-s[4]*s[3])/_,(-i[0]*s[1]+i[1]*s[0]+s[4]*s[1]-s[5]*s[0])/_]}static getAxialAlignedBoundingBox(i,s){const _=this.applyTransform(i,s),_e=this.applyTransform(i.slice(2,4),s),ct=this.applyTransform([i[0],i[3]],s),Mt=this.applyTransform([i[2],i[1]],s);return[Math.min(_[0],_e[0],ct[0],Mt[0]),Math.min(_[1],_e[1],ct[1],Mt[1]),Math.max(_[0],_e[0],ct[0],Mt[0]),Math.max(_[1],_e[1],ct[1],Mt[1])]}static inverseTransform(i){const s=i[0]*i[3]-i[1]*i[2];return[i[3]/s,-i[1]/s,-i[2]/s,i[0]/s,(i[2]*i[5]-i[4]*i[3])/s,(i[4]*i[1]-i[5]*i[0])/s]}static singularValueDecompose2dScale(i){const s=[i[0],i[2],i[1],i[3]],_=i[0]*s[0]+i[1]*s[2],_e=i[0]*s[1]+i[1]*s[3],ct=i[2]*s[0]+i[3]*s[2],Mt=i[2]*s[1]+i[3]*s[3],Ft=(_+Mt)/2,Ut=Math.sqrt((_+Mt)**2-4*(_*Mt-ct*_e))/2,Xt=Ft+Ut||1,Kt=Ft-Ut||1;return[Math.sqrt(Xt),Math.sqrt(Kt)]}static normalizeRect(i){const s=i.slice(0);return i[0]>i[2]&&(s[0]=i[2],s[2]=i[0]),i[1]>i[3]&&(s[1]=i[3],s[3]=i[1]),s}static intersect(i,s){const _=Math.max(Math.min(i[0],i[2]),Math.min(s[0],s[2])),_e=Math.min(Math.max(i[0],i[2]),Math.max(s[0],s[2]));if(_>_e)return null;const ct=Math.max(Math.min(i[1],i[3]),Math.min(s[1],s[3])),Mt=Math.min(Math.max(i[1],i[3]),Math.max(s[1],s[3]));return ct>Mt?null:[_,ct,_e,Mt]}static bezierBoundingBox(i,s,_,_e,ct,Mt,Ft,Ut,Xt){return Xt?(Xt[0]=Math.min(Xt[0],i,Ft),Xt[1]=Math.min(Xt[1],s,Ut),Xt[2]=Math.max(Xt[2],i,Ft),Xt[3]=Math.max(Xt[3],s,Ut)):Xt=[Math.min(i,Ft),Math.min(s,Ut),Math.max(i,Ft),Math.max(s,Ut)],Nu(this,w8,Ome).call(this,i,_,ct,Ft,s,_e,Mt,Ut,3*(3*(_-ct)-i+Ft),6*(i-2*_+ct),3*(_-i),Xt),Nu(this,w8,Ome).call(this,i,_,ct,Ft,s,_e,Mt,Ut,3*(3*(_e-Mt)-s+Ut),6*(s-2*_e+Mt),3*(_e-s),Xt),Xt}}w8=new WeakSet,$fe=function(i,s,_,_e,ct,Mt,Ft,Ut,Xt,Kt){if(Xt<=0||Xt>=1)return;const nr=1-Xt,rr=Xt*Xt,or=rr*Xt,hr=nr*(nr*(nr*i+3*Xt*s)+3*rr*_)+or*_e,fr=nr*(nr*(nr*ct+3*Xt*Mt)+3*rr*Ft)+or*Ut;Kt[0]=Math.min(Kt[0],hr),Kt[1]=Math.min(Kt[1],fr),Kt[2]=Math.max(Kt[2],hr),Kt[3]=Math.max(Kt[3],fr)},Ome=function(i,s,_,_e,ct,Mt,Ft,Ut,Xt,Kt,nr,rr){if(Math.abs(Xt)<1e-12)return void(Math.abs(Kt)>=1e-12&&Nu(this,w8,$fe).call(this,i,s,_,_e,ct,Mt,Ft,Ut,-nr/Kt,rr));const or=Kt**2-4*nr*Xt;if(or<0)return;const hr=Math.sqrt(or),fr=2*Xt;Nu(this,w8,$fe).call(this,i,s,_,_e,ct,Mt,Ft,Ut,(-Kt+hr)/fr,rr),Nu(this,w8,$fe).call(this,i,s,_,_e,ct,Mt,Ft,Ut,(-Kt-hr)/fr,rr)},Ku(Util,w8);function stringToUTF8String(o){return decodeURIComponent(escape(o))}let NormalizeRegex=null,NormalizationMap=null;function normalizeUnicode(o){return NormalizeRegex||(NormalizeRegex=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,NormalizationMap=new Map([["ﬅ","ſt"]])),o.replaceAll(NormalizeRegex,(i,s,_)=>s?s.normalize("NFKC"):NormalizationMap.get(_))}function getUuid(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const o=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(o);else for(let i=0;i<32;i++)o[i]=Math.floor(255*Math.random());return bytesToString(o)}const AnnotationPrefix="pdfjs_internal_id_",FontRenderOps={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};class BaseFilterFactory{constructor(){this.constructor===BaseFilterFactory&&unreachable("Cannot initialize BaseFilterFactory.")}addFilter(i){return"none"}addHCMFilter(i,s){return"none"}addAlphaFilter(i){return"none"}addLuminosityFilter(i){return"none"}addHighlightHCMFilter(i,s,_,_e,ct){return"none"}destroy(i=!1){}}var Ode;const Rge=class Rge{constructor({enableHWA:i=!1}={}){Ku(this,Ode,!1);this.constructor===Rge&&unreachable("Cannot initialize BaseCanvasFactory."),ku(this,Ode,i)}create(i,s){if(i<=0||s<=0)throw new Error("Invalid canvas size");const _=this._createCanvas(i,s);return{canvas:_,context:_.getContext("2d",{willReadFrequently:!to(this,Ode)})}}reset(i,s,_){if(!i.canvas)throw new Error("Canvas is not specified");if(s<=0||_<=0)throw new Error("Invalid canvas size");i.canvas.width=s,i.canvas.height=_}destroy(i){if(!i.canvas)throw new Error("Canvas is not specified");i.canvas.width=0,i.canvas.height=0,i.canvas=null,i.context=null}_createCanvas(i,s){unreachable("Abstract method `_createCanvas` called.")}};Ode=new WeakMap;let BaseCanvasFactory=Rge;class BaseCMapReaderFactory{constructor({baseUrl:i=null,isCompressed:s=!0}){this.constructor===BaseCMapReaderFactory&&unreachable("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=i,this.isCompressed=s}async fetch({name:i}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!i)throw new Error("CMap name must be specified.");const s=this.baseUrl+i+(this.isCompressed?".bcmap":""),_=this.isCompressed?CMapCompressionType.BINARY:CMapCompressionType.NONE;return this._fetchData(s,_).catch(_e=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${s}`)})}_fetchData(i,s){unreachable("Abstract method `_fetchData` called.")}}class BaseStandardFontDataFactory{constructor({baseUrl:i=null}){this.constructor===BaseStandardFontDataFactory&&unreachable("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=i}async fetch({filename:i}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!i)throw new Error("Font filename must be specified.");const s=`${this.baseUrl}${i}`;return this._fetchData(s).catch(_=>{throw new Error(`Unable to load font data at: ${s}`)})}_fetchData(i){unreachable("Abstract method `_fetchData` called.")}}class BaseSVGFactory{constructor(){this.constructor===BaseSVGFactory&&unreachable("Cannot initialize BaseSVGFactory.")}create(i,s,_=!1){if(i<=0||s<=0)throw new Error("Invalid SVG dimensions");const _e=this._createSVG("svg:svg");return _e.setAttribute("version","1.1"),_||(_e.setAttribute("width",`${i}px`),_e.setAttribute("height",`${s}px`)),_e.setAttribute("preserveAspectRatio","none"),_e.setAttribute("viewBox",`0 0 ${i} ${s}`),_e}createElement(i){if(typeof i!="string")throw new Error("Invalid SVG element type");return this._createSVG(i)}_createSVG(i){unreachable("Abstract method `_createSVG` called.")}}const SVG_NS="http://www.w3.org/2000/svg",gG=class gG{};vy(gG,"CSS",96),vy(gG,"PDF",72),vy(gG,"PDF_TO_CSS_UNITS",gG.CSS/gG.PDF);let PixelsPerInch=gG;var vG,SC,GC,O0,Kfe,bG,n1,b0,Cle,_le,Cfe,t1e,Fme,Ile,Ede,Sde,Lme,$de;class DOMFilterFactory extends BaseFilterFactory{constructor({docId:s,ownerDocument:_=globalThis.document}={}){super();Ku(this,n1);Ku(this,vG);Ku(this,SC);Ku(this,GC);Ku(this,O0);Ku(this,Kfe);Ku(this,bG,0);ku(this,GC,s),ku(this,O0,_)}addFilter(s){if(!s)return"none";let _=to(this,n1,b0).get(s);if(_)return _;const[_e,ct,Mt]=Nu(this,n1,Cfe).call(this,s),Ft=s.length===1?_e:`${_e}${ct}${Mt}`;if(_=to(this,n1,b0).get(Ft),_)return to(this,n1,b0).set(s,_),_;const Ut=`g_${to(this,GC)}_transfer_map_${B0(this,bG)._++}`,Xt=`url(#${Ut})`;to(this,n1,b0).set(s,Xt),to(this,n1,b0).set(Ft,Xt);const Kt=Nu(this,n1,Ile).call(this,Ut);return Nu(this,n1,Sde).call(this,_e,ct,Mt,Kt),Xt}addHCMFilter(s,_){var hr;const _e=`${s}-${_}`,ct="base";let Mt=to(this,n1,Cle).get(ct);if((Mt==null?void 0:Mt.key)===_e||(Mt?((hr=Mt.filter)==null||hr.remove(),Mt.key=_e,Mt.url="none",Mt.filter=null):(Mt={key:_e,url:"none",filter:null},to(this,n1,Cle).set(ct,Mt)),!s||!_))return Mt.url;const Ft=Nu(this,n1,$de).call(this,s);s=Util.makeHexColor(...Ft);const Ut=Nu(this,n1,$de).call(this,_);if(_=Util.makeHexColor(...Ut),to(this,n1,_le).style.color="",s==="#000000"&&_==="#ffffff"||s===_)return Mt.url;const Xt=new Array(256);for(let fr=0;fr<=255;fr++){const yr=fr/255;Xt[fr]=yr<=.03928?yr/12.92:((yr+.055)/1.055)**2.4}const Kt=Xt.join(","),nr=`g_${to(this,GC)}_hcm_filter`,rr=Mt.filter=Nu(this,n1,Ile).call(this,nr);Nu(this,n1,Sde).call(this,Kt,Kt,Kt,rr),Nu(this,n1,Fme).call(this,rr);const or=(fr,yr)=>{const Lr=Ft[fr]/255,Br=Ut[fr]/255,Vr=new Array(yr+1);for(let Wr=0;Wr<=yr;Wr++)Vr[Wr]=Lr+Wr/yr*(Br-Lr);return Vr.join(",")};return Nu(this,n1,Sde).call(this,or(0,5),or(1,5),or(2,5),rr),Mt.url=`url(#${nr})`,Mt.url}addAlphaFilter(s){let _=to(this,n1,b0).get(s);if(_)return _;const[_e]=Nu(this,n1,Cfe).call(this,[s]),ct=`alpha_${_e}`;if(_=to(this,n1,b0).get(ct),_)return to(this,n1,b0).set(s,_),_;const Mt=`g_${to(this,GC)}_alpha_map_${B0(this,bG)._++}`,Ft=`url(#${Mt})`;to(this,n1,b0).set(s,Ft),to(this,n1,b0).set(ct,Ft);const Ut=Nu(this,n1,Ile).call(this,Mt);return Nu(this,n1,Lme).call(this,_e,Ut),Ft}addLuminosityFilter(s){let _,_e,ct=to(this,n1,b0).get(s||"luminosity");if(ct)return ct;if(s?([_]=Nu(this,n1,Cfe).call(this,[s]),_e=`luminosity_${_}`):_e="luminosity",ct=to(this,n1,b0).get(_e),ct)return to(this,n1,b0).set(s,ct),ct;const Mt=`g_${to(this,GC)}_luminosity_map_${B0(this,bG)._++}`,Ft=`url(#${Mt})`;to(this,n1,b0).set(s,Ft),to(this,n1,b0).set(_e,Ft);const Ut=Nu(this,n1,Ile).call(this,Mt);return Nu(this,n1,t1e).call(this,Ut),s&&Nu(this,n1,Lme).call(this,_,Ut),Ft}addHighlightHCMFilter(s,_,_e,ct,Mt){var Br;const Ft=`${_}-${_e}-${ct}-${Mt}`;let Ut=to(this,n1,Cle).get(s);if((Ut==null?void 0:Ut.key)===Ft||(Ut?((Br=Ut.filter)==null||Br.remove(),Ut.key=Ft,Ut.url="none",Ut.filter=null):(Ut={key:Ft,url:"none",filter:null},to(this,n1,Cle).set(s,Ut)),!_||!_e))return Ut.url;const[Xt,Kt]=[_,_e].map(Nu(this,n1,$de).bind(this));let nr=Math.round(.2126*Xt[0]+.7152*Xt[1]+.0722*Xt[2]),rr=Math.round(.2126*Kt[0]+.7152*Kt[1]+.0722*Kt[2]),[or,hr]=[ct,Mt].map(Nu(this,n1,$de).bind(this));rr<nr&&([nr,rr,or,hr]=[rr,nr,hr,or]),to(this,n1,_le).style.color="";const fr=(Vr,Wr,ro)=>{const no=new Array(256),so=(rr-nr)/ro,ko=Vr/255,To=(Wr-Vr)/(255*ro);let oo=0;for(let No=0;No<=ro;No++){const As=Math.round(nr+No*so),Ks=ko+No*To;for(let vu=oo;vu<=As;vu++)no[vu]=Ks;oo=As+1}for(let No=oo;No<256;No++)no[No]=no[oo-1];return no.join(",")},yr=`g_${to(this,GC)}_hcm_${s}_filter`,Lr=Ut.filter=Nu(this,n1,Ile).call(this,yr);return Nu(this,n1,Fme).call(this,Lr),Nu(this,n1,Sde).call(this,fr(or[0],hr[0],5),fr(or[1],hr[1],5),fr(or[2],hr[2],5),Lr),Ut.url=`url(#${yr})`,Ut.url}destroy(s=!1){s&&to(this,n1,Cle).size!==0||(to(this,SC)&&(to(this,SC).parentNode.parentNode.remove(),ku(this,SC,null)),to(this,vG)&&(to(this,vG).clear(),ku(this,vG,null)),ku(this,bG,0))}}vG=new WeakMap,SC=new WeakMap,GC=new WeakMap,O0=new WeakMap,Kfe=new WeakMap,bG=new WeakMap,n1=new WeakSet,b0=function(){return to(this,vG)||ku(this,vG,new Map)},Cle=function(){return to(this,Kfe)||ku(this,Kfe,new Map)},_le=function(){if(!to(this,SC)){const s=to(this,O0).createElement("div"),{style:_}=s;_.visibility="hidden",_.contain="strict",_.width=_.height=0,_.position="absolute",_.top=_.left=0,_.zIndex=-1;const _e=to(this,O0).createElementNS(SVG_NS,"svg");_e.setAttribute("width",0),_e.setAttribute("height",0),ku(this,SC,to(this,O0).createElementNS(SVG_NS,"defs")),s.append(_e),_e.append(to(this,SC)),to(this,O0).body.append(s)}return to(this,SC)},Cfe=function(s){if(s.length===1){const Xt=s[0],Kt=new Array(256);for(let rr=0;rr<256;rr++)Kt[rr]=Xt[rr]/255;const nr=Kt.join(",");return[nr,nr,nr]}const[_,_e,ct]=s,Mt=new Array(256),Ft=new Array(256),Ut=new Array(256);for(let Xt=0;Xt<256;Xt++)Mt[Xt]=_[Xt]/255,Ft[Xt]=_e[Xt]/255,Ut[Xt]=ct[Xt]/255;return[Mt.join(","),Ft.join(","),Ut.join(",")]},t1e=function(s){const _=to(this,O0).createElementNS(SVG_NS,"feColorMatrix");_.setAttribute("type","matrix"),_.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),s.append(_)},Fme=function(s){const _=to(this,O0).createElementNS(SVG_NS,"feColorMatrix");_.setAttribute("type","matrix"),_.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),s.append(_)},Ile=function(s){const _=to(this,O0).createElementNS(SVG_NS,"filter");return _.setAttribute("color-interpolation-filters","sRGB"),_.setAttribute("id",s),to(this,n1,_le).append(_),_},Ede=function(s,_,_e){const ct=to(this,O0).createElementNS(SVG_NS,_);ct.setAttribute("type","discrete"),ct.setAttribute("tableValues",_e),s.append(ct)},Sde=function(s,_,_e,ct){const Mt=to(this,O0).createElementNS(SVG_NS,"feComponentTransfer");ct.append(Mt),Nu(this,n1,Ede).call(this,Mt,"feFuncR",s),Nu(this,n1,Ede).call(this,Mt,"feFuncG",_),Nu(this,n1,Ede).call(this,Mt,"feFuncB",_e)},Lme=function(s,_){const _e=to(this,O0).createElementNS(SVG_NS,"feComponentTransfer");_.append(_e),Nu(this,n1,Ede).call(this,_e,"feFuncA",s)},$de=function(s){return to(this,n1,_le).style.color=s,getRGB(getComputedStyle(to(this,n1,_le)).getPropertyValue("color"))};class DOMCanvasFactory extends BaseCanvasFactory{constructor({ownerDocument:i=globalThis.document,enableHWA:s=!1}={}){super({enableHWA:s}),this._document=i}_createCanvas(i,s){const _=this._document.createElement("canvas");return _.width=i,_.height=s,_}}async function fetchData(o,i="text"){if(isValidFetchUrl(o,document.baseURI)){const s=await fetch(o);if(!s.ok)throw new Error(s.statusText);switch(i){case"arraybuffer":return s.arrayBuffer();case"blob":return s.blob();case"json":return s.json()}return s.text()}return new Promise((s,_)=>{const _e=new XMLHttpRequest;_e.open("GET",o,!0),_e.responseType=i,_e.onreadystatechange=()=>{if(_e.readyState===XMLHttpRequest.DONE)if(_e.status!==200&&_e.status!==0)_(new Error(_e.statusText));else{switch(i){case"arraybuffer":case"blob":case"json":return void s(_e.response)}s(_e.responseText)}},_e.send(null)})}class DOMCMapReaderFactory extends BaseCMapReaderFactory{_fetchData(i,s){return fetchData(i,this.isCompressed?"arraybuffer":"text").then(_=>({cMapData:_ instanceof ArrayBuffer?new Uint8Array(_):stringToBytes(_),compressionType:s}))}}class DOMStandardFontDataFactory extends BaseStandardFontDataFactory{_fetchData(i){return fetchData(i,"arraybuffer").then(s=>new Uint8Array(s))}}class DOMSVGFactory extends BaseSVGFactory{_createSVG(i){return document.createElementNS(SVG_NS,i)}}class PageViewport{constructor({viewBox:i,scale:s,rotation:_,offsetX:_e=0,offsetY:ct=0,dontFlip:Mt=!1}){this.viewBox=i,this.scale=s,this.rotation=_,this.offsetX=_e,this.offsetY=ct;const Ft=(i[2]+i[0])/2,Ut=(i[3]+i[1])/2;let Xt,Kt,nr,rr,or,hr,fr,yr;switch((_%=360)<0&&(_+=360),_){case 180:Xt=-1,Kt=0,nr=0,rr=1;break;case 90:Xt=0,Kt=1,nr=1,rr=0;break;case 270:Xt=0,Kt=-1,nr=-1,rr=0;break;case 0:Xt=1,Kt=0,nr=0,rr=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}Mt&&(nr=-nr,rr=-rr),Xt===0?(or=Math.abs(Ut-i[1])*s+_e,hr=Math.abs(Ft-i[0])*s+ct,fr=(i[3]-i[1])*s,yr=(i[2]-i[0])*s):(or=Math.abs(Ft-i[0])*s+_e,hr=Math.abs(Ut-i[1])*s+ct,fr=(i[2]-i[0])*s,yr=(i[3]-i[1])*s),this.transform=[Xt*s,Kt*s,nr*s,rr*s,or-Xt*s*Ft-nr*s*Ut,hr-Kt*s*Ft-rr*s*Ut],this.width=fr,this.height=yr}get rawDims(){const{viewBox:i}=this;return shadow(this,"rawDims",{pageWidth:i[2]-i[0],pageHeight:i[3]-i[1],pageX:i[0],pageY:i[1]})}clone({scale:i=this.scale,rotation:s=this.rotation,offsetX:_=this.offsetX,offsetY:_e=this.offsetY,dontFlip:ct=!1}={}){return new PageViewport({viewBox:this.viewBox.slice(),scale:i,rotation:s,offsetX:_,offsetY:_e,dontFlip:ct})}convertToViewportPoint(i,s){return Util.applyTransform([i,s],this.transform)}convertToViewportRectangle(i){const s=Util.applyTransform([i[0],i[1]],this.transform),_=Util.applyTransform([i[2],i[3]],this.transform);return[s[0],s[1],_[0],_[1]]}convertToPdfPoint(i,s){return Util.applyInverseTransform([i,s],this.transform)}}class RenderingCancelledException extends BaseException{constructor(i,s=0){super(i,"RenderingCancelledException"),this.extraDelay=s}}function isDataScheme(o){const i=o.length;let s=0;for(;s<i&&o[s].trim()==="";)s++;return o.substring(s,s+5).toLowerCase()==="data:"}function isPdfFile(o){return typeof o=="string"&&/\.pdf$/i.test(o)}function getFilenameFromUrl(o){return[o]=o.split(/[#?]/,1),o.substring(o.lastIndexOf("/")+1)}function getPdfFilenameFromUrl(o,i="document.pdf"){if(typeof o!="string")return i;if(isDataScheme(o))return warn('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),i;const s=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,_=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(o);let _e=s.exec(_[1])||s.exec(_[2])||s.exec(_[3]);if(_e&&(_e=_e[0],_e.includes("%")))try{_e=s.exec(decodeURIComponent(_e))[0]}catch{}return _e||i}class StatTimer{constructor(){vy(this,"started",Object.create(null));vy(this,"times",[])}time(i){i in this.started&&warn(`Timer is already running for ${i}`),this.started[i]=Date.now()}timeEnd(i){i in this.started||warn(`Timer has not been started for ${i}`),this.times.push({name:i,start:this.started[i],end:Date.now()}),delete this.started[i]}toString(){const i=[];let s=0;for(const{name:_}of this.times)s=Math.max(_.length,s);for(const{name:_,start:_e,end:ct}of this.times)i.push(`${_.padEnd(s)} ${ct-_e}ms
`);return i.join("")}}function isValidFetchUrl(o,i){try{const{protocol:s}=i?new URL(o,i):new URL(o);return s==="http:"||s==="https:"}catch{return!1}}function noContextMenu(o){o.preventDefault()}function deprecated(o){console.log("Deprecated API usage: "+o)}let pdfDateStringRegex;class PDFDateString{static toDateObject(i){if(!i||typeof i!="string")return null;pdfDateStringRegex||(pdfDateStringRegex=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const s=pdfDateStringRegex.exec(i);if(!s)return null;const _=parseInt(s[1],10);let _e=parseInt(s[2],10);_e=_e>=1&&_e<=12?_e-1:0;let ct=parseInt(s[3],10);ct=ct>=1&&ct<=31?ct:1;let Mt=parseInt(s[4],10);Mt=Mt>=0&&Mt<=23?Mt:0;let Ft=parseInt(s[5],10);Ft=Ft>=0&&Ft<=59?Ft:0;let Ut=parseInt(s[6],10);Ut=Ut>=0&&Ut<=59?Ut:0;const Xt=s[7]||"Z";let Kt=parseInt(s[8],10);Kt=Kt>=0&&Kt<=23?Kt:0;let nr=parseInt(s[9],10)||0;return nr=nr>=0&&nr<=59?nr:0,Xt==="-"?(Mt+=Kt,Ft+=nr):Xt==="+"&&(Mt-=Kt,Ft-=nr),new Date(Date.UTC(_,_e,ct,Mt,Ft,Ut))}}function getXfaPageViewport(o,{scale:i=1,rotation:s=0}){const{width:_,height:_e}=o.attributes.style,ct=[0,0,parseInt(_),parseInt(_e)];return new PageViewport({viewBox:ct,scale:i,rotation:s})}function getRGB(o){if(o.startsWith("#")){const i=parseInt(o.slice(1),16);return[(16711680&i)>>16,(65280&i)>>8,255&i]}return o.startsWith("rgb(")?o.slice(4,-1).split(",").map(i=>parseInt(i)):o.startsWith("rgba(")?o.slice(5,-1).split(",").map(i=>parseInt(i)).slice(0,3):(warn(`Not a valid color format: "${o}"`),[0,0,0])}function getColorValues(o){const i=document.createElement("span");i.style.visibility="hidden",document.body.append(i);for(const s of o.keys()){i.style.color=s;const _=window.getComputedStyle(i).color;o.set(s,getRGB(_))}i.remove()}function getCurrentTransform(o){const{a:i,b:s,c:_,d:_e,e:ct,f:Mt}=o.getTransform();return[i,s,_,_e,ct,Mt]}function getCurrentTransformInverse(o){const{a:i,b:s,c:_,d:_e,e:ct,f:Mt}=o.getTransform().invertSelf();return[i,s,_,_e,ct,Mt]}function setLayerDimensions(o,i,s=!1,_=!0){if(i instanceof PageViewport){const{pageWidth:_e,pageHeight:ct}=i.rawDims,{style:Mt}=o,Ft=util_FeatureTest.isCSSRoundSupported,Ut=`var(--scale-factor) * ${_e}px`,Xt=`var(--scale-factor) * ${ct}px`,Kt=Ft?`round(${Ut}, 1px)`:`calc(${Ut})`,nr=Ft?`round(${Xt}, 1px)`:`calc(${Xt})`;s&&i.rotation%180!=0?(Mt.width=nr,Mt.height=Kt):(Mt.width=Kt,Mt.height=nr)}_&&o.setAttribute("data-main-rotation",i.rotation)}var xG,wG,V0,SG,Yfe,r1e,P0,n1e,a1e,_fe,i1e,Bme;const Zfe=class Zfe{constructor(i){Ku(this,P0);Ku(this,xG,null);Ku(this,wG,null);Ku(this,V0);Ku(this,SG,null);ku(this,V0,i)}render(){const i=ku(this,xG,document.createElement("div"));i.className="editToolbar",i.setAttribute("role","toolbar");const s=to(this,V0)._uiManager._signal;i.addEventListener("contextmenu",noContextMenu,{signal:s}),i.addEventListener("pointerdown",Nu(Zfe,Yfe,r1e),{signal:s});const _=ku(this,SG,document.createElement("div"));_.className="buttons",i.append(_);const _e=to(this,V0).toolbarPosition;if(_e){const{style:ct}=i,Mt=to(this,V0)._uiManager.direction==="ltr"?1-_e[0]:_e[0];ct.insetInlineEnd=100*Mt+"%",ct.top=`calc(${100*_e[1]}% + var(--editor-toolbar-vert-offset))`}return Nu(this,P0,i1e).call(this),i}hide(){var i;to(this,xG).classList.add("hidden"),(i=to(this,wG))==null||i.hideDropdown()}show(){to(this,xG).classList.remove("hidden")}addAltTextButton(i){Nu(this,P0,_fe).call(this,i),to(this,SG).prepend(i,to(this,P0,Bme))}addColorPicker(i){ku(this,wG,i);const s=i.renderButton();Nu(this,P0,_fe).call(this,s),to(this,SG).prepend(s,to(this,P0,Bme))}remove(){var i;to(this,xG).remove(),(i=to(this,wG))==null||i.destroy(),ku(this,wG,null)}};xG=new WeakMap,wG=new WeakMap,V0=new WeakMap,SG=new WeakMap,Yfe=new WeakSet,r1e=function(i){i.stopPropagation()},P0=new WeakSet,n1e=function(i){to(this,V0)._focusEventsAllowed=!1,i.preventDefault(),i.stopPropagation()},a1e=function(i){to(this,V0)._focusEventsAllowed=!0,i.preventDefault(),i.stopPropagation()},_fe=function(i){const s=to(this,V0)._uiManager._signal;i.addEventListener("focusin",Nu(this,P0,n1e).bind(this),{capture:!0,signal:s}),i.addEventListener("focusout",Nu(this,P0,a1e).bind(this),{capture:!0,signal:s}),i.addEventListener("contextmenu",noContextMenu,{signal:s})},i1e=function(){const i=document.createElement("button");i.className="delete",i.tabIndex=0,i.setAttribute("data-l10n-id",`pdfjs-editor-remove-${to(this,V0).editorType}-button`),Nu(this,P0,_fe).call(this,i),i.addEventListener("click",s=>{to(this,V0)._uiManager.delete()},{signal:to(this,V0)._uiManager._signal}),to(this,SG).append(i)},Bme=function(){const i=document.createElement("div");return i.className="divider",i},Ku(Zfe,Yfe);let EditorToolbar=Zfe;var Fde,CG,IG,uG,o1e,s1e,l1e;class HighlightToolbar{constructor(i){Ku(this,uG);Ku(this,Fde,null);Ku(this,CG,null);Ku(this,IG);ku(this,IG,i)}show(i,s,_){const[_e,ct]=Nu(this,uG,s1e).call(this,s,_),{style:Mt}=to(this,CG)||ku(this,CG,Nu(this,uG,o1e).call(this));i.append(to(this,CG)),Mt.insetInlineEnd=100*_e+"%",Mt.top=`calc(${100*ct}% + var(--editor-toolbar-vert-offset))`}hide(){to(this,CG).remove()}}Fde=new WeakMap,CG=new WeakMap,IG=new WeakMap,uG=new WeakSet,o1e=function(){const i=ku(this,CG,document.createElement("div"));i.className="editToolbar",i.setAttribute("role","toolbar"),i.addEventListener("contextmenu",noContextMenu,{signal:to(this,IG)._signal});const s=ku(this,Fde,document.createElement("div"));return s.className="buttons",i.append(s),Nu(this,uG,l1e).call(this),i},s1e=function(i,s){let _=0,_e=0;for(const ct of i){const Mt=ct.y+ct.height;if(Mt<_)continue;const Ft=ct.x+(s?ct.width:0);Mt>_?(_e=Ft,_=Mt):s?Ft>_e&&(_e=Ft):Ft<_e&&(_e=Ft)}return[s?1-_e:_e,_]},l1e=function(){const i=document.createElement("button");i.className="highlightButton",i.tabIndex=0,i.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const s=document.createElement("span");i.append(s),s.className="visuallyHidden",s.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const _=to(this,IG)._signal;i.addEventListener("contextmenu",noContextMenu,{signal:_}),i.addEventListener("click",()=>{to(this,IG).highlightSelection("floating_button")},{signal:_}),to(this,Fde).append(i)};function bindEvents(o,i,s){for(const _ of s)i.addEventListener(_,o[_].bind(o))}function opacityToHex(o){return Math.round(Math.min(255,Math.max(1,255*o))).toString(16).padStart(2,"0")}var Qfe;class IdManager{constructor(){Ku(this,Qfe,0)}get id(){return`${AnnotationEditorPrefix}${B0(this,Qfe)._++}`}}Qfe=new WeakMap;var Lde,Jfe,Kw,Bde,zme;const Pge=class Pge{constructor(){Ku(this,Bde);Ku(this,Lde,getUuid());Ku(this,Jfe,0);Ku(this,Kw,null)}static get _isSVGFittingCanvas(){const i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;return s.src='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',shadow(this,"_isSVGFittingCanvas",s.decode().then(()=>(i.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0)))}async getFromFile(i){const{lastModified:s,name:_,size:_e,type:ct}=i;return Nu(this,Bde,zme).call(this,`${s}_${_}_${_e}_${ct}`,i)}async getFromUrl(i){return Nu(this,Bde,zme).call(this,i,i)}async getFromId(i){to(this,Kw)||ku(this,Kw,new Map);const s=to(this,Kw).get(i);return s?s.bitmap?(s.refCounter+=1,s):s.file?this.getFromFile(s.file):this.getFromUrl(s.url):null}getSvgUrl(i){const s=to(this,Kw).get(i);return s!=null&&s.isSvg?s.svgUrl:null}deleteId(i){to(this,Kw)||ku(this,Kw,new Map);const s=to(this,Kw).get(i);s&&(s.refCounter-=1,s.refCounter===0&&(s.bitmap=null))}isValidId(i){return i.startsWith(`image_${to(this,Lde)}_`)}};Lde=new WeakMap,Jfe=new WeakMap,Kw=new WeakMap,Bde=new WeakSet,zme=async function(i,s){to(this,Kw)||ku(this,Kw,new Map);let _=to(this,Kw).get(i);if(_===null)return null;if(_!=null&&_.bitmap)return _.refCounter+=1,_;try{let _e;if(_||(_={bitmap:null,id:`image_${to(this,Lde)}_${B0(this,Jfe)._++}`,refCounter:0,isSvg:!1}),typeof s=="string"?(_.url=s,_e=await fetchData(s,"blob")):_e=_.file=s,_e.type==="image/svg+xml"){const ct=Pge._isSVGFittingCanvas,Mt=new FileReader,Ft=new Image,Ut=new Promise((Xt,Kt)=>{Ft.onload=()=>{_.bitmap=Ft,_.isSvg=!0,Xt()},Mt.onload=async()=>{const nr=_.svgUrl=Mt.result;Ft.src=await ct?`${nr}#svgView(preserveAspectRatio(none))`:nr},Ft.onerror=Mt.onerror=Kt});Mt.readAsDataURL(_e),await Ut}else _.bitmap=await createImageBitmap(_e);_.refCounter=1}catch(_e){console.error(_e),_=null}return to(this,Kw).set(i,_),_&&to(this,Kw).set(_.id,_),_};let ImageManager=Pge;var Yy,r5,zde,Zy;class CommandManager{constructor(i=128){Ku(this,Yy,[]);Ku(this,r5,!1);Ku(this,zde);Ku(this,Zy,-1);ku(this,zde,i)}add({cmd:i,undo:s,post:_,mustExec:_e,type:ct=NaN,overwriteIfSameType:Mt=!1,keepUndo:Ft=!1}){if(_e&&i(),to(this,r5))return;const Ut={cmd:i,undo:s,post:_,type:ct};if(to(this,Zy)===-1)return to(this,Yy).length>0&&(to(this,Yy).length=0),ku(this,Zy,0),void to(this,Yy).push(Ut);if(Mt&&to(this,Yy)[to(this,Zy)].type===ct)return Ft&&(Ut.undo=to(this,Yy)[to(this,Zy)].undo),void(to(this,Yy)[to(this,Zy)]=Ut);const Xt=to(this,Zy)+1;Xt===to(this,zde)?to(this,Yy).splice(0,1):(ku(this,Zy,Xt),Xt<to(this,Yy).length&&to(this,Yy).splice(Xt)),to(this,Yy).push(Ut)}undo(){if(to(this,Zy)===-1)return;ku(this,r5,!0);const{undo:i,post:s}=to(this,Yy)[to(this,Zy)];i(),s==null||s(),ku(this,r5,!1),ku(this,Zy,to(this,Zy)-1)}redo(){if(to(this,Zy)<to(this,Yy).length-1){ku(this,Zy,to(this,Zy)+1),ku(this,r5,!0);const{cmd:i,post:s}=to(this,Yy)[to(this,Zy)];i(),s==null||s(),ku(this,r5,!1)}}hasSomethingToUndo(){return to(this,Zy)!==-1}hasSomethingToRedo(){return to(this,Zy)<to(this,Yy).length-1}destroy(){ku(this,Yy,null)}}Yy=new WeakMap,r5=new WeakMap,zde=new WeakMap,Zy=new WeakMap;var eme,u1e;class KeyboardManager{constructor(i){Ku(this,eme);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:s}=util_FeatureTest.platform;for(const[_,_e,ct={}]of i)for(const Mt of _){const Ft=Mt.startsWith("mac+");s&&Ft?(this.callbacks.set(Mt.slice(4),{callback:_e,options:ct}),this.allKeys.add(Mt.split("+").at(-1))):s||Ft||(this.callbacks.set(Mt,{callback:_e,options:ct}),this.allKeys.add(Mt.split("+").at(-1)))}}exec(i,s){if(!this.allKeys.has(s.key))return;const _=this.callbacks.get(Nu(this,eme,u1e).call(this,s));if(!_)return;const{callback:_e,options:{bubbles:ct=!1,args:Mt=[],checker:Ft=null}}=_;Ft&&!Ft(i,s)||(_e.bind(i,...Mt,s)(),ct||(s.stopPropagation(),s.preventDefault()))}}eme=new WeakSet,u1e=function(i){i.altKey&&this.buffer.push("alt"),i.ctrlKey&&this.buffer.push("ctrl"),i.metaKey&&this.buffer.push("meta"),i.shiftKey&&this.buffer.push("shift"),this.buffer.push(i.key);const s=this.buffer.join("+");return this.buffer.length=0,s};const tme=class tme{get _colors(){const i=new Map([["CanvasText",null],["Canvas",null]]);return getColorValues(i),shadow(this,"_colors",i)}convert(i){const s=getRGB(i);if(!window.matchMedia("(forced-colors: active)").matches)return s;for(const[_,_e]of this._colors)if(_e.every((ct,Mt)=>ct===s[Mt]))return tme._colorsMapping.get(_);return s}getHexCode(i){const s=this._colors.get(i);return s?Util.makeHexColor(...s):i}};vy(tme,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let ColorManager=tme;var Rle,W0,Gy,Gv,Ple,jC,Dle,lC,Mle,kG,$C,uC,TG,Vde,Ude,CC,Ole,B5,_C,rme,WB,Wde,NG,Hde,Fle,Kv,ky,XC,YG,Gde,jde,Xde,qde,Kde,Yde,Zde,Qde,Jde,ehe,the,rhe,nhe,r7,IC,qC,ahe,Vm,Ife,c1e,d1e,Afe,p1e,h1e,f1e,Vme,m1e,Ume,Wme,g1e,S0,N8,y1e,v1e,Hme,b1e,Cde,Gme;const Nle=class Nle{constructor(i,s,_,_e,ct,Mt,Ft,Ut,Xt){Ku(this,Vm);Ku(this,Rle,new AbortController);Ku(this,W0,null);Ku(this,Gy,new Map);Ku(this,Gv,new Map);Ku(this,Ple,null);Ku(this,jC,null);Ku(this,Dle,null);Ku(this,lC,new CommandManager);Ku(this,Mle,0);Ku(this,kG,new Set);Ku(this,$C,null);Ku(this,uC,null);Ku(this,TG,new Set);Ku(this,Vde,!1);Ku(this,Ude,null);Ku(this,CC,null);Ku(this,Ole,null);Ku(this,B5,!1);Ku(this,_C,null);Ku(this,rme,new IdManager);Ku(this,WB,!1);Ku(this,Wde,!1);Ku(this,NG,null);Ku(this,Hde,null);Ku(this,Fle,null);Ku(this,Kv,AnnotationEditorType.NONE);Ku(this,ky,new Set);Ku(this,XC,null);Ku(this,YG,null);Ku(this,Gde,null);Ku(this,jde,this.blur.bind(this));Ku(this,Xde,this.focus.bind(this));Ku(this,qde,this.copy.bind(this));Ku(this,Kde,this.cut.bind(this));Ku(this,Yde,this.paste.bind(this));Ku(this,Zde,this.keydown.bind(this));Ku(this,Qde,this.keyup.bind(this));Ku(this,Jde,this.onEditingAction.bind(this));Ku(this,ehe,this.onPageChanging.bind(this));Ku(this,the,this.onScaleChanging.bind(this));Ku(this,rhe,this.onRotationChanging.bind(this));Ku(this,nhe,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});Ku(this,r7,[0,0]);Ku(this,IC,null);Ku(this,qC,null);Ku(this,ahe,null);this._signal=to(this,Rle).signal,ku(this,qC,i),ku(this,ahe,s),ku(this,Ple,_),this._eventBus=_e,this._eventBus._on("editingaction",to(this,Jde)),this._eventBus._on("pagechanging",to(this,ehe)),this._eventBus._on("scalechanging",to(this,the)),this._eventBus._on("rotationchanging",to(this,rhe)),Nu(this,Vm,p1e).call(this),Nu(this,Vm,g1e).call(this),Nu(this,Vm,Vme).call(this),ku(this,jC,ct.annotationStorage),ku(this,Ude,ct.filterFactory),ku(this,YG,Mt),ku(this,Ole,Ft||null),ku(this,Vde,Ut),ku(this,Fle,Xt||null),this.viewParameters={realScale:PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const i=Nle.prototype,s=Mt=>to(Mt,qC).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&Mt.hasSomethingToControl(),_=(Mt,{target:Ft})=>{if(Ft instanceof HTMLInputElement){const{type:Ut}=Ft;return Ut!=="text"&&Ut!=="number"}return!0},_e=this.TRANSLATE_SMALL,ct=this.TRANSLATE_BIG;return shadow(this,"_keyboardManager",new KeyboardManager([[["ctrl+a","mac+meta+a"],i.selectAll,{checker:_}],[["ctrl+z","mac+meta+z"],i.undo,{checker:_}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],i.redo,{checker:_}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],i.delete,{checker:_}],[["Enter","mac+Enter"],i.addNewEditorFromKeyboard,{checker:(Mt,{target:Ft})=>!(Ft instanceof HTMLButtonElement)&&to(Mt,qC).contains(Ft)&&!Mt.isEnterHandled}],[[" ","mac+ "],i.addNewEditorFromKeyboard,{checker:(Mt,{target:Ft})=>!(Ft instanceof HTMLButtonElement)&&to(Mt,qC).contains(document.activeElement)}],[["Escape","mac+Escape"],i.unselectAll],[["ArrowLeft","mac+ArrowLeft"],i.translateSelectedEditors,{args:[-_e,0],checker:s}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],i.translateSelectedEditors,{args:[-ct,0],checker:s}],[["ArrowRight","mac+ArrowRight"],i.translateSelectedEditors,{args:[_e,0],checker:s}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],i.translateSelectedEditors,{args:[ct,0],checker:s}],[["ArrowUp","mac+ArrowUp"],i.translateSelectedEditors,{args:[0,-_e],checker:s}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],i.translateSelectedEditors,{args:[0,-ct],checker:s}],[["ArrowDown","mac+ArrowDown"],i.translateSelectedEditors,{args:[0,_e],checker:s}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],i.translateSelectedEditors,{args:[0,ct],checker:s}]]))}destroy(){var i,s,_;(i=to(this,Rle))==null||i.abort(),ku(this,Rle,null),this._signal=null,this._eventBus._off("editingaction",to(this,Jde)),this._eventBus._off("pagechanging",to(this,ehe)),this._eventBus._off("scalechanging",to(this,the)),this._eventBus._off("rotationchanging",to(this,rhe));for(const _e of to(this,Gv).values())_e.destroy();to(this,Gv).clear(),to(this,Gy).clear(),to(this,TG).clear(),ku(this,W0,null),to(this,ky).clear(),to(this,lC).destroy(),(s=to(this,Ple))==null||s.destroy(),(_=to(this,_C))==null||_.hide(),ku(this,_C,null),to(this,CC)&&(clearTimeout(to(this,CC)),ku(this,CC,null)),to(this,IC)&&(clearTimeout(to(this,IC)),ku(this,IC,null))}async mlGuess(i){var s;return((s=to(this,Fle))==null?void 0:s.guess(i))||null}get hasMLManager(){return!!to(this,Fle)}get hcmFilter(){return shadow(this,"hcmFilter",to(this,YG)?to(this,Ude).addHCMFilter(to(this,YG).foreground,to(this,YG).background):"none")}get direction(){return shadow(this,"direction",getComputedStyle(to(this,qC)).direction)}get highlightColors(){return shadow(this,"highlightColors",to(this,Ole)?new Map(to(this,Ole).split(",").map(i=>i.split("=").map(s=>s.trim()))):null)}get highlightColorNames(){return shadow(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,i=>i.reverse())):null)}setMainHighlightColorPicker(i){ku(this,Hde,i)}editAltText(i){var s;(s=to(this,Ple))==null||s.editAltText(this,i)}onPageChanging({pageNumber:i}){ku(this,Mle,i-1)}focusMainContainer(){to(this,qC).focus()}findParent(i,s){for(const _ of to(this,Gv).values()){const{x:_e,y:ct,width:Mt,height:Ft}=_.div.getBoundingClientRect();if(i>=_e&&i<=_e+Mt&&s>=ct&&s<=ct+Ft)return _}return null}disableUserSelect(i=!1){to(this,ahe).classList.toggle("noUserSelect",i)}addShouldRescale(i){to(this,TG).add(i)}removeShouldRescale(i){to(this,TG).delete(i)}onScaleChanging({scale:i}){this.commitOrRemove(),this.viewParameters.realScale=i*PixelsPerInch.PDF_TO_CSS_UNITS;for(const s of to(this,TG))s.onScaleChanging()}onRotationChanging({pagesRotation:i}){this.commitOrRemove(),this.viewParameters.rotation=i}highlightSelection(i=""){const s=document.getSelection();if(!s||s.isCollapsed)return;const{anchorNode:_,anchorOffset:_e,focusNode:ct,focusOffset:Mt}=s,Ft=s.toString(),Ut=Nu(this,Vm,Ife).call(this,s).closest(".textLayer"),Xt=this.getSelectionBoxes(Ut);if(Xt){s.empty(),to(this,Kv)===AnnotationEditorType.NONE&&(this._eventBus.dispatch("showannotationeditorui",{source:this,mode:AnnotationEditorType.HIGHLIGHT}),this.showAllEditors("highlight",!0,!0));for(const Kt of to(this,Gv).values())if(Kt.hasTextLayer(Ut)){Kt.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:i,boxes:Xt,anchorNode:_,anchorOffset:_e,focusNode:ct,focusOffset:Mt,text:Ft});break}}}addToAnnotationStorage(i){i.isEmpty()||!to(this,jC)||to(this,jC).has(i.id)||to(this,jC).setValue(i.id,i)}blur(){if(this.isShiftKeyDown=!1,to(this,B5)&&(ku(this,B5,!1),Nu(this,Vm,Afe).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:i}=document;for(const s of to(this,ky))if(s.div.contains(i)){ku(this,NG,[s,i]),s._focusEventsAllowed=!1;break}}focus(){if(!to(this,NG))return;const[i,s]=to(this,NG);ku(this,NG,null),s.addEventListener("focusin",()=>{i._focusEventsAllowed=!0},{once:!0,signal:this._signal}),s.focus()}addEditListeners(){Nu(this,Vm,Vme).call(this),Nu(this,Vm,Ume).call(this)}removeEditListeners(){Nu(this,Vm,m1e).call(this),Nu(this,Vm,Wme).call(this)}dragOver(i){for(const{type:s}of i.dataTransfer.items)for(const _ of to(this,uC))if(_.isHandlingMimeForPasting(s))return i.dataTransfer.dropEffect="copy",void i.preventDefault()}drop(i){for(const s of i.dataTransfer.items)for(const _ of to(this,uC))if(_.isHandlingMimeForPasting(s.type))return _.paste(s,this.currentLayer),void i.preventDefault()}copy(i){var _;if(i.preventDefault(),(_=to(this,W0))==null||_.commitOrRemove(),!this.hasSelection)return;const s=[];for(const _e of to(this,ky)){const ct=_e.serialize(!0);ct&&s.push(ct)}s.length!==0&&i.clipboardData.setData("application/pdfjs",JSON.stringify(s))}cut(i){this.copy(i),this.delete()}paste(i){i.preventDefault();const{clipboardData:s}=i;for(const ct of s.items)for(const Mt of to(this,uC))if(Mt.isHandlingMimeForPasting(ct.type))return void Mt.paste(ct,this.currentLayer);let _=s.getData("application/pdfjs");if(!_)return;try{_=JSON.parse(_)}catch(ct){return void warn(`paste: "${ct.message}".`)}if(!Array.isArray(_))return;this.unselectAll();const _e=this.currentLayer;try{const ct=[];for(const Ut of _){const Xt=_e.deserialize(Ut);if(!Xt)return;ct.push(Xt)}const Mt=()=>{for(const Ut of ct)Nu(this,Vm,Hme).call(this,Ut);Nu(this,Vm,Gme).call(this,ct)},Ft=()=>{for(const Ut of ct)Ut.remove()};this.addCommands({cmd:Mt,undo:Ft,mustExec:!0})}catch(ct){warn(`paste: "${ct.message}".`)}}keydown(i){this.isShiftKeyDown||i.key!=="Shift"||(this.isShiftKeyDown=!0),to(this,Kv)===AnnotationEditorType.NONE||this.isEditorHandlingKeyboard||Nle._keyboardManager.exec(this,i)}keyup(i){this.isShiftKeyDown&&i.key==="Shift"&&(this.isShiftKeyDown=!1,to(this,B5)&&(ku(this,B5,!1),Nu(this,Vm,Afe).call(this,"main_toolbar")))}onEditingAction({name:i}){switch(i){case"undo":case"redo":case"delete":case"selectAll":this[i]();break;case"highlightSelection":this.highlightSelection("context_menu")}}setEditingState(i){i?(Nu(this,Vm,h1e).call(this),Nu(this,Vm,Ume).call(this),Nu(this,Vm,S0).call(this,{isEditing:to(this,Kv)!==AnnotationEditorType.NONE,isEmpty:Nu(this,Vm,Cde).call(this),hasSomethingToUndo:to(this,lC).hasSomethingToUndo(),hasSomethingToRedo:to(this,lC).hasSomethingToRedo(),hasSelectedEditor:!1})):(Nu(this,Vm,f1e).call(this),Nu(this,Vm,Wme).call(this),Nu(this,Vm,S0).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(i){if(!to(this,uC)){ku(this,uC,i);for(const s of to(this,uC))Nu(this,Vm,N8).call(this,s.defaultPropertiesToUpdate)}}getId(){return to(this,rme).id}get currentLayer(){return to(this,Gv).get(to(this,Mle))}getLayer(i){return to(this,Gv).get(i)}get currentPageIndex(){return to(this,Mle)}addLayer(i){to(this,Gv).set(i.pageIndex,i),to(this,WB)?i.enable():i.disable()}removeLayer(i){to(this,Gv).delete(i.pageIndex)}updateMode(i,s=null,_=!1){if(to(this,Kv)!==i){if(ku(this,Kv,i),i===AnnotationEditorType.NONE)return this.setEditingState(!1),void Nu(this,Vm,v1e).call(this);this.setEditingState(!0),Nu(this,Vm,y1e).call(this),this.unselectAll();for(const _e of to(this,Gv).values())_e.updateMode(i);if(s||!_){if(s){for(const _e of to(this,Gy).values())if(_e.annotationElementId===s){this.setSelected(_e),_e.enterInEditMode();break}}}else this.addNewEditorFromKeyboard()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(i){i!==to(this,Kv)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:i})}updateParams(i,s){var _;if(to(this,uC)){switch(i){case AnnotationEditorParamsType.CREATE:return void this.currentLayer.addNewEditor();case AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:(_=to(this,Hde))==null||_.updateColor(s);break;case AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(to(this,Gde)||ku(this,Gde,new Map)).set(i,s),this.showAllEditors("highlight",s)}for(const _e of to(this,ky))_e.updateParams(i,s);for(const _e of to(this,uC))_e.updateDefaultParams(i,s)}}showAllEditors(i,s,_=!1){var _e;for(const ct of to(this,Gy).values())ct.editorType===i&&ct.show(s);(((_e=to(this,Gde))==null?void 0:_e.get(AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL))??!0)!==s&&Nu(this,Vm,N8).call(this,[[AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL,s]])}enableWaiting(i=!1){if(to(this,Wde)!==i){ku(this,Wde,i);for(const s of to(this,Gv).values())i?s.disableClick():s.enableClick(),s.div.classList.toggle("waiting",i)}}getEditors(i){const s=[];for(const _ of to(this,Gy).values())_.pageIndex===i&&s.push(_);return s}getEditor(i){return to(this,Gy).get(i)}addEditor(i){to(this,Gy).set(i.id,i)}removeEditor(i){var s;i.div.contains(document.activeElement)&&(to(this,CC)&&clearTimeout(to(this,CC)),ku(this,CC,setTimeout(()=>{this.focusMainContainer(),ku(this,CC,null)},0))),to(this,Gy).delete(i.id),this.unselect(i),i.annotationElementId&&to(this,kG).has(i.annotationElementId)||((s=to(this,jC))==null||s.remove(i.id))}addDeletedAnnotationElement(i){to(this,kG).add(i.annotationElementId),this.addChangedExistingAnnotation(i),i.deleted=!0}isDeletedAnnotationElement(i){return to(this,kG).has(i)}removeDeletedAnnotationElement(i){to(this,kG).delete(i.annotationElementId),this.removeChangedExistingAnnotation(i),i.deleted=!1}setActiveEditor(i){to(this,W0)!==i&&(ku(this,W0,i),i&&Nu(this,Vm,N8).call(this,i.propertiesToUpdate))}updateUI(i){to(this,Vm,b1e)===i&&Nu(this,Vm,N8).call(this,i.propertiesToUpdate)}toggleSelected(i){if(to(this,ky).has(i))return to(this,ky).delete(i),i.unselect(),void Nu(this,Vm,S0).call(this,{hasSelectedEditor:this.hasSelection});to(this,ky).add(i),i.select(),Nu(this,Vm,N8).call(this,i.propertiesToUpdate),Nu(this,Vm,S0).call(this,{hasSelectedEditor:!0})}setSelected(i){for(const s of to(this,ky))s!==i&&s.unselect();to(this,ky).clear(),to(this,ky).add(i),i.select(),Nu(this,Vm,N8).call(this,i.propertiesToUpdate),Nu(this,Vm,S0).call(this,{hasSelectedEditor:!0})}isSelected(i){return to(this,ky).has(i)}get firstSelectedEditor(){return to(this,ky).values().next().value}unselect(i){i.unselect(),to(this,ky).delete(i),Nu(this,Vm,S0).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return to(this,ky).size!==0}get isEnterHandled(){return to(this,ky).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){to(this,lC).undo(),Nu(this,Vm,S0).call(this,{hasSomethingToUndo:to(this,lC).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:Nu(this,Vm,Cde).call(this)})}redo(){to(this,lC).redo(),Nu(this,Vm,S0).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:to(this,lC).hasSomethingToRedo(),isEmpty:Nu(this,Vm,Cde).call(this)})}addCommands(i){to(this,lC).add(i),Nu(this,Vm,S0).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:Nu(this,Vm,Cde).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const i=[...to(this,ky)];this.addCommands({cmd:()=>{for(const s of i)s.remove()},undo:()=>{for(const s of i)Nu(this,Vm,Hme).call(this,s)},mustExec:!0})}commitOrRemove(){var i;(i=to(this,W0))==null||i.commitOrRemove()}hasSomethingToControl(){return to(this,W0)||this.hasSelection}selectAll(){for(const i of to(this,ky))i.commit();Nu(this,Vm,Gme).call(this,to(this,Gy).values())}unselectAll(){if((!to(this,W0)||(to(this,W0).commitOrRemove(),to(this,Kv)===AnnotationEditorType.NONE))&&this.hasSelection){for(const i of to(this,ky))i.unselect();to(this,ky).clear(),Nu(this,Vm,S0).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(i,s,_=!1){if(_||this.commitOrRemove(),!this.hasSelection)return;to(this,r7)[0]+=i,to(this,r7)[1]+=s;const[_e,ct]=to(this,r7),Mt=[...to(this,ky)];to(this,IC)&&clearTimeout(to(this,IC)),ku(this,IC,setTimeout(()=>{ku(this,IC,null),to(this,r7)[0]=to(this,r7)[1]=0,this.addCommands({cmd:()=>{for(const Ft of Mt)to(this,Gy).has(Ft.id)&&Ft.translateInPage(_e,ct)},undo:()=>{for(const Ft of Mt)to(this,Gy).has(Ft.id)&&Ft.translateInPage(-_e,-ct)},mustExec:!1})},1e3));for(const Ft of Mt)Ft.translateInPage(i,s)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),ku(this,$C,new Map);for(const i of to(this,ky))to(this,$C).set(i,{savedX:i.x,savedY:i.y,savedPageIndex:i.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!to(this,$C))return!1;this.disableUserSelect(!1);const i=to(this,$C);ku(this,$C,null);let s=!1;for(const[{x:_e,y:ct,pageIndex:Mt},Ft]of i)Ft.newX=_e,Ft.newY=ct,Ft.newPageIndex=Mt,s||(s=_e!==Ft.savedX||ct!==Ft.savedY||Mt!==Ft.savedPageIndex);if(!s)return!1;const _=(_e,ct,Mt,Ft)=>{if(to(this,Gy).has(_e.id)){const Ut=to(this,Gv).get(Ft);Ut?_e._setParentAndPosition(Ut,ct,Mt):(_e.pageIndex=Ft,_e.x=ct,_e.y=Mt)}};return this.addCommands({cmd:()=>{for(const[_e,{newX:ct,newY:Mt,newPageIndex:Ft}]of i)_(_e,ct,Mt,Ft)},undo:()=>{for(const[_e,{savedX:ct,savedY:Mt,savedPageIndex:Ft}]of i)_(_e,ct,Mt,Ft)},mustExec:!0}),!0}dragSelectedEditors(i,s){if(to(this,$C))for(const _ of to(this,$C).keys())_.drag(i,s)}rebuild(i){if(i.parent===null){const s=this.getLayer(i.pageIndex);s?(s.changeParent(i),s.addOrRebuild(i)):(this.addEditor(i),this.addToAnnotationStorage(i),i.rebuild())}else i.parent.addOrRebuild(i)}get isEditorHandlingKeyboard(){var i;return((i=this.getActive())==null?void 0:i.shouldGetKeyboardEvents())||to(this,ky).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(i){return to(this,W0)===i}getActive(){return to(this,W0)}getMode(){return to(this,Kv)}get imageManager(){return shadow(this,"imageManager",new ImageManager)}getSelectionBoxes(i){if(!i)return null;const s=document.getSelection();for(let Xt=0,Kt=s.rangeCount;Xt<Kt;Xt++)if(!i.contains(s.getRangeAt(Xt).commonAncestorContainer))return null;const{x:_,y:_e,width:ct,height:Mt}=i.getBoundingClientRect();let Ft;switch(i.getAttribute("data-main-rotation")){case"90":Ft=(Xt,Kt,nr,rr)=>({x:(Kt-_e)/Mt,y:1-(Xt+nr-_)/ct,width:rr/Mt,height:nr/ct});break;case"180":Ft=(Xt,Kt,nr,rr)=>({x:1-(Xt+nr-_)/ct,y:1-(Kt+rr-_e)/Mt,width:nr/ct,height:rr/Mt});break;case"270":Ft=(Xt,Kt,nr,rr)=>({x:1-(Kt+rr-_e)/Mt,y:(Xt-_)/ct,width:rr/Mt,height:nr/ct});break;default:Ft=(Xt,Kt,nr,rr)=>({x:(Xt-_)/ct,y:(Kt-_e)/Mt,width:nr/ct,height:rr/Mt})}const Ut=[];for(let Xt=0,Kt=s.rangeCount;Xt<Kt;Xt++){const nr=s.getRangeAt(Xt);if(!nr.collapsed)for(const{x:rr,y:or,width:hr,height:fr}of nr.getClientRects())hr!==0&&fr!==0&&Ut.push(Ft(rr,or,hr,fr))}return Ut.length===0?null:Ut}addChangedExistingAnnotation({annotationElementId:i,id:s}){(to(this,Dle)||ku(this,Dle,new Map)).set(i,s)}removeChangedExistingAnnotation({annotationElementId:i}){var s;(s=to(this,Dle))==null||s.delete(i)}renderAnnotationElement(i){var _e;const s=(_e=to(this,Dle))==null?void 0:_e.get(i.data.id);if(!s)return;const _=to(this,jC).getRawValue(s);_&&(to(this,Kv)!==AnnotationEditorType.NONE||_.hasBeenModified)&&_.renderAnnotationElement(i)}};Rle=new WeakMap,W0=new WeakMap,Gy=new WeakMap,Gv=new WeakMap,Ple=new WeakMap,jC=new WeakMap,Dle=new WeakMap,lC=new WeakMap,Mle=new WeakMap,kG=new WeakMap,$C=new WeakMap,uC=new WeakMap,TG=new WeakMap,Vde=new WeakMap,Ude=new WeakMap,CC=new WeakMap,Ole=new WeakMap,B5=new WeakMap,_C=new WeakMap,rme=new WeakMap,WB=new WeakMap,Wde=new WeakMap,NG=new WeakMap,Hde=new WeakMap,Fle=new WeakMap,Kv=new WeakMap,ky=new WeakMap,XC=new WeakMap,YG=new WeakMap,Gde=new WeakMap,jde=new WeakMap,Xde=new WeakMap,qde=new WeakMap,Kde=new WeakMap,Yde=new WeakMap,Zde=new WeakMap,Qde=new WeakMap,Jde=new WeakMap,ehe=new WeakMap,the=new WeakMap,rhe=new WeakMap,nhe=new WeakMap,r7=new WeakMap,IC=new WeakMap,qC=new WeakMap,ahe=new WeakMap,Vm=new WeakSet,Ife=function({anchorNode:i}){return i.nodeType===Node.TEXT_NODE?i.parentElement:i},c1e=function(){const i=document.getSelection();if(!i||i.isCollapsed)return;const s=Nu(this,Vm,Ife).call(this,i).closest(".textLayer"),_=this.getSelectionBoxes(s);_&&(to(this,_C)||ku(this,_C,new HighlightToolbar(this)),to(this,_C).show(s,_,this.direction==="ltr"))},d1e=function(){var _,_e,ct;const i=document.getSelection();if(!i||i.isCollapsed)return void(to(this,XC)&&((_=to(this,_C))==null||_.hide(),ku(this,XC,null),Nu(this,Vm,S0).call(this,{hasSelectedText:!1})));const{anchorNode:s}=i;if(s!==to(this,XC))if(Nu(this,Vm,Ife).call(this,i).closest(".textLayer")){if((_e=to(this,_C))==null||_e.hide(),ku(this,XC,s),Nu(this,Vm,S0).call(this,{hasSelectedText:!0}),(to(this,Kv)===AnnotationEditorType.HIGHLIGHT||to(this,Kv)===AnnotationEditorType.NONE)&&(to(this,Kv)===AnnotationEditorType.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),ku(this,B5,this.isShiftKeyDown),!this.isShiftKeyDown)){const Mt=this._signal,Ft=Ut=>{Ut.type==="pointerup"&&Ut.button!==0||(window.removeEventListener("pointerup",Ft),window.removeEventListener("blur",Ft),Ut.type==="pointerup"&&Nu(this,Vm,Afe).call(this,"main_toolbar"))};window.addEventListener("pointerup",Ft,{signal:Mt}),window.addEventListener("blur",Ft,{signal:Mt})}}else to(this,XC)&&((ct=to(this,_C))==null||ct.hide(),ku(this,XC,null),Nu(this,Vm,S0).call(this,{hasSelectedText:!1}))},Afe=function(i=""){to(this,Kv)===AnnotationEditorType.HIGHLIGHT?this.highlightSelection(i):to(this,Vde)&&Nu(this,Vm,c1e).call(this)},p1e=function(){document.addEventListener("selectionchange",Nu(this,Vm,d1e).bind(this),{signal:this._signal})},h1e=function(){const i=this._signal;window.addEventListener("focus",to(this,Xde),{signal:i}),window.addEventListener("blur",to(this,jde),{signal:i})},f1e=function(){window.removeEventListener("focus",to(this,Xde)),window.removeEventListener("blur",to(this,jde))},Vme=function(){const i=this._signal;window.addEventListener("keydown",to(this,Zde),{signal:i}),window.addEventListener("keyup",to(this,Qde),{signal:i})},m1e=function(){window.removeEventListener("keydown",to(this,Zde)),window.removeEventListener("keyup",to(this,Qde))},Ume=function(){const i=this._signal;document.addEventListener("copy",to(this,qde),{signal:i}),document.addEventListener("cut",to(this,Kde),{signal:i}),document.addEventListener("paste",to(this,Yde),{signal:i})},Wme=function(){document.removeEventListener("copy",to(this,qde)),document.removeEventListener("cut",to(this,Kde)),document.removeEventListener("paste",to(this,Yde))},g1e=function(){const i=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:i}),document.addEventListener("drop",this.drop.bind(this),{signal:i})},S0=function(i){Object.entries(i).some(([s,_])=>to(this,nhe)[s]!==_)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(to(this,nhe),i)}),to(this,Kv)===AnnotationEditorType.HIGHLIGHT&&i.hasSelectedEditor===!1&&Nu(this,Vm,N8).call(this,[[AnnotationEditorParamsType.HIGHLIGHT_FREE,!0]]))},N8=function(i){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:i})},y1e=function(){if(!to(this,WB)){ku(this,WB,!0);for(const i of to(this,Gv).values())i.enable();for(const i of to(this,Gy).values())i.enable()}},v1e=function(){if(this.unselectAll(),to(this,WB)){ku(this,WB,!1);for(const i of to(this,Gv).values())i.disable();for(const i of to(this,Gy).values())i.disable()}},Hme=function(i){const s=to(this,Gv).get(i.pageIndex);s?s.addOrRebuild(i):(this.addEditor(i),this.addToAnnotationStorage(i))},b1e=function(){let i=null;for(i of to(this,ky));return i},Cde=function(){if(to(this,Gy).size===0)return!0;if(to(this,Gy).size===1)for(const i of to(this,Gy).values())return i.isEmpty();return!1},Gme=function(i){for(const s of to(this,ky))s.unselect();to(this,ky).clear();for(const s of i)s.isEmpty()||(to(this,ky).add(s),s.select());Nu(this,Vm,S0).call(this,{hasSelectedEditor:this.hasSelection})},vy(Nle,"TRANSLATE_SMALL",1),vy(Nle,"TRANSLATE_BIG",10);let AnnotationEditorUIManager=Nle;var KC,YC,cC,TI,_b,Lle,dC,ihe,jme;const UC=class UC{constructor(i){Ku(this,ihe);Ku(this,KC,"");Ku(this,YC,!1);Ku(this,cC,null);Ku(this,TI,null);Ku(this,_b,null);Ku(this,Lle,!1);Ku(this,dC,null);ku(this,dC,i)}static initialize(i){UC._l10nPromise||(UC._l10nPromise=i)}async render(){const i=ku(this,cC,document.createElement("button"));i.className="altText";const s=await UC._l10nPromise.get("pdfjs-editor-alt-text-button-label");i.textContent=s,i.setAttribute("aria-label",s),i.tabIndex="0";const _=to(this,dC)._uiManager._signal;i.addEventListener("contextmenu",noContextMenu,{signal:_}),i.addEventListener("pointerdown",ct=>ct.stopPropagation(),{signal:_});const _e=ct=>{ct.preventDefault(),to(this,dC)._uiManager.editAltText(to(this,dC))};return i.addEventListener("click",_e,{capture:!0,signal:_}),i.addEventListener("keydown",ct=>{ct.target===i&&ct.key==="Enter"&&(ku(this,Lle,!0),_e(ct))},{signal:_}),await Nu(this,ihe,jme).call(this),i}finish(){to(this,cC)&&(to(this,cC).focus({focusVisible:to(this,Lle)}),ku(this,Lle,!1))}isEmpty(){return!to(this,KC)&&!to(this,YC)}get data(){return{altText:to(this,KC),decorative:to(this,YC)}}set data({altText:i,decorative:s}){to(this,KC)===i&&to(this,YC)===s||(ku(this,KC,i),ku(this,YC,s),Nu(this,ihe,jme).call(this))}toggle(i=!1){to(this,cC)&&(!i&&to(this,_b)&&(clearTimeout(to(this,_b)),ku(this,_b,null)),to(this,cC).disabled=!i)}destroy(){var i;(i=to(this,cC))==null||i.remove(),ku(this,cC,null),ku(this,TI,null)}};KC=new WeakMap,YC=new WeakMap,cC=new WeakMap,TI=new WeakMap,_b=new WeakMap,Lle=new WeakMap,dC=new WeakMap,ihe=new WeakSet,jme=async function(){var _e;const i=to(this,cC);if(!i)return;if(!to(this,KC)&&!to(this,YC))return i.classList.remove("done"),void((_e=to(this,TI))==null?void 0:_e.remove());i.classList.add("done"),UC._l10nPromise.get("pdfjs-editor-alt-text-edit-button-label").then(ct=>{i.setAttribute("aria-label",ct)});let s=to(this,TI);if(!s){ku(this,TI,s=document.createElement("span")),s.className="tooltip",s.setAttribute("role","tooltip");const ct=s.id=`alt-text-tooltip-${to(this,dC).id}`;i.setAttribute("aria-describedby",ct);const Mt=100,Ft=to(this,dC)._uiManager._signal;Ft.addEventListener("abort",()=>{clearTimeout(to(this,_b)),ku(this,_b,null)},{once:!0}),i.addEventListener("mouseenter",()=>{ku(this,_b,setTimeout(()=>{ku(this,_b,null),to(this,TI).classList.add("show"),to(this,dC)._reportTelemetry({action:"alt_text_tooltip"})},Mt))},{signal:Ft}),i.addEventListener("mouseleave",()=>{var Ut;to(this,_b)&&(clearTimeout(to(this,_b)),ku(this,_b,null)),(Ut=to(this,TI))==null||Ut.classList.remove("show")},{signal:Ft})}s.innerText=to(this,YC)?await UC._l10nPromise.get("pdfjs-editor-alt-text-decorative-tooltip"):to(this,KC),s.parentNode||i.append(s);const _=to(this,dC).getImageForAltText();_==null||_.setAttribute("aria-describedby",s.id)},vy(UC,"_l10nPromise",null);let AltText=UC;var Aq,pC,x0,Ble,Pq,d0,Dq,zle,Vle,C0,ohe,Mq,r9,she,Oq,r3,AC,Ule,Wle,dS,lhe,nme,Sy,Xme,uhe,qme,Kme,x1e,w1e,Yme,Zme,Qme,E1e,S1e,$1e,C1e,Jme,_de;const Ry=class Ry{constructor(i){Ku(this,Sy);Ku(this,Aq,null);Ku(this,pC,null);Ku(this,x0,null);Ku(this,Ble,!1);Ku(this,Pq,!1);Ku(this,d0,null);Ku(this,Dq,null);Ku(this,zle,this.focusin.bind(this));Ku(this,Vle,this.focusout.bind(this));Ku(this,C0,null);Ku(this,ohe,"");Ku(this,Mq,!1);Ku(this,r9,null);Ku(this,she,!1);Ku(this,Oq,!1);Ku(this,r3,!1);Ku(this,AC,null);Ku(this,Ule,0);Ku(this,Wle,0);Ku(this,dS,null);vy(this,"_initialOptions",Object.create(null));vy(this,"_isVisible",!0);vy(this,"_uiManager",null);vy(this,"_focusEventsAllowed",!0);vy(this,"_l10nPromise",null);Ku(this,lhe,!1);Ku(this,nme,Ry._zIndex++);this.constructor===Ry&&unreachable("Cannot initialize AnnotationEditor."),this.parent=i.parent,this.id=i.id,this.width=this.height=null,this.pageIndex=i.parent.pageIndex,this.name=i.name,this.div=null,this._uiManager=i.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=i.isCentered,this._structTreeParentId=null;const{rotation:s,rawDims:{pageWidth:_,pageHeight:_e,pageX:ct,pageY:Mt}}=this.parent.viewport;this.rotation=s,this.pageRotation=(360+s-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[_,_e],this.pageTranslation=[ct,Mt];const[Ft,Ut]=this.parentDimensions;this.x=i.x/Ft,this.y=i.y/Ut,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const i=Ry.prototype._resizeWithKeyboard,s=AnnotationEditorUIManager.TRANSLATE_SMALL,_=AnnotationEditorUIManager.TRANSLATE_BIG;return shadow(this,"_resizerKeyboardManager",new KeyboardManager([[["ArrowLeft","mac+ArrowLeft"],i,{args:[-s,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],i,{args:[-_,0]}],[["ArrowRight","mac+ArrowRight"],i,{args:[s,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],i,{args:[_,0]}],[["ArrowUp","mac+ArrowUp"],i,{args:[0,-s]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],i,{args:[0,-_]}],[["ArrowDown","mac+ArrowDown"],i,{args:[0,s]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],i,{args:[0,_]}],[["Escape","mac+Escape"],Ry.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return shadow(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(i){const s=new FakeEditor({id:i.parent.getNextId(),parent:i.parent,uiManager:i._uiManager});s.annotationElementId=i.annotationElementId,s.deleted=!0,s._uiManager.addToAnnotationStorage(s)}static initialize(i,s,_){if(Ry._l10nPromise||(Ry._l10nPromise=new Map(["pdfjs-editor-alt-text-button-label","pdfjs-editor-alt-text-edit-button-label","pdfjs-editor-alt-text-decorative-tooltip","pdfjs-editor-resizer-label-topLeft","pdfjs-editor-resizer-label-topMiddle","pdfjs-editor-resizer-label-topRight","pdfjs-editor-resizer-label-middleRight","pdfjs-editor-resizer-label-bottomRight","pdfjs-editor-resizer-label-bottomMiddle","pdfjs-editor-resizer-label-bottomLeft","pdfjs-editor-resizer-label-middleLeft"].map(ct=>[ct,i.get(ct.replaceAll(/([A-Z])/g,Mt=>`-${Mt.toLowerCase()}`))]))),_==null?void 0:_.strings)for(const ct of _.strings)Ry._l10nPromise.set(ct,i.get(ct));if(Ry._borderLineWidth!==-1)return;const _e=getComputedStyle(document.documentElement);Ry._borderLineWidth=parseFloat(_e.getPropertyValue("--outline-width"))||0}static updateDefaultParams(i,s){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(i){return!1}static paste(i,s){unreachable("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return to(this,lhe)}set _isDraggable(i){var s;ku(this,lhe,i),(s=this.div)==null||s.classList.toggle("draggable",i)}get isEnterHandled(){return!0}center(){const[i,s]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*s/(2*i),this.y+=this.width*i/(2*s);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*s/(2*i),this.y-=this.width*i/(2*s);break;default:this.x-=this.width/2,this.y-=this.height/2}this.fixAndSetPosition()}addCommands(i){this._uiManager.addCommands(i)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=to(this,nme)}setParent(i){i!==null?(this.pageIndex=i.pageIndex,this.pageDimensions=i.pageDimensions):Nu(this,Sy,_de).call(this),this.parent=i}focusin(i){this._focusEventsAllowed&&(to(this,Mq)?ku(this,Mq,!1):this.parent.setSelected(this))}focusout(i){var _;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const s=i.relatedTarget;s!=null&&s.closest(`#${this.id}`)||(i.preventDefault(),(_=this.parent)!=null&&_.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(i,s,_,_e){const[ct,Mt]=this.parentDimensions;[_,_e]=this.screenToPageTranslation(_,_e),this.x=(i+_)/ct,this.y=(s+_e)/Mt,this.fixAndSetPosition()}translate(i,s){Nu(this,Sy,Xme).call(this,this.parentDimensions,i,s)}translateInPage(i,s){to(this,r9)||ku(this,r9,[this.x,this.y]),Nu(this,Sy,Xme).call(this,this.pageDimensions,i,s),this.div.scrollIntoView({block:"nearest"})}drag(i,s){to(this,r9)||ku(this,r9,[this.x,this.y]);const[_,_e]=this.parentDimensions;if(this.x+=i/_,this.y+=s/_e,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:Xt,y:Kt}=this.div.getBoundingClientRect();this.parent.findNewParent(this,Xt,Kt)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:ct,y:Mt}=this;const[Ft,Ut]=this.getBaseTranslation();ct+=Ft,Mt+=Ut,this.div.style.left=`${(100*ct).toFixed(2)}%`,this.div.style.top=`${(100*Mt).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!to(this,r9)&&(to(this,r9)[0]!==this.x||to(this,r9)[1]!==this.y)}getBaseTranslation(){const[i,s]=this.parentDimensions,{_borderLineWidth:_}=Ry,_e=_/i,ct=_/s;switch(this.rotation){case 90:return[-_e,ct];case 180:return[_e,ct];case 270:return[_e,-ct];default:return[-_e,-ct]}}get _mustFixPosition(){return!0}fixAndSetPosition(i=this.rotation){const[s,_]=this.pageDimensions;let{x:_e,y:ct,width:Mt,height:Ft}=this;if(Mt*=s,Ft*=_,_e*=s,ct*=_,this._mustFixPosition)switch(i){case 0:_e=Math.max(0,Math.min(s-Mt,_e)),ct=Math.max(0,Math.min(_-Ft,ct));break;case 90:_e=Math.max(0,Math.min(s-Ft,_e)),ct=Math.min(_,Math.max(Mt,ct));break;case 180:_e=Math.min(s,Math.max(Mt,_e)),ct=Math.min(_,Math.max(Ft,ct));break;case 270:_e=Math.min(s,Math.max(Ft,_e)),ct=Math.max(0,Math.min(_-Mt,ct))}this.x=_e/=s,this.y=ct/=_;const[Ut,Xt]=this.getBaseTranslation();_e+=Ut,ct+=Xt;const{style:Kt}=this.div;Kt.left=`${(100*_e).toFixed(2)}%`,Kt.top=`${(100*ct).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(i,s){var _;return Nu(_=Ry,uhe,qme).call(_,i,s,this.parentRotation)}pageTranslationToScreen(i,s){var _;return Nu(_=Ry,uhe,qme).call(_,i,s,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:i,pageDimensions:[s,_]}=this,_e=s*i,ct=_*i;return util_FeatureTest.isCSSRoundSupported?[Math.round(_e),Math.round(ct)]:[_e,ct]}setDims(i,s){const[_,_e]=this.parentDimensions;this.div.style.width=`${(100*i/_).toFixed(2)}%`,to(this,Pq)||(this.div.style.height=`${(100*s/_e).toFixed(2)}%`)}fixDims(){const{style:i}=this.div,{height:s,width:_}=i,_e=_.endsWith("%"),ct=!to(this,Pq)&&s.endsWith("%");if(_e&&ct)return;const[Mt,Ft]=this.parentDimensions;_e||(i.width=`${(100*parseFloat(_)/Mt).toFixed(2)}%`),to(this,Pq)||ct||(i.height=`${(100*parseFloat(s)/Ft).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var i;(i=to(this,x0))==null||i.finish()}async addEditToolbar(){return to(this,C0)||to(this,Oq)||(ku(this,C0,new EditorToolbar(this)),this.div.append(to(this,C0).render()),to(this,x0)&&to(this,C0).addAltTextButton(await to(this,x0).render())),to(this,C0)}removeEditToolbar(){var i;to(this,C0)&&(to(this,C0).remove(),ku(this,C0,null),(i=to(this,x0))==null||i.destroy())}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){to(this,x0)||(AltText.initialize(Ry._l10nPromise),ku(this,x0,new AltText(this)),to(this,Aq)&&(to(this,x0).data=to(this,Aq),ku(this,Aq,null)),await this.addEditToolbar())}get altTextData(){var i;return(i=to(this,x0))==null?void 0:i.data}set altTextData(i){to(this,x0)&&(to(this,x0).data=i)}hasAltText(){var i;return!((i=to(this,x0))!=null&&i.isEmpty())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=to(this,Ble)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground();const i=this._uiManager._signal;this.div.addEventListener("focusin",to(this,zle),{signal:i}),this.div.addEventListener("focusout",to(this,Vle),{signal:i});const[s,_]=this.parentDimensions;this.parentRotation%180!=0&&(this.div.style.maxWidth=`${(100*_/s).toFixed(2)}%`,this.div.style.maxHeight=`${(100*s/_).toFixed(2)}%`);const[_e,ct]=this.getInitialTranslation();return this.translate(_e,ct),bindEvents(this,this.div,["pointerdown"]),this.div}pointerdown(i){const{isMac:s}=util_FeatureTest.platform;i.button!==0||i.ctrlKey&&s?i.preventDefault():(ku(this,Mq,!0),this._isDraggable?Nu(this,Sy,E1e).call(this,i):Nu(this,Sy,Qme).call(this,i))}moveInDOM(){to(this,AC)&&clearTimeout(to(this,AC)),ku(this,AC,setTimeout(()=>{var i;ku(this,AC,null),(i=this.parent)==null||i.moveEditorInDOM(this)},0))}_setParentAndPosition(i,s,_){i.changeParent(this),this.x=s,this.y=_,this.fixAndSetPosition()}getRect(i,s,_=this.rotation){const _e=this.parentScale,[ct,Mt]=this.pageDimensions,[Ft,Ut]=this.pageTranslation,Xt=i/_e,Kt=s/_e,nr=this.x*ct,rr=this.y*Mt,or=this.width*ct,hr=this.height*Mt;switch(_){case 0:return[nr+Xt+Ft,Mt-rr-Kt-hr+Ut,nr+Xt+or+Ft,Mt-rr-Kt+Ut];case 90:return[nr+Kt+Ft,Mt-rr+Xt+Ut,nr+Kt+hr+Ft,Mt-rr+Xt+or+Ut];case 180:return[nr-Xt-or+Ft,Mt-rr+Kt+Ut,nr-Xt+Ft,Mt-rr+Kt+hr+Ut];case 270:return[nr-Kt-hr+Ft,Mt-rr-Xt-or+Ut,nr-Kt+Ft,Mt-rr-Xt+Ut];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(i,s){const[_,_e,ct,Mt]=i,Ft=ct-_,Ut=Mt-_e;switch(this.rotation){case 0:return[_,s-Mt,Ft,Ut];case 90:return[_,s-_e,Ut,Ft];case 180:return[ct,s-_e,Ft,Ut];case 270:return[ct,s-Mt,Ut,Ft];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){ku(this,Oq,!0)}disableEditMode(){ku(this,Oq,!1)}isInEditMode(){return to(this,Oq)}shouldGetKeyboardEvents(){return to(this,r3)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var s,_;const i=this._uiManager._signal;(s=this.div)==null||s.addEventListener("focusin",to(this,zle),{signal:i}),(_=this.div)==null||_.addEventListener("focusout",to(this,Vle),{signal:i})}rotate(i){}serialize(i=!1,s=null){unreachable("An editor must be serializable")}static deserialize(i,s,_){const _e=new this.prototype.constructor({parent:s,id:s.getNextId(),uiManager:_});_e.rotation=i.rotation,ku(_e,Aq,i.accessibilityData);const[ct,Mt]=_e.pageDimensions,[Ft,Ut,Xt,Kt]=_e.getRectInCurrentCoords(i.rect,Mt);return _e.x=Ft/ct,_e.y=Ut/Mt,_e.width=Xt/ct,_e.height=Kt/Mt,_e}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.div.removeEventListener("focusin",to(this,zle)),this.div.removeEventListener("focusout",to(this,Vle)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),to(this,AC)&&(clearTimeout(to(this,AC)),ku(this,AC,null)),Nu(this,Sy,_de).call(this),this.removeEditToolbar(),to(this,dS)){for(const i of to(this,dS).values())clearTimeout(i);ku(this,dS,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(Nu(this,Sy,x1e).call(this),to(this,d0).classList.remove("hidden"),bindEvents(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(i){if(!this.isResizable||i.target!==this.div||i.key!=="Enter")return;this._uiManager.setSelected(this),ku(this,Dq,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const s=to(this,d0).children;if(!to(this,pC)){ku(this,pC,Array.from(s));const Mt=Nu(this,Sy,S1e).bind(this),Ft=Nu(this,Sy,$1e).bind(this),Ut=this._uiManager._signal;for(const Xt of to(this,pC)){const Kt=Xt.getAttribute("data-resizer-name");Xt.setAttribute("role","spinbutton"),Xt.addEventListener("keydown",Mt,{signal:Ut}),Xt.addEventListener("blur",Ft,{signal:Ut}),Xt.addEventListener("focus",Nu(this,Sy,C1e).bind(this,Kt),{signal:Ut}),Ry._l10nPromise.get(`pdfjs-editor-resizer-label-${Kt}`).then(nr=>Xt.setAttribute("aria-label",nr))}}const _=to(this,pC)[0];let _e=0;for(const Mt of s){if(Mt===_)break;_e++}const ct=(360-this.rotation+this.parentRotation)%360/90*(to(this,pC).length/4);if(ct!==_e){if(ct<_e)for(let Ft=0;Ft<_e-ct;Ft++)to(this,d0).append(to(this,d0).firstChild);else if(ct>_e)for(let Ft=0;Ft<ct-_e;Ft++)to(this,d0).firstChild.before(to(this,d0).lastChild);let Mt=0;for(const Ft of s){const Ut=to(this,pC)[Mt++].getAttribute("data-resizer-name");Ry._l10nPromise.get(`pdfjs-editor-resizer-label-${Ut}`).then(Xt=>Ft.setAttribute("aria-label",Xt))}}Nu(this,Sy,Jme).call(this,0),ku(this,r3,!0),to(this,d0).firstChild.focus({focusVisible:!0}),i.preventDefault(),i.stopImmediatePropagation()}_resizeWithKeyboard(i,s){to(this,r3)&&Nu(this,Sy,Zme).call(this,to(this,ohe),{movementX:i,movementY:s})}_stopResizingWithKeyboard(){Nu(this,Sy,_de).call(this),this.div.focus()}select(){var i,s;this.makeResizable(),(i=this.div)==null||i.classList.add("selectedEditor"),to(this,C0)?(s=to(this,C0))==null||s.show():this.addEditToolbar().then(()=>{var _,_e;(_=this.div)!=null&&_.classList.contains("selectedEditor")&&((_e=to(this,C0))==null||_e.show())})}unselect(){var i,s,_,_e;(i=to(this,d0))==null||i.classList.add("hidden"),(s=this.div)==null||s.classList.remove("selectedEditor"),(_=this.div)!=null&&_.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(_e=to(this,C0))==null||_e.hide()}updateParams(i,s){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return to(this,she)}set isEditing(i){ku(this,she,i),this.parent&&(i?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(i,s){ku(this,Pq,!0);const _=i/s,{style:_e}=this.div;_e.aspectRatio=_,_e.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(i,s=!1){if(s){to(this,dS)||ku(this,dS,new Map);const{action:_}=i;let _e=to(this,dS).get(_);return _e&&clearTimeout(_e),_e=setTimeout(()=>{this._reportTelemetry(i),to(this,dS).delete(_),to(this,dS).size===0&&ku(this,dS,null)},Ry._telemetryTimeout),void to(this,dS).set(_,_e)}i.type||(i.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:i}})}show(i=this._isVisible){this.div.classList.toggle("hidden",!i),this._isVisible=i}enable(){this.div&&(this.div.tabIndex=0),ku(this,Ble,!1)}disable(){this.div&&(this.div.tabIndex=-1),ku(this,Ble,!0)}renderAnnotationElement(i){let s=i.container.querySelector(".annotationContent");if(s){if(s.nodeName==="CANVAS"){const _=s;s=document.createElement("div"),s.classList.add("annotationContent",this.editorType),_.before(s)}}else s=document.createElement("div"),s.classList.add("annotationContent",this.editorType),i.container.prepend(s);return s}resetAnnotationElement(i){const{firstChild:s}=i.container;s.nodeName==="DIV"&&s.classList.contains("annotationContent")&&s.remove()}};Aq=new WeakMap,pC=new WeakMap,x0=new WeakMap,Ble=new WeakMap,Pq=new WeakMap,d0=new WeakMap,Dq=new WeakMap,zle=new WeakMap,Vle=new WeakMap,C0=new WeakMap,ohe=new WeakMap,Mq=new WeakMap,r9=new WeakMap,she=new WeakMap,Oq=new WeakMap,r3=new WeakMap,AC=new WeakMap,Ule=new WeakMap,Wle=new WeakMap,dS=new WeakMap,lhe=new WeakMap,nme=new WeakMap,Sy=new WeakSet,Xme=function([i,s],_,_e){[_,_e]=this.screenToPageTranslation(_,_e),this.x+=_/i,this.y+=_e/s,this.fixAndSetPosition()},uhe=new WeakSet,qme=function(i,s,_){switch(_){case 90:return[s,-i];case 180:return[-i,-s];case 270:return[-s,i];default:return[i,s]}},Kme=function(i){switch(i){case 90:{const[s,_]=this.pageDimensions;return[0,-s/_,_/s,0]}case 180:return[-1,0,0,-1];case 270:{const[s,_]=this.pageDimensions;return[0,s/_,-_/s,0]}default:return[1,0,0,1]}},x1e=function(){if(to(this,d0))return;ku(this,d0,document.createElement("div")),to(this,d0).classList.add("resizers");const i=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],s=this._uiManager._signal;for(const _ of i){const _e=document.createElement("div");to(this,d0).append(_e),_e.classList.add("resizer",_),_e.setAttribute("data-resizer-name",_),_e.addEventListener("pointerdown",Nu(this,Sy,w1e).bind(this,_),{signal:s}),_e.addEventListener("contextmenu",noContextMenu,{signal:s}),_e.tabIndex=-1}this.div.prepend(to(this,d0))},w1e=function(i,s){var fr;s.preventDefault();const{isMac:_}=util_FeatureTest.platform;if(s.button!==0||s.ctrlKey&&_)return;(fr=to(this,x0))==null||fr.toggle(!1);const _e=Nu(this,Sy,Zme).bind(this,i),ct=this._isDraggable;this._isDraggable=!1;const Mt=this._uiManager._signal,Ft={passive:!0,capture:!0,signal:Mt};this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",_e,Ft),window.addEventListener("contextmenu",noContextMenu,{signal:Mt});const Ut=this.x,Xt=this.y,Kt=this.width,nr=this.height,rr=this.parent.div.style.cursor,or=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(s.target).cursor;const hr=()=>{var yr;this.parent.togglePointerEvents(!0),(yr=to(this,x0))==null||yr.toggle(!0),this._isDraggable=ct,window.removeEventListener("pointerup",hr),window.removeEventListener("blur",hr),window.removeEventListener("pointermove",_e,Ft),window.removeEventListener("contextmenu",noContextMenu),this.parent.div.style.cursor=rr,this.div.style.cursor=or,Nu(this,Sy,Yme).call(this,Ut,Xt,Kt,nr)};window.addEventListener("pointerup",hr,{signal:Mt}),window.addEventListener("blur",hr,{signal:Mt})},Yme=function(i,s,_,_e){const ct=this.x,Mt=this.y,Ft=this.width,Ut=this.height;ct===i&&Mt===s&&Ft===_&&Ut===_e||this.addCommands({cmd:()=>{this.width=Ft,this.height=Ut,this.x=ct,this.y=Mt;const[Xt,Kt]=this.parentDimensions;this.setDims(Xt*Ft,Kt*Ut),this.fixAndSetPosition()},undo:()=>{this.width=_,this.height=_e,this.x=i,this.y=s;const[Xt,Kt]=this.parentDimensions;this.setDims(Xt*_,Kt*_e),this.fixAndSetPosition()},mustExec:!0})},Zme=function(i,s){const[_,_e]=this.parentDimensions,ct=this.x,Mt=this.y,Ft=this.width,Ut=this.height,Xt=Ry.MIN_SIZE/_,Kt=Ry.MIN_SIZE/_e,nr=Ap=>Math.round(1e4*Ap)/1e4,rr=Nu(this,Sy,Kme).call(this,this.rotation),or=(Ap,Pp)=>[rr[0]*Ap+rr[2]*Pp,rr[1]*Ap+rr[3]*Pp],hr=Nu(this,Sy,Kme).call(this,360-this.rotation);let fr,yr,Lr=!1,Br=!1;switch(i){case"topLeft":Lr=!0,fr=(Ap,Pp)=>[0,0],yr=(Ap,Pp)=>[Ap,Pp];break;case"topMiddle":fr=(Ap,Pp)=>[Ap/2,0],yr=(Ap,Pp)=>[Ap/2,Pp];break;case"topRight":Lr=!0,fr=(Ap,Pp)=>[Ap,0],yr=(Ap,Pp)=>[0,Pp];break;case"middleRight":Br=!0,fr=(Ap,Pp)=>[Ap,Pp/2],yr=(Ap,Pp)=>[0,Pp/2];break;case"bottomRight":Lr=!0,fr=(Ap,Pp)=>[Ap,Pp],yr=(Ap,Pp)=>[0,0];break;case"bottomMiddle":fr=(Ap,Pp)=>[Ap/2,Pp],yr=(Ap,Pp)=>[Ap/2,0];break;case"bottomLeft":Lr=!0,fr=(Ap,Pp)=>[0,Pp],yr=(Ap,Pp)=>[Ap,0];break;case"middleLeft":Br=!0,fr=(Ap,Pp)=>[0,Pp/2],yr=(Ap,Pp)=>[Ap,Pp/2]}const Vr=fr(Ft,Ut),Wr=yr(Ft,Ut);let ro=or(...Wr);const no=nr(ct+ro[0]),so=nr(Mt+ro[1]);let ko=1,To=1,[oo,No]=this.screenToPageTranslation(s.movementX,s.movementY);if([oo,No]=((Ap,Pp)=>[hr[0]*Ap+hr[2]*Pp,hr[1]*Ap+hr[3]*Pp])(oo/_,No/_e),Lr){const Ap=Math.hypot(Ft,Ut);ko=To=Math.max(Math.min(Math.hypot(Wr[0]-Vr[0]-oo,Wr[1]-Vr[1]-No)/Ap,1/Ft,1/Ut),Xt/Ft,Kt/Ut)}else Br?ko=Math.max(Xt,Math.min(1,Math.abs(Wr[0]-Vr[0]-oo)))/Ft:To=Math.max(Kt,Math.min(1,Math.abs(Wr[1]-Vr[1]-No)))/Ut;const As=nr(Ft*ko),Ks=nr(Ut*To);ro=or(...yr(As,Ks));const vu=no-ro[0],Fu=so-ro[1];this.width=As,this.height=Ks,this.x=vu,this.y=Fu,this.setDims(_*As,_e*Ks),this.fixAndSetPosition()},Qme=function(i){const{isMac:s}=util_FeatureTest.platform;i.ctrlKey&&!s||i.shiftKey||i.metaKey&&s?this.parent.toggleSelected(this):this.parent.setSelected(this)},E1e=function(i){const s=this._uiManager.isSelected(this);let _,_e;this._uiManager.setUpDragSession();const ct=this._uiManager._signal;s&&(this.div.classList.add("moving"),_={passive:!0,capture:!0,signal:ct},ku(this,Ule,i.clientX),ku(this,Wle,i.clientY),_e=Ft=>{const{clientX:Ut,clientY:Xt}=Ft,[Kt,nr]=this.screenToPageTranslation(Ut-to(this,Ule),Xt-to(this,Wle));ku(this,Ule,Ut),ku(this,Wle,Xt),this._uiManager.dragSelectedEditors(Kt,nr)},window.addEventListener("pointermove",_e,_));const Mt=()=>{window.removeEventListener("pointerup",Mt),window.removeEventListener("blur",Mt),s&&(this.div.classList.remove("moving"),window.removeEventListener("pointermove",_e,_)),ku(this,Mq,!1),this._uiManager.endDragSession()||Nu(this,Sy,Qme).call(this,i)};window.addEventListener("pointerup",Mt,{signal:ct}),window.addEventListener("blur",Mt,{signal:ct})},S1e=function(i){Ry._resizerKeyboardManager.exec(this,i)},$1e=function(i){var s;to(this,r3)&&((s=i.relatedTarget)==null?void 0:s.parentNode)!==to(this,d0)&&Nu(this,Sy,_de).call(this)},C1e=function(i){ku(this,ohe,to(this,r3)?i:"")},Jme=function(i){if(to(this,pC))for(const s of to(this,pC))s.tabIndex=i},_de=function(){if(ku(this,r3,!1),Nu(this,Sy,Jme).call(this,-1),to(this,Dq)){const{savedX:i,savedY:s,savedWidth:_,savedHeight:_e}=to(this,Dq);Nu(this,Sy,Yme).call(this,i,s,_,_e),ku(this,Dq,null)}},Ku(Ry,uhe),vy(Ry,"_borderLineWidth",-1),vy(Ry,"_colorManager",new ColorManager),vy(Ry,"_zIndex",1),vy(Ry,"_telemetryTimeout",1e3);let AnnotationEditor=Ry;class FakeEditor extends AnnotationEditor{constructor(i){super(i),this.annotationElementId=i.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}const SEED=3285377520,MASK_HIGH=4294901760,MASK_LOW=65535;class MurmurHash3_64{constructor(i){this.h1=i?4294967295&i:SEED,this.h2=i?4294967295&i:SEED}update(i){let s,_;if(typeof i=="string"){s=new Uint8Array(2*i.length),_=0;for(let fr=0,yr=i.length;fr<yr;fr++){const Lr=i.charCodeAt(fr);Lr<=255?s[_++]=Lr:(s[_++]=Lr>>>8,s[_++]=255&Lr)}}else{if(!ArrayBuffer.isView(i))throw new Error("Invalid data format, must be a string or TypedArray.");s=i.slice(),_=s.byteLength}const _e=_>>2,ct=_-4*_e,Mt=new Uint32Array(s.buffer,0,_e);let Ft=0,Ut=0,Xt=this.h1,Kt=this.h2;const nr=3432918353,rr=461845907,or=nr&MASK_LOW,hr=rr&MASK_LOW;for(let fr=0;fr<_e;fr++)1&fr?(Ft=Mt[fr],Ft=Ft*nr&MASK_HIGH|Ft*or&MASK_LOW,Ft=Ft<<15|Ft>>>17,Ft=Ft*rr&MASK_HIGH|Ft*hr&MASK_LOW,Xt^=Ft,Xt=Xt<<13|Xt>>>19,Xt=5*Xt+3864292196):(Ut=Mt[fr],Ut=Ut*nr&MASK_HIGH|Ut*or&MASK_LOW,Ut=Ut<<15|Ut>>>17,Ut=Ut*rr&MASK_HIGH|Ut*hr&MASK_LOW,Kt^=Ut,Kt=Kt<<13|Kt>>>19,Kt=5*Kt+3864292196);switch(Ft=0,ct){case 3:Ft^=s[4*_e+2]<<16;case 2:Ft^=s[4*_e+1]<<8;case 1:Ft^=s[4*_e],Ft=Ft*nr&MASK_HIGH|Ft*or&MASK_LOW,Ft=Ft<<15|Ft>>>17,Ft=Ft*rr&MASK_HIGH|Ft*hr&MASK_LOW,1&_e?Xt^=Ft:Kt^=Ft}this.h1=Xt,this.h2=Kt}hexdigest(){let i=this.h1,s=this.h2;return i^=s>>>1,i=3981806797*i&MASK_HIGH|36045*i&MASK_LOW,s=4283543511*s&MASK_HIGH|(2950163797*(s<<16|i>>>16)&MASK_HIGH)>>>16,i^=s>>>1,i=444984403*i&MASK_HIGH|60499*i&MASK_LOW,s=3301882366*s&MASK_HIGH|(3120437893*(s<<16|i>>>16)&MASK_HIGH)>>>16,i^=s>>>1,(i>>>0).toString(16).padStart(8,"0")+(s>>>0).toString(16).padStart(8,"0")}}const SerializableEmpty=Object.freeze({map:null,hash:"",transfer:void 0});var Fq,h0,ame,_1e;class AnnotationStorage{constructor(){Ku(this,ame);Ku(this,Fq,!1);Ku(this,h0,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(i,s){const _=to(this,h0).get(i);return _===void 0?s:Object.assign(s,_)}getRawValue(i){return to(this,h0).get(i)}remove(i){if(to(this,h0).delete(i),to(this,h0).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const s of to(this,h0).values())if(s instanceof AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(i,s){const _=to(this,h0).get(i);let _e=!1;if(_!==void 0)for(const[ct,Mt]of Object.entries(s))_[ct]!==Mt&&(_e=!0,_[ct]=Mt);else _e=!0,to(this,h0).set(i,s);_e&&Nu(this,ame,_1e).call(this),s instanceof AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(s.constructor._type)}has(i){return to(this,h0).has(i)}getAll(){return to(this,h0).size>0?objectFromMap(to(this,h0)):null}setAll(i){for(const[s,_]of Object.entries(i))this.setValue(s,_)}get size(){return to(this,h0).size}resetModified(){to(this,Fq)&&(ku(this,Fq,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new PrintAnnotationStorage(this)}get serializable(){if(to(this,h0).size===0)return SerializableEmpty;const i=new Map,s=new MurmurHash3_64,_=[],_e=Object.create(null);let ct=!1;for(const[Mt,Ft]of to(this,h0)){const Ut=Ft instanceof AnnotationEditor?Ft.serialize(!1,_e):Ft;Ut&&(i.set(Mt,Ut),s.update(`${Mt}:${JSON.stringify(Ut)}`),ct||(ct=!!Ut.bitmap))}if(ct)for(const Mt of i.values())Mt.bitmap&&_.push(Mt.bitmap);return i.size>0?{map:i,hash:s.hexdigest(),transfer:_}:SerializableEmpty}get editorStats(){let i=null;const s=new Map;for(const _ of to(this,h0).values()){if(!(_ instanceof AnnotationEditor))continue;const _e=_.telemetryFinalData;if(!_e)continue;const{type:ct}=_e;s.has(ct)||s.set(ct,Object.getPrototypeOf(_).constructor),i||(i=Object.create(null));const Mt=i[ct]||(i[ct]=new Map);for(const[Ft,Ut]of Object.entries(_e)){if(Ft==="type")continue;let Xt=Mt.get(Ft);Xt||(Xt=new Map,Mt.set(Ft,Xt));const Kt=Xt.get(Ut)??0;Xt.set(Ut,Kt+1)}}for(const[_,_e]of s)i[_]=_e.computeTelemetryFinalData(i[_]);return i}}Fq=new WeakMap,h0=new WeakMap,ame=new WeakSet,_1e=function(){to(this,Fq)||(ku(this,Fq,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var che;class PrintAnnotationStorage extends AnnotationStorage{constructor(s){super();Ku(this,che);const{map:_,hash:_e,transfer:ct}=s.serializable,Mt=structuredClone(_,ct?{transfer:ct}:null);ku(this,che,{map:Mt,hash:_e,transfer:ct})}get print(){unreachable("Should not call PrintAnnotationStorage.print")}get serializable(){return to(this,che)}}che=new WeakMap;var Hle;class FontLoader{constructor({ownerDocument:i=globalThis.document,styleElement:s=null}){Ku(this,Hle,new Set);this._document=i,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(i){this.nativeFontFaces.add(i),this._document.fonts.add(i)}removeNativeFontFace(i){this.nativeFontFaces.delete(i),this._document.fonts.delete(i)}insertRule(i){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const s=this.styleElement.sheet;s.insertRule(i,s.cssRules.length)}clear(){for(const i of this.nativeFontFaces)this._document.fonts.delete(i);this.nativeFontFaces.clear(),to(this,Hle).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:i,_inspectFont:s}){if(i&&!to(this,Hle).has(i.loadedName))if(assert(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:_,src:_e,style:ct}=i,Mt=new FontFace(_,_e,ct);this.addNativeFontFace(Mt);try{await Mt.load(),to(this,Hle).add(_),s==null||s(i)}catch{warn(`Cannot load system font: ${i.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(Mt)}}else unreachable("Not implemented: loadSystemFont without the Font Loading API.")}async bind(i){if(i.attached||i.missingFile&&!i.systemFontInfo)return;if(i.attached=!0,i.systemFontInfo)return void await this.loadSystemFont(i);if(this.isFontLoadingAPISupported){const _=i.createNativeFontFace();if(_){this.addNativeFontFace(_);try{await _.loaded}catch(_e){throw warn(`Failed to load font '${_.family}': '${_e}'.`),i.disableFontFace=!0,_e}}return}const s=i.createFontFaceRule();if(s){if(this.insertRule(s),this.isSyncFontLoadingSupported)return;await new Promise(_=>{const _e=this._queueLoadingCallback(_);this._prepareFontLoadEvent(i,_e)})}}get isFontLoadingAPISupported(){var i;return shadow(this,"isFontLoadingAPISupported",!!((i=this._document)!=null&&i.fonts))}get isSyncFontLoadingSupported(){let i=!1;return(isNodeJS||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(i=!0),shadow(this,"isSyncFontLoadingSupported",i)}_queueLoadingCallback(i){const{loadingRequests:s}=this,_={done:!1,complete:function(){for(assert(!_.done,"completeRequest() cannot be called twice."),_.done=!0;s.length>0&&s[0].done;){const _e=s.shift();setTimeout(_e.callback,0)}},callback:i};return s.push(_),_}get _loadTestFont(){return shadow(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(i,s){function _(yr,Lr){return yr.charCodeAt(Lr)<<24|yr.charCodeAt(Lr+1)<<16|yr.charCodeAt(Lr+2)<<8|255&yr.charCodeAt(Lr+3)}function _e(yr,Lr,Br,Vr){return yr.substring(0,Lr)+Vr+yr.substring(Lr+Br)}let ct,Mt;const Ft=this._document.createElement("canvas");Ft.width=1,Ft.height=1;const Ut=Ft.getContext("2d");let Xt=0;const Kt=`lt${Date.now()}${this.loadTestFontId++}`;let nr=this._loadTestFont;nr=_e(nr,976,Kt.length,Kt);const rr=1482184792;let or=_(nr,16);for(ct=0,Mt=Kt.length-3;ct<Mt;ct+=4)or=or-rr+_(Kt,ct)|0;ct<Kt.length&&(or=or-rr+_(Kt+"XXX",ct)|0),nr=_e(nr,16,4,string32(or));const hr=`@font-face {font-family:"${Kt}";src:${`url(data:font/opentype;base64,${btoa(nr)});`}}`;this.insertRule(hr);const fr=this._document.createElement("div");fr.style.visibility="hidden",fr.style.width=fr.style.height="10px",fr.style.position="absolute",fr.style.top=fr.style.left="0px";for(const yr of[i.loadedName,Kt]){const Lr=this._document.createElement("span");Lr.textContent="Hi",Lr.style.fontFamily=yr,fr.append(Lr)}this._document.body.append(fr),function yr(Lr,Br){if(++Xt>30)return warn("Load test font never loaded."),void Br();Ut.font="30px "+Lr,Ut.fillText(".",0,20),Ut.getImageData(0,0,1,1).data[3]>0?Br():setTimeout(yr.bind(null,Lr,Br))}(Kt,()=>{fr.remove(),s.complete()})}}Hle=new WeakMap;class FontFaceObject{constructor(i,{disableFontFace:s=!1,inspectFont:_=null}){this.compiledGlyphs=Object.create(null);for(const _e in i)this[_e]=i[_e];this.disableFontFace=s===!0,this._inspectFont=_}createNativeFontFace(){var s;if(!this.data||this.disableFontFace)return null;let i;if(this.cssFontInfo){const _={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(_.style=`oblique ${this.cssFontInfo.italicAngle}deg`),i=new FontFace(this.cssFontInfo.fontFamily,this.data,_)}else i=new FontFace(this.loadedName,this.data,{});return(s=this._inspectFont)==null||s.call(this,this),i}createFontFaceRule(){var _e;if(!this.data||this.disableFontFace)return null;const i=bytesToString(this.data),s=`url(data:${this.mimetype};base64,${btoa(i)});`;let _;if(this.cssFontInfo){let ct=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(ct+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),_=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${ct}src:${s}}`}else _=`@font-face {font-family:"${this.loadedName}";src:${s}}`;return(_e=this._inspectFont)==null||_e.call(this,this,s),_}getPathGenerator(i,s){if(this.compiledGlyphs[s]!==void 0)return this.compiledGlyphs[s];let _;try{_=i.get(this.loadedName+"_path_"+s)}catch(ct){warn(`getPathGenerator - ignoring character: "${ct}".`)}if(!Array.isArray(_)||_.length===0)return this.compiledGlyphs[s]=function(ct,Mt){};const _e=[];for(let ct=0,Mt=_.length;ct<Mt;)switch(_[ct++]){case FontRenderOps.BEZIER_CURVE_TO:{const[Ft,Ut,Xt,Kt,nr,rr]=_.slice(ct,ct+6);_e.push(or=>or.bezierCurveTo(Ft,Ut,Xt,Kt,nr,rr)),ct+=6}break;case FontRenderOps.MOVE_TO:{const[Ft,Ut]=_.slice(ct,ct+2);_e.push(Xt=>Xt.moveTo(Ft,Ut)),ct+=2}break;case FontRenderOps.LINE_TO:{const[Ft,Ut]=_.slice(ct,ct+2);_e.push(Xt=>Xt.lineTo(Ft,Ut)),ct+=2}break;case FontRenderOps.QUADRATIC_CURVE_TO:{const[Ft,Ut,Xt,Kt]=_.slice(ct,ct+4);_e.push(nr=>nr.quadraticCurveTo(Ft,Ut,Xt,Kt)),ct+=4}break;case FontRenderOps.RESTORE:_e.push(Ft=>Ft.restore());break;case FontRenderOps.SAVE:_e.push(Ft=>Ft.save());break;case FontRenderOps.SCALE:assert(_e.length===2,"Scale command is only valid at the third position.");break;case FontRenderOps.TRANSFORM:{const[Ft,Ut,Xt,Kt,nr,rr]=_.slice(ct,ct+6);_e.push(or=>or.transform(Ft,Ut,Xt,Kt,nr,rr)),ct+=6}break;case FontRenderOps.TRANSLATE:{const[Ft,Ut]=_.slice(ct,ct+2);_e.push(Xt=>Xt.translate(Ft,Ut)),ct+=2}}return this.compiledGlyphs[s]=function(ct,Mt){_e[0](ct),_e[1](ct),ct.scale(Mt,-Mt);for(let Ft=2,Ut=_e.length;Ft<Ut;Ft++)_e[Ft](ct)}}}if(isNodeJS){var packageCapability=Promise.withResolvers(),packageMap=null;(async()=>{const i=await __vitePreload(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),s=await __vitePreload(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),_=await __vitePreload(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),_e=await __vitePreload(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]);return new Map(Object.entries({fs:i,http:s,https:_,url:_e,canvas:void 0,path2d:void 0}))})().then(i=>{packageMap=i,packageCapability.resolve()},i=>{warn(`loadPackages: ${i}`),packageMap=new Map,packageCapability.resolve()})}class NodePackages{static get promise(){return packageCapability.promise}static get(i){return packageMap==null?void 0:packageMap.get(i)}}const node_utils_fetchData=function(o){return NodePackages.get("fs").promises.readFile(o).then(i=>new Uint8Array(i))};class NodeFilterFactory extends BaseFilterFactory{}class NodeCanvasFactory extends BaseCanvasFactory{_createCanvas(i,s){return NodePackages.get("canvas").createCanvas(i,s)}}class NodeCMapReaderFactory extends BaseCMapReaderFactory{_fetchData(i,s){return node_utils_fetchData(i).then(_=>({cMapData:_,compressionType:s}))}}class NodeStandardFontDataFactory extends BaseStandardFontDataFactory{_fetchData(i){return node_utils_fetchData(i)}}const PathType={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function applyBoundingBox(o,i){if(!i)return;const s=i[2]-i[0],_=i[3]-i[1],_e=new Path2D;_e.rect(i[0],i[1],s,_),o.clip(_e)}class BaseShadingPattern{constructor(){this.constructor===BaseShadingPattern&&unreachable("Cannot initialize BaseShadingPattern.")}getPattern(){unreachable("Abstract method `getPattern` called.")}}class RadialAxialShadingPattern extends BaseShadingPattern{constructor(i){super(),this._type=i[1],this._bbox=i[2],this._colorStops=i[3],this._p0=i[4],this._p1=i[5],this._r0=i[6],this._r1=i[7],this.matrix=null}_createGradient(i){let s;this._type==="axial"?s=i.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(s=i.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const _ of this._colorStops)s.addColorStop(_[0],_[1]);return s}getPattern(i,s,_,_e){let ct;if(_e===PathType.STROKE||_e===PathType.FILL){const Mt=s.current.getClippedPathBoundingBox(_e,getCurrentTransform(i))||[0,0,0,0],Ft=Math.ceil(Mt[2]-Mt[0])||1,Ut=Math.ceil(Mt[3]-Mt[1])||1,Xt=s.cachedCanvases.getCanvas("pattern",Ft,Ut,!0),Kt=Xt.context;Kt.clearRect(0,0,Kt.canvas.width,Kt.canvas.height),Kt.beginPath(),Kt.rect(0,0,Kt.canvas.width,Kt.canvas.height),Kt.translate(-Mt[0],-Mt[1]),_=Util.transform(_,[1,0,0,1,Mt[0],Mt[1]]),Kt.transform(...s.baseTransform),this.matrix&&Kt.transform(...this.matrix),applyBoundingBox(Kt,this._bbox),Kt.fillStyle=this._createGradient(Kt),Kt.fill(),ct=i.createPattern(Xt.canvas,"no-repeat");const nr=new DOMMatrix(_);ct.setTransform(nr)}else applyBoundingBox(i,this._bbox),ct=this._createGradient(i);return ct}}function drawTriangle(o,i,s,_,_e,ct,Mt,Ft){const Ut=i.coords,Xt=i.colors,Kt=o.data,nr=4*o.width;let rr;Ut[s+1]>Ut[_+1]&&(rr=s,s=_,_=rr,rr=ct,ct=Mt,Mt=rr),Ut[_+1]>Ut[_e+1]&&(rr=_,_=_e,_e=rr,rr=Mt,Mt=Ft,Ft=rr),Ut[s+1]>Ut[_+1]&&(rr=s,s=_,_=rr,rr=ct,ct=Mt,Mt=rr);const or=(Ut[s]+i.offsetX)*i.scaleX,hr=(Ut[s+1]+i.offsetY)*i.scaleY,fr=(Ut[_]+i.offsetX)*i.scaleX,yr=(Ut[_+1]+i.offsetY)*i.scaleY,Lr=(Ut[_e]+i.offsetX)*i.scaleX,Br=(Ut[_e+1]+i.offsetY)*i.scaleY;if(hr>=Br)return;const Vr=Xt[ct],Wr=Xt[ct+1],ro=Xt[ct+2],no=Xt[Mt],so=Xt[Mt+1],ko=Xt[Mt+2],To=Xt[Ft],oo=Xt[Ft+1],No=Xt[Ft+2],As=Math.round(hr),Ks=Math.round(Br);let vu,Fu,Ap,Pp,Lo,Au,Mp,Lp;for(let Op=As;Op<=Ks;Op++){if(Op<yr){const Yp=Op<hr?0:(hr-Op)/(hr-yr);vu=or-(or-fr)*Yp,Fu=Vr-(Vr-no)*Yp,Ap=Wr-(Wr-so)*Yp,Pp=ro-(ro-ko)*Yp}else{let Yp;Yp=Op>Br?1:yr===Br?0:(yr-Op)/(yr-Br),vu=fr-(fr-Lr)*Yp,Fu=no-(no-To)*Yp,Ap=so-(so-oo)*Yp,Pp=ko-(ko-No)*Yp}let Fp;Fp=Op<hr?0:Op>Br?1:(hr-Op)/(hr-Br),Lo=or-(or-Lr)*Fp,Au=Vr-(Vr-To)*Fp,Mp=Wr-(Wr-oo)*Fp,Lp=ro-(ro-No)*Fp;const wm=Math.round(Math.min(vu,Lo)),Bp=Math.round(Math.max(vu,Lo));let Em=nr*Op+4*wm;for(let Yp=wm;Yp<=Bp;Yp++)Fp=(vu-Yp)/(vu-Lo),Fp<0?Fp=0:Fp>1&&(Fp=1),Kt[Em++]=Fu-(Fu-Au)*Fp|0,Kt[Em++]=Ap-(Ap-Mp)*Fp|0,Kt[Em++]=Pp-(Pp-Lp)*Fp|0,Kt[Em++]=255}}function drawFigure(o,i,s){const _=i.coords,_e=i.colors;let ct,Mt;switch(i.type){case"lattice":const Ft=i.verticesPerRow,Ut=Math.floor(_.length/Ft)-1,Xt=Ft-1;for(ct=0;ct<Ut;ct++){let Kt=ct*Ft;for(let nr=0;nr<Xt;nr++,Kt++)drawTriangle(o,s,_[Kt],_[Kt+1],_[Kt+Ft],_e[Kt],_e[Kt+1],_e[Kt+Ft]),drawTriangle(o,s,_[Kt+Ft+1],_[Kt+1],_[Kt+Ft],_e[Kt+Ft+1],_e[Kt+1],_e[Kt+Ft])}break;case"triangles":for(ct=0,Mt=_.length;ct<Mt;ct+=3)drawTriangle(o,s,_[ct],_[ct+1],_[ct+2],_e[ct],_e[ct+1],_e[ct+2]);break;default:throw new Error("illegal figure")}}class MeshShadingPattern extends BaseShadingPattern{constructor(i){super(),this._coords=i[2],this._colors=i[3],this._figures=i[4],this._bounds=i[5],this._bbox=i[7],this._background=i[8],this.matrix=null}_createMeshCanvas(i,s,_){const _e=Math.floor(this._bounds[0]),ct=Math.floor(this._bounds[1]),Mt=Math.ceil(this._bounds[2])-_e,Ft=Math.ceil(this._bounds[3])-ct,Ut=Math.min(Math.ceil(Math.abs(Mt*i[0]*1.1)),3e3),Xt=Math.min(Math.ceil(Math.abs(Ft*i[1]*1.1)),3e3),Kt=Mt/Ut,nr=Ft/Xt,rr={coords:this._coords,colors:this._colors,offsetX:-_e,offsetY:-ct,scaleX:1/Kt,scaleY:1/nr},or=Ut+4,hr=Xt+4,fr=_.getCanvas("mesh",or,hr,!1),yr=fr.context,Lr=yr.createImageData(Ut,Xt);if(s){const Br=Lr.data;for(let Vr=0,Wr=Br.length;Vr<Wr;Vr+=4)Br[Vr]=s[0],Br[Vr+1]=s[1],Br[Vr+2]=s[2],Br[Vr+3]=255}for(const Br of this._figures)drawFigure(Lr,Br,rr);return yr.putImageData(Lr,2,2),{canvas:fr.canvas,offsetX:_e-2*Kt,offsetY:ct-2*nr,scaleX:Kt,scaleY:nr}}getPattern(i,s,_,_e){let ct;if(applyBoundingBox(i,this._bbox),_e===PathType.SHADING)ct=Util.singularValueDecompose2dScale(getCurrentTransform(i));else if(ct=Util.singularValueDecompose2dScale(s.baseTransform),this.matrix){const Ft=Util.singularValueDecompose2dScale(this.matrix);ct=[ct[0]*Ft[0],ct[1]*Ft[1]]}const Mt=this._createMeshCanvas(ct,_e===PathType.SHADING?null:this._background,s.cachedCanvases);return _e!==PathType.SHADING&&(i.setTransform(...s.baseTransform),this.matrix&&i.transform(...this.matrix)),i.translate(Mt.offsetX,Mt.offsetY),i.scale(Mt.scaleX,Mt.scaleY),i.createPattern(Mt.canvas,"no-repeat")}}class DummyShadingPattern extends BaseShadingPattern{getPattern(){return"hotpink"}}function getShadingPattern(o){switch(o[0]){case"RadialAxial":return new RadialAxialShadingPattern(o);case"Mesh":return new MeshShadingPattern(o);case"Dummy":return new DummyShadingPattern}throw new Error(`Unknown IR type: ${o[0]}`)}const PaintType={COLORED:1,UNCOLORED:2},ime=class ime{constructor(i,s,_,_e,ct){this.operatorList=i[2],this.matrix=i[3],this.bbox=i[4],this.xstep=i[5],this.ystep=i[6],this.paintType=i[7],this.tilingType=i[8],this.color=s,this.ctx=_,this.canvasGraphicsFactory=_e,this.baseTransform=ct}createPatternCanvas(i){const s=this.operatorList,_=this.bbox,_e=this.xstep,ct=this.ystep,Mt=this.paintType,Ft=this.tilingType,Ut=this.color,Xt=this.canvasGraphicsFactory;info("TilingType: "+Ft);const Kt=_[0],nr=_[1],rr=_[2],or=_[3],hr=Util.singularValueDecompose2dScale(this.matrix),fr=Util.singularValueDecompose2dScale(this.baseTransform),yr=[hr[0]*fr[0],hr[1]*fr[1]],Lr=this.getSizeAndScale(_e,this.ctx.canvas.width,yr[0]),Br=this.getSizeAndScale(ct,this.ctx.canvas.height,yr[1]),Vr=i.cachedCanvases.getCanvas("pattern",Lr.size,Br.size,!0),Wr=Vr.context,ro=Xt.createCanvasGraphics(Wr);ro.groupLevel=i.groupLevel,this.setFillAndStrokeStyleToContext(ro,Mt,Ut);let no=Kt,so=nr,ko=rr,To=or;return Kt<0&&(no=0,ko+=Math.abs(Kt)),nr<0&&(so=0,To+=Math.abs(nr)),Wr.translate(-Lr.scale*no,-Br.scale*so),ro.transform(Lr.scale,0,0,Br.scale,0,0),Wr.save(),this.clipBbox(ro,no,so,ko,To),ro.baseTransform=getCurrentTransform(ro.ctx),ro.executeOperatorList(s),ro.endDrawing(),{canvas:Vr.canvas,scaleX:Lr.scale,scaleY:Br.scale,offsetX:no,offsetY:so}}getSizeAndScale(i,s,_){i=Math.abs(i);const _e=Math.max(ime.MAX_PATTERN_SIZE,s);let ct=Math.ceil(i*_);return ct>=_e?ct=_e:_=ct/i,{scale:_,size:ct}}clipBbox(i,s,_,_e,ct){const Mt=_e-s,Ft=ct-_;i.ctx.rect(s,_,Mt,Ft),i.current.updateRectMinMax(getCurrentTransform(i.ctx),[s,_,_e,ct]),i.clip(),i.endPath()}setFillAndStrokeStyleToContext(i,s,_){const _e=i.ctx,ct=i.current;switch(s){case PaintType.COLORED:const Mt=this.ctx;_e.fillStyle=Mt.fillStyle,_e.strokeStyle=Mt.strokeStyle,ct.fillColor=Mt.fillStyle,ct.strokeColor=Mt.strokeStyle;break;case PaintType.UNCOLORED:const Ft=Util.makeHexColor(_[0],_[1],_[2]);_e.fillStyle=Ft,_e.strokeStyle=Ft,ct.fillColor=Ft,ct.strokeColor=Ft;break;default:throw new FormatError(`Unsupported paint type: ${s}`)}}getPattern(i,s,_,_e){let ct=_;_e!==PathType.SHADING&&(ct=Util.transform(ct,s.baseTransform),this.matrix&&(ct=Util.transform(ct,this.matrix)));const Mt=this.createPatternCanvas(s);let Ft=new DOMMatrix(ct);Ft=Ft.translate(Mt.offsetX,Mt.offsetY),Ft=Ft.scale(1/Mt.scaleX,1/Mt.scaleY);const Ut=i.createPattern(Mt.canvas,"repeat");return Ut.setTransform(Ft),Ut}};vy(ime,"MAX_PATTERN_SIZE",3e3);let TilingPattern=ime;function convertBlackAndWhiteToRGBA({src:o,srcPos:i=0,dest:s,width:_,height:_e,nonBlackColor:ct=4294967295,inverseDecode:Mt=!1}){const Ft=util_FeatureTest.isLittleEndian?4278190080:255,[Ut,Xt]=Mt?[ct,Ft]:[Ft,ct],Kt=_>>3,nr=7&_,rr=o.length;s=new Uint32Array(s.buffer);let or=0;for(let hr=0;hr<_e;hr++){for(const yr=i+Kt;i<yr;i++){const Lr=i<rr?o[i]:255;s[or++]=128&Lr?Xt:Ut,s[or++]=64&Lr?Xt:Ut,s[or++]=32&Lr?Xt:Ut,s[or++]=16&Lr?Xt:Ut,s[or++]=8&Lr?Xt:Ut,s[or++]=4&Lr?Xt:Ut,s[or++]=2&Lr?Xt:Ut,s[or++]=1&Lr?Xt:Ut}if(nr===0)continue;const fr=i<rr?o[i++]:255;for(let yr=0;yr<nr;yr++)s[or++]=fr&1<<7-yr?Xt:Ut}return{srcPos:i,destPos:or}}const MIN_FONT_SIZE=16,MAX_FONT_SIZE=100,EXECUTION_TIME=15,EXECUTION_STEPS=10,MAX_SIZE_TO_COMPILE=1e3,FULL_CHUNK_HEIGHT=16;function mirrorContextOperations(o,i){if(o._removeMirroring)throw new Error("Context is already forwarding operations.");o.__originalSave=o.save,o.__originalRestore=o.restore,o.__originalRotate=o.rotate,o.__originalScale=o.scale,o.__originalTranslate=o.translate,o.__originalTransform=o.transform,o.__originalSetTransform=o.setTransform,o.__originalResetTransform=o.resetTransform,o.__originalClip=o.clip,o.__originalMoveTo=o.moveTo,o.__originalLineTo=o.lineTo,o.__originalBezierCurveTo=o.bezierCurveTo,o.__originalRect=o.rect,o.__originalClosePath=o.closePath,o.__originalBeginPath=o.beginPath,o._removeMirroring=()=>{o.save=o.__originalSave,o.restore=o.__originalRestore,o.rotate=o.__originalRotate,o.scale=o.__originalScale,o.translate=o.__originalTranslate,o.transform=o.__originalTransform,o.setTransform=o.__originalSetTransform,o.resetTransform=o.__originalResetTransform,o.clip=o.__originalClip,o.moveTo=o.__originalMoveTo,o.lineTo=o.__originalLineTo,o.bezierCurveTo=o.__originalBezierCurveTo,o.rect=o.__originalRect,o.closePath=o.__originalClosePath,o.beginPath=o.__originalBeginPath,delete o._removeMirroring},o.save=function(){i.save(),this.__originalSave()},o.restore=function(){i.restore(),this.__originalRestore()},o.translate=function(s,_){i.translate(s,_),this.__originalTranslate(s,_)},o.scale=function(s,_){i.scale(s,_),this.__originalScale(s,_)},o.transform=function(s,_,_e,ct,Mt,Ft){i.transform(s,_,_e,ct,Mt,Ft),this.__originalTransform(s,_,_e,ct,Mt,Ft)},o.setTransform=function(s,_,_e,ct,Mt,Ft){i.setTransform(s,_,_e,ct,Mt,Ft),this.__originalSetTransform(s,_,_e,ct,Mt,Ft)},o.resetTransform=function(){i.resetTransform(),this.__originalResetTransform()},o.rotate=function(s){i.rotate(s),this.__originalRotate(s)},o.clip=function(s){i.clip(s),this.__originalClip(s)},o.moveTo=function(s,_){i.moveTo(s,_),this.__originalMoveTo(s,_)},o.lineTo=function(s,_){i.lineTo(s,_),this.__originalLineTo(s,_)},o.bezierCurveTo=function(s,_,_e,ct,Mt,Ft){i.bezierCurveTo(s,_,_e,ct,Mt,Ft),this.__originalBezierCurveTo(s,_,_e,ct,Mt,Ft)},o.rect=function(s,_,_e,ct){i.rect(s,_,_e,ct),this.__originalRect(s,_,_e,ct)},o.closePath=function(){i.closePath(),this.__originalClosePath()},o.beginPath=function(){i.beginPath(),this.__originalBeginPath()}}class CachedCanvases{constructor(i){this.canvasFactory=i,this.cache=Object.create(null)}getCanvas(i,s,_){let _e;return this.cache[i]!==void 0?(_e=this.cache[i],this.canvasFactory.reset(_e,s,_)):(_e=this.canvasFactory.create(s,_),this.cache[i]=_e),_e}delete(i){delete this.cache[i]}clear(){for(const i in this.cache){const s=this.cache[i];this.canvasFactory.destroy(s),delete this.cache[i]}}}function drawImageAtIntegerCoords(o,i,s,_,_e,ct,Mt,Ft,Ut,Xt){const[Kt,nr,rr,or,hr,fr]=getCurrentTransform(o);if(nr===0&&rr===0){const yr=Mt*Kt+hr,Lr=Math.round(yr),Br=Ft*or+fr,Vr=Math.round(Br),Wr=(Mt+Ut)*Kt+hr,ro=Math.abs(Math.round(Wr)-Lr)||1,no=(Ft+Xt)*or+fr,so=Math.abs(Math.round(no)-Vr)||1;return o.setTransform(Math.sign(Kt),0,0,Math.sign(or),Lr,Vr),o.drawImage(i,s,_,_e,ct,0,0,ro,so),o.setTransform(Kt,nr,rr,or,hr,fr),[ro,so]}if(Kt===0&&or===0){const yr=Ft*rr+hr,Lr=Math.round(yr),Br=Mt*nr+fr,Vr=Math.round(Br),Wr=(Ft+Xt)*rr+hr,ro=Math.abs(Math.round(Wr)-Lr)||1,no=(Mt+Ut)*nr+fr,so=Math.abs(Math.round(no)-Vr)||1;return o.setTransform(0,Math.sign(nr),Math.sign(rr),0,Lr,Vr),o.drawImage(i,s,_,_e,ct,0,0,so,ro),o.setTransform(Kt,nr,rr,or,hr,fr),[so,ro]}return o.drawImage(i,s,_,_e,ct,Mt,Ft,Ut,Xt),[Math.hypot(Kt,nr)*Ut,Math.hypot(rr,or)*Xt]}function compileType3Glyph(o){const{width:i,height:s}=o;if(i>MAX_SIZE_TO_COMPILE||s>MAX_SIZE_TO_COMPILE)return null;const _=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),_e=i+1;let ct,Mt,Ft,Ut=new Uint8Array(_e*(s+1));const Xt=i+7&-8;let Kt=new Uint8Array(Xt*s),nr=0;for(const fr of o.data){let yr=128;for(;yr>0;)Kt[nr++]=fr&yr?0:255,yr>>=1}let rr=0;for(nr=0,Kt[nr]!==0&&(Ut[0]=1,++rr),Mt=1;Mt<i;Mt++)Kt[nr]!==Kt[nr+1]&&(Ut[Mt]=Kt[nr]?2:1,++rr),nr++;for(Kt[nr]!==0&&(Ut[Mt]=2,++rr),ct=1;ct<s;ct++){nr=ct*Xt,Ft=ct*_e,Kt[nr-Xt]!==Kt[nr]&&(Ut[Ft]=Kt[nr]?1:8,++rr);let fr=(Kt[nr]?4:0)+(Kt[nr-Xt]?8:0);for(Mt=1;Mt<i;Mt++)fr=(fr>>2)+(Kt[nr+1]?4:0)+(Kt[nr-Xt+1]?8:0),_[fr]&&(Ut[Ft+Mt]=_[fr],++rr),nr++;if(Kt[nr-Xt]!==Kt[nr]&&(Ut[Ft+Mt]=Kt[nr]?2:4,++rr),rr>1e3)return null}for(nr=Xt*(s-1),Ft=ct*_e,Kt[nr]!==0&&(Ut[Ft]=8,++rr),Mt=1;Mt<i;Mt++)Kt[nr]!==Kt[nr+1]&&(Ut[Ft+Mt]=Kt[nr]?4:8,++rr),nr++;if(Kt[nr]!==0&&(Ut[Ft+Mt]=4,++rr),rr>1e3)return null;const or=new Int32Array([0,_e,-1,0,-_e,0,0,0,1]),hr=new Path2D;for(ct=0;rr&&ct<=s;ct++){let fr=ct*_e;const yr=fr+i;for(;fr<yr&&!Ut[fr];)fr++;if(fr===yr)continue;hr.moveTo(fr%_e,ct);const Lr=fr;let Br=Ut[fr];do{const Vr=or[Br];do fr+=Vr;while(!Ut[fr]);const Wr=Ut[fr];Wr!==5&&Wr!==10?(Br=Wr,Ut[fr]=0):(Br=Wr&51*Br>>4,Ut[fr]&=Br>>2|Br<<2),hr.lineTo(fr%_e,fr/_e|0),Ut[fr]||--rr}while(Lr!==fr);--ct}return Kt=null,Ut=null,function(fr){fr.save(),fr.scale(1/i,-1/s),fr.translate(0,-s),fr.fill(hr),fr.beginPath(),fr.restore()}}class CanvasExtraState{constructor(i,s){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,i,s])}clone(){const i=Object.create(this);return i.clipBox=this.clipBox.slice(),i}setCurrentPoint(i,s){this.x=i,this.y=s}updatePathMinMax(i,s,_){[s,_]=Util.applyTransform([s,_],i),this.minX=Math.min(this.minX,s),this.minY=Math.min(this.minY,_),this.maxX=Math.max(this.maxX,s),this.maxY=Math.max(this.maxY,_)}updateRectMinMax(i,s){const _=Util.applyTransform(s,i),_e=Util.applyTransform(s.slice(2),i),ct=Util.applyTransform([s[0],s[3]],i),Mt=Util.applyTransform([s[2],s[1]],i);this.minX=Math.min(this.minX,_[0],_e[0],ct[0],Mt[0]),this.minY=Math.min(this.minY,_[1],_e[1],ct[1],Mt[1]),this.maxX=Math.max(this.maxX,_[0],_e[0],ct[0],Mt[0]),this.maxY=Math.max(this.maxY,_[1],_e[1],ct[1],Mt[1])}updateScalingPathMinMax(i,s){Util.scaleMinMax(i,s),this.minX=Math.min(this.minX,s[0]),this.minY=Math.min(this.minY,s[1]),this.maxX=Math.max(this.maxX,s[2]),this.maxY=Math.max(this.maxY,s[3])}updateCurvePathMinMax(i,s,_,_e,ct,Mt,Ft,Ut,Xt,Kt){const nr=Util.bezierBoundingBox(s,_,_e,ct,Mt,Ft,Ut,Xt,Kt);Kt||this.updateRectMinMax(i,nr)}getPathBoundingBox(i=PathType.FILL,s=null){const _=[this.minX,this.minY,this.maxX,this.maxY];if(i===PathType.STROKE){s||unreachable("Stroke bounding box must include transform.");const _e=Util.singularValueDecompose2dScale(s),ct=_e[0]*this.lineWidth/2,Mt=_e[1]*this.lineWidth/2;_[0]-=ct,_[1]-=Mt,_[2]+=ct,_[3]+=Mt}return _}updateClipFromPath(){const i=Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(i||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(i){this.clipBox=i,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(i=PathType.FILL,s=null){return Util.intersect(this.clipBox,this.getPathBoundingBox(i,s))}}function putBinaryImageData(o,i){if(typeof ImageData<"u"&&i instanceof ImageData)return void o.putImageData(i,0,0);const s=i.height,_=i.width,_e=s%FULL_CHUNK_HEIGHT,ct=(s-_e)/FULL_CHUNK_HEIGHT,Mt=_e===0?ct:ct+1,Ft=o.createImageData(_,FULL_CHUNK_HEIGHT);let Ut,Xt=0;const Kt=i.data,nr=Ft.data;let rr,or,hr,fr;if(i.kind===util_ImageKind.GRAYSCALE_1BPP){const yr=Kt.byteLength,Lr=new Uint32Array(nr.buffer,0,nr.byteLength>>2),Br=Lr.length,Vr=_+7>>3,Wr=4294967295,ro=util_FeatureTest.isLittleEndian?4278190080:255;for(rr=0;rr<Mt;rr++){for(hr=rr<ct?FULL_CHUNK_HEIGHT:_e,Ut=0,or=0;or<hr;or++){const no=yr-Xt;let so=0;const ko=no>Vr?_:8*no-7,To=-8&ko;let oo=0,No=0;for(;so<To;so+=8)No=Kt[Xt++],Lr[Ut++]=128&No?Wr:ro,Lr[Ut++]=64&No?Wr:ro,Lr[Ut++]=32&No?Wr:ro,Lr[Ut++]=16&No?Wr:ro,Lr[Ut++]=8&No?Wr:ro,Lr[Ut++]=4&No?Wr:ro,Lr[Ut++]=2&No?Wr:ro,Lr[Ut++]=1&No?Wr:ro;for(;so<ko;so++)oo===0&&(No=Kt[Xt++],oo=128),Lr[Ut++]=No&oo?Wr:ro,oo>>=1}for(;Ut<Br;)Lr[Ut++]=0;o.putImageData(Ft,0,rr*FULL_CHUNK_HEIGHT)}}else if(i.kind===util_ImageKind.RGBA_32BPP){for(or=0,fr=_*FULL_CHUNK_HEIGHT*4,rr=0;rr<ct;rr++)nr.set(Kt.subarray(Xt,Xt+fr)),Xt+=fr,o.putImageData(Ft,0,or),or+=FULL_CHUNK_HEIGHT;rr<Mt&&(fr=_*_e*4,nr.set(Kt.subarray(Xt,Xt+fr)),o.putImageData(Ft,0,or))}else{if(i.kind!==util_ImageKind.RGB_24BPP)throw new Error(`bad image kind: ${i.kind}`);for(hr=FULL_CHUNK_HEIGHT,fr=_*hr,rr=0;rr<Mt;rr++){for(rr>=ct&&(hr=_e,fr=_*hr),Ut=0,or=fr;or--;)nr[Ut++]=Kt[Xt++],nr[Ut++]=Kt[Xt++],nr[Ut++]=Kt[Xt++],nr[Ut++]=255;o.putImageData(Ft,0,rr*FULL_CHUNK_HEIGHT)}}}function putBinaryImageMask(o,i){if(i.bitmap)return void o.drawImage(i.bitmap,0,0);const s=i.height,_=i.width,_e=s%FULL_CHUNK_HEIGHT,ct=(s-_e)/FULL_CHUNK_HEIGHT,Mt=_e===0?ct:ct+1,Ft=o.createImageData(_,FULL_CHUNK_HEIGHT);let Ut=0;const Xt=i.data,Kt=Ft.data;for(let nr=0;nr<Mt;nr++){const rr=nr<ct?FULL_CHUNK_HEIGHT:_e;({srcPos:Ut}=convertBlackAndWhiteToRGBA({src:Xt,srcPos:Ut,dest:Kt,width:_,height:rr,nonBlackColor:0})),o.putImageData(Ft,0,nr*FULL_CHUNK_HEIGHT)}}function copyCtxState(o,i){const s=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const _ of s)o[_]!==void 0&&(i[_]=o[_]);o.setLineDash!==void 0&&(i.setLineDash(o.getLineDash()),i.lineDashOffset=o.lineDashOffset)}function resetCtxToDefault(o){if(o.strokeStyle=o.fillStyle="#000000",o.fillRule="nonzero",o.globalAlpha=1,o.lineWidth=1,o.lineCap="butt",o.lineJoin="miter",o.miterLimit=10,o.globalCompositeOperation="source-over",o.font="10px sans-serif",o.setLineDash!==void 0&&(o.setLineDash([]),o.lineDashOffset=0),!isNodeJS){const{filter:i}=o;i!=="none"&&i!==""&&(o.filter="none")}}function getImageSmoothingEnabled(o,i){if(i)return!0;const s=Util.singularValueDecompose2dScale(o);s[0]=Math.fround(s[0]),s[1]=Math.fround(s[1]);const _=Math.fround((globalThis.devicePixelRatio||1)*PixelsPerInch.PDF_TO_CSS_UNITS);return s[0]<=_&&s[1]<=_}const LINE_CAP_STYLES=["butt","round","square"],LINE_JOIN_STYLES=["miter","round","bevel"],NORMAL_CLIP={},EO_CLIP={};var cG,ege,tge;const Dge=class Dge{constructor(i,s,_,_e,ct,{optionalContentConfig:Mt,markedContentStack:Ft=null},Ut,Xt){Ku(this,cG);this.ctx=i,this.current=new CanvasExtraState(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=s,this.objs=_,this.canvasFactory=_e,this.filterFactory=ct,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=Ft||[],this.optionalContentConfig=Mt,this.cachedCanvases=new CachedCanvases(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=Ut,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=Xt,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(i,s=null){return typeof i=="string"?i.startsWith("g_")?this.commonObjs.get(i):this.objs.get(i):s}beginDrawing({transform:i,viewport:s,transparency:_=!1,background:_e=null}){const ct=this.ctx.canvas.width,Mt=this.ctx.canvas.height,Ft=this.ctx.fillStyle;if(this.ctx.fillStyle=_e||"#ffffff",this.ctx.fillRect(0,0,ct,Mt),this.ctx.fillStyle=Ft,_){const Ut=this.cachedCanvases.getCanvas("transparent",ct,Mt);this.compositeCtx=this.ctx,this.transparentCanvas=Ut.canvas,this.ctx=Ut.context,this.ctx.save(),this.ctx.transform(...getCurrentTransform(this.compositeCtx))}this.ctx.save(),resetCtxToDefault(this.ctx),i&&(this.ctx.transform(...i),this.outputScaleX=i[0],this.outputScaleY=i[0]),this.ctx.transform(...s.transform),this.viewportScale=s.scale,this.baseTransform=getCurrentTransform(this.ctx)}executeOperatorList(i,s,_,_e){const ct=i.argsArray,Mt=i.fnArray;let Ft=s||0;const Ut=ct.length;if(Ut===Ft)return Ft;const Xt=Ut-Ft>EXECUTION_STEPS&&typeof _=="function",Kt=Xt?Date.now()+EXECUTION_TIME:0;let nr=0;const rr=this.commonObjs,or=this.objs;let hr;for(;;){if(_e!==void 0&&Ft===_e.nextBreakPoint)return _e.breakIt(Ft,_),Ft;if(hr=Mt[Ft],hr!==OPS.dependency)this[hr].apply(this,ct[Ft]);else for(const fr of ct[Ft]){const yr=fr.startsWith("g_")?rr:or;if(!yr.has(fr))return yr.get(fr,_),Ft}if(Ft++,Ft===Ut)return Ft;if(Xt&&++nr>EXECUTION_STEPS){if(Date.now()>Kt)return _(),Ft;nr=0}}}endDrawing(){Nu(this,cG,ege).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const i of this._cachedBitmapsMap.values()){for(const s of i.values())typeof HTMLCanvasElement<"u"&&s instanceof HTMLCanvasElement&&(s.width=s.height=0);i.clear()}this._cachedBitmapsMap.clear(),Nu(this,cG,tge).call(this)}_scaleImage(i,s){const _=i.width,_e=i.height;let ct,Mt,Ft=Math.max(Math.hypot(s[0],s[1]),1),Ut=Math.max(Math.hypot(s[2],s[3]),1),Xt=_,Kt=_e,nr="prescale1";for(;Ft>2&&Xt>1||Ut>2&&Kt>1;){let rr=Xt,or=Kt;Ft>2&&Xt>1&&(rr=Xt>=16384?Math.floor(Xt/2)-1||1:Math.ceil(Xt/2),Ft/=Xt/rr),Ut>2&&Kt>1&&(or=Kt>=16384?Math.floor(Kt/2)-1||1:Math.ceil(Kt)/2,Ut/=Kt/or),ct=this.cachedCanvases.getCanvas(nr,rr,or),Mt=ct.context,Mt.clearRect(0,0,rr,or),Mt.drawImage(i,0,0,Xt,Kt,0,0,rr,or),i=ct.canvas,Xt=rr,Kt=or,nr=nr==="prescale1"?"prescale2":"prescale1"}return{img:i,paintWidth:Xt,paintHeight:Kt}}_createMaskCanvas(i){const s=this.ctx,{width:_,height:_e}=i,ct=this.current.fillColor,Mt=this.current.patternFill,Ft=getCurrentTransform(s);let Ut,Xt,Kt,nr;if((i.bitmap||i.data)&&i.count>1){const ko=i.bitmap||i.data.buffer;Xt=JSON.stringify(Mt?Ft:[Ft.slice(0,4),ct]),Ut=this._cachedBitmapsMap.get(ko),Ut||(Ut=new Map,this._cachedBitmapsMap.set(ko,Ut));const To=Ut.get(Xt);if(To&&!Mt)return{canvas:To,offsetX:Math.round(Math.min(Ft[0],Ft[2])+Ft[4]),offsetY:Math.round(Math.min(Ft[1],Ft[3])+Ft[5])};Kt=To}Kt||(nr=this.cachedCanvases.getCanvas("maskCanvas",_,_e),putBinaryImageMask(nr.context,i));let rr=Util.transform(Ft,[1/_,0,0,-1/_e,0,0]);rr=Util.transform(rr,[1,0,0,1,0,-_e]);const[or,hr,fr,yr]=Util.getAxialAlignedBoundingBox([0,0,_,_e],rr),Lr=Math.round(fr-or)||1,Br=Math.round(yr-hr)||1,Vr=this.cachedCanvases.getCanvas("fillCanvas",Lr,Br),Wr=Vr.context,ro=or,no=hr;Wr.translate(-ro,-no),Wr.transform(...rr),Kt||(Kt=this._scaleImage(nr.canvas,getCurrentTransformInverse(Wr)),Kt=Kt.img,Ut&&Mt&&Ut.set(Xt,Kt)),Wr.imageSmoothingEnabled=getImageSmoothingEnabled(getCurrentTransform(Wr),i.interpolate),drawImageAtIntegerCoords(Wr,Kt,0,0,Kt.width,Kt.height,0,0,_,_e),Wr.globalCompositeOperation="source-in";const so=Util.transform(getCurrentTransformInverse(Wr),[1,0,0,1,-ro,-no]);return Wr.fillStyle=Mt?ct.getPattern(s,this,so,PathType.FILL):ct,Wr.fillRect(0,0,_,_e),Ut&&!Mt&&(this.cachedCanvases.delete("fillCanvas"),Ut.set(Xt,Vr.canvas)),{canvas:Vr.canvas,offsetX:Math.round(ro),offsetY:Math.round(no)}}setLineWidth(i){i!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=i,this.ctx.lineWidth=i}setLineCap(i){this.ctx.lineCap=LINE_CAP_STYLES[i]}setLineJoin(i){this.ctx.lineJoin=LINE_JOIN_STYLES[i]}setMiterLimit(i){this.ctx.miterLimit=i}setDash(i,s){const _=this.ctx;_.setLineDash!==void 0&&(_.setLineDash(i),_.lineDashOffset=s)}setRenderingIntent(i){}setFlatness(i){}setGState(i){for(const[s,_]of i)switch(s){case"LW":this.setLineWidth(_);break;case"LC":this.setLineCap(_);break;case"LJ":this.setLineJoin(_);break;case"ML":this.setMiterLimit(_);break;case"D":this.setDash(_[0],_[1]);break;case"RI":this.setRenderingIntent(_);break;case"FL":this.setFlatness(_);break;case"Font":this.setFont(_[0],_[1]);break;case"CA":this.current.strokeAlpha=_;break;case"ca":this.current.fillAlpha=_,this.ctx.globalAlpha=_;break;case"BM":this.ctx.globalCompositeOperation=_;break;case"SMask":this.current.activeSMask=_?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(_)}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const i=this.inSMaskMode;this.current.activeSMask&&!i?this.beginSMaskMode():!this.current.activeSMask&&i&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const i=this.ctx.canvas.width,s=this.ctx.canvas.height,_="smaskGroupAt"+this.groupLevel,_e=this.cachedCanvases.getCanvas(_,i,s);this.suspendedCtx=this.ctx,this.ctx=_e.context;const ct=this.ctx;ct.setTransform(...getCurrentTransform(this.suspendedCtx)),copyCtxState(this.suspendedCtx,ct),mirrorContextOperations(ct,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),copyCtxState(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(i){if(!this.current.activeSMask)return;i?(i[0]=Math.floor(i[0]),i[1]=Math.floor(i[1]),i[2]=Math.ceil(i[2]),i[3]=Math.ceil(i[3])):i=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const s=this.current.activeSMask,_=this.suspendedCtx;this.composeSMask(_,s,this.ctx,i),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(i,s,_,_e){const ct=_e[0],Mt=_e[1],Ft=_e[2]-ct,Ut=_e[3]-Mt;Ft!==0&&Ut!==0&&(this.genericComposeSMask(s.context,_,Ft,Ut,s.subtype,s.backdrop,s.transferMap,ct,Mt,s.offsetX,s.offsetY),i.save(),i.globalAlpha=1,i.globalCompositeOperation="source-over",i.setTransform(1,0,0,1,0,0),i.drawImage(_.canvas,0,0),i.restore())}genericComposeSMask(i,s,_,_e,ct,Mt,Ft,Ut,Xt,Kt,nr){let rr=i.canvas,or=Ut-Kt,hr=Xt-nr;if(Mt){if(or<0||hr<0||or+_>rr.width||hr+_e>rr.height){const yr=this.cachedCanvases.getCanvas("maskExtension",_,_e),Lr=yr.context;Lr.drawImage(rr,-or,-hr),Mt.some(Br=>Br!==0)&&(Lr.globalCompositeOperation="destination-atop",Lr.fillStyle=Util.makeHexColor(...Mt),Lr.fillRect(0,0,_,_e),Lr.globalCompositeOperation="source-over"),rr=yr.canvas,or=hr=0}else if(Mt.some(yr=>yr!==0)){i.save(),i.globalAlpha=1,i.setTransform(1,0,0,1,0,0);const yr=new Path2D;yr.rect(or,hr,_,_e),i.clip(yr),i.globalCompositeOperation="destination-atop",i.fillStyle=Util.makeHexColor(...Mt),i.fillRect(or,hr,_,_e),i.restore()}}s.save(),s.globalAlpha=1,s.setTransform(1,0,0,1,0,0),ct==="Alpha"&&Ft?s.filter=this.filterFactory.addAlphaFilter(Ft):ct==="Luminosity"&&(s.filter=this.filterFactory.addLuminosityFilter(Ft));const fr=new Path2D;fr.rect(Ut,Xt,_,_e),s.clip(fr),s.globalCompositeOperation="destination-in",s.drawImage(rr,or,hr,_,_e,Ut,Xt,_,_e),s.restore()}save(){this.inSMaskMode?(copyCtxState(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const i=this.current;this.stateStack.push(i),this.current=i.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),copyCtxState(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(i,s,_,_e,ct,Mt){this.ctx.transform(i,s,_,_e,ct,Mt),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(i,s,_){const _e=this.ctx,ct=this.current;let Mt,Ft,Ut=ct.x,Xt=ct.y;const Kt=getCurrentTransform(_e),nr=Kt[0]===0&&Kt[3]===0||Kt[1]===0&&Kt[2]===0,rr=nr?_.slice(0):null;for(let or=0,hr=0,fr=i.length;or<fr;or++)switch(0|i[or]){case OPS.rectangle:Ut=s[hr++],Xt=s[hr++];const yr=s[hr++],Lr=s[hr++],Br=Ut+yr,Vr=Xt+Lr;_e.moveTo(Ut,Xt),yr===0||Lr===0?_e.lineTo(Br,Vr):(_e.lineTo(Br,Xt),_e.lineTo(Br,Vr),_e.lineTo(Ut,Vr)),nr||ct.updateRectMinMax(Kt,[Ut,Xt,Br,Vr]),_e.closePath();break;case OPS.moveTo:Ut=s[hr++],Xt=s[hr++],_e.moveTo(Ut,Xt),nr||ct.updatePathMinMax(Kt,Ut,Xt);break;case OPS.lineTo:Ut=s[hr++],Xt=s[hr++],_e.lineTo(Ut,Xt),nr||ct.updatePathMinMax(Kt,Ut,Xt);break;case OPS.curveTo:Mt=Ut,Ft=Xt,Ut=s[hr+4],Xt=s[hr+5],_e.bezierCurveTo(s[hr],s[hr+1],s[hr+2],s[hr+3],Ut,Xt),ct.updateCurvePathMinMax(Kt,Mt,Ft,s[hr],s[hr+1],s[hr+2],s[hr+3],Ut,Xt,rr),hr+=6;break;case OPS.curveTo2:Mt=Ut,Ft=Xt,_e.bezierCurveTo(Ut,Xt,s[hr],s[hr+1],s[hr+2],s[hr+3]),ct.updateCurvePathMinMax(Kt,Mt,Ft,Ut,Xt,s[hr],s[hr+1],s[hr+2],s[hr+3],rr),Ut=s[hr+2],Xt=s[hr+3],hr+=4;break;case OPS.curveTo3:Mt=Ut,Ft=Xt,Ut=s[hr+2],Xt=s[hr+3],_e.bezierCurveTo(s[hr],s[hr+1],Ut,Xt,Ut,Xt),ct.updateCurvePathMinMax(Kt,Mt,Ft,s[hr],s[hr+1],Ut,Xt,Ut,Xt,rr),hr+=4;break;case OPS.closePath:_e.closePath()}nr&&ct.updateScalingPathMinMax(Kt,rr),ct.setCurrentPoint(Ut,Xt)}closePath(){this.ctx.closePath()}stroke(i=!0){const s=this.ctx,_=this.current.strokeColor;s.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof _=="object"&&(_!=null&&_.getPattern)?(s.save(),s.strokeStyle=_.getPattern(s,this,getCurrentTransformInverse(s),PathType.STROKE),this.rescaleAndStroke(!1),s.restore()):this.rescaleAndStroke(!0)),i&&this.consumePath(this.current.getClippedPathBoundingBox()),s.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(i=!0){const s=this.ctx,_=this.current.fillColor;let _e=!1;this.current.patternFill&&(s.save(),s.fillStyle=_.getPattern(s,this,getCurrentTransformInverse(s),PathType.FILL),_e=!0);const ct=this.current.getClippedPathBoundingBox();this.contentVisible&&ct!==null&&(this.pendingEOFill?(s.fill("evenodd"),this.pendingEOFill=!1):s.fill()),_e&&s.restore(),i&&this.consumePath(ct)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=NORMAL_CLIP}eoClip(){this.pendingClip=EO_CLIP}beginText(){this.current.textMatrix=IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const i=this.pendingTextPaths,s=this.ctx;if(i!==void 0){s.save(),s.beginPath();for(const _ of i)s.setTransform(..._.transform),s.translate(_.x,_.y),_.addToPath(s,_.fontSize);s.restore(),s.clip(),s.beginPath(),delete this.pendingTextPaths}else s.beginPath()}setCharSpacing(i){this.current.charSpacing=i}setWordSpacing(i){this.current.wordSpacing=i}setHScale(i){this.current.textHScale=i/100}setLeading(i){this.current.leading=-i}setFont(i,s){var Kt;const _=this.commonObjs.get(i),_e=this.current;if(!_)throw new Error(`Can't find font for ${i}`);if(_e.fontMatrix=_.fontMatrix||FONT_IDENTITY_MATRIX,_e.fontMatrix[0]!==0&&_e.fontMatrix[3]!==0||warn("Invalid font matrix for font "+i),s<0?(s=-s,_e.fontDirection=-1):_e.fontDirection=1,this.current.font=_,this.current.fontSize=s,_.isType3Font)return;const ct=_.loadedName||"sans-serif",Mt=((Kt=_.systemFontInfo)==null?void 0:Kt.css)||`"${ct}", ${_.fallbackName}`;let Ft="normal";_.black?Ft="900":_.bold&&(Ft="bold");const Ut=_.italic?"italic":"normal";let Xt=s;s<MIN_FONT_SIZE?Xt=MIN_FONT_SIZE:s>MAX_FONT_SIZE&&(Xt=MAX_FONT_SIZE),this.current.fontSizeScale=s/Xt,this.ctx.font=`${Ut} ${Ft} ${Xt}px ${Mt}`}setTextRenderingMode(i){this.current.textRenderingMode=i}setTextRise(i){this.current.textRise=i}moveText(i,s){this.current.x=this.current.lineX+=i,this.current.y=this.current.lineY+=s}setLeadingMoveText(i,s){this.setLeading(-s),this.moveText(i,s)}setTextMatrix(i,s,_,_e,ct,Mt){this.current.textMatrix=[i,s,_,_e,ct,Mt],this.current.textMatrixScale=Math.hypot(i,s),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(i,s,_,_e){const ct=this.ctx,Mt=this.current,Ft=Mt.font,Ut=Mt.textRenderingMode,Xt=Mt.fontSize/Mt.fontSizeScale,Kt=Ut&TextRenderingMode.FILL_STROKE_MASK,nr=!!(Ut&TextRenderingMode.ADD_TO_PATH_FLAG),rr=Mt.patternFill&&!Ft.missingFile;let or;(Ft.disableFontFace||nr||rr)&&(or=Ft.getPathGenerator(this.commonObjs,i)),Ft.disableFontFace||rr?(ct.save(),ct.translate(s,_),ct.beginPath(),or(ct,Xt),_e&&ct.setTransform(..._e),Kt!==TextRenderingMode.FILL&&Kt!==TextRenderingMode.FILL_STROKE||ct.fill(),Kt!==TextRenderingMode.STROKE&&Kt!==TextRenderingMode.FILL_STROKE||ct.stroke(),ct.restore()):(Kt!==TextRenderingMode.FILL&&Kt!==TextRenderingMode.FILL_STROKE||ct.fillText(i,s,_),Kt!==TextRenderingMode.STROKE&&Kt!==TextRenderingMode.FILL_STROKE||ct.strokeText(i,s,_)),nr&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:getCurrentTransform(ct),x:s,y:_,fontSize:Xt,addToPath:or})}get isFontSubpixelAAEnabled(){const{context:i}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);i.scale(1.5,1),i.fillText("I",0,10);const s=i.getImageData(0,0,10,10).data;let _=!1;for(let _e=3;_e<s.length;_e+=4)if(s[_e]>0&&s[_e]<255){_=!0;break}return shadow(this,"isFontSubpixelAAEnabled",_)}showText(i){const s=this.current,_=s.font;if(_.isType3Font)return this.showType3Text(i);const _e=s.fontSize;if(_e===0)return;const ct=this.ctx,Mt=s.fontSizeScale,Ft=s.charSpacing,Ut=s.wordSpacing,Xt=s.fontDirection,Kt=s.textHScale*Xt,nr=i.length,rr=_.vertical,or=rr?1:-1,hr=_.defaultVMetrics,fr=_e*s.fontMatrix[0],yr=s.textRenderingMode===TextRenderingMode.FILL&&!_.disableFontFace&&!s.patternFill;let Lr;if(ct.save(),ct.transform(...s.textMatrix),ct.translate(s.x,s.y+s.textRise),Xt>0?ct.scale(Kt,-1):ct.scale(Kt,1),s.patternFill){ct.save();const no=s.fillColor.getPattern(ct,this,getCurrentTransformInverse(ct),PathType.FILL);Lr=getCurrentTransform(ct),ct.restore(),ct.fillStyle=no}let Br=s.lineWidth;const Vr=s.textMatrixScale;if(Vr===0||Br===0){const no=s.textRenderingMode&TextRenderingMode.FILL_STROKE_MASK;no!==TextRenderingMode.STROKE&&no!==TextRenderingMode.FILL_STROKE||(Br=this.getSinglePixelWidth())}else Br/=Vr;if(Mt!==1&&(ct.scale(Mt,Mt),Br/=Mt),ct.lineWidth=Br,_.isInvalidPDFjsFont){const no=[];let so=0;for(const ko of i)no.push(ko.unicode),so+=ko.width;return ct.fillText(no.join(""),0,0),s.x+=so*fr*Kt,ct.restore(),void this.compose()}let Wr,ro=0;for(Wr=0;Wr<nr;++Wr){const no=i[Wr];if(typeof no=="number"){ro+=or*no*_e/1e3;continue}let so=!1;const ko=(no.isSpace?Ut:0)+Ft,To=no.fontChar,oo=no.accent;let No,As,Ks=no.width;if(rr){const vu=no.vmetric||hr,Fu=-(no.vmetric?vu[1]:.5*Ks)*fr,Ap=vu[2]*fr;Ks=vu?-vu[0]:Ks,No=Fu/Mt,As=(ro+Ap)/Mt}else No=ro/Mt,As=0;if(_.remeasure&&Ks>0){const vu=1e3*ct.measureText(To).width/_e*Mt;if(Ks<vu&&this.isFontSubpixelAAEnabled){const Fu=Ks/vu;so=!0,ct.save(),ct.scale(Fu,1),No/=Fu}else Ks!==vu&&(No+=(Ks-vu)/2e3*_e/Mt)}if(this.contentVisible&&(no.isInFont||_.missingFile)){if(yr&&!oo)ct.fillText(To,No,As);else if(this.paintChar(To,No,As,Lr),oo){const vu=No+_e*oo.offset.x/Mt,Fu=As-_e*oo.offset.y/Mt;this.paintChar(oo.fontChar,vu,Fu,Lr)}}ro+=rr?Ks*fr-ko*Xt:Ks*fr+ko*Xt,so&&ct.restore()}rr?s.y-=ro:s.x+=ro*Kt,ct.restore(),this.compose()}showType3Text(i){const s=this.ctx,_=this.current,_e=_.font,ct=_.fontSize,Mt=_.fontDirection,Ft=_e.vertical?1:-1,Ut=_.charSpacing,Xt=_.wordSpacing,Kt=_.textHScale*Mt,nr=_.fontMatrix||FONT_IDENTITY_MATRIX,rr=i.length;let or,hr,fr,yr;if(_.textRenderingMode!==TextRenderingMode.INVISIBLE&&ct!==0){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,s.save(),s.transform(..._.textMatrix),s.translate(_.x,_.y),s.scale(Kt,Mt),or=0;or<rr;++or){if(hr=i[or],typeof hr=="number"){yr=Ft*hr*ct/1e3,this.ctx.translate(yr,0),_.x+=yr*Kt;continue}const Lr=(hr.isSpace?Xt:0)+Ut,Br=_e.charProcOperatorList[hr.operatorListId];if(!Br){warn(`Type3 character "${hr.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=hr,this.save(),s.scale(ct,ct),s.transform(...nr),this.executeOperatorList(Br),this.restore()),fr=Util.applyTransform([hr.width,0],nr)[0]*ct+Lr,s.translate(fr,0),_.x+=fr*Kt}s.restore(),this.processingType3=null}}setCharWidth(i,s){}setCharWidthAndBounds(i,s,_,_e,ct,Mt){this.ctx.rect(_,_e,ct-_,Mt-_e),this.ctx.clip(),this.endPath()}getColorN_Pattern(i){let s;if(i[0]==="TilingPattern"){const _=i[1],_e=this.baseTransform||getCurrentTransform(this.ctx),ct={createCanvasGraphics:Mt=>new Dge(Mt,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};s=new TilingPattern(i,_,this.ctx,ct,_e)}else s=this._getPattern(i[1],i[2]);return s}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(i,s,_){const _e=Util.makeHexColor(i,s,_);this.ctx.strokeStyle=_e,this.current.strokeColor=_e}setFillRGBColor(i,s,_){const _e=Util.makeHexColor(i,s,_);this.ctx.fillStyle=_e,this.current.fillColor=_e,this.current.patternFill=!1}_getPattern(i,s=null){let _;return this.cachedPatterns.has(i)?_=this.cachedPatterns.get(i):(_=getShadingPattern(this.getObject(i)),this.cachedPatterns.set(i,_)),s&&(_.matrix=s),_}shadingFill(i){if(!this.contentVisible)return;const s=this.ctx;this.save();const _=this._getPattern(i);s.fillStyle=_.getPattern(s,this,getCurrentTransformInverse(s),PathType.SHADING);const _e=getCurrentTransformInverse(s);if(_e){const{width:ct,height:Mt}=s.canvas,[Ft,Ut,Xt,Kt]=Util.getAxialAlignedBoundingBox([0,0,ct,Mt],_e);this.ctx.fillRect(Ft,Ut,Xt-Ft,Kt-Ut)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){unreachable("Should not call beginInlineImage")}beginImageData(){unreachable("Should not call beginImageData")}paintFormXObjectBegin(i,s){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),i&&this.transform(...i),this.baseTransform=getCurrentTransform(this.ctx),s)){const _=s[2]-s[0],_e=s[3]-s[1];this.ctx.rect(s[0],s[1],_,_e),this.current.updateRectMinMax(getCurrentTransform(this.ctx),s),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(i){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const s=this.ctx;i.isolated||info("TODO: Support non-isolated groups."),i.knockout&&warn("Knockout groups not supported.");const _=getCurrentTransform(s);if(i.matrix&&s.transform(...i.matrix),!i.bbox)throw new Error("Bounding box is required.");let _e=Util.getAxialAlignedBoundingBox(i.bbox,getCurrentTransform(s));const ct=[0,0,s.canvas.width,s.canvas.height];_e=Util.intersect(_e,ct)||[0,0,0,0];const Mt=Math.floor(_e[0]),Ft=Math.floor(_e[1]),Ut=Math.max(Math.ceil(_e[2])-Mt,1),Xt=Math.max(Math.ceil(_e[3])-Ft,1);this.current.startNewPathAndClipBox([0,0,Ut,Xt]);let Kt="groupAt"+this.groupLevel;i.smask&&(Kt+="_smask_"+this.smaskCounter++%2);const nr=this.cachedCanvases.getCanvas(Kt,Ut,Xt),rr=nr.context;rr.translate(-Mt,-Ft),rr.transform(..._),i.smask?this.smaskStack.push({canvas:nr.canvas,context:rr,offsetX:Mt,offsetY:Ft,subtype:i.smask.subtype,backdrop:i.smask.backdrop,transferMap:i.smask.transferMap||null,startTransformInverse:null}):(s.setTransform(1,0,0,1,0,0),s.translate(Mt,Ft),s.save()),copyCtxState(s,rr),this.ctx=rr,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(s),this.groupLevel++}endGroup(i){if(!this.contentVisible)return;this.groupLevel--;const s=this.ctx,_=this.groupStack.pop();if(this.ctx=_,this.ctx.imageSmoothingEnabled=!1,i.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const _e=getCurrentTransform(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(..._e);const ct=Util.getAxialAlignedBoundingBox([0,0,s.canvas.width,s.canvas.height],_e);this.ctx.drawImage(s.canvas,0,0),this.ctx.restore(),this.compose(ct)}}beginAnnotation(i,s,_,_e,ct){if(Nu(this,cG,ege).call(this),resetCtxToDefault(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),s){const Mt=s[2]-s[0],Ft=s[3]-s[1];if(ct&&this.annotationCanvasMap){(_=_.slice())[4]-=s[0],_[5]-=s[1],(s=s.slice())[0]=s[1]=0,s[2]=Mt,s[3]=Ft;const[Ut,Xt]=Util.singularValueDecompose2dScale(getCurrentTransform(this.ctx)),{viewportScale:Kt}=this,nr=Math.ceil(Mt*this.outputScaleX*Kt),rr=Math.ceil(Ft*this.outputScaleY*Kt);this.annotationCanvas=this.canvasFactory.create(nr,rr);const{canvas:or,context:hr}=this.annotationCanvas;this.annotationCanvasMap.set(i,or),this.annotationCanvas.savedCtx=this.ctx,this.ctx=hr,this.ctx.save(),this.ctx.setTransform(Ut,0,0,-Xt,0,Ft*Xt),resetCtxToDefault(this.ctx)}else resetCtxToDefault(this.ctx),this.ctx.rect(s[0],s[1],Mt,Ft),this.ctx.clip(),this.endPath()}this.current=new CanvasExtraState(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(..._),this.transform(..._e)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),Nu(this,cG,tge).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(i){if(!this.contentVisible)return;const s=i.count;(i=this.getObject(i.data,i)).count=s;const _=this.ctx,_e=this.processingType3;if(_e&&(_e.compiled===void 0&&(_e.compiled=compileType3Glyph(i)),_e.compiled))return void _e.compiled(_);const ct=this._createMaskCanvas(i),Mt=ct.canvas;_.save(),_.setTransform(1,0,0,1,0,0),_.drawImage(Mt,ct.offsetX,ct.offsetY),_.restore(),this.compose()}paintImageMaskXObjectRepeat(i,s,_=0,_e=0,ct,Mt){if(!this.contentVisible)return;i=this.getObject(i.data,i);const Ft=this.ctx;Ft.save();const Ut=getCurrentTransform(Ft);Ft.transform(s,_,_e,ct,0,0);const Xt=this._createMaskCanvas(i);Ft.setTransform(1,0,0,1,Xt.offsetX-Ut[4],Xt.offsetY-Ut[5]);for(let Kt=0,nr=Mt.length;Kt<nr;Kt+=2){const rr=Util.transform(Ut,[s,_,_e,ct,Mt[Kt],Mt[Kt+1]]),[or,hr]=Util.applyTransform([0,0],rr);Ft.drawImage(Xt.canvas,or,hr)}Ft.restore(),this.compose()}paintImageMaskXObjectGroup(i){if(!this.contentVisible)return;const s=this.ctx,_=this.current.fillColor,_e=this.current.patternFill;for(const ct of i){const{data:Mt,width:Ft,height:Ut,transform:Xt}=ct,Kt=this.cachedCanvases.getCanvas("maskCanvas",Ft,Ut),nr=Kt.context;nr.save(),putBinaryImageMask(nr,this.getObject(Mt,ct)),nr.globalCompositeOperation="source-in",nr.fillStyle=_e?_.getPattern(nr,this,getCurrentTransformInverse(s),PathType.FILL):_,nr.fillRect(0,0,Ft,Ut),nr.restore(),s.save(),s.transform(...Xt),s.scale(1,-1),drawImageAtIntegerCoords(s,Kt.canvas,0,0,Ft,Ut,0,-1,1,1),s.restore()}this.compose()}paintImageXObject(i){if(!this.contentVisible)return;const s=this.getObject(i);s?this.paintInlineImageXObject(s):warn("Dependent image isn't ready yet")}paintImageXObjectRepeat(i,s,_,_e){if(!this.contentVisible)return;const ct=this.getObject(i);if(!ct)return void warn("Dependent image isn't ready yet");const Mt=ct.width,Ft=ct.height,Ut=[];for(let Xt=0,Kt=_e.length;Xt<Kt;Xt+=2)Ut.push({transform:[s,0,0,_,_e[Xt],_e[Xt+1]],x:0,y:0,w:Mt,h:Ft});this.paintInlineImageXObjectGroup(ct,Ut)}applyTransferMapsToCanvas(i){return this.current.transferMaps!=="none"&&(i.filter=this.current.transferMaps,i.drawImage(i.canvas,0,0),i.filter="none"),i.canvas}applyTransferMapsToBitmap(i){if(this.current.transferMaps==="none")return i.bitmap;const{bitmap:s,width:_,height:_e}=i,ct=this.cachedCanvases.getCanvas("inlineImage",_,_e),Mt=ct.context;return Mt.filter=this.current.transferMaps,Mt.drawImage(s,0,0),Mt.filter="none",ct.canvas}paintInlineImageXObject(i){if(!this.contentVisible)return;const s=i.width,_=i.height,_e=this.ctx;if(this.save(),!isNodeJS){const{filter:Ft}=_e;Ft!=="none"&&Ft!==""&&(_e.filter="none")}let ct;if(_e.scale(1/s,-1/_),i.bitmap)ct=this.applyTransferMapsToBitmap(i);else if(typeof HTMLElement=="function"&&i instanceof HTMLElement||!i.data)ct=i;else{const Ft=this.cachedCanvases.getCanvas("inlineImage",s,_).context;putBinaryImageData(Ft,i),ct=this.applyTransferMapsToCanvas(Ft)}const Mt=this._scaleImage(ct,getCurrentTransformInverse(_e));_e.imageSmoothingEnabled=getImageSmoothingEnabled(getCurrentTransform(_e),i.interpolate),drawImageAtIntegerCoords(_e,Mt.img,0,0,Mt.paintWidth,Mt.paintHeight,0,-_,s,_),this.compose(),this.restore()}paintInlineImageXObjectGroup(i,s){if(!this.contentVisible)return;const _=this.ctx;let _e;if(i.bitmap)_e=i.bitmap;else{const ct=i.width,Mt=i.height,Ft=this.cachedCanvases.getCanvas("inlineImage",ct,Mt).context;putBinaryImageData(Ft,i),_e=this.applyTransferMapsToCanvas(Ft)}for(const ct of s)_.save(),_.transform(...ct.transform),_.scale(1,-1),drawImageAtIntegerCoords(_,_e,ct.x,ct.y,ct.w,ct.h,0,-1,1,1),_.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(i){}markPointProps(i,s){}beginMarkedContent(i){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(i,s){i==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(s)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(i){const s=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(i);const _=this.ctx;this.pendingClip&&(s||(this.pendingClip===EO_CLIP?_.clip("evenodd"):_.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),_.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const i=getCurrentTransform(this.ctx);if(i[1]===0&&i[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(i[0]),Math.abs(i[3]));else{const s=Math.abs(i[0]*i[3]-i[2]*i[1]),_=Math.hypot(i[0],i[2]),_e=Math.hypot(i[1],i[3]);this._cachedGetSinglePixelWidth=Math.max(_,_e)/s}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:i}=this.current,{a:s,b:_,c:_e,d:ct}=this.ctx.getTransform();let Mt,Ft;if(_===0&&_e===0){const Ut=Math.abs(s),Xt=Math.abs(ct);if(Ut===Xt)if(i===0)Mt=Ft=1/Ut;else{const Kt=Ut*i;Mt=Ft=Kt<1?1/Kt:1}else if(i===0)Mt=1/Ut,Ft=1/Xt;else{const Kt=Ut*i,nr=Xt*i;Mt=Kt<1?1/Kt:1,Ft=nr<1?1/nr:1}}else{const Ut=Math.abs(s*ct-_*_e),Xt=Math.hypot(s,_),Kt=Math.hypot(_e,ct);if(i===0)Mt=Kt/Ut,Ft=Xt/Ut;else{const nr=i*Ut;Mt=Kt>nr?Kt/nr:1,Ft=Xt>nr?Xt/nr:1}}this._cachedScaleForStroking[0]=Mt,this._cachedScaleForStroking[1]=Ft}return this._cachedScaleForStroking}rescaleAndStroke(i){const{ctx:s}=this,{lineWidth:_}=this.current,[_e,ct]=this.getScaleForStroking();if(s.lineWidth=_||1,_e===1&&ct===1)return void s.stroke();const Mt=s.getLineDash();if(i&&s.save(),s.scale(_e,ct),Mt.length>0){const Ft=Math.max(_e,ct);s.setLineDash(Mt.map(Ut=>Ut/Ft)),s.lineDashOffset/=Ft}s.stroke(),i&&s.restore()}isContentVisible(){for(let i=this.markedContentStack.length-1;i>=0;i--)if(!this.markedContentStack[i].visible)return!1;return!0}};cG=new WeakSet,ege=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},tge=function(){if(this.pageColors){const i=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(i!=="none"){const s=this.ctx.filter;this.ctx.filter=i,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=s}}};let CanvasGraphics=Dge;for(const o in OPS)CanvasGraphics.prototype[o]!==void 0&&(CanvasGraphics.prototype[OPS[o]]=CanvasGraphics.prototype[o]);var dhe,phe;class GlobalWorkerOptions{static get workerPort(){return to(this,dhe)}static set workerPort(i){if(!(typeof Worker<"u"&&i instanceof Worker)&&i!==null)throw new Error("Invalid `workerPort` type.");ku(this,dhe,i)}static get workerSrc(){return to(this,phe)}static set workerSrc(i){if(typeof i!="string")throw new Error("Invalid `workerSrc` type.");ku(this,phe,i)}}dhe=new WeakMap,phe=new WeakMap,Ku(GlobalWorkerOptions,dhe,null),Ku(GlobalWorkerOptions,phe,"");const CallbackKind={UNKNOWN:0,DATA:1,ERROR:2},StreamKind={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function wrapReason(o){switch(o instanceof Error||typeof o=="object"&&o!==null||unreachable('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),o.name){case"AbortException":return new AbortException(o.message);case"MissingPDFException":return new MissingPDFException(o.message);case"PasswordException":return new PasswordException(o.message,o.code);case"UnexpectedResponseException":return new UnexpectedResponseException(o.message,o.status);case"UnknownErrorException":return new UnknownErrorException(o.message,o.details);default:return new UnknownErrorException(o.message,o.toString())}}var BC,I1e,A1e,kfe;class MessageHandler{constructor(i,s,_){Ku(this,BC);this.sourceName=i,this.targetName=s,this.comObj=_,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=_e=>{const ct=_e.data;if(ct.targetName!==this.sourceName)return;if(ct.stream)return void Nu(this,BC,A1e).call(this,ct);if(ct.callback){const Ft=ct.callbackId,Ut=this.callbackCapabilities[Ft];if(!Ut)throw new Error(`Cannot resolve callback ${Ft}`);if(delete this.callbackCapabilities[Ft],ct.callback===CallbackKind.DATA)Ut.resolve(ct.data);else{if(ct.callback!==CallbackKind.ERROR)throw new Error("Unexpected callback case");Ut.reject(wrapReason(ct.reason))}return}const Mt=this.actionHandler[ct.action];if(!Mt)throw new Error(`Unknown action from worker: ${ct.action}`);if(ct.callbackId){const Ft=this.sourceName,Ut=ct.sourceName;new Promise(function(Xt){Xt(Mt(ct.data))}).then(function(Xt){_.postMessage({sourceName:Ft,targetName:Ut,callback:CallbackKind.DATA,callbackId:ct.callbackId,data:Xt})},function(Xt){_.postMessage({sourceName:Ft,targetName:Ut,callback:CallbackKind.ERROR,callbackId:ct.callbackId,reason:wrapReason(Xt)})})}else ct.streamId?Nu(this,BC,I1e).call(this,ct):Mt(ct.data)},_.addEventListener("message",this._onComObjOnMessage)}on(i,s){const _=this.actionHandler;if(_[i])throw new Error(`There is already an actionName called "${i}"`);_[i]=s}send(i,s,_){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:i,data:s},_)}sendWithPromise(i,s,_){const _e=this.callbackId++,ct=Promise.withResolvers();this.callbackCapabilities[_e]=ct;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:i,callbackId:_e,data:s},_)}catch(Mt){ct.reject(Mt)}return ct.promise}sendWithStream(i,s,_,_e){const ct=this.streamId++,Mt=this.sourceName,Ft=this.targetName,Ut=this.comObj;return new ReadableStream({start:Xt=>{const Kt=Promise.withResolvers();return this.streamControllers[ct]={controller:Xt,startCall:Kt,pullCall:null,cancelCall:null,isClosed:!1},Ut.postMessage({sourceName:Mt,targetName:Ft,action:i,streamId:ct,data:s,desiredSize:Xt.desiredSize},_e),Kt.promise},pull:Xt=>{const Kt=Promise.withResolvers();return this.streamControllers[ct].pullCall=Kt,Ut.postMessage({sourceName:Mt,targetName:Ft,stream:StreamKind.PULL,streamId:ct,desiredSize:Xt.desiredSize}),Kt.promise},cancel:Xt=>{assert(Xt instanceof Error,"cancel must have a valid reason");const Kt=Promise.withResolvers();return this.streamControllers[ct].cancelCall=Kt,this.streamControllers[ct].isClosed=!0,Ut.postMessage({sourceName:Mt,targetName:Ft,stream:StreamKind.CANCEL,streamId:ct,reason:wrapReason(Xt)}),Kt.promise}},_)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}BC=new WeakSet,I1e=function(i){const s=i.streamId,_=this.sourceName,_e=i.sourceName,ct=this.comObj,Mt=this,Ft=this.actionHandler[i.action],Ut={enqueue(Xt,Kt=1,nr){if(this.isCancelled)return;const rr=this.desiredSize;this.desiredSize-=Kt,rr>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),ct.postMessage({sourceName:_,targetName:_e,stream:StreamKind.ENQUEUE,streamId:s,chunk:Xt},nr)},close(){this.isCancelled||(this.isCancelled=!0,ct.postMessage({sourceName:_,targetName:_e,stream:StreamKind.CLOSE,streamId:s}),delete Mt.streamSinks[s])},error(Xt){assert(Xt instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,ct.postMessage({sourceName:_,targetName:_e,stream:StreamKind.ERROR,streamId:s,reason:wrapReason(Xt)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:i.desiredSize,ready:null};Ut.sinkCapability.resolve(),Ut.ready=Ut.sinkCapability.promise,this.streamSinks[s]=Ut,new Promise(function(Xt){Xt(Ft(i.data,Ut))}).then(function(){ct.postMessage({sourceName:_,targetName:_e,stream:StreamKind.START_COMPLETE,streamId:s,success:!0})},function(Xt){ct.postMessage({sourceName:_,targetName:_e,stream:StreamKind.START_COMPLETE,streamId:s,reason:wrapReason(Xt)})})},A1e=function(i){const s=i.streamId,_=this.sourceName,_e=i.sourceName,ct=this.comObj,Mt=this.streamControllers[s],Ft=this.streamSinks[s];switch(i.stream){case StreamKind.START_COMPLETE:i.success?Mt.startCall.resolve():Mt.startCall.reject(wrapReason(i.reason));break;case StreamKind.PULL_COMPLETE:i.success?Mt.pullCall.resolve():Mt.pullCall.reject(wrapReason(i.reason));break;case StreamKind.PULL:if(!Ft){ct.postMessage({sourceName:_,targetName:_e,stream:StreamKind.PULL_COMPLETE,streamId:s,success:!0});break}Ft.desiredSize<=0&&i.desiredSize>0&&Ft.sinkCapability.resolve(),Ft.desiredSize=i.desiredSize,new Promise(function(Ut){var Xt;Ut((Xt=Ft.onPull)==null?void 0:Xt.call(Ft))}).then(function(){ct.postMessage({sourceName:_,targetName:_e,stream:StreamKind.PULL_COMPLETE,streamId:s,success:!0})},function(Ut){ct.postMessage({sourceName:_,targetName:_e,stream:StreamKind.PULL_COMPLETE,streamId:s,reason:wrapReason(Ut)})});break;case StreamKind.ENQUEUE:if(assert(Mt,"enqueue should have stream controller"),Mt.isClosed)break;Mt.controller.enqueue(i.chunk);break;case StreamKind.CLOSE:if(assert(Mt,"close should have stream controller"),Mt.isClosed)break;Mt.isClosed=!0,Mt.controller.close(),Nu(this,BC,kfe).call(this,Mt,s);break;case StreamKind.ERROR:assert(Mt,"error should have stream controller"),Mt.controller.error(wrapReason(i.reason)),Nu(this,BC,kfe).call(this,Mt,s);break;case StreamKind.CANCEL_COMPLETE:i.success?Mt.cancelCall.resolve():Mt.cancelCall.reject(wrapReason(i.reason)),Nu(this,BC,kfe).call(this,Mt,s);break;case StreamKind.CANCEL:if(!Ft)break;new Promise(function(Ut){var Xt;Ut((Xt=Ft.onCancel)==null?void 0:Xt.call(Ft,wrapReason(i.reason)))}).then(function(){ct.postMessage({sourceName:_,targetName:_e,stream:StreamKind.CANCEL_COMPLETE,streamId:s,success:!0})},function(Ut){ct.postMessage({sourceName:_,targetName:_e,stream:StreamKind.CANCEL_COMPLETE,streamId:s,reason:wrapReason(Ut)})}),Ft.sinkCapability.reject(wrapReason(i.reason)),Ft.isCancelled=!0,delete this.streamSinks[s];break;default:throw new Error("Unexpected stream case")}},kfe=async function(i,s){var _,_e,ct;await Promise.allSettled([(_=i.startCall)==null?void 0:_.promise,(_e=i.pullCall)==null?void 0:_e.promise,(ct=i.cancelCall)==null?void 0:ct.promise]),delete this.streamControllers[s]};var dK,hhe;class Metadata{constructor({parsedData:i,rawData:s}){Ku(this,dK);Ku(this,hhe);ku(this,dK,i),ku(this,hhe,s)}getRaw(){return to(this,hhe)}get(i){return to(this,dK).get(i)??null}getAll(){return objectFromMap(to(this,dK))}has(i){return to(this,dK).has(i)}}dK=new WeakMap,hhe=new WeakMap;const INTERNAL=Symbol("INTERNAL");var fhe,mhe,ghe,Gle;class OptionalContentGroup{constructor(i,{name:s,intent:_,usage:_e}){Ku(this,fhe,!1);Ku(this,mhe,!1);Ku(this,ghe,!1);Ku(this,Gle,!0);ku(this,fhe,!!(i&RenderingIntentFlag.DISPLAY)),ku(this,mhe,!!(i&RenderingIntentFlag.PRINT)),this.name=s,this.intent=_,this.usage=_e}get visible(){if(to(this,ghe))return to(this,Gle);if(!to(this,Gle))return!1;const{print:i,view:s}=this.usage;return to(this,fhe)?(s==null?void 0:s.viewState)!=="OFF":!to(this,mhe)||(i==null?void 0:i.printState)!=="OFF"}_setVisible(i,s,_=!1){i!==INTERNAL&&unreachable("Internal method `_setVisible` called."),ku(this,ghe,_),ku(this,Gle,s)}}fhe=new WeakMap,mhe=new WeakMap,ghe=new WeakMap,Gle=new WeakMap;var n9,Ty,jle,Xle,yhe,rge;class OptionalContentConfig{constructor(i,s=RenderingIntentFlag.DISPLAY){Ku(this,yhe);Ku(this,n9,null);Ku(this,Ty,new Map);Ku(this,jle,null);Ku(this,Xle,null);if(this.renderingIntent=s,this.name=null,this.creator=null,i!==null){this.name=i.name,this.creator=i.creator,ku(this,Xle,i.order);for(const _ of i.groups)to(this,Ty).set(_.id,new OptionalContentGroup(s,_));if(i.baseState==="OFF")for(const _ of to(this,Ty).values())_._setVisible(INTERNAL,!1);for(const _ of i.on)to(this,Ty).get(_)._setVisible(INTERNAL,!0);for(const _ of i.off)to(this,Ty).get(_)._setVisible(INTERNAL,!1);ku(this,jle,this.getHash())}}isVisible(i){if(to(this,Ty).size===0)return!0;if(!i)return info("Optional content group not defined."),!0;if(i.type==="OCG")return to(this,Ty).has(i.id)?to(this,Ty).get(i.id).visible:(warn(`Optional content group not found: ${i.id}`),!0);if(i.type==="OCMD"){if(i.expression)return Nu(this,yhe,rge).call(this,i.expression);if(!i.policy||i.policy==="AnyOn"){for(const s of i.ids){if(!to(this,Ty).has(s))return warn(`Optional content group not found: ${s}`),!0;if(to(this,Ty).get(s).visible)return!0}return!1}if(i.policy==="AllOn"){for(const s of i.ids){if(!to(this,Ty).has(s))return warn(`Optional content group not found: ${s}`),!0;if(!to(this,Ty).get(s).visible)return!1}return!0}if(i.policy==="AnyOff"){for(const s of i.ids){if(!to(this,Ty).has(s))return warn(`Optional content group not found: ${s}`),!0;if(!to(this,Ty).get(s).visible)return!0}return!1}if(i.policy==="AllOff"){for(const s of i.ids){if(!to(this,Ty).has(s))return warn(`Optional content group not found: ${s}`),!0;if(to(this,Ty).get(s).visible)return!1}return!0}return warn(`Unknown optional content policy ${i.policy}.`),!0}return warn(`Unknown group type ${i.type}.`),!0}setVisibility(i,s=!0){const _=to(this,Ty).get(i);_?(_._setVisible(INTERNAL,!!s,!0),ku(this,n9,null)):warn(`Optional content group not found: ${i}`)}setOCGState({state:i,preserveRB:s}){let _;for(const _e of i){switch(_e){case"ON":case"OFF":case"Toggle":_=_e;continue}const ct=to(this,Ty).get(_e);if(ct)switch(_){case"ON":ct._setVisible(INTERNAL,!0);break;case"OFF":ct._setVisible(INTERNAL,!1);break;case"Toggle":ct._setVisible(INTERNAL,!ct.visible)}}ku(this,n9,null)}get hasInitialVisibility(){return to(this,jle)===null||this.getHash()===to(this,jle)}getOrder(){return to(this,Ty).size?to(this,Xle)?to(this,Xle).slice():[...to(this,Ty).keys()]:null}getGroups(){return to(this,Ty).size>0?objectFromMap(to(this,Ty)):null}getGroup(i){return to(this,Ty).get(i)||null}getHash(){if(to(this,n9)!==null)return to(this,n9);const i=new MurmurHash3_64;for(const[s,_]of to(this,Ty))i.update(`${s}:${_.visible}`);return ku(this,n9,i.hexdigest())}}n9=new WeakMap,Ty=new WeakMap,jle=new WeakMap,Xle=new WeakMap,yhe=new WeakSet,rge=function(i){const s=i.length;if(s<2)return!0;const _=i[0];for(let _e=1;_e<s;_e++){const ct=i[_e];let Mt;if(Array.isArray(ct))Mt=Nu(this,yhe,rge).call(this,ct);else{if(!to(this,Ty).has(ct))return warn(`Optional content group not found: ${ct}`),!0;Mt=to(this,Ty).get(ct).visible}switch(_){case"And":if(!Mt)return!1;break;case"Or":if(Mt)return!0;break;case"Not":return!Mt;default:return!0}}return _==="And"};class PDFDataTransportStream{constructor(i,{disableRange:s=!1,disableStream:_=!1}){assert(i,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:_e,initialData:ct,progressiveDone:Mt,contentDispositionFilename:Ft}=i;if(this._queuedChunks=[],this._progressiveDone=Mt,this._contentDispositionFilename=Ft,(ct==null?void 0:ct.length)>0){const Ut=ct instanceof Uint8Array&&ct.byteLength===ct.buffer.byteLength?ct.buffer:new Uint8Array(ct).buffer;this._queuedChunks.push(Ut)}this._pdfDataRangeTransport=i,this._isStreamingSupported=!_,this._isRangeSupported=!s,this._contentLength=_e,this._fullRequestReader=null,this._rangeReaders=[],i.addRangeListener((Ut,Xt)=>{this._onReceiveData({begin:Ut,chunk:Xt})}),i.addProgressListener((Ut,Xt)=>{this._onProgress({loaded:Ut,total:Xt})}),i.addProgressiveReadListener(Ut=>{this._onReceiveData({chunk:Ut})}),i.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),i.transportReady()}_onReceiveData({begin:i,chunk:s}){const _=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;i===void 0?this._fullRequestReader?this._fullRequestReader._enqueue(_):this._queuedChunks.push(_):assert(this._rangeReaders.some(function(_e){return _e._begin===i&&(_e._enqueue(_),!0)}),"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}get _progressiveDataLength(){var i;return((i=this._fullRequestReader)==null?void 0:i._loaded)??0}_onProgress(i){var s,_,_e,ct;i.total===void 0?(_=(s=this._rangeReaders[0])==null?void 0:s.onProgress)==null||_.call(s,{loaded:i.loaded}):(ct=(_e=this._fullRequestReader)==null?void 0:_e.onProgress)==null||ct.call(_e,{loaded:i.loaded,total:i.total})}_onProgressiveDone(){var i;(i=this._fullRequestReader)==null||i.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(i){const s=this._rangeReaders.indexOf(i);s>=0&&this._rangeReaders.splice(s,1)}getFullReader(){assert(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const i=this._queuedChunks;return this._queuedChunks=null,new PDFDataTransportStreamReader(this,i,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(i,s){if(s<=this._progressiveDataLength)return null;const _=new PDFDataTransportStreamRangeReader(this,i,s);return this._pdfDataRangeTransport.requestDataRange(i,s),this._rangeReaders.push(_),_}cancelAllRequests(i){var s;(s=this._fullRequestReader)==null||s.cancel(i);for(const _ of this._rangeReaders.slice(0))_.cancel(i);this._pdfDataRangeTransport.abort()}}class PDFDataTransportStreamReader{constructor(i,s,_=!1,_e=null){this._stream=i,this._done=_||!1,this._filename=isPdfFile(_e)?_e:null,this._queuedChunks=s||[],this._loaded=0;for(const ct of this._queuedChunks)this._loaded+=ct.byteLength;this._requests=[],this._headersReady=Promise.resolve(),i._fullRequestReader=this,this.onProgress=null}_enqueue(i){this._done||(this._requests.length>0?this._requests.shift().resolve({value:i,done:!1}):this._queuedChunks.push(i),this._loaded+=i.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const i=Promise.withResolvers();return this._requests.push(i),i.promise}cancel(i){this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class PDFDataTransportStreamRangeReader{constructor(i,s,_){this._stream=i,this._begin=s,this._end=_,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(i){if(!this._done){if(this._requests.length===0)this._queuedChunk=i;else{this._requests.shift().resolve({value:i,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const s=this._queuedChunk;return this._queuedChunk=null,{value:s,done:!1}}if(this._done)return{value:void 0,done:!0};const i=Promise.withResolvers();return this._requests.push(i),i.promise}cancel(i){this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function getFilenameFromContentDispositionHeader(o){let i=!0,s=_("filename\\*","i").exec(o);if(s){s=s[1];let Xt=Mt(s);return Xt=unescape(Xt),Xt=Ft(Xt),Xt=Ut(Xt),ct(Xt)}if(s=function(Xt){const Kt=[];let nr;const rr=_("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(nr=rr.exec(Xt))!==null;){let[,hr,fr,yr]=nr;if(hr=parseInt(hr,10),hr in Kt){if(hr===0)break}else Kt[hr]=[fr,yr]}const or=[];for(let hr=0;hr<Kt.length&&hr in Kt;++hr){let[fr,yr]=Kt[hr];yr=Mt(yr),fr&&(yr=unescape(yr),hr===0&&(yr=Ft(yr))),or.push(yr)}return or.join("")}(o),s)return ct(Ut(s));if(s=_("filename","i").exec(o),s){s=s[1];let Xt=Mt(s);return Xt=Ut(Xt),ct(Xt)}function _(Xt,Kt){return new RegExp("(?:^|;)\\s*"+Xt+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',Kt)}function _e(Xt,Kt){if(Xt){if(!/^[\x00-\xFF]+$/.test(Kt))return Kt;try{const nr=new TextDecoder(Xt,{fatal:!0}),rr=stringToBytes(Kt);Kt=nr.decode(rr),i=!1}catch{}}return Kt}function ct(Xt){return i&&/[\x80-\xff]/.test(Xt)&&(Xt=_e("utf-8",Xt),i&&(Xt=_e("iso-8859-1",Xt))),Xt}function Mt(Xt){if(Xt.startsWith('"')){const Kt=Xt.slice(1).split('\\"');for(let nr=0;nr<Kt.length;++nr){const rr=Kt[nr].indexOf('"');rr!==-1&&(Kt[nr]=Kt[nr].slice(0,rr),Kt.length=nr+1),Kt[nr]=Kt[nr].replaceAll(/\\(.)/g,"$1")}Xt=Kt.join('"')}return Xt}function Ft(Xt){const Kt=Xt.indexOf("'");return Kt===-1?Xt:_e(Xt.slice(0,Kt),Xt.slice(Kt+1).replace(/^[^']*'/,""))}function Ut(Xt){return!Xt.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(Xt)?Xt:Xt.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(Kt,nr,rr,or){if(rr==="q"||rr==="Q")return _e(nr,or=(or=or.replaceAll("_"," ")).replaceAll(/=([0-9a-fA-F]{2})/g,function(hr,fr){return String.fromCharCode(parseInt(fr,16))}));try{or=atob(or)}catch{}return _e(nr,or)})}return""}function validateRangeRequestCapabilities({getResponseHeader:o,isHttp:i,rangeChunkSize:s,disableRange:_}){const _e={allowRangeRequests:!1,suggestedLength:void 0},ct=parseInt(o("Content-Length"),10);return!Number.isInteger(ct)||(_e.suggestedLength=ct,ct<=2*s)||_||!i||o("Accept-Ranges")!=="bytes"||(o("Content-Encoding")||"identity")!=="identity"||(_e.allowRangeRequests=!0),_e}function extractFilenameFromHeader(o){const i=o("Content-Disposition");if(i){let s=getFilenameFromContentDispositionHeader(i);if(s.includes("%"))try{s=decodeURIComponent(s)}catch{}if(isPdfFile(s))return s}return null}function createResponseStatusError(o,i){return o===404||o===0&&i.startsWith("file:")?new MissingPDFException('Missing PDF "'+i+'".'):new UnexpectedResponseException(`Unexpected server response (${o}) while retrieving PDF "${i}".`,o)}function validateResponseStatus(o){return o===200||o===206}function createFetchOptions(o,i,s){return{method:"GET",headers:o,signal:s.signal,mode:"cors",credentials:i?"include":"same-origin",redirect:"follow"}}function createHeaders(o){const i=new Headers;for(const s in o){const _=o[s];_!==void 0&&i.append(s,_)}return i}function getArrayBuffer(o){return o instanceof Uint8Array?o.buffer:o instanceof ArrayBuffer?o:(warn(`getArrayBuffer - unexpected data format: ${o}`),new Uint8Array(o).buffer)}class PDFFetchStream{constructor(i){this.source=i,this.isHttp=/^https?:/i.test(i.url),this.httpHeaders=this.isHttp&&i.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var i;return((i=this._fullRequestReader)==null?void 0:i._loaded)??0}getFullReader(){return assert(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new PDFFetchStreamReader(this),this._fullRequestReader}getRangeReader(i,s){if(s<=this._progressiveDataLength)return null;const _=new PDFFetchStreamRangeReader(this,i,s);return this._rangeRequestReaders.push(_),_}cancelAllRequests(i){var s;(s=this._fullRequestReader)==null||s.cancel(i);for(const _ of this._rangeRequestReaders.slice(0))_.cancel(i)}}class PDFFetchStreamReader{constructor(i){this._stream=i,this._reader=null,this._loaded=0,this._filename=null;const s=i.source;this._withCredentials=s.withCredentials||!1,this._contentLength=s.length,this._headersCapability=Promise.withResolvers(),this._disableRange=s.disableRange||!1,this._rangeChunkSize=s.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!s.disableStream,this._isRangeSupported=!s.disableRange,this._headers=createHeaders(this._stream.httpHeaders);const _=s.url;fetch(_,createFetchOptions(this._headers,this._withCredentials,this._abortController)).then(_e=>{if(!validateResponseStatus(_e.status))throw createResponseStatusError(_e.status,_);this._reader=_e.body.getReader(),this._headersCapability.resolve();const ct=Ut=>_e.headers.get(Ut),{allowRangeRequests:Mt,suggestedLength:Ft}=validateRangeRequestCapabilities({getResponseHeader:ct,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=Mt,this._contentLength=Ft||this._contentLength,this._filename=extractFilenameFromHeader(ct),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var _;await this._headersCapability.promise;const{value:i,done:s}=await this._reader.read();return s?{value:i,done:s}:(this._loaded+=i.byteLength,(_=this.onProgress)==null||_.call(this,{loaded:this._loaded,total:this._contentLength}),{value:getArrayBuffer(i),done:!1})}cancel(i){var s;(s=this._reader)==null||s.cancel(i),this._abortController.abort()}}class PDFFetchStreamRangeReader{constructor(i,s,_){this._stream=i,this._reader=null,this._loaded=0;const _e=i.source;this._withCredentials=_e.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!_e.disableStream,this._abortController=new AbortController,this._headers=createHeaders(this._stream.httpHeaders),this._headers.append("Range",`bytes=${s}-${_-1}`);const ct=_e.url;fetch(ct,createFetchOptions(this._headers,this._withCredentials,this._abortController)).then(Mt=>{if(!validateResponseStatus(Mt.status))throw createResponseStatusError(Mt.status,ct);this._readCapability.resolve(),this._reader=Mt.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var _;await this._readCapability.promise;const{value:i,done:s}=await this._reader.read();return s?{value:i,done:s}:(this._loaded+=i.byteLength,(_=this.onProgress)==null||_.call(this,{loaded:this._loaded}),{value:getArrayBuffer(i),done:!1})}cancel(i){var s;(s=this._reader)==null||s.cancel(i),this._abortController.abort()}}const OK_RESPONSE=200,PARTIAL_CONTENT_RESPONSE=206;function network_getArrayBuffer(o){const i=o.response;return typeof i!="string"?i:stringToBytes(i).buffer}class NetworkManager{constructor(i,s={}){this.url=i,this.isHttp=/^https?:/i.test(i),this.httpHeaders=this.isHttp&&s.httpHeaders||Object.create(null),this.withCredentials=s.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(i,s,_){const _e={begin:i,end:s};for(const ct in _)_e[ct]=_[ct];return this.request(_e)}requestFull(i){return this.request(i)}request(i){const s=new XMLHttpRequest,_=this.currXhrId++,_e=this.pendingRequests[_]={xhr:s};s.open("GET",this.url),s.withCredentials=this.withCredentials;for(const ct in this.httpHeaders){const Mt=this.httpHeaders[ct];Mt!==void 0&&s.setRequestHeader(ct,Mt)}return this.isHttp&&"begin"in i&&"end"in i?(s.setRequestHeader("Range",`bytes=${i.begin}-${i.end-1}`),_e.expectedStatus=PARTIAL_CONTENT_RESPONSE):_e.expectedStatus=OK_RESPONSE,s.responseType="arraybuffer",i.onError&&(s.onerror=function(ct){i.onError(s.status)}),s.onreadystatechange=this.onStateChange.bind(this,_),s.onprogress=this.onProgress.bind(this,_),_e.onHeadersReceived=i.onHeadersReceived,_e.onDone=i.onDone,_e.onError=i.onError,_e.onProgress=i.onProgress,s.send(null),_}onProgress(i,s){var _e;const _=this.pendingRequests[i];_&&((_e=_.onProgress)==null||_e.call(_,s))}onStateChange(i,s){var Ft,Ut,Xt;const _=this.pendingRequests[i];if(!_)return;const _e=_.xhr;if(_e.readyState>=2&&_.onHeadersReceived&&(_.onHeadersReceived(),delete _.onHeadersReceived),_e.readyState!==4||!(i in this.pendingRequests))return;if(delete this.pendingRequests[i],_e.status===0&&this.isHttp)return void((Ft=_.onError)==null?void 0:Ft.call(_,_e.status));const ct=_e.status||OK_RESPONSE;if(!(ct===OK_RESPONSE&&_.expectedStatus===PARTIAL_CONTENT_RESPONSE)&&ct!==_.expectedStatus)return void((Ut=_.onError)==null?void 0:Ut.call(_,_e.status));const Mt=network_getArrayBuffer(_e);if(ct===PARTIAL_CONTENT_RESPONSE){const Kt=_e.getResponseHeader("Content-Range"),nr=/bytes (\d+)-(\d+)\/(\d+)/.exec(Kt);_.onDone({begin:parseInt(nr[1],10),chunk:Mt})}else Mt?_.onDone({begin:0,chunk:Mt}):(Xt=_.onError)==null||Xt.call(_,_e.status)}getRequestXhr(i){return this.pendingRequests[i].xhr}isPendingRequest(i){return i in this.pendingRequests}abortRequest(i){const s=this.pendingRequests[i].xhr;delete this.pendingRequests[i],s.abort()}}class PDFNetworkStream{constructor(i){this._source=i,this._manager=new NetworkManager(i.url,{httpHeaders:i.httpHeaders,withCredentials:i.withCredentials}),this._rangeChunkSize=i.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(i){const s=this._rangeRequestReaders.indexOf(i);s>=0&&this._rangeRequestReaders.splice(s,1)}getFullReader(){return assert(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new PDFNetworkStreamFullRequestReader(this._manager,this._source),this._fullRequestReader}getRangeReader(i,s){const _=new PDFNetworkStreamRangeRequestReader(this._manager,i,s);return _.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(_),_}cancelAllRequests(i){var s;(s=this._fullRequestReader)==null||s.cancel(i);for(const _ of this._rangeRequestReaders.slice(0))_.cancel(i)}}class PDFNetworkStreamFullRequestReader{constructor(i,s){this._manager=i;const _={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=s.url,this._fullRequestId=i.requestFull(_),this._headersReceivedCapability=Promise.withResolvers(),this._disableRange=s.disableRange||!1,this._contentLength=s.length,this._rangeChunkSize=s.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const i=this._fullRequestId,s=this._manager.getRequestXhr(i),_=Mt=>s.getResponseHeader(Mt),{allowRangeRequests:_e,suggestedLength:ct}=validateRangeRequestCapabilities({getResponseHeader:_,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});_e&&(this._isRangeSupported=!0),this._contentLength=ct||this._contentLength,this._filename=extractFilenameFromHeader(_),this._isRangeSupported&&this._manager.abortRequest(i),this._headersReceivedCapability.resolve()}_onDone(i){if(i&&(this._requests.length>0?this._requests.shift().resolve({value:i.chunk,done:!1}):this._cachedChunks.push(i.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(i){this._storedError=createResponseStatusError(i,this._url),this._headersReceivedCapability.reject(this._storedError);for(const s of this._requests)s.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(i){var s;(s=this.onProgress)==null||s.call(this,{loaded:i.loaded,total:i.lengthComputable?i.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const i=Promise.withResolvers();return this._requests.push(i),i.promise}cancel(i){this._done=!0,this._headersReceivedCapability.reject(i);for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class PDFNetworkStreamRangeRequestReader{constructor(i,s,_){this._manager=i;const _e={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=i.url,this._requestId=i.requestRange(s,_,_e),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var i;(i=this.onClosed)==null||i.call(this,this)}_onDone(i){const s=i.chunk;this._requests.length>0?this._requests.shift().resolve({value:s,done:!1}):this._queuedChunk=s,this._done=!0;for(const _ of this._requests)_.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(i){this._storedError=createResponseStatusError(i,this._url);for(const s of this._requests)s.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(i){var s;this.isStreamingSupported||((s=this.onProgress)==null||s.call(this,{loaded:i.loaded}))}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const s=this._queuedChunk;return this._queuedChunk=null,{value:s,done:!1}}if(this._done)return{value:void 0,done:!0};const i=Promise.withResolvers();return this._requests.push(i),i.promise}cancel(i){this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const fileUriRegex=/^file:\/\/\/[a-zA-Z]:\//;function parseUrl(o){const i=NodePackages.get("url"),s=i.parse(o);return s.protocol==="file:"||s.host?s:/^[a-z]:[/\\]/i.test(o)?i.parse(`file:///${o}`):(s.host||(s.protocol="file:"),s)}class PDFNodeStream{constructor(i){this.source=i,this.url=parseUrl(i.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&i.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var i;return((i=this._fullRequestReader)==null?void 0:i._loaded)??0}getFullReader(){return assert(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new PDFNodeStreamFsFullReader(this):new PDFNodeStreamFullReader(this),this._fullRequestReader}getRangeReader(i,s){if(s<=this._progressiveDataLength)return null;const _=this.isFsUrl?new PDFNodeStreamFsRangeReader(this,i,s):new PDFNodeStreamRangeReader(this,i,s);return this._rangeRequestReaders.push(_),_}cancelAllRequests(i){var s;(s=this._fullRequestReader)==null||s.cancel(i);for(const _ of this._rangeRequestReaders.slice(0))_.cancel(i)}}class BaseFullReader{constructor(i){this._url=i.url,this._done=!1,this._storedError=null,this.onProgress=null;const s=i.source;this._contentLength=s.length,this._loaded=0,this._filename=null,this._disableRange=s.disableRange||!1,this._rangeChunkSize=s.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!s.disableStream,this._isRangeSupported=!s.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const i=this._readableStream.read();return i===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=i.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(i).buffer,done:!1})}cancel(i){this._readableStream?this._readableStream.destroy(i):this._error(i)}_error(i){this._storedError=i,this._readCapability.resolve()}_setReadableStream(i){this._readableStream=i,i.on("readable",()=>{this._readCapability.resolve()}),i.on("end",()=>{i.destroy(),this._done=!0,this._readCapability.resolve()}),i.on("error",s=>{this._error(s)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class BaseRangeReader{constructor(i){this._url=i.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const s=i.source;this._isStreamingSupported=!s.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const i=this._readableStream.read();return i===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=i.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:new Uint8Array(i).buffer,done:!1})}cancel(i){this._readableStream?this._readableStream.destroy(i):this._error(i)}_error(i){this._storedError=i,this._readCapability.resolve()}_setReadableStream(i){this._readableStream=i,i.on("readable",()=>{this._readCapability.resolve()}),i.on("end",()=>{i.destroy(),this._done=!0,this._readCapability.resolve()}),i.on("error",s=>{this._error(s)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function createRequestOptions(o,i){return{protocol:o.protocol,auth:o.auth,host:o.hostname,port:o.port,path:o.path,method:"GET",headers:i}}class PDFNodeStreamFullReader extends BaseFullReader{constructor(i){super(i);const s=_=>{if(_.statusCode===404){const Ft=new MissingPDFException(`Missing PDF "${this._url}".`);return this._storedError=Ft,void this._headersCapability.reject(Ft)}this._headersCapability.resolve(),this._setReadableStream(_);const _e=Ft=>this._readableStream.headers[Ft.toLowerCase()],{allowRangeRequests:ct,suggestedLength:Mt}=validateRangeRequestCapabilities({getResponseHeader:_e,isHttp:i.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=ct,this._contentLength=Mt||this._contentLength,this._filename=extractFilenameFromHeader(_e)};if(this._request=null,this._url.protocol==="http:"){const _=NodePackages.get("http");this._request=_.request(createRequestOptions(this._url,i.httpHeaders),s)}else{const _=NodePackages.get("https");this._request=_.request(createRequestOptions(this._url,i.httpHeaders),s)}this._request.on("error",_=>{this._storedError=_,this._headersCapability.reject(_)}),this._request.end()}}class PDFNodeStreamRangeReader extends BaseRangeReader{constructor(i,s,_){super(i),this._httpHeaders={};for(const ct in i.httpHeaders){const Mt=i.httpHeaders[ct];Mt!==void 0&&(this._httpHeaders[ct]=Mt)}this._httpHeaders.Range=`bytes=${s}-${_-1}`;const _e=ct=>{if(ct.statusCode!==404)this._setReadableStream(ct);else{const Mt=new MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=Mt}};if(this._request=null,this._url.protocol==="http:"){const ct=NodePackages.get("http");this._request=ct.request(createRequestOptions(this._url,this._httpHeaders),_e)}else{const ct=NodePackages.get("https");this._request=ct.request(createRequestOptions(this._url,this._httpHeaders),_e)}this._request.on("error",ct=>{this._storedError=ct}),this._request.end()}}class PDFNodeStreamFsFullReader extends BaseFullReader{constructor(i){super(i);let s=decodeURIComponent(this._url.path);fileUriRegex.test(this._url.href)&&(s=s.replace(/^\//,""));const _=NodePackages.get("fs");_.promises.lstat(s).then(_e=>{this._contentLength=_e.size,this._setReadableStream(_.createReadStream(s)),this._headersCapability.resolve()},_e=>{_e.code==="ENOENT"&&(_e=new MissingPDFException(`Missing PDF "${s}".`)),this._storedError=_e,this._headersCapability.reject(_e)})}}class PDFNodeStreamFsRangeReader extends BaseRangeReader{constructor(i,s,_){super(i);let _e=decodeURIComponent(this._url.path);fileUriRegex.test(this._url.href)&&(_e=_e.replace(/^\//,""));const ct=NodePackages.get("fs");this._setReadableStream(ct.createReadStream(_e,{start:s,end:_-1}))}}const MAX_TEXT_DIVS_TO_RENDER=1e5,DEFAULT_FONT_SIZE=30,DEFAULT_FONT_ASCENT=.8;var qge,g9,F0,vhe,bhe,YZ,r4,xhe,whe,QZ,qle,Kle,XU,Yle,Ehe,Zle,r2,She,$he,Ky,Tre,Jre,YU,Qle,C8,k1e,T1e,nge,zC,Tfe,N1e,R1e;let TextLayer$1=(Ky=class{constructor({textContentSource:i,container:s,viewport:_}){Ku(this,C8);Ku(this,g9,Promise.withResolvers());Ku(this,F0,null);Ku(this,vhe,!1);Ku(this,bhe,!!((qge=globalThis.FontInspector)!=null&&qge.enabled));Ku(this,YZ,null);Ku(this,r4,null);Ku(this,xhe,0);Ku(this,whe,0);Ku(this,QZ,null);Ku(this,qle,null);Ku(this,Kle,0);Ku(this,XU,0);Ku(this,Yle,Object.create(null));Ku(this,Ehe,[]);Ku(this,Zle,null);Ku(this,r2,[]);Ku(this,She,new WeakMap);Ku(this,$he,null);var Ut;if(i instanceof ReadableStream)ku(this,Zle,i);else{if(typeof i!="object")throw new Error('No "textContentSource" parameter specified.');ku(this,Zle,new ReadableStream({start(Xt){Xt.enqueue(i),Xt.close()}}))}ku(this,F0,ku(this,qle,s)),ku(this,XU,_.scale*(globalThis.devicePixelRatio||1)),ku(this,Kle,_.rotation),ku(this,r4,{prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:null});const{pageWidth:_e,pageHeight:ct,pageX:Mt,pageY:Ft}=_.rawDims;ku(this,$he,[1,0,0,-1,-Mt,Ft+ct]),ku(this,whe,_e),ku(this,xhe,ct),Nu(Ut=Ky,zC,N1e).call(Ut),setLayerDimensions(s,_),to(this,g9).promise.catch(()=>{}).then(()=>{to(Ky,Qle).delete(this),ku(this,r4,null),ku(this,Yle,null)})}render(){const i=()=>{to(this,QZ).read().then(({value:s,done:_})=>{_?to(this,g9).resolve():(to(this,YZ)??ku(this,YZ,s.lang),Object.assign(to(this,Yle),s.styles),Nu(this,C8,k1e).call(this,s.items),i())},to(this,g9).reject)};return ku(this,QZ,to(this,Zle).getReader()),to(Ky,Qle).add(this),i(),to(this,g9).promise}update({viewport:i,onBefore:s=null}){var ct;const _=i.scale*(globalThis.devicePixelRatio||1),_e=i.rotation;if(_e!==to(this,Kle)&&(s==null||s(),ku(this,Kle,_e),setLayerDimensions(to(this,qle),{rotation:_e})),_!==to(this,XU)){s==null||s(),ku(this,XU,_);const Mt={prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:Nu(ct=Ky,zC,Tfe).call(ct,to(this,YZ))};for(const Ft of to(this,r2))Mt.properties=to(this,She).get(Ft),Mt.div=Ft,Nu(this,C8,nge).call(this,Mt)}}cancel(){var s;const i=new AbortException("TextLayer task cancelled.");(s=to(this,QZ))==null||s.cancel(i).catch(()=>{}),ku(this,QZ,null),to(this,g9).reject(i)}get textDivs(){return to(this,r2)}get textContentItemsStr(){return to(this,Ehe)}static cleanup(){if(!(to(this,Qle).size>0)){to(this,Tre).clear();for(const{canvas:i}of to(this,Jre).values())i.remove();to(this,Jre).clear()}}},g9=new WeakMap,F0=new WeakMap,vhe=new WeakMap,bhe=new WeakMap,YZ=new WeakMap,r4=new WeakMap,xhe=new WeakMap,whe=new WeakMap,QZ=new WeakMap,qle=new WeakMap,Kle=new WeakMap,XU=new WeakMap,Yle=new WeakMap,Ehe=new WeakMap,Zle=new WeakMap,r2=new WeakMap,She=new WeakMap,$he=new WeakMap,Tre=new WeakMap,Jre=new WeakMap,YU=new WeakMap,Qle=new WeakMap,C8=new WeakSet,k1e=function(i){var _e,ct;if(to(this,vhe))return;(ct=to(this,r4)).ctx??(ct.ctx=Nu(_e=Ky,zC,Tfe).call(_e,to(this,YZ)));const s=to(this,r2),_=to(this,Ehe);for(const Mt of i){if(s.length>MAX_TEXT_DIVS_TO_RENDER)return warn("Ignoring additional textDivs for performance reasons."),void ku(this,vhe,!0);if(Mt.str!==void 0)_.push(Mt.str),Nu(this,C8,T1e).call(this,Mt);else if(Mt.type==="beginMarkedContentProps"||Mt.type==="beginMarkedContent"){const Ft=to(this,F0);ku(this,F0,document.createElement("span")),to(this,F0).classList.add("markedContent"),Mt.id!==null&&to(this,F0).setAttribute("id",`${Mt.id}`),Ft.append(to(this,F0))}else Mt.type==="endMarkedContent"&&ku(this,F0,to(this,F0).parentNode)}},T1e=function(i){var fr;const s=document.createElement("span"),_={angle:0,canvasWidth:0,hasText:i.str!=="",hasEOL:i.hasEOL,fontSize:0};to(this,r2).push(s);const _e=Util.transform(to(this,$he),i.transform);let ct=Math.atan2(_e[1],_e[0]);const Mt=to(this,Yle)[i.fontName];Mt.vertical&&(ct+=Math.PI/2);const Ft=to(this,bhe)&&Mt.fontSubstitution||Mt.fontFamily,Ut=Math.hypot(_e[2],_e[3]),Xt=Ut*Nu(fr=Ky,zC,R1e).call(fr,Ft,to(this,YZ));let Kt,nr;ct===0?(Kt=_e[4],nr=_e[5]-Xt):(Kt=_e[4]+Xt*Math.sin(ct),nr=_e[5]-Xt*Math.cos(ct));const rr="calc(var(--scale-factor)*",or=s.style;to(this,F0)===to(this,qle)?(or.left=`${(100*Kt/to(this,whe)).toFixed(2)}%`,or.top=`${(100*nr/to(this,xhe)).toFixed(2)}%`):(or.left=`${rr}${Kt.toFixed(2)}px)`,or.top=`${rr}${nr.toFixed(2)}px)`),or.fontSize=`${rr}${(to(Ky,YU)*Ut).toFixed(2)}px)`,or.fontFamily=Ft,_.fontSize=Ut,s.setAttribute("role","presentation"),s.textContent=i.str,s.dir=i.dir,to(this,bhe)&&(s.dataset.fontName=Mt.fontSubstitutionLoadedName||i.fontName),ct!==0&&(_.angle=ct*(180/Math.PI));let hr=!1;if(i.str.length>1)hr=!0;else if(i.str!==" "&&i.transform[0]!==i.transform[3]){const yr=Math.abs(i.transform[0]),Lr=Math.abs(i.transform[3]);yr!==Lr&&Math.max(yr,Lr)/Math.min(yr,Lr)>1.5&&(hr=!0)}if(hr&&(_.canvasWidth=Mt.vertical?i.height:i.width),to(this,She).set(s,_),to(this,r4).div=s,to(this,r4).properties=_,Nu(this,C8,nge).call(this,to(this,r4)),_.hasText&&to(this,F0).append(s),_.hasEOL){const yr=document.createElement("br");yr.setAttribute("role","presentation"),to(this,F0).append(yr)}},nge=function(i){const{div:s,properties:_,ctx:_e,prevFontSize:ct,prevFontFamily:Mt}=i,{style:Ft}=s;let Ut="";if(to(Ky,YU)>1&&(Ut=`scale(${1/to(Ky,YU)})`),_.canvasWidth!==0&&_.hasText){const{fontFamily:Xt}=Ft,{canvasWidth:Kt,fontSize:nr}=_;ct===nr&&Mt===Xt||(_e.font=`${nr*to(this,XU)}px ${Xt}`,i.prevFontSize=nr,i.prevFontFamily=Xt);const{width:rr}=_e.measureText(s.textContent);rr>0&&(Ut=`scaleX(${Kt*to(this,XU)/rr}) ${Ut}`)}_.angle!==0&&(Ut=`rotate(${_.angle}deg) ${Ut}`),Ut.length>0&&(Ft.transform=Ut)},zC=new WeakSet,Tfe=function(i=null){let s=to(this,Jre).get(i||(i=""));if(!s){const _=document.createElement("canvas");_.className="hiddenCanvasElement",_.lang=i,document.body.append(_),s=_.getContext("2d",{alpha:!1,willReadFrequently:!0}),to(this,Jre).set(i,s)}return s},N1e=function(){if(to(this,YU)!==null)return;const i=document.createElement("div");i.style.opacity=0,i.style.lineHeight=1,i.style.fontSize="1px",i.textContent="X",document.body.append(i),ku(this,YU,i.getBoundingClientRect().height),i.remove()},R1e=function(i,s){const _=to(this,Tre).get(i);if(_)return _;const _e=Nu(this,zC,Tfe).call(this,s),ct=_e.font;_e.canvas.width=_e.canvas.height=DEFAULT_FONT_SIZE,_e.font=`${DEFAULT_FONT_SIZE}px ${i}`;const Mt=_e.measureText("");let Ft=Mt.fontBoundingBoxAscent,Ut=Math.abs(Mt.fontBoundingBoxDescent);if(Ft){const nr=Ft/(Ft+Ut);return to(this,Tre).set(i,nr),_e.canvas.width=_e.canvas.height=0,_e.font=ct,nr}_e.strokeStyle="red",_e.clearRect(0,0,DEFAULT_FONT_SIZE,DEFAULT_FONT_SIZE),_e.strokeText("g",0,0);let Xt=_e.getImageData(0,0,DEFAULT_FONT_SIZE,DEFAULT_FONT_SIZE).data;Ut=0;for(let nr=Xt.length-1-3;nr>=0;nr-=4)if(Xt[nr]>0){Ut=Math.ceil(nr/4/DEFAULT_FONT_SIZE);break}_e.clearRect(0,0,DEFAULT_FONT_SIZE,DEFAULT_FONT_SIZE),_e.strokeText("A",0,DEFAULT_FONT_SIZE),Xt=_e.getImageData(0,0,DEFAULT_FONT_SIZE,DEFAULT_FONT_SIZE).data,Ft=0;for(let nr=0,rr=Xt.length;nr<rr;nr+=4)if(Xt[nr]>0){Ft=DEFAULT_FONT_SIZE-Math.floor(nr/4/DEFAULT_FONT_SIZE);break}_e.canvas.width=_e.canvas.height=0,_e.font=ct;const Kt=Ft?Ft/(Ft+Ut):DEFAULT_FONT_ASCENT;return to(this,Tre).set(i,Kt),Kt},Ku(Ky,zC),Ku(Ky,Tre,new Map),Ku(Ky,Jre,new Map),Ku(Ky,YU,null),Ku(Ky,Qle,new Set),Ky);function renderTextLayer(){deprecated("`renderTextLayer`, please use `TextLayer` instead.");const{textContentSource:o,container:i,viewport:s,..._}=arguments[0],_e=Object.keys(_);_e.length>0&&warn("Ignoring `renderTextLayer` parameters: "+_e.join(", "));const ct=new TextLayer$1({textContentSource:o,container:i,viewport:s}),{textDivs:Mt,textContentItemsStr:Ft}=ct;return{promise:ct.render(),textDivs:Mt,textContentItemsStr:Ft}}function updateTextLayer(){deprecated("`updateTextLayer`, please use `TextLayer` instead.")}class XfaText{static textContent(i){const s=[],_={items:s,styles:Object.create(null)};return function _e(ct){var Ut;if(!ct)return;let Mt=null;const Ft=ct.name;if(Ft==="#text")Mt=ct.value;else{if(!XfaText.shouldBuildText(Ft))return;(Ut=ct==null?void 0:ct.attributes)!=null&&Ut.textContent?Mt=ct.attributes.textContent:ct.value&&(Mt=ct.value)}if(Mt!==null&&s.push({str:Mt}),ct.children)for(const Xt of ct.children)_e(Xt)}(i),_}static shouldBuildText(i){return!(i==="textarea"||i==="input"||i==="option"||i==="select")}}const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=isNodeJS?NodeCanvasFactory:DOMCanvasFactory,DefaultCMapReaderFactory=isNodeJS?NodeCMapReaderFactory:DOMCMapReaderFactory,DefaultFilterFactory=isNodeJS?NodeFilterFactory:DOMFilterFactory,DefaultStandardFontDataFactory=isNodeJS?NodeStandardFontDataFactory:DOMStandardFontDataFactory;function getDocument(o={}){typeof o=="string"||o instanceof URL?o={url:o}:(o instanceof ArrayBuffer||ArrayBuffer.isView(o))&&(o={data:o});const i=new PDFDocumentLoadingTask,{docId:s}=i,_=o.url?getUrlProp(o.url):null,_e=o.data?getDataProp(o.data):null,ct=o.httpHeaders||null,Mt=o.withCredentials===!0,Ft=o.password??null,Ut=o.range instanceof PDFDataRangeTransport$1?o.range:null,Xt=Number.isInteger(o.rangeChunkSize)&&o.rangeChunkSize>0?o.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let Kt=o.worker instanceof PDFWorker?o.worker:null;const nr=o.verbosity,rr=typeof o.docBaseUrl!="string"||isDataScheme(o.docBaseUrl)?null:o.docBaseUrl,or=typeof o.cMapUrl=="string"?o.cMapUrl:null,hr=o.cMapPacked!==!1,fr=o.CMapReaderFactory||DefaultCMapReaderFactory,yr=typeof o.standardFontDataUrl=="string"?o.standardFontDataUrl:null,Lr=o.StandardFontDataFactory||DefaultStandardFontDataFactory,Br=o.stopAtErrors!==!0,Vr=Number.isInteger(o.maxImageSize)&&o.maxImageSize>-1?o.maxImageSize:-1,Wr=o.isEvalSupported!==!1,ro=typeof o.isOffscreenCanvasSupported=="boolean"?o.isOffscreenCanvasSupported:!isNodeJS,no=Number.isInteger(o.canvasMaxAreaInBytes)?o.canvasMaxAreaInBytes:-1,so=typeof o.disableFontFace=="boolean"?o.disableFontFace:isNodeJS,ko=o.fontExtraProperties===!0,To=o.enableXfa===!0,oo=o.ownerDocument||globalThis.document,No=o.disableRange===!0,As=o.disableStream===!0,Ks=o.disableAutoFetch===!0,vu=o.pdfBug===!0,Fu=o.enableHWA===!0,Ap=Ut?Ut.length:o.length??NaN,Pp=typeof o.useSystemFonts=="boolean"?o.useSystemFonts:!isNodeJS&&!so,Lo=typeof o.useWorkerFetch=="boolean"?o.useWorkerFetch:fr===DOMCMapReaderFactory&&Lr===DOMStandardFontDataFactory&&or&&yr&&isValidFetchUrl(or,document.baseURI)&&isValidFetchUrl(yr,document.baseURI),Au=o.canvasFactory||new DefaultCanvasFactory({ownerDocument:oo,enableHWA:Fu}),Mp=o.filterFactory||new DefaultFilterFactory({docId:s,ownerDocument:oo});setVerbosityLevel(nr);const Lp={canvasFactory:Au,filterFactory:Mp};if(Lo||(Lp.cMapReaderFactory=new fr({baseUrl:or,isCompressed:hr}),Lp.standardFontDataFactory=new Lr({baseUrl:yr})),!Kt){const wm={verbosity:nr,port:GlobalWorkerOptions.workerPort};Kt=wm.port?PDFWorker.fromPort(wm):new PDFWorker(wm),i._worker=Kt}const Op={docId:s,apiVersion:"4.4.168",data:_e,password:Ft,disableAutoFetch:Ks,rangeChunkSize:Xt,length:Ap,docBaseUrl:rr,enableXfa:To,evaluatorOptions:{maxImageSize:Vr,disableFontFace:so,ignoreErrors:Br,isEvalSupported:Wr,isOffscreenCanvasSupported:ro,canvasMaxAreaInBytes:no,fontExtraProperties:ko,useSystemFonts:Pp,cMapUrl:Lo?or:null,standardFontDataUrl:Lo?yr:null}},Fp={disableFontFace:so,fontExtraProperties:ko,ownerDocument:oo,pdfBug:vu,styleElement:null,loadingParams:{disableAutoFetch:Ks,enableXfa:To}};return Kt.promise.then(function(){if(i.destroyed)throw new Error("Loading aborted");if(Kt.destroyed)throw new Error("Worker was destroyed");const wm=Kt.messageHandler.sendWithPromise("GetDocRequest",Op,_e?[_e.buffer]:null);let Bp;if(Ut)Bp=new PDFDataTransportStream(Ut,{disableRange:No,disableStream:As});else if(!_e){if(!_)throw new Error("getDocument - no `url` parameter provided.");Bp=(Em=>isNodeJS?function(){return typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype}()&&isValidFetchUrl(Em.url)?new PDFFetchStream(Em):new PDFNodeStream(Em):isValidFetchUrl(Em.url)?new PDFFetchStream(Em):new PDFNetworkStream(Em))({url:_,length:Ap,httpHeaders:ct,withCredentials:Mt,rangeChunkSize:Xt,disableRange:No,disableStream:As})}return wm.then(Em=>{if(i.destroyed)throw new Error("Loading aborted");if(Kt.destroyed)throw new Error("Worker was destroyed");const Yp=new MessageHandler(s,Em,Kt.port),_m=new WorkerTransport(Yp,i,Bp,Fp,Lp);i._transport=_m,Yp.send("Ready",null)})}).catch(i._capability.reject),i}function getUrlProp(o){if(o instanceof URL)return o.href;try{return new URL(o,window.location).href}catch{if(isNodeJS&&typeof o=="string")return o}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(o){if(isNodeJS&&typeof Buffer<"u"&&o instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength)return o;if(typeof o=="string")return stringToBytes(o);if(o instanceof ArrayBuffer||ArrayBuffer.isView(o)||typeof o=="object"&&!isNaN(o==null?void 0:o.length))return new Uint8Array(o);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function isRefProxy(o){return typeof o=="object"&&Number.isInteger(o==null?void 0:o.num)&&o.num>=0&&Number.isInteger(o==null?void 0:o.gen)&&o.gen>=0}var ome;const sme=class sme{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId="d"+B0(sme,ome)._++,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var i,s,_;this.destroyed=!0;try{(i=this._worker)!=null&&i.port&&(this._worker._pendingDestroy=!0),await((s=this._transport)==null?void 0:s.destroy())}catch(_e){throw(_=this._worker)!=null&&_.port&&delete this._worker._pendingDestroy,_e}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};ome=new WeakMap,Ku(sme,ome,0);let PDFDocumentLoadingTask=sme,PDFDataRangeTransport$1=class{constructor(o,i,s=!1,_=null){this.length=o,this.initialData=i,this.progressiveDone=s,this.contentDispositionFilename=_,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(o){this._rangeListeners.push(o)}addProgressListener(o){this._progressListeners.push(o)}addProgressiveReadListener(o){this._progressiveReadListeners.push(o)}addProgressiveDoneListener(o){this._progressiveDoneListeners.push(o)}onDataRange(o,i){for(const s of this._rangeListeners)s(o,i)}onDataProgress(o,i){this._readyCapability.promise.then(()=>{for(const s of this._progressListeners)s(o,i)})}onDataProgressiveRead(o){this._readyCapability.promise.then(()=>{for(const i of this._progressiveReadListeners)i(o)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const o of this._progressiveDoneListeners)o()})}transportReady(){this._readyCapability.resolve()}requestDataRange(o,i){unreachable("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class PDFDocumentProxy{constructor(i,s){this._pdfInfo=i,this._transport=s}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return shadow(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(i){return this._transport.getPage(i)}getPageIndex(i){return this._transport.getPageIndex(i)}getDestinations(){return this._transport.getDestinations()}getDestination(i){return this._transport.getDestination(i)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:i="display"}={}){const{renderingIntent:s}=this._transport.getRenderingIntent(i);return this._transport.getOptionalContentConfig(s)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(i=!1){return this._transport.startCleanup(i||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(i){return this._transport.cachedPageNumber(i)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var ZU,d4,rC,Ale,Nfe;class PDFPageProxy{constructor(i,s,_,_e=!1){Ku(this,rC);Ku(this,ZU,null);Ku(this,d4,!1);this._pageIndex=i,this._pageInfo=s,this._transport=_,this._stats=_e?new StatTimer:null,this._pdfBug=_e,this.commonObjs=_.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:i,rotation:s=this.rotate,offsetX:_=0,offsetY:_e=0,dontFlip:ct=!1}={}){return new PageViewport({viewBox:this.view,scale:i,rotation:s,offsetX:_,offsetY:_e,dontFlip:ct})}getAnnotations({intent:i="display"}={}){const{renderingIntent:s}=this._transport.getRenderingIntent(i);return this._transport.getAnnotations(this._pageIndex,s)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return shadow(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var i;return((i=this._transport._htmlForXfa)==null?void 0:i.children[this._pageIndex])||null}render({canvasContext:i,viewport:s,intent:_="display",annotationMode:_e=AnnotationMode.ENABLE,transform:ct=null,background:Mt=null,optionalContentConfigPromise:Ft=null,annotationCanvasMap:Ut=null,pageColors:Xt=null,printAnnotationStorage:Kt=null}){var Vr,Wr;(Vr=this._stats)==null||Vr.time("Overall");const nr=this._transport.getRenderingIntent(_,_e,Kt),{renderingIntent:rr,cacheKey:or}=nr;ku(this,d4,!1),Nu(this,rC,Nfe).call(this),Ft||(Ft=this._transport.getOptionalContentConfig(rr));let hr=this._intentStates.get(or);hr||(hr=Object.create(null),this._intentStates.set(or,hr)),hr.streamReaderCancelTimeout&&(clearTimeout(hr.streamReaderCancelTimeout),hr.streamReaderCancelTimeout=null);const fr=!!(rr&RenderingIntentFlag.PRINT);hr.displayReadyCapability||(hr.displayReadyCapability=Promise.withResolvers(),hr.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Wr=this._stats)==null||Wr.time("Page Request"),this._pumpOperatorList(nr));const yr=ro=>{var no;hr.renderTasks.delete(Lr),(this._maybeCleanupAfterRender||fr)&&ku(this,d4,!0),Nu(this,rC,Ale).call(this,!fr),ro?(Lr.capability.reject(ro),this._abortOperatorList({intentState:hr,reason:ro instanceof Error?ro:new Error(ro)})):Lr.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(no=globalThis.Stats)!=null&&no.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},Lr=new InternalRenderTask({callback:yr,params:{canvasContext:i,viewport:s,transform:ct,background:Mt},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:Ut,operatorList:hr.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!fr,pdfBug:this._pdfBug,pageColors:Xt});(hr.renderTasks||(hr.renderTasks=new Set)).add(Lr);const Br=Lr.task;return Promise.all([hr.displayReadyCapability.promise,Ft]).then(([ro,no])=>{var so;if(this.destroyed)yr();else{if((so=this._stats)==null||so.time("Rendering"),!(no.renderingIntent&rr))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");Lr.initializeGraphics({transparency:ro,optionalContentConfig:no}),Lr.operatorListChanged()}}).catch(yr),Br}getOperatorList({intent:i="display",annotationMode:s=AnnotationMode.ENABLE,printAnnotationStorage:_=null}={}){var Ft;const _e=this._transport.getRenderingIntent(i,s,_,!0);let ct,Mt=this._intentStates.get(_e.cacheKey);return Mt||(Mt=Object.create(null),this._intentStates.set(_e.cacheKey,Mt)),Mt.opListReadCapability||(ct=Object.create(null),ct.operatorListChanged=function(){Mt.operatorList.lastChunk&&(Mt.opListReadCapability.resolve(Mt.operatorList),Mt.renderTasks.delete(ct))},Mt.opListReadCapability=Promise.withResolvers(),(Mt.renderTasks||(Mt.renderTasks=new Set)).add(ct),Mt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Ft=this._stats)==null||Ft.time("Page Request"),this._pumpOperatorList(_e)),Mt.opListReadCapability.promise}streamTextContent({includeMarkedContent:i=!1,disableNormalization:s=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:i===!0,disableNormalization:s===!0},{highWaterMark:100,size:_=>_.items.length})}getTextContent(i={}){if(this._transport._htmlForXfa)return this.getXfa().then(_=>XfaText.textContent(_));const s=this.streamTextContent(i);return new Promise(function(_,_e){const ct=s.getReader(),Mt={items:[],styles:Object.create(null),lang:null};(function Ft(){ct.read().then(function({value:Ut,done:Xt}){Xt?_(Mt):(Mt.lang??(Mt.lang=Ut.lang),Object.assign(Mt.styles,Ut.styles),Mt.items.push(...Ut.items),Ft())},_e)})()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const i=[];for(const s of this._intentStates.values())if(this._abortOperatorList({intentState:s,reason:new Error("Page was destroyed."),force:!0}),!s.opListReadCapability)for(const _ of s.renderTasks)i.push(_.completed),_.cancel();return this.objs.clear(),ku(this,d4,!1),Nu(this,rC,Nfe).call(this),Promise.all(i)}cleanup(i=!1){ku(this,d4,!0);const s=Nu(this,rC,Ale).call(this,!1);return i&&s&&this._stats&&(this._stats=new StatTimer),s}_startRenderPage(i,s){var _e,ct;const _=this._intentStates.get(s);_&&((_e=this._stats)==null||_e.timeEnd("Page Request"),(ct=_.displayReadyCapability)==null||ct.resolve(i))}_renderPageChunk(i,s){for(let _=0,_e=i.length;_<_e;_++)s.operatorList.fnArray.push(i.fnArray[_]),s.operatorList.argsArray.push(i.argsArray[_]);s.operatorList.lastChunk=i.lastChunk,s.operatorList.separateAnnots=i.separateAnnots;for(const _ of s.renderTasks)_.operatorListChanged();i.lastChunk&&Nu(this,rC,Ale).call(this,!0)}_pumpOperatorList({renderingIntent:i,cacheKey:s,annotationStorageSerializable:_}){const{map:_e,transfer:ct}=_,Mt=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:i,cacheKey:s,annotationStorage:_e},ct).getReader(),Ft=this._intentStates.get(s);Ft.streamReader=Mt;const Ut=()=>{Mt.read().then(({value:Xt,done:Kt})=>{Kt?Ft.streamReader=null:this._transport.destroyed||(this._renderPageChunk(Xt,Ft),Ut())},Xt=>{if(Ft.streamReader=null,!this._transport.destroyed){if(Ft.operatorList){Ft.operatorList.lastChunk=!0;for(const Kt of Ft.renderTasks)Kt.operatorListChanged();Nu(this,rC,Ale).call(this,!0)}if(Ft.displayReadyCapability)Ft.displayReadyCapability.reject(Xt);else{if(!Ft.opListReadCapability)throw Xt;Ft.opListReadCapability.reject(Xt)}}})};Ut()}_abortOperatorList({intentState:i,reason:s,force:_=!1}){if(i.streamReader){if(i.streamReaderCancelTimeout&&(clearTimeout(i.streamReaderCancelTimeout),i.streamReaderCancelTimeout=null),!_){if(i.renderTasks.size>0)return;if(s instanceof RenderingCancelledException){let _e=RENDERING_CANCELLED_TIMEOUT;return s.extraDelay>0&&s.extraDelay<1e3&&(_e+=s.extraDelay),void(i.streamReaderCancelTimeout=setTimeout(()=>{i.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:i,reason:s,force:!0})},_e))}}if(i.streamReader.cancel(new AbortException(s.message)).catch(()=>{}),i.streamReader=null,!this._transport.destroyed){for(const[_e,ct]of this._intentStates)if(ct===i){this._intentStates.delete(_e);break}this.cleanup()}}}get stats(){return this._stats}}ZU=new WeakMap,d4=new WeakMap,rC=new WeakSet,Ale=function(i=!1){if(Nu(this,rC,Nfe).call(this),!to(this,d4)||this.destroyed)return!1;if(i)return ku(this,ZU,setTimeout(()=>{ku(this,ZU,null),Nu(this,rC,Ale).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:s,operatorList:_}of this._intentStates.values())if(s.size>0||!_.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),ku(this,d4,!1),!0},Nfe=function(){to(this,ZU)&&(clearTimeout(to(this,ZU)),ku(this,ZU,null))};var mne,lme;class LoopbackPort{constructor(){Ku(this,mne,new Set);Ku(this,lme,Promise.resolve())}postMessage(i,s){const _={data:structuredClone(i,s?{transfer:s}:null)};to(this,lme).then(()=>{for(const _e of to(this,mne))_e.call(this,_)})}addEventListener(i,s){to(this,mne).add(s)}removeEventListener(i,s){to(this,mne).delete(s)}terminate(){to(this,mne).clear()}}mne=new WeakMap,lme=new WeakMap;const PDFWorkerUtil={isWorkerDisabled:!1,fakeWorkerId:0};isNodeJS&&(PDFWorkerUtil.isWorkerDisabled=!0,GlobalWorkerOptions.workerSrc||(GlobalWorkerOptions.workerSrc="./pdf.worker.mjs")),PDFWorkerUtil.isSameOrigin=function(o,i){let s;try{if(s=new URL(o),!s.origin||s.origin==="null")return!1}catch{return!1}const _=new URL(i,s);return s.origin===_.origin},PDFWorkerUtil.createCDNWrapper=function(o){const i=`await import("${o}");`;return URL.createObjectURL(new Blob([i],{type:"text/javascript"}))};var Ane,Jle,Rfe,Uce,Pfe;const z0=class z0{constructor({name:i=null,port:s=null,verbosity:_=getVerbosityLevel()}={}){Ku(this,Jle);var _e;if(this.name=i,this.destroyed=!1,this.verbosity=_,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,s){if((_e=to(z0,Ane))!=null&&_e.has(s))throw new Error("Cannot use more than one PDFWorker per port.");return(to(z0,Ane)||ku(z0,Ane,new WeakMap)).set(s,this),void this._initializeFromPort(s)}this._initialize()}get promise(){return isNodeJS?Promise.all([NodePackages.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(i){this._port=i,this._messageHandler=new MessageHandler("main","worker",i),this._messageHandler.on("ready",function(){}),Nu(this,Jle,Rfe).call(this)}_initialize(){if(PDFWorkerUtil.isWorkerDisabled||to(z0,Uce,Pfe))return void this._setupFakeWorker();let{workerSrc:i}=z0;try{PDFWorkerUtil.isSameOrigin(window.location.href,i)||(i=PDFWorkerUtil.createCDNWrapper(new URL(i,window.location).href));const s=new Worker(i,{type:"module"}),_=new MessageHandler("main","worker",s),_e=()=>{ct.abort(),_.destroy(),s.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},ct=new AbortController;s.addEventListener("error",()=>{this._webWorker||_e()},{signal:ct.signal}),_.on("test",Ft=>{ct.abort(),!this.destroyed&&Ft?(this._messageHandler=_,this._port=s,this._webWorker=s,Nu(this,Jle,Rfe).call(this)):_e()}),_.on("ready",Ft=>{if(ct.abort(),this.destroyed)_e();else try{Mt()}catch{this._setupFakeWorker()}});const Mt=()=>{const Ft=new Uint8Array;_.send("test",Ft,[Ft.buffer])};return void Mt()}catch{info("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||(warn("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),z0._setupFakeWorkerGlobal.then(i=>{if(this.destroyed)return void this._readyCapability.reject(new Error("Worker was destroyed"));const s=new LoopbackPort;this._port=s;const _="fake"+PDFWorkerUtil.fakeWorkerId++,_e=new MessageHandler(_+"_worker",_,s);i.setup(_e,s),this._messageHandler=new MessageHandler(_,_+"_worker",s),Nu(this,Jle,Rfe).call(this)}).catch(i=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${i.message}".`))})}destroy(){var i;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(i=to(z0,Ane))==null||i.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(i){var _;if(!(i!=null&&i.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const s=(_=to(this,Ane))==null?void 0:_.get(i.port);if(s){if(s._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return s}return new z0(i)}static get workerSrc(){if(GlobalWorkerOptions.workerSrc)return GlobalWorkerOptions.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return shadow(this,"_setupFakeWorkerGlobal",(async()=>to(this,Uce,Pfe)?to(this,Uce,Pfe):(await import(this.workerSrc)).WorkerMessageHandler)())}};Ane=new WeakMap,Jle=new WeakSet,Rfe=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},Uce=new WeakSet,Pfe=function(){var i;try{return((i=globalThis.pdfjsWorker)==null?void 0:i.WorkerMessageHandler)||null}catch{return null}},Ku(z0,Uce),Ku(z0,Ane);let PDFWorker=z0;var LD,kC,Wce,Hce,TC,Tne,Ide;class WorkerTransport{constructor(i,s,_,_e,ct){Ku(this,Tne);Ku(this,LD,new Map);Ku(this,kC,new Map);Ku(this,Wce,new Map);Ku(this,Hce,new Map);Ku(this,TC,null);this.messageHandler=i,this.loadingTask=s,this.commonObjs=new PDFObjects,this.fontLoader=new FontLoader({ownerDocument:_e.ownerDocument,styleElement:_e.styleElement}),this.loadingParams=_e.loadingParams,this._params=_e,this.canvasFactory=ct.canvasFactory,this.filterFactory=ct.filterFactory,this.cMapReaderFactory=ct.cMapReaderFactory,this.standardFontDataFactory=ct.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=_,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return shadow(this,"annotationStorage",new AnnotationStorage)}getRenderingIntent(i,s=AnnotationMode.ENABLE,_=null,_e=!1){let ct=RenderingIntentFlag.DISPLAY,Mt=SerializableEmpty;switch(i){case"any":ct=RenderingIntentFlag.ANY;break;case"display":break;case"print":ct=RenderingIntentFlag.PRINT;break;default:warn(`getRenderingIntent - invalid intent: ${i}`)}switch(s){case AnnotationMode.DISABLE:ct+=RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case AnnotationMode.ENABLE:break;case AnnotationMode.ENABLE_FORMS:ct+=RenderingIntentFlag.ANNOTATIONS_FORMS;break;case AnnotationMode.ENABLE_STORAGE:ct+=RenderingIntentFlag.ANNOTATIONS_STORAGE,Mt=(ct&RenderingIntentFlag.PRINT&&_ instanceof PrintAnnotationStorage?_:this.annotationStorage).serializable;break;default:warn(`getRenderingIntent - invalid annotationMode: ${s}`)}return _e&&(ct+=RenderingIntentFlag.OPLIST),{renderingIntent:ct,cacheKey:`${ct}_${Mt.hash}`,annotationStorageSerializable:Mt}}destroy(){var _;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(_=to(this,TC))==null||_.reject(new Error("Worker was destroyed during onPassword callback"));const i=[];for(const _e of to(this,kC).values())i.push(_e._destroy());to(this,kC).clear(),to(this,Wce).clear(),to(this,Hce).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const s=this.messageHandler.sendWithPromise("Terminate",null);return i.push(s),Promise.all(i).then(()=>{var _e;this.commonObjs.clear(),this.fontLoader.clear(),to(this,LD).clear(),this.filterFactory.destroy(),TextLayer$1.cleanup(),(_e=this._networkStream)==null||_e.cancelAllRequests(new AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:i,loadingTask:s}=this;i.on("GetReader",(_,_e)=>{assert(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=ct=>{this._lastProgress={loaded:ct.loaded,total:ct.total}},_e.onPull=()=>{this._fullReader.read().then(function({value:ct,done:Mt}){Mt?_e.close():(assert(ct instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),_e.enqueue(new Uint8Array(ct),1,[ct]))}).catch(ct=>{_e.error(ct)})},_e.onCancel=ct=>{this._fullReader.cancel(ct),_e.ready.catch(Mt=>{if(!this.destroyed)throw Mt})}}),i.on("ReaderHeadersReady",_=>{const _e=Promise.withResolvers(),ct=this._fullReader;return ct.headersReady.then(()=>{var Mt;ct.isStreamingSupported&&ct.isRangeSupported||(this._lastProgress&&((Mt=s.onProgress)==null||Mt.call(s,this._lastProgress)),ct.onProgress=Ft=>{var Ut;(Ut=s.onProgress)==null||Ut.call(s,{loaded:Ft.loaded,total:Ft.total})}),_e.resolve({isStreamingSupported:ct.isStreamingSupported,isRangeSupported:ct.isRangeSupported,contentLength:ct.contentLength})},_e.reject),_e.promise}),i.on("GetRangeReader",(_,_e)=>{assert(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const ct=this._networkStream.getRangeReader(_.begin,_.end);ct?(_e.onPull=()=>{ct.read().then(function({value:Mt,done:Ft}){Ft?_e.close():(assert(Mt instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),_e.enqueue(new Uint8Array(Mt),1,[Mt]))}).catch(Mt=>{_e.error(Mt)})},_e.onCancel=Mt=>{ct.cancel(Mt),_e.ready.catch(Ft=>{if(!this.destroyed)throw Ft})}):_e.close()}),i.on("GetDoc",({pdfInfo:_})=>{this._numPages=_.numPages,this._htmlForXfa=_.htmlForXfa,delete _.htmlForXfa,s._capability.resolve(new PDFDocumentProxy(_,this))}),i.on("DocException",function(_){let _e;switch(_.name){case"PasswordException":_e=new PasswordException(_.message,_.code);break;case"InvalidPDFException":_e=new InvalidPDFException(_.message);break;case"MissingPDFException":_e=new MissingPDFException(_.message);break;case"UnexpectedResponseException":_e=new UnexpectedResponseException(_.message,_.status);break;case"UnknownErrorException":_e=new UnknownErrorException(_.message,_.details);break;default:unreachable("DocException - expected a valid Error.")}s._capability.reject(_e)}),i.on("PasswordRequest",_=>{if(ku(this,TC,Promise.withResolvers()),s.onPassword){const _e=ct=>{ct instanceof Error?to(this,TC).reject(ct):to(this,TC).resolve({password:ct})};try{s.onPassword(_e,_.code)}catch(ct){to(this,TC).reject(ct)}}else to(this,TC).reject(new PasswordException(_.message,_.code));return to(this,TC).promise}),i.on("DataLoaded",_=>{var _e;(_e=s.onProgress)==null||_e.call(s,{loaded:_.length,total:_.length}),this.downloadInfoCapability.resolve(_)}),i.on("StartRenderPage",_=>{this.destroyed||to(this,kC).get(_.pageIndex)._startRenderPage(_.transparency,_.cacheKey)}),i.on("commonobj",([_,_e,ct])=>{var Mt;if(this.destroyed||this.commonObjs.has(_))return null;switch(_e){case"Font":const{disableFontFace:Ft,fontExtraProperties:Ut,pdfBug:Xt}=this._params;if("error"in ct){const or=ct.error;warn(`Error during font loading: ${or}`),this.commonObjs.resolve(_,or);break}const Kt=Xt&&((Mt=globalThis.FontInspector)!=null&&Mt.enabled)?(or,hr)=>globalThis.FontInspector.fontAdded(or,hr):null,nr=new FontFaceObject(ct,{disableFontFace:Ft,inspectFont:Kt});this.fontLoader.bind(nr).catch(()=>i.sendWithPromise("FontFallback",{id:_})).finally(()=>{!Ut&&nr.data&&(nr.data=null),this.commonObjs.resolve(_,nr)});break;case"CopyLocalImage":const{imageRef:rr}=ct;assert(rr,"The imageRef must be defined.");for(const or of to(this,kC).values())for(const[,hr]of or.objs)if((hr==null?void 0:hr.ref)===rr)return hr.dataLen?(this.commonObjs.resolve(_,structuredClone(hr)),hr.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(_,ct);break;default:throw new Error(`Got unknown common object type ${_e}`)}return null}),i.on("obj",([_,_e,ct,Mt])=>{var Ut;if(this.destroyed)return;const Ft=to(this,kC).get(_e);if(!Ft.objs.has(_))if(Ft._intentStates.size!==0)switch(ct){case"Image":Ft.objs.resolve(_,Mt),(Mt==null?void 0:Mt.dataLen)>MAX_IMAGE_SIZE_TO_CACHE&&(Ft._maybeCleanupAfterRender=!0);break;case"Pattern":Ft.objs.resolve(_,Mt);break;default:throw new Error(`Got unknown object type ${ct}`)}else(Ut=Mt==null?void 0:Mt.bitmap)==null||Ut.close()}),i.on("DocProgress",_=>{var _e;this.destroyed||((_e=s.onProgress)==null||_e.call(s,{loaded:_.loaded,total:_.total}))}),i.on("FetchBuiltInCMap",_=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(_):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),i.on("FetchStandardFontData",_=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(_):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var _;this.annotationStorage.size<=0&&warn("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:i,transfer:s}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:i,filename:((_=this._fullReader)==null?void 0:_.filename)??null},s).finally(()=>{this.annotationStorage.resetModified()})}getPage(i){if(!Number.isInteger(i)||i<=0||i>this._numPages)return Promise.reject(new Error("Invalid page request."));const s=i-1,_=to(this,Wce).get(s);if(_)return _;const _e=this.messageHandler.sendWithPromise("GetPage",{pageIndex:s}).then(ct=>{if(this.destroyed)throw new Error("Transport destroyed");ct.refStr&&to(this,Hce).set(ct.refStr,i);const Mt=new PDFPageProxy(s,ct,this,this._params.pdfBug);return to(this,kC).set(s,Mt),Mt});return to(this,Wce).set(s,_e),_e}getPageIndex(i){return isRefProxy(i)?this.messageHandler.sendWithPromise("GetPageIndex",{num:i.num,gen:i.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(i,s){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:i,intent:s})}getFieldObjects(){return Nu(this,Tne,Ide).call(this,"GetFieldObjects")}hasJSActions(){return Nu(this,Tne,Ide).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(i){return typeof i!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:i})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return Nu(this,Tne,Ide).call(this,"GetDocJSActions")}getPageJSActions(i){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:i})}getStructTree(i){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:i})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(i){return Nu(this,Tne,Ide).call(this,"GetOptionalContentConfig").then(s=>new OptionalContentConfig(s,i))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const i="GetMetadata",s=to(this,LD).get(i);if(s)return s;const _=this.messageHandler.sendWithPromise(i,null).then(_e=>{var ct,Mt;return{info:_e[0],metadata:_e[1]?new Metadata(_e[1]):null,contentDispositionFilename:((ct=this._fullReader)==null?void 0:ct.filename)??null,contentLength:((Mt=this._fullReader)==null?void 0:Mt.contentLength)??null}});return to(this,LD).set(i,_),_}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(i=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const s of to(this,kC).values())if(!s.cleanup())throw new Error(`startCleanup: Page ${s.pageNumber} is currently rendering.`);this.commonObjs.clear(),i||this.fontLoader.clear(),to(this,LD).clear(),this.filterFactory.destroy(!0),TextLayer$1.cleanup()}}cachedPageNumber(i){if(!isRefProxy(i))return null;const s=i.gen===0?`${i.num}R`:`${i.num}R${i.gen}`;return to(this,Hce).get(s)??null}}LD=new WeakMap,kC=new WeakMap,Wce=new WeakMap,Hce=new WeakMap,TC=new WeakMap,Tne=new WeakSet,Ide=function(i,s=null){const _=to(this,LD).get(i);if(_)return _;const _e=this.messageHandler.sendWithPromise(i,s);return to(this,LD).set(i,_e),_e};const INITIAL_DATA=Symbol("INITIAL_DATA");var hC,Che,ige;class PDFObjects{constructor(){Ku(this,Che);Ku(this,hC,Object.create(null))}get(i,s=null){if(s){const _e=Nu(this,Che,ige).call(this,i);return _e.promise.then(()=>s(_e.data)),null}const _=to(this,hC)[i];if(!_||_.data===INITIAL_DATA)throw new Error(`Requesting object that isn't resolved yet ${i}.`);return _.data}has(i){const s=to(this,hC)[i];return!!s&&s.data!==INITIAL_DATA}resolve(i,s=null){const _=Nu(this,Che,ige).call(this,i);_.data=s,_.resolve()}clear(){var i;for(const s in to(this,hC)){const{data:_}=to(this,hC)[s];(i=_==null?void 0:_.bitmap)==null||i.close()}ku(this,hC,Object.create(null))}*[Symbol.iterator](){for(const i in to(this,hC)){const{data:s}=to(this,hC)[i];s!==INITIAL_DATA&&(yield[i,s])}}}hC=new WeakMap,Che=new WeakSet,ige=function(i){var s;return(s=to(this,hC))[i]||(s[i]={...Promise.withResolvers(),data:INITIAL_DATA})};var QU;class RenderTask{constructor(i){Ku(this,QU,null);ku(this,QU,i),this.onContinue=null}get promise(){return to(this,QU).capability.promise}cancel(i=0){to(this,QU).cancel(null,i)}get separateAnnots(){const{separateAnnots:i}=to(this,QU).operatorList;if(!i)return!1;const{annotationCanvasMap:s}=to(this,QU);return i.form||i.canvas&&(s==null?void 0:s.size)>0}}QU=new WeakMap;var JU,qne;const yG=class yG{constructor({callback:i,params:s,objs:_,commonObjs:_e,annotationCanvasMap:ct,operatorList:Mt,pageIndex:Ft,canvasFactory:Ut,filterFactory:Xt,useRequestAnimationFrame:Kt=!1,pdfBug:nr=!1,pageColors:rr=null}){Ku(this,JU,null);this.callback=i,this.params=s,this.objs=_,this.commonObjs=_e,this.annotationCanvasMap=ct,this.operatorListIdx=null,this.operatorList=Mt,this._pageIndex=Ft,this.canvasFactory=Ut,this.filterFactory=Xt,this._pdfBug=nr,this.pageColors=rr,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=Kt===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=s.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:i=!1,optionalContentConfig:s}){var Ft,Ut;if(this.cancelled)return;if(this._canvas){if(to(yG,qne).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");to(yG,qne).add(this._canvas)}this._pdfBug&&((Ft=globalThis.StepperManager)!=null&&Ft.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:_,viewport:_e,transform:ct,background:Mt}=this.params;this.gfx=new CanvasGraphics(_,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:s},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:ct,viewport:_e,transparency:i,background:Mt}),this.operatorListIdx=0,this.graphicsReady=!0,(Ut=this.graphicsReadyCallback)==null||Ut.call(this)}cancel(i=null,s=0){var _;this.running=!1,this.cancelled=!0,(_=this.gfx)==null||_.endDrawing(),to(this,JU)&&(window.cancelAnimationFrame(to(this,JU)),ku(this,JU,null)),to(yG,qne).delete(this._canvas),this.callback(i||new RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,s))}operatorListChanged(){var i;this.graphicsReady?((i=this.stepper)==null||i.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}_continue(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?ku(this,JU,window.requestAnimationFrame(()=>{ku(this,JU,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),to(yG,qne).delete(this._canvas),this.callback())))}};JU=new WeakMap,qne=new WeakMap,Ku(yG,qne,new WeakSet);let InternalRenderTask=yG;const version="4.4.168",build="19fbc8998";function makeColorComp(o){return Math.floor(255*Math.max(0,Math.min(1,o))).toString(16).padStart(2,"0")}function scaleAndClamp(o){return Math.max(0,Math.min(255,255*o))}class ColorConverters{static CMYK_G([i,s,_,_e]){return["G",1-Math.min(1,.3*i+.59*_+.11*s+_e)]}static G_CMYK([i]){return["CMYK",0,0,0,1-i]}static G_RGB([i]){return["RGB",i,i,i]}static G_rgb([i]){return[i=scaleAndClamp(i),i,i]}static G_HTML([i]){const s=makeColorComp(i);return`#${s}${s}${s}`}static RGB_G([i,s,_]){return["G",.3*i+.59*s+.11*_]}static RGB_rgb(i){return i.map(scaleAndClamp)}static RGB_HTML(i){return`#${i.map(makeColorComp).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([i,s,_,_e]){return["RGB",1-Math.min(1,i+_e),1-Math.min(1,_+_e),1-Math.min(1,s+_e)]}static CMYK_rgb([i,s,_,_e]){return[scaleAndClamp(1-Math.min(1,i+_e)),scaleAndClamp(1-Math.min(1,_+_e)),scaleAndClamp(1-Math.min(1,s+_e))]}static CMYK_HTML(i){const s=this.CMYK_RGB(i).slice(1);return this.RGB_HTML(s)}static RGB_CMYK([i,s,_]){const _e=1-i,ct=1-s,Mt=1-_;return["CMYK",_e,ct,Mt,Math.min(_e,ct,Mt)]}}class XfaLayer{static setupStorage(i,s,_,_e,ct){const Mt=_e.getValue(s,{value:null});switch(_.name){case"textarea":if(Mt.value!==null&&(i.textContent=Mt.value),ct==="print")break;i.addEventListener("input",Ft=>{_e.setValue(s,{value:Ft.target.value})});break;case"input":if(_.attributes.type==="radio"||_.attributes.type==="checkbox"){if(Mt.value===_.attributes.xfaOn?i.setAttribute("checked",!0):Mt.value===_.attributes.xfaOff&&i.removeAttribute("checked"),ct==="print")break;i.addEventListener("change",Ft=>{_e.setValue(s,{value:Ft.target.checked?Ft.target.getAttribute("xfaOn"):Ft.target.getAttribute("xfaOff")})})}else{if(Mt.value!==null&&i.setAttribute("value",Mt.value),ct==="print")break;i.addEventListener("input",Ft=>{_e.setValue(s,{value:Ft.target.value})})}break;case"select":if(Mt.value!==null){i.setAttribute("value",Mt.value);for(const Ft of _.children)Ft.attributes.value===Mt.value?Ft.attributes.selected=!0:Ft.attributes.hasOwnProperty("selected")&&delete Ft.attributes.selected}i.addEventListener("input",Ft=>{const Ut=Ft.target.options,Xt=Ut.selectedIndex===-1?"":Ut[Ut.selectedIndex].value;_e.setValue(s,{value:Xt})})}}static setAttributes({html:i,element:s,storage:_=null,intent:_e,linkService:ct}){const{attributes:Mt}=s,Ft=i instanceof HTMLAnchorElement;Mt.type==="radio"&&(Mt.name=`${Mt.name}-${_e}`);for(const[Ut,Xt]of Object.entries(Mt))if(Xt!=null)switch(Ut){case"class":Xt.length&&i.setAttribute(Ut,Xt.join(" "));break;case"dataId":break;case"id":i.setAttribute("data-element-id",Xt);break;case"style":Object.assign(i.style,Xt);break;case"textContent":i.textContent=Xt;break;default:(!Ft||Ut!=="href"&&Ut!=="newWindow")&&i.setAttribute(Ut,Xt)}Ft&&ct.addLinkAttributes(i,Mt.href,Mt.newWindow),_&&Mt.dataId&&this.setupStorage(i,Mt.dataId,s,_)}static render(i){var nr,rr;const s=i.annotationStorage,_=i.linkService,_e=i.xfaHtml,ct=i.intent||"display",Mt=document.createElement(_e.name);_e.attributes&&this.setAttributes({html:Mt,element:_e,intent:ct,linkService:_});const Ft=ct!=="richText",Ut=i.div;if(Ut.append(Mt),i.viewport){const or=`matrix(${i.viewport.transform.join(",")})`;Ut.style.transform=or}Ft&&Ut.setAttribute("class","xfaLayer xfaFont");const Xt=[];if(_e.children.length===0){if(_e.value){const or=document.createTextNode(_e.value);Mt.append(or),Ft&&XfaText.shouldBuildText(_e.name)&&Xt.push(or)}return{textDivs:Xt}}const Kt=[[_e,-1,Mt]];for(;Kt.length>0;){const[or,hr,fr]=Kt.at(-1);if(hr+1===or.children.length){Kt.pop();continue}const yr=or.children[++Kt.at(-1)[1]];if(yr===null)continue;const{name:Lr}=yr;if(Lr==="#text"){const Vr=document.createTextNode(yr.value);Xt.push(Vr),fr.append(Vr);continue}const Br=(nr=yr==null?void 0:yr.attributes)!=null&&nr.xmlns?document.createElementNS(yr.attributes.xmlns,Lr):document.createElement(Lr);if(fr.append(Br),yr.attributes&&this.setAttributes({html:Br,element:yr,storage:s,intent:ct,linkService:_}),((rr=yr.children)==null?void 0:rr.length)>0)Kt.push([yr,-1,Br]);else if(yr.value){const Vr=document.createTextNode(yr.value);Ft&&XfaText.shouldBuildText(Lr)&&Xt.push(Vr),Br.append(Vr)}}for(const or of Ut.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))or.setAttribute("readOnly",!0);return{textDivs:Xt}}static update(i){const s=`matrix(${i.viewport.transform.join(",")})`;i.div.style.transform=s,i.div.hidden=!1}}const DEFAULT_TAB_INDEX=1e3,annotation_layer_DEFAULT_FONT_SIZE=9,GetElementsByNameSet=new WeakSet;function getRectDims(o){return{width:o[2]-o[0],height:o[3]-o[1]}}class AnnotationElementFactory{static create(i){switch(i.data.annotationType){case AnnotationType.LINK:return new LinkAnnotationElement(i);case AnnotationType.TEXT:return new TextAnnotationElement(i);case AnnotationType.WIDGET:switch(i.data.fieldType){case"Tx":return new TextWidgetAnnotationElement(i);case"Btn":return i.data.radioButton?new RadioButtonWidgetAnnotationElement(i):i.data.checkBox?new CheckboxWidgetAnnotationElement(i):new PushButtonWidgetAnnotationElement(i);case"Ch":return new ChoiceWidgetAnnotationElement(i);case"Sig":return new SignatureWidgetAnnotationElement(i)}return new WidgetAnnotationElement(i);case AnnotationType.POPUP:return new PopupAnnotationElement(i);case AnnotationType.FREETEXT:return new FreeTextAnnotationElement(i);case AnnotationType.LINE:return new LineAnnotationElement(i);case AnnotationType.SQUARE:return new SquareAnnotationElement(i);case AnnotationType.CIRCLE:return new CircleAnnotationElement(i);case AnnotationType.POLYLINE:return new PolylineAnnotationElement(i);case AnnotationType.CARET:return new CaretAnnotationElement(i);case AnnotationType.INK:return new InkAnnotationElement(i);case AnnotationType.POLYGON:return new PolygonAnnotationElement(i);case AnnotationType.HIGHLIGHT:return new HighlightAnnotationElement(i);case AnnotationType.UNDERLINE:return new UnderlineAnnotationElement(i);case AnnotationType.SQUIGGLY:return new SquigglyAnnotationElement(i);case AnnotationType.STRIKEOUT:return new StrikeOutAnnotationElement(i);case AnnotationType.STAMP:return new StampAnnotationElement(i);case AnnotationType.FILEATTACHMENT:return new FileAttachmentAnnotationElement(i);default:return new AnnotationElement(i)}}}var Jne,Gce,Kce,_he,oge;const Mge=class Mge{constructor(i,{isRenderable:s=!1,ignoreBorder:_=!1,createQuadrilaterals:_e=!1}={}){Ku(this,_he);Ku(this,Jne,null);Ku(this,Gce,!1);Ku(this,Kce,null);this.isRenderable=s,this.data=i.data,this.layer=i.layer,this.linkService=i.linkService,this.downloadManager=i.downloadManager,this.imageResourcesPath=i.imageResourcesPath,this.renderForms=i.renderForms,this.svgFactory=i.svgFactory,this.annotationStorage=i.annotationStorage,this.enableScripting=i.enableScripting,this.hasJSActions=i.hasJSActions,this._fieldObjects=i.fieldObjects,this.parent=i.parent,s&&(this.container=this._createContainer(_)),_e&&this._createQuadrilaterals()}static _hasPopupData({titleObj:i,contentsObj:s,richText:_}){return!!(i!=null&&i.str||s!=null&&s.str||_!=null&&_.str)}get hasPopupData(){return Mge._hasPopupData(this.data)}updateEdited(i){var _;if(!this.container)return;to(this,Jne)||ku(this,Jne,{rect:this.data.rect.slice(0)});const{rect:s}=i;s&&Nu(this,_he,oge).call(this,s),(_=to(this,Kce))==null||_.popup.updateEdited(i)}resetEdited(){var i;to(this,Jne)&&(Nu(this,_he,oge).call(this,to(this,Jne).rect),(i=to(this,Kce))==null||i.popup.resetEdited(),ku(this,Jne,null))}_createContainer(i){const{data:s,parent:{page:_,viewport:_e}}=this,ct=document.createElement("section");ct.setAttribute("data-annotation-id",s.id),this instanceof WidgetAnnotationElement||(ct.tabIndex=DEFAULT_TAB_INDEX);const{style:Mt}=ct;if(Mt.zIndex=this.parent.zIndex++,s.popupRef&&ct.setAttribute("aria-haspopup","dialog"),s.alternativeText&&(ct.title=s.alternativeText),s.noRotate&&ct.classList.add("norotate"),!s.rect||this instanceof PopupAnnotationElement){const{rotation:fr}=s;return s.hasOwnCanvas||fr===0||this.setRotation(fr,ct),ct}const{width:Ft,height:Ut}=getRectDims(s.rect);if(!i&&s.borderStyle.width>0){Mt.borderWidth=`${s.borderStyle.width}px`;const fr=s.borderStyle.horizontalCornerRadius,yr=s.borderStyle.verticalCornerRadius;if(fr>0||yr>0){const Br=`calc(${fr}px * var(--scale-factor)) / calc(${yr}px * var(--scale-factor))`;Mt.borderRadius=Br}else if(this instanceof RadioButtonWidgetAnnotationElement){const Br=`calc(${Ft}px * var(--scale-factor)) / calc(${Ut}px * var(--scale-factor))`;Mt.borderRadius=Br}switch(s.borderStyle.style){case AnnotationBorderStyleType.SOLID:Mt.borderStyle="solid";break;case AnnotationBorderStyleType.DASHED:Mt.borderStyle="dashed";break;case AnnotationBorderStyleType.BEVELED:warn("Unimplemented border style: beveled");break;case AnnotationBorderStyleType.INSET:warn("Unimplemented border style: inset");break;case AnnotationBorderStyleType.UNDERLINE:Mt.borderBottomStyle="solid"}const Lr=s.borderColor||null;Lr?(ku(this,Gce,!0),Mt.borderColor=Util.makeHexColor(0|Lr[0],0|Lr[1],0|Lr[2])):Mt.borderWidth=0}const Xt=Util.normalizeRect([s.rect[0],_.view[3]-s.rect[1]+_.view[1],s.rect[2],_.view[3]-s.rect[3]+_.view[1]]),{pageWidth:Kt,pageHeight:nr,pageX:rr,pageY:or}=_e.rawDims;Mt.left=100*(Xt[0]-rr)/Kt+"%",Mt.top=100*(Xt[1]-or)/nr+"%";const{rotation:hr}=s;return s.hasOwnCanvas||hr===0?(Mt.width=100*Ft/Kt+"%",Mt.height=100*Ut/nr+"%"):this.setRotation(hr,ct),ct}setRotation(i,s=this.container){if(!this.data.rect)return;const{pageWidth:_,pageHeight:_e}=this.parent.viewport.rawDims,{width:ct,height:Mt}=getRectDims(this.data.rect);let Ft,Ut;i%180==0?(Ft=100*ct/_,Ut=100*Mt/_e):(Ft=100*Mt/_,Ut=100*ct/_e),s.style.width=`${Ft}%`,s.style.height=`${Ut}%`,s.setAttribute("data-main-rotation",(360-i)%360)}get _commonActions(){const i=(s,_,_e)=>{const ct=_e.detail[s],Mt=ct[0],Ft=ct.slice(1);_e.target.style[_]=ColorConverters[`${Mt}_HTML`](Ft),this.annotationStorage.setValue(this.data.id,{[_]:ColorConverters[`${Mt}_rgb`](Ft)})};return shadow(this,"_commonActions",{display:s=>{const{display:_}=s.detail,_e=_%2==1;this.container.style.visibility=_e?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:_e,noPrint:_===1||_===2})},print:s=>{this.annotationStorage.setValue(this.data.id,{noPrint:!s.detail.print})},hidden:s=>{const{hidden:_}=s.detail;this.container.style.visibility=_?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:_,noView:_})},focus:s=>{setTimeout(()=>s.target.focus({preventScroll:!1}),0)},userName:s=>{s.target.title=s.detail.userName},readonly:s=>{s.target.disabled=s.detail.readonly},required:s=>{this._setRequired(s.target,s.detail.required)},bgColor:s=>{i("bgColor","backgroundColor",s)},fillColor:s=>{i("fillColor","backgroundColor",s)},fgColor:s=>{i("fgColor","color",s)},textColor:s=>{i("textColor","color",s)},borderColor:s=>{i("borderColor","borderColor",s)},strokeColor:s=>{i("strokeColor","borderColor",s)},rotation:s=>{const _=s.detail.rotation;this.setRotation(_),this.annotationStorage.setValue(this.data.id,{rotation:_})}})}_dispatchEventFromSandbox(i,s){const _=this._commonActions;for(const _e of Object.keys(s.detail)){const ct=i[_e]||_[_e];ct==null||ct(s)}}_setDefaultPropertiesFromJS(i){if(!this.enableScripting)return;const s=this.annotationStorage.getRawValue(this.data.id);if(!s)return;const _=this._commonActions;for(const[_e,ct]of Object.entries(s)){const Mt=_[_e];Mt&&(Mt({detail:{[_e]:ct},target:i}),delete s[_e])}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:i}=this.data;if(!i)return;const[s,_,_e,ct]=this.data.rect.map(fr=>Math.fround(fr));if(i.length===8){const[fr,yr,Lr,Br]=i.subarray(2,6);if(_e===fr&&ct===yr&&s===Lr&&_===Br)return}const{style:Mt}=this.container;let Ft;if(to(this,Gce)){const{borderColor:fr,borderWidth:yr}=Mt;Mt.borderWidth=0,Ft=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${fr}" stroke-width="${yr}">`],this.container.classList.add("hasBorder")}const Ut=_e-s,Xt=ct-_,{svgFactory:Kt}=this,nr=Kt.createElement("svg");nr.classList.add("quadrilateralsContainer"),nr.setAttribute("width",0),nr.setAttribute("height",0);const rr=Kt.createElement("defs");nr.append(rr);const or=Kt.createElement("clipPath"),hr=`clippath_${this.data.id}`;or.setAttribute("id",hr),or.setAttribute("clipPathUnits","objectBoundingBox"),rr.append(or);for(let fr=2,yr=i.length;fr<yr;fr+=8){const Lr=i[fr],Br=i[fr+1],Vr=i[fr+2],Wr=i[fr+3],ro=Kt.createElement("rect"),no=(Vr-s)/Ut,so=(ct-Br)/Xt,ko=(Lr-Vr)/Ut,To=(Br-Wr)/Xt;ro.setAttribute("x",no),ro.setAttribute("y",so),ro.setAttribute("width",ko),ro.setAttribute("height",To),or.append(ro),Ft==null||Ft.push(`<rect vector-effect="non-scaling-stroke" x="${no}" y="${so}" width="${ko}" height="${To}"/>`)}to(this,Gce)&&(Ft.push("</g></svg>')"),Mt.backgroundImage=Ft.join("")),this.container.append(nr),this.container.style.clipPath=`url(#${hr})`}_createPopup(){const{container:i,data:s}=this;i.setAttribute("aria-haspopup","dialog");const _=ku(this,Kce,new PopupAnnotationElement({data:{color:s.color,titleObj:s.titleObj,modificationDate:s.modificationDate,contentsObj:s.contentsObj,richText:s.richText,parentRect:s.rect,borderStyle:0,id:`popup_${s.id}`,rotation:s.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(_.render())}render(){unreachable("Abstract method `AnnotationElement.render` called")}_getElementsByName(i,s=null){const _=[];if(this._fieldObjects){const _e=this._fieldObjects[i];if(_e)for(const{page:ct,id:Mt,exportValues:Ft}of _e){if(ct===-1||Mt===s)continue;const Ut=typeof Ft=="string"?Ft:null,Xt=document.querySelector(`[data-element-id="${Mt}"]`);!Xt||GetElementsByNameSet.has(Xt)?_.push({id:Mt,exportValue:Ut,domElement:Xt}):warn(`_getElementsByName - element not allowed: ${Mt}`)}return _}for(const _e of document.getElementsByName(i)){const{exportValue:ct}=_e,Mt=_e.getAttribute("data-element-id");Mt!==s&&GetElementsByNameSet.has(_e)&&_.push({id:Mt,exportValue:ct,domElement:_e})}return _}show(){var i;this.container&&(this.container.hidden=!1),(i=this.popup)==null||i.maybeShow()}hide(){var i;this.container&&(this.container.hidden=!0),(i=this.popup)==null||i.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const i=this.getElementsToTriggerPopup();if(Array.isArray(i))for(const s of i)s.classList.add("highlightArea");else i.classList.add("highlightArea")}get _isEditable(){return!1}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:i,data:{id:s}}=this;this.container.addEventListener("dblclick",()=>{var _;(_=this.linkService.eventBus)==null||_.dispatch("switchannotationeditormode",{source:this,mode:i,editId:s})})}};Jne=new WeakMap,Gce=new WeakMap,Kce=new WeakMap,_he=new WeakSet,oge=function(i){const{container:{style:s},data:{rect:_,rotation:_e},parent:{viewport:{rawDims:{pageWidth:ct,pageHeight:Mt,pageX:Ft,pageY:Ut}}}}=this;_==null||_.splice(0,4,...i);const{width:Xt,height:Kt}=getRectDims(i);s.left=100*(i[0]-Ft)/ct+"%",s.top=100*(Mt-i[3]+Ut)/Mt+"%",_e===0?(s.width=100*Xt/ct+"%",s.height=100*Kt/Mt+"%"):this.setRotation(_e)};let AnnotationElement=Mge;var Gw,hG,P1e,D1e;class LinkAnnotationElement extends AnnotationElement{constructor(s,_=null){super(s,{isRenderable:!0,ignoreBorder:!!(_!=null&&_.ignoreBorder),createQuadrilaterals:!0});Ku(this,Gw);this.isTooltipOnly=s.data.isTooltipOnly}render(){const{data:s,linkService:_}=this,_e=document.createElement("a");_e.setAttribute("data-element-id",s.id);let ct=!1;return s.url?(_.addLinkAttributes(_e,s.url,s.newWindow),ct=!0):s.action?(this._bindNamedAction(_e,s.action),ct=!0):s.attachment?(Nu(this,Gw,P1e).call(this,_e,s.attachment,s.attachmentDest),ct=!0):s.setOCGState?(Nu(this,Gw,D1e).call(this,_e,s.setOCGState),ct=!0):s.dest?(this._bindLink(_e,s.dest),ct=!0):(s.actions&&(s.actions.Action||s.actions["Mouse Up"]||s.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(_e,s),ct=!0),s.resetForm?(this._bindResetFormAction(_e,s.resetForm),ct=!0):this.isTooltipOnly&&!ct&&(this._bindLink(_e,""),ct=!0)),this.container.classList.add("linkAnnotation"),ct&&this.container.append(_e),this.container}_bindLink(s,_){s.href=this.linkService.getDestinationHash(_),s.onclick=()=>(_&&this.linkService.goToDestination(_),!1),(_||_==="")&&Nu(this,Gw,hG).call(this)}_bindNamedAction(s,_){s.href=this.linkService.getAnchorUrl(""),s.onclick=()=>(this.linkService.executeNamedAction(_),!1),Nu(this,Gw,hG).call(this)}_bindJSAction(s,_){s.href=this.linkService.getAnchorUrl("");const _e=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const ct of Object.keys(_.actions)){const Mt=_e.get(ct);Mt&&(s[Mt]=()=>{var Ft;return(Ft=this.linkService.eventBus)==null||Ft.dispatch("dispatcheventinsandbox",{source:this,detail:{id:_.id,name:ct}}),!1})}s.onclick||(s.onclick=()=>!1),Nu(this,Gw,hG).call(this)}_bindResetFormAction(s,_){const _e=s.onclick;if(_e||(s.href=this.linkService.getAnchorUrl("")),Nu(this,Gw,hG).call(this),!this._fieldObjects)return warn('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(_e||(s.onclick=()=>!1));s.onclick=()=>{var nr;_e==null||_e();const{fields:ct,refs:Mt,include:Ft}=_,Ut=[];if(ct.length!==0||Mt.length!==0){const rr=new Set(Mt);for(const or of ct){const hr=this._fieldObjects[or]||[];for(const{id:fr}of hr)rr.add(fr)}for(const or of Object.values(this._fieldObjects))for(const hr of or)rr.has(hr.id)===Ft&&Ut.push(hr)}else for(const rr of Object.values(this._fieldObjects))Ut.push(...rr);const Xt=this.annotationStorage,Kt=[];for(const rr of Ut){const{id:or}=rr;switch(Kt.push(or),rr.type){case"text":{const fr=rr.defaultValue||"";Xt.setValue(or,{value:fr});break}case"checkbox":case"radiobutton":{const fr=rr.defaultValue===rr.exportValues;Xt.setValue(or,{value:fr});break}case"combobox":case"listbox":{const fr=rr.defaultValue||"";Xt.setValue(or,{value:fr});break}default:continue}const hr=document.querySelector(`[data-element-id="${or}"]`);hr&&(GetElementsByNameSet.has(hr)?hr.dispatchEvent(new Event("resetform")):warn(`_bindResetFormAction - element not allowed: ${or}`))}return this.enableScripting&&((nr=this.linkService.eventBus)==null||nr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Kt,name:"ResetForm"}})),!1}}}Gw=new WeakSet,hG=function(){this.container.setAttribute("data-internal-link","")},P1e=function(s,_,_e=null){s.href=this.linkService.getAnchorUrl(""),_.description&&(s.title=_.description),s.onclick=()=>{var ct;return(ct=this.downloadManager)==null||ct.openOrDownloadData(_.content,_.filename,_e),!1},Nu(this,Gw,hG).call(this)},D1e=function(s,_){s.href=this.linkService.getAnchorUrl(""),s.onclick=()=>(this.linkService.executeSetOCGState(_),!1),Nu(this,Gw,hG).call(this)};class TextAnnotationElement extends AnnotationElement{constructor(i){super(i,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const i=document.createElement("img");return i.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",i.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),i.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(i),this.container}}class WidgetAnnotationElement extends AnnotationElement{render(){return this.container}showElementAndHideCanvas(i){var s;this.data.hasOwnCanvas&&(((s=i.previousSibling)==null?void 0:s.nodeName)==="CANVAS"&&(i.previousSibling.hidden=!0),i.hidden=!1)}_getKeyModifier(i){return util_FeatureTest.platform.isMac?i.metaKey:i.ctrlKey}_setEventListener(i,s,_,_e,ct){_.includes("mouse")?i.addEventListener(_,Mt=>{var Ft;(Ft=this.linkService.eventBus)==null||Ft.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:_e,value:ct(Mt),shift:Mt.shiftKey,modifier:this._getKeyModifier(Mt)}})}):i.addEventListener(_,Mt=>{var Ft;if(_==="blur"){if(!s.focused||!Mt.relatedTarget)return;s.focused=!1}else if(_==="focus"){if(s.focused)return;s.focused=!0}ct&&((Ft=this.linkService.eventBus)==null||Ft.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:_e,value:ct(Mt)}}))})}_setEventListeners(i,s,_,_e){var ct,Mt,Ft;for(const[Ut,Xt]of _)(Xt==="Action"||(ct=this.data.actions)!=null&&ct[Xt])&&(Xt!=="Focus"&&Xt!=="Blur"||s||(s={focused:!1}),this._setEventListener(i,s,Ut,Xt,_e),Xt!=="Focus"||(Mt=this.data.actions)!=null&&Mt.Blur?Xt!=="Blur"||(Ft=this.data.actions)!=null&&Ft.Focus||this._setEventListener(i,s,"focus","Focus",null):this._setEventListener(i,s,"blur","Blur",null))}_setBackgroundColor(i){const s=this.data.backgroundColor||null;i.style.backgroundColor=s===null?"transparent":Util.makeHexColor(s[0],s[1],s[2])}_setTextStyle(i){const s=["left","center","right"],{fontColor:_}=this.data.defaultAppearanceData,_e=this.data.defaultAppearanceData.fontSize||annotation_layer_DEFAULT_FONT_SIZE,ct=i.style;let Mt;const Ft=Ut=>Math.round(10*Ut)/10;if(this.data.multiLine){const Ut=Math.abs(this.data.rect[3]-this.data.rect[1]-2),Xt=Ut/(Math.round(Ut/(LINE_FACTOR*_e))||1);Mt=Math.min(_e,Ft(Xt/LINE_FACTOR))}else{const Ut=Math.abs(this.data.rect[3]-this.data.rect[1]-2);Mt=Math.min(_e,Ft(Ut/LINE_FACTOR))}ct.fontSize=`calc(${Mt}px * var(--scale-factor))`,ct.color=Util.makeHexColor(_[0],_[1],_[2]),this.data.textAlignment!==null&&(ct.textAlign=s[this.data.textAlignment])}_setRequired(i,s){s?i.setAttribute("required",!0):i.removeAttribute("required"),i.setAttribute("aria-required",s)}}class TextWidgetAnnotationElement extends WidgetAnnotationElement{constructor(i){super(i,{isRenderable:i.renderForms||i.data.hasOwnCanvas||!i.data.hasAppearance&&!!i.data.fieldValue})}setPropertyOnSiblings(i,s,_,_e){const ct=this.annotationStorage;for(const Mt of this._getElementsByName(i.name,i.id))Mt.domElement&&(Mt.domElement[s]=_),ct.setValue(Mt.id,{[_e]:_})}render(){var _e,ct;const i=this.annotationStorage,s=this.data.id;this.container.classList.add("textWidgetAnnotation");let _=null;if(this.renderForms){const Mt=i.getValue(s,{value:this.data.fieldValue});let Ft=Mt.value||"";const Ut=i.getValue(s,{charLimit:this.data.maxLen}).charLimit;Ut&&Ft.length>Ut&&(Ft=Ft.slice(0,Ut));let Xt=Mt.formattedValue||((_e=this.data.textContent)==null?void 0:_e.join(`
`))||null;Xt&&this.data.comb&&(Xt=Xt.replaceAll(/\s+/g,""));const Kt={userValue:Ft,formattedValue:Xt,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(_=document.createElement("textarea"),_.textContent=Xt??Ft,this.data.doNotScroll&&(_.style.overflowY="hidden")):(_=document.createElement("input"),_.type="text",_.setAttribute("value",Xt??Ft),this.data.doNotScroll&&(_.style.overflowX="hidden")),this.data.hasOwnCanvas&&(_.hidden=!0),GetElementsByNameSet.add(_),_.setAttribute("data-element-id",s),_.disabled=this.data.readOnly,_.name=this.data.fieldName,_.tabIndex=DEFAULT_TAB_INDEX,this._setRequired(_,this.data.required),Ut&&(_.maxLength=Ut),_.addEventListener("input",rr=>{i.setValue(s,{value:rr.target.value}),this.setPropertyOnSiblings(_,"value",rr.target.value,"value"),Kt.formattedValue=null}),_.addEventListener("resetform",rr=>{const or=this.data.defaultFieldValue??"";_.value=Kt.userValue=or,Kt.formattedValue=null});let nr=rr=>{const{formattedValue:or}=Kt;or!=null&&(rr.target.value=or),rr.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){_.addEventListener("focus",or=>{var fr;if(Kt.focused)return;const{target:hr}=or;Kt.userValue&&(hr.value=Kt.userValue),Kt.lastCommittedValue=hr.value,Kt.commitKey=1,(fr=this.data.actions)!=null&&fr.Focus||(Kt.focused=!0)}),_.addEventListener("updatefromsandbox",or=>{this.showElementAndHideCanvas(or.target);const hr={value(fr){Kt.userValue=fr.detail.value??"",i.setValue(s,{value:Kt.userValue.toString()}),fr.target.value=Kt.userValue},formattedValue(fr){const{formattedValue:yr}=fr.detail;Kt.formattedValue=yr,yr!=null&&fr.target!==document.activeElement&&(fr.target.value=yr),i.setValue(s,{formattedValue:yr})},selRange(fr){fr.target.setSelectionRange(...fr.detail.selRange)},charLimit:fr=>{var Vr;const{charLimit:yr}=fr.detail,{target:Lr}=fr;if(yr===0)return void Lr.removeAttribute("maxLength");Lr.setAttribute("maxLength",yr);let Br=Kt.userValue;!Br||Br.length<=yr||(Br=Br.slice(0,yr),Lr.value=Kt.userValue=Br,i.setValue(s,{value:Br}),(Vr=this.linkService.eventBus)==null||Vr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:Br,willCommit:!0,commitKey:1,selStart:Lr.selectionStart,selEnd:Lr.selectionEnd}}))}};this._dispatchEventFromSandbox(hr,or)}),_.addEventListener("keydown",or=>{var yr;Kt.commitKey=1;let hr=-1;if(or.key==="Escape"?hr=0:or.key!=="Enter"||this.data.multiLine?or.key==="Tab"&&(Kt.commitKey=3):hr=2,hr===-1)return;const{value:fr}=or.target;Kt.lastCommittedValue!==fr&&(Kt.lastCommittedValue=fr,Kt.userValue=fr,(yr=this.linkService.eventBus)==null||yr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:fr,willCommit:!0,commitKey:hr,selStart:or.target.selectionStart,selEnd:or.target.selectionEnd}}))});const rr=nr;nr=null,_.addEventListener("blur",or=>{var fr,yr;if(!Kt.focused||!or.relatedTarget)return;(fr=this.data.actions)!=null&&fr.Blur||(Kt.focused=!1);const{value:hr}=or.target;Kt.userValue=hr,Kt.lastCommittedValue!==hr&&((yr=this.linkService.eventBus)==null||yr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:hr,willCommit:!0,commitKey:Kt.commitKey,selStart:or.target.selectionStart,selEnd:or.target.selectionEnd}})),rr(or)}),(ct=this.data.actions)!=null&&ct.Keystroke&&_.addEventListener("beforeinput",or=>{var ro;Kt.lastCommittedValue=null;const{data:hr,target:fr}=or,{value:yr,selectionStart:Lr,selectionEnd:Br}=fr;let Vr=Lr,Wr=Br;switch(or.inputType){case"deleteWordBackward":{const no=yr.substring(0,Lr).match(/\w*[^\w]*$/);no&&(Vr-=no[0].length);break}case"deleteWordForward":{const no=yr.substring(Lr).match(/^[^\w]*\w*/);no&&(Wr+=no[0].length);break}case"deleteContentBackward":Lr===Br&&(Vr-=1);break;case"deleteContentForward":Lr===Br&&(Wr+=1)}or.preventDefault(),(ro=this.linkService.eventBus)==null||ro.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:yr,change:hr||"",willCommit:!1,selStart:Vr,selEnd:Wr}})}),this._setEventListeners(_,Kt,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],or=>or.target.value)}if(nr&&_.addEventListener("blur",nr),this.data.comb){const rr=(this.data.rect[2]-this.data.rect[0])/Ut;_.classList.add("comb"),_.style.letterSpacing=`calc(${rr}px * var(--scale-factor) - 1ch)`}}else _=document.createElement("div"),_.textContent=this.data.fieldValue,_.style.verticalAlign="middle",_.style.display="table-cell",this.data.hasOwnCanvas&&(_.hidden=!0);return this._setTextStyle(_),this._setBackgroundColor(_),this._setDefaultPropertiesFromJS(_),this.container.append(_),this.container}}class SignatureWidgetAnnotationElement extends WidgetAnnotationElement{constructor(i){super(i,{isRenderable:!!i.data.hasOwnCanvas})}}class CheckboxWidgetAnnotationElement extends WidgetAnnotationElement{constructor(i){super(i,{isRenderable:i.renderForms})}render(){const i=this.annotationStorage,s=this.data,_=s.id;let _e=i.getValue(_,{value:s.exportValue===s.fieldValue}).value;typeof _e=="string"&&(_e=_e!=="Off",i.setValue(_,{value:_e})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const ct=document.createElement("input");return GetElementsByNameSet.add(ct),ct.setAttribute("data-element-id",_),ct.disabled=s.readOnly,this._setRequired(ct,this.data.required),ct.type="checkbox",ct.name=s.fieldName,_e&&ct.setAttribute("checked",!0),ct.setAttribute("exportValue",s.exportValue),ct.tabIndex=DEFAULT_TAB_INDEX,ct.addEventListener("change",Mt=>{const{name:Ft,checked:Ut}=Mt.target;for(const Xt of this._getElementsByName(Ft,_)){const Kt=Ut&&Xt.exportValue===s.exportValue;Xt.domElement&&(Xt.domElement.checked=Kt),i.setValue(Xt.id,{value:Kt})}i.setValue(_,{value:Ut})}),ct.addEventListener("resetform",Mt=>{const Ft=s.defaultFieldValue||"Off";Mt.target.checked=Ft===s.exportValue}),this.enableScripting&&this.hasJSActions&&(ct.addEventListener("updatefromsandbox",Mt=>{const Ft={value(Ut){Ut.target.checked=Ut.detail.value!=="Off",i.setValue(_,{value:Ut.target.checked})}};this._dispatchEventFromSandbox(Ft,Mt)}),this._setEventListeners(ct,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Mt=>Mt.target.checked)),this._setBackgroundColor(ct),this._setDefaultPropertiesFromJS(ct),this.container.append(ct),this.container}}class RadioButtonWidgetAnnotationElement extends WidgetAnnotationElement{constructor(i){super(i,{isRenderable:i.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const i=this.annotationStorage,s=this.data,_=s.id;let _e=i.getValue(_,{value:s.fieldValue===s.buttonValue}).value;if(typeof _e=="string"&&(_e=_e!==s.buttonValue,i.setValue(_,{value:_e})),_e)for(const Mt of this._getElementsByName(s.fieldName,_))i.setValue(Mt.id,{value:!1});const ct=document.createElement("input");if(GetElementsByNameSet.add(ct),ct.setAttribute("data-element-id",_),ct.disabled=s.readOnly,this._setRequired(ct,this.data.required),ct.type="radio",ct.name=s.fieldName,_e&&ct.setAttribute("checked",!0),ct.tabIndex=DEFAULT_TAB_INDEX,ct.addEventListener("change",Mt=>{const{name:Ft,checked:Ut}=Mt.target;for(const Xt of this._getElementsByName(Ft,_))i.setValue(Xt.id,{value:!1});i.setValue(_,{value:Ut})}),ct.addEventListener("resetform",Mt=>{const Ft=s.defaultFieldValue;Mt.target.checked=Ft!=null&&Ft===s.buttonValue}),this.enableScripting&&this.hasJSActions){const Mt=s.buttonValue;ct.addEventListener("updatefromsandbox",Ft=>{const Ut={value:Xt=>{const Kt=Mt===Xt.detail.value;for(const nr of this._getElementsByName(Xt.target.name)){const rr=Kt&&nr.id===_;nr.domElement&&(nr.domElement.checked=rr),i.setValue(nr.id,{value:rr})}}};this._dispatchEventFromSandbox(Ut,Ft)}),this._setEventListeners(ct,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Ft=>Ft.target.checked)}return this._setBackgroundColor(ct),this._setDefaultPropertiesFromJS(ct),this.container.append(ct),this.container}}class PushButtonWidgetAnnotationElement extends LinkAnnotationElement{constructor(i){super(i,{ignoreBorder:i.data.hasAppearance})}render(){const i=super.render();i.classList.add("buttonWidgetAnnotation","pushButton");const s=i.lastChild;return this.enableScripting&&this.hasJSActions&&s&&(this._setDefaultPropertiesFromJS(s),s.addEventListener("updatefromsandbox",_=>{this._dispatchEventFromSandbox({},_)})),i}}class ChoiceWidgetAnnotationElement extends WidgetAnnotationElement{constructor(i){super(i,{isRenderable:i.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const i=this.annotationStorage,s=this.data.id,_=i.getValue(s,{value:this.data.fieldValue}),_e=document.createElement("select");GetElementsByNameSet.add(_e),_e.setAttribute("data-element-id",s),_e.disabled=this.data.readOnly,this._setRequired(_e,this.data.required),_e.name=this.data.fieldName,_e.tabIndex=DEFAULT_TAB_INDEX;let ct=this.data.combo&&this.data.options.length>0;this.data.combo||(_e.size=this.data.options.length,this.data.multiSelect&&(_e.multiple=!0)),_e.addEventListener("resetform",Kt=>{const nr=this.data.defaultFieldValue;for(const rr of _e.options)rr.selected=rr.value===nr});for(const Kt of this.data.options){const nr=document.createElement("option");nr.textContent=Kt.displayValue,nr.value=Kt.exportValue,_.value.includes(Kt.exportValue)&&(nr.setAttribute("selected",!0),ct=!1),_e.append(nr)}let Mt=null;if(ct){const Kt=document.createElement("option");Kt.value=" ",Kt.setAttribute("hidden",!0),Kt.setAttribute("selected",!0),_e.prepend(Kt),Mt=()=>{Kt.remove(),_e.removeEventListener("input",Mt),Mt=null},_e.addEventListener("input",Mt)}const Ft=Kt=>{const nr=Kt?"value":"textContent",{options:rr,multiple:or}=_e;return or?Array.prototype.filter.call(rr,hr=>hr.selected).map(hr=>hr[nr]):rr.selectedIndex===-1?null:rr[rr.selectedIndex][nr]};let Ut=Ft(!1);const Xt=Kt=>{const nr=Kt.target.options;return Array.prototype.map.call(nr,rr=>({displayValue:rr.textContent,exportValue:rr.value}))};return this.enableScripting&&this.hasJSActions?(_e.addEventListener("updatefromsandbox",Kt=>{const nr={value(rr){Mt==null||Mt();const or=rr.detail.value,hr=new Set(Array.isArray(or)?or:[or]);for(const fr of _e.options)fr.selected=hr.has(fr.value);i.setValue(s,{value:Ft(!0)}),Ut=Ft(!1)},multipleSelection(rr){_e.multiple=!0},remove(rr){const or=_e.options,hr=rr.detail.remove;or[hr].selected=!1,_e.remove(hr),or.length>0&&Array.prototype.findIndex.call(or,fr=>fr.selected)===-1&&(or[0].selected=!0),i.setValue(s,{value:Ft(!0),items:Xt(rr)}),Ut=Ft(!1)},clear(rr){for(;_e.length!==0;)_e.remove(0);i.setValue(s,{value:null,items:[]}),Ut=Ft(!1)},insert(rr){const{index:or,displayValue:hr,exportValue:fr}=rr.detail.insert,yr=_e.children[or],Lr=document.createElement("option");Lr.textContent=hr,Lr.value=fr,yr?yr.before(Lr):_e.append(Lr),i.setValue(s,{value:Ft(!0),items:Xt(rr)}),Ut=Ft(!1)},items(rr){const{items:or}=rr.detail;for(;_e.length!==0;)_e.remove(0);for(const hr of or){const{displayValue:fr,exportValue:yr}=hr,Lr=document.createElement("option");Lr.textContent=fr,Lr.value=yr,_e.append(Lr)}_e.options.length>0&&(_e.options[0].selected=!0),i.setValue(s,{value:Ft(!0),items:Xt(rr)}),Ut=Ft(!1)},indices(rr){const or=new Set(rr.detail.indices);for(const hr of rr.target.options)hr.selected=or.has(hr.index);i.setValue(s,{value:Ft(!0)}),Ut=Ft(!1)},editable(rr){rr.target.disabled=!rr.detail.editable}};this._dispatchEventFromSandbox(nr,Kt)}),_e.addEventListener("input",Kt=>{var or;const nr=Ft(!0),rr=Ft(!1);i.setValue(s,{value:nr}),Kt.preventDefault(),(or=this.linkService.eventBus)==null||or.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:Ut,change:rr,changeEx:nr,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(_e,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Kt=>Kt.target.value)):_e.addEventListener("input",function(Kt){i.setValue(s,{value:Ft(!0)})}),this.data.combo&&this._setTextStyle(_e),this._setBackgroundColor(_e),this._setDefaultPropertiesFromJS(_e),this.container.append(_e),this.container}}class PopupAnnotationElement extends AnnotationElement{constructor(i){const{data:s,elements:_}=i;super(i,{isRenderable:AnnotationElement._hasPopupData(s)}),this.elements=_,this.popup=null}render(){this.container.classList.add("popupAnnotation");const i=this.popup=new PopupElement({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),s=[];for(const _ of this.elements)_.popup=i,s.push(_.data.id),_.addHighlightArea();return this.container.setAttribute("aria-controls",s.map(_=>`${AnnotationPrefix}${_}`).join(",")),this.container}}var Jce,ume,cme,ede,bae,By,l8,Loe,Ihe,Ahe,tde,u8,fC,c8,khe,d8,The,$se,Lse,Ny,Dfe,sge,M1e,O1e,F1e,L1e,Mfe,Ofe,lge;class PopupElement{constructor({container:i,color:s,elements:_,titleObj:_e,modificationDate:ct,contentsObj:Mt,richText:Ft,parent:Ut,rect:Xt,parentRect:Kt,open:nr}){Ku(this,Ny);Ku(this,Jce,Nu(this,Ny,F1e).bind(this));Ku(this,ume,Nu(this,Ny,lge).bind(this));Ku(this,cme,Nu(this,Ny,Ofe).bind(this));Ku(this,ede,Nu(this,Ny,Mfe).bind(this));Ku(this,bae,null);Ku(this,By,null);Ku(this,l8,null);Ku(this,Loe,null);Ku(this,Ihe,null);Ku(this,Ahe,null);Ku(this,tde,null);Ku(this,u8,!1);Ku(this,fC,null);Ku(this,c8,null);Ku(this,khe,null);Ku(this,d8,null);Ku(this,The,null);Ku(this,$se,null);Ku(this,Lse,!1);var rr;ku(this,By,i),ku(this,The,_e),ku(this,l8,Mt),ku(this,d8,Ft),ku(this,Ahe,Ut),ku(this,bae,s),ku(this,khe,Xt),ku(this,tde,Kt),ku(this,Ihe,_),ku(this,Loe,PDFDateString.toDateObject(ct)),this.trigger=_.flatMap(or=>or.getElementsToTriggerPopup());for(const or of this.trigger)or.addEventListener("click",to(this,ede)),or.addEventListener("mouseenter",to(this,cme)),or.addEventListener("mouseleave",to(this,ume)),or.classList.add("popupTriggerArea");for(const or of _)(rr=or.container)==null||rr.addEventListener("keydown",to(this,Jce));to(this,By).hidden=!0,nr&&Nu(this,Ny,Mfe).call(this)}render(){if(to(this,fC))return;const i=ku(this,fC,document.createElement("div"));if(i.className="popup",to(this,bae)){const ct=i.style.outlineColor=Util.makeHexColor(...to(this,bae));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?i.style.backgroundColor=`color-mix(in srgb, ${ct} 30%, white)`:i.style.backgroundColor=Util.makeHexColor(...to(this,bae).map(Ft=>Math.floor(.7*(255-Ft)+Ft)))}const s=document.createElement("span");s.className="header";const _=document.createElement("h1");if(s.append(_),{dir:_.dir,str:_.textContent}=to(this,The),i.append(s),to(this,Loe)){const ct=document.createElement("span");ct.classList.add("popupDate"),ct.setAttribute("data-l10n-id","pdfjs-annotation-date-string"),ct.setAttribute("data-l10n-args",JSON.stringify({date:to(this,Loe).toLocaleDateString(),time:to(this,Loe).toLocaleTimeString()})),s.append(ct)}const _e=to(this,Ny,Dfe);if(_e)XfaLayer.render({xfaHtml:_e,intent:"richText",div:i}),i.lastChild.classList.add("richText","popupContent");else{const ct=this._formatContents(to(this,l8));i.append(ct)}to(this,By).append(i)}_formatContents({str:i,dir:s}){const _=document.createElement("p");_.classList.add("popupContent"),_.dir=s;const _e=i.split(/(?:\r\n?|\n)/);for(let ct=0,Mt=_e.length;ct<Mt;++ct){const Ft=_e[ct];_.append(document.createTextNode(Ft)),ct<Mt-1&&_.append(document.createElement("br"))}return _}updateEdited({rect:i,popupContent:s}){var _;to(this,$se)||ku(this,$se,{contentsObj:to(this,l8),richText:to(this,d8)}),i&&ku(this,c8,null),s&&(ku(this,d8,Nu(this,Ny,O1e).call(this,s)),ku(this,l8,null)),(_=to(this,fC))==null||_.remove(),ku(this,fC,null)}resetEdited(){var i;to(this,$se)&&({contentsObj:B0(this,l8)._,richText:B0(this,d8)._}=to(this,$se),ku(this,$se,null),(i=to(this,fC))==null||i.remove(),ku(this,fC,null),ku(this,c8,null))}forceHide(){ku(this,Lse,this.isVisible),to(this,Lse)&&(to(this,By).hidden=!0)}maybeShow(){to(this,Lse)&&(to(this,fC)||Nu(this,Ny,Ofe).call(this),ku(this,Lse,!1),to(this,By).hidden=!1)}get isVisible(){return to(this,By).hidden===!1}}Jce=new WeakMap,ume=new WeakMap,cme=new WeakMap,ede=new WeakMap,bae=new WeakMap,By=new WeakMap,l8=new WeakMap,Loe=new WeakMap,Ihe=new WeakMap,Ahe=new WeakMap,tde=new WeakMap,u8=new WeakMap,fC=new WeakMap,c8=new WeakMap,khe=new WeakMap,d8=new WeakMap,The=new WeakMap,$se=new WeakMap,Lse=new WeakMap,Ny=new WeakSet,Dfe=function(){const i=to(this,d8),s=to(this,l8);return!(i!=null&&i.str)||s!=null&&s.str&&s.str!==i.str?null:to(this,d8).html||null},sge=function(){var i,s,_;return((_=(s=(i=to(this,Ny,Dfe))==null?void 0:i.attributes)==null?void 0:s.style)==null?void 0:_.fontSize)||0},M1e=function(){var i,s,_;return((_=(s=(i=to(this,Ny,Dfe))==null?void 0:i.attributes)==null?void 0:s.style)==null?void 0:_.color)||null},O1e=function(i){const s=[],_={str:i,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:s}]}},_e={style:{color:to(this,Ny,M1e),fontSize:to(this,Ny,sge)?`calc(${to(this,Ny,sge)}px * var(--scale-factor))`:""}};for(const ct of i.split(`
`))s.push({name:"span",value:ct,attributes:_e});return _},F1e=function(i){i.altKey||i.shiftKey||i.ctrlKey||i.metaKey||(i.key==="Enter"||i.key==="Escape"&&to(this,u8))&&Nu(this,Ny,Mfe).call(this)},L1e=function(){if(to(this,c8)!==null)return;const{page:{view:i},viewport:{rawDims:{pageWidth:s,pageHeight:_,pageX:_e,pageY:ct}}}=to(this,Ahe);let Mt=!!to(this,tde),Ft=Mt?to(this,tde):to(this,khe);for(const or of to(this,Ihe))if(!Ft||Util.intersect(or.data.rect,Ft)!==null){Ft=or.data.rect,Mt=!0;break}const Ut=Util.normalizeRect([Ft[0],i[3]-Ft[1]+i[1],Ft[2],i[3]-Ft[3]+i[1]]),Xt=Mt?Ft[2]-Ft[0]+5:0,Kt=Ut[0]+Xt,nr=Ut[1];ku(this,c8,[100*(Kt-_e)/s,100*(nr-ct)/_]);const{style:rr}=to(this,By);rr.left=`${to(this,c8)[0]}%`,rr.top=`${to(this,c8)[1]}%`},Mfe=function(){ku(this,u8,!to(this,u8)),to(this,u8)?(Nu(this,Ny,Ofe).call(this),to(this,By).addEventListener("click",to(this,ede)),to(this,By).addEventListener("keydown",to(this,Jce))):(Nu(this,Ny,lge).call(this),to(this,By).removeEventListener("click",to(this,ede)),to(this,By).removeEventListener("keydown",to(this,Jce)))},Ofe=function(){to(this,fC)||this.render(),this.isVisible?to(this,u8)&&to(this,By).classList.add("focused"):(Nu(this,Ny,L1e).call(this),to(this,By).hidden=!1,to(this,By).style.zIndex=parseInt(to(this,By).style.zIndex)+1e3)},lge=function(){to(this,By).classList.remove("focused"),!to(this,u8)&&this.isVisible&&(to(this,By).hidden=!0,to(this,By).style.zIndex=parseInt(to(this,By).style.zIndex)-1e3)};class FreeTextAnnotationElement extends AnnotationElement{constructor(i){super(i,{isRenderable:!0,ignoreBorder:!0}),this.textContent=i.data.textContent,this.textPosition=i.data.textPosition,this.annotationEditorType=AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const i=document.createElement("div");i.classList.add("annotationTextContent"),i.setAttribute("role","comment");for(const s of this.textContent){const _=document.createElement("span");_.textContent=s,i.append(_)}this.container.append(i)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}get _isEditable(){return this.data.hasOwnCanvas}}var Nhe;class LineAnnotationElement extends AnnotationElement{constructor(s){super(s,{isRenderable:!0,ignoreBorder:!0});Ku(this,Nhe,null)}render(){this.container.classList.add("lineAnnotation");const s=this.data,{width:_,height:_e}=getRectDims(s.rect),ct=this.svgFactory.create(_,_e,!0),Mt=ku(this,Nhe,this.svgFactory.createElement("svg:line"));return Mt.setAttribute("x1",s.rect[2]-s.lineCoordinates[0]),Mt.setAttribute("y1",s.rect[3]-s.lineCoordinates[1]),Mt.setAttribute("x2",s.rect[2]-s.lineCoordinates[2]),Mt.setAttribute("y2",s.rect[3]-s.lineCoordinates[3]),Mt.setAttribute("stroke-width",s.borderStyle.width||1),Mt.setAttribute("stroke","transparent"),Mt.setAttribute("fill","transparent"),ct.append(Mt),this.container.append(ct),!s.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return to(this,Nhe)}addHighlightArea(){this.container.classList.add("highlightArea")}}Nhe=new WeakMap;var Rhe;class SquareAnnotationElement extends AnnotationElement{constructor(s){super(s,{isRenderable:!0,ignoreBorder:!0});Ku(this,Rhe,null)}render(){this.container.classList.add("squareAnnotation");const s=this.data,{width:_,height:_e}=getRectDims(s.rect),ct=this.svgFactory.create(_,_e,!0),Mt=s.borderStyle.width,Ft=ku(this,Rhe,this.svgFactory.createElement("svg:rect"));return Ft.setAttribute("x",Mt/2),Ft.setAttribute("y",Mt/2),Ft.setAttribute("width",_-Mt),Ft.setAttribute("height",_e-Mt),Ft.setAttribute("stroke-width",Mt||1),Ft.setAttribute("stroke","transparent"),Ft.setAttribute("fill","transparent"),ct.append(Ft),this.container.append(ct),!s.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return to(this,Rhe)}addHighlightArea(){this.container.classList.add("highlightArea")}}Rhe=new WeakMap;var Phe;class CircleAnnotationElement extends AnnotationElement{constructor(s){super(s,{isRenderable:!0,ignoreBorder:!0});Ku(this,Phe,null)}render(){this.container.classList.add("circleAnnotation");const s=this.data,{width:_,height:_e}=getRectDims(s.rect),ct=this.svgFactory.create(_,_e,!0),Mt=s.borderStyle.width,Ft=ku(this,Phe,this.svgFactory.createElement("svg:ellipse"));return Ft.setAttribute("cx",_/2),Ft.setAttribute("cy",_e/2),Ft.setAttribute("rx",_/2-Mt/2),Ft.setAttribute("ry",_e/2-Mt/2),Ft.setAttribute("stroke-width",Mt||1),Ft.setAttribute("stroke","transparent"),Ft.setAttribute("fill","transparent"),ct.append(Ft),this.container.append(ct),!s.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return to(this,Phe)}addHighlightArea(){this.container.classList.add("highlightArea")}}Phe=new WeakMap;var Dhe;class PolylineAnnotationElement extends AnnotationElement{constructor(s){super(s,{isRenderable:!0,ignoreBorder:!0});Ku(this,Dhe,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:s,vertices:_,borderStyle:_e,popupRef:ct}}=this;if(!_)return this.container;const{width:Mt,height:Ft}=getRectDims(s),Ut=this.svgFactory.create(Mt,Ft,!0);let Xt=[];for(let nr=0,rr=_.length;nr<rr;nr+=2){const or=_[nr]-s[0],hr=s[3]-_[nr+1];Xt.push(`${or},${hr}`)}Xt=Xt.join(" ");const Kt=ku(this,Dhe,this.svgFactory.createElement(this.svgElementName));return Kt.setAttribute("points",Xt),Kt.setAttribute("stroke-width",_e.width||1),Kt.setAttribute("stroke","transparent"),Kt.setAttribute("fill","transparent"),Ut.append(Kt),this.container.append(Ut),!ct&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return to(this,Dhe)}addHighlightArea(){this.container.classList.add("highlightArea")}}Dhe=new WeakMap;class PolygonAnnotationElement extends PolylineAnnotationElement{constructor(i){super(i),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class CaretAnnotationElement extends AnnotationElement{constructor(i){super(i,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Mhe;class InkAnnotationElement extends AnnotationElement{constructor(s){super(s,{isRenderable:!0,ignoreBorder:!0});Ku(this,Mhe,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:s,inkLists:_,borderStyle:_e,popupRef:ct}}=this,{width:Mt,height:Ft}=getRectDims(s),Ut=this.svgFactory.create(Mt,Ft,!0);for(const Xt of _){let Kt=[];for(let rr=0,or=Xt.length;rr<or;rr+=2){const hr=Xt[rr]-s[0],fr=s[3]-Xt[rr+1];Kt.push(`${hr},${fr}`)}Kt=Kt.join(" ");const nr=this.svgFactory.createElement(this.svgElementName);to(this,Mhe).push(nr),nr.setAttribute("points",Kt),nr.setAttribute("stroke-width",_e.width||1),nr.setAttribute("stroke","transparent"),nr.setAttribute("fill","transparent"),!ct&&this.hasPopupData&&this._createPopup(),Ut.append(nr)}return this.container.append(Ut),this.container}getElementsToTriggerPopup(){return to(this,Mhe)}addHighlightArea(){this.container.classList.add("highlightArea")}}Mhe=new WeakMap;class HighlightAnnotationElement extends AnnotationElement{constructor(i){super(i,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class UnderlineAnnotationElement extends AnnotationElement{constructor(i){super(i,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class SquigglyAnnotationElement extends AnnotationElement{constructor(i){super(i,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class StrikeOutAnnotationElement extends AnnotationElement{constructor(i){super(i,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class StampAnnotationElement extends AnnotationElement{constructor(i){super(i,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Ohe,Fhe,uge;class FileAttachmentAnnotationElement extends AnnotationElement{constructor(s){var _e;super(s,{isRenderable:!0});Ku(this,Fhe);Ku(this,Ohe,null);const{file:_}=this.data;this.filename=_.filename,this.content=_.content,(_e=this.linkService.eventBus)==null||_e.dispatch("fileattachmentannotation",{source:this,..._})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:s,data:_}=this;let _e;_.hasAppearance||_.fillAlpha===0?_e=document.createElement("div"):(_e=document.createElement("img"),_e.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(_.name)?"paperclip":"pushpin"}.svg`,_.fillAlpha&&_.fillAlpha<1&&(_e.style=`filter: opacity(${Math.round(100*_.fillAlpha)}%);`)),_e.addEventListener("dblclick",Nu(this,Fhe,uge).bind(this)),ku(this,Ohe,_e);const{isMac:ct}=util_FeatureTest.platform;return s.addEventListener("keydown",Mt=>{Mt.key==="Enter"&&(ct?Mt.metaKey:Mt.ctrlKey)&&Nu(this,Fhe,uge).call(this)}),!_.popupRef&&this.hasPopupData?this._createPopup():_e.classList.add("popupTriggerArea"),s.append(_e),s}getElementsToTriggerPopup(){return to(this,Ohe)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ohe=new WeakMap,Fhe=new WeakSet,uge=function(){var s;(s=this.downloadManager)==null||s.openOrDownloadData(this.content,this.filename)};var Lhe,ele,rde,wle,B1e,cge,Kge;let AnnotationLayer$1=(Kge=class{constructor({div:o,accessibilityManager:i,annotationCanvasMap:s,annotationEditorUIManager:_,page:_e,viewport:ct}){Ku(this,wle);Ku(this,Lhe,null);Ku(this,ele,null);Ku(this,rde,new Map);this.div=o,ku(this,Lhe,i),ku(this,ele,s),this.page=_e,this.viewport=ct,this.zIndex=0,this._annotationEditorUIManager=_}async render(o){var ct;const{annotations:i}=o,s=this.div;setLayerDimensions(s,this.viewport);const _=new Map,_e={data:null,layer:s,linkService:o.linkService,downloadManager:o.downloadManager,imageResourcesPath:o.imageResourcesPath||"",renderForms:o.renderForms!==!1,svgFactory:new DOMSVGFactory,annotationStorage:o.annotationStorage||new AnnotationStorage,enableScripting:o.enableScripting===!0,hasJSActions:o.hasJSActions,fieldObjects:o.fieldObjects,parent:this,elements:null};for(const Mt of i){if(Mt.noHTML)continue;const Ft=Mt.annotationType===AnnotationType.POPUP;if(Ft){const Kt=_.get(Mt.id);if(!Kt)continue;_e.elements=Kt}else{const{width:Kt,height:nr}=getRectDims(Mt.rect);if(Kt<=0||nr<=0)continue}_e.data=Mt;const Ut=AnnotationElementFactory.create(_e);if(!Ut.isRenderable)continue;if(!Ft&&Mt.popupRef){const Kt=_.get(Mt.popupRef);Kt?Kt.push(Ut):_.set(Mt.popupRef,[Ut])}const Xt=Ut.render();Mt.hidden&&(Xt.style.visibility="hidden"),Nu(this,wle,B1e).call(this,Xt,Mt.id),Ut.annotationEditorType>0&&(to(this,rde).set(Ut.data.id,Ut),(ct=this._annotationEditorUIManager)==null||ct.renderAnnotationElement(Ut))}Nu(this,wle,cge).call(this)}update({viewport:o}){const i=this.div;this.viewport=o,setLayerDimensions(i,{rotation:o.rotation}),Nu(this,wle,cge).call(this),i.hidden=!1}getEditableAnnotations(){return Array.from(to(this,rde).values())}getEditableAnnotation(o){return to(this,rde).get(o)}},Lhe=new WeakMap,ele=new WeakMap,rde=new WeakMap,wle=new WeakSet,B1e=function(o,i){var _;const s=o.firstChild||o;s.id=`${AnnotationPrefix}${i}`,this.div.append(o),(_=to(this,Lhe))==null||_.moveElementInDOM(this.div,o,s,!1)},cge=function(){if(!to(this,ele))return;const o=this.div;for(const[i,s]of to(this,ele)){const _=o.querySelector(`[data-annotation-id="${i}"]`);if(!_)continue;s.className="annotationContent";const{firstChild:_e}=_;_e?_e.nodeName==="CANVAS"?_e.replaceWith(s):_e.classList.contains("annotationContent")?_e.after(s):_e.before(s):_.append(s)}to(this,ele).clear()},Kge);const EOL_PATTERN=/\r\n?|\n/g;var Bhe,zhe,Vhe,Uhe,Whe,mC,cw,Hhe,pw,nde,Uy,z1e,V1e,U1e,Ffe,S8,Lfe,Bfe,W1e,dge,H1e;const Dy=class Dy extends AnnotationEditor{constructor(s){super({...s,name:"freeTextEditor"});Ku(this,Uy);Ku(this,Bhe,this.editorDivBlur.bind(this));Ku(this,zhe,this.editorDivFocus.bind(this));Ku(this,Vhe,this.editorDivInput.bind(this));Ku(this,Uhe,this.editorDivKeydown.bind(this));Ku(this,Whe,this.editorDivPaste.bind(this));Ku(this,mC);Ku(this,cw,"");Ku(this,Hhe,`${this.id}-editor`);Ku(this,pw);Ku(this,nde,null);ku(this,mC,s.color||Dy._defaultColor||AnnotationEditor._defaultLineColor),ku(this,pw,s.fontSize||Dy._defaultFontSize)}static get _keyboardManager(){const s=Dy.prototype,_=Mt=>Mt.isEmpty(),_e=AnnotationEditorUIManager.TRANSLATE_SMALL,ct=AnnotationEditorUIManager.TRANSLATE_BIG;return shadow(this,"_keyboardManager",new KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],s.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],s.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],s._translateEmpty,{args:[-_e,0],checker:_}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],s._translateEmpty,{args:[-ct,0],checker:_}],[["ArrowRight","mac+ArrowRight"],s._translateEmpty,{args:[_e,0],checker:_}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],s._translateEmpty,{args:[ct,0],checker:_}],[["ArrowUp","mac+ArrowUp"],s._translateEmpty,{args:[0,-_e],checker:_}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],s._translateEmpty,{args:[0,-ct],checker:_}],[["ArrowDown","mac+ArrowDown"],s._translateEmpty,{args:[0,_e],checker:_}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],s._translateEmpty,{args:[0,ct],checker:_}]]))}static initialize(s,_){AnnotationEditor.initialize(s,_,{strings:["pdfjs-free-text-default-content"]});const _e=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(_e.getPropertyValue("--freetext-padding"))}static updateDefaultParams(s,_){switch(s){case AnnotationEditorParamsType.FREETEXT_SIZE:Dy._defaultFontSize=_;break;case AnnotationEditorParamsType.FREETEXT_COLOR:Dy._defaultColor=_}}updateParams(s,_){switch(s){case AnnotationEditorParamsType.FREETEXT_SIZE:Nu(this,Uy,z1e).call(this,_);break;case AnnotationEditorParamsType.FREETEXT_COLOR:Nu(this,Uy,V1e).call(this,_)}}static get defaultPropertiesToUpdate(){return[[AnnotationEditorParamsType.FREETEXT_SIZE,Dy._defaultFontSize],[AnnotationEditorParamsType.FREETEXT_COLOR,Dy._defaultColor||AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[AnnotationEditorParamsType.FREETEXT_SIZE,to(this,pw)],[AnnotationEditorParamsType.FREETEXT_COLOR,to(this,mC)]]}_translateEmpty(s,_){this._uiManager.translateSelectedEditors(s,_,!0)}getInitialTranslation(){const s=this.parentScale;return[-Dy._internalPadding*s,-(Dy._internalPadding+to(this,pw))*s]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant");const s=this._uiManager._signal;this.editorDiv.addEventListener("keydown",to(this,Uhe),{signal:s}),this.editorDiv.addEventListener("focus",to(this,zhe),{signal:s}),this.editorDiv.addEventListener("blur",to(this,Bhe),{signal:s}),this.editorDiv.addEventListener("input",to(this,Vhe),{signal:s}),this.editorDiv.addEventListener("paste",to(this,Whe),{signal:s})}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",to(this,Hhe)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",to(this,Uhe)),this.editorDiv.removeEventListener("focus",to(this,zhe)),this.editorDiv.removeEventListener("blur",to(this,Bhe)),this.editorDiv.removeEventListener("input",to(this,Vhe)),this.editorDiv.removeEventListener("paste",to(this,Whe)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(s){this._focusEventsAllowed&&(super.focusin(s),s.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var s;this.width||(this.enableEditMode(),this.editorDiv.focus(),(s=this._initialOptions)!=null&&s.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const s=to(this,cw),_=ku(this,cw,Nu(this,Uy,U1e).call(this).trimEnd());if(s===_)return;const _e=ct=>{ku(this,cw,ct),ct?(Nu(this,Uy,Bfe).call(this),this._uiManager.rebuild(this),Nu(this,Uy,Ffe).call(this)):this.remove()};this.addCommands({cmd:()=>{_e(_)},undo:()=>{_e(s)},mustExec:!1}),Nu(this,Uy,Ffe).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(s){this.enterInEditMode()}keydown(s){s.target===this.div&&s.key==="Enter"&&(this.enterInEditMode(),s.preventDefault())}editorDivKeydown(s){Dy._keyboardManager.exec(this,s)}editorDivFocus(s){this.isEditing=!0}editorDivBlur(s){this.isEditing=!1}editorDivInput(s){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let s,_;this.width&&(s=this.x,_=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",to(this,Hhe)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text"),this.enableEditing(),AnnotationEditor._l10nPromise.get("pdfjs-free-text-default-content").then(ct=>{var Mt;return(Mt=this.editorDiv)==null?void 0:Mt.setAttribute("default-content",ct)}),this.editorDiv.contentEditable=!0;const{style:_e}=this.editorDiv;if(_e.fontSize=`calc(${to(this,pw)}px * var(--scale-factor))`,_e.color=to(this,mC),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),bindEvents(this,this.div,["dblclick","keydown"]),this.width){const[ct,Mt]=this.parentDimensions;if(this.annotationElementId){const{position:Ft}=to(this,nde);let[Ut,Xt]=this.getInitialTranslation();[Ut,Xt]=this.pageTranslationToScreen(Ut,Xt);const[Kt,nr]=this.pageDimensions,[rr,or]=this.pageTranslation;let hr,fr;switch(this.rotation){case 0:hr=s+(Ft[0]-rr)/Kt,fr=_+this.height-(Ft[1]-or)/nr;break;case 90:hr=s+(Ft[0]-rr)/Kt,fr=_-(Ft[1]-or)/nr,[Ut,Xt]=[Xt,-Ut];break;case 180:hr=s-this.width+(Ft[0]-rr)/Kt,fr=_-(Ft[1]-or)/nr,[Ut,Xt]=[-Ut,-Xt];break;case 270:hr=s+(Ft[0]-rr-this.height*nr)/Kt,fr=_+(Ft[1]-or-this.width*Kt)/nr,[Ut,Xt]=[-Xt,Ut]}this.setAt(hr*ct,fr*Mt,Ut,Xt)}else this.setAt(s*ct,_*Mt,this.width*ct,this.height*Mt);Nu(this,Uy,Bfe).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(s){var hr,fr,yr;const _=s.clipboardData||window.clipboardData,{types:_e}=_;if(_e.length===1&&_e[0]==="text/plain")return;s.preventDefault();const ct=Nu(hr=Dy,S8,dge).call(hr,_.getData("text")||"").replaceAll(EOL_PATTERN,`
`);if(!ct)return;const Mt=window.getSelection();if(!Mt.rangeCount)return;this.editorDiv.normalize(),Mt.deleteFromDocument();const Ft=Mt.getRangeAt(0);if(!ct.includes(`
`))return Ft.insertNode(document.createTextNode(ct)),this.editorDiv.normalize(),void Mt.collapseToStart();const{startContainer:Ut,startOffset:Xt}=Ft,Kt=[],nr=[];if(Ut.nodeType===Node.TEXT_NODE){const Lr=Ut.parentElement;if(nr.push(Ut.nodeValue.slice(Xt).replaceAll(EOL_PATTERN,"")),Lr!==this.editorDiv){let Br=Kt;for(const Vr of this.editorDiv.childNodes)Vr!==Lr?Br.push(Nu(fr=Dy,S8,Lfe).call(fr,Vr)):Br=nr}Kt.push(Ut.nodeValue.slice(0,Xt).replaceAll(EOL_PATTERN,""))}else if(Ut===this.editorDiv){let Lr=Kt,Br=0;for(const Vr of this.editorDiv.childNodes)Br++===Xt&&(Lr=nr),Lr.push(Nu(yr=Dy,S8,Lfe).call(yr,Vr))}ku(this,cw,`${Kt.join(`
`)}${ct}${nr.join(`
`)}`),Nu(this,Uy,Bfe).call(this);const rr=new Range;let or=Kt.reduce((Lr,Br)=>Lr+Br.length,0);for(const{firstChild:Lr}of this.editorDiv.childNodes)if(Lr.nodeType===Node.TEXT_NODE){const Br=Lr.nodeValue.length;if(or<=Br){rr.setStart(Lr,or),rr.setEnd(Lr,or);break}or-=Br}Mt.removeAllRanges(),Mt.addRange(rr)}get contentDiv(){return this.editorDiv}static deserialize(s,_,_e){var Ft;let ct=null;if(s instanceof FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:Ut,fontColor:Xt},rect:Kt,rotation:nr,id:rr},textContent:or,textPosition:hr,parent:{page:{pageNumber:fr}}}=s;if(!or||or.length===0)return null;ct=s={annotationType:AnnotationEditorType.FREETEXT,color:Array.from(Xt),fontSize:Ut,value:or.join(`
`),position:hr,pageIndex:fr-1,rect:Kt.slice(0),rotation:nr,id:rr,deleted:!1}}const Mt=super.deserialize(s,_,_e);return ku(Mt,pw,s.fontSize),ku(Mt,mC,Util.makeHexColor(...s.color)),ku(Mt,cw,Nu(Ft=Dy,S8,dge).call(Ft,s.value)),Mt.annotationElementId=s.id||null,ku(Mt,nde,ct),Mt}serialize(s=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const _=Dy._internalPadding*this.parentScale,_e=this.getRect(_,_),ct=AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:to(this,mC)),Mt={annotationType:AnnotationEditorType.FREETEXT,color:ct,fontSize:to(this,pw),value:Nu(this,Uy,W1e).call(this),pageIndex:this.pageIndex,rect:_e,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return s?Mt:this.annotationElementId&&!Nu(this,Uy,H1e).call(this,Mt)?null:(Mt.id=this.annotationElementId,Mt)}renderAnnotationElement(s){const _=super.renderAnnotationElement(s);if(this.deleted)return _;const{style:_e}=_;_e.fontSize=`calc(${to(this,pw)}px * var(--scale-factor))`,_e.color=to(this,mC),_.replaceChildren();for(const Mt of to(this,cw).split(`
`)){const Ft=document.createElement("div");Ft.append(Mt?document.createTextNode(Mt):document.createElement("br")),_.append(Ft)}const ct=Dy._internalPadding*this.parentScale;return s.updateEdited({rect:this.getRect(ct,ct),popupContent:to(this,cw)}),_}resetAnnotationElement(s){super.resetAnnotationElement(s),s.resetEdited()}};Bhe=new WeakMap,zhe=new WeakMap,Vhe=new WeakMap,Uhe=new WeakMap,Whe=new WeakMap,mC=new WeakMap,cw=new WeakMap,Hhe=new WeakMap,pw=new WeakMap,nde=new WeakMap,Uy=new WeakSet,z1e=function(s){const _=ct=>{this.editorDiv.style.fontSize=`calc(${ct}px * var(--scale-factor))`,this.translate(0,-(ct-to(this,pw))*this.parentScale),ku(this,pw,ct),Nu(this,Uy,Ffe).call(this)},_e=to(this,pw);this.addCommands({cmd:_.bind(this,s),undo:_.bind(this,_e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},V1e=function(s){const _=ct=>{ku(this,mC,this.editorDiv.style.color=ct)},_e=to(this,mC);this.addCommands({cmd:_.bind(this,s),undo:_.bind(this,_e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},U1e=function(){var _;const s=[];this.editorDiv.normalize();for(const _e of this.editorDiv.childNodes)s.push(Nu(_=Dy,S8,Lfe).call(_,_e));return s.join(`
`)},Ffe=function(){const[s,_]=this.parentDimensions;let _e;if(this.isAttachedToDOM)_e=this.div.getBoundingClientRect();else{const{currentLayer:ct,div:Mt}=this,Ft=Mt.style.display,Ut=Mt.classList.contains("hidden");Mt.classList.remove("hidden"),Mt.style.display="hidden",ct.div.append(this.div),_e=Mt.getBoundingClientRect(),Mt.remove(),Mt.style.display=Ft,Mt.classList.toggle("hidden",Ut)}this.rotation%180==this.parentRotation%180?(this.width=_e.width/s,this.height=_e.height/_):(this.width=_e.height/s,this.height=_e.width/_),this.fixAndSetPosition()},S8=new WeakSet,Lfe=function(s){return(s.nodeType===Node.TEXT_NODE?s.nodeValue:s.innerText).replaceAll(EOL_PATTERN,"")},Bfe=function(){if(this.editorDiv.replaceChildren(),to(this,cw))for(const s of to(this,cw).split(`
`)){const _=document.createElement("div");_.append(s?document.createTextNode(s):document.createElement("br")),this.editorDiv.append(_)}},W1e=function(){return to(this,cw).replaceAll(" "," ")},dge=function(s){return s.replaceAll(" "," ")},H1e=function(s){const{value:_,fontSize:_e,color:ct,pageIndex:Mt}=to(this,nde);return this._hasBeenMoved||s.value!==_||s.fontSize!==_e||s.color.some((Ft,Ut)=>Ft!==ct[Ut])||s.pageIndex!==Mt},Ku(Dy,S8),vy(Dy,"_freeTextDefaultContent",""),vy(Dy,"_internalPadding",0),vy(Dy,"_defaultColor",null),vy(Dy,"_defaultFontSize",10),vy(Dy,"_type","freetext"),vy(Dy,"_editorType",AnnotationEditorType.FREETEXT);let FreeTextEditor=Dy;var Ghe,eG,gC,D0,G1e,zfe,j1e,X1e,pge;class Outliner{constructor(i,s=0,_=0,_e=!0){Ku(this,D0);Ku(this,Ghe);Ku(this,eG,[]);Ku(this,gC,[]);let ct=1/0,Mt=-1/0,Ft=1/0,Ut=-1/0;const Xt=10**-4;for(const{x:yr,y:Lr,width:Br,height:Vr}of i){const Wr=Math.floor((yr-s)/Xt)*Xt,ro=Math.ceil((yr+Br+s)/Xt)*Xt,no=Math.floor((Lr-s)/Xt)*Xt,so=Math.ceil((Lr+Vr+s)/Xt)*Xt,ko=[Wr,no,so,!0],To=[ro,no,so,!1];to(this,eG).push(ko,To),ct=Math.min(ct,Wr),Mt=Math.max(Mt,ro),Ft=Math.min(Ft,no),Ut=Math.max(Ut,so)}const Kt=Mt-ct+2*_,nr=Ut-Ft+2*_,rr=ct-_,or=Ft-_,hr=to(this,eG).at(_e?-1:-2),fr=[hr[0],hr[2]];for(const yr of to(this,eG)){const[Lr,Br,Vr]=yr;yr[0]=(Lr-rr)/Kt,yr[1]=(Br-or)/nr,yr[2]=(Vr-or)/nr}ku(this,Ghe,{x:rr,y:or,width:Kt,height:nr,lastPoint:fr})}getOutlines(){to(this,eG).sort((s,_)=>s[0]-_[0]||s[1]-_[1]||s[2]-_[2]);const i=[];for(const s of to(this,eG))s[3]?(i.push(...Nu(this,D0,pge).call(this,s)),Nu(this,D0,j1e).call(this,s)):(Nu(this,D0,X1e).call(this,s),i.push(...Nu(this,D0,pge).call(this,s)));return Nu(this,D0,G1e).call(this,i)}}Ghe=new WeakMap,eG=new WeakMap,gC=new WeakMap,D0=new WeakSet,G1e=function(i){const s=[],_=new Set;for(const Mt of i){const[Ft,Ut,Xt]=Mt;s.push([Ft,Ut,Mt],[Ft,Xt,Mt])}s.sort((Mt,Ft)=>Mt[1]-Ft[1]||Mt[0]-Ft[0]);for(let Mt=0,Ft=s.length;Mt<Ft;Mt+=2){const Ut=s[Mt][2],Xt=s[Mt+1][2];Ut.push(Xt),Xt.push(Ut),_.add(Ut),_.add(Xt)}const _e=[];let ct;for(;_.size>0;){const Mt=_.values().next().value;let[Ft,Ut,Xt,Kt,nr]=Mt;_.delete(Mt);let rr=Ft,or=Ut;for(ct=[Ft,Xt],_e.push(ct);;){let hr;if(_.has(Kt))hr=Kt;else{if(!_.has(nr))break;hr=nr}_.delete(hr),[Ft,Ut,Xt,Kt,nr]=hr,rr!==Ft&&(ct.push(rr,or,Ft,or===Ut?Ut:Xt),rr=Ft),or=or===Ut?Xt:Ut}ct.push(rr,or)}return new HighlightOutline(_e,to(this,Ghe))},zfe=function(i){const s=to(this,gC);let _=0,_e=s.length-1;for(;_<=_e;){const ct=_+_e>>1,Mt=s[ct][0];if(Mt===i)return ct;Mt<i?_=ct+1:_e=ct-1}return _e+1},j1e=function([,i,s]){const _=Nu(this,D0,zfe).call(this,i);to(this,gC).splice(_,0,[i,s])},X1e=function([,i,s]){const _=Nu(this,D0,zfe).call(this,i);for(let _e=_;_e<to(this,gC).length;_e++){const[ct,Mt]=to(this,gC)[_e];if(ct!==i)break;if(ct===i&&Mt===s)return void to(this,gC).splice(_e,1)}for(let _e=_-1;_e>=0;_e--){const[ct,Mt]=to(this,gC)[_e];if(ct!==i)break;if(ct===i&&Mt===s)return void to(this,gC).splice(_e,1)}},pge=function(i){const[s,_,_e]=i,ct=[[s,_,_e]],Mt=Nu(this,D0,zfe).call(this,_e);for(let Ft=0;Ft<Mt;Ft++){const[Ut,Xt]=to(this,gC)[Ft];for(let Kt=0,nr=ct.length;Kt<nr;Kt++){const[,rr,or]=ct[Kt];if(!(Xt<=rr||or<=Ut))if(rr>=Ut)if(or>Xt)ct[Kt][1]=Xt;else{if(nr===1)return[];ct.splice(Kt,1),Kt--,nr--}else ct[Kt][2]=Ut,or>Xt&&ct.push([s,Xt,or])}}return ct};class Outline{toSVGPath(){throw new Error("Abstract method `toSVGPath` must be implemented.")}get box(){throw new Error("Abstract getter `box` must be implemented.")}serialize(i,s){throw new Error("Abstract method `serialize` must be implemented.")}get free(){return this instanceof FreeHighlightOutline}}var jhe,ade;class HighlightOutline extends Outline{constructor(s,_){super();Ku(this,jhe);Ku(this,ade);ku(this,ade,s),ku(this,jhe,_)}toSVGPath(){const s=[];for(const _ of to(this,ade)){let[_e,ct]=_;s.push(`M${_e} ${ct}`);for(let Mt=2;Mt<_.length;Mt+=2){const Ft=_[Mt],Ut=_[Mt+1];Ft===_e?(s.push(`V${Ut}`),ct=Ut):Ut===ct&&(s.push(`H${Ft}`),_e=Ft)}s.push("Z")}return s.join(" ")}serialize([s,_,_e,ct],Mt){const Ft=[],Ut=_e-s,Xt=ct-_;for(const Kt of to(this,ade)){const nr=new Array(Kt.length);for(let rr=0;rr<Kt.length;rr+=2)nr[rr]=s+Kt[rr]*Ut,nr[rr+1]=ct-Kt[rr+1]*Xt;Ft.push(nr)}return Ft}get box(){return to(this,jhe)}}jhe=new WeakMap,ade=new WeakMap;var NC,p8,ide,ode,RC,Cy,tle,rle,Xhe,qhe,sde,lde,tG,Khe,dme,pme,Yhe,hge;const WC=class WC{constructor({x:i,y:s},_,_e,ct,Mt,Ft=0){Ku(this,Yhe);Ku(this,NC);Ku(this,p8,[]);Ku(this,ide);Ku(this,ode);Ku(this,RC,[]);Ku(this,Cy,new Float64Array(18));Ku(this,tle);Ku(this,rle);Ku(this,Xhe);Ku(this,qhe);Ku(this,sde);Ku(this,lde);Ku(this,tG,[]);ku(this,NC,_),ku(this,lde,ct*_e),ku(this,ode,Mt),to(this,Cy).set([NaN,NaN,NaN,NaN,i,s],6),ku(this,ide,Ft),ku(this,qhe,to(WC,Khe)*_e),ku(this,Xhe,to(WC,pme)*_e),ku(this,sde,_e),to(this,tG).push(i,s)}get free(){return!0}isEmpty(){return isNaN(to(this,Cy)[8])}add({x:i,y:s}){var so;ku(this,tle,i),ku(this,rle,s);const[_,_e,ct,Mt]=to(this,NC);let[Ft,Ut,Xt,Kt]=to(this,Cy).subarray(8,12);const nr=i-Xt,rr=s-Kt,or=Math.hypot(nr,rr);if(or<to(this,Xhe))return!1;const hr=or-to(this,qhe),fr=hr/or,yr=fr*nr,Lr=fr*rr;let Br=Ft,Vr=Ut;Ft=Xt,Ut=Kt,Xt+=yr,Kt+=Lr,(so=to(this,tG))==null||so.push(i,s);const Wr=yr/hr,ro=-Lr/hr*to(this,lde),no=Wr*to(this,lde);return to(this,Cy).set(to(this,Cy).subarray(2,8),0),to(this,Cy).set([Xt+ro,Kt+no],4),to(this,Cy).set(to(this,Cy).subarray(14,18),12),to(this,Cy).set([Xt-ro,Kt-no],16),isNaN(to(this,Cy)[6])?(to(this,RC).length===0&&(to(this,Cy).set([Ft+ro,Ut+no],2),to(this,RC).push(NaN,NaN,NaN,NaN,(Ft+ro-_)/ct,(Ut+no-_e)/Mt),to(this,Cy).set([Ft-ro,Ut-no],14),to(this,p8).push(NaN,NaN,NaN,NaN,(Ft-ro-_)/ct,(Ut-no-_e)/Mt)),to(this,Cy).set([Br,Vr,Ft,Ut,Xt,Kt],6),!this.isEmpty()):(to(this,Cy).set([Br,Vr,Ft,Ut,Xt,Kt],6),Math.abs(Math.atan2(Vr-Ut,Br-Ft)-Math.atan2(Lr,yr))<Math.PI/2?([Ft,Ut,Xt,Kt]=to(this,Cy).subarray(2,6),to(this,RC).push(NaN,NaN,NaN,NaN,((Ft+Xt)/2-_)/ct,((Ut+Kt)/2-_e)/Mt),[Ft,Ut,Br,Vr]=to(this,Cy).subarray(14,18),to(this,p8).push(NaN,NaN,NaN,NaN,((Br+Ft)/2-_)/ct,((Vr+Ut)/2-_e)/Mt),!0):([Br,Vr,Ft,Ut,Xt,Kt]=to(this,Cy).subarray(0,6),to(this,RC).push(((Br+5*Ft)/6-_)/ct,((Vr+5*Ut)/6-_e)/Mt,((5*Ft+Xt)/6-_)/ct,((5*Ut+Kt)/6-_e)/Mt,((Ft+Xt)/2-_)/ct,((Ut+Kt)/2-_e)/Mt),[Xt,Kt,Ft,Ut,Br,Vr]=to(this,Cy).subarray(12,18),to(this,p8).push(((Br+5*Ft)/6-_)/ct,((Vr+5*Ut)/6-_e)/Mt,((5*Ft+Xt)/6-_)/ct,((5*Ut+Kt)/6-_e)/Mt,((Ft+Xt)/2-_)/ct,((Ut+Kt)/2-_e)/Mt),!0))}toSVGPath(){if(this.isEmpty())return"";const i=to(this,RC),s=to(this,p8),_=to(this,Cy).subarray(4,6),_e=to(this,Cy).subarray(16,18),[ct,Mt,Ft,Ut]=to(this,NC),[Xt,Kt,nr,rr]=Nu(this,Yhe,hge).call(this);if(isNaN(to(this,Cy)[6])&&!this.isEmpty())return`M${(to(this,Cy)[2]-ct)/Ft} ${(to(this,Cy)[3]-Mt)/Ut} L${(to(this,Cy)[4]-ct)/Ft} ${(to(this,Cy)[5]-Mt)/Ut} L${Xt} ${Kt} L${nr} ${rr} L${(to(this,Cy)[16]-ct)/Ft} ${(to(this,Cy)[17]-Mt)/Ut} L${(to(this,Cy)[14]-ct)/Ft} ${(to(this,Cy)[15]-Mt)/Ut} Z`;const or=[];or.push(`M${i[4]} ${i[5]}`);for(let hr=6;hr<i.length;hr+=6)isNaN(i[hr])?or.push(`L${i[hr+4]} ${i[hr+5]}`):or.push(`C${i[hr]} ${i[hr+1]} ${i[hr+2]} ${i[hr+3]} ${i[hr+4]} ${i[hr+5]}`);or.push(`L${(_[0]-ct)/Ft} ${(_[1]-Mt)/Ut} L${Xt} ${Kt} L${nr} ${rr} L${(_e[0]-ct)/Ft} ${(_e[1]-Mt)/Ut}`);for(let hr=s.length-6;hr>=6;hr-=6)isNaN(s[hr])?or.push(`L${s[hr+4]} ${s[hr+5]}`):or.push(`C${s[hr]} ${s[hr+1]} ${s[hr+2]} ${s[hr+3]} ${s[hr+4]} ${s[hr+5]}`);return or.push(`L${s[4]} ${s[5]} Z`),or.join(" ")}getOutlines(){var Lr;const i=to(this,RC),s=to(this,p8),_=to(this,Cy),_e=_.subarray(4,6),ct=_.subarray(16,18),[Mt,Ft,Ut,Xt]=to(this,NC),Kt=new Float64Array((((Lr=to(this,tG))==null?void 0:Lr.length)??0)+2);for(let Br=0,Vr=Kt.length-2;Br<Vr;Br+=2)Kt[Br]=(to(this,tG)[Br]-Mt)/Ut,Kt[Br+1]=(to(this,tG)[Br+1]-Ft)/Xt;Kt[Kt.length-2]=(to(this,tle)-Mt)/Ut,Kt[Kt.length-1]=(to(this,rle)-Ft)/Xt;const[nr,rr,or,hr]=Nu(this,Yhe,hge).call(this);if(isNaN(_[6])&&!this.isEmpty()){const Br=new Float64Array(36);return Br.set([NaN,NaN,NaN,NaN,(_[2]-Mt)/Ut,(_[3]-Ft)/Xt,NaN,NaN,NaN,NaN,(_[4]-Mt)/Ut,(_[5]-Ft)/Xt,NaN,NaN,NaN,NaN,nr,rr,NaN,NaN,NaN,NaN,or,hr,NaN,NaN,NaN,NaN,(_[16]-Mt)/Ut,(_[17]-Ft)/Xt,NaN,NaN,NaN,NaN,(_[14]-Mt)/Ut,(_[15]-Ft)/Xt],0),new FreeHighlightOutline(Br,Kt,to(this,NC),to(this,sde),to(this,ide),to(this,ode))}const fr=new Float64Array(to(this,RC).length+24+to(this,p8).length);let yr=i.length;for(let Br=0;Br<yr;Br+=2)isNaN(i[Br])?fr[Br]=fr[Br+1]=NaN:(fr[Br]=i[Br],fr[Br+1]=i[Br+1]);fr.set([NaN,NaN,NaN,NaN,(_e[0]-Mt)/Ut,(_e[1]-Ft)/Xt,NaN,NaN,NaN,NaN,nr,rr,NaN,NaN,NaN,NaN,or,hr,NaN,NaN,NaN,NaN,(ct[0]-Mt)/Ut,(ct[1]-Ft)/Xt],yr),yr+=24;for(let Br=s.length-6;Br>=6;Br-=6)for(let Vr=0;Vr<6;Vr+=2)isNaN(s[Br+Vr])?(fr[yr]=fr[yr+1]=NaN,yr+=2):(fr[yr]=s[Br+Vr],fr[yr+1]=s[Br+Vr+1],yr+=2);return fr.set([NaN,NaN,NaN,NaN,s[4],s[5]],yr),new FreeHighlightOutline(fr,Kt,to(this,NC),to(this,sde),to(this,ide),to(this,ode))}};NC=new WeakMap,p8=new WeakMap,ide=new WeakMap,ode=new WeakMap,RC=new WeakMap,Cy=new WeakMap,tle=new WeakMap,rle=new WeakMap,Xhe=new WeakMap,qhe=new WeakMap,sde=new WeakMap,lde=new WeakMap,tG=new WeakMap,Khe=new WeakMap,dme=new WeakMap,pme=new WeakMap,Yhe=new WeakSet,hge=function(){const i=to(this,Cy).subarray(4,6),s=to(this,Cy).subarray(16,18),[_,_e,ct,Mt]=to(this,NC);return[(to(this,tle)+(i[0]-s[0])/2-_)/ct,(to(this,rle)+(i[1]-s[1])/2-_e)/Mt,(to(this,tle)+(s[0]-i[0])/2-_)/ct,(to(this,rle)+(s[1]-i[1])/2-_e)/Mt]},Ku(WC,Khe,8),Ku(WC,dme,2),Ku(WC,pme,to(WC,Khe)+to(WC,dme));let FreeOutliner=WC;var ude,ile,h8,Zhe,Uw,Qhe,zy,L0,Ade,kde,q1e;class FreeHighlightOutline extends Outline{constructor(s,_,_e,ct,Mt,Ft){super();Ku(this,L0);Ku(this,ude);Ku(this,ile,null);Ku(this,h8);Ku(this,Zhe);Ku(this,Uw);Ku(this,Qhe);Ku(this,zy);ku(this,zy,s),ku(this,Uw,_),ku(this,ude,_e),ku(this,Qhe,ct),ku(this,h8,Mt),ku(this,Zhe,Ft),Nu(this,L0,q1e).call(this,Ft);const{x:Ut,y:Xt,width:Kt,height:nr}=to(this,ile);for(let rr=0,or=s.length;rr<or;rr+=2)s[rr]=(s[rr]-Ut)/Kt,s[rr+1]=(s[rr+1]-Xt)/nr;for(let rr=0,or=_.length;rr<or;rr+=2)_[rr]=(_[rr]-Ut)/Kt,_[rr+1]=(_[rr+1]-Xt)/nr}toSVGPath(){const s=[`M${to(this,zy)[4]} ${to(this,zy)[5]}`];for(let _=6,_e=to(this,zy).length;_<_e;_+=6)isNaN(to(this,zy)[_])?s.push(`L${to(this,zy)[_+4]} ${to(this,zy)[_+5]}`):s.push(`C${to(this,zy)[_]} ${to(this,zy)[_+1]} ${to(this,zy)[_+2]} ${to(this,zy)[_+3]} ${to(this,zy)[_+4]} ${to(this,zy)[_+5]}`);return s.push("Z"),s.join(" ")}serialize([s,_,_e,ct],Mt){const Ft=_e-s,Ut=ct-_;let Xt,Kt;switch(Mt){case 0:Xt=Nu(this,L0,Ade).call(this,to(this,zy),s,ct,Ft,-Ut),Kt=Nu(this,L0,Ade).call(this,to(this,Uw),s,ct,Ft,-Ut);break;case 90:Xt=Nu(this,L0,kde).call(this,to(this,zy),s,_,Ft,Ut),Kt=Nu(this,L0,kde).call(this,to(this,Uw),s,_,Ft,Ut);break;case 180:Xt=Nu(this,L0,Ade).call(this,to(this,zy),_e,_,-Ft,Ut),Kt=Nu(this,L0,Ade).call(this,to(this,Uw),_e,_,-Ft,Ut);break;case 270:Xt=Nu(this,L0,kde).call(this,to(this,zy),_e,ct,-Ft,-Ut),Kt=Nu(this,L0,kde).call(this,to(this,Uw),_e,ct,-Ft,-Ut)}return{outline:Array.from(Xt),points:[Array.from(Kt)]}}get box(){return to(this,ile)}getNewOutline(s,_){const{x:_e,y:ct,width:Mt,height:Ft}=to(this,ile),[Ut,Xt,Kt,nr]=to(this,ude),rr=Mt*Kt,or=Ft*nr,hr=_e*Kt+Ut,fr=ct*nr+Xt,yr=new FreeOutliner({x:to(this,Uw)[0]*rr+hr,y:to(this,Uw)[1]*or+fr},to(this,ude),to(this,Qhe),s,to(this,Zhe),_??to(this,h8));for(let Lr=2;Lr<to(this,Uw).length;Lr+=2)yr.add({x:to(this,Uw)[Lr]*rr+hr,y:to(this,Uw)[Lr+1]*or+fr});return yr.getOutlines()}}ude=new WeakMap,ile=new WeakMap,h8=new WeakMap,Zhe=new WeakMap,Uw=new WeakMap,Qhe=new WeakMap,zy=new WeakMap,L0=new WeakSet,Ade=function(s,_,_e,ct,Mt){const Ft=new Float64Array(s.length);for(let Ut=0,Xt=s.length;Ut<Xt;Ut+=2)Ft[Ut]=_+s[Ut]*ct,Ft[Ut+1]=_e+s[Ut+1]*Mt;return Ft},kde=function(s,_,_e,ct,Mt){const Ft=new Float64Array(s.length);for(let Ut=0,Xt=s.length;Ut<Xt;Ut+=2)Ft[Ut]=_+s[Ut+1]*ct,Ft[Ut+1]=_e+s[Ut]*Mt;return Ft},q1e=function(s){const _=to(this,zy);let _e=_[4],ct=_[5],Mt=_e,Ft=ct,Ut=_e,Xt=ct,Kt=_e,nr=ct;const rr=s?Math.max:Math.min;for(let Lr=6,Br=_.length;Lr<Br;Lr+=6){if(isNaN(_[Lr]))Mt=Math.min(Mt,_[Lr+4]),Ft=Math.min(Ft,_[Lr+5]),Ut=Math.max(Ut,_[Lr+4]),Xt=Math.max(Xt,_[Lr+5]),nr<_[Lr+5]?(Kt=_[Lr+4],nr=_[Lr+5]):nr===_[Lr+5]&&(Kt=rr(Kt,_[Lr+4]));else{const Vr=Util.bezierBoundingBox(_e,ct,..._.slice(Lr,Lr+6));Mt=Math.min(Mt,Vr[0]),Ft=Math.min(Ft,Vr[1]),Ut=Math.max(Ut,Vr[2]),Xt=Math.max(Xt,Vr[3]),nr<Vr[3]?(Kt=Vr[2],nr=Vr[3]):nr===Vr[3]&&(Kt=rr(Kt,Vr[2]))}_e=_[Lr+4],ct=_[Lr+5]}const or=Mt-to(this,h8),hr=Ft-to(this,h8),fr=Ut-Mt+2*to(this,h8),yr=Xt-Ft+2*to(this,h8);ku(this,ile,{x:or,y:hr,width:fr,height:yr,lastPoint:[Kt,nr]})};var Jhe,efe,yC,lle,cde,jy,tfe,dde,rfe,nfe,vC,pde,Py,fge,mge,K1e,fG,Y1e,G6;const HC=class HC{constructor({editor:i=null,uiManager:s=null}){Ku(this,Py);Ku(this,Jhe,Nu(this,Py,K1e).bind(this));Ku(this,efe,Nu(this,Py,Y1e).bind(this));Ku(this,yC,null);Ku(this,lle,null);Ku(this,cde);Ku(this,jy,null);Ku(this,tfe,!1);Ku(this,dde,!1);Ku(this,rfe,null);Ku(this,nfe);Ku(this,vC,null);Ku(this,pde);var _;i?(ku(this,dde,!1),ku(this,pde,AnnotationEditorParamsType.HIGHLIGHT_COLOR),ku(this,rfe,i)):(ku(this,dde,!0),ku(this,pde,AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR)),ku(this,vC,(i==null?void 0:i._uiManager)||s),ku(this,nfe,to(this,vC)._eventBus),ku(this,cde,(i==null?void 0:i.color)||((_=to(this,vC))==null?void 0:_.highlightColors.values().next().value)||"#FFFF98")}static get _keyboardManager(){return shadow(this,"_keyboardManager",new KeyboardManager([[["Escape","mac+Escape"],HC.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],HC.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],HC.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],HC.prototype._moveToPrevious],[["Home","mac+Home"],HC.prototype._moveToBeginning],[["End","mac+End"],HC.prototype._moveToEnd]]))}renderButton(){const i=ku(this,yC,document.createElement("button"));i.className="colorPicker",i.tabIndex="0",i.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),i.setAttribute("aria-haspopup",!0);const s=to(this,vC)._signal;i.addEventListener("click",Nu(this,Py,fG).bind(this),{signal:s}),i.addEventListener("keydown",to(this,Jhe),{signal:s});const _=ku(this,lle,document.createElement("span"));return _.className="swatch",_.setAttribute("aria-hidden",!0),_.style.backgroundColor=to(this,cde),i.append(_),i}renderMainDropdown(){const i=ku(this,jy,Nu(this,Py,fge).call(this));return i.setAttribute("aria-orientation","horizontal"),i.setAttribute("aria-labelledby","highlightColorPickerLabel"),i}_colorSelectFromKeyboard(i){if(i.target===to(this,yC))return void Nu(this,Py,fG).call(this,i);const s=i.target.getAttribute("data-color");s&&Nu(this,Py,mge).call(this,s,i)}_moveToNext(i){var s,_;to(this,Py,G6)?i.target!==to(this,yC)?(s=i.target.nextSibling)==null||s.focus():(_=to(this,jy).firstChild)==null||_.focus():Nu(this,Py,fG).call(this,i)}_moveToPrevious(i){var s,_;i.target!==((s=to(this,jy))==null?void 0:s.firstChild)&&i.target!==to(this,yC)?(to(this,Py,G6)||Nu(this,Py,fG).call(this,i),(_=i.target.previousSibling)==null||_.focus()):to(this,Py,G6)&&this._hideDropdownFromKeyboard()}_moveToBeginning(i){var s;to(this,Py,G6)?(s=to(this,jy).firstChild)==null||s.focus():Nu(this,Py,fG).call(this,i)}_moveToEnd(i){var s;to(this,Py,G6)?(s=to(this,jy).lastChild)==null||s.focus():Nu(this,Py,fG).call(this,i)}hideDropdown(){var i;(i=to(this,jy))==null||i.classList.add("hidden"),window.removeEventListener("pointerdown",to(this,efe))}_hideDropdownFromKeyboard(){var i;to(this,dde)||(to(this,Py,G6)?(this.hideDropdown(),to(this,yC).focus({preventScroll:!0,focusVisible:to(this,tfe)})):(i=to(this,rfe))==null||i.unselect())}updateColor(i){if(to(this,lle)&&(to(this,lle).style.backgroundColor=i),!to(this,jy))return;const s=to(this,vC).highlightColors.values();for(const _ of to(this,jy).children)_.setAttribute("aria-selected",s.next().value===i)}destroy(){var i,s;(i=to(this,yC))==null||i.remove(),ku(this,yC,null),ku(this,lle,null),(s=to(this,jy))==null||s.remove(),ku(this,jy,null)}};Jhe=new WeakMap,efe=new WeakMap,yC=new WeakMap,lle=new WeakMap,cde=new WeakMap,jy=new WeakMap,tfe=new WeakMap,dde=new WeakMap,rfe=new WeakMap,nfe=new WeakMap,vC=new WeakMap,pde=new WeakMap,Py=new WeakSet,fge=function(){const i=document.createElement("div"),s=to(this,vC)._signal;i.addEventListener("contextmenu",noContextMenu,{signal:s}),i.className="dropdown",i.role="listbox",i.setAttribute("aria-multiselectable",!1),i.setAttribute("aria-orientation","vertical"),i.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[_,_e]of to(this,vC).highlightColors){const ct=document.createElement("button");ct.tabIndex="0",ct.role="option",ct.setAttribute("data-color",_e),ct.title=_,ct.setAttribute("data-l10n-id",`pdfjs-editor-colorpicker-${_}`);const Mt=document.createElement("span");ct.append(Mt),Mt.className="swatch",Mt.style.backgroundColor=_e,ct.setAttribute("aria-selected",_e===to(this,cde)),ct.addEventListener("click",Nu(this,Py,mge).bind(this,_e),{signal:s}),i.append(ct)}return i.addEventListener("keydown",to(this,Jhe),{signal:s}),i},mge=function(i,s){s.stopPropagation(),to(this,nfe).dispatch("switchannotationeditorparams",{source:this,type:to(this,pde),value:i})},K1e=function(i){HC._keyboardManager.exec(this,i)},fG=function(i){if(to(this,Py,G6))return void this.hideDropdown();if(ku(this,tfe,i.detail===0),window.addEventListener("pointerdown",to(this,efe),{signal:to(this,vC)._signal}),to(this,jy))return void to(this,jy).classList.remove("hidden");const s=ku(this,jy,Nu(this,Py,fge).call(this));to(this,yC).append(s)},Y1e=function(i){var s;(s=to(this,jy))!=null&&s.contains(i.target)||this.hideDropdown()},G6=function(){return to(this,jy)&&!to(this,jy).classList.contains("hidden")};let ColorPicker=HC;var hde,afe,rG,ule,fde,eC,ife,ofe,cle,bC,I0,Ww,fme,mde,dle,Xy,gde,PC,sfe,$y,gge,yge,Z1e,Q1e,J1e,vge,Tde,nC,kle,eye,Vfe,Nde,tye,rye,nye,aye;const Iy=class Iy extends AnnotationEditor{constructor(s){super({...s,name:"highlightEditor"});Ku(this,$y);Ku(this,hde,null);Ku(this,afe,0);Ku(this,rG);Ku(this,ule,null);Ku(this,fde,null);Ku(this,eC,null);Ku(this,ife,null);Ku(this,ofe,0);Ku(this,cle,null);Ku(this,bC,null);Ku(this,I0,null);Ku(this,Ww,!1);Ku(this,fme,Nu(this,$y,eye).bind(this));Ku(this,mde,null);Ku(this,dle);Ku(this,Xy,null);Ku(this,gde,"");Ku(this,PC);Ku(this,sfe,"");this.color=s.color||Iy._defaultColor,ku(this,PC,s.thickness||Iy._defaultThickness),ku(this,dle,s.opacity||Iy._defaultOpacity),ku(this,rG,s.boxes||null),ku(this,sfe,s.methodOfCreation||""),ku(this,gde,s.text||""),this._isDraggable=!1,s.highlightId>-1?(ku(this,Ww,!0),Nu(this,$y,yge).call(this,s),Nu(this,$y,Tde).call(this)):(ku(this,hde,s.anchorNode),ku(this,afe,s.anchorOffset),ku(this,ife,s.focusNode),ku(this,ofe,s.focusOffset),Nu(this,$y,gge).call(this),Nu(this,$y,Tde).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const s=Iy.prototype;return shadow(this,"_keyboardManager",new KeyboardManager([[["ArrowLeft","mac+ArrowLeft"],s._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],s._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],s._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],s._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:to(this,Ww)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:to(this,PC),methodOfCreation:to(this,sfe)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(s){return{numberOfColors:s.get("color").size}}static initialize(s,_){var _e;AnnotationEditor.initialize(s,_),Iy._defaultColor||(Iy._defaultColor=((_e=_.highlightColors)==null?void 0:_e.values().next().value)||"#fff066")}static updateDefaultParams(s,_){switch(s){case AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:Iy._defaultColor=_;break;case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:Iy._defaultThickness=_}}translateInPage(s,_){}get toolbarPosition(){return to(this,mde)}updateParams(s,_){switch(s){case AnnotationEditorParamsType.HIGHLIGHT_COLOR:Nu(this,$y,Z1e).call(this,_);break;case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:Nu(this,$y,Q1e).call(this,_)}}static get defaultPropertiesToUpdate(){return[[AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR,Iy._defaultColor],[AnnotationEditorParamsType.HIGHLIGHT_THICKNESS,Iy._defaultThickness]]}get propertiesToUpdate(){return[[AnnotationEditorParamsType.HIGHLIGHT_COLOR,this.color||Iy._defaultColor],[AnnotationEditorParamsType.HIGHLIGHT_THICKNESS,to(this,PC)||Iy._defaultThickness],[AnnotationEditorParamsType.HIGHLIGHT_FREE,to(this,Ww)]]}async addEditToolbar(){const s=await super.addEditToolbar();return s?(this._uiManager.highlightColors&&(ku(this,fde,new ColorPicker({editor:this})),s.addColorPicker(to(this,fde))),s):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(Nu(this,$y,Nde).call(this))}getBaseTranslation(){return[0,0]}getRect(s,_){return super.getRect(s,_,Nu(this,$y,Nde).call(this))}onceAdded(){this.parent.addUndoableEditor(this),this.div.focus()}remove(){Nu(this,$y,vge).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(Nu(this,$y,Tde).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(s){var _e;let _=!1;this.parent&&!s?Nu(this,$y,vge).call(this):s&&(Nu(this,$y,Tde).call(this,s),_=!this.parent&&((_e=this.div)==null?void 0:_e.classList.contains("selectedEditor"))),super.setParent(s),this.show(this._isVisible),_&&this.select()}rotate(s){var ct,Mt,Ft;const{drawLayer:_}=this.parent;let _e;to(this,Ww)?(s=(s-this.rotation+360)%360,_e=Nu(ct=Iy,nC,kle).call(ct,to(this,bC).box,s)):_e=Nu(Mt=Iy,nC,kle).call(Mt,this,s),_.rotate(to(this,I0),s),_.rotate(to(this,Xy),s),_.updateBox(to(this,I0),_e),_.updateBox(to(this,Xy),Nu(Ft=Iy,nC,kle).call(Ft,to(this,eC).box,s))}render(){if(this.div)return this.div;const s=super.render();to(this,gde)&&(s.setAttribute("aria-label",to(this,gde)),s.setAttribute("role","mark")),to(this,Ww)?s.classList.add("free"):this.div.addEventListener("keydown",to(this,fme),{signal:this._uiManager._signal});const _=ku(this,cle,document.createElement("div"));s.append(_),_.setAttribute("aria-hidden","true"),_.className="internal",_.style.clipPath=to(this,ule);const[_e,ct]=this.parentDimensions;return this.setDims(this.width*_e,this.height*ct),bindEvents(this,to(this,cle),["pointerover","pointerleave"]),this.enableEditing(),s}pointerover(){this.parent.drawLayer.addClass(to(this,Xy),"hovered")}pointerleave(){this.parent.drawLayer.removeClass(to(this,Xy),"hovered")}_moveCaret(s){switch(this.parent.unselect(this),s){case 0:case 2:Nu(this,$y,Vfe).call(this,!0);break;case 1:case 3:Nu(this,$y,Vfe).call(this,!1)}}select(){var s,_;super.select(),to(this,Xy)&&((s=this.parent)==null||s.drawLayer.removeClass(to(this,Xy),"hovered"),(_=this.parent)==null||_.drawLayer.addClass(to(this,Xy),"selected"))}unselect(){var s;super.unselect(),to(this,Xy)&&((s=this.parent)==null||s.drawLayer.removeClass(to(this,Xy),"selected"),to(this,Ww)||Nu(this,$y,Vfe).call(this,!1))}get _mustFixPosition(){return!to(this,Ww)}show(s=this._isVisible){super.show(s),this.parent&&(this.parent.drawLayer.show(to(this,I0),s),this.parent.drawLayer.show(to(this,Xy),s))}static startHighlighting(s,_,{target:_e,x:ct,y:Mt}){const{x:Ft,y:Ut,width:Xt,height:Kt}=_e.getBoundingClientRect(),nr=yr=>{Nu(this,nC,nye).call(this,s,yr)},rr=s._signal,or={capture:!0,passive:!1,signal:rr},hr=yr=>{yr.preventDefault(),yr.stopPropagation()},fr=yr=>{_e.removeEventListener("pointermove",nr),window.removeEventListener("blur",fr),window.removeEventListener("pointerup",fr),window.removeEventListener("pointerdown",hr,or),window.removeEventListener("contextmenu",noContextMenu),Nu(this,nC,aye).call(this,s,yr)};window.addEventListener("blur",fr,{signal:rr}),window.addEventListener("pointerup",fr,{signal:rr}),window.addEventListener("pointerdown",hr,or),window.addEventListener("contextmenu",noContextMenu,{signal:rr}),_e.addEventListener("pointermove",nr,{signal:rr}),this._freeHighlight=new FreeOutliner({x:ct,y:Mt},[Ft,Ut,Xt,Kt],s.scale,this._defaultThickness/2,_,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=s.drawLayer.highlight(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static deserialize(s,_,_e){var fr;const ct=super.deserialize(s,_,_e),{rect:[Mt,Ft,Ut,Xt],color:Kt,quadPoints:nr}=s;ct.color=Util.makeHexColor(...Kt),ku(ct,dle,s.opacity);const[rr,or]=ct.pageDimensions;ct.width=(Ut-Mt)/rr,ct.height=(Xt-Ft)/or;const hr=ku(ct,rG,[]);for(let yr=0;yr<nr.length;yr+=8)hr.push({x:(nr[4]-Ut)/rr,y:(Xt-(1-nr[yr+5]))/or,width:(nr[yr+2]-nr[yr])/rr,height:(nr[yr+5]-nr[yr+1])/or});return Nu(fr=ct,$y,gge).call(fr),ct}serialize(s=!1){if(this.isEmpty()||s)return null;const _=this.getRect(0,0),_e=AnnotationEditor._colorManager.convert(this.color);return{annotationType:AnnotationEditorType.HIGHLIGHT,color:_e,opacity:to(this,dle),thickness:to(this,PC),quadPoints:Nu(this,$y,tye).call(this),outlines:Nu(this,$y,rye).call(this,_),pageIndex:this.pageIndex,rect:_,rotation:Nu(this,$y,Nde).call(this),structTreeParentId:this._structTreeParentId}}static canCreateNewEmptyEditor(){return!1}};hde=new WeakMap,afe=new WeakMap,rG=new WeakMap,ule=new WeakMap,fde=new WeakMap,eC=new WeakMap,ife=new WeakMap,ofe=new WeakMap,cle=new WeakMap,bC=new WeakMap,I0=new WeakMap,Ww=new WeakMap,fme=new WeakMap,mde=new WeakMap,dle=new WeakMap,Xy=new WeakMap,gde=new WeakMap,PC=new WeakMap,sfe=new WeakMap,$y=new WeakSet,gge=function(){const s=new Outliner(to(this,rG),.001);ku(this,bC,s.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=to(this,bC).box;const _=new Outliner(to(this,rG),.0025,.001,this._uiManager.direction==="ltr");ku(this,eC,_.getOutlines());const{lastPoint:_e}=to(this,eC).box;ku(this,mde,[(_e[0]-this.x)/this.width,(_e[1]-this.y)/this.height])},yge=function({highlightOutlines:s,highlightId:_,clipPathId:_e}){var Kt,nr;if(ku(this,bC,s),ku(this,eC,s.getNewOutline(to(this,PC)/2+1.5,.0025)),_>=0)ku(this,I0,_),ku(this,ule,_e),this.parent.drawLayer.finalizeLine(_,s),ku(this,Xy,this.parent.drawLayer.highlightOutline(to(this,eC)));else if(this.parent){const rr=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(to(this,I0),s),this.parent.drawLayer.updateBox(to(this,I0),Nu(Kt=Iy,nC,kle).call(Kt,to(this,bC).box,(rr-this.rotation+360)%360)),this.parent.drawLayer.updateLine(to(this,Xy),to(this,eC)),this.parent.drawLayer.updateBox(to(this,Xy),Nu(nr=Iy,nC,kle).call(nr,to(this,eC).box,rr))}const{x:ct,y:Mt,width:Ft,height:Ut}=s.box;switch(this.rotation){case 0:this.x=ct,this.y=Mt,this.width=Ft,this.height=Ut;break;case 90:{const[rr,or]=this.parentDimensions;this.x=Mt,this.y=1-ct,this.width=Ft*or/rr,this.height=Ut*rr/or;break}case 180:this.x=1-ct,this.y=1-Mt,this.width=Ft,this.height=Ut;break;case 270:{const[rr,or]=this.parentDimensions;this.x=1-Mt,this.y=ct,this.width=Ft*or/rr,this.height=Ut*rr/or;break}}const{lastPoint:Xt}=to(this,eC).box;ku(this,mde,[(Xt[0]-ct)/Ft,(Xt[1]-Mt)/Ut])},Z1e=function(s){const _=ct=>{var Mt,Ft;this.color=ct,(Mt=this.parent)==null||Mt.drawLayer.changeColor(to(this,I0),ct),(Ft=to(this,fde))==null||Ft.updateColor(ct)},_e=this.color;this.addCommands({cmd:_.bind(this,s),undo:_.bind(this,_e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(s)},!0)},Q1e=function(s){const _=to(this,PC),_e=ct=>{ku(this,PC,ct),Nu(this,$y,J1e).call(this,ct)};this.addCommands({cmd:_e.bind(this,s),undo:_e.bind(this,_),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:s},!0)},J1e=function(s){if(!to(this,Ww))return;Nu(this,$y,yge).call(this,{highlightOutlines:to(this,bC).getNewOutline(s/2)}),this.fixAndSetPosition();const[_,_e]=this.parentDimensions;this.setDims(this.width*_,this.height*_e)},vge=function(){to(this,I0)!==null&&this.parent&&(this.parent.drawLayer.remove(to(this,I0)),ku(this,I0,null),this.parent.drawLayer.remove(to(this,Xy)),ku(this,Xy,null))},Tde=function(s=this.parent){to(this,I0)===null&&({id:B0(this,I0)._,clipPathId:B0(this,ule)._}=s.drawLayer.highlight(to(this,bC),this.color,to(this,dle)),ku(this,Xy,s.drawLayer.highlightOutline(to(this,eC))),to(this,cle)&&(to(this,cle).style.clipPath=to(this,ule)))},nC=new WeakSet,kle=function({x:s,y:_,width:_e,height:ct},Mt){switch(Mt){case 90:return{x:1-_-ct,y:s,width:ct,height:_e};case 180:return{x:1-s-_e,y:1-_-ct,width:_e,height:ct};case 270:return{x:_,y:1-s-_e,width:ct,height:_e}}return{x:s,y:_,width:_e,height:ct}},eye=function(s){Iy._keyboardManager.exec(this,s)},Vfe=function(s){if(!to(this,hde))return;const _=window.getSelection();s?_.setPosition(to(this,hde),to(this,afe)):_.setPosition(to(this,ife),to(this,ofe))},Nde=function(){return to(this,Ww)?this.rotation:0},tye=function(){if(to(this,Ww))return null;const[s,_]=this.pageDimensions,_e=to(this,rG),ct=new Float32Array(8*_e.length);let Mt=0;for(const{x:Ft,y:Ut,width:Xt,height:Kt}of _e){const nr=Ft*s,rr=(1-Ut-Kt)*_;ct[Mt]=ct[Mt+4]=nr,ct[Mt+1]=ct[Mt+3]=rr,ct[Mt+2]=ct[Mt+6]=nr+Xt*s,ct[Mt+5]=ct[Mt+7]=rr+Kt*_,Mt+=8}return ct},rye=function(s){return to(this,bC).serialize(s,Nu(this,$y,Nde).call(this))},nye=function(s,_){this._freeHighlight.add(_)&&s.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},aye=function(s,_){this._freeHighlight.isEmpty()?s.drawLayer.removeFreeHighlight(this._freeHighlightId):s.createAndAddNewEditor(_,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},Ku(Iy,nC),vy(Iy,"_defaultColor",null),vy(Iy,"_defaultOpacity",1),vy(Iy,"_defaultThickness",12),vy(Iy,"_l10nPromise"),vy(Iy,"_type","highlight"),vy(Iy,"_editorType",AnnotationEditorType.HIGHLIGHT),vy(Iy,"_freeHighlightId",-1),vy(Iy,"_freeHighlight",null),vy(Iy,"_freeHighlightClipId","");let HighlightEditor=Iy;var ple,hle,lfe,ufe,cfe,fle,DC,f8,tC,mle,gle,m8,yle,vle,nG,Um,iye,oye,sye,lye,bge,uye,xge,cye,dye,pye,hye,fye,mG,wge,Ufe,Wfe,Tle,Ege,Hfe,I8,mye,Sge,gye,yye,$ge,Gfe,Rde;const Fy=class Fy extends AnnotationEditor{constructor(s){super({...s,name:"inkEditor"});Ku(this,Um);Ku(this,ple,0);Ku(this,hle,0);Ku(this,lfe,this.canvasPointermove.bind(this));Ku(this,ufe,this.canvasPointerleave.bind(this));Ku(this,cfe,this.canvasPointerup.bind(this));Ku(this,fle,this.canvasPointerdown.bind(this));Ku(this,DC,null);Ku(this,f8,new Path2D);Ku(this,tC,!1);Ku(this,mle,!1);Ku(this,gle,!1);Ku(this,m8,null);Ku(this,yle,0);Ku(this,vle,0);Ku(this,nG,null);this.color=s.color||null,this.thickness=s.thickness||null,this.opacity=s.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(s,_){AnnotationEditor.initialize(s,_)}static updateDefaultParams(s,_){switch(s){case AnnotationEditorParamsType.INK_THICKNESS:Fy._defaultThickness=_;break;case AnnotationEditorParamsType.INK_COLOR:Fy._defaultColor=_;break;case AnnotationEditorParamsType.INK_OPACITY:Fy._defaultOpacity=_/100}}updateParams(s,_){switch(s){case AnnotationEditorParamsType.INK_THICKNESS:Nu(this,Um,iye).call(this,_);break;case AnnotationEditorParamsType.INK_COLOR:Nu(this,Um,oye).call(this,_);break;case AnnotationEditorParamsType.INK_OPACITY:Nu(this,Um,sye).call(this,_)}}static get defaultPropertiesToUpdate(){return[[AnnotationEditorParamsType.INK_THICKNESS,Fy._defaultThickness],[AnnotationEditorParamsType.INK_COLOR,Fy._defaultColor||AnnotationEditor._defaultLineColor],[AnnotationEditorParamsType.INK_OPACITY,Math.round(100*Fy._defaultOpacity)]]}get propertiesToUpdate(){return[[AnnotationEditorParamsType.INK_THICKNESS,this.thickness||Fy._defaultThickness],[AnnotationEditorParamsType.INK_COLOR,this.color||Fy._defaultColor||AnnotationEditor._defaultLineColor],[AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??Fy._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(Nu(this,Um,Ufe).call(this),Nu(this,Um,Wfe).call(this)),this.isAttachedToDOM||(this.parent.add(this),Nu(this,Um,Tle).call(this)),Nu(this,Um,Rde).call(this)))}remove(){var s;this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,to(this,DC)&&(clearTimeout(to(this,DC)),ku(this,DC,null)),(s=to(this,m8))==null||s.disconnect(),ku(this,m8,null),super.remove())}setParent(s){!this.parent&&s?this._uiManager.removeShouldRescale(this):this.parent&&s===null&&this._uiManager.addShouldRescale(this),super.setParent(s)}onScaleChanging(){const[s,_]=this.parentDimensions,_e=this.width*s,ct=this.height*_;this.setDimensions(_e,ct)}enableEditMode(){to(this,tC)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",to(this,fle),{signal:this._uiManager._signal}))}disableEditMode(){this.isInEditMode()&&this.canvas!==null&&(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",to(this,fle)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){to(this,tC)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),ku(this,tC,!0),this.div.classList.add("disabled"),Nu(this,Um,Rde).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(s){this._focusEventsAllowed&&(super.focusin(s),this.enableEditMode())}canvasPointerdown(s){s.button===0&&this.isInEditMode()&&!to(this,tC)&&(this.setInForeground(),s.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),Nu(this,Um,uye).call(this,s.offsetX,s.offsetY))}canvasPointermove(s){s.preventDefault(),Nu(this,Um,xge).call(this,s.offsetX,s.offsetY)}canvasPointerup(s){s.preventDefault(),Nu(this,Um,wge).call(this,s)}canvasPointerleave(s){Nu(this,Um,wge).call(this,s)}get isResizable(){return!this.isEmpty()&&to(this,tC)}render(){if(this.div)return this.div;let s,_;this.width&&(s=this.x,_=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[_e,ct,Mt,Ft]=Nu(this,Um,lye).call(this);if(this.setAt(_e,ct,0,0),this.setDims(Mt,Ft),Nu(this,Um,Ufe).call(this),this.width){const[Ut,Xt]=this.parentDimensions;this.setAspectRatio(this.width*Ut,this.height*Xt),this.setAt(s*Ut,_*Xt,this.width*Ut,this.height*Xt),ku(this,gle,!0),Nu(this,Um,Tle).call(this),this.setDims(this.width*Ut,this.height*Xt),Nu(this,Um,mG).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return Nu(this,Um,Wfe).call(this),this.div}setDimensions(s,_){const _e=Math.round(s),ct=Math.round(_);if(to(this,yle)===_e&&to(this,vle)===ct)return;ku(this,yle,_e),ku(this,vle,ct),this.canvas.style.visibility="hidden";const[Mt,Ft]=this.parentDimensions;this.width=s/Mt,this.height=_/Ft,this.fixAndSetPosition(),to(this,tC)&&Nu(this,Um,Ege).call(this,s,_),Nu(this,Um,Tle).call(this),Nu(this,Um,mG).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(s,_,_e){var yr,Lr,Br;if(s instanceof InkAnnotationElement)return null;const ct=super.deserialize(s,_,_e);ct.thickness=s.thickness,ct.color=Util.makeHexColor(...s.color),ct.opacity=s.opacity;const[Mt,Ft]=ct.pageDimensions,Ut=ct.width*Mt,Xt=ct.height*Ft,Kt=ct.parentScale,nr=s.thickness/2;ku(ct,tC,!0),ku(ct,yle,Math.round(Ut)),ku(ct,vle,Math.round(Xt));const{paths:rr,rect:or,rotation:hr}=s;for(let{bezier:Vr}of rr){Vr=Nu(yr=Fy,I8,gye).call(yr,Vr,or,hr);const Wr=[];ct.paths.push(Wr);let ro=Kt*(Vr[0]-nr),no=Kt*(Vr[1]-nr);for(let ko=2,To=Vr.length;ko<To;ko+=6){const oo=Kt*(Vr[ko]-nr),No=Kt*(Vr[ko+1]-nr),As=Kt*(Vr[ko+2]-nr),Ks=Kt*(Vr[ko+3]-nr),vu=Kt*(Vr[ko+4]-nr),Fu=Kt*(Vr[ko+5]-nr);Wr.push([[ro,no],[oo,No],[As,Ks],[vu,Fu]]),ro=vu,no=Fu}const so=Nu(this,I8,mye).call(this,Wr);ct.bezierPath2D.push(so)}const fr=Nu(Lr=ct,Um,$ge).call(Lr);return ku(ct,hle,Math.max(AnnotationEditor.MIN_SIZE,fr[2]-fr[0])),ku(ct,ple,Math.max(AnnotationEditor.MIN_SIZE,fr[3]-fr[1])),Nu(Br=ct,Um,Ege).call(Br,Ut,Xt),ct}serialize(){if(this.isEmpty())return null;const s=this.getRect(0,0),_=AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:AnnotationEditorType.INK,color:_,thickness:this.thickness,opacity:this.opacity,paths:Nu(this,Um,yye).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,s),pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};ple=new WeakMap,hle=new WeakMap,lfe=new WeakMap,ufe=new WeakMap,cfe=new WeakMap,fle=new WeakMap,DC=new WeakMap,f8=new WeakMap,tC=new WeakMap,mle=new WeakMap,gle=new WeakMap,m8=new WeakMap,yle=new WeakMap,vle=new WeakMap,nG=new WeakMap,Um=new WeakSet,iye=function(s){const _=ct=>{this.thickness=ct,Nu(this,Um,Rde).call(this)},_e=this.thickness;this.addCommands({cmd:_.bind(this,s),undo:_.bind(this,_e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},oye=function(s){const _=ct=>{this.color=ct,Nu(this,Um,mG).call(this)},_e=this.color;this.addCommands({cmd:_.bind(this,s),undo:_.bind(this,_e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},sye=function(s){const _=ct=>{this.opacity=ct,Nu(this,Um,mG).call(this)};s/=100;const _e=this.opacity;this.addCommands({cmd:_.bind(this,s),undo:_.bind(this,_e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},lye=function(){const{parentRotation:s,parentDimensions:[_,_e]}=this;switch(s){case 90:return[0,_e,_e,_];case 180:return[_,_e,_,_e];case 270:return[_,0,_e,_];default:return[0,0,_,_e]}},bge=function(){const{ctx:s,color:_,opacity:_e,thickness:ct,parentScale:Mt,scaleFactor:Ft}=this;s.lineWidth=ct*Mt/Ft,s.lineCap="round",s.lineJoin="round",s.miterLimit=10,s.strokeStyle=`${_}${opacityToHex(_e)}`},uye=function(s,_){const _e=this._uiManager._signal;this.canvas.addEventListener("contextmenu",noContextMenu,{signal:_e}),this.canvas.addEventListener("pointerleave",to(this,ufe),{signal:_e}),this.canvas.addEventListener("pointermove",to(this,lfe),{signal:_e}),this.canvas.addEventListener("pointerup",to(this,cfe),{signal:_e}),this.canvas.removeEventListener("pointerdown",to(this,fle)),this.isEditing=!0,to(this,gle)||(ku(this,gle,!0),Nu(this,Um,Tle).call(this),this.thickness||(this.thickness=Fy._defaultThickness),this.color||(this.color=Fy._defaultColor||AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=Fy._defaultOpacity)),this.currentPath.push([s,_]),ku(this,mle,!1),Nu(this,Um,bge).call(this),ku(this,nG,()=>{Nu(this,Um,pye).call(this),to(this,nG)&&window.requestAnimationFrame(to(this,nG))}),window.requestAnimationFrame(to(this,nG))},xge=function(s,_){const[_e,ct]=this.currentPath.at(-1);if(this.currentPath.length>1&&s===_e&&_===ct)return;const Mt=this.currentPath;let Ft=to(this,f8);if(Mt.push([s,_]),ku(this,mle,!0),Mt.length<=2)return Ft.moveTo(...Mt[0]),void Ft.lineTo(s,_);Mt.length===3&&(ku(this,f8,Ft=new Path2D),Ft.moveTo(...Mt[0])),Nu(this,Um,hye).call(this,Ft,...Mt.at(-3),...Mt.at(-2),s,_)},cye=function(){if(this.currentPath.length===0)return;const s=this.currentPath.at(-1);to(this,f8).lineTo(...s)},dye=function(s,_){let _e;if(ku(this,nG,null),s=Math.min(Math.max(s,0),this.canvas.width),_=Math.min(Math.max(_,0),this.canvas.height),Nu(this,Um,xge).call(this,s,_),Nu(this,Um,cye).call(this),this.currentPath.length!==1)_e=Nu(this,Um,fye).call(this);else{const Ft=[s,_];_e=[[Ft,Ft.slice(),Ft.slice(),Ft]]}const ct=to(this,f8),Mt=this.currentPath;this.currentPath=[],ku(this,f8,new Path2D),this.addCommands({cmd:()=>{this.allRawPaths.push(Mt),this.paths.push(_e),this.bezierPath2D.push(ct),this._uiManager.rebuild(this)},undo:()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(Nu(this,Um,Ufe).call(this),Nu(this,Um,Wfe).call(this)),Nu(this,Um,Rde).call(this))},mustExec:!0})},pye=function(){if(!to(this,mle))return;ku(this,mle,!1),Math.ceil(this.thickness*this.parentScale);const s=this.currentPath.slice(-3),_=s.map(Mt=>Mt[0]),_e=s.map(Mt=>Mt[1]);Math.min(..._),Math.max(..._),Math.min(..._e),Math.max(..._e);const{ctx:ct}=this;ct.save(),ct.clearRect(0,0,this.canvas.width,this.canvas.height);for(const Mt of this.bezierPath2D)ct.stroke(Mt);ct.stroke(to(this,f8)),ct.restore()},hye=function(s,_,_e,ct,Mt,Ft,Ut){const Xt=(_+ct)/2,Kt=(_e+Mt)/2,nr=(ct+Ft)/2,rr=(Mt+Ut)/2;s.bezierCurveTo(Xt+2*(ct-Xt)/3,Kt+2*(Mt-Kt)/3,nr+2*(ct-nr)/3,rr+2*(Mt-rr)/3,nr,rr)},fye=function(){const s=this.currentPath;if(s.length<=2)return[[s[0],s[0],s.at(-1),s.at(-1)]];const _=[];let _e,[ct,Mt]=s[0];for(_e=1;_e<s.length-2;_e++){const[or,hr]=s[_e],[fr,yr]=s[_e+1],Lr=(or+fr)/2,Br=(hr+yr)/2,Vr=[ct+2*(or-ct)/3,Mt+2*(hr-Mt)/3],Wr=[Lr+2*(or-Lr)/3,Br+2*(hr-Br)/3];_.push([[ct,Mt],Vr,Wr,[Lr,Br]]),[ct,Mt]=[Lr,Br]}const[Ft,Ut]=s[_e],[Xt,Kt]=s[_e+1],nr=[ct+2*(Ft-ct)/3,Mt+2*(Ut-Mt)/3],rr=[Xt+2*(Ft-Xt)/3,Kt+2*(Ut-Kt)/3];return _.push([[ct,Mt],nr,rr,[Xt,Kt]]),_},mG=function(){if(this.isEmpty())return void Nu(this,Um,Hfe).call(this);Nu(this,Um,bge).call(this);const{canvas:s,ctx:_}=this;_.setTransform(1,0,0,1,0,0),_.clearRect(0,0,s.width,s.height),Nu(this,Um,Hfe).call(this);for(const _e of this.bezierPath2D)_.stroke(_e)},wge=function(s){this.canvas.removeEventListener("pointerleave",to(this,ufe)),this.canvas.removeEventListener("pointermove",to(this,lfe)),this.canvas.removeEventListener("pointerup",to(this,cfe)),this.canvas.addEventListener("pointerdown",to(this,fle),{signal:this._uiManager._signal}),to(this,DC)&&clearTimeout(to(this,DC)),ku(this,DC,setTimeout(()=>{ku(this,DC,null),this.canvas.removeEventListener("contextmenu",noContextMenu)},10)),Nu(this,Um,dye).call(this,s.offsetX,s.offsetY),this.addToAnnotationStorage(),this.setInBackground()},Ufe=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},Wfe=function(){ku(this,m8,new ResizeObserver(s=>{const _=s[0].contentRect;_.width&&_.height&&this.setDimensions(_.width,_.height)})),to(this,m8).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var s;(s=to(this,m8))==null||s.disconnect(),ku(this,m8,null)},{once:!0})},Tle=function(){if(!to(this,gle))return;const[s,_]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*s),this.canvas.height=Math.ceil(this.height*_),Nu(this,Um,Hfe).call(this)},Ege=function(s,_){const _e=Nu(this,Um,Gfe).call(this),ct=(s-_e)/to(this,hle),Mt=(_-_e)/to(this,ple);this.scaleFactor=Math.min(ct,Mt)},Hfe=function(){const s=Nu(this,Um,Gfe).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+s,this.translationY*this.scaleFactor+s)},I8=new WeakSet,mye=function(s){const _=new Path2D;for(let _e=0,ct=s.length;_e<ct;_e++){const[Mt,Ft,Ut,Xt]=s[_e];_e===0&&_.moveTo(...Mt),_.bezierCurveTo(Ft[0],Ft[1],Ut[0],Ut[1],Xt[0],Xt[1])}return _},Sge=function(s,_,_e){const[ct,Mt,Ft,Ut]=_;switch(_e){case 0:for(let Xt=0,Kt=s.length;Xt<Kt;Xt+=2)s[Xt]+=ct,s[Xt+1]=Ut-s[Xt+1];break;case 90:for(let Xt=0,Kt=s.length;Xt<Kt;Xt+=2){const nr=s[Xt];s[Xt]=s[Xt+1]+ct,s[Xt+1]=nr+Mt}break;case 180:for(let Xt=0,Kt=s.length;Xt<Kt;Xt+=2)s[Xt]=Ft-s[Xt],s[Xt+1]+=Mt;break;case 270:for(let Xt=0,Kt=s.length;Xt<Kt;Xt+=2){const nr=s[Xt];s[Xt]=Ft-s[Xt+1],s[Xt+1]=Ut-nr}break;default:throw new Error("Invalid rotation")}return s},gye=function(s,_,_e){const[ct,Mt,Ft,Ut]=_;switch(_e){case 0:for(let Xt=0,Kt=s.length;Xt<Kt;Xt+=2)s[Xt]-=ct,s[Xt+1]=Ut-s[Xt+1];break;case 90:for(let Xt=0,Kt=s.length;Xt<Kt;Xt+=2){const nr=s[Xt];s[Xt]=s[Xt+1]-Mt,s[Xt+1]=nr-ct}break;case 180:for(let Xt=0,Kt=s.length;Xt<Kt;Xt+=2)s[Xt]=Ft-s[Xt],s[Xt+1]-=Mt;break;case 270:for(let Xt=0,Kt=s.length;Xt<Kt;Xt+=2){const nr=s[Xt];s[Xt]=Ut-s[Xt+1],s[Xt+1]=Ft-nr}break;default:throw new Error("Invalid rotation")}return s},yye=function(s,_,_e,ct){var Kt,nr;const Mt=[],Ft=this.thickness/2,Ut=s*_+Ft,Xt=s*_e+Ft;for(const rr of this.paths){const or=[],hr=[];for(let fr=0,yr=rr.length;fr<yr;fr++){const[Lr,Br,Vr,Wr]=rr[fr];if(Lr[0]===Wr[0]&&Lr[1]===Wr[1]&&yr===1){const Ks=s*Lr[0]+Ut,vu=s*Lr[1]+Xt;or.push(Ks,vu),hr.push(Ks,vu);break}const ro=s*Lr[0]+Ut,no=s*Lr[1]+Xt,so=s*Br[0]+Ut,ko=s*Br[1]+Xt,To=s*Vr[0]+Ut,oo=s*Vr[1]+Xt,No=s*Wr[0]+Ut,As=s*Wr[1]+Xt;fr===0&&(or.push(ro,no),hr.push(ro,no)),or.push(so,ko,To,oo,No,As),hr.push(so,ko),fr===yr-1&&hr.push(No,As)}Mt.push({bezier:Nu(Kt=Fy,I8,Sge).call(Kt,or,ct,this.rotation),points:Nu(nr=Fy,I8,Sge).call(nr,hr,ct,this.rotation)})}return Mt},$ge=function(){let s=1/0,_=-1/0,_e=1/0,ct=-1/0;for(const Mt of this.paths)for(const[Ft,Ut,Xt,Kt]of Mt){const nr=Util.bezierBoundingBox(...Ft,...Ut,...Xt,...Kt);s=Math.min(s,nr[0]),_e=Math.min(_e,nr[1]),_=Math.max(_,nr[2]),ct=Math.max(ct,nr[3])}return[s,_e,_,ct]},Gfe=function(){return to(this,tC)?Math.ceil(this.thickness*this.parentScale):0},Rde=function(s=!1){if(this.isEmpty())return;if(!to(this,tC))return void Nu(this,Um,mG).call(this);const _=Nu(this,Um,$ge).call(this),_e=Nu(this,Um,Gfe).call(this);ku(this,hle,Math.max(AnnotationEditor.MIN_SIZE,_[2]-_[0])),ku(this,ple,Math.max(AnnotationEditor.MIN_SIZE,_[3]-_[1]));const ct=Math.ceil(_e+to(this,hle)*this.scaleFactor),Mt=Math.ceil(_e+to(this,ple)*this.scaleFactor),[Ft,Ut]=this.parentDimensions;this.width=ct/Ft,this.height=Mt/Ut,this.setAspectRatio(ct,Mt);const Xt=this.translationX,Kt=this.translationY;this.translationX=-_[0],this.translationY=-_[1],Nu(this,Um,Tle).call(this),Nu(this,Um,mG).call(this),ku(this,yle,ct),ku(this,vle,Mt),this.setDims(ct,Mt);const nr=s?_e/this.scaleFactor/2:0;this.translate(Xt-this.translationX-nr,Kt-this.translationY-nr)},Ku(Fy,I8),vy(Fy,"_defaultColor",null),vy(Fy,"_defaultOpacity",1),vy(Fy,"_defaultThickness",1),vy(Fy,"_type","ink"),vy(Fy,"_editorType",AnnotationEditorType.INK);let InkEditor=Fy;var f0,g0,aG,g8,iG,yde,MC,y8,OC,xC,dfe,_y,Pde,Dde,jfe,Cge,vye,bye,_ge,Xfe,xye;const Mde=class Mde extends AnnotationEditor{constructor(s){super({...s,name:"stampEditor"});Ku(this,_y);Ku(this,f0,null);Ku(this,g0,null);Ku(this,aG,null);Ku(this,g8,null);Ku(this,iG,null);Ku(this,yde,"");Ku(this,MC,null);Ku(this,y8,null);Ku(this,OC,null);Ku(this,xC,!1);Ku(this,dfe,!1);ku(this,g8,s.bitmapUrl),ku(this,iG,s.bitmapFile)}static initialize(s,_){AnnotationEditor.initialize(s,_)}static get supportedTypes(){return shadow(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(s=>`image/${s}`))}static get supportedTypesStr(){return shadow(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(s){return this.supportedTypes.includes(s)}static paste(s,_){_.pasteEditor(AnnotationEditorType.STAMP,{bitmapFile:s.getAsFile()})}remove(){var s,_;to(this,g0)&&(ku(this,f0,null),this._uiManager.imageManager.deleteId(to(this,g0)),(s=to(this,MC))==null||s.remove(),ku(this,MC,null),(_=to(this,y8))==null||_.disconnect(),ku(this,y8,null),to(this,OC)&&(clearTimeout(to(this,OC)),ku(this,OC,null))),super.remove()}rebuild(){this.parent?(super.rebuild(),this.div!==null&&(to(this,g0)&&to(this,MC)===null&&Nu(this,_y,jfe).call(this),this.isAttachedToDOM||this.parent.add(this))):to(this,g0)&&Nu(this,_y,jfe).call(this)}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(to(this,aG)||to(this,f0)||to(this,g8)||to(this,iG)||to(this,g0))}get isResizable(){return!0}render(){if(this.div)return this.div;let s,_;if(this.width&&(s=this.x,_=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),to(this,f0)?Nu(this,_y,Cge).call(this):Nu(this,_y,jfe).call(this),this.width){const[_e,ct]=this.parentDimensions;this.setAt(s*_e,_*ct,this.width*_e,this.height*ct)}return this.div}getImageForAltText(){return to(this,MC)}static deserialize(s,_,_e){if(s instanceof StampAnnotationElement)return null;const ct=super.deserialize(s,_,_e),{rect:Mt,bitmapUrl:Ft,bitmapId:Ut,isSvg:Xt,accessibilityData:Kt}=s;Ut&&_e.imageManager.isValidId(Ut)?ku(ct,g0,Ut):ku(ct,g8,Ft),ku(ct,xC,Xt);const[nr,rr]=ct.pageDimensions;return ct.width=(Mt[2]-Mt[0])/nr,ct.height=(Mt[3]-Mt[1])/rr,Kt&&(ct.altTextData=Kt),ct}serialize(s=!1,_=null){if(this.isEmpty())return null;const _e={annotationType:AnnotationEditorType.STAMP,bitmapId:to(this,g0),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:to(this,xC),structTreeParentId:this._structTreeParentId};if(s)return _e.bitmapUrl=Nu(this,_y,Xfe).call(this,!0),_e.accessibilityData=this.altTextData,_e;const{decorative:ct,altText:Mt}=this.altTextData;if(!ct&&Mt&&(_e.accessibilityData={type:"Figure",alt:Mt}),_===null)return _e;_.stamps||(_.stamps=new Map);const Ft=to(this,xC)?(_e.rect[2]-_e.rect[0])*(_e.rect[3]-_e.rect[1]):null;if(_.stamps.has(to(this,g0))){if(to(this,xC)){const Ut=_.stamps.get(to(this,g0));Ft>Ut.area&&(Ut.area=Ft,Ut.serialized.bitmap.close(),Ut.serialized.bitmap=Nu(this,_y,Xfe).call(this,!1))}}else _.stamps.set(to(this,g0),{area:Ft,serialized:_e}),_e.bitmap=Nu(this,_y,Xfe).call(this,!1);return _e}};f0=new WeakMap,g0=new WeakMap,aG=new WeakMap,g8=new WeakMap,iG=new WeakMap,yde=new WeakMap,MC=new WeakMap,y8=new WeakMap,OC=new WeakMap,xC=new WeakMap,dfe=new WeakMap,_y=new WeakSet,Pde=function(s,_=!1){s?(ku(this,f0,s.bitmap),_||(ku(this,g0,s.id),ku(this,xC,s.isSvg)),s.file&&ku(this,yde,s.file.name),Nu(this,_y,Cge).call(this)):this.remove()},Dde=function(){ku(this,aG,null),this._uiManager.enableWaiting(!1),to(this,MC)&&this.div.focus()},jfe=function(){if(to(this,g0))return this._uiManager.enableWaiting(!0),void this._uiManager.imageManager.getFromId(to(this,g0)).then(_e=>Nu(this,_y,Pde).call(this,_e,!0)).finally(()=>Nu(this,_y,Dde).call(this));if(to(this,g8)){const _e=to(this,g8);return ku(this,g8,null),this._uiManager.enableWaiting(!0),void ku(this,aG,this._uiManager.imageManager.getFromUrl(_e).then(ct=>Nu(this,_y,Pde).call(this,ct)).finally(()=>Nu(this,_y,Dde).call(this)))}if(to(this,iG)){const _e=to(this,iG);return ku(this,iG,null),this._uiManager.enableWaiting(!0),void ku(this,aG,this._uiManager.imageManager.getFromFile(_e).then(ct=>Nu(this,_y,Pde).call(this,ct)).finally(()=>Nu(this,_y,Dde).call(this)))}const s=document.createElement("input");s.type="file",s.accept=Mde.supportedTypesStr;const _=this._uiManager._signal;ku(this,aG,new Promise(_e=>{s.addEventListener("change",async()=>{if(s.files&&s.files.length!==0){this._uiManager.enableWaiting(!0);const ct=await this._uiManager.imageManager.getFromFile(s.files[0]);Nu(this,_y,Pde).call(this,ct)}else this.remove();_e()},{signal:_}),s.addEventListener("cancel",()=>{this.remove(),_e()},{signal:_})}).finally(()=>Nu(this,_y,Dde).call(this))),s.click()},Cge=function(){const{div:s}=this;let{width:_,height:_e}=to(this,f0);const[ct,Mt]=this.pageDimensions,Ft=.75;if(this.width)_=this.width*ct,_e=this.height*Mt;else if(_>Ft*ct||_e>Ft*Mt){const nr=Math.min(Ft*ct/_,Ft*Mt/_e);_*=nr,_e*=nr}const[Ut,Xt]=this.parentDimensions;this.setDims(_*Ut/ct,_e*Xt/Mt),this._uiManager.enableWaiting(!1);const Kt=ku(this,MC,document.createElement("canvas"));s.append(Kt),s.hidden=!1,Nu(this,_y,_ge).call(this,_,_e),Nu(this,_y,xye).call(this),to(this,dfe)||(this.parent.addUndoableEditor(this),ku(this,dfe,!0)),this._reportTelemetry({action:"inserted_image"}),to(this,yde)&&Kt.setAttribute("aria-label",to(this,yde))},vye=function(s,_){var Mt;const[_e,ct]=this.parentDimensions;this.width=s/_e,this.height=_/ct,this.setDims(s,_),(Mt=this._initialOptions)!=null&&Mt.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,to(this,OC)!==null&&clearTimeout(to(this,OC)),ku(this,OC,setTimeout(()=>{ku(this,OC,null),Nu(this,_y,_ge).call(this,s,_)},200))},bye=function(s,_){const{width:_e,height:ct}=to(this,f0);let Mt=_e,Ft=ct,Ut=to(this,f0);for(;Mt>2*s||Ft>2*_;){const Xt=Mt,Kt=Ft;Mt>2*s&&(Mt=Mt>=16384?Math.floor(Mt/2)-1:Math.ceil(Mt/2)),Ft>2*_&&(Ft=Ft>=16384?Math.floor(Ft/2)-1:Math.ceil(Ft/2));const nr=new OffscreenCanvas(Mt,Ft);nr.getContext("2d").drawImage(Ut,0,0,Xt,Kt,0,0,Mt,Ft),Ut=nr.transferToImageBitmap()}return Ut},_ge=function(s,_){s=Math.ceil(s),_=Math.ceil(_);const _e=to(this,MC);if(!_e||_e.width===s&&_e.height===_)return;_e.width=s,_e.height=_;const ct=to(this,xC)?to(this,f0):Nu(this,_y,bye).call(this,s,_);if(this._uiManager.hasMLManager&&!this.hasAltText()){const Ft=new OffscreenCanvas(s,_).getContext("2d");Ft.drawImage(ct,0,0,ct.width,ct.height,0,0,s,_),this._uiManager.mlGuess({service:"image-to-text",request:{data:Ft.getImageData(0,0,s,_).data,width:s,height:_,channels:4}}).then(Ut=>{const Xt=(Ut==null?void 0:Ut.output)||"";this.parent&&Xt&&!this.hasAltText()&&(this.altTextData={altText:Xt,decorative:!1})})}const Mt=_e.getContext("2d");Mt.filter=this._uiManager.hcmFilter,Mt.drawImage(ct,0,0,ct.width,ct.height,0,0,s,_)},Xfe=function(s){if(s){if(to(this,xC)){const _e=this._uiManager.imageManager.getSvgUrl(to(this,g0));if(_e)return _e}const _=document.createElement("canvas");return{width:_.width,height:_.height}=to(this,f0),_.getContext("2d").drawImage(to(this,f0),0,0),_.toDataURL()}if(to(this,xC)){const[_,_e]=this.pageDimensions,ct=Math.round(this.width*_*PixelsPerInch.PDF_TO_CSS_UNITS),Mt=Math.round(this.height*_e*PixelsPerInch.PDF_TO_CSS_UNITS),Ft=new OffscreenCanvas(ct,Mt);return Ft.getContext("2d").drawImage(to(this,f0),0,0,to(this,f0).width,to(this,f0).height,0,0,ct,Mt),Ft.transferToImageBitmap()}return structuredClone(to(this,f0))},xye=function(){this._uiManager._signal&&(ku(this,y8,new ResizeObserver(s=>{const _=s[0].contentRect;_.width&&_.height&&Nu(this,_y,vye).call(this,_.width,_.height)})),to(this,y8).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var s;(s=to(this,y8))==null||s.disconnect(),ku(this,y8,null)},{once:!0}))},vy(Mde,"_type","stamp"),vy(Mde,"_editorType",AnnotationEditorType.STAMP);let StampEditor=Mde;var ble,vde,FC,xle,v8,b8,x8,Hw,oG,bde,xde,A0,x1,sG,y0,wye,Ige,Age,kge,qfe;const sC=class sC{constructor({uiManager:i,pageIndex:s,div:_,accessibilityManager:_e,annotationLayer:ct,drawLayer:Mt,textLayer:Ft,viewport:Ut,l10n:Xt}){Ku(this,y0);Ku(this,ble);Ku(this,vde,!1);Ku(this,FC,null);Ku(this,xle,null);Ku(this,v8,null);Ku(this,b8,null);Ku(this,x8,null);Ku(this,Hw,new Map);Ku(this,oG,!1);Ku(this,bde,!1);Ku(this,xde,!1);Ku(this,A0,null);Ku(this,x1);const Kt=[...to(sC,sG).values()];if(!sC._initialized){sC._initialized=!0;for(const nr of Kt)nr.initialize(Xt,i)}i.registerEditorTypes(Kt),ku(this,x1,i),this.pageIndex=s,this.div=_,ku(this,ble,_e),ku(this,FC,ct),this.viewport=Ut,ku(this,A0,Ft),this.drawLayer=Mt,to(this,x1).addLayer(this)}get isEmpty(){return to(this,Hw).size===0}get isInvisible(){return this.isEmpty&&to(this,x1).getMode()===AnnotationEditorType.NONE}updateToolbar(i){to(this,x1).updateToolbar(i)}updateMode(i=to(this,x1).getMode()){switch(Nu(this,y0,qfe).call(this),i){case AnnotationEditorType.NONE:return this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),void this.disableClick();case AnnotationEditorType.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case AnnotationEditorType.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:s}=this.div;for(const _ of to(sC,sG).values())s.toggle(`${_._type}Editing`,i===_._editorType);this.div.hidden=!1}hasTextLayer(i){var s;return i===((s=to(this,A0))==null?void 0:s.div)}addInkEditorIfNeeded(i){if(to(this,x1).getMode()===AnnotationEditorType.INK){if(!i){for(const s of to(this,Hw).values())if(s.isEmpty())return void s.setInBackground()}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}}setEditingState(i){to(this,x1).setEditingState(i)}addCommands(i){to(this,x1).addCommands(i)}togglePointerEvents(i=!1){this.div.classList.toggle("disabled",!i)}toggleAnnotationLayerPointerEvents(i=!1){var s;(s=to(this,FC))==null||s.div.classList.toggle("disabled",!i)}enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const i=new Set;for(const _ of to(this,Hw).values())_.enableEditing(),_.show(!0),_.annotationElementId&&(to(this,x1).removeChangedExistingAnnotation(_),i.add(_.annotationElementId));if(!to(this,FC))return;const s=to(this,FC).getEditableAnnotations();for(const _ of s){if(_.hide(),to(this,x1).isDeletedAnnotationElement(_.data.id)||i.has(_.data.id))continue;const _e=this.deserialize(_);_e&&(this.addOrRebuild(_e),_e.enableEditing())}}disable(){var _e;ku(this,xde,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const i=new Map,s=new Map;for(const ct of to(this,Hw).values())ct.disableEditing(),ct.annotationElementId&&(ct.serialize()===null?(s.set(ct.annotationElementId,ct),(_e=this.getEditableAnnotation(ct.annotationElementId))==null||_e.show(),ct.remove()):i.set(ct.annotationElementId,ct));if(to(this,FC)){const ct=to(this,FC).getEditableAnnotations();for(const Mt of ct){const{id:Ft}=Mt.data;if(to(this,x1).isDeletedAnnotationElement(Ft))continue;let Ut=s.get(Ft);Ut?(Ut.resetAnnotationElement(Mt),Ut.show(!1),Mt.show()):(Ut=i.get(Ft),Ut&&(to(this,x1).addChangedExistingAnnotation(Ut),Ut.renderAnnotationElement(Mt),Ut.show(!1)),Mt.show())}}Nu(this,y0,qfe).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:_}=this.div;for(const ct of to(sC,sG).values())_.remove(`${ct._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),ku(this,xde,!1)}getEditableAnnotation(i){var s;return((s=to(this,FC))==null?void 0:s.getEditableAnnotation(i))||null}setActiveEditor(i){to(this,x1).getActive()!==i&&to(this,x1).setActiveEditor(i)}enableTextSelection(){var i;this.div.tabIndex=-1,(i=to(this,A0))!=null&&i.div&&!to(this,b8)&&(ku(this,b8,Nu(this,y0,wye).bind(this)),to(this,A0).div.addEventListener("pointerdown",to(this,b8),{signal:to(this,x1)._signal}),to(this,A0).div.classList.add("highlighting"))}disableTextSelection(){var i;this.div.tabIndex=0,(i=to(this,A0))!=null&&i.div&&to(this,b8)&&(to(this,A0).div.removeEventListener("pointerdown",to(this,b8)),ku(this,b8,null),to(this,A0).div.classList.remove("highlighting"))}enableClick(){if(to(this,v8))return;const i=to(this,x1)._signal;ku(this,v8,this.pointerdown.bind(this)),ku(this,xle,this.pointerup.bind(this)),this.div.addEventListener("pointerdown",to(this,v8),{signal:i}),this.div.addEventListener("pointerup",to(this,xle),{signal:i})}disableClick(){to(this,v8)&&(this.div.removeEventListener("pointerdown",to(this,v8)),this.div.removeEventListener("pointerup",to(this,xle)),ku(this,v8,null),ku(this,xle,null))}attach(i){to(this,Hw).set(i.id,i);const{annotationElementId:s}=i;s&&to(this,x1).isDeletedAnnotationElement(s)&&to(this,x1).removeDeletedAnnotationElement(i)}detach(i){var s;to(this,Hw).delete(i.id),(s=to(this,ble))==null||s.removePointerInTextLayer(i.contentDiv),!to(this,xde)&&i.annotationElementId&&to(this,x1).addDeletedAnnotationElement(i)}remove(i){this.detach(i),to(this,x1).removeEditor(i),i.div.remove(),i.isAttachedToDOM=!1,to(this,bde)||this.addInkEditorIfNeeded(!1)}changeParent(i){var s;i.parent!==this&&(i.parent&&i.annotationElementId&&(to(this,x1).addDeletedAnnotationElement(i.annotationElementId),AnnotationEditor.deleteAnnotationElement(i),i.annotationElementId=null),this.attach(i),(s=i.parent)==null||s.detach(i),i.setParent(this),i.div&&i.isAttachedToDOM&&(i.div.remove(),this.div.append(i.div)))}add(i){if(i.parent!==this||!i.isAttachedToDOM){if(this.changeParent(i),to(this,x1).addEditor(i),this.attach(i),!i.isAttachedToDOM){const s=i.render();this.div.append(s),i.isAttachedToDOM=!0}i.fixAndSetPosition(),i.onceAdded(),to(this,x1).addToAnnotationStorage(i),i._reportTelemetry(i.telemetryInitialData)}}moveEditorInDOM(i){var _;if(!i.isAttachedToDOM)return;const{activeElement:s}=document;i.div.contains(s)&&!to(this,x8)&&(i._focusEventsAllowed=!1,ku(this,x8,setTimeout(()=>{ku(this,x8,null),i.div.contains(document.activeElement)?i._focusEventsAllowed=!0:(i.div.addEventListener("focusin",()=>{i._focusEventsAllowed=!0},{once:!0,signal:to(this,x1)._signal}),s.focus())},0))),i._structTreeParentId=(_=to(this,ble))==null?void 0:_.moveElementInDOM(this.div,i.div,i.contentDiv,!0)}addOrRebuild(i){i.needsToBeRebuilt()?(i.parent||(i.parent=this),i.rebuild(),i.show()):this.add(i)}addUndoableEditor(i){this.addCommands({cmd:()=>i._uiManager.rebuild(i),undo:()=>{i.remove()},mustExec:!1})}getNextId(){return to(this,x1).getId()}get _signal(){return to(this,x1)._signal}canCreateNewEmptyEditor(){var i;return(i=to(this,y0,Ige))==null?void 0:i.canCreateNewEmptyEditor()}pasteEditor(i,s){to(this,x1).updateToolbar(i),to(this,x1).updateMode(i);const{offsetX:_,offsetY:_e}=Nu(this,y0,kge).call(this),ct=this.getNextId(),Mt=Nu(this,y0,Age).call(this,{parent:this,id:ct,x:_,y:_e,uiManager:to(this,x1),isCentered:!0,...s});Mt&&this.add(Mt)}deserialize(i){var s;return((s=to(sC,sG).get(i.annotationType??i.annotationEditorType))==null?void 0:s.deserialize(i,this,to(this,x1)))||null}createAndAddNewEditor(i,s,_={}){const _e=this.getNextId(),ct=Nu(this,y0,Age).call(this,{parent:this,id:_e,x:i.offsetX,y:i.offsetY,uiManager:to(this,x1),isCentered:s,..._});return ct&&this.add(ct),ct}addNewEditor(){this.createAndAddNewEditor(Nu(this,y0,kge).call(this),!0)}setSelected(i){to(this,x1).setSelected(i)}toggleSelected(i){to(this,x1).toggleSelected(i)}isSelected(i){return to(this,x1).isSelected(i)}unselect(i){to(this,x1).unselect(i)}pointerup(i){const{isMac:s}=util_FeatureTest.platform;i.button!==0||i.ctrlKey&&s||i.target===this.div&&to(this,oG)&&(ku(this,oG,!1),to(this,vde)?to(this,x1).getMode()!==AnnotationEditorType.STAMP?this.createAndAddNewEditor(i,!1):to(this,x1).unselectAll():ku(this,vde,!0))}pointerdown(i){if(to(this,x1).getMode()===AnnotationEditorType.HIGHLIGHT&&this.enableTextSelection(),to(this,oG))return void ku(this,oG,!1);const{isMac:s}=util_FeatureTest.platform;if(i.button!==0||i.ctrlKey&&s||i.target!==this.div)return;ku(this,oG,!0);const _=to(this,x1).getActive();ku(this,vde,!_||_.isEmpty())}findNewParent(i,s,_){const _e=to(this,x1).findParent(s,_);return _e!==null&&_e!==this&&(_e.changeParent(i),!0)}destroy(){var i,s;((i=to(this,x1).getActive())==null?void 0:i.parent)===this&&(to(this,x1).commitOrRemove(),to(this,x1).setActiveEditor(null)),to(this,x8)&&(clearTimeout(to(this,x8)),ku(this,x8,null));for(const _ of to(this,Hw).values())(s=to(this,ble))==null||s.removePointerInTextLayer(_.contentDiv),_.setParent(null),_.isAttachedToDOM=!1,_.div.remove();this.div=null,to(this,Hw).clear(),to(this,x1).removeLayer(this)}render({viewport:i}){this.viewport=i,setLayerDimensions(this.div,i);for(const s of to(this,x1).getEditors(this.pageIndex))this.add(s),s.rebuild();this.updateMode()}update({viewport:i}){to(this,x1).commitOrRemove(),Nu(this,y0,qfe).call(this);const s=this.viewport.rotation,_=i.rotation;if(this.viewport=i,setLayerDimensions(this.div,{rotation:_}),s!==_)for(const _e of to(this,Hw).values())_e.rotate(_);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:i,pageHeight:s}=this.viewport.rawDims;return[i,s]}get scale(){return to(this,x1).viewParameters.realScale}};ble=new WeakMap,vde=new WeakMap,FC=new WeakMap,xle=new WeakMap,v8=new WeakMap,b8=new WeakMap,x8=new WeakMap,Hw=new WeakMap,oG=new WeakMap,bde=new WeakMap,xde=new WeakMap,A0=new WeakMap,x1=new WeakMap,sG=new WeakMap,y0=new WeakSet,wye=function(i){if(to(this,x1).unselectAll(),i.target===to(this,A0).div){const{isMac:s}=util_FeatureTest.platform;if(i.button!==0||i.ctrlKey&&s)return;to(this,x1).showAllEditors("highlight",!0,!0),to(this,A0).div.classList.add("free"),HighlightEditor.startHighlighting(this,to(this,x1).direction==="ltr",i),to(this,A0).div.addEventListener("pointerup",()=>{to(this,A0).div.classList.remove("free")},{once:!0,signal:to(this,x1)._signal}),i.preventDefault()}},Ige=function(){return to(sC,sG).get(to(this,x1).getMode())},Age=function(i){const s=to(this,y0,Ige);return s?new s.prototype.constructor(i):null},kge=function(){const{x:i,y:s,width:_,height:_e}=this.div.getBoundingClientRect(),ct=Math.max(0,i),Mt=Math.max(0,s),Ft=(ct+Math.min(window.innerWidth,i+_))/2-i,Ut=(Mt+Math.min(window.innerHeight,s+_e))/2-s,[Xt,Kt]=this.viewport.rotation%180==0?[Ft,Ut]:[Ut,Ft];return{offsetX:Xt,offsetY:Kt}},qfe=function(){ku(this,bde,!0);for(const i of to(this,Hw).values())i.isEmpty()&&i.remove();ku(this,bde,!1)},vy(sC,"_initialized",!1),Ku(sC,sG,new Map([FreeTextEditor,InkEditor,StampEditor,HighlightEditor].map(i=>[i._editorType,i])));let AnnotationEditorLayer=sC;var LC,pfe,qy,lG,hfe,Tge,Ele,Nge,Eye;const Hv=class Hv{constructor({pageIndex:i}){Ku(this,Ele);Ku(this,LC,null);Ku(this,pfe,0);Ku(this,qy,new Map);Ku(this,lG,new Map);this.pageIndex=i}setParent(i){if(to(this,LC)){if(to(this,LC)!==i){if(to(this,qy).size>0)for(const s of to(this,qy).values())s.remove(),i.append(s);ku(this,LC,i)}}else ku(this,LC,i)}static get _svgFactory(){return shadow(this,"_svgFactory",new DOMSVGFactory)}highlight(i,s,_,_e=!1){const ct=B0(this,pfe)._++,Mt=Nu(this,Ele,Nge).call(this,i.box);Mt.classList.add("highlight"),i.free&&Mt.classList.add("free");const Ft=Hv._svgFactory.createElement("defs");Mt.append(Ft);const Ut=Hv._svgFactory.createElement("path");Ft.append(Ut);const Xt=`path_p${this.pageIndex}_${ct}`;Ut.setAttribute("id",Xt),Ut.setAttribute("d",i.toSVGPath()),_e&&to(this,lG).set(ct,Ut);const Kt=Nu(this,Ele,Eye).call(this,Ft,Xt),nr=Hv._svgFactory.createElement("use");return Mt.append(nr),Mt.setAttribute("fill",s),Mt.setAttribute("fill-opacity",_),nr.setAttribute("href",`#${Xt}`),to(this,qy).set(ct,Mt),{id:ct,clipPathId:`url(#${Kt})`}}highlightOutline(i){const s=B0(this,pfe)._++,_=Nu(this,Ele,Nge).call(this,i.box);_.classList.add("highlightOutline");const _e=Hv._svgFactory.createElement("defs");_.append(_e);const ct=Hv._svgFactory.createElement("path");_e.append(ct);const Mt=`path_p${this.pageIndex}_${s}`;let Ft;if(ct.setAttribute("id",Mt),ct.setAttribute("d",i.toSVGPath()),ct.setAttribute("vector-effect","non-scaling-stroke"),i.free){_.classList.add("free");const Kt=Hv._svgFactory.createElement("mask");_e.append(Kt),Ft=`mask_p${this.pageIndex}_${s}`,Kt.setAttribute("id",Ft),Kt.setAttribute("maskUnits","objectBoundingBox");const nr=Hv._svgFactory.createElement("rect");Kt.append(nr),nr.setAttribute("width","1"),nr.setAttribute("height","1"),nr.setAttribute("fill","white");const rr=Hv._svgFactory.createElement("use");Kt.append(rr),rr.setAttribute("href",`#${Mt}`),rr.setAttribute("stroke","none"),rr.setAttribute("fill","black"),rr.setAttribute("fill-rule","nonzero"),rr.classList.add("mask")}const Ut=Hv._svgFactory.createElement("use");_.append(Ut),Ut.setAttribute("href",`#${Mt}`),Ft&&Ut.setAttribute("mask",`url(#${Ft})`);const Xt=Ut.cloneNode();return _.append(Xt),Ut.classList.add("mainOutline"),Xt.classList.add("secondaryOutline"),to(this,qy).set(s,_),s}finalizeLine(i,s){const _=to(this,lG).get(i);to(this,lG).delete(i),this.updateBox(i,s.box),_.setAttribute("d",s.toSVGPath())}updateLine(i,s){to(this,qy).get(i).firstChild.firstChild.setAttribute("d",s.toSVGPath())}removeFreeHighlight(i){this.remove(i),to(this,lG).delete(i)}updatePath(i,s){to(this,lG).get(i).setAttribute("d",s.toSVGPath())}updateBox(i,s){var _;Nu(_=Hv,hfe,Tge).call(_,to(this,qy).get(i),s)}show(i,s){to(this,qy).get(i).classList.toggle("hidden",!s)}rotate(i,s){to(this,qy).get(i).setAttribute("data-main-rotation",s)}changeColor(i,s){to(this,qy).get(i).setAttribute("fill",s)}changeOpacity(i,s){to(this,qy).get(i).setAttribute("fill-opacity",s)}addClass(i,s){to(this,qy).get(i).classList.add(s)}removeClass(i,s){to(this,qy).get(i).classList.remove(s)}remove(i){to(this,LC)!==null&&(to(this,qy).get(i).remove(),to(this,qy).delete(i))}destroy(){ku(this,LC,null);for(const i of to(this,qy).values())i.remove();to(this,qy).clear()}};LC=new WeakMap,pfe=new WeakMap,qy=new WeakMap,lG=new WeakMap,hfe=new WeakSet,Tge=function(i,{x:s=0,y:_=0,width:_e=1,height:ct=1}={}){const{style:Mt}=i;Mt.top=100*_+"%",Mt.left=100*s+"%",Mt.width=100*_e+"%",Mt.height=100*ct+"%"},Ele=new WeakSet,Nge=function(i){var _;const s=Hv._svgFactory.create(1,1,!0);return to(this,LC).append(s),s.setAttribute("aria-hidden",!0),Nu(_=Hv,hfe,Tge).call(_,s,i),s},Eye=function(i,s){const _=Hv._svgFactory.createElement("clipPath");i.append(_);const _e=`clip_${s}`;_.setAttribute("id",_e),_.setAttribute("clipPathUnits","objectBoundingBox");const ct=Hv._svgFactory.createElement("use");return _.append(ct),ct.setAttribute("href",`#${s}`),ct.classList.add("clip"),_e},Ku(Hv,hfe);let DrawLayer=Hv;var __webpack_exports__AbortException=__webpack_exports__.AbortException,__webpack_exports__AnnotationEditorLayer=__webpack_exports__.AnnotationEditorLayer,__webpack_exports__AnnotationEditorParamsType=__webpack_exports__.AnnotationEditorParamsType,__webpack_exports__AnnotationEditorType=__webpack_exports__.AnnotationEditorType,__webpack_exports__AnnotationEditorUIManager=__webpack_exports__.AnnotationEditorUIManager,__webpack_exports__AnnotationLayer=__webpack_exports__.AnnotationLayer,__webpack_exports__AnnotationMode=__webpack_exports__.AnnotationMode,__webpack_exports__CMapCompressionType=__webpack_exports__.CMapCompressionType,__webpack_exports__ColorPicker=__webpack_exports__.ColorPicker,__webpack_exports__DOMSVGFactory=__webpack_exports__.DOMSVGFactory,__webpack_exports__DrawLayer=__webpack_exports__.DrawLayer,__webpack_exports__FeatureTest=__webpack_exports__.FeatureTest,__webpack_exports__GlobalWorkerOptions=__webpack_exports__.GlobalWorkerOptions,__webpack_exports__ImageKind=__webpack_exports__.ImageKind,__webpack_exports__InvalidPDFException=__webpack_exports__.InvalidPDFException,__webpack_exports__MissingPDFException=__webpack_exports__.MissingPDFException,__webpack_exports__OPS=__webpack_exports__.OPS,__webpack_exports__Outliner=__webpack_exports__.Outliner,__webpack_exports__PDFDataRangeTransport=__webpack_exports__.PDFDataRangeTransport,__webpack_exports__PDFDateString=__webpack_exports__.PDFDateString,__webpack_exports__PDFWorker=__webpack_exports__.PDFWorker,__webpack_exports__PasswordResponses=__webpack_exports__.PasswordResponses,__webpack_exports__PermissionFlag=__webpack_exports__.PermissionFlag,__webpack_exports__PixelsPerInch=__webpack_exports__.PixelsPerInch,__webpack_exports__RenderingCancelledException=__webpack_exports__.RenderingCancelledException,__webpack_exports__TextLayer=__webpack_exports__.TextLayer,__webpack_exports__UnexpectedResponseException=__webpack_exports__.UnexpectedResponseException,__webpack_exports__Util=__webpack_exports__.Util,__webpack_exports__VerbosityLevel=__webpack_exports__.VerbosityLevel,__webpack_exports__XfaLayer=__webpack_exports__.XfaLayer,__webpack_exports__build=__webpack_exports__.build,__webpack_exports__createValidAbsoluteUrl=__webpack_exports__.createValidAbsoluteUrl,__webpack_exports__fetchData=__webpack_exports__.fetchData,__webpack_exports__getDocument=__webpack_exports__.getDocument,__webpack_exports__getFilenameFromUrl=__webpack_exports__.getFilenameFromUrl,__webpack_exports__getPdfFilenameFromUrl=__webpack_exports__.getPdfFilenameFromUrl,__webpack_exports__getXfaPageViewport=__webpack_exports__.getXfaPageViewport,__webpack_exports__isDataScheme=__webpack_exports__.isDataScheme,__webpack_exports__isPdfFile=__webpack_exports__.isPdfFile,__webpack_exports__noContextMenu=__webpack_exports__.noContextMenu,__webpack_exports__normalizeUnicode=__webpack_exports__.normalizeUnicode,__webpack_exports__renderTextLayer=__webpack_exports__.renderTextLayer,__webpack_exports__setLayerDimensions=__webpack_exports__.setLayerDimensions,__webpack_exports__shadow=__webpack_exports__.shadow,__webpack_exports__updateTextLayer=__webpack_exports__.updateTextLayer,__webpack_exports__version=__webpack_exports__.version,pdfjs=Object.freeze({__proto__:null,AbortException:__webpack_exports__AbortException,AnnotationEditorLayer:__webpack_exports__AnnotationEditorLayer,AnnotationEditorParamsType:__webpack_exports__AnnotationEditorParamsType,AnnotationEditorType:__webpack_exports__AnnotationEditorType,AnnotationEditorUIManager:__webpack_exports__AnnotationEditorUIManager,AnnotationLayer:__webpack_exports__AnnotationLayer,AnnotationMode:__webpack_exports__AnnotationMode,CMapCompressionType:__webpack_exports__CMapCompressionType,ColorPicker:__webpack_exports__ColorPicker,DOMSVGFactory:__webpack_exports__DOMSVGFactory,DrawLayer:__webpack_exports__DrawLayer,FeatureTest:__webpack_exports__FeatureTest,GlobalWorkerOptions:__webpack_exports__GlobalWorkerOptions,ImageKind:__webpack_exports__ImageKind,InvalidPDFException:__webpack_exports__InvalidPDFException,MissingPDFException:__webpack_exports__MissingPDFException,OPS:__webpack_exports__OPS,Outliner:__webpack_exports__Outliner,PDFDataRangeTransport:__webpack_exports__PDFDataRangeTransport,PDFDateString:__webpack_exports__PDFDateString,PDFWorker:__webpack_exports__PDFWorker,PasswordResponses:__webpack_exports__PasswordResponses,PermissionFlag:__webpack_exports__PermissionFlag,PixelsPerInch:__webpack_exports__PixelsPerInch,RenderingCancelledException:__webpack_exports__RenderingCancelledException,TextLayer:__webpack_exports__TextLayer,UnexpectedResponseException:__webpack_exports__UnexpectedResponseException,Util:__webpack_exports__Util,VerbosityLevel:__webpack_exports__VerbosityLevel,XfaLayer:__webpack_exports__XfaLayer,build:__webpack_exports__build,createValidAbsoluteUrl:__webpack_exports__createValidAbsoluteUrl,fetchData:__webpack_exports__fetchData,getDocument:__webpack_exports__getDocument,getFilenameFromUrl:__webpack_exports__getFilenameFromUrl,getPdfFilenameFromUrl:__webpack_exports__getPdfFilenameFromUrl,getXfaPageViewport:__webpack_exports__getXfaPageViewport,isDataScheme:__webpack_exports__isDataScheme,isPdfFile:__webpack_exports__isPdfFile,noContextMenu:__webpack_exports__noContextMenu,normalizeUnicode:__webpack_exports__normalizeUnicode,renderTextLayer:__webpack_exports__renderTextLayer,setLayerDimensions:__webpack_exports__setLayerDimensions,shadow:__webpack_exports__shadow,updateTextLayer:__webpack_exports__updateTextLayer,version:__webpack_exports__version}),__spreadArray=function(o,i,s){for(var _,_e=0,ct=i.length;_e<ct;_e++)!_&&_e in i||(_||(_=Array.prototype.slice.call(i,0,_e)),_[_e]=i[_e]);return o.concat(_||Array.prototype.slice.call(i))},clipboardEvents=["onCopy","onCut","onPaste"],compositionEvents=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],focusEvents=["onFocus","onBlur"],formEvents=["onInput","onInvalid","onReset","onSubmit"],imageEvents=["onLoad","onError"],keyboardEvents=["onKeyDown","onKeyPress","onKeyUp"],mediaEvents=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],mouseEvents=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],dragEvents=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],selectionEvents=["onSelect"],touchEvents=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],pointerEvents=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],uiEvents=["onScroll"],wheelEvents=["onWheel"],animationEvents=["onAnimationStart","onAnimationEnd","onAnimationIteration"],transitionEvents=["onTransitionEnd"],otherEvents=["onToggle"],changeEvents=["onChange"],allEvents=__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray([],clipboardEvents,!0),compositionEvents,!0),focusEvents,!0),formEvents,!0),imageEvents,!0),keyboardEvents,!0),mediaEvents,!0),mouseEvents,!0),dragEvents,!0),selectionEvents,!0),touchEvents,!0),pointerEvents,!0),uiEvents,!0),wheelEvents,!0),animationEvents,!0),transitionEvents,!0),changeEvents,!0),otherEvents);function makeEventProps(o,i){var s={};return allEvents.forEach(function(_){var _e=o[_];_e&&(s[_]=i?function(ct){return _e(ct,i(_))}:_e)}),s}function makeCancellablePromise(o){var i=!1;return{promise:new Promise(function(s,_){o.then(function(_e){return!i&&s(_e)}).catch(function(_e){return!i&&_(_e)})}),cancel:function(){i=!0}}}var prefix="Invariant failed";function invariant(o,i){if(!o)throw new Error(prefix)}var warning=function(){},warning_1=warning,warning$1=getDefaultExportFromCjs(warning_1),has=Object.prototype.hasOwnProperty;function find(o,i,s){for(s of o.keys())if(dequal(s,i))return s}function dequal(o,i){var s,_,_e;if(o===i)return!0;if(o&&i&&(s=o.constructor)===i.constructor){if(s===Date)return o.getTime()===i.getTime();if(s===RegExp)return o.toString()===i.toString();if(s===Array){if((_=o.length)===i.length)for(;_--&&dequal(o[_],i[_]););return _===-1}if(s===Set){if(o.size!==i.size)return!1;for(_ of o)if((_e=_)&&typeof _e=="object"&&!(_e=find(i,_e))||!i.has(_e))return!1;return!0}if(s===Map){if(o.size!==i.size)return!1;for(_ of o)if((_e=_[0])&&typeof _e=="object"&&!(_e=find(i,_e))||!dequal(_[1],i.get(_e)))return!1;return!0}if(s===ArrayBuffer)o=new Uint8Array(o),i=new Uint8Array(i);else if(s===DataView){if((_=o.byteLength)===i.byteLength)for(;_--&&o.getInt8(_)===i.getInt8(_););return _===-1}if(ArrayBuffer.isView(o)){if((_=o.byteLength)===i.byteLength)for(;_--&&o[_]===i[_];);return _===-1}if(!s||typeof o=="object"){for(s in _=0,o)if(has.call(o,s)&&++_&&!has.call(i,s)||!(s in i)||!dequal(o[s],i[s]))return!1;return Object.keys(i).length===_}}return o!=o&&i!=i}const documentContext=reactExports.createContext(null);function Message({children:o,type:i}){return jsxRuntimeExports.jsx("div",{className:`react-pdf__message react-pdf__message--${i}`,children:o})}const DEFAULT_LINK_REL="noopener noreferrer nofollow";class LinkService{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(i){this.pdfDocument=i}setViewer(i){this.pdfViewer=i}setExternalLinkRel(i){this.externalLinkRel=i}setExternalLinkTarget(i){this.externalLinkTarget=i}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return invariant(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(i){invariant(this.pdfViewer),this.pdfViewer.currentPageNumber=i}get rotation(){return 0}set rotation(i){}goToDestination(i){return new Promise(s=>{invariant(this.pdfDocument),invariant(i),typeof i=="string"?this.pdfDocument.getDestination(i).then(s):Array.isArray(i)?s(i):i.then(s)}).then(s=>{invariant(Array.isArray(s));const _=s[0];new Promise(_e=>{invariant(this.pdfDocument),_ instanceof Object?this.pdfDocument.getPageIndex(_).then(ct=>{_e(ct)}).catch(()=>{invariant(!1)}):typeof _=="number"?_e(_):invariant(!1)}).then(_e=>{const ct=_e+1;invariant(this.pdfViewer),invariant(ct>=1&&ct<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:s,pageIndex:_e,pageNumber:ct})})})}navigateTo(i){this.goToDestination(i)}goToPage(i){const s=i-1;invariant(this.pdfViewer),invariant(i>=1&&i<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:s,pageNumber:i})}addLinkAttributes(i,s,_){i.href=s,i.rel=this.externalLinkRel||DEFAULT_LINK_REL,i.target=_?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},isBrowser=typeof window<"u",isLocalFileSystem=isBrowser&&window.location.protocol==="file:";function isString(o){return typeof o=="string"}function isArrayBuffer(o){return o instanceof ArrayBuffer}function isBlob(o){return invariant(isBrowser),o instanceof Blob}function isDataURI(o){return isString(o)&&/^data:/.test(o)}function dataURItoByteString(o){invariant(isDataURI(o));const[i="",s=""]=o.split(",");return i.split(";").indexOf("base64")!==-1?atob(s):unescape(s)}const allowFileAccessFromFilesTip="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function displayCORSWarning(){warning$1(!isLocalFileSystem,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function displayWorkerWarning(){warning$1(!isLocalFileSystem,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function cancelRunningTask(o){o!=null&&o.cancel&&o.cancel()}function loadFromFile(o){return new Promise((i,s)=>{const _=new FileReader;_.onload=()=>{if(!_.result)return s(new Error("Error while reading a file."));i(_.result)},_.onerror=_e=>{if(!_e.target)return s(new Error("Error while reading a file."));const{error:ct}=_e.target;if(!ct)return s(new Error("Error while reading a file."));switch(ct.code){case ct.NOT_FOUND_ERR:return s(new Error("Error while reading a file: File not found."));case ct.SECURITY_ERR:return s(new Error("Error while reading a file: Security error."));case ct.ABORT_ERR:return s(new Error("Error while reading a file: Aborted."));default:return s(new Error("Error while reading a file."))}},_.readAsArrayBuffer(o)})}function reducer(o,i){switch(i.type){case"RESOLVE":return{value:i.value,error:void 0};case"REJECT":return{value:!1,error:i.error};case"RESET":return{value:void 0,error:void 0};default:return o}}function useResolver(){return reactExports.useReducer(reducer,{value:void 0,error:void 0})}var __awaiter=function(o,i,s,_){return new(s||(s=Promise))(function(_e,ct){function Mt(Xt){try{Ut(_.next(Xt))}catch(Kt){ct(Kt)}}function Ft(Xt){try{Ut(_.throw(Xt))}catch(Kt){ct(Kt)}}function Ut(Xt){var Kt;Xt.done?_e(Xt.value):(Kt=Xt.value,Kt instanceof s?Kt:new s(function(nr){nr(Kt)})).then(Mt,Ft)}Ut((_=_.apply(o,[])).next())})},__rest$1=function(o,i){var s={};for(var _ in o)Object.prototype.hasOwnProperty.call(o,_)&&i.indexOf(_)<0&&(s[_]=o[_]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function"){var _e=0;for(_=Object.getOwnPropertySymbols(o);_e<_.length;_e++)i.indexOf(_[_e])<0&&Object.prototype.propertyIsEnumerable.call(o,_[_e])&&(s[_[_e]]=o[_[_e]])}return s};const{PDFDataRangeTransport}=pdfjs,defaultOnPassword=(o,i)=>{switch(i){case PasswordResponses.NEED_PASSWORD:o(prompt("Enter the password to open this PDF file."));break;case PasswordResponses.INCORRECT_PASSWORD:o(prompt("Invalid password. Please try again."));break}};function isParameterObject(o){return typeof o=="object"&&o!==null&&("data"in o||"range"in o||"url"in o)}reactExports.forwardRef(function(o,i){var{children:s,className:_,error:_e="Failed to load PDF file.",externalLinkRel:ct,externalLinkTarget:Mt,file:Ft,inputRef:Ut,imageResourcesPath:Xt,loading:Kt="Loading PDF…",noData:nr="No PDF file specified.",onItemClick:rr,onLoadError:or,onLoadProgress:hr,onLoadSuccess:fr,onPassword:yr=defaultOnPassword,onSourceError:Lr,onSourceSuccess:Br,options:Vr,renderMode:Wr,rotate:ro}=o,no=__rest$1(o,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[so,ko]=useResolver(),{value:To,error:oo}=so,[No,As]=useResolver(),{value:Ks,error:vu}=No,Fu=reactExports.useRef(new LinkService),Ap=reactExports.useRef([]),Pp=reactExports.useRef(void 0),Lo=reactExports.useRef(void 0);Ft&&Ft!==Pp.current&&isParameterObject(Ft)&&(warning$1(!dequal(Ft,Pp.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),Pp.current=Ft),Vr&&Vr!==Lo.current&&(warning$1(!dequal(Vr,Lo.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),Lo.current=Vr);const Au=reactExports.useRef({scrollPageIntoView:Bp=>{const{dest:Em,pageNumber:Yp,pageIndex:_m=Yp-1}=Bp;if(rr)return void rr({dest:Em,pageIndex:_m,pageNumber:Yp});const Tm=Ap.current[_m];Tm?Tm.scrollIntoView():warning$1(!1,`An internal link leading to page ${Yp} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});reactExports.useImperativeHandle(i,()=>({linkService:Fu,pages:Ap,viewer:Au}),[]),reactExports.useEffect(function(){ko({type:"RESET"})},[Ft,ko]);const Mp=reactExports.useCallback(()=>__awaiter(this,void 0,void 0,function*(){if(!Ft)return null;if(typeof Ft=="string")return isDataURI(Ft)?{data:dataURItoByteString(Ft)}:(displayCORSWarning(),{url:Ft});if(Ft instanceof PDFDataRangeTransport)return{range:Ft};if(isArrayBuffer(Ft))return{data:Ft};if(isBrowser&&isBlob(Ft))return{data:yield loadFromFile(Ft)};if(invariant(typeof Ft=="object"),invariant(isParameterObject(Ft)),"url"in Ft&&typeof Ft.url=="string"){if(isDataURI(Ft.url)){const{url:Bp}=Ft,Em=__rest$1(Ft,["url"]),Yp=dataURItoByteString(Bp);return Object.assign({data:Yp},Em)}displayCORSWarning()}return Ft}),[Ft]);reactExports.useEffect(()=>{const Bp=makeCancellablePromise(Mp());return Bp.promise.then(Em=>{ko({type:"RESOLVE",value:Em})}).catch(Em=>{ko({type:"REJECT",error:Em})}),()=>{cancelRunningTask(Bp)}},[Mp,ko]),reactExports.useEffect(()=>{To!==void 0&&(To!==!1?Br&&Br():oo&&(warning$1(!1,oo.toString()),Lr&&Lr(oo)))},[To]),reactExports.useEffect(function(){As({type:"RESET"})},[As,To]),reactExports.useEffect(function(){if(!To)return;const Bp=Vr?Object.assign(Object.assign({},To),Vr):To,Em=__webpack_exports__getDocument(Bp);hr&&(Em.onProgress=hr),yr&&(Em.onPassword=yr);const Yp=Em,_m=Yp.promise.then(Tm=>{As({type:"RESOLVE",value:Tm})}).catch(Tm=>{Yp.destroyed||As({type:"REJECT",error:Tm})});return()=>{_m.finally(()=>Yp.destroy())}},[Vr,As,To]),reactExports.useEffect(()=>{Ks!==void 0&&(Ks!==!1?Ks&&(fr&&fr(Ks),Ap.current=new Array(Ks.numPages),Fu.current.setDocument(Ks)):vu&&(warning$1(!1,vu.toString()),or&&or(vu)))},[Ks]),reactExports.useEffect(function(){Fu.current.setViewer(Au.current),Fu.current.setExternalLinkRel(ct),Fu.current.setExternalLinkTarget(Mt)},[ct,Mt]);const Lp=reactExports.useCallback((Bp,Em)=>{Ap.current[Bp]=Em},[]),Op=reactExports.useCallback(Bp=>{delete Ap.current[Bp]},[]),Fp=reactExports.useMemo(()=>({imageResourcesPath:Xt,linkService:Fu.current,onItemClick:rr,pdf:Ks,registerPage:Lp,renderMode:Wr,rotate:ro,unregisterPage:Op}),[Xt,rr,Ks,Lp,Wr,ro,Op]),wm=reactExports.useMemo(()=>makeEventProps(no,()=>Ks),[no,Ks]);return jsxRuntimeExports.jsx("div",Object.assign({className:clsx("react-pdf__Document",_),ref:Ut,style:{"--scale-factor":"1"}},wm,{children:Ft?Ks==null?jsxRuntimeExports.jsx(Message,{type:"loading",children:typeof Kt=="function"?Kt():Kt}):Ks===!1?jsxRuntimeExports.jsx(Message,{type:"error",children:typeof _e=="function"?_e():_e}):jsxRuntimeExports.jsx(documentContext.Provider,{value:Fp,children:s}):jsxRuntimeExports.jsx(Message,{type:"no-data",children:typeof nr=="function"?nr():nr})}))});reactExports.createContext(null);displayWorkerWarning(),__webpack_exports__GlobalWorkerOptions.workerSrc="pdf.worker.mjs";var css_248z$1=`:root{--react-pdf-annotation-layer:1;--annotation-unfocused-field-background:url('data:image/svg+xml;charset=utf-8,<svg width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="100%" height="100%" style="fill:rgba(0,54,255,.13)"/></svg>');--input-focus-border-color:Highlight;--input-focus-outline:1px solid Canvas;--input-unfocused-border-color:transparent;--input-disabled-border-color:transparent;--input-hover-border-color:#000;--link-outline:none}@media screen and (forced-colors:active){:root{--input-focus-border-color:CanvasText;--input-unfocused-border-color:ActiveText;--input-disabled-border-color:GrayText;--input-hover-border-color:Highlight;--link-outline:1.5px solid LinkText}.annotationLayer .buttonWidgetAnnotation:is(.checkBox,.radioButton) input:required,.annotationLayer .choiceWidgetAnnotation select:required,.annotationLayer .textWidgetAnnotation :is(input,textarea):required{outline:1.5px solid selectedItem}.annotationLayer .linkAnnotation:hover{-webkit-backdrop-filter:invert(100%);backdrop-filter:invert(100%)}}.annotationLayer{left:0;pointer-events:none;position:absolute;top:0;transform-origin:0 0;z-index:3}.annotationLayer[data-main-rotation="90"] .norotate{transform:rotate(270deg) translateX(-100%)}.annotationLayer[data-main-rotation="180"] .norotate{transform:rotate(180deg) translate(-100%,-100%)}.annotationLayer[data-main-rotation="270"] .norotate{transform:rotate(90deg) translateY(-100%)}.annotationLayer canvas{height:100%;position:absolute;width:100%}.annotationLayer section{box-sizing:border-box;margin:0;pointer-events:auto;position:absolute;text-align:initial;transform-origin:0 0}.annotationLayer .linkAnnotation{outline:var(--link-outline)}.annotationLayer :is(.linkAnnotation,.buttonWidgetAnnotation.pushButton)>a{font-size:1em;height:100%;left:0;position:absolute;top:0;width:100%}.annotationLayer :is(.linkAnnotation,.buttonWidgetAnnotation.pushButton)>a:hover{background:#ff0;box-shadow:0 2px 10px #ff0;opacity:.2}.annotationLayer .textAnnotation img{cursor:pointer;height:100%;left:0;position:absolute;top:0;width:100%}.annotationLayer .buttonWidgetAnnotation:is(.checkBox,.radioButton) input,.annotationLayer .choiceWidgetAnnotation select,.annotationLayer .textWidgetAnnotation :is(input,textarea){background-image:var(--annotation-unfocused-field-background);border:2px solid var(--input-unfocused-border-color);box-sizing:border-box;font:calc(9px*var(--scale-factor)) sans-serif;height:100%;margin:0;vertical-align:top;width:100%}.annotationLayer .buttonWidgetAnnotation:is(.checkBox,.radioButton) input:required,.annotationLayer .choiceWidgetAnnotation select:required,.annotationLayer .textWidgetAnnotation :is(input,textarea):required{outline:1.5px solid red}.annotationLayer .choiceWidgetAnnotation select option{padding:0}.annotationLayer .buttonWidgetAnnotation.radioButton input{border-radius:50%}.annotationLayer .textWidgetAnnotation textarea{resize:none}.annotationLayer .buttonWidgetAnnotation:is(.checkBox,.radioButton) input[disabled],.annotationLayer .choiceWidgetAnnotation select[disabled],.annotationLayer .textWidgetAnnotation :is(input,textarea)[disabled]{background:none;border:2px solid var(--input-disabled-border-color);cursor:not-allowed}.annotationLayer .buttonWidgetAnnotation:is(.checkBox,.radioButton) input:hover,.annotationLayer .choiceWidgetAnnotation select:hover,.annotationLayer .textWidgetAnnotation :is(input,textarea):hover{border:2px solid var(--input-hover-border-color)}.annotationLayer .buttonWidgetAnnotation.checkBox input:hover,.annotationLayer .choiceWidgetAnnotation select:hover,.annotationLayer .textWidgetAnnotation :is(input,textarea):hover{border-radius:2px}.annotationLayer .choiceWidgetAnnotation select:focus,.annotationLayer .textWidgetAnnotation :is(input,textarea):focus{background:none;border:2px solid var(--input-focus-border-color);border-radius:2px;outline:var(--input-focus-outline)}.annotationLayer .buttonWidgetAnnotation:is(.checkBox,.radioButton) :focus{background-color:transparent;background-image:none}.annotationLayer .buttonWidgetAnnotation.checkBox :focus{border:2px solid var(--input-focus-border-color);border-radius:2px;outline:var(--input-focus-outline)}.annotationLayer .buttonWidgetAnnotation.radioButton :focus{border:2px solid var(--input-focus-border-color);outline:var(--input-focus-outline)}.annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after,.annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before,.annotationLayer .buttonWidgetAnnotation.radioButton input:checked:before{background-color:CanvasText;content:"";display:block;position:absolute}.annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after,.annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before{height:80%;left:45%;width:1px}.annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before{transform:rotate(45deg)}.annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after{transform:rotate(-45deg)}.annotationLayer .buttonWidgetAnnotation.radioButton input:checked:before{border-radius:50%;height:50%;left:30%;top:20%;width:50%}.annotationLayer .textWidgetAnnotation input.comb{font-family:monospace;padding-left:2px;padding-right:0}.annotationLayer .textWidgetAnnotation input.comb:focus{width:103%}.annotationLayer .buttonWidgetAnnotation:is(.checkBox,.radioButton) input{-webkit-appearance:none;-moz-appearance:none;appearance:none}.annotationLayer .popupTriggerArea{height:100%;width:100%}.annotationLayer .fileAttachmentAnnotation .popupTriggerArea{position:absolute}.annotationLayer .popupWrapper{font-size:calc(9px*var(--scale-factor));min-width:calc(180px*var(--scale-factor));pointer-events:none;position:absolute;width:100%}.annotationLayer .popup{word-wrap:break-word;background-color:#ff9;border-radius:calc(2px*var(--scale-factor));box-shadow:0 calc(2px*var(--scale-factor)) calc(5px*var(--scale-factor)) #888;cursor:pointer;font:message-box;margin-left:calc(5px*var(--scale-factor));max-width:calc(180px*var(--scale-factor));padding:calc(6px*var(--scale-factor));pointer-events:auto;position:absolute;white-space:normal}.annotationLayer .popup>*{font-size:calc(9px*var(--scale-factor))}.annotationLayer .popup h1{display:inline-block}.annotationLayer .popupDate{display:inline-block;margin-left:calc(5px*var(--scale-factor))}.annotationLayer .popupContent{border-top:1px solid #333;margin-top:calc(2px*var(--scale-factor));padding-top:calc(2px*var(--scale-factor))}.annotationLayer .richText>*{font-size:calc(9px*var(--scale-factor));white-space:pre-wrap}.annotationLayer .caretAnnotation,.annotationLayer .circleAnnotation svg ellipse,.annotationLayer .fileAttachmentAnnotation,.annotationLayer .freeTextAnnotation,.annotationLayer .highlightAnnotation,.annotationLayer .inkAnnotation svg polyline,.annotationLayer .lineAnnotation svg line,.annotationLayer .polygonAnnotation svg polygon,.annotationLayer .polylineAnnotation svg polyline,.annotationLayer .squareAnnotation svg rect,.annotationLayer .squigglyAnnotation,.annotationLayer .stampAnnotation,.annotationLayer .strikeoutAnnotation,.annotationLayer .underlineAnnotation{cursor:pointer}.annotationLayer section svg{height:100%;left:0;position:absolute;top:0;width:100%}.annotationLayer .annotationTextContent{color:transparent;height:100%;opacity:0;pointer-events:none;position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:100%}.annotationLayer .annotationTextContent span{display:inline-block;width:100%}`;styleInject(css_248z$1,{insertAt:"top"});var css_248z=':root{--react-pdf-text-layer:1;--highlight-bg-color:#b400aa;--highlight-selected-bg-color:#006400}@media screen and (forced-colors:active){:root{--highlight-bg-color:Highlight;--highlight-selected-bg-color:ButtonText}}[data-main-rotation="90"]{transform:rotate(90deg) translateY(-100%)}[data-main-rotation="180"]{transform:rotate(180deg) translate(-100%,-100%)}[data-main-rotation="270"]{transform:rotate(270deg) translateX(-100%)}.textLayer{-webkit-text-size-adjust:none;-moz-text-size-adjust:none;text-size-adjust:none;forced-color-adjust:none;inset:0;line-height:1;overflow:hidden;position:absolute;text-align:initial;transform-origin:0 0;z-index:2}.textLayer :is(span,br){color:transparent;cursor:text;margin:0;position:absolute;transform-origin:0 0;white-space:pre}.textLayer span.markedContent{height:0;top:0}.textLayer .highlight{background-color:var(--highlight-bg-color);border-radius:4px;margin:-1px;padding:1px}.textLayer .highlight.appended{position:static}.textLayer .highlight.begin{border-radius:4px 0 0 4px}.textLayer .highlight.end{border-radius:0 4px 4px 0}.textLayer .highlight.middle{border-radius:0}.textLayer .highlight.selected{background-color:var(--highlight-selected-bg-color)}.textLayer br::-moz-selection{background:transparent}.textLayer br::selection{background:transparent}.textLayer .endOfContent{cursor:default;display:block;inset:100% 0 0;position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none;z-index:-1}.textLayer .endOfContent.active{top:0}.hiddenCanvasElement{display:none;height:0;left:0;position:absolute;top:0;width:0}';styleInject(css_248z,{insertAt:"top"}),__webpack_exports__GlobalWorkerOptions.workerSrc=new URL("/assets/pdf.worker.min-DGf6LXVo.mjs",import.meta.url).toString();const DialogPortal$1=$5d3850c4d0b4e6c7$export$602eac185826482c,DialogOverlay=reactExports.forwardRef(({className:o,...i},s)=>reactExports.createElement($5d3850c4d0b4e6c7$export$c6fdb837b070b4ff,{ref:s,className:cn$1("ns-fixed ns-inset-0 ns-z-50 ns-bg-black/80 ns- data-[state=open]:ns-animate-in data-[state=closed]:ns-animate-out data-[state=closed]:ns-fade-out-0 data-[state=open]:ns-fade-in-0",o),...i}));DialogOverlay.displayName=$5d3850c4d0b4e6c7$export$c6fdb837b070b4ff.displayName;const DialogContent$1=reactExports.forwardRef(({className:o,children:i,...s},_)=>reactExports.createElement(DialogPortal$1,null,reactExports.createElement(DialogOverlay,null),reactExports.createElement($5d3850c4d0b4e6c7$export$7c6e2c02157bb7d2,{ref:_,className:cn$1("ns-fixed ns-left-[50%] ns-top-[50%] ns-z-50 ns-grid ns-w-full ns-max-w-lg ns-translate-x-[-50%] ns-translate-y-[-50%] ns-gap-4 ns-border ns-border-neutral-200 ns-bg-white ns-p-6 ns-shadow-lg ns-duration-200 data-[state=open]:ns-animate-in data-[state=closed]:ns-animate-out data-[state=closed]:ns-fade-out-0 data-[state=open]:ns-fade-in-0 data-[state=closed]:ns-zoom-out-95 data-[state=open]:ns-zoom-in-95 data-[state=closed]:ns-slide-out-to-left-1/2 data-[state=closed]:ns-slide-out-to-top-[48%] data-[state=open]:ns-slide-in-from-left-1/2 data-[state=open]:ns-slide-in-from-top-[48%] sm:ns-rounded-lg dark:ns-border-neutral-800 dark:ns-bg-neutral-950",o),...s},i,reactExports.createElement($5d3850c4d0b4e6c7$export$f39c2d165cd861fe,{className:"ns-absolute ns-right-4 ns-top-4 ns-rounded-sm ns-opacity-70 ns-ring-offset-white ns-transition-opacity hover:ns-opacity-100 focus:ns-outline-none focus:ns-ring-2 focus:ns-ring-neutral-950 focus:ns-ring-offset-2 disabled:ns-pointer-events-none data-[state=open]:ns-bg-neutral-100 data-[state=open]:ns-text-neutral-500 dark:ns-ring-offset-neutral-950 dark:focus:ns-ring-neutral-300 dark:data-[state=open]:ns-bg-neutral-800 dark:data-[state=open]:ns-text-neutral-400"},reactExports.createElement("svg",{className:"ns-h-8 ns-w-8",width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},reactExports.createElement("g",{clipPath:"url(#clip0_9426_40880)"},reactExports.createElement("path",{d:"M9.16668 30.8332L30.8333 9.1665",stroke:"#08081B",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),reactExports.createElement("path",{d:"M30.8333 30.8332L9.16668 9.1665",stroke:"#08081B",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})),reactExports.createElement("defs",null,reactExports.createElement("clipPath",{id:"clip0_9426_40880"},reactExports.createElement("rect",{width:"40",height:"40",fill:"white"})))),reactExports.createElement("span",{className:"ns-sr-only"},"Close")))));DialogContent$1.displayName=$5d3850c4d0b4e6c7$export$7c6e2c02157bb7d2.displayName;const DialogTitle$1=reactExports.forwardRef(({className:o,...i},s)=>reactExports.createElement($5d3850c4d0b4e6c7$export$f99233281efd08a0,{ref:s,className:cn$1("ns-text-lg ns-font-semibold ns-leading-none ns-tracking-tight",o),...i}));DialogTitle$1.displayName=$5d3850c4d0b4e6c7$export$f99233281efd08a0.displayName;const DialogDescription$1=reactExports.forwardRef(({className:o,...i},s)=>reactExports.createElement($5d3850c4d0b4e6c7$export$393edc798c47379d,{ref:s,className:cn$1("ns-text-sm ns-text-neutral-500 dark:ns-text-neutral-400",o),...i}));DialogDescription$1.displayName=$5d3850c4d0b4e6c7$export$393edc798c47379d.displayName;function composeEventHandlers(o,i,{checkForDefaultPrevented:s=!0}={}){return function(_){if(o==null||o(_),s===!1||!_.defaultPrevented)return i==null?void 0:i(_)}}function setRef(o,i){typeof o=="function"?o(i):o!=null&&(o.current=i)}function composeRefs(...o){return i=>o.forEach(s=>setRef(s,i))}function useComposedRefs(...o){return reactExports.useCallback(composeRefs(...o),o)}function createContextScope(o,i=[]){let s=[];const _=()=>{const _e=s.map(ct=>reactExports.createContext(ct));return function(ct){const Mt=(ct==null?void 0:ct[o])||_e;return reactExports.useMemo(()=>({[`__scope${o}`]:{...ct,[o]:Mt}}),[ct,Mt])}};return _.scopeName=o,[function(_e,ct){const Mt=reactExports.createContext(ct),Ft=s.length;s=[...s,ct];const Ut=Xt=>{var fr;const{scope:Kt,children:nr,...rr}=Xt,or=((fr=Kt==null?void 0:Kt[o])==null?void 0:fr[Ft])||Mt,hr=reactExports.useMemo(()=>rr,Object.values(rr));return jsxRuntimeExports.jsx(or.Provider,{value:hr,children:nr})};return Ut.displayName=_e+"Provider",[Ut,function(Xt,Kt){var or;const nr=((or=Kt==null?void 0:Kt[o])==null?void 0:or[Ft])||Mt,rr=reactExports.useContext(nr);if(rr)return rr;if(ct!==void 0)return ct;throw new Error(`\`${Xt}\` must be used within \`${_e}\``)}]},composeContextScopes(_,...i)]}function composeContextScopes(...o){const i=o[0];if(o.length===1)return i;const s=()=>{const _=o.map(_e=>({useScope:_e(),scopeName:_e.scopeName}));return function(_e){const ct=_.reduce((Mt,{useScope:Ft,scopeName:Ut})=>({...Mt,...Ft(_e)[`__scope${Ut}`]}),{});return reactExports.useMemo(()=>({[`__scope${i.scopeName}`]:ct}),[ct])}};return s.scopeName=i.scopeName,s}var useLayoutEffect2=globalThis!=null&&globalThis.document?reactExports.useLayoutEffect:()=>{};function useStateMachine(o,i){return reactExports.useReducer((s,_)=>i[s][_]??s,o)}var Presence=o=>{const{present:i,children:s}=o,_=usePresence(i),_e=typeof s=="function"?s({present:_.isPresent}):reactExports.Children.only(s),ct=useComposedRefs(_.ref,getElementRef$1(_e));return typeof s=="function"||_.isPresent?reactExports.cloneElement(_e,{ref:ct}):null};function usePresence(o){const[i,s]=reactExports.useState(),_=reactExports.useRef({}),_e=reactExports.useRef(o),ct=reactExports.useRef("none"),Mt=o?"mounted":"unmounted",[Ft,Ut]=useStateMachine(Mt,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return reactExports.useEffect(()=>{const Xt=getAnimationName(_.current);ct.current=Ft==="mounted"?Xt:"none"},[Ft]),useLayoutEffect2(()=>{const Xt=_.current,Kt=_e.current;if(Kt!==o){const nr=ct.current,rr=getAnimationName(Xt);o?Ut("MOUNT"):rr==="none"||(Xt==null?void 0:Xt.display)==="none"?Ut("UNMOUNT"):Ut(Kt&&nr!==rr?"ANIMATION_OUT":"UNMOUNT"),_e.current=o}},[o,Ut]),useLayoutEffect2(()=>{if(i){let Xt;const Kt=i.ownerDocument.defaultView??window,nr=or=>{const hr=getAnimationName(_.current).includes(or.animationName);if(or.target===i&&hr&&(Ut("ANIMATION_END"),!_e.current)){const fr=i.style.animationFillMode;i.style.animationFillMode="forwards",Xt=Kt.setTimeout(()=>{i.style.animationFillMode==="forwards"&&(i.style.animationFillMode=fr)})}},rr=or=>{or.target===i&&(ct.current=getAnimationName(_.current))};return i.addEventListener("animationstart",rr),i.addEventListener("animationcancel",nr),i.addEventListener("animationend",nr),()=>{Kt.clearTimeout(Xt),i.removeEventListener("animationstart",rr),i.removeEventListener("animationcancel",nr),i.removeEventListener("animationend",nr)}}Ut("ANIMATION_END")},[i,Ut]),{isPresent:["mounted","unmountSuspended"].includes(Ft),ref:reactExports.useCallback(Xt=>{Xt&&(_.current=getComputedStyle(Xt)),s(Xt)},[])}}function getAnimationName(o){return(o==null?void 0:o.animationName)||"none"}function getElementRef$1(o){var _,_e;let i=(_=Object.getOwnPropertyDescriptor(o.props,"ref"))==null?void 0:_.get,s=i&&"isReactWarning"in i&&i.isReactWarning;return s?o.ref:(i=(_e=Object.getOwnPropertyDescriptor(o,"ref"))==null?void 0:_e.get,s=i&&"isReactWarning"in i&&i.isReactWarning,s?o.props.ref:o.props.ref||o.ref)}Presence.displayName="Presence";var Slot=reactExports.forwardRef((o,i)=>{const{children:s,..._}=o,_e=reactExports.Children.toArray(s),ct=_e.find(isSlottable);if(ct){const Mt=ct.props.children,Ft=_e.map(Ut=>Ut===ct?reactExports.Children.count(Mt)>1?reactExports.Children.only(null):reactExports.isValidElement(Mt)?Mt.props.children:null:Ut);return jsxRuntimeExports.jsx(SlotClone,{..._,ref:i,children:reactExports.isValidElement(Mt)?reactExports.cloneElement(Mt,void 0,Ft):null})}return jsxRuntimeExports.jsx(SlotClone,{..._,ref:i,children:s})});Slot.displayName="Slot";var SlotClone=reactExports.forwardRef((o,i)=>{const{children:s,..._}=o;if(reactExports.isValidElement(s)){const _e=getElementRef(s);return reactExports.cloneElement(s,{...mergeProps(_,s.props),ref:i?composeRefs(i,_e):_e})}return reactExports.Children.count(s)>1?reactExports.Children.only(null):null});SlotClone.displayName="SlotClone";var Slottable=({children:o})=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:o});function isSlottable(o){return reactExports.isValidElement(o)&&o.type===Slottable}function mergeProps(o,i){const s={...i};for(const _ in i){const _e=o[_],ct=i[_];/^on[A-Z]/.test(_)?_e&&ct?s[_]=(...Mt)=>{ct(...Mt),_e(...Mt)}:_e&&(s[_]=_e):_==="style"?s[_]={..._e,...ct}:_==="className"&&(s[_]=[_e,ct].filter(Boolean).join(" "))}return{...o,...s}}function getElementRef(o){var _,_e;let i=(_=Object.getOwnPropertyDescriptor(o.props,"ref"))==null?void 0:_.get,s=i&&"isReactWarning"in i&&i.isReactWarning;return s?o.ref:(i=(_e=Object.getOwnPropertyDescriptor(o,"ref"))==null?void 0:_e.get,s=i&&"isReactWarning"in i&&i.isReactWarning,s?o.props.ref:o.props.ref||o.ref)}var NODES=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Primitive=NODES.reduce((o,i)=>{const s=reactExports.forwardRef((_,_e)=>{const{asChild:ct,...Mt}=_,Ft=ct?Slot:i;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),jsxRuntimeExports.jsx(Ft,{...Mt,ref:_e})});return s.displayName=`Primitive.${i}`,{...o,[i]:s}},{}),[createTooltipContext,createTooltipScope]=createContextScope("Tooltip",[createPopperScope]),usePopperScope=createPopperScope(),PROVIDER_NAME="TooltipProvider",TOOLTIP_OPEN="tooltip.open",[TooltipProviderContextProvider,useTooltipProviderContext]=createTooltipContext(PROVIDER_NAME),TOOLTIP_NAME="Tooltip",[TooltipContextProvider,useTooltipContext]=createTooltipContext(TOOLTIP_NAME),TRIGGER_NAME="TooltipTrigger",TooltipTrigger$1=reactExports.forwardRef((o,i)=>{const{__scopeTooltip:s,..._}=o,_e=useTooltipContext(TRIGGER_NAME,s),ct=useTooltipProviderContext(TRIGGER_NAME,s),Mt=usePopperScope(s),Ft=useComposedRefs(i,reactExports.useRef(null),_e.onTriggerChange),Ut=reactExports.useRef(!1),Xt=reactExports.useRef(!1),Kt=reactExports.useCallback(()=>Ut.current=!1,[]);return reactExports.useEffect(()=>()=>document.removeEventListener("pointerup",Kt),[Kt]),jsxRuntimeExports.jsx(Anchor,{asChild:!0,...Mt,children:jsxRuntimeExports.jsx(Primitive.button,{"aria-describedby":_e.open?_e.contentId:void 0,"data-state":_e.stateAttribute,..._,ref:Ft,onPointerMove:composeEventHandlers(o.onPointerMove,nr=>{nr.pointerType!=="touch"&&(Xt.current||ct.isPointerInTransitRef.current||(_e.onTriggerEnter(),Xt.current=!0))}),onPointerLeave:composeEventHandlers(o.onPointerLeave,()=>{_e.onTriggerLeave(),Xt.current=!1}),onPointerDown:composeEventHandlers(o.onPointerDown,()=>{Ut.current=!0,document.addEventListener("pointerup",Kt,{once:!0})}),onFocus:composeEventHandlers(o.onFocus,()=>{Ut.current||_e.onOpen()}),onBlur:composeEventHandlers(o.onBlur,_e.onClose),onClick:composeEventHandlers(o.onClick,_e.onClose)})})});TooltipTrigger$1.displayName=TRIGGER_NAME;var PORTAL_NAME="TooltipPortal",[PortalProvider,usePortalContext]=createTooltipContext(PORTAL_NAME,{forceMount:void 0}),CONTENT_NAME="TooltipContent",TooltipContent$1=reactExports.forwardRef((o,i)=>{const s=usePortalContext(CONTENT_NAME,o.__scopeTooltip),{forceMount:_=s.forceMount,side:_e="top",...ct}=o,Mt=useTooltipContext(CONTENT_NAME,o.__scopeTooltip);return jsxRuntimeExports.jsx(Presence,{present:_||Mt.open,children:Mt.disableHoverableContent?jsxRuntimeExports.jsx(TooltipContentImpl,{side:_e,...ct,ref:i}):jsxRuntimeExports.jsx(TooltipContentHoverable,{side:_e,...ct,ref:i})})}),TooltipContentHoverable=reactExports.forwardRef((o,i)=>{const s=useTooltipContext(CONTENT_NAME,o.__scopeTooltip),_=useTooltipProviderContext(CONTENT_NAME,o.__scopeTooltip),_e=reactExports.useRef(null),ct=useComposedRefs(i,_e),[Mt,Ft]=reactExports.useState(null),{trigger:Ut,onClose:Xt}=s,Kt=_e.current,{onPointerInTransitChange:nr}=_,rr=reactExports.useCallback(()=>{Ft(null),nr(!1)},[nr]),or=reactExports.useCallback((hr,fr)=>{const yr=hr.currentTarget,Lr={x:hr.clientX,y:hr.clientY},Br=getHull([...getPaddedExitPoints(Lr,getExitSideFromRect(Lr,yr.getBoundingClientRect())),...getPointsFromRect(fr.getBoundingClientRect())]);Ft(Br),nr(!0)},[nr]);return reactExports.useEffect(()=>()=>rr(),[rr]),reactExports.useEffect(()=>{if(Ut&&Kt){const hr=yr=>or(yr,Kt),fr=yr=>or(yr,Ut);return Ut.addEventListener("pointerleave",hr),Kt.addEventListener("pointerleave",fr),()=>{Ut.removeEventListener("pointerleave",hr),Kt.removeEventListener("pointerleave",fr)}}},[Ut,Kt,or,rr]),reactExports.useEffect(()=>{if(Mt){const hr=fr=>{const yr=fr.target,Lr={x:fr.clientX,y:fr.clientY},Br=(Ut==null?void 0:Ut.contains(yr))||(Kt==null?void 0:Kt.contains(yr)),Vr=!isPointInPolygon(Lr,Mt);Br?rr():Vr&&(rr(),Xt())};return document.addEventListener("pointermove",hr),()=>document.removeEventListener("pointermove",hr)}},[Ut,Kt,Mt,Xt,rr]),jsxRuntimeExports.jsx(TooltipContentImpl,{...o,ref:ct})}),[VisuallyHiddenContentContextProvider,useVisuallyHiddenContentContext]=createTooltipContext(TOOLTIP_NAME,{isInside:!1}),TooltipContentImpl=reactExports.forwardRef((o,i)=>{const{__scopeTooltip:s,children:_,"aria-label":_e,onEscapeKeyDown:ct,onPointerDownOutside:Mt,...Ft}=o,Ut=useTooltipContext(CONTENT_NAME,s),Xt=usePopperScope(s),{onClose:Kt}=Ut;return reactExports.useEffect(()=>(document.addEventListener(TOOLTIP_OPEN,Kt),()=>document.removeEventListener(TOOLTIP_OPEN,Kt)),[Kt]),reactExports.useEffect(()=>{if(Ut.trigger){const nr=rr=>{const or=rr.target;or!=null&&or.contains(Ut.trigger)&&Kt()};return window.addEventListener("scroll",nr,{capture:!0}),()=>window.removeEventListener("scroll",nr,{capture:!0})}},[Ut.trigger,Kt]),jsxRuntimeExports.jsx(DismissableLayer,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:ct,onPointerDownOutside:Mt,onFocusOutside:nr=>nr.preventDefault(),onDismiss:Kt,children:jsxRuntimeExports.jsxs(Content,{"data-state":Ut.stateAttribute,...Xt,...Ft,ref:i,style:{...Ft.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[jsxRuntimeExports.jsx(Slottable,{children:_}),jsxRuntimeExports.jsx(VisuallyHiddenContentContextProvider,{scope:s,isInside:!0,children:jsxRuntimeExports.jsx(Root,{id:Ut.contentId,role:"tooltip",children:_e||_})})]})})});TooltipContent$1.displayName=CONTENT_NAME;var ARROW_NAME="TooltipArrow",TooltipArrow=reactExports.forwardRef((o,i)=>{const{__scopeTooltip:s,..._}=o,_e=usePopperScope(s);return useVisuallyHiddenContentContext(ARROW_NAME,s).isInside?null:jsxRuntimeExports.jsx(Arrow,{..._e,..._,ref:i})});function getExitSideFromRect(o,i){const s=Math.abs(i.top-o.y),_=Math.abs(i.bottom-o.y),_e=Math.abs(i.right-o.x),ct=Math.abs(i.left-o.x);switch(Math.min(s,_,_e,ct)){case ct:return"left";case _e:return"right";case s:return"top";case _:return"bottom";default:throw new Error("unreachable")}}function getPaddedExitPoints(o,i,s=5){const _=[];switch(i){case"top":_.push({x:o.x-s,y:o.y+s},{x:o.x+s,y:o.y+s});break;case"bottom":_.push({x:o.x-s,y:o.y-s},{x:o.x+s,y:o.y-s});break;case"left":_.push({x:o.x+s,y:o.y-s},{x:o.x+s,y:o.y+s});break;case"right":_.push({x:o.x-s,y:o.y-s},{x:o.x-s,y:o.y+s})}return _}function getPointsFromRect(o){const{top:i,right:s,bottom:_,left:_e}=o;return[{x:_e,y:i},{x:s,y:i},{x:s,y:_},{x:_e,y:_}]}function isPointInPolygon(o,i){const{x:s,y:_}=o;let _e=!1;for(let ct=0,Mt=i.length-1;ct<i.length;Mt=ct++){const Ft=i[ct].x,Ut=i[ct].y,Xt=i[Mt].x,Kt=i[Mt].y;Ut>_!=Kt>_&&s<(Xt-Ft)*(_-Ut)/(Kt-Ut)+Ft&&(_e=!_e)}return _e}function getHull(o){const i=o.slice();return i.sort((s,_)=>s.x<_.x?-1:s.x>_.x?1:s.y<_.y?-1:s.y>_.y?1:0),getHullPresorted(i)}function getHullPresorted(o){if(o.length<=1)return o.slice();const i=[];for(let _=0;_<o.length;_++){const _e=o[_];for(;i.length>=2;){const ct=i[i.length-1],Mt=i[i.length-2];if(!((ct.x-Mt.x)*(_e.y-Mt.y)>=(ct.y-Mt.y)*(_e.x-Mt.x)))break;i.pop()}i.push(_e)}i.pop();const s=[];for(let _=o.length-1;_>=0;_--){const _e=o[_];for(;s.length>=2;){const ct=s[s.length-1],Mt=s[s.length-2];if(!((ct.x-Mt.x)*(_e.y-Mt.y)>=(ct.y-Mt.y)*(_e.x-Mt.x)))break;s.pop()}s.push(_e)}return s.pop(),i.length===1&&s.length===1&&i[0].x===s[0].x&&i[0].y===s[0].y?i:i.concat(s)}TooltipArrow.displayName=ARROW_NAME;var Content2=TooltipContent$1;const TooltipContent=reactExports.forwardRef(({className:o,sideOffset:i=4,...s},_)=>reactExports.createElement(Content2,{ref:_,sideOffset:i,className:cn$1("ns-z-50 ns-overflow-hidden ns-rounded-md ns-border ns-border-neutral-200 ns-bg-white ns-px-3 ns-py-1.5 ns-text-sm ns-text-neutral-950 ns-shadow-md ns-animate-in ns-fade-in-0 ns-zoom-in-95 data-[state=closed]:ns-animate-out data-[state=closed]:ns-fade-out-0 data-[state=closed]:ns-zoom-out-95 data-[side=bottom]:ns-slide-in-from-top-2 data-[side=left]:ns-slide-in-from-right-2 data-[side=right]:ns-slide-in-from-left-2 data-[side=top]:ns-slide-in-from-bottom-2 dark:ns-border-neutral-800 dark:ns-bg-neutral-950 dark:ns-text-neutral-50",o),...s}));TooltipContent.displayName=Content2.displayName;var Bt=Object.defineProperty,At=Object.defineProperties,kt=Object.getOwnPropertyDescriptors,Y=Object.getOwnPropertySymbols,gt=Object.prototype.hasOwnProperty,Et=Object.prototype.propertyIsEnumerable,vt=(o,i,s)=>i in o?Bt(o,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[i]=s,St=(o,i)=>{for(var s in i||(i={}))gt.call(i,s)&&vt(o,s,i[s]);if(Y)for(var s of Y(i))Et.call(i,s)&&vt(o,s,i[s]);return o},bt=(o,i)=>At(o,kt(i)),Pt=(o,i)=>{var s={};for(var _ in o)gt.call(o,_)&&i.indexOf(_)<0&&(s[_]=o[_]);if(o!=null&&Y)for(var _ of Y(o))i.indexOf(_)<0&&Et.call(o,_)&&(s[_]=o[_]);return s};function ht(o){return[setTimeout(o,0),setTimeout(o,10),setTimeout(o,50)]}function _t(o){let i=reactExports.useRef();return reactExports.useEffect(()=>{i.current=o}),i.current}var Ot=18,wt=40,Gt=`${wt}px`,xt=["[data-lastpass-icon-root]","com-1password-button","[data-dashlanecreated]",'[style$="2147483647 !important;"]'].join(",");function Tt({containerRef:o,inputRef:i,pushPasswordManagerStrategy:s,isFocused:_}){let[_e,ct]=reactExports.useState(!1),[Mt,Ft]=reactExports.useState(!1),[Ut,Xt]=reactExports.useState(!1),Kt=reactExports.useMemo(()=>s!=="none"&&(s==="increase-width"||s==="experimental-no-flickering")&&_e&&Mt,[_e,Mt,s]),nr=reactExports.useCallback(()=>{let rr=o.current,or=i.current;if(!rr||!or||Ut||s==="none")return;let hr=rr,fr=hr.getBoundingClientRect().left+hr.offsetWidth,yr=hr.getBoundingClientRect().top+hr.offsetHeight/2,Lr=fr-Ot,Br=yr;document.querySelectorAll(xt).length===0&&document.elementFromPoint(Lr,Br)===rr||(ct(!0),Xt(!0))},[o,i,Ut,s]);return reactExports.useEffect(()=>{let rr=o.current;if(!rr||s==="none")return;function or(){let fr=window.innerWidth-rr.getBoundingClientRect().right;Ft(fr>=wt)}or();let hr=setInterval(or,1e3);return()=>{clearInterval(hr)}},[o,s]),reactExports.useEffect(()=>{let rr=_||document.activeElement===i.current;if(s==="none"||!rr)return;let or=setTimeout(nr,0),hr=setTimeout(nr,2e3),fr=setTimeout(nr,5e3),yr=setTimeout(()=>{Xt(!0)},6e3);return()=>{clearTimeout(or),clearTimeout(hr),clearTimeout(fr),clearTimeout(yr)}},[i,_,s,nr]),{hasPWMBadge:_e,willPushPWMBadge:Kt,PWM_BADGE_SPACE_WIDTH:Gt}}var jt=reactExports.createContext({}),Lt=reactExports.forwardRef((o,i)=>{var s,_,_e,ct,Mt,Ft=o,{value:Ut,onChange:Xt,maxLength:Kt,textAlign:nr="left",pattern:rr,placeholder:or,inputMode:hr="numeric",onComplete:fr,pushPasswordManagerStrategy:yr="increase-width",pasteTransformer:Lr,containerClassName:Br,noScriptCSSFallback:Vr=Nt,render:Wr,children:ro}=Ft,no=Pt(Ft,["value","onChange","maxLength","textAlign","pattern","placeholder","inputMode","onComplete","pushPasswordManagerStrategy","pasteTransformer","containerClassName","noScriptCSSFallback","render","children"]);let[so,ko]=reactExports.useState(typeof no.defaultValue=="string"?no.defaultValue:""),To=Ut??so,oo=_t(To),No=reactExports.useCallback(Am=>{Xt==null||Xt(Am),ko(Am)},[Xt]),As=reactExports.useMemo(()=>rr?typeof rr=="string"?new RegExp(rr):rr:null,[rr]),Ks=reactExports.useRef(null),vu=reactExports.useRef(null),Fu=reactExports.useRef({value:To,onChange:No,isIOS:typeof window<"u"&&((_=(s=window==null?void 0:window.CSS)==null?void 0:s.supports)==null?void 0:_.call(s,"-webkit-touch-callout","none"))}),Ap=reactExports.useRef({prev:[(_e=Ks.current)==null?void 0:_e.selectionStart,(ct=Ks.current)==null?void 0:ct.selectionEnd,(Mt=Ks.current)==null?void 0:Mt.selectionDirection]});reactExports.useImperativeHandle(i,()=>Ks.current,[]),reactExports.useEffect(()=>{let Am=Ks.current,Om=vu.current;if(!Am||!Om)return;function Hm(){if(document.activeElement!==Am)return Op(null),void wm(null);let Gm,c1=Am.selectionStart,m1=Am.selectionEnd,Sm=Am.selectionDirection,Nm=Am.maxLength,Qp=Am.value,$m=Ap.current.prev,Pm=-1,Fm=-1;if(Qp.length!==0&&c1!==null&&m1!==null){let qm=c1===m1,Lm=c1===Qp.length&&Qp.length<Nm;if(qm&&!Lm){let wy=c1;if(wy===0)Pm=0,Fm=1,Gm="forward";else if(wy===Nm)Pm=wy-1,Fm=wy,Gm="backward";else if(Nm>1&&Qp.length>1){let Ay=0;if($m[0]!==null&&$m[1]!==null){Gm=wy<$m[1]?"backward":"forward";let Oy=$m[0]===$m[1]&&$m[0]<Nm;Gm==="backward"&&!Oy&&(Ay=-1)}Pm=Ay+wy,Fm=Ay+wy+1}}Pm!==-1&&Fm!==-1&&Pm!==Fm&&Ks.current.setSelectionRange(Pm,Fm,Gm)}let Rm=Pm!==-1?Pm:c1,Dm=Fm!==-1?Fm:m1,Zm=Gm??Sm;Op(Rm),wm(Dm),Ap.current.prev=[Rm,Dm,Zm]}if(Fu.current.value!==Am.value&&Fu.current.onChange(Am.value),Ap.current.prev=[Am.selectionStart,Am.selectionEnd,Am.selectionDirection],document.addEventListener("selectionchange",Hm,{capture:!0}),Hm(),document.activeElement===Am&&Mp(!0),!document.getElementById("input-otp-style")){let Gm=document.createElement("style");if(Gm.id="input-otp-style",document.head.appendChild(Gm),Gm.sheet){let c1="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";$(Gm.sheet,"[data-input-otp]::selection { background: transparent !important; color: transparent !important; }"),$(Gm.sheet,`[data-input-otp]:autofill { ${c1} }`),$(Gm.sheet,`[data-input-otp]:-webkit-autofill { ${c1} }`),$(Gm.sheet,"@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"),$(Gm.sheet,"[data-input-otp] + * { pointer-events: all !important; }")}}let u1=()=>{Om&&Om.style.setProperty("--root-height",`${Am.clientHeight}px`)};u1();let a1=new ResizeObserver(u1);return a1.observe(Am),()=>{document.removeEventListener("selectionchange",Hm,{capture:!0}),a1.disconnect()}},[]);let[Pp,Lo]=reactExports.useState(!1),[Au,Mp]=reactExports.useState(!1),[Lp,Op]=reactExports.useState(null),[Fp,wm]=reactExports.useState(null);reactExports.useEffect(()=>{ht(()=>{var Am,Om,Hm,u1;(Am=Ks.current)==null||Am.dispatchEvent(new Event("input"));let a1=(Om=Ks.current)==null?void 0:Om.selectionStart,Gm=(Hm=Ks.current)==null?void 0:Hm.selectionEnd,c1=(u1=Ks.current)==null?void 0:u1.selectionDirection;a1!==null&&Gm!==null&&(Op(a1),wm(Gm),Ap.current.prev=[a1,Gm,c1])})},[To,Au]),reactExports.useEffect(()=>{oo!==void 0&&To!==oo&&oo.length<Kt&&To.length===Kt&&(fr==null||fr(To))},[Kt,fr,oo,To]);let Bp=Tt({containerRef:vu,inputRef:Ks,pushPasswordManagerStrategy:yr,isFocused:Au}),Em=reactExports.useCallback(Am=>{let Om=Am.currentTarget.value.slice(0,Kt);Om.length>0&&As&&!As.test(Om)?Am.preventDefault():(typeof oo=="string"&&Om.length<oo.length&&document.dispatchEvent(new Event("selectionchange")),No(Om))},[Kt,No,oo,As]),Yp=reactExports.useCallback(()=>{var Am;if(Ks.current){let Om=Math.min(Ks.current.value.length,Kt-1),Hm=Ks.current.value.length;(Am=Ks.current)==null||Am.setSelectionRange(Om,Hm),Op(Om),wm(Hm)}Mp(!0)},[Kt]),_m=reactExports.useCallback(Am=>{var Om,Hm;let u1=Ks.current;if(!(Lr||Fu.current.isIOS&&Am.clipboardData&&u1))return;let a1=Am.clipboardData.getData("text/plain"),Gm=Lr?Lr(a1):a1;console.log({_content:a1,content:Gm}),Am.preventDefault();let c1=(Om=Ks.current)==null?void 0:Om.selectionStart,m1=(Hm=Ks.current)==null?void 0:Hm.selectionEnd,Sm=(c1!==m1?To.slice(0,c1)+Gm+To.slice(m1):To.slice(0,c1)+Gm+To.slice(c1)).slice(0,Kt);if(Sm.length>0&&As&&!As.test(Sm))return;u1.value=Sm,No(Sm);let Nm=Math.min(Sm.length,Kt-1),Qp=Sm.length;u1.setSelectionRange(Nm,Qp),Op(Nm),wm(Qp)},[Kt,No,As,To]),Tm=reactExports.useMemo(()=>({position:"relative",cursor:no.disabled?"default":"text",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none"}),[no.disabled]),Im=reactExports.useMemo(()=>({position:"absolute",inset:0,width:Bp.willPushPWMBadge?`calc(100% + ${Bp.PWM_BADGE_SPACE_WIDTH})`:"100%",clipPath:Bp.willPushPWMBadge?`inset(0 ${Bp.PWM_BADGE_SPACE_WIDTH} 0 0)`:void 0,height:"100%",display:"flex",textAlign:nr,opacity:"1",color:"transparent",pointerEvents:"all",background:"transparent",caretColor:"transparent",border:"0 solid transparent",outline:"0 solid transparent",boxShadow:"none",lineHeight:"1",letterSpacing:"-.5em",fontSize:"var(--root-height)",fontFamily:"monospace",fontVariantNumeric:"tabular-nums"}),[Bp.PWM_BADGE_SPACE_WIDTH,Bp.willPushPWMBadge,nr]),Mm=reactExports.useMemo(()=>reactExports.createElement("input",bt(St({autoComplete:no.autoComplete||"one-time-code"},no),{"data-input-otp":!0,"data-input-otp-placeholder-shown":To.length===0||void 0,"data-input-otp-mss":Lp,"data-input-otp-mse":Fp,inputMode:hr,pattern:As==null?void 0:As.source,"aria-placeholder":or,style:Im,maxLength:Kt,value:To,ref:Ks,onPaste:Am=>{var Om;_m(Am),(Om=no.onPaste)==null||Om.call(no,Am)},onChange:Em,onMouseOver:Am=>{var Om;Lo(!0),(Om=no.onMouseOver)==null||Om.call(no,Am)},onMouseLeave:Am=>{var Om;Lo(!1),(Om=no.onMouseLeave)==null||Om.call(no,Am)},onFocus:Am=>{var Om;Yp(),(Om=no.onFocus)==null||Om.call(no,Am)},onBlur:Am=>{var Om;Mp(!1),(Om=no.onBlur)==null||Om.call(no,Am)}})),[Em,Yp,_m,hr,Im,Kt,Fp,Lp,no,As==null?void 0:As.source,To]),Bm=reactExports.useMemo(()=>({slots:Array.from({length:Kt}).map((Am,Om)=>{var Hm;let u1=Au&&Lp!==null&&Fp!==null&&(Lp===Fp&&Om===Lp||Om>=Lp&&Om<Fp),a1=To[Om]!==void 0?To[Om]:null;return{char:a1,placeholderChar:To[0]!==void 0?null:(Hm=or==null?void 0:or[Om])!=null?Hm:null,isActive:u1,hasFakeCaret:u1&&a1===null}}),isFocused:Au,isHovering:!no.disabled&&Pp}),[Au,Pp,Kt,Fp,Lp,no.disabled,To]),zm=reactExports.useMemo(()=>Wr?Wr(Bm):reactExports.createElement(jt.Provider,{value:Bm},ro),[ro,Bm,Wr]);return reactExports.createElement(reactExports.Fragment,null,Vr!==null&&reactExports.createElement("noscript",null,reactExports.createElement("style",null,Vr)),reactExports.createElement("div",{ref:vu,"data-input-otp-container":!0,style:Tm,className:Br},zm,reactExports.createElement("div",{style:{position:"absolute",inset:0,pointerEvents:"none"}},Mm)))});function $(o,i){try{o.insertRule(i)}catch{console.error("input-otp could not insert CSS rule:",i)}}Lt.displayName="Input";var Nt=`
[data-input-otp] {
  --nojs-bg: white !important;
  --nojs-fg: black !important;

  background-color: var(--nojs-bg) !important;
  color: var(--nojs-fg) !important;
  caret-color: var(--nojs-fg) !important;
  letter-spacing: .25em !important;
  text-align: center !important;
  border: 1px solid var(--nojs-fg) !important;
  border-radius: 4px !important;
  width: 100% !important;
}
@media (prefers-color-scheme: dark) {
  [data-input-otp] {
    --nojs-bg: black !important;
    --nojs-fg: white !important;
  }
}`;const InputOTP=reactExports.forwardRef(({className:o,containerClassName:i,...s},_)=>reactExports.createElement(Lt,{ref:_,containerClassName:cn$1("ns-flex ns-flex-col ns-gap-2 has-[:disabled]:ns-opacity-50 ns-w-fit",i),className:cn$1("disabled:ns-cursor-not-allowed",o),...s}));InputOTP.displayName="InputOTP";const InputOTPGroup=reactExports.forwardRef(({className:o,...i},s)=>reactExports.createElement("div",{ref:s,className:cn$1("ns-flex ns-items-center ns-gap-2",o),...i}));InputOTPGroup.displayName="InputOTPGroup";const InputOTPSlot=reactExports.forwardRef(({index:o,className:i,hasError:s,..._},_e)=>{const ct=reactExports.useContext(jt),{char:Mt,hasFakeCaret:Ft,isActive:Ut}=ct.slots[o];return reactExports.createElement("div",{ref:_e,className:cn$1("ns-relative ns-flex ns-h-20 ns-w-[70px] ns-items-center ns-justify-center ns-rounded-4 ns-text-3xl ns-text-black ns-font-medium ns-bg-grey-100 ns-transition-all ",Ut&&"ns-z-10 ",!!Mt&&"ns-bg-white ns-border-b-2 ns-border-solid ns-border-red-600",s&&"ns-bg-white ns-border-b-2 ns-border-solid !ns-border-yellow-900",i),..._},Mt,Ft&&reactExports.createElement("div",{className:"ns-pointer-events-none ns-absolute ns-inset-0 ns-flex ns-items-center ns-justify-center"},reactExports.createElement("div",{className:"ns-h-4 ns-w-px ns-animate-caret-blink ns-bg-neutral-950 ns-duration-1000 dark:ns-bg-neutral-50"})))});InputOTPSlot.displayName="InputOTPSlot";function resolveUrl(o,i){if(o.match(/^[a-z]+:\/\//i))return o;if(o.match(/^\/\//))return window.location.protocol+o;if(o.match(/^[a-z]+:/i))return o;const s=document.implementation.createHTMLDocument(),_=s.createElement("base"),_e=s.createElement("a");return s.head.appendChild(_),s.body.appendChild(_e),i&&(_.href=i),_e.href=o,_e.href}const uuid=(()=>{let o=0;const i=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(o+=1,`u${i()}${o}`)})();function toArray(o){const i=[];for(let s=0,_=o.length;s<_;s++)i.push(o[s]);return i}function px(o,i){const _=(o.ownerDocument.defaultView||window).getComputedStyle(o).getPropertyValue(i);return _?parseFloat(_.replace("px","")):0}function getNodeWidth(o){const i=px(o,"border-left-width"),s=px(o,"border-right-width");return o.clientWidth+i+s}function getNodeHeight(o){const i=px(o,"border-top-width"),s=px(o,"border-bottom-width");return o.clientHeight+i+s}function getImageSize(o,i={}){const s=i.width||getNodeWidth(o),_=i.height||getNodeHeight(o);return{width:s,height:_}}function getPixelRatio(){let o,i;try{i=process}catch{}const s=i&&i.env?i.env.devicePixelRatio:null;return s&&(o=parseInt(s,10),Number.isNaN(o)&&(o=1)),o||window.devicePixelRatio||1}const canvasDimensionLimit=16384;function checkCanvasDimensions(o){(o.width>canvasDimensionLimit||o.height>canvasDimensionLimit)&&(o.width>canvasDimensionLimit&&o.height>canvasDimensionLimit?o.width>o.height?(o.height*=canvasDimensionLimit/o.width,o.width=canvasDimensionLimit):(o.width*=canvasDimensionLimit/o.height,o.height=canvasDimensionLimit):o.width>canvasDimensionLimit?(o.height*=canvasDimensionLimit/o.width,o.width=canvasDimensionLimit):(o.width*=canvasDimensionLimit/o.height,o.height=canvasDimensionLimit))}function createImage(o){return new Promise((i,s)=>{const _=new Image;_.decode=()=>i(_),_.onload=()=>i(_),_.onerror=s,_.crossOrigin="anonymous",_.decoding="async",_.src=o})}async function svgToDataURL(o){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(o)).then(encodeURIComponent).then(i=>`data:image/svg+xml;charset=utf-8,${i}`)}async function nodeToDataURL(o,i,s){const _="http://www.w3.org/2000/svg",_e=document.createElementNS(_,"svg"),ct=document.createElementNS(_,"foreignObject");return _e.setAttribute("width",`${i}`),_e.setAttribute("height",`${s}`),_e.setAttribute("viewBox",`0 0 ${i} ${s}`),ct.setAttribute("width","100%"),ct.setAttribute("height","100%"),ct.setAttribute("x","0"),ct.setAttribute("y","0"),ct.setAttribute("externalResourcesRequired","true"),_e.appendChild(ct),ct.appendChild(o),svgToDataURL(_e)}const isInstanceOfElement=(o,i)=>{if(o instanceof i)return!0;const s=Object.getPrototypeOf(o);return s===null?!1:s.constructor.name===i.name||isInstanceOfElement(s,i)};function formatCSSText(o){const i=o.getPropertyValue("content");return`${o.cssText} content: '${i.replace(/'|"/g,"")}';`}function formatCSSProperties(o){return toArray(o).map(i=>{const s=o.getPropertyValue(i),_=o.getPropertyPriority(i);return`${i}: ${s}${_?" !important":""};`}).join(" ")}function getPseudoElementStyle(o,i,s){const _=`.${o}:${i}`,_e=s.cssText?formatCSSText(s):formatCSSProperties(s);return document.createTextNode(`${_}{${_e}}`)}function clonePseudoElement(o,i,s){const _=window.getComputedStyle(o,s),_e=_.getPropertyValue("content");if(_e===""||_e==="none")return;const ct=uuid();try{i.className=`${i.className} ${ct}`}catch{return}const Mt=document.createElement("style");Mt.appendChild(getPseudoElementStyle(ct,s,_)),i.appendChild(Mt)}function clonePseudoElements(o,i){clonePseudoElement(o,i,":before"),clonePseudoElement(o,i,":after")}const WOFF="application/font-woff",JPEG="image/jpeg",mimes={woff:WOFF,woff2:WOFF,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:JPEG,jpeg:JPEG,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function getExtension(o){const i=/\.([^./]*?)$/g.exec(o);return i?i[1]:""}function getMimeType(o){const i=getExtension(o).toLowerCase();return mimes[i]||""}function getContentFromDataUrl(o){return o.split(/,/)[1]}function isDataUrl(o){return o.search(/^(data:)/)!==-1}function makeDataUrl(o,i){return`data:${i};base64,${o}`}async function fetchAsDataURL(o,i,s){const _=await fetch(o,i);if(_.status===404)throw new Error(`Resource "${_.url}" not found`);const _e=await _.blob();return new Promise((ct,Mt)=>{const Ft=new FileReader;Ft.onerror=Mt,Ft.onloadend=()=>{try{ct(s({res:_,result:Ft.result}))}catch(Ut){Mt(Ut)}},Ft.readAsDataURL(_e)})}const cache={};function getCacheKey(o,i,s){let _=o.replace(/\?.*/,"");return s&&(_=o),/ttf|otf|eot|woff2?/i.test(_)&&(_=_.replace(/.*\//,"")),i?`[${i}]${_}`:_}async function resourceToDataURL(o,i,s){const _=getCacheKey(o,i,s.includeQueryParams);if(cache[_]!=null)return cache[_];s.cacheBust&&(o+=(/\?/.test(o)?"&":"?")+new Date().getTime());let _e;try{const ct=await fetchAsDataURL(o,s.fetchRequestInit,({res:Mt,result:Ft})=>(i||(i=Mt.headers.get("Content-Type")||""),getContentFromDataUrl(Ft)));_e=makeDataUrl(ct,i)}catch(ct){_e=s.imagePlaceholder||"";let Mt=`Failed to fetch resource: ${o}`;ct&&(Mt=typeof ct=="string"?ct:ct.message),Mt&&console.warn(Mt)}return cache[_]=_e,_e}async function cloneCanvasElement(o){const i=o.toDataURL();return i==="data:,"?o.cloneNode(!1):createImage(i)}async function cloneVideoElement(o,i){if(o.currentSrc){const ct=document.createElement("canvas"),Mt=ct.getContext("2d");ct.width=o.clientWidth,ct.height=o.clientHeight,Mt==null||Mt.drawImage(o,0,0,ct.width,ct.height);const Ft=ct.toDataURL();return createImage(Ft)}const s=o.poster,_=getMimeType(s),_e=await resourceToDataURL(s,_,i);return createImage(_e)}async function cloneIFrameElement(o){var i;try{if(!((i=o==null?void 0:o.contentDocument)===null||i===void 0)&&i.body)return await cloneNode(o.contentDocument.body,{},!0)}catch{}return o.cloneNode(!1)}async function cloneSingleNode(o,i){return isInstanceOfElement(o,HTMLCanvasElement)?cloneCanvasElement(o):isInstanceOfElement(o,HTMLVideoElement)?cloneVideoElement(o,i):isInstanceOfElement(o,HTMLIFrameElement)?cloneIFrameElement(o):o.cloneNode(!1)}const isSlotElement=o=>o.tagName!=null&&o.tagName.toUpperCase()==="SLOT";async function cloneChildren(o,i,s){var _,_e;let ct=[];return isSlotElement(o)&&o.assignedNodes?ct=toArray(o.assignedNodes()):isInstanceOfElement(o,HTMLIFrameElement)&&(!((_=o.contentDocument)===null||_===void 0)&&_.body)?ct=toArray(o.contentDocument.body.childNodes):ct=toArray(((_e=o.shadowRoot)!==null&&_e!==void 0?_e:o).childNodes),ct.length===0||isInstanceOfElement(o,HTMLVideoElement)||await ct.reduce((Mt,Ft)=>Mt.then(()=>cloneNode(Ft,s)).then(Ut=>{Ut&&i.appendChild(Ut)}),Promise.resolve()),i}function cloneCSSStyle(o,i){const s=i.style;if(!s)return;const _=window.getComputedStyle(o);_.cssText?(s.cssText=_.cssText,s.transformOrigin=_.transformOrigin):toArray(_).forEach(_e=>{let ct=_.getPropertyValue(_e);_e==="font-size"&&ct.endsWith("px")&&(ct=`${Math.floor(parseFloat(ct.substring(0,ct.length-2)))-.1}px`),isInstanceOfElement(o,HTMLIFrameElement)&&_e==="display"&&ct==="inline"&&(ct="block"),_e==="d"&&i.getAttribute("d")&&(ct=`path(${i.getAttribute("d")})`),s.setProperty(_e,ct,_.getPropertyPriority(_e))})}function cloneInputValue(o,i){isInstanceOfElement(o,HTMLTextAreaElement)&&(i.innerHTML=o.value),isInstanceOfElement(o,HTMLInputElement)&&i.setAttribute("value",o.value)}function cloneSelectValue(o,i){if(isInstanceOfElement(o,HTMLSelectElement)){const s=i,_=Array.from(s.children).find(_e=>o.value===_e.getAttribute("value"));_&&_.setAttribute("selected","")}}function decorate(o,i){return isInstanceOfElement(i,Element)&&(cloneCSSStyle(o,i),clonePseudoElements(o,i),cloneInputValue(o,i),cloneSelectValue(o,i)),i}async function ensureSVGSymbols(o,i){const s=o.querySelectorAll?o.querySelectorAll("use"):[];if(s.length===0)return o;const _={};for(let ct=0;ct<s.length;ct++){const Ft=s[ct].getAttribute("xlink:href");if(Ft){const Ut=o.querySelector(Ft),Xt=document.querySelector(Ft);!Ut&&Xt&&!_[Ft]&&(_[Ft]=await cloneNode(Xt,i,!0))}}const _e=Object.values(_);if(_e.length){const ct="http://www.w3.org/1999/xhtml",Mt=document.createElementNS(ct,"svg");Mt.setAttribute("xmlns",ct),Mt.style.position="absolute",Mt.style.width="0",Mt.style.height="0",Mt.style.overflow="hidden",Mt.style.display="none";const Ft=document.createElementNS(ct,"defs");Mt.appendChild(Ft);for(let Ut=0;Ut<_e.length;Ut++)Ft.appendChild(_e[Ut]);o.appendChild(Mt)}return o}async function cloneNode(o,i,s){return!s&&i.filter&&!i.filter(o)?null:Promise.resolve(o).then(_=>cloneSingleNode(_,i)).then(_=>cloneChildren(o,_,i)).then(_=>decorate(o,_)).then(_=>ensureSVGSymbols(_,i))}const URL_REGEX=/url\((['"]?)([^'"]+?)\1\)/g,URL_WITH_FORMAT_REGEX=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,FONT_SRC_REGEX=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function toRegex(o){const i=o.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${i})(['"]?\\))`,"g")}function parseURLs(o){const i=[];return o.replace(URL_REGEX,(s,_,_e)=>(i.push(_e),s)),i.filter(s=>!isDataUrl(s))}async function embed(o,i,s,_,_e){try{const ct=s?resolveUrl(i,s):i,Mt=getMimeType(i);let Ft;return _e||(Ft=await resourceToDataURL(ct,Mt,_)),o.replace(toRegex(i),`$1${Ft}$3`)}catch{}return o}function filterPreferredFontFormat(o,{preferredFontFormat:i}){return i?o.replace(FONT_SRC_REGEX,s=>{for(;;){const[_,,_e]=URL_WITH_FORMAT_REGEX.exec(s)||[];if(!_e)return"";if(_e===i)return`src: ${_};`}}):o}function shouldEmbed(o){return o.search(URL_REGEX)!==-1}async function embedResources(o,i,s){if(!shouldEmbed(o))return o;const _=filterPreferredFontFormat(o,s);return parseURLs(_).reduce((ct,Mt)=>ct.then(Ft=>embed(Ft,Mt,i,s)),Promise.resolve(_))}async function embedProp(o,i,s){var _;const _e=(_=i.style)===null||_===void 0?void 0:_.getPropertyValue(o);if(_e){const ct=await embedResources(_e,null,s);return i.style.setProperty(o,ct,i.style.getPropertyPriority(o)),!0}return!1}async function embedBackground(o,i){await embedProp("background",o,i)||await embedProp("background-image",o,i),await embedProp("mask",o,i)||await embedProp("mask-image",o,i)}async function embedImageNode(o,i){const s=isInstanceOfElement(o,HTMLImageElement);if(!(s&&!isDataUrl(o.src))&&!(isInstanceOfElement(o,SVGImageElement)&&!isDataUrl(o.href.baseVal)))return;const _=s?o.src:o.href.baseVal,_e=await resourceToDataURL(_,getMimeType(_),i);await new Promise((ct,Mt)=>{o.onload=ct,o.onerror=Mt;const Ft=o;Ft.decode&&(Ft.decode=ct),Ft.loading==="lazy"&&(Ft.loading="eager"),s?(o.srcset="",o.src=_e):o.href.baseVal=_e})}async function embedChildren(o,i){const _=toArray(o.childNodes).map(_e=>embedImages(_e,i));await Promise.all(_).then(()=>o)}async function embedImages(o,i){isInstanceOfElement(o,Element)&&(await embedBackground(o,i),await embedImageNode(o,i),await embedChildren(o,i))}function applyStyle(o,i){const{style:s}=o;i.backgroundColor&&(s.backgroundColor=i.backgroundColor),i.width&&(s.width=`${i.width}px`),i.height&&(s.height=`${i.height}px`);const _=i.style;return _!=null&&Object.keys(_).forEach(_e=>{s[_e]=_[_e]}),o}const cssFetchCache={};async function fetchCSS(o){let i=cssFetchCache[o];if(i!=null)return i;const _=await(await fetch(o)).text();return i={url:o,cssText:_},cssFetchCache[o]=i,i}async function embedFonts(o,i){let s=o.cssText;const _=/url\(["']?([^"')]+)["']?\)/g,ct=(s.match(/url\([^)]+\)/g)||[]).map(async Mt=>{let Ft=Mt.replace(_,"$1");return Ft.startsWith("https://")||(Ft=new URL(Ft,o.url).href),fetchAsDataURL(Ft,i.fetchRequestInit,({result:Ut})=>(s=s.replace(Mt,`url(${Ut})`),[Mt,Ut]))});return Promise.all(ct).then(()=>s)}function parseCSS(o){if(o==null)return[];const i=[],s=/(\/\*[\s\S]*?\*\/)/gi;let _=o.replace(s,"");const _e=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const Ut=_e.exec(_);if(Ut===null)break;i.push(Ut[0])}_=_.replace(_e,"");const ct=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,Mt="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",Ft=new RegExp(Mt,"gi");for(;;){let Ut=ct.exec(_);if(Ut===null){if(Ut=Ft.exec(_),Ut===null)break;ct.lastIndex=Ft.lastIndex}else Ft.lastIndex=ct.lastIndex;i.push(Ut[0])}return i}async function getCSSRules(o,i){const s=[],_=[];return o.forEach(_e=>{if("cssRules"in _e)try{toArray(_e.cssRules||[]).forEach((ct,Mt)=>{if(ct.type===CSSRule.IMPORT_RULE){let Ft=Mt+1;const Ut=ct.href,Xt=fetchCSS(Ut).then(Kt=>embedFonts(Kt,i)).then(Kt=>parseCSS(Kt).forEach(nr=>{try{_e.insertRule(nr,nr.startsWith("@import")?Ft+=1:_e.cssRules.length)}catch(rr){console.error("Error inserting rule from remote css",{rule:nr,error:rr})}})).catch(Kt=>{console.error("Error loading remote css",Kt.toString())});_.push(Xt)}})}catch(ct){const Mt=o.find(Ft=>Ft.href==null)||document.styleSheets[0];_e.href!=null&&_.push(fetchCSS(_e.href).then(Ft=>embedFonts(Ft,i)).then(Ft=>parseCSS(Ft).forEach(Ut=>{Mt.insertRule(Ut,_e.cssRules.length)})).catch(Ft=>{console.error("Error loading remote stylesheet",Ft)})),console.error("Error inlining remote css file",ct)}}),Promise.all(_).then(()=>(o.forEach(_e=>{if("cssRules"in _e)try{toArray(_e.cssRules||[]).forEach(ct=>{s.push(ct)})}catch(ct){console.error(`Error while reading CSS rules from ${_e.href}`,ct)}}),s))}function getWebFontRules(o){return o.filter(i=>i.type===CSSRule.FONT_FACE_RULE).filter(i=>shouldEmbed(i.style.getPropertyValue("src")))}async function parseWebFontRules(o,i){if(o.ownerDocument==null)throw new Error("Provided element is not within a Document");const s=toArray(o.ownerDocument.styleSheets),_=await getCSSRules(s,i);return getWebFontRules(_)}async function getWebFontCSS(o,i){const s=await parseWebFontRules(o,i);return(await Promise.all(s.map(_e=>{const ct=_e.parentStyleSheet?_e.parentStyleSheet.href:null;return embedResources(_e.cssText,ct,i)}))).join(`
`)}async function embedWebFonts(o,i){const s=i.fontEmbedCSS!=null?i.fontEmbedCSS:i.skipFonts?null:await getWebFontCSS(o,i);if(s){const _=document.createElement("style"),_e=document.createTextNode(s);_.appendChild(_e),o.firstChild?o.insertBefore(_,o.firstChild):o.appendChild(_)}}async function toSvg(o,i={}){const{width:s,height:_}=getImageSize(o,i),_e=await cloneNode(o,i,!0);return await embedWebFonts(_e,i),await embedImages(_e,i),applyStyle(_e,i),await nodeToDataURL(_e,s,_)}async function toCanvas(o,i={}){const{width:s,height:_}=getImageSize(o,i),_e=await toSvg(o,i),ct=await createImage(_e),Mt=document.createElement("canvas"),Ft=Mt.getContext("2d"),Ut=i.pixelRatio||getPixelRatio(),Xt=i.canvasWidth||s,Kt=i.canvasHeight||_;return Mt.width=Xt*Ut,Mt.height=Kt*Ut,i.skipAutoScale||checkCanvasDimensions(Mt),Mt.style.width=`${Xt}`,Mt.style.height=`${Kt}`,i.backgroundColor&&(Ft.fillStyle=i.backgroundColor,Ft.fillRect(0,0,Mt.width,Mt.height)),Ft.drawImage(ct,0,0,Mt.width,Mt.height),Mt}async function toPng(o,i={}){return(await toCanvas(o,i)).toDataURL()}const App=()=>{const o=reactExports.useRef(null),[i,s]=reactExports.useState(null),_=async ct=>{if(console.log(ct),o.current)try{const Mt=await toPng(o.current);s(Mt),await navigator.clipboard.writeText(Mt),alert("Screenshot copied to clipboard!")}catch(Mt){console.error("Error converting to base64 or copying:",Mt)}},_e=async()=>{if(i)try{await navigator.clipboard.writeText(i),alert("Base64 image copied to clipboard!")}catch(ct){console.error("Failed to copy text to clipboard:",ct)}};return jsxRuntimeExports.jsxs("div",{className:"container",children:[jsxRuntimeExports.jsx("h1",{className:"heading",children:"Formik Form Screenshot to Base64"}),jsxRuntimeExports.jsx(Formik,{initialValues:{name:"",email:"",password:"",confirmPassword:""},validate:ct=>{const Mt={};return ct.name||(Mt.name="Required"),ct.email||(Mt.email="Required"),ct.password||(Mt.password="Required"),ct.confirmPassword?ct.password!==ct.confirmPassword&&(Mt.confirmPassword="Passwords must match"):Mt.confirmPassword="Required",Mt},onSubmit:_,children:({isSubmitting:ct})=>jsxRuntimeExports.jsx("div",{ref:o,children:jsxRuntimeExports.jsxs(Form,{className:"form",children:[jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsx(Field,{component:InputField,placeholder:"Name",name:"name",inputMode:"numeric"}),jsxRuntimeExports.jsx(ErrorMessage,{name:"name",component:"div",className:"error"})]}),jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsx(Field,{component:InputField,placeholder:"email",name:"email",inputMode:"email"}),jsxRuntimeExports.jsx(ErrorMessage,{name:"email",component:"div",className:"error"})]}),jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsx("label",{htmlFor:"password",className:"label",children:"Password:"}),jsxRuntimeExports.jsx(Field,{component:InputField,placeholder:" Password",name:"password",inputMode:"password"}),jsxRuntimeExports.jsx(ErrorMessage,{name:"password",component:"div",className:"error"})]}),jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsx("label",{htmlFor:"confirmPassword",className:"label",children:"Confirm Password:"}),jsxRuntimeExports.jsx(Field,{component:InputField,placeholder:"confirm Password",name:"confirmPassword",inputMode:"password"}),jsxRuntimeExports.jsx(ErrorMessage,{name:"confirmPassword",component:"div",className:"error"})]}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:ct,className:"button",children:"Submit and Copy Screenshot"})]})})}),i&&jsxRuntimeExports.jsxs("div",{className:"output-container",children:[jsxRuntimeExports.jsx("h2",{className:"output-heading",children:"Base64 Screenshot:"}),jsxRuntimeExports.jsx("textarea",{value:i,readOnly:!0,className:"textarea"}),jsxRuntimeExports.jsx("button",{onClick:_e,className:"copy-button",children:"Copy Base64 Image"})]})]})};createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));
